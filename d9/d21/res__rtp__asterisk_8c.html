<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_rtp_asterisk.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">res_rtp_asterisk.c File Reference<div class="ingroups"><a class="el" href="../../d9/d8f/group__rtp__engines.html">Module: RTP Engines</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Supports RTP and RTCP with Symmetric RTP support for NAT traversal.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;openssl/opensslconf.h&gt;</code><br />
<code>#include &lt;openssl/opensslv.h&gt;</code><br />
<code>#include &lt;pjlib.h&gt;</code><br />
<code>#include &lt;pjlib-util.h&gt;</code><br />
<code>#include &lt;pjnath.h&gt;</code><br />
<code>#include &lt;ifaddrs.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../da/dd6/conversions_8h_source.html">asterisk/conversions.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d5b/options_8h_source.html">asterisk/options.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d1f/logger__category_8h_source.html">asterisk/logger_category.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d00/stun_8h_source.html">asterisk/stun.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html">asterisk/frame.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d1c/format__cache_8h_source.html">asterisk/format_cache.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d59/acl_8h_source.html">asterisk/acl.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d45/manager_8h_source.html">asterisk/manager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d1e/unaligned_8h_source.html">asterisk/unaligned.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/dde/rtp__engine_8h_source.html">asterisk/rtp_engine.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d7f/smoother_8h_source.html">asterisk/smoother.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d1d/uuid_8h_source.html">asterisk/uuid.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d82/data__buffer_8h_source.html">asterisk/data_buffer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/dd5/res__pjproject_8h_source.html">asterisk/res_pjproject.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d29/include_2asterisk_2security__events_8h_source.html">asterisk/security_events.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_rtp_asterisk.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d07/res__rtp__asterisk_8c__incl.png" border="0" usemap="#res__rtp__asterisk_8c" alt=""/></div>
<map name="res__rtp__asterisk_8c" id="res__rtp__asterisk_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="2083,80,2167,107"/>
<area shape="rect" id="node16" href="../../da/dd6/conversions_8h.html" title="Conversion utility functions. " alt="" coords="2033,155,2197,181"/>
<area shape="rect" id="node17" href="../../d7/d5b/options_8h.html" title="Options provided by main asterisk program. " alt="" coords="1997,528,2131,555"/>
<area shape="rect" id="node18" href="../../d5/d1f/logger__category_8h.html" title="asterisk/logger_category.h" alt="" coords="5,155,195,181"/>
<area shape="rect" id="node20" href="../../d3/d00/stun_8h.html" title="STUN support. " alt="" coords="134,80,250,107"/>
<area shape="rect" id="node22" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="1286,80,1397,107"/>
<area shape="rect" id="node23" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1035,155,1173,181"/>
<area shape="rect" id="node24" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="723,229,850,256"/>
<area shape="rect" id="node28" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="891,379,1005,405"/>
<area shape="rect" id="node30" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1401,229,1527,256"/>
<area shape="rect" id="node31" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1669,304,1784,331"/>
<area shape="rect" id="node38" href="../../db/d1c/format__cache_8h.html" title="Media Format Cache API. " alt="" coords="3116,80,3292,107"/>
<area shape="rect" id="node39" href="../../d5/d59/acl_8h.html" title="Access Control of various sorts. " alt="" coords="320,229,427,256"/>
<area shape="rect" id="node40" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="605,155,707,181"/>
<area shape="rect" id="node41" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="451,229,597,256"/>
<area shape="rect" id="node42" href="../../d2/d1e/unaligned_8h.html" title="Handle unaligned data access. " alt="" coords="3317,80,3467,107"/>
<area shape="rect" id="node43" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1789,229,1925,256"/>
<area shape="rect" id="node44" href="../../d5/dde/rtp__engine_8h.html" title="Pluggable RTP Architecture. " alt="" coords="795,80,951,107"/>
<area shape="rect" id="node45" href="../../d6/d7f/smoother_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1707,155,1856,181"/>
<area shape="rect" id="node46" href="../../dd/d1d/uuid_8h.html" title="Universally unique identifier support. " alt="" coords="3492,80,3607,107"/>
<area shape="rect" id="node47" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="606,80,719,107"/>
<area shape="rect" id="node48" href="../../d7/d82/data__buffer_8h.html" title="Data Buffer API. " alt="" coords="3631,80,3791,107"/>
<area shape="rect" id="node49" href="../../df/dd5/res__pjproject_8h.html" title="asterisk/res_pjproject.h" alt="" coords="3815,80,3985,107"/>
<area shape="rect" id="node50" href="../../d0/d29/include_2asterisk_2security__events_8h.html" title="Security Event Reporting API. " alt="" coords="4010,80,4198,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="2232,603,2387,629"/>
<area shape="rect" id="node4" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="2221,155,2358,181"/>
<area shape="rect" id="node6" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="2382,155,2517,181"/>
<area shape="rect" id="node19" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1227,453,1354,480"/>
<area shape="rect" id="node21" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="381,379,520,405"/>
<area shape="rect" id="node25" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="1036,304,1167,331"/>
<area shape="rect" id="node29" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="875,229,1021,256"/>
<area shape="rect" id="node32" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1391,379,1548,405"/>
<area shape="rect" id="node33" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="833,155,959,181"/>
<area shape="rect" id="node34" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="1603,229,1765,256"/>
<area shape="rect" id="node35" href="../../d6/dd7/presencestate_8h.html" title="Presence state management. " alt="" coords="1299,155,1479,181"/>
<area shape="rect" id="node36" href="../../d6/da0/hashtab_8h.html" title="Generic (perhaps overly so) hashtable implementation Hash Table support in Asterisk. " alt="" coords="1191,304,1331,331"/>
<area shape="rect" id="node37" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="1355,304,1490,331"/>
<area shape="rect" id="node27" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="735,304,886,331"/>
<area shape="rect" id="node26" href="../../d1/d84/endian_8h.html" title="Asterisk architecture endianess compatibility definitions. " alt="" coords="1515,304,1645,331"/>
</map>
</div>
</div>
<p><a href="../../d9/d21/res__rtp__asterisk_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/db5/structast__ice__host__candidate.html">ast_ice_host_candidate</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure which contains ICE host candidate mapping information.  <a href="../../d4/db5/structast__ice__host__candidate.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d2b/structast__rtcp.html">ast_rtcp</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure defining an RTCP session.  <a href="../../d8/d2b/structast__rtcp.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">RTP session description.  <a href="../../dd/da7/structast__rtp.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1f/structast__rtp__ioqueue__thread.html">ast_rtp_ioqueue_thread</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure which contains ioqueue thread information.  <a href="../../db/d1f/structast__rtp__ioqueue__thread.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html">ast_rtp_rtcp_nack_payload</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure for storing RTP packets for retransmission.  <a href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d42/structframe__list.html">frame_list</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/db0/structhost__candidates.html">host_candidates</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of ICE host candidate mappings.  <a href="../../d7/db0/structhost__candidates.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db8/structice__wrap.html">ice_wrap</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/de0/structioqueues.html">ioqueues</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of ioqueue threads.  <a href="../../d2/de0/structioqueues.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d06/structoptional__ts.html">optional_ts</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d41/structrtp__drop__packets__data.html">rtp_drop_packets_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7d/structrtp__learning__info.html">rtp_learning_info</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">RTP learning mode tracking information.  <a href="../../d6/d7d/structrtp__learning__info.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dbb/structrtp__red.html">rtp_red</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/de7/structrtp__ssrc__mapping.html">rtp_ssrc_mapping</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure used for mapping an incoming SSRC to an RTP instance.  <a href="../../db/de7/structrtp__ssrc__mapping.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html">rtp_transport_wide_cc_packet_statistics</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packet statistics (used for transport-cc)  <a href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d4f/structrtp__transport__wide__cc__statistics.html">rtp_transport_wide_cc_statistics</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Statistics information (used for transport-cc)  <a href="../../d9/d4f/structrtp__transport__wide__cc__statistics.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac5a44ba6e8dbccfe0f8ba5bfd1e9b10d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ac5a44ba6e8dbccfe0f8ba5bfd1e9b10d">CALC_LEARNING_MIN_DURATION</a>(count)&#160;&#160;&#160;(((count) - 1) * 9 - 5)</td></tr>
<tr class="memdesc:ac5a44ba6e8dbccfe0f8ba5bfd1e9b10d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the min learning duration in ms.  <a href="#ac5a44ba6e8dbccfe0f8ba5bfd1e9b10d">More...</a><br /></td></tr>
<tr class="separator:ac5a44ba6e8dbccfe0f8ba5bfd1e9b10d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78f0d65ed005465b56a9f04834077907"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a78f0d65ed005465b56a9f04834077907">DEFAULT_DTLS_MTU</a>&#160;&#160;&#160;1200</td></tr>
<tr class="separator:a78f0d65ed005465b56a9f04834077907"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d5f788ed405ca3ab6a778892570b2a2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a3d5f788ed405ca3ab6a778892570b2a2">DEFAULT_DTMF_TIMEOUT</a>&#160;&#160;&#160;(150 * (8000 / 1000))</td></tr>
<tr class="separator:a3d5f788ed405ca3ab6a778892570b2a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1362d4944e44c2bb083c0d185b9685f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a1362d4944e44c2bb083c0d185b9685f6">DEFAULT_ICESUPPORT</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a1362d4944e44c2bb083c0d185b9685f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9e0d41ebd37d2b8e758b7fff48d31f0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af9e0d41ebd37d2b8e758b7fff48d31f0">DEFAULT_LEARNING_MIN_DURATION</a>&#160;&#160;&#160;<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ac5a44ba6e8dbccfe0f8ba5bfd1e9b10d">CALC_LEARNING_MIN_DURATION</a>(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a19b83f0b08541761e041bc81db287bce">DEFAULT_LEARNING_MIN_SEQUENTIAL</a>)</td></tr>
<tr class="separator:af9e0d41ebd37d2b8e758b7fff48d31f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19b83f0b08541761e041bc81db287bce"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a19b83f0b08541761e041bc81db287bce">DEFAULT_LEARNING_MIN_SEQUENTIAL</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a19b83f0b08541761e041bc81db287bce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a332be34df280794db6d6915c32ab842e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a332be34df280794db6d6915c32ab842e">DEFAULT_RTP_END</a>&#160;&#160;&#160;31000</td></tr>
<tr class="separator:a332be34df280794db6d6915c32ab842e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1155654303702ccc5fdcee752b634d2f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a1155654303702ccc5fdcee752b634d2f">DEFAULT_RTP_RECV_BUFFER_SIZE</a>&#160;&#160;&#160;20</td></tr>
<tr class="separator:a1155654303702ccc5fdcee752b634d2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab26cc2139530464f618633637abd2ac2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ab26cc2139530464f618633637abd2ac2">DEFAULT_RTP_SEND_BUFFER_SIZE</a>&#160;&#160;&#160;250</td></tr>
<tr class="separator:ab26cc2139530464f618633637abd2ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa01c54d6d9412e8278c7422dab8899e5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aa01c54d6d9412e8278c7422dab8899e5">DEFAULT_RTP_START</a>&#160;&#160;&#160;5000</td></tr>
<tr class="separator:aa01c54d6d9412e8278c7422dab8899e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73b8af2a30d6bdd4dc566f24ddb2f51f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a73b8af2a30d6bdd4dc566f24ddb2f51f">DEFAULT_SRTP_REPLAY_PROTECTION</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a73b8af2a30d6bdd4dc566f24ddb2f51f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb729ec664cf95a04d65276f08a80b24"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aeb729ec664cf95a04d65276f08a80b24">DEFAULT_STRICT_RTP</a>&#160;&#160;&#160;<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4aa60bd948f9a50c92c99d384481de8448">STRICT_RTP_YES</a></td></tr>
<tr class="separator:aeb729ec664cf95a04d65276f08a80b24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af927b84002d0ac80345425c105ed0d10"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af927b84002d0ac80345425c105ed0d10">DEFAULT_STUN_SOFTWARE_ATTRIBUTE</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:af927b84002d0ac80345425c105ed0d10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af54f297bc8f157b342b0fe94bbbbb899"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af54f297bc8f157b342b0fe94bbbbb899">DEFAULT_TURN_PORT</a>&#160;&#160;&#160;3478</td></tr>
<tr class="separator:af54f297bc8f157b342b0fe94bbbbb899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46f52e38712b5b348ad95619f3d104ae"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a46f52e38712b5b348ad95619f3d104ae">DTMF_SAMPLE_RATE_MS</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a46f52e38712b5b348ad95619f3d104ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b696f676e4e78260e3356973f647034"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a1b696f676e4e78260e3356973f647034">FLAG_3389_WARNING</a>&#160;&#160;&#160;(1 &lt;&lt; 0)</td></tr>
<tr class="separator:a1b696f676e4e78260e3356973f647034"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a512509bde2176b98fbdcbceb1a528f6d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a512509bde2176b98fbdcbceb1a528f6d">FLAG_DTMF_COMPENSATE</a>&#160;&#160;&#160;(1 &lt;&lt; 4)</td></tr>
<tr class="separator:a512509bde2176b98fbdcbceb1a528f6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab67e21f67a96dd6a9e1b0450ecddecf3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ab67e21f67a96dd6a9e1b0450ecddecf3">FLAG_NAT_ACTIVE</a>&#160;&#160;&#160;(3 &lt;&lt; 1)</td></tr>
<tr class="separator:ab67e21f67a96dd6a9e1b0450ecddecf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ea8f10bd8b1fab6990526c3271a7b59"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a7ea8f10bd8b1fab6990526c3271a7b59">FLAG_NAT_INACTIVE</a>&#160;&#160;&#160;(0 &lt;&lt; 1)</td></tr>
<tr class="separator:a7ea8f10bd8b1fab6990526c3271a7b59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2adc4c49cf65121c15dc838f43c6cb0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ad2adc4c49cf65121c15dc838f43c6cb0">FLAG_NAT_INACTIVE_NOWARN</a>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr class="separator:ad2adc4c49cf65121c15dc838f43c6cb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7d9bd5ba01a9647e359799e0d201cbf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ab7d9bd5ba01a9647e359799e0d201cbf">FLAG_NEED_MARKER_BIT</a>&#160;&#160;&#160;(1 &lt;&lt; 3)</td></tr>
<tr class="separator:ab7d9bd5ba01a9647e359799e0d201cbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd9786ad278407e1a62f847e4f6434a7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#abd9786ad278407e1a62f847e4f6434a7">FLAG_REQ_LOCAL_BRIDGE_BIT</a>&#160;&#160;&#160;(1 &lt;&lt; 5)</td></tr>
<tr class="separator:abd9786ad278407e1a62f847e4f6434a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12a850150b82a6ce1077e204d4f5638c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a12a850150b82a6ce1077e204d4f5638c">MAX_TIMESTAMP_SKEW</a>&#160;&#160;&#160;640</td></tr>
<tr class="separator:a12a850150b82a6ce1077e204d4f5638c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade9a07c6403adc775d18c0bc71be6c92"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ade9a07c6403adc775d18c0bc71be6c92">MAXIMUM_RTP_PORT</a>&#160;&#160;&#160;65535</td></tr>
<tr class="separator:ade9a07c6403adc775d18c0bc71be6c92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89e0d6d0798eee9bc6c6c858fe3401fe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a89e0d6d0798eee9bc6c6c858fe3401fe">MAXIMUM_RTP_RECV_BUFFER_SIZE</a>&#160;&#160;&#160;(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a1155654303702ccc5fdcee752b634d2f">DEFAULT_RTP_RECV_BUFFER_SIZE</a> + 20)</td></tr>
<tr class="separator:a89e0d6d0798eee9bc6c6c858fe3401fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6e0d898757b96d87a1d93e446d71bdd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af6e0d898757b96d87a1d93e446d71bdd">MAXIMUM_RTP_SEND_BUFFER_SIZE</a>&#160;&#160;&#160;(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ab26cc2139530464f618633637abd2ac2">DEFAULT_RTP_SEND_BUFFER_SIZE</a> + 200)</td></tr>
<tr class="separator:af6e0d898757b96d87a1d93e446d71bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4c6fd39ea1aa9fe6b3c067224c18550"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aa4c6fd39ea1aa9fe6b3c067224c18550">MINIMUM_RTP_PORT</a>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:aa4c6fd39ea1aa9fe6b3c067224c18550"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa94121f808aa4871f949d54edef0e79c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aa94121f808aa4871f949d54edef0e79c">MISSING_SEQNOS_ADDED_TRIGGER</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:aa94121f808aa4871f949d54edef0e79c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a038f2cbb7068c08f4be16b20f6ffdb39"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a038f2cbb7068c08f4be16b20f6ffdb39">OLD_PACKET_COUNT</a>&#160;&#160;&#160;1000</td></tr>
<tr class="separator:a038f2cbb7068c08f4be16b20f6ffdb39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a8359edb63fbe2754be0314451ce8b3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a3a8359edb63fbe2754be0314451ce8b3">RTCP_DEFAULT_INTERVALMS</a>&#160;&#160;&#160;5000</td></tr>
<tr class="separator:a3a8359edb63fbe2754be0314451ce8b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1816e1926678b2ba35fde74295580c69"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a1816e1926678b2ba35fde74295580c69">RTCP_FB_NACK_BLOCK_WORD_LENGTH</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a1816e1926678b2ba35fde74295580c69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dbf005049ce30693e57c45fdd45250c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a6dbf005049ce30693e57c45fdd45250c">RTCP_FB_REMB_BLOCK_WORD_LENGTH</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a6dbf005049ce30693e57c45fdd45250c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bd8d430ff046850f29c8b141d5a61e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a5bd8d430ff046850f29c8b141d5a61e6">RTCP_HEADER_SSRC_LENGTH</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a5bd8d430ff046850f29c8b141d5a61e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9492fccb2be755522d50f4d514006cb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af9492fccb2be755522d50f4d514006cb">RTCP_LENGTH_MASK</a>&#160;&#160;&#160;0xFFFF</td></tr>
<tr class="separator:af9492fccb2be755522d50f4d514006cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c4d8290d22254494ae62e8b6974ec35"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a0c4d8290d22254494ae62e8b6974ec35">RTCP_LENGTH_SHIFT</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a0c4d8290d22254494ae62e8b6974ec35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40ff8a6874204fbbe6c375ae79d17b5e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a40ff8a6874204fbbe6c375ae79d17b5e">RTCP_MAX_INTERVALMS</a>&#160;&#160;&#160;60000</td></tr>
<tr class="separator:a40ff8a6874204fbbe6c375ae79d17b5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc283785a565edd42110d25d9ade9080"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#abc283785a565edd42110d25d9ade9080">RTCP_MIN_INTERVALMS</a>&#160;&#160;&#160;500</td></tr>
<tr class="separator:abc283785a565edd42110d25d9ade9080"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59327ae7b42d4b9c921ba3e866494348"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a59327ae7b42d4b9c921ba3e866494348">RTCP_PADDING_MASK</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:a59327ae7b42d4b9c921ba3e866494348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65b04ffacf79df77e76eb4feb1b3eacd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a65b04ffacf79df77e76eb4feb1b3eacd">RTCP_PADDING_SHIFT</a>&#160;&#160;&#160;29</td></tr>
<tr class="separator:a65b04ffacf79df77e76eb4feb1b3eacd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae21bfbb41fc9426a8b032904a36dca6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aae21bfbb41fc9426a8b032904a36dca6">RTCP_PAYLOAD_TYPE_MASK</a>&#160;&#160;&#160;0xFF</td></tr>
<tr class="separator:aae21bfbb41fc9426a8b032904a36dca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a102b1c7dd32df715a82ef484f51bdb9b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a102b1c7dd32df715a82ef484f51bdb9b">RTCP_PAYLOAD_TYPE_SHIFT</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:a102b1c7dd32df715a82ef484f51bdb9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a6a8ff12e4ca01f1783dd6a8ab2e449"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a9a6a8ff12e4ca01f1783dd6a8ab2e449">RTCP_PT_APP</a>&#160;&#160;&#160;204</td></tr>
<tr class="separator:a9a6a8ff12e4ca01f1783dd6a8ab2e449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5723708baf43b6326706331795fcd52f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a5723708baf43b6326706331795fcd52f">RTCP_PT_BYE</a>&#160;&#160;&#160;203</td></tr>
<tr class="separator:a5723708baf43b6326706331795fcd52f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38fce7504b6d0ac96b1f07fa86598ce8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a38fce7504b6d0ac96b1f07fa86598ce8">RTCP_PT_FUR</a>&#160;&#160;&#160;192</td></tr>
<tr class="separator:a38fce7504b6d0ac96b1f07fa86598ce8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a711189b19386915beec87d8edddb3464"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a711189b19386915beec87d8edddb3464">RTCP_PT_PSFB</a>&#160;&#160;&#160;<a class="el" href="../../d5/dde/rtp__engine_8h.html#a02281c7f49b834e978a6fa7d7dd19de2">AST_RTP_RTCP_PSFB</a></td></tr>
<tr class="separator:a711189b19386915beec87d8edddb3464"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d8564f9c96df1cd1076ad4f6faed7ab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d8564f9c96df1cd1076ad4f6faed7ab">RTCP_PT_RR</a>&#160;&#160;&#160;<a class="el" href="../../d5/dde/rtp__engine_8h.html#a776b38f4dc6889fc67809bd9a226bb18">AST_RTP_RTCP_RR</a></td></tr>
<tr class="separator:a4d8564f9c96df1cd1076ad4f6faed7ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6a84235b636497872f31a832a8b17af"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aa6a84235b636497872f31a832a8b17af">RTCP_PT_SDES</a>&#160;&#160;&#160;202</td></tr>
<tr class="separator:aa6a84235b636497872f31a832a8b17af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe50a9d9c36c702889863e206f4502c6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#abe50a9d9c36c702889863e206f4502c6">RTCP_PT_SR</a>&#160;&#160;&#160;<a class="el" href="../../d5/dde/rtp__engine_8h.html#a3fa0ae6b0bf0bc054292890cfa0499e8">AST_RTP_RTCP_SR</a></td></tr>
<tr class="separator:abe50a9d9c36c702889863e206f4502c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c460b328c3e2d05ed29f3e492b42ed9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a9c460b328c3e2d05ed29f3e492b42ed9">RTCP_REPORT_COUNT_MASK</a>&#160;&#160;&#160;0x1F</td></tr>
<tr class="separator:a9c460b328c3e2d05ed29f3e492b42ed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a358dac6e270355f7ca564ffcef4fa370"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a358dac6e270355f7ca564ffcef4fa370">RTCP_REPORT_COUNT_SHIFT</a>&#160;&#160;&#160;24</td></tr>
<tr class="separator:a358dac6e270355f7ca564ffcef4fa370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2295ead5af93e27d5a32ecee7e4cb40a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2295ead5af93e27d5a32ecee7e4cb40a">RTCP_RR_BLOCK_WORD_LENGTH</a>&#160;&#160;&#160;6</td></tr>
<tr class="separator:a2295ead5af93e27d5a32ecee7e4cb40a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f9861ee11cba20a1a0d3eea4840cbc0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2f9861ee11cba20a1a0d3eea4840cbc0">RTCP_SR_BLOCK_WORD_LENGTH</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:a2f9861ee11cba20a1a0d3eea4840cbc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6086e203d0d3d4888e999fa6e9b486b6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a6086e203d0d3d4888e999fa6e9b486b6">RTCP_VALID_MASK</a>&#160;&#160;&#160;(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ac45a536a85bcf54c7d1aafac6bb40e30">RTCP_VERSION_MASK_SHIFTED</a> | (((<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aae21bfbb41fc9426a8b032904a36dca6">RTCP_PAYLOAD_TYPE_MASK</a> &amp; ~0x1)) &lt;&lt; RTCP_PAYLOAD_TYPE_SHIFT))</td></tr>
<tr class="separator:a6086e203d0d3d4888e999fa6e9b486b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a178f67ed7bee20c65399faeb0b65fd3a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a178f67ed7bee20c65399faeb0b65fd3a">RTCP_VALID_VALUE</a>&#160;&#160;&#160;(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a9411e6f925f7e291f033d6b1b6584703">RTCP_VERSION_SHIFTED</a> | (<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#abe50a9d9c36c702889863e206f4502c6">RTCP_PT_SR</a> &lt;&lt; <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a102b1c7dd32df715a82ef484f51bdb9b">RTCP_PAYLOAD_TYPE_SHIFT</a>))</td></tr>
<tr class="separator:a178f67ed7bee20c65399faeb0b65fd3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bc9fd275b32a705d0ac742c2ac4e9c8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a1bc9fd275b32a705d0ac742c2ac4e9c8">RTCP_VERSION</a>&#160;&#160;&#160;2U</td></tr>
<tr class="separator:a1bc9fd275b32a705d0ac742c2ac4e9c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae44e6f0fccf9f2c4dcf5316de7977342"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ae44e6f0fccf9f2c4dcf5316de7977342">RTCP_VERSION_MASK</a>&#160;&#160;&#160;0x03</td></tr>
<tr class="separator:ae44e6f0fccf9f2c4dcf5316de7977342"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac45a536a85bcf54c7d1aafac6bb40e30"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ac45a536a85bcf54c7d1aafac6bb40e30">RTCP_VERSION_MASK_SHIFTED</a>&#160;&#160;&#160;(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ae44e6f0fccf9f2c4dcf5316de7977342">RTCP_VERSION_MASK</a> &lt;&lt; <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a7e01818501ecff63931f14aea1e36004">RTCP_VERSION_SHIFT</a>)</td></tr>
<tr class="separator:ac45a536a85bcf54c7d1aafac6bb40e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e01818501ecff63931f14aea1e36004"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a7e01818501ecff63931f14aea1e36004">RTCP_VERSION_SHIFT</a>&#160;&#160;&#160;30</td></tr>
<tr class="separator:a7e01818501ecff63931f14aea1e36004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9411e6f925f7e291f033d6b1b6584703"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a9411e6f925f7e291f033d6b1b6584703">RTCP_VERSION_SHIFTED</a>&#160;&#160;&#160;(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a1bc9fd275b32a705d0ac742c2ac4e9c8">RTCP_VERSION</a> &lt;&lt; <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a7e01818501ecff63931f14aea1e36004">RTCP_VERSION_SHIFT</a>)</td></tr>
<tr class="separator:a9411e6f925f7e291f033d6b1b6584703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b7005812dac9fa0577e157db320ae4c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a3b7005812dac9fa0577e157db320ae4c">RTP_DTLS_ESTABLISHED</a>&#160;&#160;&#160;-37</td></tr>
<tr class="separator:a3b7005812dac9fa0577e157db320ae4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8037e984fd1fcc8777ec928d65b9ded"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ad8037e984fd1fcc8777ec928d65b9ded">RTP_MTU</a>&#160;&#160;&#160;1200</td></tr>
<tr class="separator:ad8037e984fd1fcc8777ec928d65b9ded"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3a188c3caa83026e351d58ef855424a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af3a188c3caa83026e351d58ef855424a">RTP_SEQ_MOD</a>&#160;&#160;&#160;(1&lt;&lt;16)</td></tr>
<tr class="separator:af3a188c3caa83026e351d58ef855424a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae55dc6ec08efa57214027cb16f7e83c1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ae55dc6ec08efa57214027cb16f7e83c1">SEQNO_CYCLE_OVER</a>&#160;&#160;&#160;65536</td></tr>
<tr class="separator:ae55dc6ec08efa57214027cb16f7e83c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e6aec67d7670cbcf4efa4ac86c8d242"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a4e6aec67d7670cbcf4efa4ac86c8d242">SRTP_MASTER_KEY_LEN</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:a4e6aec67d7670cbcf4efa4ac86c8d242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a358ca82334e20a5a41d548c5caf6680b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a358ca82334e20a5a41d548c5caf6680b">SRTP_MASTER_LEN</a>&#160;&#160;&#160;(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a4e6aec67d7670cbcf4efa4ac86c8d242">SRTP_MASTER_KEY_LEN</a> + <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aab38738dfce00dedb179f9fe1c4a90ee">SRTP_MASTER_SALT_LEN</a>)</td></tr>
<tr class="separator:a358ca82334e20a5a41d548c5caf6680b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab38738dfce00dedb179f9fe1c4a90ee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aab38738dfce00dedb179f9fe1c4a90ee">SRTP_MASTER_SALT_LEN</a>&#160;&#160;&#160;14</td></tr>
<tr class="separator:aab38738dfce00dedb179f9fe1c4a90ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8e8607839162548768620a5213e7b1a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ac8e8607839162548768620a5213e7b1a">SSRC_MAPPING_ELEM_CMP</a>(elem,  <a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)&#160;&#160;&#160;((elem).instance == (<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>))</td></tr>
<tr class="memdesc:ac8e8607839162548768620a5213e7b1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">SSRC mapping comparator for <a class="el" href="../../d6/d68/vector_8h.html#a671c51a3e6202230ef9d2330624ea996" title="Remove an element from a vector that matches the given comparison. ">AST_VECTOR_REMOVE_CMP_UNORDERED()</a>  <a href="#ac8e8607839162548768620a5213e7b1a">More...</a><br /></td></tr>
<tr class="separator:ac8e8607839162548768620a5213e7b1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91b1655b35022bc0a34e7187af475b26"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a91b1655b35022bc0a34e7187af475b26">STRICT_RTP_LEARN_TIMEOUT</a>&#160;&#160;&#160;5000</td></tr>
<tr class="memdesc:a91b1655b35022bc0a34e7187af475b26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Strict RTP learning timeout time in milliseconds.  <a href="#a91b1655b35022bc0a34e7187af475b26">More...</a><br /></td></tr>
<tr class="separator:a91b1655b35022bc0a34e7187af475b26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7249b0dec2fde720fe4a30d04ce3482"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ad7249b0dec2fde720fe4a30d04ce3482">TRANSPORT_SOCKET_RTCP</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ad7249b0dec2fde720fe4a30d04ce3482"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48d8ff743c69a9da11d543b387078590"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a48d8ff743c69a9da11d543b387078590">TRANSPORT_SOCKET_RTP</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a48d8ff743c69a9da11d543b387078590"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a076af3a6d50860b502ce8182a5105dbd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a076af3a6d50860b502ce8182a5105dbd">TRANSPORT_TURN_RTCP</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a076af3a6d50860b502ce8182a5105dbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa05629cc7dbc25042c121a9670f150e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aa05629cc7dbc25042c121a9670f150e3">TRANSPORT_TURN_RTP</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:aa05629cc7dbc25042c121a9670f150e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03f4d7d97d914208e1f779d1c09db7bb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a03f4d7d97d914208e1f779d1c09db7bb">TURN_STATE_WAIT_TIME</a>&#160;&#160;&#160;2000</td></tr>
<tr class="separator:a03f4d7d97d914208e1f779d1c09db7bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ce9e87059f0aa901cba14a9aab5e1a9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a0ce9e87059f0aa901cba14a9aab5e1a9">ZFONE_PROFILE_ID</a>&#160;&#160;&#160;0x505a</td></tr>
<tr class="separator:a0ce9e87059f0aa901cba14a9aab5e1a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a41f01397502dd66338663a1fa72382e4"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4">strict_rtp_mode</a> { <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4abe40d855eebd173a196e0ea75d0d4b9e">STRICT_RTP_NO</a> = 0, 
<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4aa60bd948f9a50c92c99d384481de8448">STRICT_RTP_YES</a>, 
<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4a82328ab5af804ea335d057e3be8f7ae4">STRICT_RTP_SEQNO</a>
 }</td></tr>
<tr class="separator:a41f01397502dd66338663a1fa72382e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca6484d75ee9d79a5d4447149f9c8c4b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4b">strict_rtp_state</a> { <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1">STRICT_RTP_OPEN</a> = 0, 
<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4ba0c26c1144bb830775979deb20e049368">STRICT_RTP_LEARN</a>, 
<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4baff585ea9a2059021ce5a5f4a7ed8895f">STRICT_RTP_CLOSED</a>
 }</td></tr>
<tr class="separator:aca6484d75ee9d79a5d4447149f9c8c4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acd1ff5e1228969321088d10842407b01"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#acd1ff5e1228969321088d10842407b01">__init_pj_thread_storage</a> (void)</td></tr>
<tr class="separator:acd1ff5e1228969321088d10842407b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91f96771023031aa67c022c6ab35fcb3"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a91f96771023031aa67c022c6ab35fcb3">__rtp_find_instance_by_ssrc</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, unsigned int ssrc, int source)</td></tr>
<tr class="separator:a91f96771023031aa67c022c6ab35fcb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb6d9500accafb5cb6df3a6ee6e73990"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#abb6d9500accafb5cb6df3a6ee6e73990">__rtp_recvfrom</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, void *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t size, int flags, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sa, int rtcp)</td></tr>
<tr class="separator:abb6d9500accafb5cb6df3a6ee6e73990"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abef5f1e6bda48737ffca70d3123023b6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#abef5f1e6bda48737ffca70d3123023b6">__rtp_sendto</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, void *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t size, int flags, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sa, int rtcp, int *via_ice, int use_srtp)</td></tr>
<tr class="separator:abef5f1e6bda48737ffca70d3123023b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4adfeec3f6af24e2ede7e730bee32eb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af4adfeec3f6af24e2ede7e730bee32eb">acl_change_stasis_cb</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:af4adfeec3f6af24e2ede7e730bee32eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6ad0b308e683619205502e38e17d24b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ab6ad0b308e683619205502e38e17d24b">ast2pj_rtp_ice_role</a> (enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fb">ast_rtp_ice_role</a> ast_role, enum pj_ice_sess_role *pj_role)</td></tr>
<tr class="separator:ab6ad0b308e683619205502e38e17d24b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adabbce218f278a5ee9224a5c4dd94754"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#adabbce218f278a5ee9224a5c4dd94754">ast_rtcp_calc_interval</a> (struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp)</td></tr>
<tr class="separator:adabbce218f278a5ee9224a5c4dd94754"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac39a35490fcf802b678e67b448eb381c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ac39a35490fcf802b678e67b448eb381c">ast_rtcp_calculate_sr_rr_statistics</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *rtcp_report, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address, int ice, int sr)</td></tr>
<tr class="separator:ac39a35490fcf802b678e67b448eb381c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a3e89b50705b66f142eaaff7d3fe52d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a6a3e89b50705b66f142eaaff7d3fe52d">ast_rtcp_generate_compound_prefix</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, unsigned char *rtcpheader, struct <a class="el" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *report, int *sr)</td></tr>
<tr class="separator:a6a3e89b50705b66f142eaaff7d3fe52d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a412fb88c15a637214233ca3cce6d9ad9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a412fb88c15a637214233ca3cce6d9ad9">ast_rtcp_generate_nack</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, unsigned char *rtcpheader)</td></tr>
<tr class="separator:a412fb88c15a637214233ca3cce6d9ad9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a543e648d458505ac92e62d425eb968cc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a543e648d458505ac92e62d425eb968cc">ast_rtcp_generate_report</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, unsigned char *rtcpheader, struct <a class="el" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *rtcp_report, int *sr)</td></tr>
<tr class="separator:a543e648d458505ac92e62d425eb968cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3dd03863da0f7558b1e61a99e2cc026"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ae3dd03863da0f7558b1e61a99e2cc026">ast_rtcp_generate_sdes</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, unsigned char *rtcpheader, struct <a class="el" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *rtcp_report)</td></tr>
<tr class="separator:ae3dd03863da0f7558b1e61a99e2cc026"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acef3a2fc706fb66b5cf99569281b4948"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#acef3a2fc706fb66b5cf99569281b4948">ast_rtcp_interpret</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../d4/d11/structast__srtp.html">ast_srtp</a> *srtp, const unsigned char *rtcpdata, size_t size, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="separator:acef3a2fc706fb66b5cf99569281b4948"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7bd4f073fac1bbe828d0390d7e9250f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ac7bd4f073fac1bbe828d0390d7e9250f">ast_rtcp_read</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:ac7bd4f073fac1bbe828d0390d7e9250f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff89c2855ec73ffa6efdc958bb71c2e8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aff89c2855ec73ffa6efdc958bb71c2e8">ast_rtcp_write</a> (const void *data)</td></tr>
<tr class="memdesc:aff89c2855ec73ffa6efdc958bb71c2e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a RTCP packet to the far end.  <a href="#aff89c2855ec73ffa6efdc958bb71c2e8">More...</a><br /></td></tr>
<tr class="separator:aff89c2855ec73ffa6efdc958bb71c2e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4483ad447adb5bfa0ec694a2a20c3234"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a4483ad447adb5bfa0ec694a2a20c3234">ast_rtp_bundle</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *child, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *parent)</td></tr>
<tr class="separator:a4483ad447adb5bfa0ec694a2a20c3234"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81a4665031965acf223f971304d431d1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a81a4665031965acf223f971304d431d1">ast_rtp_change_source</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:a81a4665031965acf223f971304d431d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09136b763dd8f946be886214a7750fb7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a09136b763dd8f946be886214a7750fb7">ast_rtp_destroy</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:a09136b763dd8f946be886214a7750fb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a979fa34daf2a78bf84b4051b871276e2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a979fa34daf2a78bf84b4051b871276e2">ast_rtp_dtmf_begin</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, char <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</td></tr>
<tr class="separator:a979fa34daf2a78bf84b4051b871276e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04e5f1ed506267067effa89252bb6bd4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a04e5f1ed506267067effa89252bb6bd4">ast_rtp_dtmf_compatible</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan0, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance0, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan1, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance1)</td></tr>
<tr class="separator:a04e5f1ed506267067effa89252bb6bd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cf4fc0fc38586fe2f7692549f049b82"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a4cf4fc0fc38586fe2f7692549f049b82">ast_rtp_dtmf_continuation</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:a4cf4fc0fc38586fe2f7692549f049b82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81b4a739a9b083819b824e05ac35a187"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a81b4a739a9b083819b824e05ac35a187">ast_rtp_dtmf_end</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, char <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</td></tr>
<tr class="separator:a81b4a739a9b083819b824e05ac35a187"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fc499318ba0179b1e384d6b836b173d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2fc499318ba0179b1e384d6b836b173d">ast_rtp_dtmf_end_with_duration</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, char <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, unsigned int duration)</td></tr>
<tr class="separator:a2fc499318ba0179b1e384d6b836b173d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcfb32f3eef188001b29e20d386a7f6a"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6ee">ast_rtp_dtmf_mode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#adcfb32f3eef188001b29e20d386a7f6a">ast_rtp_dtmf_mode_get</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:adcfb32f3eef188001b29e20d386a7f6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaa713367fa611b545a92959a5181431"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#adaa713367fa611b545a92959a5181431">ast_rtp_dtmf_mode_set</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6ee">ast_rtp_dtmf_mode</a> dtmf_mode)</td></tr>
<tr class="separator:adaa713367fa611b545a92959a5181431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc66b74324f35b79325688b6999981d7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#afc66b74324f35b79325688b6999981d7">ast_rtp_extension_enable</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ff">ast_rtp_extension</a> <a class="el" href="../../d0/d5a/structextension.html">extension</a>)</td></tr>
<tr class="separator:afc66b74324f35b79325688b6999981d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69bfc919969bcd79dbede3a06c9ed2cb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a69bfc919969bcd79dbede3a06c9ed2cb">ast_rtp_fd</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, int rtcp)</td></tr>
<tr class="separator:a69bfc919969bcd79dbede3a06c9ed2cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af12dac69630e202247abd912fb4bb11d"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af12dac69630e202247abd912fb4bb11d">ast_rtp_get_cname</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:af12dac69630e202247abd912fb4bb11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade81085abaef26273a665997e6693f86"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ade81085abaef26273a665997e6693f86">ast_rtp_get_ssrc</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:ade81085abaef26273a665997e6693f86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6703a53a176c9a89128f41c677204e8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aa6703a53a176c9a89128f41c677204e8">ast_rtp_get_stat</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../d0/db0/structast__rtp__instance__stats.html">ast_rtp_instance_stats</a> *stats, enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378f">ast_rtp_instance_stat</a> stat)</td></tr>
<tr class="separator:aa6703a53a176c9a89128f41c677204e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec6a67dd9e8be83fce73c1c1a63a58d8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aec6a67dd9e8be83fce73c1c1a63a58d8">ast_rtp_ice_add_cand</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, unsigned comp_id, unsigned transport_id, pj_ice_cand_type <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, pj_uint16_t local_pref, const pj_sockaddr_t *addr, const pj_sockaddr_t *base_addr, const pj_sockaddr_t *rel_addr, int addr_len)</td></tr>
<tr class="separator:aec6a67dd9e8be83fce73c1c1a63a58d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a608f39219a4fa9ac60ed67e8a7c686f6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a608f39219a4fa9ac60ed67e8a7c686f6">ast_rtp_ice_add_remote_candidate</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, const struct <a class="el" href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a> *candidate)</td></tr>
<tr class="separator:a608f39219a4fa9ac60ed67e8a7c686f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acab9e9946146e1bcba7556eb444380e9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#acab9e9946146e1bcba7556eb444380e9">ast_rtp_ice_candidate_destroy</a> (void *obj)</td></tr>
<tr class="memdesc:acab9e9946146e1bcba7556eb444380e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor for locally created ICE candidates.  <a href="#acab9e9946146e1bcba7556eb444380e9">More...</a><br /></td></tr>
<tr class="separator:acab9e9946146e1bcba7556eb444380e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c7d6d7d009f35f151884843c7376695"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a9c7d6d7d009f35f151884843c7376695">ast_rtp_ice_change_components</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, int num_components)</td></tr>
<tr class="separator:a9c7d6d7d009f35f151884843c7376695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedc03c909a05296eb1476f2ae5a7c3ac"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aedc03c909a05296eb1476f2ae5a7c3ac">ast_rtp_ice_get_local_candidates</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:aedc03c909a05296eb1476f2ae5a7c3ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0554cd5294b4a797871159a9539e9bd9"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a0554cd5294b4a797871159a9539e9bd9">ast_rtp_ice_get_password</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:a0554cd5294b4a797871159a9539e9bd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac772df5ebbf4214f8e71aeded87e59d"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aac772df5ebbf4214f8e71aeded87e59d">ast_rtp_ice_get_ufrag</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:aac772df5ebbf4214f8e71aeded87e59d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b0130275dd17ab43dcf2680e7a5dd20"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2b0130275dd17ab43dcf2680e7a5dd20">ast_rtp_ice_lite</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:a2b0130275dd17ab43dcf2680e7a5dd20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7ded463151f4227c09b4d2a641d53b1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af7ded463151f4227c09b4d2a641d53b1">ast_rtp_ice_set_authentication</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, const char *ufrag, const char *<a class="el" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>)</td></tr>
<tr class="separator:af7ded463151f4227c09b4d2a641d53b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f50c3faeab8e9e3fafd98cf6b61f0e6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a3f50c3faeab8e9e3fafd98cf6b61f0e6">ast_rtp_ice_set_role</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fb">ast_rtp_ice_role</a> role)</td></tr>
<tr class="separator:a3f50c3faeab8e9e3fafd98cf6b61f0e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ae73161ed5f14e344e07c72ebae0529"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a4ae73161ed5f14e344e07c72ebae0529">ast_rtp_ice_start</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:a4ae73161ed5f14e344e07c72ebae0529"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e47a532c686cf9ebf1c290b99206270"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a3e47a532c686cf9ebf1c290b99206270">ast_rtp_ice_start_media</a> (pj_ice_sess *ice, pj_status_t <a class="el" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>)</td></tr>
<tr class="separator:a3e47a532c686cf9ebf1c290b99206270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1bbfc1e97ca48872b4ff30e27cbe996"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ad1bbfc1e97ca48872b4ff30e27cbe996">ast_rtp_ice_stop</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:ad1bbfc1e97ca48872b4ff30e27cbe996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b0a5701597e079d3eab80b7145c3944"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a7b0a5701597e079d3eab80b7145c3944">ast_rtp_ice_turn_request</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78">ast_rtp_ice_component_type</a> component, enum <a class="el" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3">ast_transport</a> transport, const char *server, unsigned int port, const char *username, const char *<a class="el" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>)</td></tr>
<tr class="separator:a7b0a5701597e079d3eab80b7145c3944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4db6e4d59c2243c731f2155981d48d56"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a4db6e4d59c2243c731f2155981d48d56">ast_rtp_interpret</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../d4/d11/structast__srtp.html">ast_srtp</a> *srtp, const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *remote_address, unsigned char *read_area, int length, int prev_seqno, unsigned int bundled)</td></tr>
<tr class="separator:a4db6e4d59c2243c731f2155981d48d56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae10208d0239efac7fe0cbc21b0440df5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ae10208d0239efac7fe0cbc21b0440df5">ast_rtp_local_bridge</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance0, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance1)</td></tr>
<tr class="separator:ae10208d0239efac7fe0cbc21b0440df5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a97dfd28d7243d671e8d80b59723274"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2a97dfd28d7243d671e8d80b59723274">ast_rtp_new</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a> *<a class="el" href="../../d0/da0/structsched.html">sched</a>, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr, void *data)</td></tr>
<tr class="separator:a2a97dfd28d7243d671e8d80b59723274"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25bc6f3c0ab72d3e3e5f63bca33a23b8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a25bc6f3c0ab72d3e3e5f63bca33a23b8">ast_rtp_on_ice_complete</a> (pj_ice_sess *ice, pj_status_t <a class="el" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>)</td></tr>
<tr class="separator:a25bc6f3c0ab72d3e3e5f63bca33a23b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2499df345fd86006e5f2cc7fa7768686"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2499df345fd86006e5f2cc7fa7768686">ast_rtp_on_ice_rx_data</a> (pj_ice_sess *ice, unsigned comp_id, unsigned transport_id, void *pkt, pj_size_t size, const pj_sockaddr_t *src_addr, unsigned src_addr_len)</td></tr>
<tr class="separator:a2499df345fd86006e5f2cc7fa7768686"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18b4bf1b10dd453d9378c9397f870205"><td class="memItemLeft" align="right" valign="top">static pj_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a18b4bf1b10dd453d9378c9397f870205">ast_rtp_on_ice_tx_pkt</a> (pj_ice_sess *ice, unsigned comp_id, unsigned transport_id, const void *pkt, pj_size_t size, const pj_sockaddr_t *dst_addr, unsigned dst_addr_len)</td></tr>
<tr class="separator:a18b4bf1b10dd453d9378c9397f870205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5266b2beb9a54914609a5eceae3fb7d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ad5266b2beb9a54914609a5eceae3fb7d">ast_rtp_on_turn_rtcp_state</a> (pj_turn_sock *turn_sock, pj_turn_state_t old_state, pj_turn_state_t new_state)</td></tr>
<tr class="separator:ad5266b2beb9a54914609a5eceae3fb7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d524e4dfca90561abb09f3d5f99e4c6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a8d524e4dfca90561abb09f3d5f99e4c6">ast_rtp_on_turn_rtp_state</a> (pj_turn_sock *turn_sock, pj_turn_state_t old_state, pj_turn_state_t new_state)</td></tr>
<tr class="separator:a8d524e4dfca90561abb09f3d5f99e4c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1efec75c83ae755c18e03d4d2ab53194"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a1efec75c83ae755c18e03d4d2ab53194">ast_rtp_on_turn_rx_rtcp_data</a> (pj_turn_sock *turn_sock, void *pkt, unsigned pkt_len, const pj_sockaddr_t *peer_addr, unsigned addr_len)</td></tr>
<tr class="separator:a1efec75c83ae755c18e03d4d2ab53194"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedc48ae04320ccc7f753027e4653b39a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aedc48ae04320ccc7f753027e4653b39a">ast_rtp_on_turn_rx_rtp_data</a> (pj_turn_sock *turn_sock, void *pkt, unsigned pkt_len, const pj_sockaddr_t *peer_addr, unsigned addr_len)</td></tr>
<tr class="separator:aedc48ae04320ccc7f753027e4653b39a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae23415fb68dd2822b9325faaab64c3eb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ae23415fb68dd2822b9325faaab64c3eb">ast_rtp_on_valid_pair</a> (pj_ice_sess *ice)</td></tr>
<tr class="separator:ae23415fb68dd2822b9325faaab64c3eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad11dc3a9cf6eefe955d11ff7523b9b19"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ad11dc3a9cf6eefe955d11ff7523b9b19">ast_rtp_prop_set</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914c">ast_rtp_property</a> property, int <a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="separator:ad11dc3a9cf6eefe955d11ff7523b9b19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80e2deb736c4594727bd46b41574f4b2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a80e2deb736c4594727bd46b41574f4b2">ast_rtp_qos_set</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, int <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>, int <a class="el" href="../../d1/d6d/chan__unistim_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>, const char *<a class="el" href="../../d5/dd1/cdr__sqlite3__custom_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>)</td></tr>
<tr class="separator:a80e2deb736c4594727bd46b41574f4b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54703dd03f087fa55bf80e8ea8f6d35a"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a54703dd03f087fa55bf80e8ea8f6d35a">ast_rtp_read</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, int rtcp)</td></tr>
<tr class="separator:a54703dd03f087fa55bf80e8ea8f6d35a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae09e4a9b3d29788aeaaab5e65015f48e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ae09e4a9b3d29788aeaaab5e65015f48e">ast_rtp_remote_address_set</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="separator:ae09e4a9b3d29788aeaaab5e65015f48e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fb21b1e16b180484b413cbfd591fa7f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a0fb21b1e16b180484b413cbfd591fa7f">ast_rtp_rtcp_handle_nack</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, unsigned int *nackdata, unsigned int position, unsigned int length)</td></tr>
<tr class="separator:a0fb21b1e16b180484b413cbfd591fa7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb8701cef9b982766056774ff71538f1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aeb8701cef9b982766056774ff71538f1">ast_rtp_sendcng</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, int level)</td></tr>
<tr class="memdesc:aeb8701cef9b982766056774ff71538f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">generate comfort noice (CNG)  <a href="#aeb8701cef9b982766056774ff71538f1">More...</a><br /></td></tr>
<tr class="separator:aeb8701cef9b982766056774ff71538f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad103ac99f895ad9b95024e1adc4bb9f5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ad103ac99f895ad9b95024e1adc4bb9f5">ast_rtp_set_remote_ssrc</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, unsigned int ssrc)</td></tr>
<tr class="separator:ad103ac99f895ad9b95024e1adc4bb9f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63f6b697a273c80e6b5f242f2b04c698"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a63f6b697a273c80e6b5f242f2b04c698">ast_rtp_set_stream_num</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, int stream_num)</td></tr>
<tr class="separator:a63f6b697a273c80e6b5f242f2b04c698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcb204a65c7f912f8ff993204370fad7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#abcb204a65c7f912f8ff993204370fad7">ast_rtp_stop</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:abcb204a65c7f912f8ff993204370fad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefc58a7696f4b9ede26fe63fa5b96364"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aefc58a7696f4b9ede26fe63fa5b96364">ast_rtp_stun_request</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *suggestion, const char *username)</td></tr>
<tr class="separator:aefc58a7696f4b9ede26fe63fa5b96364"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05ce5de973f030a1c2766718581464d2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a05ce5de973f030a1c2766718581464d2">ast_rtp_update_source</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:a05ce5de973f030a1c2766718581464d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac1f4d7457f54890cb39395406b37a22"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aac1f4d7457f54890cb39395406b37a22">ast_rtp_write</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</td></tr>
<tr class="separator:aac1f4d7457f54890cb39395406b37a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ca5bc2e876461441b96ea02dcd41f81"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a3ca5bc2e876461441b96ea02dcd41f81">bridge_p2p_rtp_write</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance1, unsigned int *rtpheader, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, int hdrlen)</td></tr>
<tr class="separator:a3ca5bc2e876461441b96ea02dcd41f81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82df1dfe66fb8ab6832b5b8e9fa84d42"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a82df1dfe66fb8ab6832b5b8e9fa84d42">calc_mean_and_standard_deviation</a> (double new_sample, double *mean, double *std_dev, unsigned int *count)</td></tr>
<tr class="separator:a82df1dfe66fb8ab6832b5b8e9fa84d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c81edd11824e8abc1d749ef12ebcba5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a8c81edd11824e8abc1d749ef12ebcba5">calc_rxstamp</a> (struct timeval *tv, struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, unsigned int timestamp, int mark)</td></tr>
<tr class="separator:a8c81edd11824e8abc1d749ef12ebcba5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c3a6d3e3a2ffc5044526e5db91fb6b5"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a4c3a6d3e3a2ffc5044526e5db91fb6b5">calc_txstamp</a> (struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, struct timeval *delivery)</td></tr>
<tr class="separator:a4c3a6d3e3a2ffc5044526e5db91fb6b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b8b24cbfebc4c43f748c47fe467320d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a5b8b24cbfebc4c43f748c47fe467320d">calculate_lost_packet_statistics</a> (struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, unsigned int *lost_packets, int *fraction_lost)</td></tr>
<tr class="separator:a5b8b24cbfebc4c43f748c47fe467320d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83943ef00898b267fa0cddf6db6fd937"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a83943ef00898b267fa0cddf6db6fd937">compare_by_value</a> (int elem, int <a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="memdesc:a83943ef00898b267fa0cddf6db6fd937"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to compare an elem in a vector by value.  <a href="#a83943ef00898b267fa0cddf6db6fd937">More...</a><br /></td></tr>
<tr class="separator:a83943ef00898b267fa0cddf6db6fd937"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d07f83ec38c7407d5c3e98936269221"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d07f83ec38c7407d5c3e98936269221">create_dtmf_frame</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, enum <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">ast_frame_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, int compensate)</td></tr>
<tr class="separator:a4d07f83ec38c7407d5c3e98936269221"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64f68b734a7edd69efce133ae28e7d39"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a64f68b734a7edd69efce133ae28e7d39">create_new_socket</a> (const char *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, int af)</td></tr>
<tr class="separator:a64f68b734a7edd69efce133ae28e7d39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fa482ae7eda83a3e17baa26c4db9445"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a3fa482ae7eda83a3e17baa26c4db9445">drop_packets_data_update</a> (struct timeval tv)</td></tr>
<tr class="separator:a3fa482ae7eda83a3e17baa26c4db9445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c0765c9365f9caf28b8f072aac73409"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a9c0765c9365f9caf28b8f072aac73409">find_by_value</a> (int elem, int <a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="memdesc:a9c0765c9365f9caf28b8f072aac73409"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to find an elem in a vector by value.  <a href="#a9c0765c9365f9caf28b8f072aac73409">More...</a><br /></td></tr>
<tr class="separator:a9c0765c9365f9caf28b8f072aac73409"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f4aa0ba10c92a6d97d91a1ba021da73"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a9f4aa0ba10c92a6d97d91a1ba021da73">generate_random_string</a> (char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t size)</td></tr>
<tr class="separator:a9f4aa0ba10c92a6d97d91a1ba021da73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa235d0749772310f08d172d24f5718e6"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aa235d0749772310f08d172d24f5718e6">get_recv_buffer_count</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:aa235d0749772310f08d172d24f5718e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd55d8f78db2190bc72a222885615a6b"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#acd55d8f78db2190bc72a222885615a6b">get_recv_buffer_max</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:acd55d8f78db2190bc72a222885615a6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a991b0b26c18e5f41445fa1dfb83334d8"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a991b0b26c18e5f41445fa1dfb83334d8">get_send_buffer_count</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:a991b0b26c18e5f41445fa1dfb83334d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ec75d08ff56cd99acc84c2c9fe390e3"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a6ec75d08ff56cd99acc84c2c9fe390e3">handle_cli_rtcp_set_debug</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a6ec75d08ff56cd99acc84c2c9fe390e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96a3270020e5335d892ddeed13d689ee"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a96a3270020e5335d892ddeed13d689ee">handle_cli_rtcp_set_stats</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a96a3270020e5335d892ddeed13d689ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d8b00c85ed520d85e130839784c3e0b"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a9d8b00c85ed520d85e130839784c3e0b">handle_cli_rtp_drop_incoming_packets</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a9d8b00c85ed520d85e130839784c3e0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a54e80a72f7a13775f84d6b98497499"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a7a54e80a72f7a13775f84d6b98497499">handle_cli_rtp_set_debug</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a7a54e80a72f7a13775f84d6b98497499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2834658816ca722d6ef3b6ede9f764fb"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2834658816ca722d6ef3b6ede9f764fb">handle_cli_rtp_settings</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a2834658816ca722d6ef3b6ede9f764fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef821ad4c8e25611b5fd4db4bf1bb60e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aef821ad4c8e25611b5fd4db4bf1bb60e">host_candidate_overrides_clear</a> (void)</td></tr>
<tr class="memdesc:aef821ad4c8e25611b5fd4db4bf1bb60e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function which clears the ICE host candidate mapping.  <a href="#aef821ad4c8e25611b5fd4db4bf1bb60e">More...</a><br /></td></tr>
<tr class="separator:aef821ad4c8e25611b5fd4db4bf1bb60e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87bc4581242c6ec6310b35f120ca5906"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a87bc4581242c6ec6310b35f120ca5906">ice_candidate_cmp</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:a87bc4581242c6ec6310b35f120ca5906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaac6e7b48030ec03f287fc3fd263a9b7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aaac6e7b48030ec03f287fc3fd263a9b7">ice_candidates_compare</a> (struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *left, struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *right)</td></tr>
<tr class="separator:aaac6e7b48030ec03f287fc3fd263a9b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15d17ae297e9f6b5c781f98b4795341d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a15d17ae297e9f6b5c781f98b4795341d">ice_create</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr, int port, int <a class="el" href="../../d9/d1e/func__strings_8c.html#a7f763283c27da5574f6f8d1b2a2b9288">replace</a>)</td></tr>
<tr class="separator:a15d17ae297e9f6b5c781f98b4795341d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adde70b348dba6a01f45b8debf24fd536"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#adde70b348dba6a01f45b8debf24fd536">ice_reset_session</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:adde70b348dba6a01f45b8debf24fd536"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5f8ddbef49d8b7f61c257946028dc73"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ae5f8ddbef49d8b7f61c257946028dc73">ice_wrap_dtor</a> (void *vdoomed)</td></tr>
<tr class="memdesc:ae5f8ddbef49d8b7f61c257946028dc73"><td class="mdescLeft">&#160;</td><td class="mdescRight">ao2 ICE wrapper object destructor.  <a href="#ae5f8ddbef49d8b7f61c257946028dc73">More...</a><br /></td></tr>
<tr class="separator:ae5f8ddbef49d8b7f61c257946028dc73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf03493a87472511142b26b9a2d27c87"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#abf03493a87472511142b26b9a2d27c87">ioqueue_worker_thread</a> (void *data)</td></tr>
<tr class="memdesc:abf03493a87472511142b26b9a2d27c87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Worker thread for ioqueue and timerheap.  <a href="#abf03493a87472511142b26b9a2d27c87">More...</a><br /></td></tr>
<tr class="separator:abf03493a87472511142b26b9a2d27c87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1635c093c05170fc6fea298ff747093f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a1635c093c05170fc6fea298ff747093f">ntp2timeval</a> (unsigned int msw, unsigned int lsw, struct timeval *tv)</td></tr>
<tr class="separator:a1635c093c05170fc6fea298ff747093f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b5dd245c590a95f5f58c1e54d4650f5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2b5dd245c590a95f5f58c1e54d4650f5">pj2ast_rtp_ice_role</a> (enum pj_ice_sess_role pj_role, enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fb">ast_rtp_ice_role</a> *ast_role)</td></tr>
<tr class="separator:a2b5dd245c590a95f5f58c1e54d4650f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4884315209af5f6ecb90ba9ef0a70344"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a> (void)</td></tr>
<tr class="memdesc:a4884315209af5f6ecb90ba9ef0a70344"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to check if the calling thread is registered with pjlib. If it is not it will be registered.  <a href="#a4884315209af5f6ecb90ba9ef0a70344">More...</a><br /></td></tr>
<tr class="separator:a4884315209af5f6ecb90ba9ef0a70344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ababe6a4928e53febfa8850584b9d88d7"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ababe6a4928e53febfa8850584b9d88d7">process_cn_rfc3389</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, unsigned char *data, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, unsigned int seqno, unsigned int timestamp, int payloadtype, int mark)</td></tr>
<tr class="separator:ababe6a4928e53febfa8850584b9d88d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1483ca8227852811b993309a78562067"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a1483ca8227852811b993309a78562067">process_dtmf_cisco</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, unsigned char *data, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, unsigned int seqno, unsigned int timestamp, int payloadtype, int mark)</td></tr>
<tr class="separator:a1483ca8227852811b993309a78562067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f3d4d692d14bc2a712ae50edad6feca"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a5f3d4d692d14bc2a712ae50edad6feca">process_dtmf_rfc2833</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, unsigned char *data, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, unsigned int seqno, unsigned int timestamp, int payloadtype, int mark, struct <a class="el" href="../../d9/d42/structframe__list.html">frame_list</a> *<a class="el" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>)</td></tr>
<tr class="separator:a5f3d4d692d14bc2a712ae50edad6feca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fa030a6094ca05ea43a3b49f14e5cc3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a3fa030a6094ca05ea43a3b49f14e5cc3">put_unaligned_time24</a> (void *p, uint32_t time_msw, uint32_t time_lsw)</td></tr>
<tr class="separator:a3fa030a6094ca05ea43a3b49f14e5cc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c9ac7e749d6db9936d12d7549037954"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a3c9ac7e749d6db9936d12d7549037954">red_t140_to_red</a> (struct <a class="el" href="../../da/dbb/structrtp__red.html">rtp_red</a> *red)</td></tr>
<tr class="separator:a3c9ac7e749d6db9936d12d7549037954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8fe2466849c65c9d60466c769ea5f2d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af8fe2466849c65c9d60466c769ea5f2d">red_write</a> (const void *data)</td></tr>
<tr class="memdesc:af8fe2466849c65c9d60466c769ea5f2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write t140 redundacy frame.  <a href="#af8fe2466849c65c9d60466c769ea5f2d">More...</a><br /></td></tr>
<tr class="separator:af8fe2466849c65c9d60466c769ea5f2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a> (void)</td></tr>
<tr class="separator:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a804d7f1392ba5f1a19530c5243d93894"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a804d7f1392ba5f1a19530c5243d93894">rtcp_debug_test_addr</a> (struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="separator:a804d7f1392ba5f1a19530c5243d93894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5880d6e79bbf0f0fc09483c25ece2b6"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ac5880d6e79bbf0f0fc09483c25ece2b6">rtcp_do_debug_ip</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ac5880d6e79bbf0f0fc09483c25ece2b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad49be45beb567b0fe0298d7bd0dd6419"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ad49be45beb567b0fe0298d7bd0dd6419">rtcp_mux</a> (struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, const unsigned char *packet)</td></tr>
<tr class="separator:ad49be45beb567b0fe0298d7bd0dd6419"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcddb5ff85cb2691779171663a3a8229"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#afcddb5ff85cb2691779171663a3a8229">rtcp_payload_subtype2str</a> (unsigned int pt, unsigned int subtype)</td></tr>
<tr class="separator:afcddb5ff85cb2691779171663a3a8229"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a280f0e254e281a27c39489fc2603329c"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a280f0e254e281a27c39489fc2603329c">rtcp_payload_type2str</a> (unsigned int pt)</td></tr>
<tr class="separator:a280f0e254e281a27c39489fc2603329c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33608656bad4878dfd5c84ec9aef96c9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a33608656bad4878dfd5c84ec9aef96c9">rtcp_recvfrom</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, void *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t size, int flags, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sa)</td></tr>
<tr class="separator:a33608656bad4878dfd5c84ec9aef96c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a849b3d418fbe0446b4e9289a9ef94397"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a849b3d418fbe0446b4e9289a9ef94397">rtcp_sendto</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, void *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t size, int flags, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sa, int *ice)</td></tr>
<tr class="separator:a849b3d418fbe0446b4e9289a9ef94397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1b4c0024c8207e04e00c38d3b6341d5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ab1b4c0024c8207e04e00c38d3b6341d5">rtp_add_candidates_to_ice</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr, int port, int component, int transport)</td></tr>
<tr class="separator:ab1b4c0024c8207e04e00c38d3b6341d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae6227e287afecf4d8ada4d05b82554a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aae6227e287afecf4d8ada4d05b82554a">rtp_address_is_ice_blacklisted</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="el" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>)</td></tr>
<tr class="separator:aae6227e287afecf4d8ada4d05b82554a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51ac7e289874d2165b05e7ae8dc068ae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a51ac7e289874d2165b05e7ae8dc068ae">rtp_allocate_transport</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp)</td></tr>
<tr class="separator:a51ac7e289874d2165b05e7ae8dc068ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ae4ff586a4129d3eab4c60b39c65f36"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a3ae4ff586a4129d3eab4c60b39c65f36">rtp_deallocate_transport</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp)</td></tr>
<tr class="separator:a3ae4ff586a4129d3eab4c60b39c65f36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac963384d2cd5bf0a453061cc6889a44b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a> (struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="separator:ac963384d2cd5bf0a453061cc6889a44b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07116c4a926b544b84936ff2f788883f"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a07116c4a926b544b84936ff2f788883f">rtp_do_debug_ip</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a07116c4a926b544b84936ff2f788883f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9d6ff10648a47e0e609f57ac749d6dc"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ab9d6ff10648a47e0e609f57ac749d6dc">rtp_find_instance_by_media_source_ssrc</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, unsigned int ssrc)</td></tr>
<tr class="separator:ab9d6ff10648a47e0e609f57ac749d6dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5402d4a2ce7addf589cc3efdb25b27be"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a5402d4a2ce7addf589cc3efdb25b27be">rtp_find_instance_by_packet_source_ssrc</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, unsigned int ssrc)</td></tr>
<tr class="separator:a5402d4a2ce7addf589cc3efdb25b27be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a995ed3a06efd4fc6c500c374e4483fde"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a995ed3a06efd4fc6c500c374e4483fde">rtp_instance_parse_extmap_extensions</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, unsigned char *<a class="el" href="../../d0/d5a/structextension.html">extension</a>, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="separator:a995ed3a06efd4fc6c500c374e4483fde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b6314d4761099aa184b731d1fd9fe1a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b6314d4761099aa184b731d1fd9fe1a">rtp_instance_parse_transport_wide_cc</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, unsigned char *data, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="separator:a4b6314d4761099aa184b731d1fd9fe1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fba4bbd59bd9bcd7b0e06c4e2ac8ff6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a9fba4bbd59bd9bcd7b0e06c4e2ac8ff6">rtp_instance_unlock</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</td></tr>
<tr class="separator:a9fba4bbd59bd9bcd7b0e06c4e2ac8ff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5ddef0d16ad270efac76761db301d7c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af5ddef0d16ad270efac76761db301d7c">rtp_ioqueue_thread_destroy</a> (struct <a class="el" href="../../db/d1f/structast__rtp__ioqueue__thread.html">ast_rtp_ioqueue_thread</a> *ioqueue)</td></tr>
<tr class="memdesc:af5ddef0d16ad270efac76761db301d7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroyer for ioqueue thread.  <a href="#af5ddef0d16ad270efac76761db301d7c">More...</a><br /></td></tr>
<tr class="separator:af5ddef0d16ad270efac76761db301d7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a945018e0a29fb3127c1003645a2277dc"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/d1f/structast__rtp__ioqueue__thread.html">ast_rtp_ioqueue_thread</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a945018e0a29fb3127c1003645a2277dc">rtp_ioqueue_thread_get_or_create</a> (void)</td></tr>
<tr class="memdesc:a945018e0a29fb3127c1003645a2277dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finder and allocator for an ioqueue thread.  <a href="#a945018e0a29fb3127c1003645a2277dc">More...</a><br /></td></tr>
<tr class="separator:a945018e0a29fb3127c1003645a2277dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2725307ebff2c0f2a0d7065fc613b32"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ad2725307ebff2c0f2a0d7065fc613b32">rtp_ioqueue_thread_remove</a> (struct <a class="el" href="../../db/d1f/structast__rtp__ioqueue__thread.html">ast_rtp_ioqueue_thread</a> *ioqueue)</td></tr>
<tr class="memdesc:ad2725307ebff2c0f2a0d7065fc613b32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removal function for ioqueue thread, determines if it should be terminated and destroyed.  <a href="#ad2725307ebff2c0f2a0d7065fc613b32">More...</a><br /></td></tr>
<tr class="separator:ad2725307ebff2c0f2a0d7065fc613b32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e91482dfb876c9f92964c4fcce1c670"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a1e91482dfb876c9f92964c4fcce1c670">rtp_learning_rtp_seq_update</a> (struct <a class="el" href="../../d6/d7d/structrtp__learning__info.html">rtp_learning_info</a> *info, uint16_t <a class="el" href="../../d2/d1b/res__monitor_8c.html#a189930c4babdc38135a74db479534069">seq</a>)</td></tr>
<tr class="separator:a1e91482dfb876c9f92964c4fcce1c670"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad68124a712f2eb4ae298e08743ae2740"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ad68124a712f2eb4ae298e08743ae2740">rtp_learning_seq_init</a> (struct <a class="el" href="../../d6/d7d/structrtp__learning__info.html">rtp_learning_info</a> *info, uint16_t <a class="el" href="../../d2/d1b/res__monitor_8c.html#a189930c4babdc38135a74db479534069">seq</a>)</td></tr>
<tr class="separator:ad68124a712f2eb4ae298e08743ae2740"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada712c8738c9286dabd805475002671e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ada712c8738c9286dabd805475002671e">rtp_learning_start</a> (struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp)</td></tr>
<tr class="memdesc:ada712c8738c9286dabd805475002671e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the strictrtp learning mode.  <a href="#ada712c8738c9286dabd805475002671e">More...</a><br /></td></tr>
<tr class="separator:ada712c8738c9286dabd805475002671e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e586786c824dc22c28692ba41646bbb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e586786c824dc22c28692ba41646bbb">rtp_raw_write</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame, int codec)</td></tr>
<tr class="separator:a2e586786c824dc22c28692ba41646bbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0fc4bee4b3cceefec395ea724d20650"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aa0fc4bee4b3cceefec395ea724d20650">rtp_recvfrom</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, void *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t size, int flags, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sa)</td></tr>
<tr class="separator:aa0fc4bee4b3cceefec395ea724d20650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e14bd5df65c8c88c04971316fb2bb2f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a8e14bd5df65c8c88c04971316fb2bb2f">rtp_red_buffer</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</td></tr>
<tr class="separator:a8e14bd5df65c8c88c04971316fb2bb2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca23f8d877d129c9057fd296aa4ee8be"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aca23f8d877d129c9057fd296aa4ee8be">rtp_red_init</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, int buffer_time, int *payloads, int generations)</td></tr>
<tr class="separator:aca23f8d877d129c9057fd296aa4ee8be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fd33c0dc833ac5b48e7990897319088"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a0fd33c0dc833ac5b48e7990897319088">rtp_reload</a> (int <a class="el" href="../../dc/d6b/res__xmpp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>, int by_external_config)</td></tr>
<tr class="separator:a0fd33c0dc833ac5b48e7990897319088"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade1c64796fc8534818c62a28b95bcd38"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, void *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t size, int flags, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sa, int *ice)</td></tr>
<tr class="separator:ade1c64796fc8534818c62a28b95bcd38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8a0d1a6b0e61b0fd209699d8a718226"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af8a0d1a6b0e61b0fd209699d8a718226">rtp_terminate_pjproject</a> (void)</td></tr>
<tr class="separator:af8a0d1a6b0e61b0fd209699d8a718226"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a227f7cf18ced801d02a072ac3f8d1d1e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a227f7cf18ced801d02a072ac3f8d1d1e">rtp_transport_wide_cc_feedback_produce</a> (const void *data)</td></tr>
<tr class="separator:a227f7cf18ced801d02a072ac3f8d1d1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43ba6fd9ff27756fb87ea9999d565c80"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a43ba6fd9ff27756fb87ea9999d565c80">rtp_transport_wide_cc_feedback_status_append</a> (unsigned char *rtcpheader, int *packet_len, int *status_vector_chunk_bits, uint16_t *status_vector_chunk, int *run_length_chunk_count, int *run_length_chunk_status, int <a class="el" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>)</td></tr>
<tr class="separator:a43ba6fd9ff27756fb87ea9999d565c80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc3b2672463424b91af89934466daef1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#afc3b2672463424b91af89934466daef1">rtp_transport_wide_cc_feedback_status_vector_append</a> (unsigned char *rtcpheader, int *packet_len, int *status_vector_chunk_bits, uint16_t *status_vector_chunk, int <a class="el" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>)</td></tr>
<tr class="separator:afc3b2672463424b91af89934466daef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5fc4402a4674c499f27f76d55ec2f83"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ac5fc4402a4674c499f27f76d55ec2f83">rtp_transport_wide_cc_packet_statistics_cmp</a> (struct <a class="el" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html">rtp_transport_wide_cc_packet_statistics</a> <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, struct <a class="el" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html">rtp_transport_wide_cc_packet_statistics</a> <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>)</td></tr>
<tr class="separator:ac5fc4402a4674c499f27f76d55ec2f83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa46a219704b72f7e612092e541dd29ce"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aa46a219704b72f7e612092e541dd29ce">rtp_unload_acl</a> (<a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a> *<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, struct <a class="el" href="../../d3/da4/structast__acl__list.html">ast_acl_list</a> **<a class="el" href="../../dc/dff/structacl.html">acl</a>)</td></tr>
<tr class="separator:aa46a219704b72f7e612092e541dd29ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af468e412cbb41cc4b890cf12aebf02fe"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af468e412cbb41cc4b890cf12aebf02fe">rtp_write_rtcp_fir</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *remote_address)</td></tr>
<tr class="separator:af468e412cbb41cc4b890cf12aebf02fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af265fda7047566e1da9fa1b391ec3c31"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af265fda7047566e1da9fa1b391ec3c31">rtp_write_rtcp_psfb</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *remote_address)</td></tr>
<tr class="separator:af265fda7047566e1da9fa1b391ec3c31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26068e77ac6f5763da15de75130f0ca7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a26068e77ac6f5763da15de75130f0ca7">set_rtp_rtcp_schedid</a> (struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, int <a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:a26068e77ac6f5763da15de75130f0ca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43ed5507fb9a133cd9c31d302f6492a2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a43ed5507fb9a133cd9c31d302f6492a2">should_drop_packets</a> (struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="separator:a43ed5507fb9a133cd9c31d302f6492a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b801d4e79b211acfad64dbf20da9f72"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a6b801d4e79b211acfad64dbf20da9f72">stun_address_is_blacklisted</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="separator:a6b801d4e79b211acfad64dbf20da9f72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa8322f30d6ca185866395af0577bf32"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aaa8322f30d6ca185866395af0577bf32">timer_worker_thread</a> (void *data)</td></tr>
<tr class="memdesc:aaa8322f30d6ca185866395af0577bf32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Worker thread for timerheap.  <a href="#aaa8322f30d6ca185866395af0577bf32">More...</a><br /></td></tr>
<tr class="separator:aaa8322f30d6ca185866395af0577bf32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae07b5d23a23d4d09988c4a1c5d477d14"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ae07b5d23a23d4d09988c4a1c5d477d14">timeval2ntp</a> (struct timeval tv, unsigned int *msw, unsigned int *lsw)</td></tr>
<tr class="separator:ae07b5d23a23d4d09988c4a1c5d477d14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42d4b1f8ff650d67378b345bb531ccac"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a42d4b1f8ff650d67378b345bb531ccac">update_address_with_ice_candidate</a> (pj_ice_sess *ice, enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78">ast_rtp_ice_component_type</a> component, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *cand_address)</td></tr>
<tr class="memdesc:a42d4b1f8ff650d67378b345bb531ccac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function which updates an <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a> with the candidate used for the component.  <a href="#a42d4b1f8ff650d67378b345bb531ccac">More...</a><br /></td></tr>
<tr class="separator:a42d4b1f8ff650d67378b345bb531ccac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6daf71d49a86747ab43985cc2f51cc98"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a6daf71d49a86747ab43985cc2f51cc98">update_jitter_stats</a> (struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, unsigned int ia_jitter)</td></tr>
<tr class="separator:a6daf71d49a86747ab43985cc2f51cc98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed901569931a704735fdc55dc50f442b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aed901569931a704735fdc55dc50f442b">update_lost_stats</a> (struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, unsigned int lost_packets)</td></tr>
<tr class="separator:aed901569931a704735fdc55dc50f442b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8413c5149cc0d207ff76cdac0df1d9d8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a8413c5149cc0d207ff76cdac0df1d9d8">update_rtt_stats</a> (struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp, unsigned int lsr, unsigned int dlsr)</td></tr>
<tr class="separator:a8413c5149cc0d207ff76cdac0df1d9d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee504a29ee883de6e0ce2966da770566"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aee504a29ee883de6e0ce2966da770566">use_random</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, int pos, unsigned int index)</td></tr>
<tr class="separator:aee504a29ee883de6e0ce2966da770566"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Asterisk <a class="el" href="../../d1/d94/sip_8h.html#ad5ec12ad08cacd2598d873052c72857a">RTP</a> Stack&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .<a class="el" href="../../dc/d6b/res__xmpp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> = <a class="el" href="../../d6/d80/test__res__prometheus_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a87717b8c3b913bbbb55297fc169086e0">AST_MODPRI_CHANNEL_DEPEND</a>, #ifdef 1 .requires = &quot;res_pjproject&quot;, #endif }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a322eb26fcd507fe69297e038d584db02"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a322eb26fcd507fe69297e038d584db02">acl_change_sub</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:a322eb26fcd507fe69297e038d584db02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a672515f1c9234da3fea2ee9eb38eee51"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a672515f1c9234da3fea2ee9eb38eee51">ast_rtp_ice</a></td></tr>
<tr class="separator:a672515f1c9234da3fea2ee9eb38eee51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0bfdc19ac1767b2a1f91b2933117370"><td class="memItemLeft" align="right" valign="top">static pj_ice_sess_cb&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ac0bfdc19ac1767b2a1f91b2933117370">ast_rtp_ice_sess_cb</a></td></tr>
<tr class="separator:ac0bfdc19ac1767b2a1f91b2933117370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae2067eb81c35381a920185057614f31"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aae2067eb81c35381a920185057614f31">ast_rtp_test</a></td></tr>
<tr class="separator:aae2067eb81c35381a920185057614f31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9c660bcc45ef01492a0442a3dbc6f1d"><td class="memItemLeft" align="right" valign="top">static pj_turn_sock_cb&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ad9c660bcc45ef01492a0442a3dbc6f1d">ast_rtp_turn_rtcp_sock_cb</a></td></tr>
<tr class="separator:ad9c660bcc45ef01492a0442a3dbc6f1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d2e62824f8d9acf79eae364ffa8f72f"><td class="memItemLeft" align="right" valign="top">static pj_turn_sock_cb&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a8d2e62824f8d9acf79eae364ffa8f72f">ast_rtp_turn_rtp_sock_cb</a></td></tr>
<tr class="separator:a8d2e62824f8d9acf79eae364ffa8f72f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44a4250e68a4aa76f545a8643afaf0fe"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/d14/structast__rtp__engine.html">ast_rtp_engine</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a44a4250e68a4aa76f545a8643afaf0fe">asterisk_rtp_engine</a></td></tr>
<tr class="separator:a44a4250e68a4aa76f545a8643afaf0fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12d9cba0dfd29f12cf2f87a4ab1252e2"><td class="memItemLeft" align="right" valign="top">static pj_caching_pool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a></td></tr>
<tr class="memdesc:a12d9cba0dfd29f12cf2f87a4ab1252e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pool factory used by pjlib to allocate memory.  <a href="#a12d9cba0dfd29f12cf2f87a4ab1252e2">More...</a><br /></td></tr>
<tr class="separator:a12d9cba0dfd29f12cf2f87a4ab1252e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5f5020c8ed253374c8aead44db57c16"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aa5f5020c8ed253374c8aead44db57c16">cli_rtp</a> []</td></tr>
<tr class="separator:aa5f5020c8ed253374c8aead44db57c16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add0b2eb61bb2de637255dbac0520c955"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/d41/structrtp__drop__packets__data.html">rtp_drop_packets_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a></td></tr>
<tr class="separator:add0b2eb61bb2de637255dbac0520c955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aead922624018c01780f0f060df89e6a7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aead922624018c01780f0f060df89e6a7">dtmftimeout</a> = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a3d5f788ed405ca3ab6a778892570b2a2">DEFAULT_DTMF_TIMEOUT</a></td></tr>
<tr class="separator:aead922624018c01780f0f060df89e6a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52af1a3effdd1dc6c012f8baf20c0071"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/db0/structhost__candidates.html">host_candidates</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a52af1a3effdd1dc6c012f8baf20c0071">host_candidates</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:a52af1a3effdd1dc6c012f8baf20c0071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab6e5d05eb162134d044fec583e951d1"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/da4/structast__acl__list.html">ast_acl_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aab6e5d05eb162134d044fec583e951d1">ice_acl</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:aab6e5d05eb162134d044fec583e951d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab7301990e5a8cbb0455c7efc4596ac5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aab7301990e5a8cbb0455c7efc4596ac5">ice_acl_lock</a> = <a class="el" href="../../d4/dc5/extconf_8c.html#a3d58053904fa524e003b1a5ae7a5a8d6">AST_RWLOCK_INIT_VALUE</a></td></tr>
<tr class="separator:aab7301990e5a8cbb0455c7efc4596ac5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab452a162adc04bec273fda937902e95e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ab452a162adc04bec273fda937902e95e">icesupport</a> = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a1362d4944e44c2bb083c0d185b9685f6">DEFAULT_ICESUPPORT</a></td></tr>
<tr class="separator:ab452a162adc04bec273fda937902e95e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abca34ec18925c5053c3c059b6338c003"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/de0/structioqueues.html">ioqueues</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#abca34ec18925c5053c3c059b6338c003">ioqueues</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:abca34ec18925c5053c3c059b6338c003"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64079d5324b80886f3bafe6cfd8fa0b4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a64079d5324b80886f3bafe6cfd8fa0b4">learning_min_duration</a> = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af9e0d41ebd37d2b8e758b7fff48d31f0">DEFAULT_LEARNING_MIN_DURATION</a></td></tr>
<tr class="separator:a64079d5324b80886f3bafe6cfd8fa0b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ec95260935fbacc0443e815297e61bb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a4ec95260935fbacc0443e815297e61bb">learning_min_sequential</a> = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a19b83f0b08541761e041bc81db287bce">DEFAULT_LEARNING_MIN_SEQUENTIAL</a></td></tr>
<tr class="separator:a4ec95260935fbacc0443e815297e61bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3e4a18170e8b5a1f73042adc647455f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ae3e4a18170e8b5a1f73042adc647455f">lo6</a> = { .<a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = 0 }</td></tr>
<tr class="separator:ae3e4a18170e8b5a1f73042adc647455f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a885e6f9577102981b862e68b879057ce"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a885e6f9577102981b862e68b879057ce">pj_thread_storage</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#acd1ff5e1228969321088d10842407b01">__init_pj_thread_storage</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:a885e6f9577102981b862e68b879057ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e57658a5d3ef6c4ef2774c9d5868e7c"><td class="memItemLeft" align="right" valign="top">static pj_pool_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></td></tr>
<tr class="memdesc:a2e57658a5d3ef6c4ef2774c9d5868e7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global memory pool for configuration and timers.  <a href="#a2e57658a5d3ef6c4ef2774c9d5868e7c">More...</a><br /></td></tr>
<tr class="separator:a2e57658a5d3ef6c4ef2774c9d5868e7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d5514f710438c5808ce30d0d35554c2"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/d5d/structast__srtp__res.html">ast_srtp_res</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a0d5514f710438c5808ce30d0d35554c2">res_srtp</a></td></tr>
<tr class="separator:a0d5514f710438c5808ce30d0d35554c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a566ad2621a8d1010836f3eaa2c1ddbe3"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d6/d13/structast__srtp__policy__res.html">ast_srtp_policy_res</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a566ad2621a8d1010836f3eaa2c1ddbe3">res_srtp_policy</a></td></tr>
<tr class="separator:a566ad2621a8d1010836f3eaa2c1ddbe3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86444a258e6234bc5344daa32cbfdbdd"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a86444a258e6234bc5344daa32cbfdbdd">rtcpdebugaddr</a></td></tr>
<tr class="separator:a86444a258e6234bc5344daa32cbfdbdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f918344639d1c901edd21fe78342f1d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2f918344639d1c901edd21fe78342f1d">rtcpdebugport</a></td></tr>
<tr class="separator:a2f918344639d1c901edd21fe78342f1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9426365d90a1b664b096a41d3a099a9f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a9426365d90a1b664b096a41d3a099a9f">rtcpinterval</a> = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a3a8359edb63fbe2754be0314451ce8b3">RTCP_DEFAULT_INTERVALMS</a></td></tr>
<tr class="separator:a9426365d90a1b664b096a41d3a099a9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af31fe34042d18a4597e04781f84f0e3c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af31fe34042d18a4597e04781f84f0e3c">rtcpstats</a></td></tr>
<tr class="separator:af31fe34042d18a4597e04781f84f0e3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a183791de441f6c5592785ed3f9043a50"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a183791de441f6c5592785ed3f9043a50">rtpdebugaddr</a></td></tr>
<tr class="separator:a183791de441f6c5592785ed3f9043a50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a057bbbbb7c8ac748932e093d251dc7bf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a057bbbbb7c8ac748932e093d251dc7bf">rtpdebugport</a></td></tr>
<tr class="separator:a057bbbbb7c8ac748932e093d251dc7bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b0895b04a97fb8d38e0f15dfed4c9e0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a> = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a332be34df280794db6d6915c32ab842e">DEFAULT_RTP_END</a></td></tr>
<tr class="separator:a4b0895b04a97fb8d38e0f15dfed4c9e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3d9ba5adbb6566211600f0ab4a027c7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a> = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aa01c54d6d9412e8278c7422dab8899e5">DEFAULT_RTP_START</a></td></tr>
<tr class="separator:aa3d9ba5adbb6566211600f0ab4a027c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62f7bf8eadfec58f81f33a8c90458f15"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a62f7bf8eadfec58f81f33a8c90458f15">srtp_replay_protection</a> = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a73b8af2a30d6bdd4dc566f24ddb2f51f">DEFAULT_SRTP_REPLAY_PROTECTION</a></td></tr>
<tr class="separator:a62f7bf8eadfec58f81f33a8c90458f15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96336b3ac9e5b66f365f0ca5ba613995"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a> = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aeb729ec664cf95a04d65276f08a80b24">DEFAULT_STRICT_RTP</a></td></tr>
<tr class="separator:a96336b3ac9e5b66f365f0ca5ba613995"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49055c15c8722fe931745104670be0c5"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/da4/structast__acl__list.html">ast_acl_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a49055c15c8722fe931745104670be0c5">stun_acl</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:a49055c15c8722fe931745104670be0c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a453b496a5a02d8741bf2e52675f13a39"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a453b496a5a02d8741bf2e52675f13a39">stun_acl_lock</a> = <a class="el" href="../../d4/dc5/extconf_8c.html#a3d58053904fa524e003b1a5ae7a5a8d6">AST_RWLOCK_INIT_VALUE</a></td></tr>
<tr class="separator:a453b496a5a02d8741bf2e52675f13a39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac9d720f1922d92f186b0df72b624ea0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aac9d720f1922d92f186b0df72b624ea0">stun_software_attribute</a> = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af927b84002d0ac80345425c105ed0d10">DEFAULT_STUN_SOFTWARE_ATTRIBUTE</a></td></tr>
<tr class="separator:aac9d720f1922d92f186b0df72b624ea0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53f406ef990fb9279d21572104158ab2"><td class="memItemLeft" align="right" valign="top">static struct sockaddr_in&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a53f406ef990fb9279d21572104158ab2">stunaddr</a></td></tr>
<tr class="separator:a53f406ef990fb9279d21572104158ab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9f993fcad1fd49cb50f4a541101ccb7"><td class="memItemLeft" align="right" valign="top">static pj_timer_heap_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ae9f993fcad1fd49cb50f4a541101ccb7">timer_heap</a></td></tr>
<tr class="memdesc:ae9f993fcad1fd49cb50f4a541101ccb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global timer heap.  <a href="#ae9f993fcad1fd49cb50f4a541101ccb7">More...</a><br /></td></tr>
<tr class="separator:ae9f993fcad1fd49cb50f4a541101ccb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fb15032ffb90f20278960e03525e479"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a7fb15032ffb90f20278960e03525e479">timer_terminate</a></td></tr>
<tr class="memdesc:a7fb15032ffb90f20278960e03525e479"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to tell the timer thread to terminate.  <a href="#a7fb15032ffb90f20278960e03525e479">More...</a><br /></td></tr>
<tr class="separator:a7fb15032ffb90f20278960e03525e479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4ede498f08f6025306ce45fe163f298"><td class="memItemLeft" align="right" valign="top">static pj_thread_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af4ede498f08f6025306ce45fe163f298">timer_thread</a></td></tr>
<tr class="memdesc:af4ede498f08f6025306ce45fe163f298"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread executing the timer heap.  <a href="#af4ede498f08f6025306ce45fe163f298">More...</a><br /></td></tr>
<tr class="separator:af4ede498f08f6025306ce45fe163f298"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97d66f714d8a621c7e6deb9ca3ce407a"><td class="memItemLeft" align="right" valign="top">static pj_str_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a97d66f714d8a621c7e6deb9ca3ce407a">turnaddr</a></td></tr>
<tr class="separator:a97d66f714d8a621c7e6deb9ca3ce407a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2c7ecf8b1b5d36e9b8601c19aece7b4"><td class="memItemLeft" align="right" valign="top">static pj_str_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ac2c7ecf8b1b5d36e9b8601c19aece7b4">turnpassword</a></td></tr>
<tr class="separator:ac2c7ecf8b1b5d36e9b8601c19aece7b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad251f81e8d409b245b9f2ce9993e1df7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ad251f81e8d409b245b9f2ce9993e1df7">turnport</a> = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af54f297bc8f157b342b0fe94bbbbb899">DEFAULT_TURN_PORT</a></td></tr>
<tr class="separator:ad251f81e8d409b245b9f2ce9993e1df7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54c70c91c4221587d7f59bf536539780"><td class="memItemLeft" align="right" valign="top">static pj_str_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a54c70c91c4221587d7f59bf536539780">turnusername</a></td></tr>
<tr class="separator:a54c70c91c4221587d7f59bf536539780"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Supports RTP and RTCP with Symmetric RTP support for NAT traversal. </p>
<dl class="section author"><dt>Author</dt><dd>Mark Spencer <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ks'+'ter'+'@d'+'igi'+'um'+'.co'+'m'; return false;">marks<span style="display: none;">.nosp@m.</span>ter@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>RTP is defined in RFC 3550. </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ac5a44ba6e8dbccfe0f8ba5bfd1e9b10d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5a44ba6e8dbccfe0f8ba5bfd1e9b10d">&#9670;&nbsp;</a></span>CALC_LEARNING_MIN_DURATION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CALC_LEARNING_MIN_DURATION</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">count</td><td>)</td>
          <td>&#160;&#160;&#160;(((count) - 1) * 9 - 5)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the min learning duration in ms. </p>
<p>The min supported packet size represents 10 ms and we need to account for some jitter and fast clocks while learning. Some messed up devices have very bad jitter for a small packet sample size. Jitter can also be introduced by the network itself.</p>
<p>So we'll allow packets to come in every 9ms on average for fast clocking with the last one coming in 5ms early for jitter. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00154">154</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a78f0d65ed005465b56a9f04834077907"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78f0d65ed005465b56a9f04834077907">&#9670;&nbsp;</a></span>DEFAULT_DTLS_MTU</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_DTLS_MTU&#160;&#160;&#160;1200</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00188">188</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a3d5f788ed405ca3ab6a778892570b2a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d5f788ed405ca3ab6a778892570b2a2">&#9670;&nbsp;</a></span>DEFAULT_DTMF_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_DTMF_TIMEOUT&#160;&#160;&#160;(150 * (8000 / 1000))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>samples </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00137">137</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a1362d4944e44c2bb083c0d185b9685f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1362d4944e44c2bb083c0d185b9685f6">&#9670;&nbsp;</a></span>DEFAULT_ICESUPPORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_ICESUPPORT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00186">186</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="af9e0d41ebd37d2b8e758b7fff48d31f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9e0d41ebd37d2b8e758b7fff48d31f0">&#9670;&nbsp;</a></span>DEFAULT_LEARNING_MIN_DURATION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_LEARNING_MIN_DURATION&#160;&#160;&#160;<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ac5a44ba6e8dbccfe0f8ba5bfd1e9b10d">CALC_LEARNING_MIN_DURATION</a>(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a19b83f0b08541761e041bc81db287bce">DEFAULT_LEARNING_MIN_SEQUENTIAL</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00155">155</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a19b83f0b08541761e041bc81db287bce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19b83f0b08541761e041bc81db287bce">&#9670;&nbsp;</a></span>DEFAULT_LEARNING_MIN_SEQUENTIAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_LEARNING_MIN_SEQUENTIAL&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00141">141</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a332be34df280794db6d6915c32ab842e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a332be34df280794db6d6915c32ab842e">&#9670;&nbsp;</a></span>DEFAULT_RTP_END</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_RTP_END&#160;&#160;&#160;31000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Default maximum port number to end allocating RTP ports at </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00100">100</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a1155654303702ccc5fdcee752b634d2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1155654303702ccc5fdcee752b634d2f">&#9670;&nbsp;</a></span>DEFAULT_RTP_RECV_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_RTP_RECV_BUFFER_SIZE&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The initial size of the RTP receiver buffer </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00111">111</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08303">ast_rtp_prop_set()</a>.</p>

</div>
</div>
<a id="ab26cc2139530464f618633637abd2ac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab26cc2139530464f618633637abd2ac2">&#9670;&nbsp;</a></span>DEFAULT_RTP_SEND_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_RTP_SEND_BUFFER_SIZE&#160;&#160;&#160;250</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The initial size of the RTP send buffer </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00109">109</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08303">ast_rtp_prop_set()</a>.</p>

</div>
</div>
<a id="aa01c54d6d9412e8278c7422dab8899e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa01c54d6d9412e8278c7422dab8899e5">&#9670;&nbsp;</a></span>DEFAULT_RTP_START</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_RTP_START&#160;&#160;&#160;5000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Default port number to start allocating RTP ports from </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00099">99</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a73b8af2a30d6bdd4dc566f24ddb2f51f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73b8af2a30d6bdd4dc566f24ddb2f51f">&#9670;&nbsp;</a></span>DEFAULT_SRTP_REPLAY_PROTECTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_SRTP_REPLAY_PROTECTION&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00185">185</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="aeb729ec664cf95a04d65276f08a80b24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb729ec664cf95a04d65276f08a80b24">&#9670;&nbsp;</a></span>DEFAULT_STRICT_RTP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_STRICT_RTP&#160;&#160;&#160;<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4aa60bd948f9a50c92c99d384481de8448">STRICT_RTP_YES</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enabled by default </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00184">184</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="af927b84002d0ac80345425c105ed0d10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af927b84002d0ac80345425c105ed0d10">&#9670;&nbsp;</a></span>DEFAULT_STUN_SOFTWARE_ATTRIBUTE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_STUN_SOFTWARE_ATTRIBUTE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00187">187</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="af54f297bc8f157b342b0fe94bbbbb899"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af54f297bc8f157b342b0fe94bbbbb899">&#9670;&nbsp;</a></span>DEFAULT_TURN_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_TURN_PORT&#160;&#160;&#160;3478</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00105">105</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a46f52e38712b5b348ad95619f3d104ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46f52e38712b5b348ad95619f3d104ae">&#9670;&nbsp;</a></span>DTMF_SAMPLE_RATE_MS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DTMF_SAMPLE_RATE_MS&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DTMF samples per millisecond </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00135">135</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04134">ast_rtp_dtmf_begin()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04209">ast_rtp_dtmf_continuation()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04255">ast_rtp_dtmf_end_with_duration()</a>.</p>

</div>
</div>
<a id="a1b696f676e4e78260e3356973f647034"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b696f676e4e78260e3356973f647034">&#9670;&nbsp;</a></span>FLAG_3389_WARNING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLAG_3389_WARNING&#160;&#160;&#160;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00283">283</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05724">process_cn_rfc3389()</a>.</p>

</div>
</div>
<a id="a512509bde2176b98fbdcbceb1a528f6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a512509bde2176b98fbdcbceb1a528f6d">&#9670;&nbsp;</a></span>FLAG_DTMF_COMPENSATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLAG_DTMF_COMPENSATE&#160;&#160;&#160;(1 &lt;&lt; 4)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00288">288</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="ab67e21f67a96dd6a9e1b0450ecddecf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab67e21f67a96dd6a9e1b0450ecddecf3">&#9670;&nbsp;</a></span>FLAG_NAT_ACTIVE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLAG_NAT_ACTIVE&#160;&#160;&#160;(3 &lt;&lt; 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00284">284</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06649">bridge_p2p_rtp_write()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">rtp_raw_write()</a>.</p>

</div>
</div>
<a id="a7ea8f10bd8b1fab6990526c3271a7b59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ea8f10bd8b1fab6990526c3271a7b59">&#9670;&nbsp;</a></span>FLAG_NAT_INACTIVE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLAG_NAT_INACTIVE&#160;&#160;&#160;(0 &lt;&lt; 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00285">285</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06649">bridge_p2p_rtp_write()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">rtp_raw_write()</a>.</p>

</div>
</div>
<a id="ad2adc4c49cf65121c15dc838f43c6cb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2adc4c49cf65121c15dc838f43c6cb0">&#9670;&nbsp;</a></span>FLAG_NAT_INACTIVE_NOWARN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLAG_NAT_INACTIVE_NOWARN&#160;&#160;&#160;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00286">286</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06649">bridge_p2p_rtp_write()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">rtp_raw_write()</a>.</p>

</div>
</div>
<a id="ab7d9bd5ba01a9647e359799e0d201cbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7d9bd5ba01a9647e359799e0d201cbf">&#9670;&nbsp;</a></span>FLAG_NEED_MARKER_BIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLAG_NEED_MARKER_BIT&#160;&#160;&#160;(1 &lt;&lt; 3)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00287">287</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04360">ast_rtp_change_source()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08643">ast_rtp_local_bridge()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08755">ast_rtp_stop()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04348">ast_rtp_update_source()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06649">bridge_p2p_rtp_write()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">rtp_raw_write()</a>.</p>

</div>
</div>
<a id="abd9786ad278407e1a62f847e4f6434a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd9786ad278407e1a62f847e4f6434a7">&#9670;&nbsp;</a></span>FLAG_REQ_LOCAL_BRIDGE_BIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLAG_REQ_LOCAL_BRIDGE_BIT&#160;&#160;&#160;(1 &lt;&lt; 5)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00289">289</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08643">ast_rtp_local_bridge()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06649">bridge_p2p_rtp_write()</a>.</p>

</div>
</div>
<a id="a12a850150b82a6ce1077e204d4f5638c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12a850150b82a6ce1077e204d4f5638c">&#9670;&nbsp;</a></span>MAX_TIMESTAMP_SKEW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_TIMESTAMP_SKEW&#160;&#160;&#160;640</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00092">92</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">rtp_raw_write()</a>.</p>

</div>
</div>
<a id="ade9a07c6403adc775d18c0bc71be6c92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade9a07c6403adc775d18c0bc71be6c92">&#9670;&nbsp;</a></span>MAXIMUM_RTP_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAXIMUM_RTP_PORT&#160;&#160;&#160;65535</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum port number to accept </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00103">103</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a89e0d6d0798eee9bc6c6c858fe3401fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89e0d6d0798eee9bc6c6c858fe3401fe">&#9670;&nbsp;</a></span>MAXIMUM_RTP_RECV_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAXIMUM_RTP_RECV_BUFFER_SIZE&#160;&#160;&#160;(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a1155654303702ccc5fdcee752b634d2f">DEFAULT_RTP_RECV_BUFFER_SIZE</a> + 20)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum RTP receive buffer size </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00112">112</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>

</div>
</div>
<a id="af6e0d898757b96d87a1d93e446d71bdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6e0d898757b96d87a1d93e446d71bdd">&#9670;&nbsp;</a></span>MAXIMUM_RTP_SEND_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAXIMUM_RTP_SEND_BUFFER_SIZE&#160;&#160;&#160;(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ab26cc2139530464f618633637abd2ac2">DEFAULT_RTP_SEND_BUFFER_SIZE</a> + 200)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum RTP send buffer size </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00110">110</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05963">ast_rtp_rtcp_handle_nack()</a>.</p>

</div>
</div>
<a id="aa4c6fd39ea1aa9fe6b3c067224c18550"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4c6fd39ea1aa9fe6b3c067224c18550">&#9670;&nbsp;</a></span>MINIMUM_RTP_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MINIMUM_RTP_PORT&#160;&#160;&#160;1024</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Minimum port number to accept </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00102">102</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="aa94121f808aa4871f949d54edef0e79c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa94121f808aa4871f949d54edef0e79c">&#9670;&nbsp;</a></span>MISSING_SEQNOS_ADDED_TRIGGER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MISSING_SEQNOS_ADDED_TRIGGER&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of immediate missing packets that will trigger an immediate NACK </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00114">114</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>

</div>
</div>
<a id="a038f2cbb7068c08f4be16b20f6ffdb39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a038f2cbb7068c08f4be16b20f6ffdb39">&#9670;&nbsp;</a></span>OLD_PACKET_COUNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OLD_PACKET_COUNT&#160;&#160;&#160;1000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of previous packets that are considered old </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00113">113</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>

</div>
</div>
<a id="a3a8359edb63fbe2754be0314451ce8b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a8359edb63fbe2754be0314451ce8b3">&#9670;&nbsp;</a></span>RTCP_DEFAULT_INTERVALMS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_DEFAULT_INTERVALMS&#160;&#160;&#160;5000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Default milli-seconds between RTCP reports we send </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00095">95</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a1816e1926678b2ba35fde74295580c69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1816e1926678b2ba35fde74295580c69">&#9670;&nbsp;</a></span>RTCP_FB_NACK_BLOCK_WORD_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_FB_NACK_BLOCK_WORD_LENGTH&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06098">6098</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>

</div>
</div>
<a id="a6dbf005049ce30693e57c45fdd45250c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dbf005049ce30693e57c45fdd45250c">&#9670;&nbsp;</a></span>RTCP_FB_REMB_BLOCK_WORD_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_FB_REMB_BLOCK_WORD_LENGTH&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06097">6097</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>

</div>
</div>
<a id="a5bd8d430ff046850f29c8b141d5a61e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bd8d430ff046850f29c8b141d5a61e6">&#9670;&nbsp;</a></span>RTCP_HEADER_SSRC_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_HEADER_SSRC_LENGTH&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06096">6096</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>

</div>
</div>
<a id="af9492fccb2be755522d50f4d514006cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9492fccb2be755522d50f4d514006cb">&#9670;&nbsp;</a></span>RTCP_LENGTH_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_LENGTH_MASK&#160;&#160;&#160;0xFFFF</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06061">6061</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>

</div>
</div>
<a id="a0c4d8290d22254494ae62e8b6974ec35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c4d8290d22254494ae62e8b6974ec35">&#9670;&nbsp;</a></span>RTCP_LENGTH_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_LENGTH_SHIFT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06070">6070</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>

</div>
</div>
<a id="a40ff8a6874204fbbe6c375ae79d17b5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40ff8a6874204fbbe6c375ae79d17b5e">&#9670;&nbsp;</a></span>RTCP_MAX_INTERVALMS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_MAX_INTERVALMS&#160;&#160;&#160;60000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Max milli-seconds between RTCP reports we send </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00097">97</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="abc283785a565edd42110d25d9ade9080"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc283785a565edd42110d25d9ade9080">&#9670;&nbsp;</a></span>RTCP_MIN_INTERVALMS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_MIN_INTERVALMS&#160;&#160;&#160;500</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Min milli-seconds between RTCP reports we send </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00096">96</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a59327ae7b42d4b9c921ba3e866494348"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59327ae7b42d4b9c921ba3e866494348">&#9670;&nbsp;</a></span>RTCP_PADDING_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_PADDING_MASK&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06064">6064</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="a65b04ffacf79df77e76eb4feb1b3eacd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65b04ffacf79df77e76eb4feb1b3eacd">&#9670;&nbsp;</a></span>RTCP_PADDING_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_PADDING_SHIFT&#160;&#160;&#160;29</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06073">6073</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="aae21bfbb41fc9426a8b032904a36dca6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae21bfbb41fc9426a8b032904a36dca6">&#9670;&nbsp;</a></span>RTCP_PAYLOAD_TYPE_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_PAYLOAD_TYPE_MASK&#160;&#160;&#160;0xFF</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06062">6062</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>

</div>
</div>
<a id="a102b1c7dd32df715a82ef484f51bdb9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a102b1c7dd32df715a82ef484f51bdb9b">&#9670;&nbsp;</a></span>RTCP_PAYLOAD_TYPE_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_PAYLOAD_TYPE_SHIFT&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06071">6071</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>

</div>
</div>
<a id="a9a6a8ff12e4ca01f1783dd6a8ab2e449"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a6a8ff12e4ca01f1783dd6a8ab2e449">&#9670;&nbsp;</a></span>RTCP_PT_APP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_PT_APP&#160;&#160;&#160;204</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Application defined (From RFC3550) </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00129">129</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="a5723708baf43b6326706331795fcd52f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5723708baf43b6326706331795fcd52f">&#9670;&nbsp;</a></span>RTCP_PT_BYE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_PT_BYE&#160;&#160;&#160;203</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Goodbye (To remove SSRC's from tables) (From RFC3550) </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00127">127</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05910">rtcp_payload_type2str()</a>.</p>

</div>
</div>
<a id="a38fce7504b6d0ac96b1f07fa86598ce8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38fce7504b6d0ac96b1f07fa86598ce8">&#9670;&nbsp;</a></span>RTCP_PT_FUR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_PT_FUR&#160;&#160;&#160;192</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Full INTRA-frame Request / Fast Update Request (From RFC2032) </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00119">119</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05910">rtcp_payload_type2str()</a>.</p>

</div>
</div>
<a id="a711189b19386915beec87d8edddb3464"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a711189b19386915beec87d8edddb3464">&#9670;&nbsp;</a></span>RTCP_PT_PSFB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_PT_PSFB&#160;&#160;&#160;<a class="el" href="../../d5/dde/rtp__engine_8h.html#a02281c7f49b834e978a6fa7d7dd19de2">AST_RTP_RTCP_PSFB</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Payload Specific Feed Back (From RFC4585 also RFC5104) </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00132">132</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05942">rtcp_payload_subtype2str()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05910">rtcp_payload_type2str()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05160">rtp_write_rtcp_fir()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05222">rtp_write_rtcp_psfb()</a>.</p>

</div>
</div>
<a id="a4d8564f9c96df1cd1076ad4f6faed7ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d8564f9c96df1cd1076ad4f6faed7ab">&#9670;&nbsp;</a></span>RTCP_PT_RR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_PT_RR&#160;&#160;&#160;<a class="el" href="../../d5/dde/rtp__engine_8h.html#a776b38f4dc6889fc67809bd9a226bb18">AST_RTP_RTCP_RR</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Receiver Report (From RFC3550) </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00123">123</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04491">ast_rtcp_generate_report()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05910">rtcp_payload_type2str()</a>.</p>

</div>
</div>
<a id="aa6a84235b636497872f31a832a8b17af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6a84235b636497872f31a832a8b17af">&#9670;&nbsp;</a></span>RTCP_PT_SDES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_PT_SDES&#160;&#160;&#160;202</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Source Description (From RFC3550) </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00125">125</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04641">ast_rtcp_generate_sdes()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05910">rtcp_payload_type2str()</a>.</p>

</div>
</div>
<a id="abe50a9d9c36c702889863e206f4502c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe50a9d9c36c702889863e206f4502c6">&#9670;&nbsp;</a></span>RTCP_PT_SR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_PT_SR&#160;&#160;&#160;<a class="el" href="../../d5/dde/rtp__engine_8h.html#a3fa0ae6b0bf0bc054292890cfa0499e8">AST_RTP_RTCP_SR</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sender Report (From RFC3550) </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00121">121</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04491">ast_rtcp_generate_report()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05910">rtcp_payload_type2str()</a>.</p>

</div>
</div>
<a id="a9c460b328c3e2d05ed29f3e492b42ed9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c460b328c3e2d05ed29f3e492b42ed9">&#9670;&nbsp;</a></span>RTCP_REPORT_COUNT_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_REPORT_COUNT_MASK&#160;&#160;&#160;0x1F</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06063">6063</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>

</div>
</div>
<a id="a358dac6e270355f7ca564ffcef4fa370"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a358dac6e270355f7ca564ffcef4fa370">&#9670;&nbsp;</a></span>RTCP_REPORT_COUNT_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_REPORT_COUNT_SHIFT&#160;&#160;&#160;24</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06072">6072</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>

</div>
</div>
<a id="a2295ead5af93e27d5a32ecee7e4cb40a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2295ead5af93e27d5a32ecee7e4cb40a">&#9670;&nbsp;</a></span>RTCP_RR_BLOCK_WORD_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_RR_BLOCK_WORD_LENGTH&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06095">6095</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>

</div>
</div>
<a id="a2f9861ee11cba20a1a0d3eea4840cbc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f9861ee11cba20a1a0d3eea4840cbc0">&#9670;&nbsp;</a></span>RTCP_SR_BLOCK_WORD_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_SR_BLOCK_WORD_LENGTH&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06094">6094</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>

</div>
</div>
<a id="a6086e203d0d3d4888e999fa6e9b486b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6086e203d0d3d4888e999fa6e9b486b6">&#9670;&nbsp;</a></span>RTCP_VALID_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_VALID_MASK&#160;&#160;&#160;(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ac45a536a85bcf54c7d1aafac6bb40e30">RTCP_VERSION_MASK_SHIFTED</a> | (((<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aae21bfbb41fc9426a8b032904a36dca6">RTCP_PAYLOAD_TYPE_MASK</a> &amp; ~0x1)) &lt;&lt; RTCP_PAYLOAD_TYPE_SHIFT))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06091">6091</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>

</div>
</div>
<a id="a178f67ed7bee20c65399faeb0b65fd3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a178f67ed7bee20c65399faeb0b65fd3a">&#9670;&nbsp;</a></span>RTCP_VALID_VALUE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_VALID_VALUE&#160;&#160;&#160;(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a9411e6f925f7e291f033d6b1b6584703">RTCP_VERSION_SHIFTED</a> | (<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#abe50a9d9c36c702889863e206f4502c6">RTCP_PT_SR</a> &lt;&lt; <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a102b1c7dd32df715a82ef484f51bdb9b">RTCP_PAYLOAD_TYPE_SHIFT</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06092">6092</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>

</div>
</div>
<a id="a1bc9fd275b32a705d0ac742c2ac4e9c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bc9fd275b32a705d0ac742c2ac4e9c8">&#9670;&nbsp;</a></span>RTCP_VERSION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_VERSION&#160;&#160;&#160;2U</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06076">6076</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="ae44e6f0fccf9f2c4dcf5316de7977342"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae44e6f0fccf9f2c4dcf5316de7977342">&#9670;&nbsp;</a></span>RTCP_VERSION_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_VERSION_MASK&#160;&#160;&#160;0x03</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06065">6065</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="ac45a536a85bcf54c7d1aafac6bb40e30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac45a536a85bcf54c7d1aafac6bb40e30">&#9670;&nbsp;</a></span>RTCP_VERSION_MASK_SHIFTED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_VERSION_MASK_SHIFTED&#160;&#160;&#160;(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ae44e6f0fccf9f2c4dcf5316de7977342">RTCP_VERSION_MASK</a> &lt;&lt; <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a7e01818501ecff63931f14aea1e36004">RTCP_VERSION_SHIFT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06078">6078</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>

</div>
</div>
<a id="a7e01818501ecff63931f14aea1e36004"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e01818501ecff63931f14aea1e36004">&#9670;&nbsp;</a></span>RTCP_VERSION_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_VERSION_SHIFT&#160;&#160;&#160;30</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06074">6074</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="a9411e6f925f7e291f033d6b1b6584703"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9411e6f925f7e291f033d6b1b6584703">&#9670;&nbsp;</a></span>RTCP_VERSION_SHIFTED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTCP_VERSION_SHIFTED&#160;&#160;&#160;(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a1bc9fd275b32a705d0ac742c2ac4e9c8">RTCP_VERSION</a> &lt;&lt; <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a7e01818501ecff63931f14aea1e36004">RTCP_VERSION_SHIFT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06077">6077</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>

</div>
</div>
<a id="a3b7005812dac9fa0577e157db320ae4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b7005812dac9fa0577e157db320ae4c">&#9670;&nbsp;</a></span>RTP_DTLS_ESTABLISHED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTP_DTLS_ESTABLISHED&#160;&#160;&#160;-37</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00161">161</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03084">__rtp_recvfrom()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06590">ast_rtcp_read()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>

</div>
</div>
<a id="ad8037e984fd1fcc8777ec928d65b9ded"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8037e984fd1fcc8777ec928d65b9ded">&#9670;&nbsp;</a></span>RTP_MTU</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTP_MTU&#160;&#160;&#160;1200</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00134">134</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="af3a188c3caa83026e351d58ef855424a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3a188c3caa83026e351d58ef855424a">&#9670;&nbsp;</a></span>RTP_SEQ_MOD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTP_SEQ_MOD&#160;&#160;&#160;(1&lt;&lt;16)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A sequence number can't be more than 16 bits </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00094">94</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">ast_rtp_interpret()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07087">rtp_instance_parse_transport_wide_cc()</a>.</p>

</div>
</div>
<a id="ae55dc6ec08efa57214027cb16f7e83c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae55dc6ec08efa57214027cb16f7e83c1">&#9670;&nbsp;</a></span>SEQNO_CYCLE_OVER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEQNO_CYCLE_OVER&#160;&#160;&#160;65536</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number after the maximum allowed sequence number </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00116">116</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04729">ast_rtcp_generate_nack()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>

</div>
</div>
<a id="a4e6aec67d7670cbcf4efa4ac86c8d242"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e6aec67d7670cbcf4efa4ac86c8d242">&#9670;&nbsp;</a></span>SRTP_MASTER_KEY_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SRTP_MASTER_KEY_LEN&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00157">157</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/dd4/res__srtp_8c_source.html#l00698">res_sdp_crypto_alloc()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02762">rtcp_debug_test_addr()</a>.</p>

</div>
</div>
<a id="a358ca82334e20a5a41d548c5caf6680b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a358ca82334e20a5a41d548c5caf6680b">&#9670;&nbsp;</a></span>SRTP_MASTER_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SRTP_MASTER_LEN&#160;&#160;&#160;(<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a4e6aec67d7670cbcf4efa4ac86c8d242">SRTP_MASTER_KEY_LEN</a> + <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aab38738dfce00dedb179f9fe1c4a90ee">SRTP_MASTER_SALT_LEN</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00159">159</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02762">rtcp_debug_test_addr()</a>.</p>

</div>
</div>
<a id="aab38738dfce00dedb179f9fe1c4a90ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab38738dfce00dedb179f9fe1c4a90ee">&#9670;&nbsp;</a></span>SRTP_MASTER_SALT_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SRTP_MASTER_SALT_LEN&#160;&#160;&#160;14</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00158">158</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02762">rtcp_debug_test_addr()</a>.</p>

</div>
</div>
<a id="ac8e8607839162548768620a5213e7b1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8e8607839162548768620a5213e7b1a">&#9670;&nbsp;</a></span>SSRC_MAPPING_ELEM_CMP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSRC_MAPPING_ELEM_CMP</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">elem, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((elem).instance == (<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SSRC mapping comparator for <a class="el" href="../../d6/d68/vector_8h.html#a671c51a3e6202230ef9d2330624ea996" title="Remove an element from a vector that matches the given comparison. ">AST_VECTOR_REMOVE_CMP_UNORDERED()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elem</td><td>Element to compare against </td></tr>
    <tr><td class="paramname">value</td><td>Value to compare with the vector element.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if element does not match. </dd>
<dd>
Non-zero if element matches. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04045">4045</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08938">ast_rtp_bundle()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04048">ast_rtp_destroy()</a>.</p>

</div>
</div>
<a id="a91b1655b35022bc0a34e7187af475b26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91b1655b35022bc0a34e7187af475b26">&#9670;&nbsp;</a></span>STRICT_RTP_LEARN_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STRICT_RTP_LEARN_TIMEOUT&#160;&#160;&#160;5000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Strict RTP learning timeout time in milliseconds. </p>
<dl class="section note"><dt>Note</dt><dd>Set to 5 seconds to allow reinvite chains for direct media to settle before media actually starts to arrive. There may be a reinvite collision involved on the other leg. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00182">182</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>

</div>
</div>
<a id="ad7249b0dec2fde720fe4a30d04ce3482"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7249b0dec2fde720fe4a30d04ce3482">&#9670;&nbsp;</a></span>TRANSPORT_SOCKET_RTCP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRANSPORT_SOCKET_RTCP&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00292">292</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03084">__rtp_recvfrom()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02663">ast_rtp_on_ice_rx_data()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02680">ast_rtp_on_ice_tx_pkt()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08303">ast_rtp_prop_set()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03750">ice_create()</a>.</p>

</div>
</div>
<a id="a48d8ff743c69a9da11d543b387078590"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48d8ff743c69a9da11d543b387078590">&#9670;&nbsp;</a></span>TRANSPORT_SOCKET_RTP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRANSPORT_SOCKET_RTP&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00291">291</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03084">__rtp_recvfrom()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02663">ast_rtp_on_ice_rx_data()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02680">ast_rtp_on_ice_tx_pkt()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03750">ice_create()</a>.</p>

</div>
</div>
<a id="a076af3a6d50860b502ce8182a5105dbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a076af3a6d50860b502ce8182a5105dbd">&#9670;&nbsp;</a></span>TRANSPORT_TURN_RTCP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRANSPORT_TURN_RTCP&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00294">294</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01577">ast_rtp_ice_turn_request()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02663">ast_rtp_on_ice_rx_data()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02680">ast_rtp_on_ice_tx_pkt()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01388">ast_rtp_on_turn_rx_rtcp_data()</a>.</p>

</div>
</div>
<a id="aa05629cc7dbc25042c121a9670f150e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa05629cc7dbc25042c121a9670f150e3">&#9670;&nbsp;</a></span>TRANSPORT_TURN_RTP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRANSPORT_TURN_RTP&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00293">293</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01577">ast_rtp_ice_turn_request()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02663">ast_rtp_on_ice_rx_data()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02680">ast_rtp_on_ice_tx_pkt()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01322">ast_rtp_on_turn_rx_rtp_data()</a>.</p>

</div>
</div>
<a id="a03f4d7d97d914208e1f779d1c09db7bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03f4d7d97d914208e1f779d1c09db7bb">&#9670;&nbsp;</a></span>TURN_STATE_WAIT_TIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TURN_STATE_WAIT_TIME&#160;&#160;&#160;2000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00107">107</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01577">ast_rtp_ice_turn_request()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00959">ice_reset_session()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03901">rtp_deallocate_transport()</a>.</p>

</div>
</div>
<a id="a0ce9e87059f0aa901cba14a9aab5e1a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ce9e87059f0aa901cba14a9aab5e1a9">&#9670;&nbsp;</a></span>ZFONE_PROFILE_ID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZFONE_PROFILE_ID&#160;&#160;&#160;0x505a</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00139">139</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a41f01397502dd66338663a1fa72382e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41f01397502dd66338663a1fa72382e4">&#9670;&nbsp;</a></span>strict_rtp_mode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4">strict_rtp_mode</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a41f01397502dd66338663a1fa72382e4abe40d855eebd173a196e0ea75d0d4b9e"></a>STRICT_RTP_NO&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a41f01397502dd66338663a1fa72382e4aa60bd948f9a50c92c99d384481de8448"></a>STRICT_RTP_YES&#160;</td><td class="fielddoc"><p>Don't adhere to any strict RTP rules </p>
</td></tr>
<tr><td class="fieldname"><a id="a41f01397502dd66338663a1fa72382e4a82328ab5af804ea335d057e3be8f7ae4"></a>STRICT_RTP_SEQNO&#160;</td><td class="fielddoc"><p>Strict RTP that restricts packets based on time and sequence number </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00169">169</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                     {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4abe40d855eebd173a196e0ea75d0d4b9e">STRICT_RTP_NO</a> = 0,   <span class="comment">/*! Don&#39;t adhere to any strict RTP rules */</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4aa60bd948f9a50c92c99d384481de8448">STRICT_RTP_YES</a>,      <span class="comment">/*! Strict RTP that restricts packets based on time and sequence number */</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4a82328ab5af804ea335d057e3be8f7ae4">STRICT_RTP_SEQNO</a>, <span class="comment">/*! Strict RTP that restricts packets based on sequence number */</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;};</div><div class="ttc" id="res__rtp__asterisk_8c_html_a41f01397502dd66338663a1fa72382e4aa60bd948f9a50c92c99d384481de8448"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4aa60bd948f9a50c92c99d384481de8448">STRICT_RTP_YES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00171">res_rtp_asterisk.c:171</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a41f01397502dd66338663a1fa72382e4abe40d855eebd173a196e0ea75d0d4b9e"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4abe40d855eebd173a196e0ea75d0d4b9e">STRICT_RTP_NO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00170">res_rtp_asterisk.c:170</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a41f01397502dd66338663a1fa72382e4a82328ab5af804ea335d057e3be8f7ae4"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4a82328ab5af804ea335d057e3be8f7ae4">STRICT_RTP_SEQNO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00172">res_rtp_asterisk.c:172</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aca6484d75ee9d79a5d4447149f9c8c4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca6484d75ee9d79a5d4447149f9c8c4b">&#9670;&nbsp;</a></span>strict_rtp_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4b">strict_rtp_state</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1"></a>STRICT_RTP_OPEN&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aca6484d75ee9d79a5d4447149f9c8c4ba0c26c1144bb830775979deb20e049368"></a>STRICT_RTP_LEARN&#160;</td><td class="fielddoc"><p>No RTP packets should be dropped, all sources accepted </p>
</td></tr>
<tr><td class="fieldname"><a id="aca6484d75ee9d79a5d4447149f9c8c4baff585ea9a2059021ce5a5f4a7ed8895f"></a>STRICT_RTP_CLOSED&#160;</td><td class="fielddoc"><p>Accept next packet as source </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00163">163</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                      {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1">STRICT_RTP_OPEN</a> = 0, <span class="comment">/*! No RTP packets should be dropped, all sources accepted */</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4ba0c26c1144bb830775979deb20e049368">STRICT_RTP_LEARN</a>,    <span class="comment">/*! Accept next packet as source */</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4baff585ea9a2059021ce5a5f4a7ed8895f">STRICT_RTP_CLOSED</a>,   <span class="comment">/*! Drop all RTP packets not coming from source that was learned */</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;};</div><div class="ttc" id="res__rtp__asterisk_8c_html_aca6484d75ee9d79a5d4447149f9c8c4ba0c26c1144bb830775979deb20e049368"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4ba0c26c1144bb830775979deb20e049368">STRICT_RTP_LEARN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00165">res_rtp_asterisk.c:165</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1">STRICT_RTP_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00164">res_rtp_asterisk.c:164</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aca6484d75ee9d79a5d4447149f9c8c4baff585ea9a2059021ce5a5f4a7ed8895f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4baff585ea9a2059021ce5a5f4a7ed8895f">STRICT_RTP_CLOSED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00166">res_rtp_asterisk.c:166</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="acd1ff5e1228969321088d10842407b01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd1ff5e1228969321088d10842407b01">&#9670;&nbsp;</a></span>__init_pj_thread_storage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_pj_thread_storage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00862">862</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09742">9742</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="a91f96771023031aa67c022c6ab35fcb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91f96771023031aa67c022c6ab35fcb3">&#9670;&nbsp;</a></span>__rtp_find_instance_by_ssrc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a>* __rtp_find_instance_by_ssrc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>ssrc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05869">5869</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08865">ast_rtp_get_ssrc()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00670">AST_VECTOR_GET_ADDR</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00332">rtp_ssrc_mapping::instance</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00328">rtp_ssrc_mapping::ssrc</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00330">rtp_ssrc_mapping::ssrc_valid</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">ast_rtp::themssrc</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">ast_rtp::themssrc_valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05904">rtp_find_instance_by_media_source_ssrc()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05897">rtp_find_instance_by_packet_source_ssrc()</a>.</p>
<div class="fragment"><div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;{</div><div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;</div><div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;rtp-&gt;ssrc_mapping)) {</div><div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;      <span class="comment">/* This instance is not bundled */</span></div><div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;      <span class="keywordflow">return</span> instance;</div><div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;   }</div><div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;</div><div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;   <span class="comment">/* Find the bundled child instance */</span></div><div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;rtp-&gt;ssrc_mapping); ++index) {</div><div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../db/de7/structrtp__ssrc__mapping.html">rtp_ssrc_mapping</a> *mapping = <a class="code" href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a>(&amp;rtp-&gt;ssrc_mapping, index);</div><div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mapping_ssrc = source ? <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ade81085abaef26273a665997e6693f86">ast_rtp_get_ssrc</a>(mapping-&gt;<a class="code" href="../../db/de7/structrtp__ssrc__mapping.html#ab8379d828ec083fe0cdb16f540f67d1f">instance</a>) : mapping-&gt;<a class="code" href="../../db/de7/structrtp__ssrc__mapping.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>;</div><div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;</div><div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;      <span class="keywordflow">if</span> (mapping-&gt;<a class="code" href="../../db/de7/structrtp__ssrc__mapping.html#ab41fa616af8668af19f475a60215b2da">ssrc_valid</a> &amp;&amp; mapping_ssrc == <a class="code" href="../../db/de7/structrtp__ssrc__mapping.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>) {</div><div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;         <span class="keywordflow">return</span> mapping-&gt;<a class="code" href="../../db/de7/structrtp__ssrc__mapping.html#ab8379d828ec083fe0cdb16f540f67d1f">instance</a>;</div><div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;      }</div><div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;   }</div><div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;</div><div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;   <span class="comment">/* Does the SSRC match the bundled parent? */</span></div><div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">themssrc_valid</a> &amp;&amp; rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">themssrc</a> == <a class="code" href="../../db/de7/structrtp__ssrc__mapping.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>) {</div><div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../db/de7/structrtp__ssrc__mapping.html#ab8379d828ec083fe0cdb16f540f67d1f">instance</a>;</div><div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;   }</div><div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;}</div><div class="ttc" id="structrtp__ssrc__mapping_html_ab8379d828ec083fe0cdb16f540f67d1f"><div class="ttname"><a href="../../db/de7/structrtp__ssrc__mapping.html#ab8379d828ec083fe0cdb16f540f67d1f">rtp_ssrc_mapping::instance</a></div><div class="ttdeci">struct ast_rtp_instance * instance</div><div class="ttdoc">The RTP instance this SSRC belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00332">res_rtp_asterisk.c:332</a></div></div>
<div class="ttc" id="structrtp__ssrc__mapping_html"><div class="ttname"><a href="../../db/de7/structrtp__ssrc__mapping.html">rtp_ssrc_mapping</a></div><div class="ttdoc">Structure used for mapping an incoming SSRC to an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00326">res_rtp_asterisk.c:326</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structrtp__ssrc__mapping_html_ab41fa616af8668af19f475a60215b2da"><div class="ttname"><a href="../../db/de7/structrtp__ssrc__mapping.html#ab41fa616af8668af19f475a60215b2da">rtp_ssrc_mapping::ssrc_valid</a></div><div class="ttdeci">unsigned int ssrc_valid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00330">res_rtp_asterisk.c:330</a></div></div>
<div class="ttc" id="vector_8h_html_af613aa5306ff5ad101734708861d634e"><div class="ttname"><a href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a></div><div class="ttdeci">#define AST_VECTOR_GET_ADDR(vec, idx)</div><div class="ttdoc">Get an address of element in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00670">vector.h:670</a></div></div>
<div class="ttc" id="structast__rtp_html_a7aaf7fb2b26e335304c8a89cc36aac00"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">ast_rtp::themssrc_valid</a></div><div class="ttdeci">unsigned int themssrc_valid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">res_rtp_asterisk.c:377</a></div></div>
<div class="ttc" id="structast__rtp_html_afe92c8ff0d37afbf84f8715f4144ca27"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">ast_rtp::themssrc</a></div><div class="ttdeci">unsigned int themssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">res_rtp_asterisk.c:376</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ade81085abaef26273a665997e6693f86"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ade81085abaef26273a665997e6693f86">ast_rtp_get_ssrc</a></div><div class="ttdeci">static unsigned int ast_rtp_get_ssrc(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08865">res_rtp_asterisk.c:8865</a></div></div>
<div class="ttc" id="structrtp__ssrc__mapping_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../db/de7/structrtp__ssrc__mapping.html#a9e10385ac55d32d10ef322d1a08a699d">rtp_ssrc_mapping::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdoc">The received SSRC. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00328">res_rtp_asterisk.c:328</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abb6d9500accafb5cb6df3a6ee6e73990"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb6d9500accafb5cb6df3a6ee6e73990">&#9670;&nbsp;</a></span>__rtp_recvfrom()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __rtp_recvfrom </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>sa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rtcp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03084">3084</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02886">ast_debug_dtls</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00606">ast_recvfrom()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00523">AST_RTP_DTLS_CONNECTION_EXISTING</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00516">AST_RTP_DTLS_SETUP_ACTPASS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00515">AST_RTP_DTLS_SETUP_PASSIVE</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00464">AST_RTP_ICE_COMPONENT_RTCP</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00463">AST_RTP_ICE_COMPONENT_RTP</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02901">ast_rtp_instance_get_test()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01080">ast_rtp_instance_set_remote_address</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00388">ast_sockaddr_cmp()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">in</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00597">ast_rtp_engine_test::packets_to_drop</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">pj_thread_register_check()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">ice_wrap::real_ice</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00161">RTP_DTLS_ESTABLISHED</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">ast_rtp::s</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00292">TRANSPORT_SOCKET_RTCP</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00291">TRANSPORT_SOCKET_RTP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03235">rtcp_recvfrom()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03241">rtp_recvfrom()</a>.</p>
<div class="fragment"><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;{</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP)</span></div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#aca392a8d3941cd0740aef3ad92545d67">in</a> = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *loop = rtcp ? &amp;rtp-&gt;rtcp_loop : &amp;rtp-&gt;rtp_loop;</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a> *<a class="code" href="../../d8/d89/structtest.html">test</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a>(instance);</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;   <span class="keywordflow">if</span> ((len = <a class="code" href="../../db/df1/netsock2_8h.html#ab8b4d30461c0683ce147322c790d11db">ast_recvfrom</a>(rtcp ? rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> : rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size, flags, sa)) &lt; 0) {</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;   }</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;   <span class="keywordflow">if</span> (test &amp;&amp; test-&gt;<a class="code" href="../../d5/d98/structast__rtp__engine__test.html#a8dbf2df25a080792f44380cdf628916f">packets_to_drop</a> &gt; 0) {</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;      test-&gt;<a class="code" href="../../d5/d98/structast__rtp__engine__test.html#a8dbf2df25a080792f44380cdf628916f">packets_to_drop</a>--;</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;   }</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP)</span></div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;   <span class="comment">/* If this is an SSL packet pass it to OpenSSL for processing. RFC section for first byte value:</span></div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;<span class="comment">    * https://tools.ietf.org/html/rfc5764#section-5.1.2 */</span></div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;   <span class="keywordflow">if</span> ((*in &gt;= 20) &amp;&amp; (*in &lt;= 63)) {</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;      <span class="keyword">struct </span>dtls_details *dtls = !rtcp ? &amp;rtp-&gt;dtls : &amp;rtp-&gt;rtcp-&gt;dtls;</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;      <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;      <span class="comment">/* If no SSL session actually exists terminate things */</span></div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;      <span class="keywordflow">if</span> (!dtls-&gt;ssl) {</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Received SSL traffic on RTP instance &#39;%p&#39; without an SSL session\n&quot;</span>,</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;            instance);</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;      }</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga9dbe7d005a64dc025289cb8f942bf8d0">ast_debug_dtls</a>(3, <span class="stringliteral">&quot;(%p) DTLS - __rtp_recvfrom rtp=%p - Got SSL packet &#39;%d&#39;\n&quot;</span>, instance, rtp, *in);</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;<span class="comment">       * A race condition is prevented between dtls_perform_handshake()</span></div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;<span class="comment">       * and this function because both functions have to get the</span></div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;<span class="comment">       * instance lock before they can do anything.  The</span></div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;<span class="comment">       * dtls_perform_handshake() function needs to start the timer</span></div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;<span class="comment">       * before we stop it below.</span></div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;      <span class="comment">/* Before we feed data into OpenSSL ensure that the timeout timer is either stopped or completed */</span></div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;      dtls_srtp_stop_timeout_timer(instance, rtp, rtcp);</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;      <span class="comment">/* If we don&#39;t yet know if we are active or passive and we receive a packet... we are obviously passive */</span></div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;      <span class="keywordflow">if</span> (dtls-&gt;dtls_setup == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a666bf79c451f17b96da27e2fc2c2827c">AST_RTP_DTLS_SETUP_ACTPASS</a>) {</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;         dtls-&gt;dtls_setup = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a14e80b1c389413cadf12354d06121ab2">AST_RTP_DTLS_SETUP_PASSIVE</a>;</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;         SSL_set_accept_state(dtls-&gt;ssl);</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;      }</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;      BIO_write(dtls-&gt;read_bio, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, len);</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;      len = SSL_read(dtls-&gt;ssl, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, len);</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;      <span class="keywordflow">if</span> ((len &lt; 0) &amp;&amp; (SSL_get_error(dtls-&gt;ssl, len) == SSL_ERROR_SSL)) {</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a> = ERR_get_error();</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;DTLS failure occurred on RTP instance &#39;%p&#39; due to reason &#39;%s&#39;, terminating\n&quot;</span>,</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;            instance, ERR_reason_error_string(error));</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;      }</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;      <span class="keywordflow">if</span> (SSL_is_init_finished(dtls-&gt;ssl)) {</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;         <span class="comment">/* Any further connections will be existing since this is now established */</span></div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;         dtls-&gt;connection = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9626fb58facd7ece2578af893daf998faf784f213578e0382006ac4256f262379">AST_RTP_DTLS_CONNECTION_EXISTING</a>;</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;         <span class="comment">/* Use the keying material to set up key/salt information */</span></div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;         <span class="keywordflow">if</span> ((res = dtls_srtp_setup(rtp, instance, rtcp))) {</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;            <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;         }</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;         <span class="comment">/* Notify that dtls has been established */</span></div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;         res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3b7005812dac9fa0577e157db320ae4c">RTP_DTLS_ESTABLISHED</a>;</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga9dbe7d005a64dc025289cb8f942bf8d0">ast_debug_dtls</a>(3, <span class="stringliteral">&quot;(%p) DTLS - __rtp_recvfrom rtp=%p - established&#39;\n&quot;</span>, instance, rtp);</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;         <span class="comment">/* Since we&#39;ve sent additional traffic start the timeout timer for retransmission */</span></div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;         dtls_srtp_start_timeout_timer(instance, rtp, rtcp);</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;      }</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;   }</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(loop) &amp;&amp; !<a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(loop, sa)) {</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;      <span class="comment">/* ICE traffic will have been handled in the TURN callback, so skip it but update the address</span></div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;<span class="comment">       * so it reflects the actual source and not the loopback</span></div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;      <span class="keywordflow">if</span> (rtcp) {</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(sa, &amp;rtp-&gt;rtcp-&gt;them);</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(instance, sa);</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;      }</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rtp-&gt;ice) {</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;      pj_str_t combined = pj_str(<a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(sa));</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;      pj_sockaddr <a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>;</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;      pj_status_t <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/db8/structice__wrap.html">ice_wrap</a> *ice;</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a>();</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;      pj_sockaddr_parse(pj_AF_UNSPEC(), 0, &amp;combined, &amp;address);</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;      <span class="comment">/* Release the instance lock to avoid deadlock with PJPROJECT group lock */</span></div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;      ice = rtp-&gt;ice;</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ice, +1);</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;      status = pj_ice_sess_on_rx_pkt(ice-&gt;<a class="code" href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">real_ice</a>,</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;         rtcp ? <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a> : <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a>,</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;         rtcp ? <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad7249b0dec2fde720fe4a30d04ce3482">TRANSPORT_SOCKET_RTCP</a> : <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a48d8ff743c69a9da11d543b387078590">TRANSPORT_SOCKET_RTP</a>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, len, &amp;address,</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;         pj_sockaddr_get_len(&amp;address));</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ice, -1);</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;      <span class="keywordflow">if</span> (status != PJ_SUCCESS) {</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;         <span class="keywordtype">char</span> err_buf[100];</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;         pj_strerror(status, err_buf, <span class="keyword">sizeof</span>(err_buf));</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;PJ ICE Rx error status code: %d &#39;%s&#39;.\n&quot;</span>,</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;            (<span class="keywordtype">int</span>)status, err_buf);</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;      }</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;      <span class="keywordflow">if</span> (!rtp-&gt;passthrough) {</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;         <span class="comment">/* If a unidirectional ICE negotiation occurs then lock on to the source of the</span></div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;<span class="comment">          * ICE traffic and use it as the target. This will occur if the remote side only</span></div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;<span class="comment">          * wants to receive media but never send to us.</span></div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;         <span class="keywordflow">if</span> (!rtp-&gt;ice_active_remote_candidates &amp;&amp; !rtp-&gt;ice_proposed_remote_candidates) {</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;            <span class="keywordflow">if</span> (rtcp) {</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;               <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;rtp-&gt;rtcp-&gt;them, sa);</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;               <a class="code" href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a>(instance, sa);</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;            }</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;         }</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;      }</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;      rtp-&gt;passthrough = 0;</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;   }</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_a008c70da51a5d4e337f5857dc14e3ef4a666bf79c451f17b96da27e2fc2c2827c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a666bf79c451f17b96da27e2fc2c2827c">AST_RTP_DTLS_SETUP_ACTPASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00516">rtp_engine.h:516</a></div></div>
<div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00464">rtp_engine.h:464</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="f2c_8h_html_a27c1bdb0cba23a9db2a51eed7b3b2ac1"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a></div><div class="ttdeci">char * address</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00059">f2c.h:59</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a368880aa0afe3ee532508eff1ba26882"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a></div><div class="ttdeci">struct ast_rtp_engine_test * ast_rtp_instance_get_test(struct ast_rtp_instance *instance)</div><div class="ttdoc">Obtain a pointer to the test callbacks on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02901">rtp_engine.c:2901</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3b7005812dac9fa0577e157db320ae4c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3b7005812dac9fa0577e157db320ae4c">RTP_DTLS_ESTABLISHED</a></div><div class="ttdeci">#define RTP_DTLS_ESTABLISHED</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00161">res_rtp_asterisk.c:161</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9626fb58facd7ece2578af893daf998faf784f213578e0382006ac4256f262379"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9626fb58facd7ece2578af893daf998faf784f213578e0382006ac4256f262379">AST_RTP_DTLS_CONNECTION_EXISTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00523">rtp_engine.h:523</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a008c70da51a5d4e337f5857dc14e3ef4a14e80b1c389413cadf12354d06121ab2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a14e80b1c389413cadf12354d06121ab2">AST_RTP_DTLS_SETUP_PASSIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00515">rtp_engine.h:515</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="netsock2_8h_html_abae1b903c8f5b7639235b579a267aaab"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a></div><div class="ttdeci">int ast_sockaddr_cmp(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00388">netsock2.c:388</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4884315209af5f6ecb90ba9ef0a70344"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a></div><div class="ttdeci">static void pj_thread_register_check(void)</div><div class="ttdoc">Function used to check if the calling thread is registered with pjlib. If it is not it will be regist...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">res_rtp_asterisk.c:865</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_aca392a8d3941cd0740aef3ad92545d67"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#aca392a8d3941cd0740aef3ad92545d67">in</a></div><div class="ttdeci">FILE * in</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structast__rtp__engine__test_html_a8dbf2df25a080792f44380cdf628916f"><div class="ttname"><a href="../../d5/d98/structast__rtp__engine__test.html#a8dbf2df25a080792f44380cdf628916f">ast_rtp_engine_test::packets_to_drop</a></div><div class="ttdeci">int packets_to_drop</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00597">rtp_engine.h:597</a></div></div>
<div class="ttc" id="structice__wrap_html"><div class="ttname"><a href="../../d9/db8/structice__wrap.html">ice_wrap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00320">res_rtp_asterisk.c:320</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00463">rtp_engine.h:463</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a90c48c7f24206e8822bf520dae0a2478"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_set_remote_address(instance, address)</div><div class="ttdoc">Set the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01080">rtp_engine.h:1080</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="netsock2_8h_html_ab8b4d30461c0683ce147322c790d11db"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ab8b4d30461c0683ce147322c790d11db">ast_recvfrom</a></div><div class="ttdeci">ssize_t ast_recvfrom(int sockfd, void *buf, size_t len, int flags, struct ast_sockaddr *src_addr)</div><div class="ttdoc">Wrapper around recvfrom(2) that uses struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00606">netsock2.c:606</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__rtp__engine__test_html"><div class="ttname"><a href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a></div><div class="ttdoc">Structure that represents the test functionality for res_rtp_asterisk unit tests. ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00595">rtp_engine.h:595</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga9dbe7d005a64dc025289cb8f942bf8d0"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga9dbe7d005a64dc025289cb8f942bf8d0">ast_debug_dtls</a></div><div class="ttdeci">#define ast_debug_dtls(sublevel,...)</div><div class="ttdoc">Log debug level DTLS information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02886">rtp_engine.h:2886</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad7249b0dec2fde720fe4a30d04ce3482"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad7249b0dec2fde720fe4a30d04ce3482">TRANSPORT_SOCKET_RTCP</a></div><div class="ttdeci">#define TRANSPORT_SOCKET_RTCP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00292">res_rtp_asterisk.c:292</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
<div class="ttc" id="structice__wrap_html_a947772eea928bd56792836dc5c55dac9"><div class="ttname"><a href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">ice_wrap::real_ice</a></div><div class="ttdeci">pj_ice_sess * real_ice</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">res_rtp_asterisk.c:321</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
<div class="ttc" id="structast__rtp_html_a339d22b3e442946380f98ed19e320db2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">ast_rtp::s</a></div><div class="ttdeci">int s</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">res_rtp_asterisk.c:368</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a48d8ff743c69a9da11d543b387078590"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a48d8ff743c69a9da11d543b387078590">TRANSPORT_SOCKET_RTP</a></div><div class="ttdeci">#define TRANSPORT_SOCKET_RTP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00291">res_rtp_asterisk.c:291</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abef5f1e6bda48737ffca70d3123023b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abef5f1e6bda48737ffca70d3123023b6">&#9670;&nbsp;</a></span>__rtp_sendto()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __rtp_sendto </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>sa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rtcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>via_ice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>use_srtp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03247">3247</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00464">AST_RTP_ICE_COMPONENT_RTCP</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00463">AST_RTP_ICE_COMPONENT_RTP</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02763">ast_rtp_instance_get_srtp()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03763">ast_rtp_instance_set_last_tx()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00614">ast_sendto()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">pj_thread_register_check()</a>, <a class="el" href="../../de/d15/res__srtp_8h_source.html#l00050">ast_srtp_res::protect</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">ice_wrap::real_ice</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">ast_rtp::s</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03303">rtcp_sendto()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">rtp_sendto()</a>.</p>
<div class="fragment"><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;{</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = size;</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;   <span class="keywordtype">void</span> *temp = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *transport = rtp-&gt;bundled ? rtp-&gt;bundled : instance;</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *transport_rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(transport);</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d11/structast__srtp.html">ast_srtp</a> *srtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a622089f7b296c002cc855d73172e9da4">ast_rtp_instance_get_srtp</a>(transport, rtcp);</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;   *via_ice = 0;</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;   <span class="keywordflow">if</span> (use_srtp &amp;&amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a0d5514f710438c5808ce30d0d35554c2">res_srtp</a> &amp;&amp; srtp &amp;&amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a0d5514f710438c5808ce30d0d35554c2">res_srtp</a>-&gt;<a class="code" href="../../d0/d5d/structast__srtp__res.html#a31a9304464b2898c3bd124947207f21c">protect</a>(srtp, &amp;temp, &amp;len, rtcp) &lt; 0) {</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;   }</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;   <span class="keywordflow">if</span> (transport_rtp-&gt;ice) {</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;      <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78">ast_rtp_ice_component_type</a> component = rtcp ? <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a> : <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a>;</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;      pj_status_t <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/db8/structice__wrap.html">ice_wrap</a> *ice;</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;      <span class="comment">/* If RTCP is sharing the same socket then use the same component */</span></div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;      <span class="keywordflow">if</span> (rtcp &amp;&amp; rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> == rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>) {</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;         component = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a>;</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;      }</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a>();</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;      <span class="comment">/* Release the instance lock to avoid deadlock with PJPROJECT group lock */</span></div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;      ice = transport_rtp-&gt;ice;</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ice, +1);</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;      <span class="keywordflow">if</span> (instance == transport) {</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;      }</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;      status = pj_ice_sess_send_data(ice-&gt;<a class="code" href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">real_ice</a>, component, temp, len);</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ice, -1);</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;      <span class="keywordflow">if</span> (instance == transport) {</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;      }</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;      <span class="keywordflow">if</span> (status == PJ_SUCCESS) {</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;         *via_ice = 1;</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;      }</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;   }</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;   res = <a class="code" href="../../db/df1/netsock2_8h.html#a71fb241d0d6b6ef1c73eaeb1d6d07ac6">ast_sendto</a>(rtcp ? transport_rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> : transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>, temp, len, flags, sa);</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;   <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a671d95f71246853f2b7672ac36222493">ast_rtp_instance_set_last_tx</a>(instance, time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;   }</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="netsock2_8h_html_a71fb241d0d6b6ef1c73eaeb1d6d07ac6"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a71fb241d0d6b6ef1c73eaeb1d6d07ac6">ast_sendto</a></div><div class="ttdeci">ssize_t ast_sendto(int sockfd, const void *buf, size_t len, int flags, const struct ast_sockaddr *dest_addr)</div><div class="ttdoc">Wrapper around sendto(2) that uses ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00614">netsock2.c:614</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00464">rtp_engine.h:464</a></div></div>
<div class="ttc" id="structast__srtp_html"><div class="ttname"><a href="../../d4/d11/structast__srtp.html">ast_srtp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd4/res__srtp_8c_source.html#l00065">res_srtp.c:65</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a622089f7b296c002cc855d73172e9da4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a622089f7b296c002cc855d73172e9da4">ast_rtp_instance_get_srtp</a></div><div class="ttdeci">struct ast_srtp * ast_rtp_instance_get_srtp(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdoc">Obtain the SRTP instance associated with an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02763">rtp_engine.c:2763</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a671d95f71246853f2b7672ac36222493"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a671d95f71246853f2b7672ac36222493">ast_rtp_instance_set_last_tx</a></div><div class="ttdeci">void ast_rtp_instance_set_last_tx(struct ast_rtp_instance *rtp, time_t time)</div><div class="ttdoc">Set the last RTP transmission time. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03763">rtp_engine.c:3763</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4884315209af5f6ecb90ba9ef0a70344"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a></div><div class="ttdeci">static void pj_thread_register_check(void)</div><div class="ttdoc">Function used to check if the calling thread is registered with pjlib. If it is not it will be regist...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">res_rtp_asterisk.c:865</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a0d5514f710438c5808ce30d0d35554c2"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a0d5514f710438c5808ce30d0d35554c2">res_srtp</a></div><div class="ttdeci">struct ast_srtp_res * res_srtp</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00177">rtp_engine.c:177</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78">ast_rtp_ice_component_type</a></div><div class="ttdeci">ast_rtp_ice_component_type</div><div class="ttdoc">ICE component types. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00462">rtp_engine.h:462</a></div></div>
<div class="ttc" id="structice__wrap_html"><div class="ttname"><a href="../../d9/db8/structice__wrap.html">ice_wrap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00320">res_rtp_asterisk.c:320</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00463">rtp_engine.h:463</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__srtp__res_html_a31a9304464b2898c3bd124947207f21c"><div class="ttname"><a href="../../d0/d5d/structast__srtp__res.html#a31a9304464b2898c3bd124947207f21c">ast_srtp_res::protect</a></div><div class="ttdeci">int(* protect)(struct ast_srtp *srtp, void **buf, int *size, int rtcp)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/res__srtp_8h_source.html#l00050">res_srtp.h:50</a></div></div>
<div class="ttc" id="structice__wrap_html_a947772eea928bd56792836dc5c55dac9"><div class="ttname"><a href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">ice_wrap::real_ice</a></div><div class="ttdeci">pj_ice_sess * real_ice</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">res_rtp_asterisk.c:321</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
<div class="ttc" id="structast__rtp_html_a339d22b3e442946380f98ed19e320db2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">ast_rtp::s</a></div><div class="ttdeci">int s</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">res_rtp_asterisk.c:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09742">9742</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="af4adfeec3f6af24e2ede7e730bee32eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4adfeec3f6af24e2ede7e730bee32eb">&#9670;&nbsp;</a></span>acl_change_stasis_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void acl_change_stasis_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09613">9613</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d59/acl_8h.html#a1d3de55deab4206400a7df534511fcf7">ast_named_acl_change_type()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03453">rtp_learning_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l09614"></a><span class="lineno"> 9614</span>&#160;{</div><div class="line"><a name="l09615"></a><span class="lineno"> 9615</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(message) != <a class="code" href="../../d5/d59/acl_8h.html#a1d3de55deab4206400a7df534511fcf7">ast_named_acl_change_type</a>()) {</div><div class="line"><a name="l09616"></a><span class="lineno"> 9616</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l09617"></a><span class="lineno"> 9617</span>&#160;   }</div><div class="line"><a name="l09618"></a><span class="lineno"> 9618</span>&#160;</div><div class="line"><a name="l09619"></a><span class="lineno"> 9619</span>&#160;   <span class="comment">/* There is no simple way to just reload the ACLs, so just execute a forced reload. */</span></div><div class="line"><a name="l09620"></a><span class="lineno"> 9620</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a0fd33c0dc833ac5b48e7990897319088">rtp_reload</a>(1, 1);</div><div class="line"><a name="l09621"></a><span class="lineno"> 9621</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a0fd33c0dc833ac5b48e7990897319088"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a0fd33c0dc833ac5b48e7990897319088">rtp_reload</a></div><div class="ttdeci">static int rtp_reload(int reload, int by_external_config)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">res_rtp_asterisk.c:9346</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="acl_8h_html_a1d3de55deab4206400a7df534511fcf7"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a1d3de55deab4206400a7df534511fcf7">ast_named_acl_change_type</a></div><div class="ttdeci">struct stasis_message_type * ast_named_acl_change_type(void)</div><div class="ttdoc">a stasis_message_type for changes against a named ACL or the set of all named ACLs ...</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab6ad0b308e683619205502e38e17d24b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6ad0b308e683619205502e38e17d24b">&#9670;&nbsp;</a></span>ast2pj_rtp_ice_role()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast2pj_rtp_ice_role </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fb">ast_rtp_ice_role</a>&#160;</td>
          <td class="paramname"><em>ast_role</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum pj_ice_sess_role *&#160;</td>
          <td class="paramname"><em>pj_role</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00927">927</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00469">AST_RTP_ICE_ROLE_CONTROLLED</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00470">AST_RTP_ICE_ROLE_CONTROLLING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00959">ice_reset_session()</a>.</p>
<div class="fragment"><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;{</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;   <span class="keywordflow">switch</span> (ast_role) {</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fba68f759b4c56106f7dbde793a886170d1">AST_RTP_ICE_ROLE_CONTROLLED</a>:</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      *pj_role = PJ_ICE_SESS_ROLE_CONTROLLED;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fba0a8d3389c5ab721fe23150a3d7f6da41">AST_RTP_ICE_ROLE_CONTROLLING</a>:</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      *pj_role = PJ_ICE_SESS_ROLE_CONTROLLING;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   }</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_a0758b5402aff85ff35e08f7d482308fba0a8d3389c5ab721fe23150a3d7f6da41"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fba0a8d3389c5ab721fe23150a3d7f6da41">AST_RTP_ICE_ROLE_CONTROLLING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00470">rtp_engine.h:470</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0758b5402aff85ff35e08f7d482308fba68f759b4c56106f7dbde793a886170d1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fba68f759b4c56106f7dbde793a886170d1">AST_RTP_ICE_ROLE_CONTROLLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00469">rtp_engine.h:469</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09742">9742</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="adabbce218f278a5ee9224a5c4dd94754"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adabbce218f278a5ee9224a5c4dd94754">&#9670;&nbsp;</a></span>ast_rtcp_calc_interval()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int ast_rtcp_calc_interval </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000088">Todo:</a></b></dt><dd>XXX Do a more reasonable calculation on this one Look in RFC 3550 Section A.7 for an example </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03323">3323</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00198">rtcpinterval</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">ast_rtp_interpret()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">rtp_raw_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;{</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> interval;<span class="comment"></span></div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;<span class="comment">   /*! \todo XXX Do a more reasonable calculation on this one</span></div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;<span class="comment">    * Look in RFC 3550 Section A.7 for an example*/</span></div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;   interval = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9426365d90a1b664b096a41d3a099a9f">rtcpinterval</a>;</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;   <span class="keywordflow">return</span> interval;</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a9426365d90a1b664b096a41d3a099a9f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a9426365d90a1b664b096a41d3a099a9f">rtcpinterval</a></div><div class="ttdeci">static int rtcpinterval</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00198">res_rtp_asterisk.c:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac39a35490fcf802b678e67b448eb381c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac39a35490fcf802b678e67b448eb381c">&#9670;&nbsp;</a></span>ast_rtcp_calculate_sr_rr_statistics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtcp_calculate_sr_rr_statistics </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *&#160;</td>
          <td class="paramname"><em>rtcp_report</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a>&#160;</td>
          <td class="paramname"><em>remote_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04579">4579</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l04030">ast_rtp_get_rate()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03485">ast_rtp_publish_rtcp_message()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gac1f320e2641058809ef5f0a0e830daf5">ast_rtp_rtcp_sent_type()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00325">ast_rtp_rtcp_report_block::dlsr</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">ast_rtp::f</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00319">ast_rtp_rtcp_report_block::fraction</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00322">ast_rtp_rtcp_report_block::highest_seq_no</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00323">ast_rtp_rtcp_report_block::ia_jitter</a>, <a class="el" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">ast_rtp_rtcp_report_block::lost_count</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00324">ast_rtp_rtcp_report_block::lsr</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00336">ast_rtp_rtcp_report::ntp_timestamp</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00339">ast_rtp_rtcp_report::octet_count</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00338">ast_rtp_rtcp_report::packet_count</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00320">ast_rtp_rtcp_report_block::packets</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00344">ast_rtp_rtcp_report::report_block</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02762">rtcp_debug_test_addr()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00337">ast_rtp_rtcp_report::rtp_timestamp</a>, <a class="el" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">ast_rtp_rtcp_report::sender_information</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00317">ast_rtp_rtcp_report_block::source_ssrc</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00333">ast_rtp_rtcp_report::ssrc</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04814">ast_rtcp_write()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05160">rtp_write_rtcp_fir()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05222">rtp_write_rtcp_psfb()</a>.</p>
<div class="fragment"><div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;{</div><div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html">ast_rtp_rtcp_report_block</a> *report_block = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, message_blob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;</div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;   <span class="keywordflow">if</span> (!rtp || !rtp-&gt;rtcp) {</div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;   }</div><div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;</div><div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;rtp-&gt;rtcp-&gt;them)) {</div><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;   }</div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;</div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;   <span class="keywordflow">if</span> (!rtcp_report) {</div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;   }</div><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;</div><div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;   report_block = rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[0];</div><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;</div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;   <span class="keywordflow">if</span> (sr) {</div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;      rtp-&gt;rtcp-&gt;txlsr = rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a69751ecaf659f4f16438fae21fd57d14">ntp_timestamp</a>;</div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;      rtp-&gt;rtcp-&gt;sr_count++;</div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;      rtp-&gt;rtcp-&gt;lastsrtxcount = rtp-&gt;txcount;</div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;      rtp-&gt;rtcp-&gt;rr_count++;</div><div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;   }</div><div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;</div><div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a804d7f1392ba5f1a19530c5243d93894">rtcp_debug_test_addr</a>(&amp;rtp-&gt;rtcp-&gt;them)) {</div><div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;* Sent RTCP %s to %s%s\n&quot;</span>, sr ? <span class="stringliteral">&quot;SR&quot;</span> : <span class="stringliteral">&quot;RR&quot;</span>,</div><div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address), ice ? <span class="stringliteral">&quot; (via ICE)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;  Our SSRC: %u\n&quot;</span>, rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>);</div><div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;      <span class="keywordflow">if</span> (sr) {</div><div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;  Sent(NTP): %u.%06u\n&quot;</span>,</div><div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;            (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a69751ecaf659f4f16438fae21fd57d14">ntp_timestamp</a>.tv_sec,</div><div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;            (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a69751ecaf659f4f16438fae21fd57d14">ntp_timestamp</a>.tv_usec);</div><div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;  Sent(RTP): %u\n&quot;</span>, rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a5afa69ff9e5e7692c4db609cb4884c53">rtp_timestamp</a>);</div><div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;  Sent packets: %u\n&quot;</span>, rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#af0a068e62b23d45baeffebf5250afd21">packet_count</a>);</div><div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;  Sent octets: %u\n&quot;</span>, rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a8ef9a039e87881c3b009cd250f583a96">octet_count</a>);</div><div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;      }</div><div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;      <span class="keywordflow">if</span> (report_block) {</div><div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;  Report block:\n&quot;</span>);</div><div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;    Their SSRC: %u\n&quot;</span>, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a6f505be1e80abef8c8dc43dd435dee82">source_ssrc</a>);</div><div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;    Fraction lost: %d\n&quot;</span>, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">lost_count</a>.<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a4783eb307c55bda4f55f933f8ebf9661">fraction</a>);</div><div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;    Cumulative loss: %u\n&quot;</span>, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">lost_count</a>.<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac0456a5c8a8a190b04a9eb241b9faf9a">packets</a>);</div><div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;    Highest seq no: %u\n&quot;</span>, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a0517365083db736945b1d8a8d5b14781">highest_seq_no</a>);</div><div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;    IA jitter: %.4f\n&quot;</span>, (<span class="keywordtype">double</span>)report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a799d79c026de98946ba12101f2b32919">ia_jitter</a> / <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;    Their last SR: %u\n&quot;</span>, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">lsr</a>);</div><div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;    DLSR: %4.4f (sec)\n\n&quot;</span>, (<span class="keywordtype">double</span>)(report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">dlsr</a> / 65536.0));</div><div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;      }</div><div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;   }</div><div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;</div><div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;   message_blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: s}&quot;</span>,</div><div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;         <span class="stringliteral">&quot;to&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address),</div><div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;         <span class="stringliteral">&quot;from&quot;</span>, rtp-&gt;rtcp-&gt;local_addr_str);</div><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a452d6ad1556ab4006b41ddec84ecac29">ast_rtp_publish_rtcp_message</a>(instance, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gac1f320e2641058809ef5f0a0e830daf5">ast_rtp_rtcp_sent_type</a>(),</div><div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;         rtcp_report, message_blob);</div><div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;</div><div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;}</div><div class="ttc" id="group__StasisTopicsAndMessages_html_gac1f320e2641058809ef5f0a0e830daf5"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gac1f320e2641058809ef5f0a0e830daf5">ast_rtp_rtcp_sent_type</a></div><div class="ttdeci">struct stasis_message_type * ast_rtp_rtcp_sent_type(void)</div><div class="ttdoc">Message type for an RTCP message sent from this Asterisk instance. </div></div>
<div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a0517365083db736945b1d8a8d5b14781"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a0517365083db736945b1d8a8d5b14781">ast_rtp_rtcp_report_block::highest_seq_no</a></div><div class="ttdeci">unsigned int highest_seq_no</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00322">rtp_engine.h:322</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a60ba31659303a153a619939ab7b3c74c"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">ast_rtp_rtcp_report::report_block</a></div><div class="ttdeci">struct ast_rtp_rtcp_report_block * report_block[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00344">rtp_engine.h:344</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html">ast_rtp_rtcp_report_block</a></div><div class="ttdoc">A report block within a SR/RR report. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00316">rtp_engine.h:316</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a5afa69ff9e5e7692c4db609cb4884c53"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a5afa69ff9e5e7692c4db609cb4884c53">ast_rtp_rtcp_report::rtp_timestamp</a></div><div class="ttdeci">unsigned int rtp_timestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00337">rtp_engine.h:337</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_aa2bc10b6d67275811e5dba476496577b"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">ast_rtp_rtcp_report::sender_information</a></div><div class="ttdeci">struct ast_rtp_rtcp_report::@315 sender_information</div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a4783eb307c55bda4f55f933f8ebf9661"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a4783eb307c55bda4f55f933f8ebf9661">ast_rtp_rtcp_report_block::fraction</a></div><div class="ttdeci">unsigned short fraction</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00319">rtp_engine.h:319</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a003eb2ccfb47fe93819bb8c54084708e"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">ast_rtp_rtcp_report_block::lsr</a></div><div class="ttdeci">unsigned int lsr</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00324">rtp_engine.h:324</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a452d6ad1556ab4006b41ddec84ecac29"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a452d6ad1556ab4006b41ddec84ecac29">ast_rtp_publish_rtcp_message</a></div><div class="ttdeci">void ast_rtp_publish_rtcp_message(struct ast_rtp_instance *rtp, struct stasis_message_type *message_type, struct ast_rtp_rtcp_report *report, struct ast_json *blob)</div><div class="ttdoc">Publish an RTCP message to Stasis Message Bus API. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03485">rtp_engine.c:3485</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga85ebb1735a6e9ce14a033b479076aaed"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a></div><div class="ttdeci">int ast_rtp_get_rate(const struct ast_format *format)</div><div class="ttdoc">Retrieve the sample rate of a format according to RTP specifications. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l04030">rtp_engine.c:4030</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a804d7f1392ba5f1a19530c5243d93894"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a804d7f1392ba5f1a19530c5243d93894">rtcp_debug_test_addr</a></div><div class="ttdeci">static int rtcp_debug_test_addr(struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02762">res_rtp_asterisk.c:2762</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a2641bab7842e6a448b53f26689bef1d2"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">ast_rtp_rtcp_report_block::dlsr</a></div><div class="ttdeci">unsigned int dlsr</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00325">rtp_engine.h:325</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_af0a068e62b23d45baeffebf5250afd21"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#af0a068e62b23d45baeffebf5250afd21">ast_rtp_rtcp_report::packet_count</a></div><div class="ttdeci">unsigned int packet_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00338">rtp_engine.h:338</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp_rtcp_report::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00333">rtp_engine.h:333</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a799d79c026de98946ba12101f2b32919"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a799d79c026de98946ba12101f2b32919">ast_rtp_rtcp_report_block::ia_jitter</a></div><div class="ttdeci">unsigned int ia_jitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00323">rtp_engine.h:323</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__rtp_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">ast_rtp::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">res_rtp_asterisk.c:370</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_ac0456a5c8a8a190b04a9eb241b9faf9a"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#ac0456a5c8a8a190b04a9eb241b9faf9a">ast_rtp_rtcp_report_block::packets</a></div><div class="ttdeci">unsigned int packets</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00320">rtp_engine.h:320</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a8ef9a039e87881c3b009cd250f583a96"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a8ef9a039e87881c3b009cd250f583a96">ast_rtp_rtcp_report::octet_count</a></div><div class="ttdeci">unsigned int octet_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00339">rtp_engine.h:339</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a69751ecaf659f4f16438fae21fd57d14"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a69751ecaf659f4f16438fae21fd57d14">ast_rtp_rtcp_report::ntp_timestamp</a></div><div class="ttdeci">struct timeval ntp_timestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00336">rtp_engine.h:336</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a6f505be1e80abef8c8dc43dd435dee82"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a6f505be1e80abef8c8dc43dd435dee82">ast_rtp_rtcp_report_block::source_ssrc</a></div><div class="ttdeci">unsigned int source_ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00317">rtp_engine.h:317</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_ac073ee3bf2fb7ca014e53683edba72ff"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">ast_rtp_rtcp_report_block::lost_count</a></div><div class="ttdeci">struct ast_rtp_rtcp_report_block::@314 lost_count</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a3e89b50705b66f142eaaff7d3fe52d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a3e89b50705b66f142eaaff7d3fe52d">&#9670;&nbsp;</a></span>ast_rtcp_generate_compound_prefix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtcp_generate_compound_prefix </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>rtcpheader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *&#160;</td>
          <td class="paramname"><em>report</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04699">4699</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02873">ast_debug_rtcp</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04491">ast_rtcp_generate_report()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04641">ast_rtcp_generate_sdes()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04814">ast_rtcp_write()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05160">rtp_write_rtcp_fir()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05222">rtp_write_rtcp_psfb()</a>.</p>
<div class="fragment"><div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;{</div><div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;   <span class="keywordtype">int</span> packet_len = 0;</div><div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;</div><div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;   <span class="comment">/* Every RTCP packet needs to be sent out with a SR/RR and SDES prefixing it.</span></div><div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;<span class="comment">    * At the end of this function, rtcpheader should contain both of those packets,</span></div><div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;<span class="comment">    * and will return the length of the overall packet. This can be used to determine</span></div><div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;<span class="comment">    * where further packets can be inserted in the compound packet.</span></div><div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;   res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a543e648d458505ac92e62d425eb968cc">ast_rtcp_generate_report</a>(instance, rtcpheader, report, sr);</div><div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;</div><div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;   <span class="keywordflow">if</span> (res == 0 || res == 1) {</div><div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP failed to generate %s report!\n&quot;</span>, instance, sr ? <span class="stringliteral">&quot;SR&quot;</span> : <span class="stringliteral">&quot;RR&quot;</span>);</div><div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;   }</div><div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;</div><div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;   packet_len += res;</div><div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;</div><div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;   res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae3dd03863da0f7558b1e61a99e2cc026">ast_rtcp_generate_sdes</a>(instance, rtcpheader + packet_len, report);</div><div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;</div><div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;   <span class="keywordflow">if</span> (res == 0 || res == 1) {</div><div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP failed to generate SDES!\n&quot;</span>, instance);</div><div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;   }</div><div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;</div><div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;   <span class="keywordflow">return</span> packet_len + res;</div><div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;}</div><div class="ttc" id="group__StasisTopicsAndMessages_html_ga0915be7e2d33217121465cfb689318fd"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a></div><div class="ttdeci">#define ast_debug_rtcp(sublevel,...)</div><div class="ttdoc">Log debug level RTCP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02873">rtp_engine.h:2873</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a543e648d458505ac92e62d425eb968cc"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a543e648d458505ac92e62d425eb968cc">ast_rtcp_generate_report</a></div><div class="ttdeci">static int ast_rtcp_generate_report(struct ast_rtp_instance *instance, unsigned char *rtcpheader, struct ast_rtp_rtcp_report *rtcp_report, int *sr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04491">res_rtp_asterisk.c:4491</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ae3dd03863da0f7558b1e61a99e2cc026"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae3dd03863da0f7558b1e61a99e2cc026">ast_rtcp_generate_sdes</a></div><div class="ttdeci">static int ast_rtcp_generate_sdes(struct ast_rtp_instance *instance, unsigned char *rtcpheader, struct ast_rtp_rtcp_report *rtcp_report)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04641">res_rtp_asterisk.c:4641</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a412fb88c15a637214233ca3cce6d9ad9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a412fb88c15a637214233ca3cce6d9ad9">&#9670;&nbsp;</a></span>ast_rtcp_generate_nack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtcp_generate_nack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>rtcpheader</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04729">4729</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00303">AST_RTP_RTCP_FMT_NACK</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00297">AST_RTP_RTCP_RTPFB</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00733">AST_VECTOR_GET_CMP</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00384">ast_rtp::expectedrxseqno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03045">find_by_value()</a>, <a class="el" href="../../d2/d1e/unaligned_8h_source.html#l00058">put_unaligned_uint32()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00116">SEQNO_CYCLE_OVER</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">ast_rtp::themssrc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;{</div><div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;   <span class="keywordtype">int</span> packet_len;</div><div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;   <span class="keywordtype">int</span> blp_index = -1;</div><div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;   <span class="keywordtype">int</span> current_seqno;</div><div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> fci = 0;</div><div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;   <span class="keywordtype">size_t</span> remaining_missing_seqno;</div><div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;</div><div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;   <span class="keywordflow">if</span> (!rtp || !rtp-&gt;rtcp) {</div><div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;   }</div><div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;</div><div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;rtp-&gt;rtcp-&gt;them)) {</div><div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;   }</div><div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;</div><div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;   current_seqno = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a>;</div><div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;   remaining_missing_seqno = <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;rtp-&gt;missing_seqno);</div><div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;   packet_len = 12; <span class="comment">/* The header length is 12 (version line, packet source SSRC, media source SSRC) */</span></div><div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;</div><div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;   <span class="comment">/* If there are no missing sequence numbers then don&#39;t bother sending a NACK needlessly */</span></div><div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;   <span class="keywordflow">if</span> (!remaining_missing_seqno) {</div><div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;   }</div><div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;</div><div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;   <span class="comment">/* This iterates through the possible forward sequence numbers seeing which ones we</span></div><div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;<span class="comment">    * have no packet for, adding it to the NACK until we are out of missing packets.</span></div><div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;   <span class="keywordflow">while</span> (remaining_missing_seqno) {</div><div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;      <span class="keywordtype">int</span> *missing_seqno;</div><div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;</div><div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;      <span class="comment">/* On the first entry to this loop blp_index will be -1, so this will become 0</span></div><div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;<span class="comment">       * and the sequence number will be placed into the packet as the PID.</span></div><div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;      blp_index++;</div><div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;</div><div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;      missing_seqno = <a class="code" href="../../d6/d68/vector_8h.html#a7851644ae05acad1ab8b970ccfb172ba">AST_VECTOR_GET_CMP</a>(&amp;rtp-&gt;missing_seqno, current_seqno,</div><div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9c0765c9365f9caf28b8f072aac73409">find_by_value</a>);</div><div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;      <span class="keywordflow">if</span> (missing_seqno) {</div><div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;         <span class="comment">/* We hit the max blp size, reset */</span></div><div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;         <span class="keywordflow">if</span> (blp_index &gt;= 17) {</div><div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;            <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + packet_len, htonl(fci));</div><div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;            fci = 0;</div><div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;            blp_index = 0;</div><div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;            packet_len += 4;</div><div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;         }</div><div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;</div><div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;         <span class="keywordflow">if</span> (blp_index == 0) {</div><div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;            fci |= (current_seqno &lt;&lt; 16);</div><div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;            fci |= (1 &lt;&lt; (blp_index - 1));</div><div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;         }</div><div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;</div><div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;         <span class="comment">/* Since we&#39;ve used a missing sequence number, we&#39;re down one */</span></div><div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;         remaining_missing_seqno--;</div><div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;      }</div><div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;</div><div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;      <span class="comment">/* Handle cycling of the sequence number */</span></div><div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;      current_seqno++;</div><div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;      <span class="keywordflow">if</span> (current_seqno == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae55dc6ec08efa57214027cb16f7e83c1">SEQNO_CYCLE_OVER</a>) {</div><div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;         current_seqno = 0;</div><div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;      }</div><div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;   }</div><div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;</div><div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + packet_len, htonl(fci));</div><div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;   packet_len += 4;</div><div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;</div><div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;   <span class="comment">/* Length MUST be 2+n, where n is the number of NACKs. Same as length in words minus 1 */</span></div><div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader, htonl((2 &lt;&lt; 30) | (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a665ba1f8447831ebe494fbf0915edb6a">AST_RTP_RTCP_FMT_NACK</a> &lt;&lt; 24)</div><div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;            | (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a4a9c0900c44c60bd881c22ff57169a1a">AST_RTP_RTCP_RTPFB</a> &lt;&lt; 16) | ((packet_len / 4) - 1)));</div><div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + 4, htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>));</div><div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + 8, htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">themssrc</a>));</div><div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;</div><div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;   <span class="keywordflow">return</span> packet_len;</div><div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ae55dc6ec08efa57214027cb16f7e83c1"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae55dc6ec08efa57214027cb16f7e83c1">SEQNO_CYCLE_OVER</a></div><div class="ttdeci">#define SEQNO_CYCLE_OVER</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00116">res_rtp_asterisk.c:116</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a665ba1f8447831ebe494fbf0915edb6a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a665ba1f8447831ebe494fbf0915edb6a">AST_RTP_RTCP_FMT_NACK</a></div><div class="ttdeci">#define AST_RTP_RTCP_FMT_NACK</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00303">rtp_engine.h:303</a></div></div>
<div class="ttc" id="unaligned_8h_html_ae0b7823a3fab76dbec84f308adeb7f5a"><div class="ttname"><a href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a></div><div class="ttdeci">static void put_unaligned_uint32(void *p, unsigned int datum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1e/unaligned_8h_source.html#l00058">unaligned.h:58</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4a9c0900c44c60bd881c22ff57169a1a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4a9c0900c44c60bd881c22ff57169a1a">AST_RTP_RTCP_RTPFB</a></div><div class="ttdeci">#define AST_RTP_RTCP_RTPFB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00297">rtp_engine.h:297</a></div></div>
<div class="ttc" id="structast__rtp_html_afe92c8ff0d37afbf84f8715f4144ca27"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">ast_rtp::themssrc</a></div><div class="ttdeci">unsigned int themssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">res_rtp_asterisk.c:376</a></div></div>
<div class="ttc" id="structast__rtp_html_a79c13061e144053a6c288592cc1c159e"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">ast_rtp::expectedrxseqno</a></div><div class="ttdeci">int expectedrxseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00384">res_rtp_asterisk.c:384</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="vector_8h_html_a7851644ae05acad1ab8b970ccfb172ba"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a7851644ae05acad1ab8b970ccfb172ba">AST_VECTOR_GET_CMP</a></div><div class="ttdeci">#define AST_VECTOR_GET_CMP(vec, value, cmp)</div><div class="ttdoc">Get an element from a vector that matches the given comparison. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00733">vector.h:733</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a9c0765c9365f9caf28b8f072aac73409"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a9c0765c9365f9caf28b8f072aac73409">find_by_value</a></div><div class="ttdeci">static int find_by_value(int elem, int value)</div><div class="ttdoc">Helper function to find an elem in a vector by value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03045">res_rtp_asterisk.c:3045</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a543e648d458505ac92e62d425eb968cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a543e648d458505ac92e62d425eb968cc">&#9670;&nbsp;</a></span>ast_rtcp_generate_report()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtcp_generate_report </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>rtcpheader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *&#160;</td>
          <td class="paramname"><em>rtcp_report</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04491">4491</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l04030">ast_rtp_get_rate()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04428">calculate_lost_packet_statistics()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00325">ast_rtp_rtcp_report_block::dlsr</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">ast_rtp::f</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00319">ast_rtp_rtcp_report_block::fraction</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00322">ast_rtp_rtcp_report_block::highest_seq_no</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00323">ast_rtp_rtcp_report_block::ia_jitter</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00383">ast_rtp::lastrxseqno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00378">ast_rtp::lastts</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">ast_rtp_rtcp_report_block::lost_count</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00324">ast_rtp_rtcp_report_block::lsr</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00336">ast_rtp_rtcp_report::ntp_timestamp</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00339">ast_rtp_rtcp_report::octet_count</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00338">ast_rtp_rtcp_report::packet_count</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00320">ast_rtp_rtcp_report_block::packets</a>, <a class="el" href="../../d2/d1e/unaligned_8h_source.html#l00058">put_unaligned_uint32()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00332">ast_rtp_rtcp_report::reception_report_count</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00344">ast_rtp_rtcp_report::report_block</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00123">RTCP_PT_RR</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00121">RTCP_PT_SR</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00337">ast_rtp_rtcp_report::rtp_timestamp</a>, <a class="el" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">ast_rtp_rtcp_report::sender_information</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00317">ast_rtp_rtcp_report_block::source_ssrc</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00333">ast_rtp_rtcp_report::ssrc</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">ast_rtp::themssrc</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">ast_rtp::themssrc_valid</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a6f849d6106aa17d132b53372602324b9">timersub()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04392">timeval2ntp()</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00334">ast_rtp_rtcp_report::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04699">ast_rtcp_generate_compound_prefix()</a>.</p>
<div class="fragment"><div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;{</div><div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = 0;</div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;   <span class="keyword">struct </span>timeval now;</div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> now_lsw;</div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> now_msw;</div><div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lost_packets;</div><div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;   <span class="keywordtype">int</span> fraction_lost;</div><div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;   <span class="keyword">struct </span>timeval dlsr = { 0, };</div><div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html">ast_rtp_rtcp_report_block</a> *report_block = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;</div><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;   <span class="keywordflow">if</span> (!rtp || !rtp-&gt;rtcp) {</div><div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;   }</div><div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;</div><div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;rtp-&gt;rtcp-&gt;them)) { <span class="comment">/* This&#39;ll stop rtcp for this rtp session */</span></div><div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;      <span class="comment">/* RTCP was stopped. */</span></div><div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;   }</div><div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;</div><div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;   <span class="keywordflow">if</span> (!rtcp_report) {</div><div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;   }</div><div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;</div><div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;   *sr = rtp-&gt;txcount &gt; rtp-&gt;rtcp-&gt;lastsrtxcount ? 1 : 0;</div><div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;</div><div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;   <span class="comment">/* Compute statistics */</span></div><div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a5b8b24cbfebc4c43f748c47fe467320d">calculate_lost_packet_statistics</a>(rtp, &amp;lost_packets, &amp;fraction_lost);</div><div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;</div><div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;   gettimeofday(&amp;now, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;   rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a59687b6ec866bfca8d8c1d6ab1bef7ad">reception_report_count</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">themssrc_valid</a> ? 1 : 0;</div><div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;   rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>;</div><div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;   rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a4bfea42429249a1f65204f0c0f34704a">type</a> = *sr ? <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abe50a9d9c36c702889863e206f4502c6">RTCP_PT_SR</a> : <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d8564f9c96df1cd1076ad4f6faed7ab">RTCP_PT_RR</a>;</div><div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;   <span class="keywordflow">if</span> (*sr) {</div><div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;      rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a69751ecaf659f4f16438fae21fd57d14">ntp_timestamp</a> = now;</div><div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;      rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a5afa69ff9e5e7692c4db609cb4884c53">rtp_timestamp</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a>;</div><div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;      rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#af0a068e62b23d45baeffebf5250afd21">packet_count</a> = rtp-&gt;txcount;</div><div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;      rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a8ef9a039e87881c3b009cd250f583a96">octet_count</a> = rtp-&gt;txoctetcount;</div><div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;   }</div><div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;</div><div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">themssrc_valid</a>) {</div><div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;      report_block = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*report_block));</div><div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;      <span class="keywordflow">if</span> (!report_block) {</div><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;      }</div><div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;</div><div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;      rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[0] = report_block;</div><div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;      report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a6f505be1e80abef8c8dc43dd435dee82">source_ssrc</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">themssrc</a>;</div><div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;      report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">lost_count</a>.<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a4783eb307c55bda4f55f933f8ebf9661">fraction</a> = (fraction_lost &amp; 0xff);</div><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;      report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">lost_count</a>.<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac0456a5c8a8a190b04a9eb241b9faf9a">packets</a> = (lost_packets &amp; 0xffffff);</div><div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;      report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a0517365083db736945b1d8a8d5b14781">highest_seq_no</a> = (rtp-&gt;cycles | (rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a184e1597cfcf7b28d1cf5d4857892a91">lastrxseqno</a> &amp; 0xffff));</div><div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;      report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a799d79c026de98946ba12101f2b32919">ia_jitter</a> = (<span class="keywordtype">unsigned</span> int)(rtp-&gt;rxjitter * <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;      report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">lsr</a> = rtp-&gt;rtcp-&gt;themrxlsr;</div><div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;      <span class="comment">/* If we haven&#39;t received an SR report, DLSR should be 0 */</span></div><div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(rtp-&gt;rtcp-&gt;rxlsr)) {</div><div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;         <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a6f849d6106aa17d132b53372602324b9">timersub</a>(&amp;now, &amp;rtp-&gt;rtcp-&gt;rxlsr, &amp;dlsr);</div><div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;         report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">dlsr</a> = (((dlsr.tv_sec * 1000) + (dlsr.tv_usec / 1000)) * 65536) / 1000;</div><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;      }</div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;   }</div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae07b5d23a23d4d09988c4a1c5d477d14">timeval2ntp</a>(rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a69751ecaf659f4f16438fae21fd57d14">ntp_timestamp</a>, &amp;now_msw, &amp;now_lsw);</div><div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + 4, htonl(rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>)); <span class="comment">/* Our SSRC */</span></div><div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;   len += 8;</div><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;   <span class="keywordflow">if</span> (*sr) {</div><div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + len, htonl(now_msw)); <span class="comment">/* now, MSW. gettimeofday() + SEC_BETWEEN_1900_AND_1970 */</span></div><div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + len + 4, htonl(now_lsw)); <span class="comment">/* now, LSW */</span></div><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + len + 8, htonl(rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a5afa69ff9e5e7692c4db609cb4884c53">rtp_timestamp</a>));</div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + len + 12, htonl(rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#af0a068e62b23d45baeffebf5250afd21">packet_count</a>));</div><div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + len + 16, htonl(rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a8ef9a039e87881c3b009cd250f583a96">octet_count</a>));</div><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;      len += 20;</div><div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;   }</div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;   <span class="keywordflow">if</span> (report_block) {</div><div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + len, htonl(report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a6f505be1e80abef8c8dc43dd435dee82">source_ssrc</a>)); <span class="comment">/* Their SSRC */</span></div><div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + len + 4, htonl((report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">lost_count</a>.<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a4783eb307c55bda4f55f933f8ebf9661">fraction</a> &lt;&lt; 24) | report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">lost_count</a>.<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac0456a5c8a8a190b04a9eb241b9faf9a">packets</a>));</div><div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + len + 8, htonl(report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a0517365083db736945b1d8a8d5b14781">highest_seq_no</a>));</div><div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + len + 12, htonl(report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a799d79c026de98946ba12101f2b32919">ia_jitter</a>));</div><div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + len + 16, htonl(report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">lsr</a>));</div><div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + len + 20, htonl(report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">dlsr</a>));</div><div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;      len += 24;</div><div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;   }</div><div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;</div><div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader, htonl((2 &lt;&lt; 30) | (rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a59687b6ec866bfca8d8c1d6ab1bef7ad">reception_report_count</a> &lt;&lt; 24)</div><div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;            | ((*sr ? <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abe50a9d9c36c702889863e206f4502c6">RTCP_PT_SR</a> : <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d8564f9c96df1cd1076ad4f6faed7ab">RTCP_PT_RR</a>) &lt;&lt; 16) | ((len/4)-1)));</div><div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;</div><div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_abe50a9d9c36c702889863e206f4502c6"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#abe50a9d9c36c702889863e206f4502c6">RTCP_PT_SR</a></div><div class="ttdeci">#define RTCP_PT_SR</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00121">res_rtp_asterisk.c:121</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a0517365083db736945b1d8a8d5b14781"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a0517365083db736945b1d8a8d5b14781">ast_rtp_rtcp_report_block::highest_seq_no</a></div><div class="ttdeci">unsigned int highest_seq_no</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00322">rtp_engine.h:322</a></div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a59687b6ec866bfca8d8c1d6ab1bef7ad"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a59687b6ec866bfca8d8c1d6ab1bef7ad">ast_rtp_rtcp_report::reception_report_count</a></div><div class="ttdeci">unsigned short reception_report_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00332">rtp_engine.h:332</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a60ba31659303a153a619939ab7b3c74c"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">ast_rtp_rtcp_report::report_block</a></div><div class="ttdeci">struct ast_rtp_rtcp_report_block * report_block[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00344">rtp_engine.h:344</a></div></div>
<div class="ttc" id="unaligned_8h_html_ae0b7823a3fab76dbec84f308adeb7f5a"><div class="ttname"><a href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a></div><div class="ttdeci">static void put_unaligned_uint32(void *p, unsigned int datum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1e/unaligned_8h_source.html#l00058">unaligned.h:58</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ae07b5d23a23d4d09988c4a1c5d477d14"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae07b5d23a23d4d09988c4a1c5d477d14">timeval2ntp</a></div><div class="ttdeci">static void timeval2ntp(struct timeval tv, unsigned int *msw, unsigned int *lsw)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04392">res_rtp_asterisk.c:4392</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html">ast_rtp_rtcp_report_block</a></div><div class="ttdoc">A report block within a SR/RR report. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00316">rtp_engine.h:316</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a5afa69ff9e5e7692c4db609cb4884c53"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a5afa69ff9e5e7692c4db609cb4884c53">ast_rtp_rtcp_report::rtp_timestamp</a></div><div class="ttdeci">unsigned int rtp_timestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00337">rtp_engine.h:337</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_aa2bc10b6d67275811e5dba476496577b"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">ast_rtp_rtcp_report::sender_information</a></div><div class="ttdeci">struct ast_rtp_rtcp_report::@315 sender_information</div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a6f849d6106aa17d132b53372602324b9"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a6f849d6106aa17d132b53372602324b9">timersub</a></div><div class="ttdeci">void timersub(struct timeval *tvend, struct timeval *tvstart, struct timeval *tvdiff)</div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a4783eb307c55bda4f55f933f8ebf9661"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a4783eb307c55bda4f55f933f8ebf9661">ast_rtp_rtcp_report_block::fraction</a></div><div class="ttdeci">unsigned short fraction</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00319">rtp_engine.h:319</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a003eb2ccfb47fe93819bb8c54084708e"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">ast_rtp_rtcp_report_block::lsr</a></div><div class="ttdeci">unsigned int lsr</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00324">rtp_engine.h:324</a></div></div>
<div class="ttc" id="structast__rtp_html_a7aaf7fb2b26e335304c8a89cc36aac00"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">ast_rtp::themssrc_valid</a></div><div class="ttdeci">unsigned int themssrc_valid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">res_rtp_asterisk.c:377</a></div></div>
<div class="ttc" id="structast__rtp_html_a184e1597cfcf7b28d1cf5d4857892a91"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a184e1597cfcf7b28d1cf5d4857892a91">ast_rtp::lastrxseqno</a></div><div class="ttdeci">int lastrxseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00383">res_rtp_asterisk.c:383</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga85ebb1735a6e9ce14a033b479076aaed"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a></div><div class="ttdeci">int ast_rtp_get_rate(const struct ast_format *format)</div><div class="ttdoc">Retrieve the sample rate of a format according to RTP specifications. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l04030">rtp_engine.c:4030</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4d8564f9c96df1cd1076ad4f6faed7ab"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4d8564f9c96df1cd1076ad4f6faed7ab">RTCP_PT_RR</a></div><div class="ttdeci">#define RTCP_PT_RR</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00123">res_rtp_asterisk.c:123</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a5b8b24cbfebc4c43f748c47fe467320d"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a5b8b24cbfebc4c43f748c47fe467320d">calculate_lost_packet_statistics</a></div><div class="ttdeci">static void calculate_lost_packet_statistics(struct ast_rtp *rtp, unsigned int *lost_packets, int *fraction_lost)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04428">res_rtp_asterisk.c:4428</a></div></div>
<div class="ttc" id="structast__rtp_html_afe92c8ff0d37afbf84f8715f4144ca27"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">ast_rtp::themssrc</a></div><div class="ttdeci">unsigned int themssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">res_rtp_asterisk.c:376</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a2641bab7842e6a448b53f26689bef1d2"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">ast_rtp_rtcp_report_block::dlsr</a></div><div class="ttdeci">unsigned int dlsr</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00325">rtp_engine.h:325</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_af0a068e62b23d45baeffebf5250afd21"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#af0a068e62b23d45baeffebf5250afd21">ast_rtp_rtcp_report::packet_count</a></div><div class="ttdeci">unsigned int packet_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00338">rtp_engine.h:338</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp_rtcp_report::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00333">rtp_engine.h:333</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a799d79c026de98946ba12101f2b32919"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a799d79c026de98946ba12101f2b32919">ast_rtp_rtcp_report_block::ia_jitter</a></div><div class="ttdeci">unsigned int ia_jitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00323">rtp_engine.h:323</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__rtp_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">ast_rtp::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">res_rtp_asterisk.c:370</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a4bfea42429249a1f65204f0c0f34704a"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a4bfea42429249a1f65204f0c0f34704a">ast_rtp_rtcp_report::type</a></div><div class="ttdeci">unsigned int type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00334">rtp_engine.h:334</a></div></div>
<div class="ttc" id="structast__rtp_html_a2eb3b9494c999b0dd38c4d40bfdc55b4"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">ast_rtp::lastts</a></div><div class="ttdeci">unsigned int lastts</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00378">res_rtp_asterisk.c:378</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_ac0456a5c8a8a190b04a9eb241b9faf9a"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#ac0456a5c8a8a190b04a9eb241b9faf9a">ast_rtp_rtcp_report_block::packets</a></div><div class="ttdeci">unsigned int packets</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00320">rtp_engine.h:320</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a8ef9a039e87881c3b009cd250f583a96"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a8ef9a039e87881c3b009cd250f583a96">ast_rtp_rtcp_report::octet_count</a></div><div class="ttdeci">unsigned int octet_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00339">rtp_engine.h:339</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a69751ecaf659f4f16438fae21fd57d14"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a69751ecaf659f4f16438fae21fd57d14">ast_rtp_rtcp_report::ntp_timestamp</a></div><div class="ttdeci">struct timeval ntp_timestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00336">rtp_engine.h:336</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a6f505be1e80abef8c8dc43dd435dee82"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a6f505be1e80abef8c8dc43dd435dee82">ast_rtp_rtcp_report_block::source_ssrc</a></div><div class="ttdeci">unsigned int source_ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00317">rtp_engine.h:317</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_ac073ee3bf2fb7ca014e53683edba72ff"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">ast_rtp_rtcp_report_block::lost_count</a></div><div class="ttdeci">struct ast_rtp_rtcp_report_block::@314 lost_count</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae3dd03863da0f7558b1e61a99e2cc026"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3dd03863da0f7558b1e61a99e2cc026">&#9670;&nbsp;</a></span>ast_rtcp_generate_sdes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtcp_generate_sdes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>rtcpheader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *&#160;</td>
          <td class="paramname"><em>rtcp_report</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04641">4641</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../dd/d1d/uuid_8h_source.html#l00027">AST_UUID_STR_LEN</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00375">ast_rtp::cname</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d2/d1e/unaligned_8h_source.html#l00058">put_unaligned_uint32()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00125">RTCP_PT_SDES</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00333">ast_rtp_rtcp_report::ssrc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04699">ast_rtcp_generate_compound_prefix()</a>.</p>
<div class="fragment"><div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;{</div><div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = 0;</div><div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;   uint16_t sdes_packet_len_bytes;</div><div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;   uint16_t sdes_packet_len_rounded;</div><div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;</div><div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;   <span class="keywordflow">if</span> (!rtp || !rtp-&gt;rtcp) {</div><div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;   }</div><div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;</div><div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;rtp-&gt;rtcp-&gt;them)) {</div><div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;   }</div><div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;</div><div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;   <span class="keywordflow">if</span> (!rtcp_report) {</div><div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;   }</div><div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;</div><div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;   sdes_packet_len_bytes =</div><div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;      4 + <span class="comment">/* RTCP Header */</span></div><div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;      4 + <span class="comment">/* SSRC */</span></div><div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;      1 + <span class="comment">/* Type (CNAME) */</span></div><div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;      1 + <span class="comment">/* Text Length */</span></div><div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;      <a class="code" href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a> <span class="comment">/* Text and NULL terminator */</span></div><div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;      ;</div><div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;</div><div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;   <span class="comment">/* Round to 32 bit boundary */</span></div><div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;   sdes_packet_len_rounded = (sdes_packet_len_bytes + 3) &amp; ~0x3;</div><div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;</div><div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader, htonl((2 &lt;&lt; 30) | (1 &lt;&lt; 24) | (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa6a84235b636497872f31a832a8b17af">RTCP_PT_SDES</a> &lt;&lt; 16) | ((sdes_packet_len_rounded / 4) - 1)));</div><div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + 4, htonl(rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>));</div><div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;   rtcpheader[8] = 0x01; <span class="comment">/* CNAME */</span></div><div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;   rtcpheader[9] = <a class="code" href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a> - 1; <span class="comment">/* Number of bytes of text */</span></div><div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;   memcpy(rtcpheader + 10, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a86a6d9392942a9a6df3adaccb271af60">cname</a>, <a class="code" href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a>);</div><div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;   len += 10 + <a class="code" href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a>;</div><div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;</div><div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;   <span class="comment">/* Padding - Note that we don&#39;t set the padded bit on the packet. From</span></div><div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;<span class="comment">    * RFC 3550 Section 6.5:</span></div><div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;<span class="comment">    *   No length octet follows the null item type octet, but additional null</span></div><div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;<span class="comment">    *   octets MUST be included if needd to pad until the next 32-bit</span></div><div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;<span class="comment">    *   boundary. Note that this padding is separate from that indicated by</span></div><div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;<span class="comment">    *   the P bit in the RTCP header.</span></div><div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;<span class="comment">    * These bytes will already be zeroed out during array initialization.</span></div><div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;   len += (sdes_packet_len_rounded - sdes_packet_len_bytes);</div><div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;</div><div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="uuid_8h_html_a127408e53d34dca0c589a099fabf1e13"><div class="ttname"><a href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a></div><div class="ttdeci">#define AST_UUID_STR_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d1d/uuid_8h_source.html#l00027">uuid.h:27</a></div></div>
<div class="ttc" id="unaligned_8h_html_ae0b7823a3fab76dbec84f308adeb7f5a"><div class="ttname"><a href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a></div><div class="ttdeci">static void put_unaligned_uint32(void *p, unsigned int datum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1e/unaligned_8h_source.html#l00058">unaligned.h:58</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structast__rtp_html_a86a6d9392942a9a6df3adaccb271af60"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a86a6d9392942a9a6df3adaccb271af60">ast_rtp::cname</a></div><div class="ttdeci">char cname[AST_UUID_STR_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00375">res_rtp_asterisk.c:375</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp_rtcp_report::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00333">rtp_engine.h:333</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa6a84235b636497872f31a832a8b17af"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa6a84235b636497872f31a832a8b17af">RTCP_PT_SDES</a></div><div class="ttdeci">#define RTCP_PT_SDES</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00125">res_rtp_asterisk.c:125</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acef3a2fc706fb66b5cf99569281b4948"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acef3a2fc706fb66b5cf99569281b4948">&#9670;&nbsp;</a></span>ast_rtcp_interpret()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* ast_rtcp_interpret </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d11/structast__srtp.html">ast_srtp</a> *&#160;</td>
          <td class="paramname"><em>srtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>rtcpdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>True if we have seen an acceptable SSRC to learn the remote RTCP address</p>
<p>True if the ssrc value we have is valid and not garbage because it doesn't exist.</p>
<p>Always use packet source SSRC to find the rtp instance unless explicitly told not to. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">6100</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00295">AST_CONTROL_VIDUPDATE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02873">ast_debug_rtcp</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02864">ast_debug_rtp_packet_is_allowed</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00135">AST_FRAME_RTCP</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">AST_FRIENDLY_OFFSET</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00716">ast_rtp_instance_get_prop()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02901">ast_rtp_instance_get_test()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00115">AST_RTP_PROPERTY_NAT</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00131">AST_RTP_PROPERTY_REMB</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03485">ast_rtp_publish_rtcp_message()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00307">AST_RTP_RTCP_FMT_FIR</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00303">AST_RTP_RTCP_FMT_NACK</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00305">AST_RTP_RTCP_FMT_PLI</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00309">AST_RTP_RTCP_FMT_REMB</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05963">ast_rtp_rtcp_handle_nack()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68594e604220e38eb6593972ef9a4da3">ast_rtp_rtcp_received_type()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03474">ast_rtp_rtcp_report_alloc()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00297">AST_RTP_RTCP_RTPFB</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00388">ast_sockaddr_cmp()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00351">ast_rtp_rtcp_feedback_remb::br_exp</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00352">ast_rtp_rtcp_feedback_remb::br_mantissa</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00185">ast_frame::delivery</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00325">ast_rtp_rtcp_report_block::dlsr</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">ast_rtp::f</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00359">ast_rtp_rtcp_feedback::fmt</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00319">ast_rtp_rtcp_report_block::fraction</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00322">ast_rtp_rtcp_report_block::highest_seq_no</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00323">ast_rtp_rtcp_report_block::ia_jitter</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">ast_rtp_rtcp_report_block::lost_count</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00324">ast_rtp_rtcp_report_block::lsr</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">ast_frame::mallocd</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04421">ntp2timeval()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">ast_frame::offset</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00320">ast_rtp_rtcp_report_block::packets</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00361">ast_rtp_rtcp_feedback::remb</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00344">ast_rtp_rtcp_report::report_block</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02762">rtcp_debug_test_addr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06098">RTCP_FB_NACK_BLOCK_WORD_LENGTH</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06097">RTCP_FB_REMB_BLOCK_WORD_LENGTH</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06096">RTCP_HEADER_SSRC_LENGTH</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06061">RTCP_LENGTH_MASK</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06070">RTCP_LENGTH_SHIFT</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05942">rtcp_payload_subtype2str()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05910">rtcp_payload_type2str()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06062">RTCP_PAYLOAD_TYPE_MASK</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06071">RTCP_PAYLOAD_TYPE_SHIFT</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00127">RTCP_PT_BYE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00119">RTCP_PT_FUR</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00132">RTCP_PT_PSFB</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00123">RTCP_PT_RR</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00125">RTCP_PT_SDES</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00121">RTCP_PT_SR</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06063">RTCP_REPORT_COUNT_MASK</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06072">RTCP_REPORT_COUNT_SHIFT</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06095">RTCP_RR_BLOCK_WORD_LENGTH</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06094">RTCP_SR_BLOCK_WORD_LENGTH</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06091">RTCP_VALID_MASK</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06092">RTCP_VALID_VALUE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06078">RTCP_VERSION_MASK_SHIFTED</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06077">RTCP_VERSION_SHIFTED</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05904">rtp_find_instance_by_media_source_ssrc()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05897">rtp_find_instance_by_packet_source_ssrc()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00601">ast_rtp_engine_test::sdes_received</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00317">ast_rtp_rtcp_report_block::source_ssrc</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">ast_frame::src</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00209">srtp_replay_protection</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">ast_frame::stream_num</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00164">STRICT_RTP_OPEN</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">ast_rtp::themssrc</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">ast_rtp::themssrc_valid</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04392">timeval2ntp()</a>, <a class="el" href="../../de/d15/res__srtp_8h_source.html#l00048">ast_srtp_res::unprotect</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05824">update_jitter_stats()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05848">update_lost_stats()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05768">update_rtt_stats()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06590">ast_rtcp_read()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;{</div><div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *transport = instance;</div><div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *transport_rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = size;</div><div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *rtcpheader = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)(rtcpdata);</div><div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> packetwords;</div><div class="line"><a name="l06108"></a><span class="lineno"> 6108</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> position;</div><div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> first_word;<span class="comment"></span></div><div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160;<span class="comment">   /*! True if we have seen an acceptable SSRC to learn the remote RTCP address */</span></div><div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ssrc_seen;</div><div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html">ast_rtp_rtcp_report_block</a> *report_block;</div><div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a> *test_engine;</div><div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;</div><div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;   <span class="comment">/* If this is encrypted then decrypt the payload */</span></div><div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;   <span class="keywordflow">if</span> ((*rtcpheader &amp; 0xC0) &amp;&amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a0d5514f710438c5808ce30d0d35554c2">res_srtp</a> &amp;&amp; srtp &amp;&amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a0d5514f710438c5808ce30d0d35554c2">res_srtp</a>-&gt;<a class="code" href="../../d0/d5d/structast__srtp__res.html#a262f1edfb2ae69fc526cb4a6aea3a103">unprotect</a>(</div><div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;          srtp, rtcpheader, &amp;len, 1 | (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a62f7bf8eadfec58f81f33a8c90458f15">srtp_replay_protection</a> &lt;&lt; 1)) &lt; 0) {</div><div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;   }</div><div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;</div><div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;   packetwords = len / 4;</div><div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160;</div><div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP got report of %d bytes from %s\n&quot;</span>,</div><div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;      instance, len, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(addr));</div><div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;</div><div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160;<span class="comment">    * Validate the RTCP packet according to an adapted and slightly</span></div><div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;<span class="comment">    * modified RFC3550 validation algorithm.</span></div><div class="line"><a name="l06132"></a><span class="lineno"> 6132</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;   <span class="keywordflow">if</span> (packetwords &lt; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a5bd8d430ff046850f29c8b141d5a61e6">RTCP_HEADER_SSRC_LENGTH</a>) {</div><div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP %p -- from %s: Frame size (%u words) is too short\n&quot;</span>,</div><div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160;         instance, transport_rtp, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(addr), packetwords);</div><div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;   }</div><div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;   position = 0;</div><div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;   first_word = ntohl(rtcpheader[position]);</div><div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;   <span class="keywordflow">if</span> ((first_word &amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a6086e203d0d3d4888e999fa6e9b486b6">RTCP_VALID_MASK</a>) != <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a178f67ed7bee20c65399faeb0b65fd3a">RTCP_VALID_VALUE</a>) {</div><div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP %p -- from %s: Failed first packet validity check\n&quot;</span>,</div><div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;         instance, transport_rtp, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(addr));</div><div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;   }</div><div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160;   <span class="keywordflow">do</span> {</div><div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;      position += ((first_word &gt;&gt; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a0c4d8290d22254494ae62e8b6974ec35">RTCP_LENGTH_SHIFT</a>) &amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af9492fccb2be755522d50f4d514006cb">RTCP_LENGTH_MASK</a>) + 1;</div><div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;      <span class="keywordflow">if</span> (packetwords &lt;= position) {</div><div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;      }</div><div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160;      first_word = ntohl(rtcpheader[position]);</div><div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;   } <span class="keywordflow">while</span> ((first_word &amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac45a536a85bcf54c7d1aafac6bb40e30">RTCP_VERSION_MASK_SHIFTED</a>) == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9411e6f925f7e291f033d6b1b6584703">RTCP_VERSION_SHIFTED</a>);</div><div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;   <span class="keywordflow">if</span> (position != packetwords) {</div><div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP %p -- from %s: Failed packet version or length check\n&quot;</span>,</div><div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;         instance, transport_rtp, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(addr));</div><div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160;   }</div><div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;</div><div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;<span class="comment">    * Note: RFC3605 points out that true NAT (vs NAPT) can cause RTCP</span></div><div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;<span class="comment">    * to have a different IP address and port than RTP.  Otherwise, when</span></div><div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160;<span class="comment">    * strictrtp is enabled we could reject RTCP packets not coming from</span></div><div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;<span class="comment">    * the learned RTP IP address if it is available.</span></div><div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;</div><div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;<span class="comment">    * strictrtp safety needs SSRC to match before we use the</span></div><div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160;<span class="comment">    * sender&#39;s address for symmetrical RTP to send our RTCP</span></div><div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;<span class="comment">    * reports.</span></div><div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160;<span class="comment">    * If strictrtp is not enabled then claim to have already seen</span></div><div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160;<span class="comment">    * a matching SSRC so we&#39;ll accept this packet&#39;s address for</span></div><div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;<span class="comment">    * symmetrical RTP.</span></div><div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160;   ssrc_seen = transport_rtp-&gt;strict_rtp_state == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1">STRICT_RTP_OPEN</a>;</div><div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160;</div><div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;   position = 0;</div><div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;   <span class="keywordflow">while</span> (position &lt; packetwords) {</div><div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div><div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pt;</div><div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rc;</div><div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ssrc;<span class="comment"></span></div><div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;<span class="comment">      /*! True if the ssrc value we have is valid and not garbage because it doesn&#39;t exist. */</span></div><div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ssrc_valid;</div><div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> length;</div><div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> min_length;<span class="comment"></span></div><div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;<span class="comment">      /*! Always use packet source SSRC to find the rtp instance unless explicitly told not to. */</span></div><div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> use_packet_source = 1;</div><div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;</div><div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *message_blob;</div><div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *, rtcp_report, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *child;</div><div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp;</div><div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d7/dd3/structast__rtp__rtcp__feedback.html">ast_rtp_rtcp_feedback</a> *feedback;</div><div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;</div><div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;      i = position;</div><div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;      first_word = ntohl(rtcpheader[i]);</div><div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;      pt = (first_word &gt;&gt; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a102b1c7dd32df715a82ef484f51bdb9b">RTCP_PAYLOAD_TYPE_SHIFT</a>) &amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aae21bfbb41fc9426a8b032904a36dca6">RTCP_PAYLOAD_TYPE_MASK</a>;</div><div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;      rc = (first_word &gt;&gt; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a358dac6e270355f7ca564ffcef4fa370">RTCP_REPORT_COUNT_SHIFT</a>) &amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9c460b328c3e2d05ed29f3e492b42ed9">RTCP_REPORT_COUNT_MASK</a>;</div><div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;      <span class="comment">/* RFC3550 says &#39;length&#39; is the number of words in the packet - 1 */</span></div><div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;      length = ((first_word &gt;&gt; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a0c4d8290d22254494ae62e8b6974ec35">RTCP_LENGTH_SHIFT</a>) &amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af9492fccb2be755522d50f4d514006cb">RTCP_LENGTH_MASK</a>) + 1;</div><div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;</div><div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;      <span class="comment">/* Check expected RTCP packet record length */</span></div><div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;      min_length = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a5bd8d430ff046850f29c8b141d5a61e6">RTCP_HEADER_SSRC_LENGTH</a>;</div><div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;      <span class="keywordflow">switch</span> (pt) {</div><div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abe50a9d9c36c702889863e206f4502c6">RTCP_PT_SR</a>:</div><div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;         min_length += <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2f9861ee11cba20a1a0d3eea4840cbc0">RTCP_SR_BLOCK_WORD_LENGTH</a>;</div><div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160;         <span class="comment">/* fall through */</span></div><div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d8564f9c96df1cd1076ad4f6faed7ab">RTCP_PT_RR</a>:</div><div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;         min_length += (rc * <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2295ead5af93e27d5a32ecee7e4cb40a">RTCP_RR_BLOCK_WORD_LENGTH</a>);</div><div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;         use_packet_source = 0;</div><div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a38fce7504b6d0ac96b1f07fa86598ce8">RTCP_PT_FUR</a>:</div><div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4a9c0900c44c60bd881c22ff57169a1a">AST_RTP_RTCP_RTPFB</a>:</div><div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160;         <span class="keywordflow">switch</span> (rc) {</div><div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a665ba1f8447831ebe494fbf0915edb6a">AST_RTP_RTCP_FMT_NACK</a>:</div><div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;            min_length += <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a1816e1926678b2ba35fde74295580c69">RTCP_FB_NACK_BLOCK_WORD_LENGTH</a>;</div><div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;         }</div><div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;         use_packet_source = 0;</div><div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a711189b19386915beec87d8edddb3464">RTCP_PT_PSFB</a>:</div><div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160;         <span class="keywordflow">switch</span> (rc) {</div><div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a92dbab4f62cc24fc05ac849a2b2b0e5c">AST_RTP_RTCP_FMT_REMB</a>:</div><div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;            min_length += <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a6dbf005049ce30693e57c45fdd45250c">RTCP_FB_REMB_BLOCK_WORD_LENGTH</a>;</div><div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160;         }</div><div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa6a84235b636497872f31a832a8b17af">RTCP_PT_SDES</a>:</div><div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a5723708baf43b6326706331795fcd52f">RTCP_PT_BYE</a>:</div><div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;<span class="comment">          * There may not be a SSRC/CSRC present.  The packet is</span></div><div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;<span class="comment">          * useless but still valid if it isn&#39;t present.</span></div><div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;<span class="comment">          *</span></div><div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;<span class="comment">          * We don&#39;t know what min_length should be so disable the check</span></div><div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;         min_length = length;</div><div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP %p -- from %s: %u(%s) skipping record\n&quot;</span>,</div><div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;            instance, transport_rtp, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(addr), pt, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a280f0e254e281a27c39489fc2603329c">rtcp_payload_type2str</a>(pt));</div><div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a804d7f1392ba5f1a19530c5243d93894">rtcp_debug_test_addr</a>(addr)) {</div><div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;            <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160;            <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;RTCP from %s: %u(%s) skipping record\n&quot;</span>,</div><div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;               <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(addr), pt, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a280f0e254e281a27c39489fc2603329c">rtcp_payload_type2str</a>(pt));</div><div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160;         }</div><div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;         position += length;</div><div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;      }</div><div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160;      <span class="keywordflow">if</span> (length &lt; min_length) {</div><div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP %p -- from %s: %u(%s) length field less than expected minimum.  Min:%u Got:%u\n&quot;</span>,</div><div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;            instance, transport_rtp, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(addr), pt, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a280f0e254e281a27c39489fc2603329c">rtcp_payload_type2str</a>(pt),</div><div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;            min_length - 1, length - 1);</div><div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160;         <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160;      }</div><div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;</div><div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;      <span class="comment">/* Get the RTCP record SSRC if defined for the record */</span></div><div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;      ssrc_valid = 1;</div><div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;      <span class="keywordflow">switch</span> (pt) {</div><div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abe50a9d9c36c702889863e206f4502c6">RTCP_PT_SR</a>:</div><div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d8564f9c96df1cd1076ad4f6faed7ab">RTCP_PT_RR</a>:</div><div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160;         rtcp_report = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a199d704f3867124fe0f56f4c8856a0b4">ast_rtp_rtcp_report_alloc</a>(rc);</div><div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160;         <span class="keywordflow">if</span> (!rtcp_report) {</div><div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160;            <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160;         }</div><div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160;         rtcp_report-&gt;reception_report_count = rc;</div><div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;</div><div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;         ssrc = ntohl(rtcpheader[i + 2]);</div><div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160;         rtcp_report-&gt;ssrc = ssrc;</div><div class="line"><a name="l06274"></a><span class="lineno"> 6274</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a38fce7504b6d0ac96b1f07fa86598ce8">RTCP_PT_FUR</a>:</div><div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a711189b19386915beec87d8edddb3464">RTCP_PT_PSFB</a>:</div><div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;         ssrc = ntohl(rtcpheader[i + 1]);</div><div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4a9c0900c44c60bd881c22ff57169a1a">AST_RTP_RTCP_RTPFB</a>:</div><div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;         ssrc = ntohl(rtcpheader[i + 2]);</div><div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa6a84235b636497872f31a832a8b17af">RTCP_PT_SDES</a>:</div><div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a5723708baf43b6326706331795fcd52f">RTCP_PT_BYE</a>:</div><div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;         ssrc = 0;</div><div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160;         ssrc_valid = 0;</div><div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;      }</div><div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160;</div><div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a804d7f1392ba5f1a19530c5243d93894">rtcp_debug_test_addr</a>(addr)) {</div><div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *subtype = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#afcddb5ff85cb2691779171663a3a8229">rtcp_payload_subtype2str</a>(pt, rc);</div><div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160;</div><div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l06294"></a><span class="lineno"> 6294</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;RTCP from %s\n&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(addr));</div><div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;PT: %u (%s)\n&quot;</span>, pt, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a280f0e254e281a27c39489fc2603329c">rtcp_payload_type2str</a>(pt));</div><div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;         <span class="keywordflow">if</span> (subtype) {</div><div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160;            <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Packet Subtype: %u (%s)\n&quot;</span>, rc, subtype);</div><div class="line"><a name="l06298"></a><span class="lineno"> 6298</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06299"></a><span class="lineno"> 6299</span>&#160;            <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Reception reports: %u\n&quot;</span>, rc);</div><div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160;         }</div><div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;SSRC of sender: %u\n&quot;</span>, ssrc);</div><div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;      }</div><div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;</div><div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;      <span class="comment">/* Determine the appropriate instance for this */</span></div><div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;      <span class="keywordflow">if</span> (ssrc_valid) {</div><div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;<span class="comment">          * Depending on the payload type, either the packet source or media source</span></div><div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;<span class="comment">          * SSRC is used.</span></div><div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;         <span class="keywordflow">if</span> (use_packet_source) {</div><div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160;            child = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a5402d4a2ce7addf589cc3efdb25b27be">rtp_find_instance_by_packet_source_ssrc</a>(transport, transport_rtp, ssrc);</div><div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160;            child = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab9d6ff10648a47e0e609f57ac749d6dc">rtp_find_instance_by_media_source_ssrc</a>(transport, transport_rtp, ssrc);</div><div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;         }</div><div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160;         <span class="keywordflow">if</span> (child &amp;&amp; child != transport) {</div><div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l06317"></a><span class="lineno"> 6317</span>&#160;<span class="comment">             * It is safe to hold the child lock while holding the parent lock.</span></div><div class="line"><a name="l06318"></a><span class="lineno"> 6318</span>&#160;<span class="comment">             * We guarantee that the locking order is always parent-&gt;child or</span></div><div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160;<span class="comment">             * that the child lock is not held when acquiring the parent lock.</span></div><div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(child);</div><div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;            instance = child;</div><div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;            rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160;            <span class="comment">/* The child is the parent! We don&#39;t need to unlock it. */</span></div><div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;            child = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;            rtp = transport_rtp;</div><div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160;         }</div><div class="line"><a name="l06329"></a><span class="lineno"> 6329</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160;         child = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;         rtp = transport_rtp;</div><div class="line"><a name="l06332"></a><span class="lineno"> 6332</span>&#160;      }</div><div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160;</div><div class="line"><a name="l06334"></a><span class="lineno"> 6334</span>&#160;      <span class="keywordflow">if</span> (ssrc_valid &amp;&amp; rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">themssrc_valid</a>) {</div><div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;<span class="comment">          * If the SSRC is 1, we still need to handle RTCP since this could be a</span></div><div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;<span class="comment">          * special case. For example, if we have a unidirectional video stream, the</span></div><div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160;<span class="comment">          * SSRC may be set to 1 by the browser (in the case of chromium), and requests</span></div><div class="line"><a name="l06339"></a><span class="lineno"> 6339</span>&#160;<span class="comment">          * will still need to be processed so that video can flow as expected. This</span></div><div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160;<span class="comment">          * should only be done for PLI and FUR, since there is not a way to get the</span></div><div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160;<span class="comment">          * appropriate rtp instance when the SSRC is 1.</span></div><div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l06343"></a><span class="lineno"> 6343</span>&#160;         <span class="keywordtype">int</span> exception = (ssrc == 1 &amp;&amp; !((pt == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a711189b19386915beec87d8edddb3464">RTCP_PT_PSFB</a> &amp;&amp; rc == <a class="code" href="../../d5/dde/rtp__engine_8h.html#af7564e625ce8bfbda577fb9dd9dddd3d">AST_RTP_RTCP_FMT_PLI</a>) || pt == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a38fce7504b6d0ac96b1f07fa86598ce8">RTCP_PT_FUR</a>));</div><div class="line"><a name="l06344"></a><span class="lineno"> 6344</span>&#160;         <span class="keywordflow">if</span> ((ssrc != rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">themssrc</a> &amp;&amp; use_packet_source &amp;&amp; ssrc != 1)</div><div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160;               || exception) {</div><div class="line"><a name="l06346"></a><span class="lineno"> 6346</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160;<span class="comment">             * Skip over this RTCP record as it does not contain the</span></div><div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160;<span class="comment">             * correct SSRC.  We should not act upon RTCP records</span></div><div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160;<span class="comment">             * for a different stream.</span></div><div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160;            position += length;</div><div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP %p -- from %s: Skipping record, received SSRC &#39;%u&#39; != expected &#39;%u&#39;\n&quot;</span>,</div><div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160;               instance, rtp, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(addr), ssrc, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">themssrc</a>);</div><div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160;            <span class="keywordflow">if</span> (child) {</div><div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160;               <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(child);</div><div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;            }</div><div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160;         }</div><div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160;         ssrc_seen = 1;</div><div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;      }</div><div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160;</div><div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160;      <span class="keywordflow">if</span> (ssrc_seen &amp;&amp; <a class="code" href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a>)) {</div><div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160;         <span class="comment">/* Send to whoever sent to us */</span></div><div class="line"><a name="l06364"></a><span class="lineno"> 6364</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(&amp;rtp-&gt;rtcp-&gt;them, addr)) {</div><div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;rtp-&gt;rtcp-&gt;them, addr);</div><div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a>) {</div><div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(0, <span class="stringliteral">&quot;(%p) RTCP NAT: Got RTCP from other end. Now sending to address %s\n&quot;</span>,</div><div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160;                  instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(addr));</div><div class="line"><a name="l06369"></a><span class="lineno"> 6369</span>&#160;            }</div><div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;         }</div><div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;      }</div><div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;</div><div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160;      i += <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a5bd8d430ff046850f29c8b141d5a61e6">RTCP_HEADER_SSRC_LENGTH</a>; <span class="comment">/* Advance past header and ssrc */</span></div><div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;      <span class="keywordflow">switch</span> (pt) {</div><div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abe50a9d9c36c702889863e206f4502c6">RTCP_PT_SR</a>:</div><div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160;         gettimeofday(&amp;rtp-&gt;rtcp-&gt;rxlsr, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;         rtp-&gt;rtcp-&gt;themrxlsr = ((ntohl(rtcpheader[i]) &amp; 0x0000ffff) &lt;&lt; 16) | ((ntohl(rtcpheader[i + 1]) &amp; 0xffff0000) &gt;&gt; 16);</div><div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;         rtp-&gt;rtcp-&gt;spc = ntohl(rtcpheader[i + 3]);</div><div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160;         rtp-&gt;rtcp-&gt;soc = ntohl(rtcpheader[i + 4]);</div><div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;</div><div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160;         rtcp_report-&gt;type = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abe50a9d9c36c702889863e206f4502c6">RTCP_PT_SR</a>;</div><div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;         rtcp_report-&gt;sender_information.packet_count = rtp-&gt;rtcp-&gt;spc;</div><div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;         rtcp_report-&gt;sender_information.octet_count = rtp-&gt;rtcp-&gt;soc;</div><div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a1635c093c05170fc6fea298ff747093f">ntp2timeval</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)ntohl(rtcpheader[i]),</div><div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160;               (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)ntohl(rtcpheader[i + 1]),</div><div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;               &amp;rtcp_report-&gt;sender_information.ntp_timestamp);</div><div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;         rtcp_report-&gt;sender_information.rtp_timestamp = ntohl(rtcpheader[i + 2]);</div><div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a804d7f1392ba5f1a19530c5243d93894">rtcp_debug_test_addr</a>(addr)) {</div><div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;            <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;NTP timestamp: %u.%06u\n&quot;</span>,</div><div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160;                  (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)rtcp_report-&gt;sender_information.ntp_timestamp.tv_sec,</div><div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;                  (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)rtcp_report-&gt;sender_information.ntp_timestamp.tv_usec);</div><div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;            <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;RTP timestamp: %u\n&quot;</span>, rtcp_report-&gt;sender_information.rtp_timestamp);</div><div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;            <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;SPC: %u\tSOC: %u\n&quot;</span>,</div><div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;                  rtcp_report-&gt;sender_information.packet_count,</div><div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;                  rtcp_report-&gt;sender_information.octet_count);</div><div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;         }</div><div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;         i += <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2f9861ee11cba20a1a0d3eea4840cbc0">RTCP_SR_BLOCK_WORD_LENGTH</a>;</div><div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;         <span class="comment">/* Intentional fall through */</span></div><div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d8564f9c96df1cd1076ad4f6faed7ab">RTCP_PT_RR</a>:</div><div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;         <span class="keywordflow">if</span> (rtcp_report-&gt;type != <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abe50a9d9c36c702889863e206f4502c6">RTCP_PT_SR</a>) {</div><div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160;            rtcp_report-&gt;type = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d8564f9c96df1cd1076ad4f6faed7ab">RTCP_PT_RR</a>;</div><div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;         }</div><div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;</div><div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;         <span class="keywordflow">if</span> (rc &gt; 0) {</div><div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;            <span class="comment">/* Don&#39;t handle multiple reception reports (rc &gt; 1) yet */</span></div><div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;            report_block = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*report_block));</div><div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;            <span class="keywordflow">if</span> (!report_block) {</div><div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;               <span class="keywordflow">if</span> (child) {</div><div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;                  <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(child);</div><div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;               }</div><div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;               <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;            }</div><div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;            rtcp_report-&gt;report_block[0] = report_block;</div><div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;            report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a6f505be1e80abef8c8dc43dd435dee82">source_ssrc</a> = ntohl(rtcpheader[i]);</div><div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;            report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">lost_count</a>.<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac0456a5c8a8a190b04a9eb241b9faf9a">packets</a> = ntohl(rtcpheader[i + 1]) &amp; 0x00ffffff;</div><div class="line"><a name="l06416"></a><span class="lineno"> 6416</span>&#160;            report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">lost_count</a>.<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a4783eb307c55bda4f55f933f8ebf9661">fraction</a> = ((ntohl(rtcpheader[i + 1]) &amp; 0xff000000) &gt;&gt; 24);</div><div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;            report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a0517365083db736945b1d8a8d5b14781">highest_seq_no</a> = ntohl(rtcpheader[i + 2]);</div><div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;            report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a799d79c026de98946ba12101f2b32919">ia_jitter</a> =  ntohl(rtcpheader[i + 3]);</div><div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;            report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">lsr</a> = ntohl(rtcpheader[i + 4]);</div><div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;            report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">dlsr</a> = ntohl(rtcpheader[i + 5]);</div><div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;            <span class="keywordflow">if</span> (report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">lsr</a></div><div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;               &amp;&amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a8413c5149cc0d207ff76cdac0df1d9d8">update_rtt_stats</a>(rtp, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">lsr</a>, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">dlsr</a>)</div><div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;               &amp;&amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a804d7f1392ba5f1a19530c5243d93894">rtcp_debug_test_addr</a>(addr)) {</div><div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;               <span class="keyword">struct </span>timeval now;</div><div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160;               <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lsr_now, lsw, msw;</div><div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;               gettimeofday(&amp;now, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160;               <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae07b5d23a23d4d09988c4a1c5d477d14">timeval2ntp</a>(now, &amp;msw, &amp;lsw);</div><div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;               lsr_now = (((msw &amp; 0xffff) &lt;&lt; 16) | ((lsw &amp; 0xffff0000) &gt;&gt; 16));</div><div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;               <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Internal RTCP NTP clock skew detected: &quot;</span></div><div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;                        <span class="stringliteral">&quot;lsr=%u, now=%u, dlsr=%u (%u:%03ums), &quot;</span></div><div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160;                     <span class="stringliteral">&quot;diff=%u\n&quot;</span>,</div><div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160;                     report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">lsr</a>, lsr_now, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">dlsr</a>, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">dlsr</a> / 65536,</div><div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;                     (report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">dlsr</a> % 65536) * 1000 / 65536,</div><div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;                     report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">dlsr</a> - (lsr_now - report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">lsr</a>));</div><div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160;            }</div><div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a6daf71d49a86747ab43985cc2f51cc98">update_jitter_stats</a>(rtp, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a799d79c026de98946ba12101f2b32919">ia_jitter</a>);</div><div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aed901569931a704735fdc55dc50f442b">update_lost_stats</a>(rtp, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">lost_count</a>.<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac0456a5c8a8a190b04a9eb241b9faf9a">packets</a>);</div><div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;</div><div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a804d7f1392ba5f1a19530c5243d93894">rtcp_debug_test_addr</a>(addr)) {</div><div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;               <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;  Fraction lost: %d\n&quot;</span>, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">lost_count</a>.<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a4783eb307c55bda4f55f933f8ebf9661">fraction</a>);</div><div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;               <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;  Packets lost so far: %u\n&quot;</span>, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">lost_count</a>.<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac0456a5c8a8a190b04a9eb241b9faf9a">packets</a>);</div><div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;               <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;  Highest sequence number: %u\n&quot;</span>, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a0517365083db736945b1d8a8d5b14781">highest_seq_no</a> &amp; 0x0000ffff);</div><div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160;               <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;  Sequence number cycles: %u\n&quot;</span>, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a0517365083db736945b1d8a8d5b14781">highest_seq_no</a> &gt;&gt; 16);</div><div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;               <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;  Interarrival jitter: %u\n&quot;</span>, report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a799d79c026de98946ba12101f2b32919">ia_jitter</a>);</div><div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;               <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;  Last SR(our NTP): %lu.%010lu\n&quot;</span>,(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)(report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">lsr</a>) &gt;&gt; 16,((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)(report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">lsr</a>) &lt;&lt; 16) * 4096);</div><div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;               <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;  DLSR: %4.4f (sec)\n&quot;</span>,(<span class="keywordtype">double</span>)report_block-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">dlsr</a> / 65536.0);</div><div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160;               <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;  RTT: %4.4f(sec)\n&quot;</span>, rtp-&gt;rtcp-&gt;rtt);</div><div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;            }</div><div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;         }</div><div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;         <span class="comment">/* If and when we handle more than one report block, this should occur outside</span></div><div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;<span class="comment">          * this loop.</span></div><div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160;</div><div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;         message_blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: s, s: f}&quot;</span>,</div><div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;            <span class="stringliteral">&quot;from&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(addr),</div><div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160;            <span class="stringliteral">&quot;to&quot;</span>, transport_rtp-&gt;rtcp-&gt;local_addr_str,</div><div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;            <span class="stringliteral">&quot;rtt&quot;</span>, rtp-&gt;rtcp-&gt;rtt);</div><div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a452d6ad1556ab4006b41ddec84ecac29">ast_rtp_publish_rtcp_message</a>(instance, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68594e604220e38eb6593972ef9a4da3">ast_rtp_rtcp_received_type</a>(),</div><div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160;               rtcp_report,</div><div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;               message_blob);</div><div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(message_blob);</div><div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;</div><div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;         <span class="comment">/* Return an AST_FRAME_RTCP frame with the ast_rtp_rtcp_report</span></div><div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;<span class="comment">          * object as a its data */</span></div><div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;         transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a>;</div><div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160;         transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = pt;</div><div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160;         transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = rtp-&gt;rtcp-&gt;frame_buf + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;         memcpy(transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, rtcp_report, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a>));</div><div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;         transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a>);</div><div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;         <span class="keywordflow">if</span> (rc &gt; 0) {</div><div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;            <span class="comment">/* There&#39;s always a single report block stored, here */</span></div><div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *rtcp_report2;</div><div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;            report_block = transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> + transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> + <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html">ast_rtp_rtcp_report_block</a> *);</div><div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;            memcpy(report_block, rtcp_report-&gt;report_block[0], <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html">ast_rtp_rtcp_report_block</a>));</div><div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160;            rtcp_report2 = (<span class="keyword">struct </span><a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *)transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160;            rtcp_report2-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[0] = report_block;</div><div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> += <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html">ast_rtp_rtcp_report_block</a>);</div><div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;         }</div><div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;         transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160;         transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = 0;</div><div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;         transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">mallocd</a> = 0;</div><div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160;         transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>.tv_sec = 0;</div><div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;         transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>.tv_usec = 0;</div><div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;         transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a> = <span class="stringliteral">&quot;RTP&quot;</span>;</div><div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;         transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> = rtp-&gt;stream_num;</div><div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;         f = &amp;transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>;</div><div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4a9c0900c44c60bd881c22ff57169a1a">AST_RTP_RTCP_RTPFB</a>:</div><div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;         <span class="keywordflow">switch</span> (rc) {</div><div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a665ba1f8447831ebe494fbf0915edb6a">AST_RTP_RTCP_FMT_NACK</a>:</div><div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160;            <span class="comment">/* If retransmissions are not enabled ignore this message */</span></div><div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;            <span class="keywordflow">if</span> (!rtp-&gt;send_buffer) {</div><div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;            }</div><div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160;</div><div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a804d7f1392ba5f1a19530c5243d93894">rtcp_debug_test_addr</a>(addr)) {</div><div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;               <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Received generic RTCP NACK message\n&quot;</span>);</div><div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;            }</div><div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160;</div><div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a0fb21b1e16b180484b413cbfd591fa7f">ast_rtp_rtcp_handle_nack</a>(instance, rtcpheader, position, length);</div><div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;         }</div><div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a38fce7504b6d0ac96b1f07fa86598ce8">RTCP_PT_FUR</a>:</div><div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160;         <span class="comment">/* Handle RTCP FUR as FIR by setting the format to 4 */</span></div><div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;         rc = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a07d58eb9568f3068d78674e7fb02d420">AST_RTP_RTCP_FMT_FIR</a>;</div><div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a711189b19386915beec87d8edddb3464">RTCP_PT_PSFB</a>:</div><div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;         <span class="keywordflow">switch</span> (rc) {</div><div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#af7564e625ce8bfbda577fb9dd9dddd3d">AST_RTP_RTCP_FMT_PLI</a>:</div><div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a07d58eb9568f3068d78674e7fb02d420">AST_RTP_RTCP_FMT_FIR</a>:</div><div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a804d7f1392ba5f1a19530c5243d93894">rtcp_debug_test_addr</a>(addr)) {</div><div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;               <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Received an RTCP Fast Update Request\n&quot;</span>);</div><div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160;            }</div><div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>;</div><div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a>;</div><div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = 0;</div><div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = 0;</div><div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">mallocd</a> = 0;</div><div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a> = <span class="stringliteral">&quot;RTP&quot;</span>;</div><div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;            f = &amp;transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>;</div><div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a92dbab4f62cc24fc05ac849a2b2b0e5c">AST_RTP_RTCP_FMT_REMB</a>:</div><div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;            <span class="comment">/* If REMB support is not enabled ignore this message */</span></div><div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914caf7d73e777eb2a69c79032cce56a3ca3b">AST_RTP_PROPERTY_REMB</a>)) {</div><div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;            }</div><div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;</div><div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a804d7f1392ba5f1a19530c5243d93894">rtcp_debug_test_addr</a>(addr)) {</div><div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;               <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Received REMB report\n&quot;</span>);</div><div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;            }</div><div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a>;</div><div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = pt;</div><div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> = rtp-&gt;stream_num;</div><div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = rtp-&gt;rtcp-&gt;frame_buf + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;            feedback = transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;            feedback-&gt;<a class="code" href="../../d7/dd3/structast__rtp__rtcp__feedback.html#aa9cb6ed3e21d64ad26c61da877136ae0">fmt</a> = rc;</div><div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160;</div><div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;            <span class="comment">/* We don&#39;t actually care about the SSRC information in the feedback message */</span></div><div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;            first_word = ntohl(rtcpheader[i + 2]);</div><div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;            feedback-&gt;<a class="code" href="../../d7/dd3/structast__rtp__rtcp__feedback.html#af419ddac99d63d4e2117252750b4755b">remb</a>.<a class="code" href="../../d4/d88/structast__rtp__rtcp__feedback__remb.html#a8cea965b4bae760eebe286e96fc208e7">br_exp</a> = (first_word &gt;&gt; 18) &amp; ((1 &lt;&lt; 6) - 1);</div><div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;            feedback-&gt;<a class="code" href="../../d7/dd3/structast__rtp__rtcp__feedback.html#af419ddac99d63d4e2117252750b4755b">remb</a>.<a class="code" href="../../d4/d88/structast__rtp__rtcp__feedback__remb.html#aaa1e9a8fad3f268711f2bf99c85f1367">br_mantissa</a> = first_word &amp; ((1 &lt;&lt; 18) - 1);</div><div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160;</div><div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../d7/dd3/structast__rtp__rtcp__feedback.html">ast_rtp_rtcp_feedback</a>);</div><div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = 0;</div><div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">mallocd</a> = 0;</div><div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>.tv_sec = 0;</div><div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>.tv_usec = 0;</div><div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;            transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a> = <span class="stringliteral">&quot;RTP&quot;</span>;</div><div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160;            f = &amp;transport_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>;</div><div class="line"><a name="l06553"></a><span class="lineno"> 6553</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;         }</div><div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa6a84235b636497872f31a832a8b17af">RTCP_PT_SDES</a>:</div><div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a804d7f1392ba5f1a19530c5243d93894">rtcp_debug_test_addr</a>(addr)) {</div><div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;            <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Received an SDES from %s\n&quot;</span>,</div><div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;               <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(addr));</div><div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;         }</div><div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;         <span class="keywordflow">if</span> ((test_engine = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a>(instance))) {</div><div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;            test_engine-&gt;<a class="code" href="../../d5/d98/structast__rtp__engine__test.html#ad499ee617ec9d9be0f4bc339742a07e7">sdes_received</a> = 1;</div><div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;         }</div><div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a5723708baf43b6326706331795fcd52f">RTCP_PT_BYE</a>:</div><div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a804d7f1392ba5f1a19530c5243d93894">rtcp_debug_test_addr</a>(addr)) {</div><div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;            <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Received a BYE from %s\n&quot;</span>,</div><div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;               <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(addr));</div><div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;         }</div><div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;      }</div><div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160;      position += length;</div><div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160;      rtp-&gt;rtcp-&gt;rtcp_info = 1;</div><div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;</div><div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;      <span class="keywordflow">if</span> (child) {</div><div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(child);</div><div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160;      }</div><div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160;   }</div><div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;</div><div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160;   <span class="keywordflow">return</span> f;</div><div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_ab9d6ff10648a47e0e609f57ac749d6dc"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab9d6ff10648a47e0e609f57ac749d6dc">rtp_find_instance_by_media_source_ssrc</a></div><div class="ttdeci">static struct ast_rtp_instance * rtp_find_instance_by_media_source_ssrc(struct ast_rtp_instance *instance, struct ast_rtp *rtp, unsigned int ssrc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05904">res_rtp_asterisk.c:5904</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a6dbf005049ce30693e57c45fdd45250c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a6dbf005049ce30693e57c45fdd45250c">RTCP_FB_REMB_BLOCK_WORD_LENGTH</a></div><div class="ttdeci">#define RTCP_FB_REMB_BLOCK_WORD_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06097">res_rtp_asterisk.c:6097</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a178f67ed7bee20c65399faeb0b65fd3a"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a178f67ed7bee20c65399faeb0b65fd3a">RTCP_VALID_VALUE</a></div><div class="ttdeci">#define RTCP_VALID_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06092">res_rtp_asterisk.c:6092</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a></div><div class="ttdoc">An object that represents data sent during a SR/RR RTCP report. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00331">rtp_engine.h:331</a></div></div>
<div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_abe50a9d9c36c702889863e206f4502c6"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#abe50a9d9c36c702889863e206f4502c6">RTCP_PT_SR</a></div><div class="ttdeci">#define RTCP_PT_SR</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00121">res_rtp_asterisk.c:121</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a5bd8d430ff046850f29c8b141d5a61e6"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a5bd8d430ff046850f29c8b141d5a61e6">RTCP_HEADER_SSRC_LENGTH</a></div><div class="ttdeci">#define RTCP_HEADER_SSRC_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06096">res_rtp_asterisk.c:6096</a></div></div>
<div class="ttc" id="structast__frame_html_aed7ea92f45bd273dde380a45ddced592"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">ast_frame::offset</a></div><div class="ttdeci">int offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">include/asterisk/frame.h:179</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a280f0e254e281a27c39489fc2603329c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a280f0e254e281a27c39489fc2603329c">rtcp_payload_type2str</a></div><div class="ttdeci">static const char * rtcp_payload_type2str(unsigned int pt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05910">res_rtp_asterisk.c:5910</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a6086e203d0d3d4888e999fa6e9b486b6"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a6086e203d0d3d4888e999fa6e9b486b6">RTCP_VALID_MASK</a></div><div class="ttdeci">#define RTCP_VALID_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06091">res_rtp_asterisk.c:6091</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a0517365083db736945b1d8a8d5b14781"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a0517365083db736945b1d8a8d5b14781">ast_rtp_rtcp_report_block::highest_seq_no</a></div><div class="ttdeci">unsigned int highest_seq_no</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00322">rtp_engine.h:322</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a358dac6e270355f7ca564ffcef4fa370"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a358dac6e270355f7ca564ffcef4fa370">RTCP_REPORT_COUNT_SHIFT</a></div><div class="ttdeci">#define RTCP_REPORT_COUNT_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06072">res_rtp_asterisk.c:6072</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a665ba1f8447831ebe494fbf0915edb6a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a665ba1f8447831ebe494fbf0915edb6a">AST_RTP_RTCP_FMT_NACK</a></div><div class="ttdeci">#define AST_RTP_RTCP_FMT_NACK</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00303">rtp_engine.h:303</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__feedback__remb_html_a8cea965b4bae760eebe286e96fc208e7"><div class="ttname"><a href="../../d4/d88/structast__rtp__rtcp__feedback__remb.html#a8cea965b4bae760eebe286e96fc208e7">ast_rtp_rtcp_feedback_remb::br_exp</a></div><div class="ttdeci">unsigned int br_exp</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00351">rtp_engine.h:351</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af7564e625ce8bfbda577fb9dd9dddd3d"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af7564e625ce8bfbda577fb9dd9dddd3d">AST_RTP_RTCP_FMT_PLI</a></div><div class="ttdeci">#define AST_RTP_RTCP_FMT_PLI</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00305">rtp_engine.h:305</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af9492fccb2be755522d50f4d514006cb"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af9492fccb2be755522d50f4d514006cb">RTCP_LENGTH_MASK</a></div><div class="ttdeci">#define RTCP_LENGTH_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06061">res_rtp_asterisk.c:6061</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a368880aa0afe3ee532508eff1ba26882"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a></div><div class="ttdeci">struct ast_rtp_engine_test * ast_rtp_instance_get_test(struct ast_rtp_instance *instance)</div><div class="ttdoc">Obtain a pointer to the test callbacks on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02901">rtp_engine.c:2901</a></div></div>
<div class="ttc" id="structast__rtp__engine__test_html_ad499ee617ec9d9be0f4bc339742a07e7"><div class="ttname"><a href="../../d5/d98/structast__rtp__engine__test.html#ad499ee617ec9d9be0f4bc339742a07e7">ast_rtp_engine_test::sdes_received</a></div><div class="ttdeci">int sdes_received</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00601">rtp_engine.h:601</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2f9861ee11cba20a1a0d3eea4840cbc0"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2f9861ee11cba20a1a0d3eea4840cbc0">RTCP_SR_BLOCK_WORD_LENGTH</a></div><div class="ttdeci">#define RTCP_SR_BLOCK_WORD_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06094">res_rtp_asterisk.c:6094</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1">STRICT_RTP_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00164">res_rtp_asterisk.c:164</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__feedback_html"><div class="ttname"><a href="../../d7/dd3/structast__rtp__rtcp__feedback.html">ast_rtp_rtcp_feedback</a></div><div class="ttdoc">An object that represents data received in a feedback report. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00358">rtp_engine.h:358</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a60ba31659303a153a619939ab7b3c74c"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">ast_rtp_rtcp_report::report_block</a></div><div class="ttdeci">struct ast_rtp_rtcp_report_block * report_block[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00344">rtp_engine.h:344</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aae21bfbb41fc9426a8b032904a36dca6"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aae21bfbb41fc9426a8b032904a36dca6">RTCP_PAYLOAD_TYPE_MASK</a></div><div class="ttdeci">#define RTCP_PAYLOAD_TYPE_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06062">res_rtp_asterisk.c:6062</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ae07b5d23a23d4d09988c4a1c5d477d14"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae07b5d23a23d4d09988c4a1c5d477d14">timeval2ntp</a></div><div class="ttdeci">static void timeval2ntp(struct timeval tv, unsigned int *msw, unsigned int *lsw)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04392">res_rtp_asterisk.c:4392</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a5402d4a2ce7addf589cc3efdb25b27be"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a5402d4a2ce7addf589cc3efdb25b27be">rtp_find_instance_by_packet_source_ssrc</a></div><div class="ttdeci">static struct ast_rtp_instance * rtp_find_instance_by_packet_source_ssrc(struct ast_rtp_instance *instance, struct ast_rtp *rtp, unsigned int ssrc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05897">res_rtp_asterisk.c:5897</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html">ast_rtp_rtcp_report_block</a></div><div class="ttdoc">A report block within a SR/RR report. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00316">rtp_engine.h:316</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__feedback_html_aa9cb6ed3e21d64ad26c61da877136ae0"><div class="ttname"><a href="../../d7/dd3/structast__rtp__rtcp__feedback.html#aa9cb6ed3e21d64ad26c61da877136ae0">ast_rtp_rtcp_feedback::fmt</a></div><div class="ttdeci">unsigned int fmt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00359">rtp_engine.h:359</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__feedback_html_af419ddac99d63d4e2117252750b4755b"><div class="ttname"><a href="../../d7/dd3/structast__rtp__rtcp__feedback.html#af419ddac99d63d4e2117252750b4755b">ast_rtp_rtcp_feedback::remb</a></div><div class="ttdeci">struct ast_rtp_rtcp_feedback_remb remb</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00361">rtp_engine.h:361</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="netsock2_8h_html_abae1b903c8f5b7639235b579a267aaab"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a></div><div class="ttdeci">int ast_sockaddr_cmp(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00388">netsock2.c:388</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68594e604220e38eb6593972ef9a4da3"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68594e604220e38eb6593972ef9a4da3">ast_rtp_rtcp_received_type</a></div><div class="ttdeci">struct stasis_message_type * ast_rtp_rtcp_received_type(void)</div><div class="ttdoc">Message type for an RTCP message received from some external source. </div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a0c4d8290d22254494ae62e8b6974ec35"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a0c4d8290d22254494ae62e8b6974ec35">RTCP_LENGTH_SHIFT</a></div><div class="ttdeci">#define RTCP_LENGTH_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06070">res_rtp_asterisk.c:6070</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a0d5514f710438c5808ce30d0d35554c2"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a0d5514f710438c5808ce30d0d35554c2">res_srtp</a></div><div class="ttdeci">struct ast_srtp_res * res_srtp</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00177">rtp_engine.c:177</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aed901569931a704735fdc55dc50f442b"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aed901569931a704735fdc55dc50f442b">update_lost_stats</a></div><div class="ttdeci">static void update_lost_stats(struct ast_rtp *rtp, unsigned int lost_packets)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05848">res_rtp_asterisk.c:5848</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a4783eb307c55bda4f55f933f8ebf9661"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a4783eb307c55bda4f55f933f8ebf9661">ast_rtp_rtcp_report_block::fraction</a></div><div class="ttdeci">unsigned short fraction</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00319">rtp_engine.h:319</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00115">rtp_engine.h:115</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac8f7380b8620c80443286b44481f641c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a></div><div class="ttdeci">#define AST_FRIENDLY_OFFSET</div><div class="ttdoc">Offset into a frame&amp;#39;s data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">include/asterisk/frame.h:229</a></div></div>
<div class="ttc" id="structast__frame_html_af51e37c9331049b1e3d250a7c8bc3c26"><div class="ttname"><a href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">ast_frame::src</a></div><div class="ttdeci">const char * src</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">include/asterisk/frame.h:181</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a8413c5149cc0d207ff76cdac0df1d9d8"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a8413c5149cc0d207ff76cdac0df1d9d8">update_rtt_stats</a></div><div class="ttdeci">static int update_rtt_stats(struct ast_rtp *rtp, unsigned int lsr, unsigned int dlsr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05768">res_rtp_asterisk.c:5768</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a003eb2ccfb47fe93819bb8c54084708e"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">ast_rtp_rtcp_report_block::lsr</a></div><div class="ttdeci">unsigned int lsr</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00324">rtp_engine.h:324</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a102b1c7dd32df715a82ef484f51bdb9b"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a102b1c7dd32df715a82ef484f51bdb9b">RTCP_PAYLOAD_TYPE_SHIFT</a></div><div class="ttdeci">#define RTCP_PAYLOAD_TYPE_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06071">res_rtp_asterisk.c:6071</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga0915be7e2d33217121465cfb689318fd"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a></div><div class="ttdeci">#define ast_debug_rtcp(sublevel,...)</div><div class="ttdoc">Log debug level RTCP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02873">rtp_engine.h:2873</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914caf7d73e777eb2a69c79032cce56a3ca3b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914caf7d73e777eb2a69c79032cce56a3ca3b">AST_RTP_PROPERTY_REMB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00131">rtp_engine.h:131</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4a9c0900c44c60bd881c22ff57169a1a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4a9c0900c44c60bd881c22ff57169a1a">AST_RTP_RTCP_RTPFB</a></div><div class="ttdeci">#define AST_RTP_RTCP_RTPFB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00297">rtp_engine.h:297</a></div></div>
<div class="ttc" id="structast__rtp_html_a7aaf7fb2b26e335304c8a89cc36aac00"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">ast_rtp::themssrc_valid</a></div><div class="ttdeci">unsigned int themssrc_valid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">res_rtp_asterisk.c:377</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00135">include/asterisk/frame.h:135</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a452d6ad1556ab4006b41ddec84ecac29"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a452d6ad1556ab4006b41ddec84ecac29">ast_rtp_publish_rtcp_message</a></div><div class="ttdeci">void ast_rtp_publish_rtcp_message(struct ast_rtp_instance *rtp, struct stasis_message_type *message_type, struct ast_rtp_rtcp_report *report, struct ast_json *blob)</div><div class="ttdoc">Publish an RTCP message to Stasis Message Bus API. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03485">rtp_engine.c:3485</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a199d704f3867124fe0f56f4c8856a0b4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a199d704f3867124fe0f56f4c8856a0b4">ast_rtp_rtcp_report_alloc</a></div><div class="ttdeci">struct ast_rtp_rtcp_report * ast_rtp_rtcp_report_alloc(unsigned int report_blocks)</div><div class="ttdoc">Allocate an ao2 ref counted instance of ast_rtp_rtcp_report. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03474">rtp_engine.c:3474</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a9411e6f925f7e291f033d6b1b6584703"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a9411e6f925f7e291f033d6b1b6584703">RTCP_VERSION_SHIFTED</a></div><div class="ttdeci">#define RTCP_VERSION_SHIFTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06077">res_rtp_asterisk.c:6077</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4d8564f9c96df1cd1076ad4f6faed7ab"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4d8564f9c96df1cd1076ad4f6faed7ab">RTCP_PT_RR</a></div><div class="ttdeci">#define RTCP_PT_RR</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00123">res_rtp_asterisk.c:123</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a804d7f1392ba5f1a19530c5243d93894"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a804d7f1392ba5f1a19530c5243d93894">rtcp_debug_test_addr</a></div><div class="ttdeci">static int rtcp_debug_test_addr(struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02762">res_rtp_asterisk.c:2762</a></div></div>
<div class="ttc" id="structast__rtp_html_afe92c8ff0d37afbf84f8715f4144ca27"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">ast_rtp::themssrc</a></div><div class="ttdeci">unsigned int themssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">res_rtp_asterisk.c:376</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a2641bab7842e6a448b53f26689bef1d2"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">ast_rtp_rtcp_report_block::dlsr</a></div><div class="ttdeci">unsigned int dlsr</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00325">rtp_engine.h:325</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2295ead5af93e27d5a32ecee7e4cb40a"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2295ead5af93e27d5a32ecee7e4cb40a">RTCP_RR_BLOCK_WORD_LENGTH</a></div><div class="ttdeci">#define RTCP_RR_BLOCK_WORD_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06095">res_rtp_asterisk.c:6095</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a62f7bf8eadfec58f81f33a8c90458f15"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a62f7bf8eadfec58f81f33a8c90458f15">srtp_replay_protection</a></div><div class="ttdeci">static int srtp_replay_protection</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00209">res_rtp_asterisk.c:209</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga5009aeec1269fecc5f4e04c1c479116d"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a></div><div class="ttdeci">#define ast_debug_rtp_packet_is_allowed</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02864">rtp_engine.h:2864</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a1816e1926678b2ba35fde74295580c69"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a1816e1926678b2ba35fde74295580c69">RTCP_FB_NACK_BLOCK_WORD_LENGTH</a></div><div class="ttdeci">#define RTCP_FB_NACK_BLOCK_WORD_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06098">res_rtp_asterisk.c:6098</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a9c460b328c3e2d05ed29f3e492b42ed9"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a9c460b328c3e2d05ed29f3e492b42ed9">RTCP_REPORT_COUNT_MASK</a></div><div class="ttdeci">#define RTCP_REPORT_COUNT_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06063">res_rtp_asterisk.c:6063</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a0fb21b1e16b180484b413cbfd591fa7f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a0fb21b1e16b180484b413cbfd591fa7f">ast_rtp_rtcp_handle_nack</a></div><div class="ttdeci">static int ast_rtp_rtcp_handle_nack(struct ast_rtp_instance *instance, unsigned int *nackdata, unsigned int position, unsigned int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05963">res_rtp_asterisk.c:5963</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a07d58eb9568f3068d78674e7fb02d420"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a07d58eb9568f3068d78674e7fb02d420">AST_RTP_RTCP_FMT_FIR</a></div><div class="ttdeci">#define AST_RTP_RTCP_FMT_FIR</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00307">rtp_engine.h:307</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a799d79c026de98946ba12101f2b32919"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a799d79c026de98946ba12101f2b32919">ast_rtp_rtcp_report_block::ia_jitter</a></div><div class="ttdeci">unsigned int ia_jitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00323">rtp_engine.h:323</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a38fce7504b6d0ac96b1f07fa86598ce8"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a38fce7504b6d0ac96b1f07fa86598ce8">RTCP_PT_FUR</a></div><div class="ttdeci">#define RTCP_PT_FUR</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00119">res_rtp_asterisk.c:119</a></div></div>
<div class="ttc" id="structast__srtp__res_html_a262f1edfb2ae69fc526cb4a6aea3a103"><div class="ttname"><a href="../../d0/d5d/structast__srtp__res.html#a262f1edfb2ae69fc526cb4a6aea3a103">ast_srtp_res::unprotect</a></div><div class="ttdeci">int(* unprotect)(struct ast_srtp *srtp, void *buf, int *size, int rtcp)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/res__srtp_8h_source.html#l00048">res_srtp.h:48</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_afcddb5ff85cb2691779171663a3a8229"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#afcddb5ff85cb2691779171663a3a8229">rtcp_payload_subtype2str</a></div><div class="ttdeci">static const char * rtcp_payload_subtype2str(unsigned int pt, unsigned int subtype)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05942">res_rtp_asterisk.c:5942</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__feedback__remb_html_aaa1e9a8fad3f268711f2bf99c85f1367"><div class="ttname"><a href="../../d4/d88/structast__rtp__rtcp__feedback__remb.html#aaa1e9a8fad3f268711f2bf99c85f1367">ast_rtp_rtcp_feedback_remb::br_mantissa</a></div><div class="ttdeci">unsigned int br_mantissa</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00352">rtp_engine.h:352</a></div></div>
<div class="ttc" id="structast__rtp_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">ast_rtp::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">res_rtp_asterisk.c:370</a></div></div>
<div class="ttc" id="structast__rtp__engine__test_html"><div class="ttname"><a href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a></div><div class="ttdoc">Structure that represents the test functionality for res_rtp_asterisk unit tests. ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00595">rtp_engine.h:595</a></div></div>
<div class="ttc" id="structast__frame_html_a41a708025486b4c9383e7432e9ba3f0e"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">ast_frame::delivery</a></div><div class="ttdeci">struct timeval delivery</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00185">include/asterisk/frame.h:185</a></div></div>
<div class="ttc" id="structast__frame_html_aed16590d48f41d89f31e0cf347f5cd99"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">ast_frame::mallocd</a></div><div class="ttdeci">int mallocd</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">include/asterisk/frame.h:175</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00295">include/asterisk/frame.h:295</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a1635c093c05170fc6fea298ff747093f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a1635c093c05170fc6fea298ff747093f">ntp2timeval</a></div><div class="ttdeci">static void ntp2timeval(unsigned int msw, unsigned int lsw, struct timeval *tv)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04421">res_rtp_asterisk.c:4421</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_ac0456a5c8a8a190b04a9eb241b9faf9a"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#ac0456a5c8a8a190b04a9eb241b9faf9a">ast_rtp_rtcp_report_block::packets</a></div><div class="ttdeci">unsigned int packets</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00320">rtp_engine.h:320</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac45a536a85bcf54c7d1aafac6bb40e30"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac45a536a85bcf54c7d1aafac6bb40e30">RTCP_VERSION_MASK_SHIFTED</a></div><div class="ttdeci">#define RTCP_VERSION_MASK_SHIFTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06078">res_rtp_asterisk.c:6078</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2a2d35167e5880fdd5ec8d7df44f18b1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a></div><div class="ttdeci">int ast_rtp_instance_get_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property)</div><div class="ttdoc">Get the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00716">rtp_engine.c:716</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a6daf71d49a86747ab43985cc2f51cc98"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a6daf71d49a86747ab43985cc2f51cc98">update_jitter_stats</a></div><div class="ttdeci">static void update_jitter_stats(struct ast_rtp *rtp, unsigned int ia_jitter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05824">res_rtp_asterisk.c:5824</a></div></div>
<div class="ttc" id="structast__frame_html_a8383e75e786449dd2f4258b0819dd8f1"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">ast_frame::stream_num</a></div><div class="ttdeci">int stream_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">include/asterisk/frame.h:197</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa6a84235b636497872f31a832a8b17af"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa6a84235b636497872f31a832a8b17af">RTCP_PT_SDES</a></div><div class="ttdeci">#define RTCP_PT_SDES</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00125">res_rtp_asterisk.c:125</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a5723708baf43b6326706331795fcd52f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a5723708baf43b6326706331795fcd52f">RTCP_PT_BYE</a></div><div class="ttdeci">#define RTCP_PT_BYE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00127">res_rtp_asterisk.c:127</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a6f505be1e80abef8c8dc43dd435dee82"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a6f505be1e80abef8c8dc43dd435dee82">ast_rtp_rtcp_report_block::source_ssrc</a></div><div class="ttdeci">unsigned int source_ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00317">rtp_engine.h:317</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a711189b19386915beec87d8edddb3464"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a711189b19386915beec87d8edddb3464">RTCP_PT_PSFB</a></div><div class="ttdeci">#define RTCP_PT_PSFB</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00132">res_rtp_asterisk.c:132</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a92dbab4f62cc24fc05ac849a2b2b0e5c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a92dbab4f62cc24fc05ac849a2b2b0e5c">AST_RTP_RTCP_FMT_REMB</a></div><div class="ttdeci">#define AST_RTP_RTCP_FMT_REMB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00309">rtp_engine.h:309</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_ac073ee3bf2fb7ca014e53683edba72ff"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">ast_rtp_rtcp_report_block::lost_count</a></div><div class="ttdeci">struct ast_rtp_rtcp_report_block::@314 lost_count</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac7bd4f073fac1bbe828d0390d7e9250f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7bd4f073fac1bbe828d0390d7e9250f">&#9670;&nbsp;</a></span>ast_rtcp_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* ast_rtcp_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06590">6590</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00303">AST_CONTROL_SRCCHANGE</a>, <a class="el" href="../../d3/d00/stun_8h_source.html#l00053">ast_debug_stun</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">AST_FRIENDLY_OFFSET</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02763">ast_rtp_instance_get_srtp()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00782">ast_sockaddr_from_sin</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00037">ast_sockaddr_ipv4_mapped()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00497">ast_sockaddr_is_ipv4()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00769">ast_sockaddr_to_sin</a>, <a class="el" href="../../d3/d00/stun_8h_source.html#l00064">AST_STUN_ACCEPT</a>, <a class="el" href="../../d1/dbd/stun_8c_source.html#l00268">ast_stun_handle_packet()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">ast_rtp::f</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03235">rtcp_recvfrom()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00161">RTP_DTLS_ESTABLISHED</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">ast_rtp::s</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;{</div><div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d11/structast__srtp.html">ast_srtp</a> *srtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a622089f7b296c002cc855d73172e9da4">ast_rtp_instance_get_srtp</a>(instance, 1);</div><div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> addr;</div><div class="line"><a name="l06595"></a><span class="lineno"> 6595</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> rtcpdata[8192 + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>];</div><div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *read_area = rtcpdata + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l06597"></a><span class="lineno"> 6597</span>&#160;   <span class="keywordtype">size_t</span> read_area_size = <span class="keyword">sizeof</span>(rtcpdata) - AST_FRIENDLY_OFFSET;</div><div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160;</div><div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160;   <span class="comment">/* Read in RTCP data from the socket */</span></div><div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;   <span class="keywordflow">if</span> ((res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a33608656bad4878dfd5c84ec9aef96c9">rtcp_recvfrom</a>(instance, read_area, read_area_size,</div><div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160;            0, &amp;addr)) &lt; 0) {</div><div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;      <span class="keywordflow">if</span> (res == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3b7005812dac9fa0577e157db320ae4c">RTP_DTLS_ESTABLISHED</a>) {</div><div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>;</div><div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a>;</div><div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;         <span class="keywordflow">return</span> &amp;rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>;</div><div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160;      }</div><div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;</div><div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EBADF);</div><div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EAGAIN) {</div><div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;RTCP Read error: %s.  Hanging up.\n&quot;</span>,</div><div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160;            (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>) ? strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>) : <span class="stringliteral">&quot;Unspecified&quot;</span>);</div><div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;      }</div><div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160;   }</div><div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;</div><div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;   <span class="comment">/* If this was handled by the ICE session don&#39;t do anything further */</span></div><div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;   }</div><div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;</div><div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;   <span class="keywordflow">if</span> (!*read_area) {</div><div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;      <span class="keyword">struct </span>sockaddr_in addr_tmp;</div><div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> addr_v4;</div><div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;</div><div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a>(&amp;addr)) {</div><div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a>(&amp;addr, &amp;addr_tmp);</div><div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a42e610962ef06c151aad8260af428e3d">ast_sockaddr_ipv4_mapped</a>(&amp;addr, &amp;addr_v4)) {</div><div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;         <a class="code" href="../../d3/d00/stun_8h.html#a6fe18262fa19169a3c2481829cd07cb3">ast_debug_stun</a>(2, <span class="stringliteral">&quot;(%p) STUN using IPv6 mapped address %s\n&quot;</span>,</div><div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;            instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addr));</div><div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a>(&amp;addr_v4, &amp;addr_tmp);</div><div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;         <a class="code" href="../../d3/d00/stun_8h.html#a6fe18262fa19169a3c2481829cd07cb3">ast_debug_stun</a>(2, <span class="stringliteral">&quot;(%p) STUN cannot do for non IPv4 address %s\n&quot;</span>,</div><div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;            instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addr));</div><div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;         <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160;      }</div><div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../d3/d00/stun_8h.html#a54055c699858c128745d6802755f0abe">ast_stun_handle_packet</a>(rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>, &amp;addr_tmp, read_area, res, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) == <a class="code" href="../../d3/d00/stun_8h.html#aeebbffb9fd9d97e2ce5469547e5fb074a8f3217f91c38418aa44ff22ba9c19b97">AST_STUN_ACCEPT</a>)) {</div><div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a>(&amp;addr, &amp;addr_tmp);</div><div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;rtp-&gt;rtcp-&gt;them, &amp;addr);</div><div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;      }</div><div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;   }</div><div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;</div><div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#acef3a2fc706fb66b5cf99569281b4948">ast_rtcp_interpret</a>(instance, srtp, read_area, res, &amp;addr);</div><div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="structast__srtp_html"><div class="ttname"><a href="../../d4/d11/structast__srtp.html">ast_srtp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd4/res__srtp_8c_source.html#l00065">res_srtp.c:65</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3b7005812dac9fa0577e157db320ae4c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3b7005812dac9fa0577e157db320ae4c">RTP_DTLS_ESTABLISHED</a></div><div class="ttdeci">#define RTP_DTLS_ESTABLISHED</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00161">res_rtp_asterisk.c:161</a></div></div>
<div class="ttc" id="netsock2_8h_html_a42e610962ef06c151aad8260af428e3d"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a42e610962ef06c151aad8260af428e3d">ast_sockaddr_ipv4_mapped</a></div><div class="ttdeci">int ast_sockaddr_ipv4_mapped(const struct ast_sockaddr *addr, struct ast_sockaddr *ast_mapped)</div><div class="ttdoc">Convert an IPv4-mapped IPv6 address into an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00037">netsock2.c:37</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a622089f7b296c002cc855d73172e9da4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a622089f7b296c002cc855d73172e9da4">ast_rtp_instance_get_srtp</a></div><div class="ttdeci">struct ast_srtp * ast_rtp_instance_get_srtp(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdoc">Obtain the SRTP instance associated with an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02763">rtp_engine.c:2763</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stun_8h_html_a54055c699858c128745d6802755f0abe"><div class="ttname"><a href="../../d3/d00/stun_8h.html#a54055c699858c128745d6802755f0abe">ast_stun_handle_packet</a></div><div class="ttdeci">int ast_stun_handle_packet(int s, struct sockaddr_in *src, unsigned char *data, size_t len, stun_cb_f *stun_cb, void *arg)</div><div class="ttdoc">handle an incoming STUN message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dbd/stun_8c_source.html#l00268">stun.c:268</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="stun_8h_html_aeebbffb9fd9d97e2ce5469547e5fb074a8f3217f91c38418aa44ff22ba9c19b97"><div class="ttname"><a href="../../d3/d00/stun_8h.html#aeebbffb9fd9d97e2ce5469547e5fb074a8f3217f91c38418aa44ff22ba9c19b97">AST_STUN_ACCEPT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/stun_8h_source.html#l00064">stun.h:64</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a33608656bad4878dfd5c84ec9aef96c9"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a33608656bad4878dfd5c84ec9aef96c9">rtcp_recvfrom</a></div><div class="ttdeci">static int rtcp_recvfrom(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03235">res_rtp_asterisk.c:3235</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac8f7380b8620c80443286b44481f641c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a></div><div class="ttdeci">#define AST_FRIENDLY_OFFSET</div><div class="ttdoc">Offset into a frame&amp;#39;s data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">include/asterisk/frame.h:229</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad68264a6784dc22570eda3cb447307f8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a></div><div class="ttdeci">#define ast_sockaddr_from_sin(addr, sin)</div><div class="ttdoc">Converts a struct sockaddr_in to a struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00782">netsock2.h:782</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_acef3a2fc706fb66b5cf99569281b4948"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#acef3a2fc706fb66b5cf99569281b4948">ast_rtcp_interpret</a></div><div class="ttdeci">static struct ast_frame * ast_rtcp_interpret(struct ast_rtp_instance *instance, struct ast_srtp *srtp, const unsigned char *rtcpdata, size_t size, struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">res_rtp_asterisk.c:6100</a></div></div>
<div class="ttc" id="stun_8h_html_a6fe18262fa19169a3c2481829cd07cb3"><div class="ttname"><a href="../../d3/d00/stun_8h.html#a6fe18262fa19169a3c2481829cd07cb3">ast_debug_stun</a></div><div class="ttdeci">#define ast_debug_stun(sublevel,...)</div><div class="ttdoc">Log debug level STUN information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/stun_8h_source.html#l00053">stun.h:53</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__rtp_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">ast_rtp::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">res_rtp_asterisk.c:370</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="netsock2_8h_html_adbbb5a3382be0925c292a4933ce5b63d"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a></div><div class="ttdeci">int ast_sockaddr_is_ipv4(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if the address is an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00497">netsock2.c:497</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa60da39edcabcec05ca9219c7b290395"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a></div><div class="ttdeci">#define ast_sockaddr_to_sin(addr, sin)</div><div class="ttdoc">Converts a struct ast_sockaddr to a struct sockaddr_in. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00769">netsock2.h:769</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structast__rtp_html_a339d22b3e442946380f98ed19e320db2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">ast_rtp::s</a></div><div class="ttdeci">int s</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">res_rtp_asterisk.c:368</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00303">include/asterisk/frame.h:303</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aff89c2855ec73ffa6efdc958bb71c2e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff89c2855ec73ffa6efdc958bb71c2e8">&#9670;&nbsp;</a></span>ast_rtcp_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtcp_write </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write a RTCP packet to the far end. </p>
<dl class="section note"><dt>Note</dt><dd>Decide if we are going to send an SR (with Reception Block) or RR RR is sent if we have not sent any rtp packets in the previous interval</dd></dl>
<p>Scheduler callback </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04814">4814</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04579">ast_rtcp_calculate_sr_rr_statistics()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04699">ast_rtcp_generate_compound_prefix()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03474">ast_rtp_rtcp_report_alloc()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../dd/d1d/uuid_8h_source.html#l00027">AST_UUID_STR_LEN</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03303">rtcp_sendto()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">ast_rtp::themssrc_valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">ast_rtp_interpret()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">rtp_raw_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;{</div><div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance = (<span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *) <a class="code" href="../../df/d7a/structast__rtp__instance.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;   <span class="keywordtype">int</span> sr = 0;</div><div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;   <span class="keywordtype">int</span> packet_len = 0;</div><div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;   <span class="keywordtype">int</span> ice;</div><div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address = { { 0, } };</div><div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *rtcpheader;</div><div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> bdata[<a class="code" href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a> + 128] = <span class="stringliteral">&quot;&quot;</span>; <span class="comment">/* More than enough */</span></div><div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *, rtcp_report,</div><div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a199d704f3867124fe0f56f4c8856a0b4">ast_rtp_rtcp_report_alloc</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">themssrc_valid</a> ? 1 : 0),</div><div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;</div><div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;   <span class="keywordflow">if</span> (!rtp || !rtp-&gt;rtcp || rtp-&gt;rtcp-&gt;schedid == -1) {</div><div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(instance, -1);</div><div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;   }</div><div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;</div><div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;   rtcpheader = bdata;</div><div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;</div><div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;   res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a6a3e89b50705b66f142eaaff7d3fe52d">ast_rtcp_generate_compound_prefix</a>(instance, rtcpheader, rtcp_report, &amp;sr);</div><div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;</div><div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;   <span class="keywordflow">if</span> (res == 0 || res == 1) {</div><div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;   }</div><div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;</div><div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;   packet_len += res;</div><div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;</div><div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;bundled) {</div><div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(instance, &amp;remote_address);</div><div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;remote_address, &amp;rtp-&gt;rtcp-&gt;them);</div><div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;   }</div><div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;</div><div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;   res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a849b3d418fbe0446b4e9289a9ef94397">rtcp_sendto</a>(instance, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)rtcpheader, packet_len, 0, &amp;remote_address, &amp;ice);</div><div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;RTCP %s transmission error to %s, rtcp halted %s\n&quot;</span>,</div><div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;            sr ? <span class="stringliteral">&quot;SR&quot;</span> : <span class="stringliteral">&quot;RR&quot;</span>,</div><div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;rtp-&gt;rtcp-&gt;them),</div><div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;            strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;      res = 0;</div><div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac39a35490fcf802b678e67b448eb381c">ast_rtcp_calculate_sr_rr_statistics</a>(instance, rtcp_report, remote_address, ice, sr);</div><div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;   }</div><div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;</div><div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;</div><div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;<span class="comment">       * Not being rescheduled.</span></div><div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;      rtp-&gt;rtcp-&gt;schedid = -1;</div><div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(instance, -1);</div><div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;   }</div><div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;</div><div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;}</div><div class="ttc" id="structast__rtp__rtcp__report_html"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a></div><div class="ttdoc">An object that represents data sent during a SR/RR RTCP report. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00331">rtp_engine.h:331</a></div></div>
<div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a6a3e89b50705b66f142eaaff7d3fe52d"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a6a3e89b50705b66f142eaaff7d3fe52d">ast_rtcp_generate_compound_prefix</a></div><div class="ttdeci">static int ast_rtcp_generate_compound_prefix(struct ast_rtp_instance *instance, unsigned char *rtcpheader, struct ast_rtp_rtcp_report *report, int *sr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04699">res_rtp_asterisk.c:4699</a></div></div>
<div class="ttc" id="uuid_8h_html_a127408e53d34dca0c589a099fabf1e13"><div class="ttname"><a href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a></div><div class="ttdeci">#define AST_UUID_STR_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d1d/uuid_8h_source.html#l00027">uuid.h:27</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structast__rtp_html_a7aaf7fb2b26e335304c8a89cc36aac00"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">ast_rtp::themssrc_valid</a></div><div class="ttdeci">unsigned int themssrc_valid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">res_rtp_asterisk.c:377</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a199d704f3867124fe0f56f4c8856a0b4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a199d704f3867124fe0f56f4c8856a0b4">ast_rtp_rtcp_report_alloc</a></div><div class="ttdeci">struct ast_rtp_rtcp_report * ast_rtp_rtcp_report_alloc(unsigned int report_blocks)</div><div class="ttdoc">Allocate an ao2 ref counted instance of ast_rtp_rtcp_report. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03474">rtp_engine.c:3474</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a735984d41155bc1032e09bece8f8d66d">ast_rtp_instance::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00193">rtp_engine.c:193</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac39a35490fcf802b678e67b448eb381c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac39a35490fcf802b678e67b448eb381c">ast_rtcp_calculate_sr_rr_statistics</a></div><div class="ttdeci">static int ast_rtcp_calculate_sr_rr_statistics(struct ast_rtp_instance *instance, struct ast_rtp_rtcp_report *rtcp_report, struct ast_sockaddr remote_address, int ice, int sr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04579">res_rtp_asterisk.c:4579</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a849b3d418fbe0446b4e9289a9ef94397"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a849b3d418fbe0446b4e9289a9ef94397">rtcp_sendto</a></div><div class="ttdeci">static int rtcp_sendto(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int *ice)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03303">res_rtp_asterisk.c:3303</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4483ad447adb5bfa0ec694a2a20c3234"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4483ad447adb5bfa0ec694a2a20c3234">&#9670;&nbsp;</a></span>ast_rtp_bundle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_bundle </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>child</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>parent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>child is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08938">8938</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02886">ast_debug_dtls</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00523">AST_RTP_DTLS_CONNECTION_EXISTING</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00259">AST_RTP_INSTANCE_RTCP_STANDARD</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01080">ast_rtp_instance_set_remote_address</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00573">AST_VECTOR_ELEM_CLEANUP_NOOP</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00488">AST_VECTOR_REMOVE_CMP_UNORDERED</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00332">rtp_ssrc_mapping::instance</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">rtp_allocate_transport()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03901">rtp_deallocate_transport()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00328">rtp_ssrc_mapping::ssrc</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04045">SSRC_MAPPING_ELEM_CMP</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00330">rtp_ssrc_mapping::ssrc_valid</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">ast_rtp::themssrc</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">ast_rtp::themssrc_valid</a>.</p>
<div class="fragment"><div class="line"><a name="l08939"></a><span class="lineno"> 8939</span>&#160;{</div><div class="line"><a name="l08940"></a><span class="lineno"> 8940</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *child_rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(child);</div><div class="line"><a name="l08941"></a><span class="lineno"> 8941</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *parent_rtp;</div><div class="line"><a name="l08942"></a><span class="lineno"> 8942</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/de7/structrtp__ssrc__mapping.html">rtp_ssrc_mapping</a> mapping;</div><div class="line"><a name="l08943"></a><span class="lineno"> 8943</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> them = { { 0, } };</div><div class="line"><a name="l08944"></a><span class="lineno"> 8944</span>&#160;</div><div class="line"><a name="l08945"></a><span class="lineno"> 8945</span>&#160;   <span class="keywordflow">if</span> (child_rtp-&gt;bundled == parent) {</div><div class="line"><a name="l08946"></a><span class="lineno"> 8946</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08947"></a><span class="lineno"> 8947</span>&#160;   }</div><div class="line"><a name="l08948"></a><span class="lineno"> 8948</span>&#160;</div><div class="line"><a name="l08949"></a><span class="lineno"> 8949</span>&#160;   <span class="comment">/* If this instance was already bundled then remove the SSRC mapping */</span></div><div class="line"><a name="l08950"></a><span class="lineno"> 8950</span>&#160;   <span class="keywordflow">if</span> (child_rtp-&gt;bundled) {</div><div class="line"><a name="l08951"></a><span class="lineno"> 8951</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *bundled_rtp;</div><div class="line"><a name="l08952"></a><span class="lineno"> 8952</span>&#160;</div><div class="line"><a name="l08953"></a><span class="lineno"> 8953</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(child);</div><div class="line"><a name="l08954"></a><span class="lineno"> 8954</span>&#160;</div><div class="line"><a name="l08955"></a><span class="lineno"> 8955</span>&#160;      <span class="comment">/* The child lock can&#39;t be held while accessing the parent */</span></div><div class="line"><a name="l08956"></a><span class="lineno"> 8956</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(child_rtp-&gt;bundled);</div><div class="line"><a name="l08957"></a><span class="lineno"> 8957</span>&#160;      bundled_rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(child_rtp-&gt;bundled);</div><div class="line"><a name="l08958"></a><span class="lineno"> 8958</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a671c51a3e6202230ef9d2330624ea996">AST_VECTOR_REMOVE_CMP_UNORDERED</a>(&amp;bundled_rtp-&gt;ssrc_mapping, child, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac8e8607839162548768620a5213e7b1a">SSRC_MAPPING_ELEM_CMP</a>, <a class="code" href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a>);</div><div class="line"><a name="l08959"></a><span class="lineno"> 8959</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(child_rtp-&gt;bundled);</div><div class="line"><a name="l08960"></a><span class="lineno"> 8960</span>&#160;</div><div class="line"><a name="l08961"></a><span class="lineno"> 8961</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(child);</div><div class="line"><a name="l08962"></a><span class="lineno"> 8962</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(child_rtp-&gt;bundled, -1);</div><div class="line"><a name="l08963"></a><span class="lineno"> 8963</span>&#160;      child_rtp-&gt;bundled = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08964"></a><span class="lineno"> 8964</span>&#160;   }</div><div class="line"><a name="l08965"></a><span class="lineno"> 8965</span>&#160;</div><div class="line"><a name="l08966"></a><span class="lineno"> 8966</span>&#160;   <span class="keywordflow">if</span> (!parent) {</div><div class="line"><a name="l08967"></a><span class="lineno"> 8967</span>&#160;      <span class="comment">/* We transitioned away from bundle so we need our own transport resources once again */</span></div><div class="line"><a name="l08968"></a><span class="lineno"> 8968</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a51ac7e289874d2165b05e7ae8dc068ae">rtp_allocate_transport</a>(child, child_rtp);</div><div class="line"><a name="l08969"></a><span class="lineno"> 8969</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08970"></a><span class="lineno"> 8970</span>&#160;   }</div><div class="line"><a name="l08971"></a><span class="lineno"> 8971</span>&#160;</div><div class="line"><a name="l08972"></a><span class="lineno"> 8972</span>&#160;   parent_rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(parent);</div><div class="line"><a name="l08973"></a><span class="lineno"> 8973</span>&#160;</div><div class="line"><a name="l08974"></a><span class="lineno"> 8974</span>&#160;   <span class="comment">/* We no longer need any transport related resources as we will use our parent RTP instance instead */</span></div><div class="line"><a name="l08975"></a><span class="lineno"> 8975</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3ae4ff586a4129d3eab4c60b39c65f36">rtp_deallocate_transport</a>(child, child_rtp);</div><div class="line"><a name="l08976"></a><span class="lineno"> 8976</span>&#160;</div><div class="line"><a name="l08977"></a><span class="lineno"> 8977</span>&#160;   <span class="comment">/* Children maintain a reference to the parent to guarantee that the transport doesn&#39;t go away on them */</span></div><div class="line"><a name="l08978"></a><span class="lineno"> 8978</span>&#160;   child_rtp-&gt;bundled = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(parent);</div><div class="line"><a name="l08979"></a><span class="lineno"> 8979</span>&#160;</div><div class="line"><a name="l08980"></a><span class="lineno"> 8980</span>&#160;   mapping.ssrc = child_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">themssrc</a>;</div><div class="line"><a name="l08981"></a><span class="lineno"> 8981</span>&#160;   mapping.ssrc_valid = child_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">themssrc_valid</a>;</div><div class="line"><a name="l08982"></a><span class="lineno"> 8982</span>&#160;   mapping.instance = child;</div><div class="line"><a name="l08983"></a><span class="lineno"> 8983</span>&#160;</div><div class="line"><a name="l08984"></a><span class="lineno"> 8984</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(child);</div><div class="line"><a name="l08985"></a><span class="lineno"> 8985</span>&#160;</div><div class="line"><a name="l08986"></a><span class="lineno"> 8986</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(parent);</div><div class="line"><a name="l08987"></a><span class="lineno"> 8987</span>&#160;</div><div class="line"><a name="l08988"></a><span class="lineno"> 8988</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;parent_rtp-&gt;ssrc_mapping, mapping);</div><div class="line"><a name="l08989"></a><span class="lineno"> 8989</span>&#160;</div><div class="line"><a name="l08990"></a><span class="lineno"> 8990</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP)</span></div><div class="line"><a name="l08991"></a><span class="lineno"> 8991</span>&#160;   <span class="comment">/* If DTLS-SRTP is already in use then add the local SSRC to it, otherwise it will get added once DTLS</span></div><div class="line"><a name="l08992"></a><span class="lineno"> 8992</span>&#160;<span class="comment">    * negotiation has been completed.</span></div><div class="line"><a name="l08993"></a><span class="lineno"> 8993</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l08994"></a><span class="lineno"> 8994</span>&#160;   <span class="keywordflow">if</span> (parent_rtp-&gt;dtls.connection == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9626fb58facd7ece2578af893daf998faf784f213578e0382006ac4256f262379">AST_RTP_DTLS_CONNECTION_EXISTING</a>) {</div><div class="line"><a name="l08995"></a><span class="lineno"> 8995</span>&#160;      dtls_srtp_add_local_ssrc(parent_rtp, parent, 0, child_rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>, 0);</div><div class="line"><a name="l08996"></a><span class="lineno"> 8996</span>&#160;   }</div><div class="line"><a name="l08997"></a><span class="lineno"> 8997</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08998"></a><span class="lineno"> 8998</span>&#160;</div><div class="line"><a name="l08999"></a><span class="lineno"> 8999</span>&#160;   <span class="comment">/* Bundle requires that RTCP-MUX be in use so only the main remote address needs to match */</span></div><div class="line"><a name="l09000"></a><span class="lineno"> 9000</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(parent, &amp;them);</div><div class="line"><a name="l09001"></a><span class="lineno"> 9001</span>&#160;</div><div class="line"><a name="l09002"></a><span class="lineno"> 9002</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(parent);</div><div class="line"><a name="l09003"></a><span class="lineno"> 9003</span>&#160;</div><div class="line"><a name="l09004"></a><span class="lineno"> 9004</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(child);</div><div class="line"><a name="l09005"></a><span class="lineno"> 9005</span>&#160;</div><div class="line"><a name="l09006"></a><span class="lineno"> 9006</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a>(child, &amp;them);</div><div class="line"><a name="l09007"></a><span class="lineno"> 9007</span>&#160;</div><div class="line"><a name="l09008"></a><span class="lineno"> 9008</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l09009"></a><span class="lineno"> 9009</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="structrtp__ssrc__mapping_html"><div class="ttname"><a href="../../db/de7/structrtp__ssrc__mapping.html">rtp_ssrc_mapping</a></div><div class="ttdoc">Structure used for mapping an incoming SSRC to an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00326">res_rtp_asterisk.c:326</a></div></div>
<div class="ttc" id="vector_8h_html_a671c51a3e6202230ef9d2330624ea996"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a671c51a3e6202230ef9d2330624ea996">AST_VECTOR_REMOVE_CMP_UNORDERED</a></div><div class="ttdeci">#define AST_VECTOR_REMOVE_CMP_UNORDERED(vec, value, cmp, cleanup)</div><div class="ttdoc">Remove an element from a vector that matches the given comparison. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00488">vector.h:488</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a51ac7e289874d2165b05e7ae8dc068ae"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a51ac7e289874d2165b05e7ae8dc068ae">rtp_allocate_transport</a></div><div class="ttdeci">static int rtp_allocate_transport(struct ast_rtp_instance *instance, struct ast_rtp *rtp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">res_rtp_asterisk.c:3828</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9626fb58facd7ece2578af893daf998faf784f213578e0382006ac4256f262379"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9626fb58facd7ece2578af893daf998faf784f213578e0382006ac4256f262379">AST_RTP_DTLS_CONNECTION_EXISTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00523">rtp_engine.h:523</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac8e8607839162548768620a5213e7b1a"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac8e8607839162548768620a5213e7b1a">SSRC_MAPPING_ELEM_CMP</a></div><div class="ttdeci">#define SSRC_MAPPING_ELEM_CMP(elem, value)</div><div class="ttdoc">SSRC mapping comparator for AST_VECTOR_REMOVE_CMP_UNORDERED() </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04045">res_rtp_asterisk.c:4045</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3ae4ff586a4129d3eab4c60b39c65f36"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3ae4ff586a4129d3eab4c60b39c65f36">rtp_deallocate_transport</a></div><div class="ttdeci">static void rtp_deallocate_transport(struct ast_rtp_instance *instance, struct ast_rtp *rtp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03901">res_rtp_asterisk.c:3901</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="vector_8h_html_a1885c25b9d767a53d1df9b641f53951a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a></div><div class="ttdeci">#define AST_VECTOR_ELEM_CLEANUP_NOOP(elem)</div><div class="ttdoc">Vector element cleanup that does nothing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00573">vector.h:573</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structast__rtp_html_a7aaf7fb2b26e335304c8a89cc36aac00"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">ast_rtp::themssrc_valid</a></div><div class="ttdeci">unsigned int themssrc_valid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">res_rtp_asterisk.c:377</a></div></div>
<div class="ttc" id="structast__rtp_html_afe92c8ff0d37afbf84f8715f4144ca27"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">ast_rtp::themssrc</a></div><div class="ttdeci">unsigned int themssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">res_rtp_asterisk.c:376</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a90c48c7f24206e8822bf520dae0a2478"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_set_remote_address(instance, address)</div><div class="ttdoc">Set the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01080">rtp_engine.h:1080</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a81a4665031965acf223f971304d431d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81a4665031965acf223f971304d431d1">&#9670;&nbsp;</a></span>ast_rtp_change_source()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_change_source </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04360">4360</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02860">ast_debug_rtp</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">ast_random()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02763">ast_rtp_instance_get_srtp()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../de/d15/res__srtp_8h_source.html#l00044">ast_srtp_res::change_source</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00384">ast_rtp::expectedrxseqno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00287">FLAG_NEED_MARKER_BIT</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00378">ast_rtp::lastts</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>.</p>
<div class="fragment"><div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;{</div><div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d11/structast__srtp.html">ast_srtp</a> *srtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a622089f7b296c002cc855d73172e9da4">ast_rtp_instance_get_srtp</a>(instance, 0);</div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d11/structast__srtp.html">ast_srtp</a> *rtcp_srtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a622089f7b296c002cc855d73172e9da4">ast_rtp_instance_get_srtp</a>(instance, 1);</div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ssrc = <a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>();</div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;</div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a>) {</div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;      <span class="comment">/* We simply set this bit so that the next packet sent will have the marker bit turned on */</span></div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(rtp, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab7d9bd5ba01a9647e359799e0d201cbf">FLAG_NEED_MARKER_BIT</a>);</div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;   }</div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;</div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(3, <span class="stringliteral">&quot;(%p) RTP changing ssrc from %u to %u due to a source change\n&quot;</span>,</div><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;      instance, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>, ssrc);</div><div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;</div><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;   <span class="keywordflow">if</span> (srtp) {</div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(3, <span class="stringliteral">&quot;(%p) RTP changing ssrc for SRTP from %u to %u\n&quot;</span>,</div><div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;         instance, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>, ssrc);</div><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a0d5514f710438c5808ce30d0d35554c2">res_srtp</a>-&gt;<a class="code" href="../../d0/d5d/structast__srtp__res.html#a2b166fa9e8ef53d5dbb4c38f81211f60">change_source</a>(srtp, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>, ssrc);</div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;      <span class="keywordflow">if</span> (rtcp_srtp != srtp) {</div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a0d5514f710438c5808ce30d0d35554c2">res_srtp</a>-&gt;<a class="code" href="../../d0/d5d/structast__srtp__res.html#a2b166fa9e8ef53d5dbb4c38f81211f60">change_source</a>(rtcp_srtp, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>, ssrc);</div><div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;      }</div><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;   }</div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;</div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a> = ssrc;</div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;</div><div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;   <span class="comment">/* Since the source is changing, we don&#39;t know what sequence number to expect next */</span></div><div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> = -1;</div><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;</div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="structast__srtp_html"><div class="ttname"><a href="../../d4/d11/structast__srtp.html">ast_srtp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd4/res__srtp_8c_source.html#l00065">res_srtp.c:65</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a622089f7b296c002cc855d73172e9da4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a622089f7b296c002cc855d73172e9da4">ast_rtp_instance_get_srtp</a></div><div class="ttdeci">struct ast_srtp * ast_rtp_instance_get_srtp(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdoc">Obtain the SRTP instance associated with an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02763">rtp_engine.c:2763</a></div></div>
<div class="ttc" id="structast__srtp__res_html_a2b166fa9e8ef53d5dbb4c38f81211f60"><div class="ttname"><a href="../../d0/d5d/structast__srtp__res.html#a2b166fa9e8ef53d5dbb4c38f81211f60">ast_srtp_res::change_source</a></div><div class="ttdeci">int(* change_source)(struct ast_srtp *srtp, unsigned int from_ssrc, unsigned int to_ssrc)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/res__srtp_8h_source.html#l00044">res_srtp.h:44</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a0d5514f710438c5808ce30d0d35554c2"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a0d5514f710438c5808ce30d0d35554c2">res_srtp</a></div><div class="ttdeci">struct ast_srtp_res * res_srtp</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00177">rtp_engine.c:177</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga669fb90e123085584d65608ef87b2fe4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a></div><div class="ttdeci">#define ast_debug_rtp(sublevel,...)</div><div class="ttdoc">Log debug level RTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02860">rtp_engine.h:2860</a></div></div>
<div class="ttc" id="utils_8h_html_a7b4f10b070e95ba413e258a3e4b03c20"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a></div><div class="ttdeci">long int ast_random(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02064">main/utils.c:2064</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ab7d9bd5ba01a9647e359799e0d201cbf"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab7d9bd5ba01a9647e359799e0d201cbf">FLAG_NEED_MARKER_BIT</a></div><div class="ttdeci">#define FLAG_NEED_MARKER_BIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00287">res_rtp_asterisk.c:287</a></div></div>
<div class="ttc" id="structast__rtp_html_a79c13061e144053a6c288592cc1c159e"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">ast_rtp::expectedrxseqno</a></div><div class="ttdeci">int expectedrxseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00384">res_rtp_asterisk.c:384</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__rtp_html_a2eb3b9494c999b0dd38c4d40bfdc55b4"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">ast_rtp::lastts</a></div><div class="ttdeci">unsigned int lastts</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00378">res_rtp_asterisk.c:378</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a09136b763dd8f946be886214a7750fb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09136b763dd8f946be886214a7750fb7">&#9670;&nbsp;</a></span>ast_rtp_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04048">4048</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00338">ast_data_buffer_free()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../dc/dd7/smoother_8c_source.html#l00220">ast_smoother_free()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00573">AST_VECTOR_ELEM_CLEANUP_NOOP</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00488">AST_VECTOR_REMOVE_CMP_UNORDERED</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">ast_rtp::f</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03901">rtp_deallocate_transport()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04045">SSRC_MAPPING_ELEM_CMP</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>
<div class="fragment"><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;{</div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;bundled) {</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *bundled_rtp;</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;      <span class="comment">/* We can&#39;t hold our instance lock while removing ourselves from the parent */</span></div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;</div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(rtp-&gt;bundled);</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;      bundled_rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(rtp-&gt;bundled);</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a671c51a3e6202230ef9d2330624ea996">AST_VECTOR_REMOVE_CMP_UNORDERED</a>(&amp;bundled_rtp-&gt;ssrc_mapping, instance, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac8e8607839162548768620a5213e7b1a">SSRC_MAPPING_ELEM_CMP</a>, <a class="code" href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a>);</div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(rtp-&gt;bundled);</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(rtp-&gt;bundled, -1);</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;   }</div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;</div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3ae4ff586a4129d3eab4c60b39c65f36">rtp_deallocate_transport</a>(instance, rtp);</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;   <span class="comment">/* Destroy the smoother that was smoothing out audio if present */</span></div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;smoother) {</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;      <a class="code" href="../../d6/d7f/smoother_8h.html#a6d3b71e0a81af743bae6c33c02b64f1f">ast_smoother_free</a>(rtp-&gt;smoother);</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;   }</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;</div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;   <span class="comment">/* Destroy RTCP if it was being used */</span></div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;rtcp) {</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;<span class="comment">       * It is not possible for there to be an active RTCP scheduler</span></div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;<span class="comment">       * entry at this point since it holds a reference to the</span></div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;<span class="comment">       * RTP instance while it&#39;s active.</span></div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(rtp-&gt;rtcp-&gt;local_addr_str);</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(rtp-&gt;rtcp);</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;   }</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;   <span class="comment">/* Destroy RED if it was being used */</span></div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;red) {</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;      <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(rtp-&gt;sched, rtp-&gt;red-&gt;schedid);</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(rtp-&gt;red);</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;      rtp-&gt;red = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;   }</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;</div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;   <span class="comment">/* Destroy the send buffer if it was being used */</span></div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;send_buffer) {</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;      <a class="code" href="../../d7/d82/data__buffer_8h.html#ae796391f113088352925d4359c8f96f5">ast_data_buffer_free</a>(rtp-&gt;send_buffer);</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;   }</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;   <span class="comment">/* Destroy the recv buffer if it was being used */</span></div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;recv_buffer) {</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;      <a class="code" href="../../d7/d82/data__buffer_8h.html#ae796391f113088352925d4359c8f96f5">ast_data_buffer_free</a>(rtp-&gt;recv_buffer);</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;   }</div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;</div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;rtp-&gt;transport_wide_cc.packet_statistics);</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(rtp-&gt;lasttxformat);</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(rtp-&gt;lastrxformat);</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;rtp-&gt;ssrc_mapping);</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;rtp-&gt;missing_seqno);</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;</div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;   <span class="comment">/* Finally destroy ourselves */</span></div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(rtp);</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="vector_8h_html_a671c51a3e6202230ef9d2330624ea996"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a671c51a3e6202230ef9d2330624ea996">AST_VECTOR_REMOVE_CMP_UNORDERED</a></div><div class="ttdeci">#define AST_VECTOR_REMOVE_CMP_UNORDERED(vec, value, cmp, cleanup)</div><div class="ttdoc">Remove an element from a vector that matches the given comparison. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00488">vector.h:488</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac8e8607839162548768620a5213e7b1a"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac8e8607839162548768620a5213e7b1a">SSRC_MAPPING_ELEM_CMP</a></div><div class="ttdeci">#define SSRC_MAPPING_ELEM_CMP(elem, value)</div><div class="ttdoc">SSRC mapping comparator for AST_VECTOR_REMOVE_CMP_UNORDERED() </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04045">res_rtp_asterisk.c:4045</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3ae4ff586a4129d3eab4c60b39c65f36"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3ae4ff586a4129d3eab4c60b39c65f36">rtp_deallocate_transport</a></div><div class="ttdeci">static void rtp_deallocate_transport(struct ast_rtp_instance *instance, struct ast_rtp *rtp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03901">res_rtp_asterisk.c:3901</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="smoother_8h_html_a6d3b71e0a81af743bae6c33c02b64f1f"><div class="ttname"><a href="../../d6/d7f/smoother_8h.html#a6d3b71e0a81af743bae6c33c02b64f1f">ast_smoother_free</a></div><div class="ttdeci">void ast_smoother_free(struct ast_smoother *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd7/smoother_8c_source.html#l00220">smoother.c:220</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="vector_8h_html_a1885c25b9d767a53d1df9b641f53951a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a></div><div class="ttdeci">#define AST_VECTOR_ELEM_CLEANUP_NOOP(elem)</div><div class="ttdoc">Vector element cleanup that does nothing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00573">vector.h:573</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__rtp_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">ast_rtp::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">res_rtp_asterisk.c:370</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="data__buffer_8h_html_ae796391f113088352925d4359c8f96f5"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#ae796391f113088352925d4359c8f96f5">ast_data_buffer_free</a></div><div class="ttdeci">void ast_data_buffer_free(struct ast_data_buffer *buffer)</div><div class="ttdoc">Free a data buffer (and all held data payloads) </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00338">data_buffer.c:338</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a979fa34daf2a78bf84b4051b871276e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a979fa34daf2a78bf84b4051b871276e2">&#9670;&nbsp;</a></span>ast_rtp_dtmf_begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_dtmf_begin </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>digit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04134">4134</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01928">ast_rtp_codecs_payload_code_tx()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00266">AST_RTP_DTMF</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00727">ast_rtp_instance_get_codecs()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00226">ast_tv()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03716">calc_txstamp()</a>, <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">digit</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00135">DTMF_SAMPLE_RATE_MS</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00378">ast_rtp::lastts</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">rtp_debug_test_addr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">rtp_sendto()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>.</p>
<div class="fragment"><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;{</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address = { {0,} };</div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;   <span class="keywordtype">int</span> hdrlen = 12, res = 0, i = 0, payload = 101;</div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;   <span class="keywordtype">char</span> data[256];</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *rtpheader = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>*)data;</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(instance, &amp;remote_address);</div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;</div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;   <span class="comment">/* If we have no remote address information bail out now */</span></div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;remote_address)) {</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;   }</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;</div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;   <span class="comment">/* Convert given digit into what we want to transmit */</span></div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &lt;= <span class="charliteral">&#39;9&#39;</span>) &amp;&amp; (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &gt;= <span class="charliteral">&#39;0&#39;</span>)) {</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;      <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> -= <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> == <span class="charliteral">&#39;*&#39;</span>) {</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;      <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> = 10;</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> == <span class="charliteral">&#39;#&#39;</span>) {</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;      <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> = 11;</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &gt;= <span class="charliteral">&#39;A&#39;</span>) &amp;&amp; (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &lt;= <span class="charliteral">&#39;D&#39;</span>)) {</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;      <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> = <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> - <span class="charliteral">&#39;A&#39;</span> + 12;</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &gt;= <span class="charliteral">&#39;a&#39;</span>) &amp;&amp; (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &lt;= <span class="charliteral">&#39;d&#39;</span>)) {</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;      <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> = <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> - <span class="charliteral">&#39;a&#39;</span> + 12;</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Don&#39;t know how to represent &#39;%c&#39;\n&quot;</span>, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>);</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;   }</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;</div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;   <span class="comment">/* Grab the payload that they expect the RFC2833 packet to be received in */</span></div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;   payload = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a8631c44e7160622bcbdc6aea8b449e5f">ast_rtp_codecs_payload_code_tx</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(instance), 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a>);</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;</div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;   rtp-&gt;dtmfmute = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(0, 500000));</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;   rtp-&gt;send_duration = 160;</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> += <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4c3a6d3e3a2ffc5044526e5db91fb6b5">calc_txstamp</a>(rtp, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) * <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a46f52e38712b5b348ad95619f3d104ae">DTMF_SAMPLE_RATE_MS</a>;</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;   rtp-&gt;lastdigitts = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> + rtp-&gt;send_duration;</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;</div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;   <span class="comment">/* Create the actual packet that we will be sending */</span></div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;   rtpheader[0] = htonl((2 &lt;&lt; 30) | (1 &lt;&lt; 23) | (payload &lt;&lt; 16) | (rtp-&gt;seqno));</div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;   rtpheader[1] = htonl(rtp-&gt;lastdigitts);</div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;   rtpheader[2] = htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>);</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;   <span class="comment">/* Actually send the packet */</span></div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;      <span class="keywordtype">int</span> ice;</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;      rtpheader[3] = htonl((<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &lt;&lt; 24) | (0xa &lt;&lt; 16) | (rtp-&gt;send_duration));</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;      res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a>(instance, (<span class="keywordtype">void</span> *) rtpheader, hdrlen + 4, 0, &amp;remote_address, &amp;ice);</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;RTP Transmission error to %s: %s\n&quot;</span>,</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address),</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;            strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;      }</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a>(&amp;remote_address)) {</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Sent RTP DTMF packet to %s%s (type %-2.2d, seq %-6.6d, ts %-6.6u, len %-6.6d)\n&quot;</span>,</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;                <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address),</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;                ice ? <span class="stringliteral">&quot; (via ICE)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;                payload, rtp-&gt;seqno, rtp-&gt;lastdigitts, res - hdrlen);</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;      }</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;      rtp-&gt;seqno++;</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;      rtp-&gt;send_duration += 160;</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;      rtpheader[0] = htonl((2 &lt;&lt; 30) | (payload &lt;&lt; 16) | (rtp-&gt;seqno));</div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;   }</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;   <span class="comment">/* Record that we are in the process of sending a digit and information needed to continue doing so */</span></div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;   rtp-&gt;sending_digit = 1;</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;   rtp-&gt;send_digit = <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>;</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;   rtp-&gt;send_payload = payload;</div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;</div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0376aa2503a185437fab8cb0b7d674fb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * ast_rtp_instance_get_codecs(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the codecs structure of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00727">rtp_engine.c:727</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a8631c44e7160622bcbdc6aea8b449e5f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a8631c44e7160622bcbdc6aea8b449e5f">ast_rtp_codecs_payload_code_tx</a></div><div class="ttdeci">int ast_rtp_codecs_payload_code_tx(struct ast_rtp_codecs *codecs, int asterisk_format, const struct ast_format *format, int code)</div><div class="ttdoc">Retrieve a tx mapped payload type based on whether it is an Asterisk format and the code...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01928">rtp_engine.c:1928</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac963384d2cd5bf0a453061cc6889a44b"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a></div><div class="ttdeci">static int rtp_debug_test_addr(struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">res_rtp_asterisk.c:2746</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4c3a6d3e3a2ffc5044526e5db91fb6b5"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4c3a6d3e3a2ffc5044526e5db91fb6b5">calc_txstamp</a></div><div class="ttdeci">static unsigned int calc_txstamp(struct ast_rtp *rtp, struct timeval *delivery)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03716">res_rtp_asterisk.c:3716</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a46f52e38712b5b348ad95619f3d104ae"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a46f52e38712b5b348ad95619f3d104ae">DTMF_SAMPLE_RATE_MS</a></div><div class="ttdeci">#define DTMF_SAMPLE_RATE_MS</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00135">res_rtp_asterisk.c:135</a></div></div>
<div class="ttc" id="structast__rtp_html_a2eb3b9494c999b0dd38c4d40bfdc55b4"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">ast_rtp::lastts</a></div><div class="ttdeci">unsigned int lastts</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00378">res_rtp_asterisk.c:378</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ade1c64796fc8534818c62a28b95bcd38"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a></div><div class="ttdeci">static int rtp_sendto(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int *ice)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">res_rtp_asterisk.c:3309</a></div></div>
<div class="ttc" id="time_8h_html_aebf04439f206cc509472ce4b6da48a5a"><div class="ttname"><a href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a></div><div class="ttdeci">struct timeval ast_tv(ast_time_t sec, ast_suseconds_t usec)</div><div class="ttdoc">Returns a timeval from sec, usec. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00226">time.h:226</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3cc8001677e3b955b9b5ceb4267a76ec"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a></div><div class="ttdeci">#define AST_RTP_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00266">rtp_engine.h:266</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a04e5f1ed506267067effa89252bb6bd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04e5f1ed506267067effa89252bb6bd4">&#9670;&nbsp;</a></span>ast_rtp_dtmf_compatible()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_dtmf_compatible </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>Neither instance0 nor instance1 are locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08723">8723</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00769">ast_channel_tech()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00716">ast_rtp_instance_get_prop()</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00117">AST_RTP_PROPERTY_DTMF</a>.</p>
<div class="fragment"><div class="line"><a name="l08724"></a><span class="lineno"> 8724</span>&#160;{</div><div class="line"><a name="l08725"></a><span class="lineno"> 8725</span>&#160;   <span class="comment">/* If both sides are not using the same method of DTMF transmission</span></div><div class="line"><a name="l08726"></a><span class="lineno"> 8726</span>&#160;<span class="comment">    * (ie: one is RFC2833, other is INFO... then we can not do direct media.</span></div><div class="line"><a name="l08727"></a><span class="lineno"> 8727</span>&#160;<span class="comment">    * --------------------------------------------------</span></div><div class="line"><a name="l08728"></a><span class="lineno"> 8728</span>&#160;<span class="comment">    * | DTMF Mode |  HAS_DTMF  |  Accepts Begin Frames |</span></div><div class="line"><a name="l08729"></a><span class="lineno"> 8729</span>&#160;<span class="comment">    * |-----------|------------|-----------------------|</span></div><div class="line"><a name="l08730"></a><span class="lineno"> 8730</span>&#160;<span class="comment">    * | Inband    | False      | True                  |</span></div><div class="line"><a name="l08731"></a><span class="lineno"> 8731</span>&#160;<span class="comment">    * | RFC2833   | True       | True                  |</span></div><div class="line"><a name="l08732"></a><span class="lineno"> 8732</span>&#160;<span class="comment">    * | SIP INFO  | False      | False                 |</span></div><div class="line"><a name="l08733"></a><span class="lineno"> 8733</span>&#160;<span class="comment">    * --------------------------------------------------</span></div><div class="line"><a name="l08734"></a><span class="lineno"> 8734</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l08735"></a><span class="lineno"> 8735</span>&#160;   <span class="keywordflow">return</span> (((<a class="code" href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a>(instance0, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914cad56f6f1132d2520c2ad2d593bb06dcad">AST_RTP_PROPERTY_DTMF</a>) != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a>(instance1, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914cad56f6f1132d2520c2ad2d593bb06dcad">AST_RTP_PROPERTY_DTMF</a>)) ||</div><div class="line"><a name="l08736"></a><span class="lineno"> 8736</span>&#160;       (!<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan0)-&gt;send_digit_begin != !<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan1)-&gt;send_digit_begin)) ? 0 : 1);</div><div class="line"><a name="l08737"></a><span class="lineno"> 8737</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914cad56f6f1132d2520c2ad2d593bb06dcad"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914cad56f6f1132d2520c2ad2d593bb06dcad">AST_RTP_PROPERTY_DTMF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00117">rtp_engine.h:117</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2a2d35167e5880fdd5ec8d7df44f18b1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a></div><div class="ttdeci">int ast_rtp_instance_get_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property)</div><div class="ttdoc">Get the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00716">rtp_engine.c:716</a></div></div>
<div class="ttc" id="channel_8h_html_af5dee96d4dcc88a95fce391c22d4d21f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a></div><div class="ttdeci">const struct ast_channel_tech * ast_channel_tech(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00769">channel_internal_api.c:769</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4cf4fc0fc38586fe2f7692549f049b82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cf4fc0fc38586fe2f7692549f049b82">&#9670;&nbsp;</a></span>ast_rtp_dtmf_continuation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_dtmf_continuation </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04209">4209</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03716">calc_txstamp()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00135">DTMF_SAMPLE_RATE_MS</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00378">ast_rtp::lastts</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">rtp_debug_test_addr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">rtp_sendto()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">ast_rtp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;{</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address = { {0,} };</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;   <span class="keywordtype">int</span> hdrlen = 12, res = 0;</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;   <span class="keywordtype">char</span> data[256];</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *rtpheader = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>*)data;</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;   <span class="keywordtype">int</span> ice;</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(instance, &amp;remote_address);</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;   <span class="comment">/* Make sure we know where the other side is so we can send them the packet */</span></div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;remote_address)) {</div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;   }</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;   <span class="comment">/* Actually create the packet we will be sending */</span></div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;   rtpheader[0] = htonl((2 &lt;&lt; 30) | (rtp-&gt;send_payload &lt;&lt; 16) | (rtp-&gt;seqno));</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;   rtpheader[1] = htonl(rtp-&gt;lastdigitts);</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;   rtpheader[2] = htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>);</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;   rtpheader[3] = htonl((rtp-&gt;send_digit &lt;&lt; 24) | (0xa &lt;&lt; 16) | (rtp-&gt;send_duration));</div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;   <span class="comment">/* Boom, send it on out */</span></div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;   res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a>(instance, (<span class="keywordtype">void</span> *) rtpheader, hdrlen + 4, 0, &amp;remote_address, &amp;ice);</div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;RTP Transmission error to %s: %s\n&quot;</span>,</div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address),</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;         strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;   }</div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a>(&amp;remote_address)) {</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Sent RTP DTMF packet to %s%s (type %-2.2d, seq %-6.6d, ts %-6.6u, len %-6.6d)\n&quot;</span>,</div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;             <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address),</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;             ice ? <span class="stringliteral">&quot; (via ICE)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;             rtp-&gt;send_payload, rtp-&gt;seqno, rtp-&gt;lastdigitts, res - hdrlen);</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;   }</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;   <span class="comment">/* And now we increment some values for the next time we swing by */</span></div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;   rtp-&gt;seqno++;</div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;   rtp-&gt;send_duration += 160;</div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> += <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4c3a6d3e3a2ffc5044526e5db91fb6b5">calc_txstamp</a>(rtp, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) * <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a46f52e38712b5b348ad95619f3d104ae">DTMF_SAMPLE_RATE_MS</a>;</div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;</div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac963384d2cd5bf0a453061cc6889a44b"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a></div><div class="ttdeci">static int rtp_debug_test_addr(struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">res_rtp_asterisk.c:2746</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4c3a6d3e3a2ffc5044526e5db91fb6b5"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4c3a6d3e3a2ffc5044526e5db91fb6b5">calc_txstamp</a></div><div class="ttdeci">static unsigned int calc_txstamp(struct ast_rtp *rtp, struct timeval *delivery)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03716">res_rtp_asterisk.c:3716</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a46f52e38712b5b348ad95619f3d104ae"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a46f52e38712b5b348ad95619f3d104ae">DTMF_SAMPLE_RATE_MS</a></div><div class="ttdeci">#define DTMF_SAMPLE_RATE_MS</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00135">res_rtp_asterisk.c:135</a></div></div>
<div class="ttc" id="structast__rtp_html_a2eb3b9494c999b0dd38c4d40bfdc55b4"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">ast_rtp::lastts</a></div><div class="ttdeci">unsigned int lastts</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00378">res_rtp_asterisk.c:378</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ade1c64796fc8534818c62a28b95bcd38"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a></div><div class="ttdeci">static int rtp_sendto(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int *ice)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">res_rtp_asterisk.c:3309</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a81b4a739a9b083819b824e05ac35a187"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81b4a739a9b083819b824e05ac35a187">&#9670;&nbsp;</a></span>ast_rtp_dtmf_end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_dtmf_end </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>digit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04342">4342</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04255">ast_rtp_dtmf_end_with_duration()</a>.</p>
<div class="fragment"><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;{</div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2fc499318ba0179b1e384d6b836b173d">ast_rtp_dtmf_end_with_duration</a>(instance, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, 0);</div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2fc499318ba0179b1e384d6b836b173d"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2fc499318ba0179b1e384d6b836b173d">ast_rtp_dtmf_end_with_duration</a></div><div class="ttdeci">static int ast_rtp_dtmf_end_with_duration(struct ast_rtp_instance *instance, char digit, unsigned int duration)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04255">res_rtp_asterisk.c:4255</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2fc499318ba0179b1e384d6b836b173d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fc499318ba0179b1e384d6b836b173d">&#9670;&nbsp;</a></span>ast_rtp_dtmf_end_with_duration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_dtmf_end_with_duration </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>digit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04255">4255</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02860">ast_debug_rtp</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l04030">ast_rtp_get_rate()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../dc/dd7/smoother_8c_source.html#l00220">ast_smoother_free()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00226">ast_tv()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03716">calc_txstamp()</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00135">DTMF_SAMPLE_RATE_MS</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">ast_rtp::f</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00378">ast_rtp::lastts</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">rtp_debug_test_addr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">rtp_sendto()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04342">ast_rtp_dtmf_end()</a>.</p>
<div class="fragment"><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;{</div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address = { {0,} };</div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;   <span class="keywordtype">int</span> hdrlen = 12, res = -1, i = 0;</div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;   <span class="keywordtype">char</span> data[256];</div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *rtpheader = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>*)data;</div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> measured_samples;</div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;</div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(instance, &amp;remote_address);</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;</div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;   <span class="comment">/* Make sure we know where the remote side is so we can send them the packet we construct */</span></div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;remote_address)) {</div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;   }</div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;</div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;   <span class="comment">/* Convert the given digit to the one we are going to send */</span></div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &lt;= <span class="charliteral">&#39;9&#39;</span>) &amp;&amp; (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &gt;= <span class="charliteral">&#39;0&#39;</span>)) {</div><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;      <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> -= <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> == <span class="charliteral">&#39;*&#39;</span>) {</div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;      <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> = 10;</div><div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> == <span class="charliteral">&#39;#&#39;</span>) {</div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;      <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> = 11;</div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &gt;= <span class="charliteral">&#39;A&#39;</span>) &amp;&amp; (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &lt;= <span class="charliteral">&#39;D&#39;</span>)) {</div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;      <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> = <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> - <span class="charliteral">&#39;A&#39;</span> + 12;</div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &gt;= <span class="charliteral">&#39;a&#39;</span>) &amp;&amp; (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &lt;= <span class="charliteral">&#39;d&#39;</span>)) {</div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;      <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> = <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> - <span class="charliteral">&#39;a&#39;</span> + 12;</div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Don&#39;t know how to represent &#39;%c&#39;\n&quot;</span>, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>);</div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;   }</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;   rtp-&gt;dtmfmute = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(0, 500000));</div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;</div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;   <span class="keywordflow">if</span> (duration &gt; 0 &amp;&amp; (measured_samples = duration * <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) / 1000) &gt; rtp-&gt;send_duration) {</div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(2, <span class="stringliteral">&quot;(%p) RTP adjusting final end duration from %d to %u\n&quot;</span>,</div><div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;         instance, rtp-&gt;send_duration, measured_samples);</div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;      rtp-&gt;send_duration = measured_samples;</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;   }</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;   <span class="comment">/* Construct the packet we are going to send */</span></div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;   rtpheader[1] = htonl(rtp-&gt;lastdigitts);</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;   rtpheader[2] = htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>);</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;   rtpheader[3] = htonl((<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &lt;&lt; 24) | (0xa &lt;&lt; 16) | (rtp-&gt;send_duration));</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;   rtpheader[3] |= htonl((1 &lt;&lt; 23));</div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;</div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;   <span class="comment">/* Send it 3 times, that&#39;s the magical number */</span></div><div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++) {</div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;      <span class="keywordtype">int</span> ice;</div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;</div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;      rtpheader[0] = htonl((2 &lt;&lt; 30) | (rtp-&gt;send_payload &lt;&lt; 16) | (rtp-&gt;seqno));</div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;</div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;      res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a>(instance, (<span class="keywordtype">void</span> *) rtpheader, hdrlen + 4, 0, &amp;remote_address, &amp;ice);</div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;</div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;RTP Transmission error to %s: %s\n&quot;</span>,</div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address),</div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;            strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;      }</div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;</div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a>(&amp;remote_address)) {</div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Sent RTP DTMF packet to %s%s (type %-2.2d, seq %-6.6d, ts %-6.6u, len %-6.6d)\n&quot;</span>,</div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;                <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address),</div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;                ice ? <span class="stringliteral">&quot; (via ICE)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;                rtp-&gt;send_payload, rtp-&gt;seqno, rtp-&gt;lastdigitts, res - hdrlen);</div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;      }</div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;</div><div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;      rtp-&gt;seqno++;</div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;   }</div><div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;   res = 0;</div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;</div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;   <span class="comment">/* Oh and we can&#39;t forget to turn off the stuff that says we are sending DTMF */</span></div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> += <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4c3a6d3e3a2ffc5044526e5db91fb6b5">calc_txstamp</a>(rtp, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) * <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a46f52e38712b5b348ad95619f3d104ae">DTMF_SAMPLE_RATE_MS</a>;</div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;</div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;   <span class="comment">/* Reset the smoother as the delivery time stored in it is now out of date */</span></div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;smoother) {</div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;      <a class="code" href="../../d6/d7f/smoother_8h.html#a6d3b71e0a81af743bae6c33c02b64f1f">ast_smoother_free</a>(rtp-&gt;smoother);</div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;      rtp-&gt;smoother = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;   }</div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;   rtp-&gt;sending_digit = 0;</div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;   rtp-&gt;send_digit = 0;</div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;</div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="smoother_8h_html_a6d3b71e0a81af743bae6c33c02b64f1f"><div class="ttname"><a href="../../d6/d7f/smoother_8h.html#a6d3b71e0a81af743bae6c33c02b64f1f">ast_smoother_free</a></div><div class="ttdeci">void ast_smoother_free(struct ast_smoother *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd7/smoother_8c_source.html#l00220">smoother.c:220</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac963384d2cd5bf0a453061cc6889a44b"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a></div><div class="ttdeci">static int rtp_debug_test_addr(struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">res_rtp_asterisk.c:2746</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga669fb90e123085584d65608ef87b2fe4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a></div><div class="ttdeci">#define ast_debug_rtp(sublevel,...)</div><div class="ttdoc">Log debug level RTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02860">rtp_engine.h:2860</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga85ebb1735a6e9ce14a033b479076aaed"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a></div><div class="ttdeci">int ast_rtp_get_rate(const struct ast_format *format)</div><div class="ttdoc">Retrieve the sample rate of a format according to RTP specifications. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l04030">rtp_engine.c:4030</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4c3a6d3e3a2ffc5044526e5db91fb6b5"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4c3a6d3e3a2ffc5044526e5db91fb6b5">calc_txstamp</a></div><div class="ttdeci">static unsigned int calc_txstamp(struct ast_rtp *rtp, struct timeval *delivery)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03716">res_rtp_asterisk.c:3716</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a46f52e38712b5b348ad95619f3d104ae"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a46f52e38712b5b348ad95619f3d104ae">DTMF_SAMPLE_RATE_MS</a></div><div class="ttdeci">#define DTMF_SAMPLE_RATE_MS</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00135">res_rtp_asterisk.c:135</a></div></div>
<div class="ttc" id="structast__rtp_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">ast_rtp::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">res_rtp_asterisk.c:370</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="structast__rtp_html_a2eb3b9494c999b0dd38c4d40bfdc55b4"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">ast_rtp::lastts</a></div><div class="ttdeci">unsigned int lastts</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00378">res_rtp_asterisk.c:378</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ade1c64796fc8534818c62a28b95bcd38"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a></div><div class="ttdeci">static int rtp_sendto(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int *ice)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">res_rtp_asterisk.c:3309</a></div></div>
<div class="ttc" id="time_8h_html_aebf04439f206cc509472ce4b6da48a5a"><div class="ttname"><a href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a></div><div class="ttdeci">struct timeval ast_tv(ast_time_t sec, ast_suseconds_t usec)</div><div class="ttdoc">Returns a timeval from sec, usec. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00226">time.h:226</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adcfb32f3eef188001b29e20d386a7f6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcfb32f3eef188001b29e20d386a7f6a">&#9670;&nbsp;</a></span>ast_rtp_dtmf_mode_get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6ee">ast_rtp_dtmf_mode</a> ast_rtp_dtmf_mode_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04127">4127</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;{</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;   <span class="keywordflow">return</span> rtp-&gt;dtmfmode;</div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adaa713367fa611b545a92959a5181431"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaa713367fa611b545a92959a5181431">&#9670;&nbsp;</a></span>ast_rtp_dtmf_mode_set()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_dtmf_mode_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6ee">ast_rtp_dtmf_mode</a>&#160;</td>
          <td class="paramname"><em>dtmf_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04119">4119</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;{</div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;   rtp-&gt;dtmfmode = dtmf_mode;</div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afc66b74324f35b79325688b6999981d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc66b74324f35b79325688b6999981d7">&#9670;&nbsp;</a></span>ast_rtp_extension_enable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_extension_enable </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ff">ast_rtp_extension</a>&#160;</td>
          <td class="paramname"><em>extension</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08926">8926</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00546">AST_RTP_EXTENSION_ABS_SEND_TIME</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00548">AST_RTP_EXTENSION_TRANSPORT_WIDE_CC</a>.</p>
<div class="fragment"><div class="line"><a name="l08927"></a><span class="lineno"> 8927</span>&#160;{</div><div class="line"><a name="l08928"></a><span class="lineno"> 8928</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d0/d5a/structextension.html">extension</a>) {</div><div class="line"><a name="l08929"></a><span class="lineno"> 8929</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa2244dfdd646dfd5287d1029c44d1f3f5">AST_RTP_EXTENSION_ABS_SEND_TIME</a>:</div><div class="line"><a name="l08930"></a><span class="lineno"> 8930</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa163f70dc8ad29138217161bca3ac9b90">AST_RTP_EXTENSION_TRANSPORT_WIDE_CC</a>:</div><div class="line"><a name="l08931"></a><span class="lineno"> 8931</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l08932"></a><span class="lineno"> 8932</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l08933"></a><span class="lineno"> 8933</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08934"></a><span class="lineno"> 8934</span>&#160;   }</div><div class="line"><a name="l08935"></a><span class="lineno"> 8935</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_a88677a524d7f3d7201f5d2f773cfc8ffa2244dfdd646dfd5287d1029c44d1f3f5"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa2244dfdd646dfd5287d1029c44d1f3f5">AST_RTP_EXTENSION_ABS_SEND_TIME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00546">rtp_engine.h:546</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a88677a524d7f3d7201f5d2f773cfc8ffa163f70dc8ad29138217161bca3ac9b90"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa163f70dc8ad29138217161bca3ac9b90">AST_RTP_EXTENSION_TRANSPORT_WIDE_CC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00548">rtp_engine.h:548</a></div></div>
<div class="ttc" id="structextension_html"><div class="ttname"><a href="../../d0/d5a/structextension.html">extension</a></div><div class="ttdoc">structure to hold extensions </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00287">res_phoneprov.c:287</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a69bfc919969bcd79dbede3a06c9ed2cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69bfc919969bcd79dbede3a06c9ed2cb">&#9670;&nbsp;</a></span>ast_rtp_fd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_fd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rtcp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08489">8489</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">ast_rtp::s</a>.</p>
<div class="fragment"><div class="line"><a name="l08490"></a><span class="lineno"> 8490</span>&#160;{</div><div class="line"><a name="l08491"></a><span class="lineno"> 8491</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l08492"></a><span class="lineno"> 8492</span>&#160;</div><div class="line"><a name="l08493"></a><span class="lineno"> 8493</span>&#160;   <span class="keywordflow">return</span> rtcp ? (rtp-&gt;rtcp ? rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> : -1) : rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>;</div><div class="line"><a name="l08494"></a><span class="lineno"> 8494</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__rtp_html_a339d22b3e442946380f98ed19e320db2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">ast_rtp::s</a></div><div class="ttdeci">int s</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">res_rtp_asterisk.c:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af12dac69630e202247abd912fb4bb11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af12dac69630e202247abd912fb4bb11d">&#9670;&nbsp;</a></span>ast_rtp_get_cname()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char * ast_rtp_get_cname </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08873">8873</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00375">ast_rtp::cname</a>.</p>
<div class="fragment"><div class="line"><a name="l08874"></a><span class="lineno"> 8874</span>&#160;{</div><div class="line"><a name="l08875"></a><span class="lineno"> 8875</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l08876"></a><span class="lineno"> 8876</span>&#160;</div><div class="line"><a name="l08877"></a><span class="lineno"> 8877</span>&#160;   <span class="keywordflow">return</span> rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a86a6d9392942a9a6df3adaccb271af60">cname</a>;</div><div class="line"><a name="l08878"></a><span class="lineno"> 8878</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="structast__rtp_html_a86a6d9392942a9a6df3adaccb271af60"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a86a6d9392942a9a6df3adaccb271af60">ast_rtp::cname</a></div><div class="ttdeci">char cname[AST_UUID_STR_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00375">res_rtp_asterisk.c:375</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ade81085abaef26273a665997e6693f86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade81085abaef26273a665997e6693f86">&#9670;&nbsp;</a></span>ast_rtp_get_ssrc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int ast_rtp_get_ssrc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08865">8865</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05869">__rtp_find_instance_by_ssrc()</a>.</p>
<div class="fragment"><div class="line"><a name="l08866"></a><span class="lineno"> 8866</span>&#160;{</div><div class="line"><a name="l08867"></a><span class="lineno"> 8867</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l08868"></a><span class="lineno"> 8868</span>&#160;</div><div class="line"><a name="l08869"></a><span class="lineno"> 8869</span>&#160;   <span class="keywordflow">return</span> rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>;</div><div class="line"><a name="l08870"></a><span class="lineno"> 8870</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6703a53a176c9a89128f41c677204e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6703a53a176c9a89128f41c677204e8">&#9670;&nbsp;</a></span>ast_rtp_get_stat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_get_stat </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/db0/structast__rtp__instance__stats.html">ast_rtp_instance_stats</a> *&#160;</td>
          <td class="paramname"><em>stats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378f">ast_rtp_instance_stat</a>&#160;</td>
          <td class="paramname"><em>stat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08671">8671</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00548">ast_rtp_instance_get_channel_id()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00248">AST_RTP_INSTANCE_STAT_CHANNEL_UNIQUEID</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00210">AST_RTP_INSTANCE_STAT_COMBINED_JITTER</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00188">AST_RTP_INSTANCE_STAT_COMBINED_LOSS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00232">AST_RTP_INSTANCE_STAT_COMBINED_RTT</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00224">AST_RTP_INSTANCE_STAT_LOCAL_MAXJITTER</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00202">AST_RTP_INSTANCE_STAT_LOCAL_MAXRXPLOSS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00226">AST_RTP_INSTANCE_STAT_LOCAL_MINJITTER</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00204">AST_RTP_INSTANCE_STAT_LOCAL_MINRXPLOSS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00228">AST_RTP_INSTANCE_STAT_LOCAL_NORMDEVJITTER</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00206">AST_RTP_INSTANCE_STAT_LOCAL_NORMDEVRXPLOSS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00244">AST_RTP_INSTANCE_STAT_LOCAL_SSRC</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00230">AST_RTP_INSTANCE_STAT_LOCAL_STDEVJITTER</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00208">AST_RTP_INSTANCE_STAT_LOCAL_STDEVRXPLOSS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00236">AST_RTP_INSTANCE_STAT_MAX_RTT</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00238">AST_RTP_INSTANCE_STAT_MIN_RTT</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00240">AST_RTP_INSTANCE_STAT_NORMDEVRTT</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00216">AST_RTP_INSTANCE_STAT_REMOTE_MAXJITTER</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00194">AST_RTP_INSTANCE_STAT_REMOTE_MAXRXPLOSS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00218">AST_RTP_INSTANCE_STAT_REMOTE_MINJITTER</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00196">AST_RTP_INSTANCE_STAT_REMOTE_MINRXPLOSS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00220">AST_RTP_INSTANCE_STAT_REMOTE_NORMDEVJITTER</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00198">AST_RTP_INSTANCE_STAT_REMOTE_NORMDEVRXPLOSS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00246">AST_RTP_INSTANCE_STAT_REMOTE_SSRC</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00222">AST_RTP_INSTANCE_STAT_REMOTE_STDEVJITTER</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00200">AST_RTP_INSTANCE_STAT_REMOTE_STDEVRXPLOSS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00234">AST_RTP_INSTANCE_STAT_RTT</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00186">AST_RTP_INSTANCE_STAT_RXCOUNT</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00214">AST_RTP_INSTANCE_STAT_RXJITTER</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00252">AST_RTP_INSTANCE_STAT_RXOCTETCOUNT</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00192">AST_RTP_INSTANCE_STAT_RXPLOSS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00242">AST_RTP_INSTANCE_STAT_STDEVRTT</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00184">AST_RTP_INSTANCE_STAT_TXCOUNT</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00212">AST_RTP_INSTANCE_STAT_TXJITTER</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00250">AST_RTP_INSTANCE_STAT_TXOCTETCOUNT</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00190">AST_RTP_INSTANCE_STAT_TXPLOSS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00433">AST_RTP_STAT_SET</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00441">AST_RTP_STAT_STRCPY</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00449">AST_RTP_STAT_TERMINATOR</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00426">ast_rtp_instance_stats::channel_uniqueid</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00384">ast_rtp_instance_stats::local_maxjitter</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00404">ast_rtp_instance_stats::local_maxrxploss</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00386">ast_rtp_instance_stats::local_minjitter</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00406">ast_rtp_instance_stats::local_minrxploss</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00388">ast_rtp_instance_stats::local_normdevjitter</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00408">ast_rtp_instance_stats::local_normdevrxploss</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00422">ast_rtp_instance_stats::local_ssrc</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00390">ast_rtp_instance_stats::local_stdevjitter</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00410">ast_rtp_instance_stats::local_stdevrxploss</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00414">ast_rtp_instance_stats::maxrtt</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00416">ast_rtp_instance_stats::minrtt</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00418">ast_rtp_instance_stats::normdevrtt</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00376">ast_rtp_instance_stats::remote_maxjitter</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00396">ast_rtp_instance_stats::remote_maxrxploss</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00378">ast_rtp_instance_stats::remote_minjitter</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00398">ast_rtp_instance_stats::remote_minrxploss</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00380">ast_rtp_instance_stats::remote_normdevjitter</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00400">ast_rtp_instance_stats::remote_normdevrxploss</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00424">ast_rtp_instance_stats::remote_ssrc</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00382">ast_rtp_instance_stats::remote_stdevjitter</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00402">ast_rtp_instance_stats::remote_stdevrxploss</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00412">ast_rtp_instance_stats::rtt</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00370">ast_rtp_instance_stats::rxcount</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00374">ast_rtp_instance_stats::rxjitter</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00430">ast_rtp_instance_stats::rxoctetcount</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00394">ast_rtp_instance_stats::rxploss</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00420">ast_rtp_instance_stats::stdevrtt</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">ast_rtp::themssrc</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00368">ast_rtp_instance_stats::txcount</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00372">ast_rtp_instance_stats::txjitter</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00428">ast_rtp_instance_stats::txoctetcount</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00392">ast_rtp_instance_stats::txploss</a>.</p>
<div class="fragment"><div class="line"><a name="l08672"></a><span class="lineno"> 8672</span>&#160;{</div><div class="line"><a name="l08673"></a><span class="lineno"> 8673</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l08674"></a><span class="lineno"> 8674</span>&#160;</div><div class="line"><a name="l08675"></a><span class="lineno"> 8675</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;rtcp) {</div><div class="line"><a name="l08676"></a><span class="lineno"> 8676</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08677"></a><span class="lineno"> 8677</span>&#160;   }</div><div class="line"><a name="l08678"></a><span class="lineno"> 8678</span>&#160;</div><div class="line"><a name="l08679"></a><span class="lineno"> 8679</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa7e21881707b05783325237f757da400d">AST_RTP_INSTANCE_STAT_TXCOUNT</a>, -1, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a887918839240a36d118b4e1cb46a4de9">txcount</a>, rtp-&gt;txcount);</div><div class="line"><a name="l08680"></a><span class="lineno"> 8680</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faf9833527fa121ab3fe13a031ef0dc8bb">AST_RTP_INSTANCE_STAT_RXCOUNT</a>, -1, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a066dafb1cdc02b25e6c2329ef7e7a810">rxcount</a>, rtp-&gt;rxcount);</div><div class="line"><a name="l08681"></a><span class="lineno"> 8681</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa598fbd5da5239abdb7ca20fcdbbf0f52">AST_RTP_INSTANCE_STAT_TXOCTETCOUNT</a>, -1, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aed963fd645cea41f8f9a7dd144810204">txoctetcount</a>, rtp-&gt;txoctetcount);</div><div class="line"><a name="l08682"></a><span class="lineno"> 8682</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faf18df18b3ddc488ca36e2881327f126c">AST_RTP_INSTANCE_STAT_RXOCTETCOUNT</a>, -1, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a6755911cdc9335fc23089602dbbcd048">rxoctetcount</a>, rtp-&gt;rxoctetcount);</div><div class="line"><a name="l08683"></a><span class="lineno"> 8683</span>&#160;</div><div class="line"><a name="l08684"></a><span class="lineno"> 8684</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa28feae8db7fc705c4a304f03add9261f">AST_RTP_INSTANCE_STAT_TXPLOSS</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518">AST_RTP_INSTANCE_STAT_COMBINED_LOSS</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a934ff2437b6705676a1f8fb9223e8e9b">txploss</a>, rtp-&gt;rtcp-&gt;reported_lost);</div><div class="line"><a name="l08685"></a><span class="lineno"> 8685</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa3b435045f89ab3080c4efa3b0024d708">AST_RTP_INSTANCE_STAT_RXPLOSS</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518">AST_RTP_INSTANCE_STAT_COMBINED_LOSS</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a754403af0ba6403237fadb9b6294ca5f">rxploss</a>, rtp-&gt;rtcp-&gt;expected_prior - rtp-&gt;rtcp-&gt;received_prior);</div><div class="line"><a name="l08686"></a><span class="lineno"> 8686</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa051552c10106f9842cc0f0af9070eaf8">AST_RTP_INSTANCE_STAT_REMOTE_MAXRXPLOSS</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518">AST_RTP_INSTANCE_STAT_COMBINED_LOSS</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aa102598d55cb66a61cece8e3033e5352">remote_maxrxploss</a>, rtp-&gt;rtcp-&gt;reported_maxlost);</div><div class="line"><a name="l08687"></a><span class="lineno"> 8687</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa52a80d2d3921a621b735306de3586f91">AST_RTP_INSTANCE_STAT_REMOTE_MINRXPLOSS</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518">AST_RTP_INSTANCE_STAT_COMBINED_LOSS</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a3a851bbeea9961c987cbc8d3d3a365bd">remote_minrxploss</a>, rtp-&gt;rtcp-&gt;reported_minlost);</div><div class="line"><a name="l08688"></a><span class="lineno"> 8688</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa0458c464f08ee0c12fe23cbe0061f1f3">AST_RTP_INSTANCE_STAT_REMOTE_NORMDEVRXPLOSS</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518">AST_RTP_INSTANCE_STAT_COMBINED_LOSS</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a8f7c0fb630cef59062f987730a17df71">remote_normdevrxploss</a>, rtp-&gt;rtcp-&gt;reported_normdev_lost);</div><div class="line"><a name="l08689"></a><span class="lineno"> 8689</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa7820ca4ac4c35193c994910f4b8ce099">AST_RTP_INSTANCE_STAT_REMOTE_STDEVRXPLOSS</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518">AST_RTP_INSTANCE_STAT_COMBINED_LOSS</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a21f14570a0860de7863be4f0f16e8e4b">remote_stdevrxploss</a>, rtp-&gt;rtcp-&gt;reported_stdev_lost);</div><div class="line"><a name="l08690"></a><span class="lineno"> 8690</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa0424f7fac3b20960f3d1ceead8b3736f">AST_RTP_INSTANCE_STAT_LOCAL_MAXRXPLOSS</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518">AST_RTP_INSTANCE_STAT_COMBINED_LOSS</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a6c8b04702bbcf8c030d6c16e27e7bd1c">local_maxrxploss</a>, rtp-&gt;rtcp-&gt;maxrxlost);</div><div class="line"><a name="l08691"></a><span class="lineno"> 8691</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa9af41b78c3a956aa2cd02893ac52bd31">AST_RTP_INSTANCE_STAT_LOCAL_MINRXPLOSS</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518">AST_RTP_INSTANCE_STAT_COMBINED_LOSS</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a2c14b23dc2a76aa9ae9a9de210527eb4">local_minrxploss</a>, rtp-&gt;rtcp-&gt;minrxlost);</div><div class="line"><a name="l08692"></a><span class="lineno"> 8692</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa734bf22b5bd29ac00b48960e5429dd7c">AST_RTP_INSTANCE_STAT_LOCAL_NORMDEVRXPLOSS</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518">AST_RTP_INSTANCE_STAT_COMBINED_LOSS</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a63bee783a421d71165058889b433a9ab">local_normdevrxploss</a>, rtp-&gt;rtcp-&gt;normdev_rxlost);</div><div class="line"><a name="l08693"></a><span class="lineno"> 8693</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa78ba2b9ddd028bbaec6d15b229ae4090">AST_RTP_INSTANCE_STAT_LOCAL_STDEVRXPLOSS</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518">AST_RTP_INSTANCE_STAT_COMBINED_LOSS</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a9dc97ff0394d0d099c6291451e07ea73">local_stdevrxploss</a>, rtp-&gt;rtcp-&gt;stdev_rxlost);</div><div class="line"><a name="l08694"></a><span class="lineno"> 8694</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a48390c2a2c05bc6ecd3c5328a9789846">AST_RTP_STAT_TERMINATOR</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518">AST_RTP_INSTANCE_STAT_COMBINED_LOSS</a>);</div><div class="line"><a name="l08695"></a><span class="lineno"> 8695</span>&#160;</div><div class="line"><a name="l08696"></a><span class="lineno"> 8696</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa70f56290fbd6b3f47b803ba2e22c1bf">AST_RTP_INSTANCE_STAT_TXJITTER</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268">AST_RTP_INSTANCE_STAT_COMBINED_JITTER</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aadfdc9692fcc3eb56f7c94f089db163b">txjitter</a>, rtp-&gt;rxjitter);</div><div class="line"><a name="l08697"></a><span class="lineno"> 8697</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa98925d5d0174c536dd76f24e48f9778b">AST_RTP_INSTANCE_STAT_RXJITTER</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268">AST_RTP_INSTANCE_STAT_COMBINED_JITTER</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a80552fd3f7f852d51e944dc4105da800">rxjitter</a>, rtp-&gt;rtcp-&gt;reported_jitter / (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) 65536.0);</div><div class="line"><a name="l08698"></a><span class="lineno"> 8698</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa3b6c48219fe462fd8c0a629a89588774">AST_RTP_INSTANCE_STAT_REMOTE_MAXJITTER</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268">AST_RTP_INSTANCE_STAT_COMBINED_JITTER</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aad58a04a0dc44700d786791b27fc40b6">remote_maxjitter</a>, rtp-&gt;rtcp-&gt;reported_maxjitter);</div><div class="line"><a name="l08699"></a><span class="lineno"> 8699</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa13767863d6692e4ee916ac3b1eead444">AST_RTP_INSTANCE_STAT_REMOTE_MINJITTER</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268">AST_RTP_INSTANCE_STAT_COMBINED_JITTER</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a21f3d3372a6100f94cc23e62886131ba">remote_minjitter</a>, rtp-&gt;rtcp-&gt;reported_minjitter);</div><div class="line"><a name="l08700"></a><span class="lineno"> 8700</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5c3b07839bbb7c209795484fd24b61b">AST_RTP_INSTANCE_STAT_REMOTE_NORMDEVJITTER</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268">AST_RTP_INSTANCE_STAT_COMBINED_JITTER</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#ad742aaf83d710b381c462677919a8617">remote_normdevjitter</a>, rtp-&gt;rtcp-&gt;reported_normdev_jitter);</div><div class="line"><a name="l08701"></a><span class="lineno"> 8701</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa3d926f26ea64a4c18da45bb281ff49c4">AST_RTP_INSTANCE_STAT_REMOTE_STDEVJITTER</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268">AST_RTP_INSTANCE_STAT_COMBINED_JITTER</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aff4ec25e589bed0b47f2fa58e9b020f2">remote_stdevjitter</a>, rtp-&gt;rtcp-&gt;reported_stdev_jitter);</div><div class="line"><a name="l08702"></a><span class="lineno"> 8702</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa3d2cf838062f11fbd5a2d5bf8cdff4ab">AST_RTP_INSTANCE_STAT_LOCAL_MAXJITTER</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268">AST_RTP_INSTANCE_STAT_COMBINED_JITTER</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#adbaefd95043efe7b49f3190ffeff40fb">local_maxjitter</a>, rtp-&gt;rtcp-&gt;maxrxjitter);</div><div class="line"><a name="l08703"></a><span class="lineno"> 8703</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fab6e7cc60f874d9780e98f588aff09e89">AST_RTP_INSTANCE_STAT_LOCAL_MINJITTER</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268">AST_RTP_INSTANCE_STAT_COMBINED_JITTER</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a7f3a0b0d420584f13574e0741c4f96ab">local_minjitter</a>, rtp-&gt;rtcp-&gt;minrxjitter);</div><div class="line"><a name="l08704"></a><span class="lineno"> 8704</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faf8620b7a67a170c46f82b7f10225bd63">AST_RTP_INSTANCE_STAT_LOCAL_NORMDEVJITTER</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268">AST_RTP_INSTANCE_STAT_COMBINED_JITTER</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a3f7aced2b7c50be99b2b27c36f1c3557">local_normdevjitter</a>, rtp-&gt;rtcp-&gt;normdev_rxjitter);</div><div class="line"><a name="l08705"></a><span class="lineno"> 8705</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fae31462a9e564e9b68cefad1f202c7766">AST_RTP_INSTANCE_STAT_LOCAL_STDEVJITTER</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268">AST_RTP_INSTANCE_STAT_COMBINED_JITTER</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#ac0a16b9afb840b589358fec8953ba092">local_stdevjitter</a>, rtp-&gt;rtcp-&gt;stdev_rxjitter);</div><div class="line"><a name="l08706"></a><span class="lineno"> 8706</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a48390c2a2c05bc6ecd3c5328a9789846">AST_RTP_STAT_TERMINATOR</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268">AST_RTP_INSTANCE_STAT_COMBINED_JITTER</a>);</div><div class="line"><a name="l08707"></a><span class="lineno"> 8707</span>&#160;</div><div class="line"><a name="l08708"></a><span class="lineno"> 8708</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faf0a01315f5ec1ace6ef3fddb88167572">AST_RTP_INSTANCE_STAT_RTT</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fae61702d25f656069ccc9ba288b3b4dc7">AST_RTP_INSTANCE_STAT_COMBINED_RTT</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#abc953dca5930a67736d6cd8f72353794">rtt</a>, rtp-&gt;rtcp-&gt;rtt);</div><div class="line"><a name="l08709"></a><span class="lineno"> 8709</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa2eb553818d7c2cccece49155f135164b">AST_RTP_INSTANCE_STAT_MAX_RTT</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fae61702d25f656069ccc9ba288b3b4dc7">AST_RTP_INSTANCE_STAT_COMBINED_RTT</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#ad9e0112e5a3834937c4f84604c175ba6">maxrtt</a>, rtp-&gt;rtcp-&gt;maxrtt);</div><div class="line"><a name="l08710"></a><span class="lineno"> 8710</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa1aeb8bfd385691e82112aa836b678242">AST_RTP_INSTANCE_STAT_MIN_RTT</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fae61702d25f656069ccc9ba288b3b4dc7">AST_RTP_INSTANCE_STAT_COMBINED_RTT</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aa5e4ba49724f6bb86be553f4c823b510">minrtt</a>, rtp-&gt;rtcp-&gt;minrtt);</div><div class="line"><a name="l08711"></a><span class="lineno"> 8711</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fae6640f44b7c5142959fd962f8c1e11ae">AST_RTP_INSTANCE_STAT_NORMDEVRTT</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fae61702d25f656069ccc9ba288b3b4dc7">AST_RTP_INSTANCE_STAT_COMBINED_RTT</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a41960a911bf90300e198a29deac4a02f">normdevrtt</a>, rtp-&gt;rtcp-&gt;normdevrtt);</div><div class="line"><a name="l08712"></a><span class="lineno"> 8712</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa7f7b1fb77e7ea51318c69eac610ab874">AST_RTP_INSTANCE_STAT_STDEVRTT</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fae61702d25f656069ccc9ba288b3b4dc7">AST_RTP_INSTANCE_STAT_COMBINED_RTT</a>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a484c5279646a0804e4beba6b3f0828c9">stdevrtt</a>, rtp-&gt;rtcp-&gt;stdevrtt);</div><div class="line"><a name="l08713"></a><span class="lineno"> 8713</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a48390c2a2c05bc6ecd3c5328a9789846">AST_RTP_STAT_TERMINATOR</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fae61702d25f656069ccc9ba288b3b4dc7">AST_RTP_INSTANCE_STAT_COMBINED_RTT</a>);</div><div class="line"><a name="l08714"></a><span class="lineno"> 8714</span>&#160;</div><div class="line"><a name="l08715"></a><span class="lineno"> 8715</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa038ce8bbd3a0f5663deced5625cb32e">AST_RTP_INSTANCE_STAT_LOCAL_SSRC</a>, -1, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a345269c0d57add15c919b781d140e011">local_ssrc</a>, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>);</div><div class="line"><a name="l08716"></a><span class="lineno"> 8716</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faf9c51f48bae504be2f9af9f4e646533e">AST_RTP_INSTANCE_STAT_REMOTE_SSRC</a>, -1, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a052c95f741f3e25e6ab9217a01affb53">remote_ssrc</a>, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">themssrc</a>);</div><div class="line"><a name="l08717"></a><span class="lineno"> 8717</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#aa78000d3ba1e36cd56d6f1a9d436eac5">AST_RTP_STAT_STRCPY</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa288f60e5b61bdbe925cc98f933c0adcf">AST_RTP_INSTANCE_STAT_CHANNEL_UNIQUEID</a>, -1, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aeedb7802e580cf4c11d7af4c16ce04bd">channel_uniqueid</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#aedb3ea08a82c48e8817dd7458319d22f">ast_rtp_instance_get_channel_id</a>(instance));</div><div class="line"><a name="l08718"></a><span class="lineno"> 8718</span>&#160;</div><div class="line"><a name="l08719"></a><span class="lineno"> 8719</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08720"></a><span class="lineno"> 8720</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa1aeb8bfd385691e82112aa836b678242"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa1aeb8bfd385691e82112aa836b678242">AST_RTP_INSTANCE_STAT_MIN_RTT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00238">rtp_engine.h:238</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a63bee783a421d71165058889b433a9ab"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a63bee783a421d71165058889b433a9ab">ast_rtp_instance_stats::local_normdevrxploss</a></div><div class="ttdeci">double local_normdevrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00408">rtp_engine.h:408</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a2c14b23dc2a76aa9ae9a9de210527eb4"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a2c14b23dc2a76aa9ae9a9de210527eb4">ast_rtp_instance_stats::local_minrxploss</a></div><div class="ttdeci">double local_minrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00406">rtp_engine.h:406</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a7f3a0b0d420584f13574e0741c4f96ab"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a7f3a0b0d420584f13574e0741c4f96ab">ast_rtp_instance_stats::local_minjitter</a></div><div class="ttdeci">double local_minjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00386">rtp_engine.h:386</a></div></div>
<div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa051552c10106f9842cc0f0af9070eaf8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa051552c10106f9842cc0f0af9070eaf8">AST_RTP_INSTANCE_STAT_REMOTE_MAXRXPLOSS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00194">rtp_engine.h:194</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378faf9c51f48bae504be2f9af9f4e646533e"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faf9c51f48bae504be2f9af9f4e646533e">AST_RTP_INSTANCE_STAT_REMOTE_SSRC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00246">rtp_engine.h:246</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa3b435045f89ab3080c4efa3b0024d708"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa3b435045f89ab3080c4efa3b0024d708">AST_RTP_INSTANCE_STAT_RXPLOSS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00192">rtp_engine.h:192</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa78ba2b9ddd028bbaec6d15b229ae4090"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa78ba2b9ddd028bbaec6d15b229ae4090">AST_RTP_INSTANCE_STAT_LOCAL_STDEVRXPLOSS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00208">rtp_engine.h:208</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_aa78000d3ba1e36cd56d6f1a9d436eac5"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#aa78000d3ba1e36cd56d6f1a9d436eac5">AST_RTP_STAT_STRCPY</a></div><div class="ttdeci">#define AST_RTP_STAT_STRCPY(current_stat, combined, placement, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00441">rtp_engine.h:441</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378faf0a01315f5ec1ace6ef3fddb88167572"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faf0a01315f5ec1ace6ef3fddb88167572">AST_RTP_INSTANCE_STAT_RTT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00234">rtp_engine.h:234</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_ad742aaf83d710b381c462677919a8617"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#ad742aaf83d710b381c462677919a8617">ast_rtp_instance_stats::remote_normdevjitter</a></div><div class="ttdeci">double remote_normdevjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00380">rtp_engine.h:380</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a41960a911bf90300e198a29deac4a02f"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a41960a911bf90300e198a29deac4a02f">ast_rtp_instance_stats::normdevrtt</a></div><div class="ttdeci">double normdevrtt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00418">rtp_engine.h:418</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a6c8b04702bbcf8c030d6c16e27e7bd1c"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a6c8b04702bbcf8c030d6c16e27e7bd1c">ast_rtp_instance_stats::local_maxrxploss</a></div><div class="ttdeci">double local_maxrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00404">rtp_engine.h:404</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_aff4ec25e589bed0b47f2fa58e9b020f2"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#aff4ec25e589bed0b47f2fa58e9b020f2">ast_rtp_instance_stats::remote_stdevjitter</a></div><div class="ttdeci">double remote_stdevjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00382">rtp_engine.h:382</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a887918839240a36d118b4e1cb46a4de9"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a887918839240a36d118b4e1cb46a4de9">ast_rtp_instance_stats::txcount</a></div><div class="ttdeci">unsigned int txcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00368">rtp_engine.h:368</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa98925d5d0174c536dd76f24e48f9778b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa98925d5d0174c536dd76f24e48f9778b">AST_RTP_INSTANCE_STAT_RXJITTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00214">rtp_engine.h:214</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa598fbd5da5239abdb7ca20fcdbbf0f52"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa598fbd5da5239abdb7ca20fcdbbf0f52">AST_RTP_INSTANCE_STAT_TXOCTETCOUNT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00250">rtp_engine.h:250</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378faf18df18b3ddc488ca36e2881327f126c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faf18df18b3ddc488ca36e2881327f126c">AST_RTP_INSTANCE_STAT_RXOCTETCOUNT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00252">rtp_engine.h:252</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa52a80d2d3921a621b735306de3586f91"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa52a80d2d3921a621b735306de3586f91">AST_RTP_INSTANCE_STAT_REMOTE_MINRXPLOSS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00196">rtp_engine.h:196</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a754403af0ba6403237fadb9b6294ca5f"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a754403af0ba6403237fadb9b6294ca5f">ast_rtp_instance_stats::rxploss</a></div><div class="ttdeci">unsigned int rxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00394">rtp_engine.h:394</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_abc953dca5930a67736d6cd8f72353794"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#abc953dca5930a67736d6cd8f72353794">ast_rtp_instance_stats::rtt</a></div><div class="ttdeci">double rtt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00412">rtp_engine.h:412</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268">AST_RTP_INSTANCE_STAT_COMBINED_JITTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00210">rtp_engine.h:210</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a21f3d3372a6100f94cc23e62886131ba"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a21f3d3372a6100f94cc23e62886131ba">ast_rtp_instance_stats::remote_minjitter</a></div><div class="ttdeci">double remote_minjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00378">rtp_engine.h:378</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378faf9833527fa121ab3fe13a031ef0dc8bb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faf9833527fa121ab3fe13a031ef0dc8bb">AST_RTP_INSTANCE_STAT_RXCOUNT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00186">rtp_engine.h:186</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a484c5279646a0804e4beba6b3f0828c9"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a484c5279646a0804e4beba6b3f0828c9">ast_rtp_instance_stats::stdevrtt</a></div><div class="ttdeci">double stdevrtt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00420">rtp_engine.h:420</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_aa5e4ba49724f6bb86be553f4c823b510"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#aa5e4ba49724f6bb86be553f4c823b510">ast_rtp_instance_stats::minrtt</a></div><div class="ttdeci">double minrtt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00416">rtp_engine.h:416</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378faf8620b7a67a170c46f82b7f10225bd63"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faf8620b7a67a170c46f82b7f10225bd63">AST_RTP_INSTANCE_STAT_LOCAL_NORMDEVJITTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00228">rtp_engine.h:228</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa7f7b1fb77e7ea51318c69eac610ab874"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa7f7b1fb77e7ea51318c69eac610ab874">AST_RTP_INSTANCE_STAT_STDEVRTT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00242">rtp_engine.h:242</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518">AST_RTP_INSTANCE_STAT_COMBINED_LOSS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00188">rtp_engine.h:188</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa3d2cf838062f11fbd5a2d5bf8cdff4ab"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa3d2cf838062f11fbd5a2d5bf8cdff4ab">AST_RTP_INSTANCE_STAT_LOCAL_MAXJITTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00224">rtp_engine.h:224</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa3b6c48219fe462fd8c0a629a89588774"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa3b6c48219fe462fd8c0a629a89588774">AST_RTP_INSTANCE_STAT_REMOTE_MAXJITTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00216">rtp_engine.h:216</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fae6640f44b7c5142959fd962f8c1e11ae"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fae6640f44b7c5142959fd962f8c1e11ae">AST_RTP_INSTANCE_STAT_NORMDEVRTT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00240">rtp_engine.h:240</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_aedb3ea08a82c48e8817dd7458319d22f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#aedb3ea08a82c48e8817dd7458319d22f">ast_rtp_instance_get_channel_id</a></div><div class="ttdeci">const char * ast_rtp_instance_get_channel_id(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the unique ID of the channel that owns this RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00548">rtp_engine.c:548</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa28feae8db7fc705c4a304f03add9261f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa28feae8db7fc705c4a304f03add9261f">AST_RTP_INSTANCE_STAT_TXPLOSS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00190">rtp_engine.h:190</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa0458c464f08ee0c12fe23cbe0061f1f3"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa0458c464f08ee0c12fe23cbe0061f1f3">AST_RTP_INSTANCE_STAT_REMOTE_NORMDEVRXPLOSS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00198">rtp_engine.h:198</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_aad58a04a0dc44700d786791b27fc40b6"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#aad58a04a0dc44700d786791b27fc40b6">ast_rtp_instance_stats::remote_maxjitter</a></div><div class="ttdeci">double remote_maxjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00376">rtp_engine.h:376</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa2eb553818d7c2cccece49155f135164b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa2eb553818d7c2cccece49155f135164b">AST_RTP_INSTANCE_STAT_MAX_RTT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00236">rtp_engine.h:236</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fae61702d25f656069ccc9ba288b3b4dc7"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fae61702d25f656069ccc9ba288b3b4dc7">AST_RTP_INSTANCE_STAT_COMBINED_RTT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00232">rtp_engine.h:232</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa0424f7fac3b20960f3d1ceead8b3736f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa0424f7fac3b20960f3d1ceead8b3736f">AST_RTP_INSTANCE_STAT_LOCAL_MAXRXPLOSS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00202">rtp_engine.h:202</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_aeedb7802e580cf4c11d7af4c16ce04bd"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#aeedb7802e580cf4c11d7af4c16ce04bd">ast_rtp_instance_stats::channel_uniqueid</a></div><div class="ttdeci">char channel_uniqueid[MAX_CHANNEL_ID]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00426">rtp_engine.h:426</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a9dc97ff0394d0d099c6291451e07ea73"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a9dc97ff0394d0d099c6291451e07ea73">ast_rtp_instance_stats::local_stdevrxploss</a></div><div class="ttdeci">double local_stdevrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00410">rtp_engine.h:410</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_adbaefd95043efe7b49f3190ffeff40fb"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#adbaefd95043efe7b49f3190ffeff40fb">ast_rtp_instance_stats::local_maxjitter</a></div><div class="ttdeci">double local_maxjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00384">rtp_engine.h:384</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_aed963fd645cea41f8f9a7dd144810204"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#aed963fd645cea41f8f9a7dd144810204">ast_rtp_instance_stats::txoctetcount</a></div><div class="ttdeci">unsigned int txoctetcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00428">rtp_engine.h:428</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a8f7c0fb630cef59062f987730a17df71"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a8f7c0fb630cef59062f987730a17df71">ast_rtp_instance_stats::remote_normdevrxploss</a></div><div class="ttdeci">double remote_normdevrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00400">rtp_engine.h:400</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a066dafb1cdc02b25e6c2329ef7e7a810"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a066dafb1cdc02b25e6c2329ef7e7a810">ast_rtp_instance_stats::rxcount</a></div><div class="ttdeci">unsigned int rxcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00370">rtp_engine.h:370</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_aa102598d55cb66a61cece8e3033e5352"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#aa102598d55cb66a61cece8e3033e5352">ast_rtp_instance_stats::remote_maxrxploss</a></div><div class="ttdeci">double remote_maxrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00396">rtp_engine.h:396</a></div></div>
<div class="ttc" id="structast__rtp_html_afe92c8ff0d37afbf84f8715f4144ca27"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">ast_rtp::themssrc</a></div><div class="ttdeci">unsigned int themssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">res_rtp_asterisk.c:376</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378faa5c3b07839bbb7c209795484fd24b61b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5c3b07839bbb7c209795484fd24b61b">AST_RTP_INSTANCE_STAT_REMOTE_NORMDEVJITTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00220">rtp_engine.h:220</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_ad9e0112e5a3834937c4f84604c175ba6"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#ad9e0112e5a3834937c4f84604c175ba6">ast_rtp_instance_stats::maxrtt</a></div><div class="ttdeci">double maxrtt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00414">rtp_engine.h:414</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a6755911cdc9335fc23089602dbbcd048"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a6755911cdc9335fc23089602dbbcd048">ast_rtp_instance_stats::rxoctetcount</a></div><div class="ttdeci">unsigned int rxoctetcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00430">rtp_engine.h:430</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa7820ca4ac4c35193c994910f4b8ce099"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa7820ca4ac4c35193c994910f4b8ce099">AST_RTP_INSTANCE_STAT_REMOTE_STDEVRXPLOSS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00200">rtp_engine.h:200</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a345269c0d57add15c919b781d140e011"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a345269c0d57add15c919b781d140e011">ast_rtp_instance_stats::local_ssrc</a></div><div class="ttdeci">unsigned int local_ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00422">rtp_engine.h:422</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fab6e7cc60f874d9780e98f588aff09e89"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fab6e7cc60f874d9780e98f588aff09e89">AST_RTP_INSTANCE_STAT_LOCAL_MINJITTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00226">rtp_engine.h:226</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378faa70f56290fbd6b3f47b803ba2e22c1bf"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa70f56290fbd6b3f47b803ba2e22c1bf">AST_RTP_INSTANCE_STAT_TXJITTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00212">rtp_engine.h:212</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa3d926f26ea64a4c18da45bb281ff49c4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa3d926f26ea64a4c18da45bb281ff49c4">AST_RTP_INSTANCE_STAT_REMOTE_STDEVJITTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00222">rtp_engine.h:222</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fae31462a9e564e9b68cefad1f202c7766"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fae31462a9e564e9b68cefad1f202c7766">AST_RTP_INSTANCE_STAT_LOCAL_STDEVJITTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00230">rtp_engine.h:230</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a934ff2437b6705676a1f8fb9223e8e9b"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a934ff2437b6705676a1f8fb9223e8e9b">ast_rtp_instance_stats::txploss</a></div><div class="ttdeci">unsigned int txploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00392">rtp_engine.h:392</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_aadfdc9692fcc3eb56f7c94f089db163b"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#aadfdc9692fcc3eb56f7c94f089db163b">ast_rtp_instance_stats::txjitter</a></div><div class="ttdeci">double txjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00372">rtp_engine.h:372</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_ac0a16b9afb840b589358fec8953ba092"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#ac0a16b9afb840b589358fec8953ba092">ast_rtp_instance_stats::local_stdevjitter</a></div><div class="ttdeci">double local_stdevjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00390">rtp_engine.h:390</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa7e21881707b05783325237f757da400d"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa7e21881707b05783325237f757da400d">AST_RTP_INSTANCE_STAT_TXCOUNT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00184">rtp_engine.h:184</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa9af41b78c3a956aa2cd02893ac52bd31"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa9af41b78c3a956aa2cd02893ac52bd31">AST_RTP_INSTANCE_STAT_LOCAL_MINRXPLOSS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00204">rtp_engine.h:204</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a3a851bbeea9961c987cbc8d3d3a365bd"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a3a851bbeea9961c987cbc8d3d3a365bd">ast_rtp_instance_stats::remote_minrxploss</a></div><div class="ttdeci">double remote_minrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00398">rtp_engine.h:398</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af32c6d573106a665c2d6a62c41757c07"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af32c6d573106a665c2d6a62c41757c07">AST_RTP_STAT_SET</a></div><div class="ttdeci">#define AST_RTP_STAT_SET(current_stat, combined, placement, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00433">rtp_engine.h:433</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a48390c2a2c05bc6ecd3c5328a9789846"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a48390c2a2c05bc6ecd3c5328a9789846">AST_RTP_STAT_TERMINATOR</a></div><div class="ttdeci">#define AST_RTP_STAT_TERMINATOR(combined)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00449">rtp_engine.h:449</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378faa038ce8bbd3a0f5663deced5625cb32e"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa038ce8bbd3a0f5663deced5625cb32e">AST_RTP_INSTANCE_STAT_LOCAL_SSRC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00244">rtp_engine.h:244</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa734bf22b5bd29ac00b48960e5429dd7c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa734bf22b5bd29ac00b48960e5429dd7c">AST_RTP_INSTANCE_STAT_LOCAL_NORMDEVRXPLOSS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00206">rtp_engine.h:206</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a21f14570a0860de7863be4f0f16e8e4b"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a21f14570a0860de7863be4f0f16e8e4b">ast_rtp_instance_stats::remote_stdevrxploss</a></div><div class="ttdeci">double remote_stdevrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00402">rtp_engine.h:402</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa13767863d6692e4ee916ac3b1eead444"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa13767863d6692e4ee916ac3b1eead444">AST_RTP_INSTANCE_STAT_REMOTE_MINJITTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00218">rtp_engine.h:218</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a3f7aced2b7c50be99b2b27c36f1c3557"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a3f7aced2b7c50be99b2b27c36f1c3557">ast_rtp_instance_stats::local_normdevjitter</a></div><div class="ttdeci">double local_normdevjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00388">rtp_engine.h:388</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fa288f60e5b61bdbe925cc98f933c0adcf"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fa288f60e5b61bdbe925cc98f933c0adcf">AST_RTP_INSTANCE_STAT_CHANNEL_UNIQUEID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00248">rtp_engine.h:248</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a80552fd3f7f852d51e944dc4105da800"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a80552fd3f7f852d51e944dc4105da800">ast_rtp_instance_stats::rxjitter</a></div><div class="ttdeci">double rxjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00374">rtp_engine.h:374</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a052c95f741f3e25e6ab9217a01affb53"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a052c95f741f3e25e6ab9217a01affb53">ast_rtp_instance_stats::remote_ssrc</a></div><div class="ttdeci">unsigned int remote_ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00424">rtp_engine.h:424</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aec6a67dd9e8be83fce73c1c1a63a58d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec6a67dd9e8be83fce73c1c1a63a58d8">&#9670;&nbsp;</a></span>ast_rtp_ice_add_cand()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_ice_add_cand </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>comp_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>transport_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_ice_cand_type&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_uint16_t&#160;</td>
          <td class="paramname"><em>local_pref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pj_sockaddr_t *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pj_sockaddr_t *&#160;</td>
          <td class="paramname"><em>base_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pj_sockaddr_t *&#160;</td>
          <td class="paramname"><em>rel_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>addr_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01239">1239</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00479">ast_rtp_engine_ice_candidate::address</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01335">ao2_container_alloc_list</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01549">ao2_link</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02898">ast_debug_ice</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00766">ast_rtp_ice_candidate_destroy()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00456">AST_RTP_ICE_CANDIDATE_TYPE_HOST</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00458">AST_RTP_ICE_CANDIDATE_TYPE_RELAYED</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00457">AST_RTP_ICE_CANDIDATE_TYPE_SRFLX</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00258">ast_strndup</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00475">ast_rtp_engine_ice_candidate::foundation</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00806">ice_candidate_cmp()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00476">ast_rtp_engine_ice_candidate::id</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01154">OBJ_POINTER</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">pj_thread_register_check()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00478">ast_rtp_engine_ice_candidate::priority</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">ice_wrap::real_ice</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00480">ast_rtp_engine_ice_candidate::relay_address</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00477">ast_rtp_engine_ice_candidate::transport</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00481">ast_rtp_engine_ice_candidate::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01577">ast_rtp_ice_turn_request()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>.</p>
<div class="fragment"><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;{</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;   pj_str_t foundation;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a> *candidate, *existing;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/db8/structice__wrap.html">ice_wrap</a> *ice;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>[PJ_INET6_ADDRSTRLEN];</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;   pj_status_t <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;ice) {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;   }</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a>();</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;   pj_ice_calc_foundation(rtp-&gt;ice-&gt;real_ice-&gt;pool, &amp;foundation, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, addr);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;ice_local_candidates) {</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      rtp-&gt;ice_local_candidates = <a class="code" href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0,</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a87bc4581242c6ec6310b35f120ca5906">ice_candidate_cmp</a>);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <span class="keywordflow">if</span> (!rtp-&gt;ice_local_candidates) {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      }</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;   }</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;   <span class="keywordflow">if</span> (!(candidate = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*candidate), <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#acab9e9946146e1bcba7556eb444380e9">ast_rtp_ice_candidate_destroy</a>))) {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;   }</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;   candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">foundation</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#aa1202a8277cd3013d22535bf5bfe85fc">ast_strndup</a>(pj_strbuf(&amp;foundation), pj_strlen(&amp;foundation));</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;   candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">id</a> = comp_id;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;   candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4a801f0d373475210a2d6ba3cfa9bb12">transport</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;UDP&quot;</span>);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>, pj_sockaddr_print(addr, address, <span class="keyword">sizeof</span>(address), 0), 0);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>, pj_sockaddr_get_port(addr));</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;   <span class="keywordflow">if</span> (rel_addr) {</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">relay_address</a>, pj_sockaddr_print(rel_addr, address, <span class="keyword">sizeof</span>(address), 0), 0);</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">relay_address</a>, pj_sockaddr_get_port(rel_addr));</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;   }</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> == PJ_ICE_CAND_TYPE_HOST) {</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">type</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a5d902360d048d7e95d57908b9dcd6efb">AST_RTP_ICE_CANDIDATE_TYPE_HOST</a>;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> == PJ_ICE_CAND_TYPE_SRFLX) {</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">type</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a2d979a962e90d81ad13ad8a12e7f26ae">AST_RTP_ICE_CANDIDATE_TYPE_SRFLX</a>;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> == PJ_ICE_CAND_TYPE_RELAYED) {</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">type</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a085c18dfb22d93242277f312fccaf9cb">AST_RTP_ICE_CANDIDATE_TYPE_RELAYED</a>;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;   }</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;   <span class="keywordflow">if</span> ((existing = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(rtp-&gt;ice_local_candidates, candidate, <a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a>))) {</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(existing, -1);</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(candidate, -1);</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;   }</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;   <span class="comment">/* Release the instance lock to avoid deadlock with PJPROJECT group lock */</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;   ice = rtp-&gt;ice;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ice, +1);</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   status = pj_ice_sess_add_cand(ice-&gt;<a class="code" href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">real_ice</a>, comp_id, transport_id, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, local_pref,</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      &amp;foundation, addr, base_addr, rel_addr, addr_len, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ice, -1);</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;ice || status != PJ_SUCCESS) {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE unable to add candidate: %s, %d\n&quot;</span>, instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;         &amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>), candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>);</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(candidate, -1);</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;   }</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;   <span class="comment">/* By placing the candidate into the ICE session it will have produced the priority, so update the local candidate with it */</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;   candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a> = rtp-&gt;ice-&gt;real_ice-&gt;lcand[rtp-&gt;ice-&gt;real_ice-&gt;lcand_cnt - 1].prio;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE add candidate: %s, %d\n&quot;</span>, instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      &amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>), candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>);</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(rtp-&gt;ice_local_candidates, candidate);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(candidate, -1);</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="netsock2_8h_html_aad98818272870e12d48fe4347aaa46d0"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a></div><div class="ttdeci">int ast_sockaddr_parse(struct ast_sockaddr *addr, const char *str, int flags)</div><div class="ttdoc">Parse an IPv4 or IPv6 address string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00230">netsock2.c:230</a></div></div>
<div class="ttc" id="f2c_8h_html_a27c1bdb0cba23a9db2a51eed7b3b2ac1"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a></div><div class="ttdeci">char * address</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00059">f2c.h:59</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2448088751e4d494d1981c7f4b84e8d0"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a></div><div class="ttdeci">#define OBJ_POINTER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01154">astobj2.h:1154</a></div></div>
<div class="ttc" id="astobj2_8h_html_add41bd9979cb8642f81dd38aa2dfcd6d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a></div><div class="ttdeci">#define ao2_container_alloc_list(ao2_options, container_options, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01335">astobj2.h:1335</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a></div><div class="ttdoc">Structure for an ICE candidate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00474">rtp_engine.h:474</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4884315209af5f6ecb90ba9ef0a70344"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a></div><div class="ttdeci">static void pj_thread_register_check(void)</div><div class="ttdoc">Function used to check if the calling thread is registered with pjlib. If it is not it will be regist...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">res_rtp_asterisk.c:865</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a830a6b4139e5b1b513777994b90b2a9c"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">ast_rtp_engine_ice_candidate::type</a></div><div class="ttdeci">enum ast_rtp_ice_candidate_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00481">rtp_engine.h:481</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_acab9e9946146e1bcba7556eb444380e9"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#acab9e9946146e1bcba7556eb444380e9">ast_rtp_ice_candidate_destroy</a></div><div class="ttdeci">static void ast_rtp_ice_candidate_destroy(void *obj)</div><div class="ttdoc">Destructor for locally created ICE candidates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00766">res_rtp_asterisk.c:766</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="structice__wrap_html"><div class="ttname"><a href="../../d9/db8/structice__wrap.html">ice_wrap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00320">res_rtp_asterisk.c:320</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a71306846ae998e6b08b66d54169cc2d4"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">ast_rtp_engine_ice_candidate::relay_address</a></div><div class="ttdeci">struct ast_sockaddr relay_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00480">rtp_engine.h:480</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4b2c296e98c6e45d3f102dcec2d248da"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">ast_rtp_engine_ice_candidate::id</a></div><div class="ttdeci">enum ast_rtp_ice_component_type id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00476">rtp_engine.h:476</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a83d758bec83d2a5d6af30efa7d0d7f84a2d979a962e90d81ad13ad8a12e7f26ae"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a2d979a962e90d81ad13ad8a12e7f26ae">AST_RTP_ICE_CANDIDATE_TYPE_SRFLX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00457">rtp_engine.h:457</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4a801f0d373475210a2d6ba3cfa9bb12"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4a801f0d373475210a2d6ba3cfa9bb12">ast_rtp_engine_ice_candidate::transport</a></div><div class="ttdeci">char * transport</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00477">rtp_engine.h:477</a></div></div>
<div class="ttc" id="astmm_8h_html_aa1202a8277cd3013d22535bf5bfe85fc"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#aa1202a8277cd3013d22535bf5bfe85fc">ast_strndup</a></div><div class="ttdeci">#define ast_strndup(str, len)</div><div class="ttdoc">A wrapper for strndup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00258">astmm.h:258</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaad9e84526c8d48bd3e980e732dd1f7df"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a></div><div class="ttdeci">#define ast_debug_ice(sublevel,...)</div><div class="ttdoc">Log debug level ICE information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02898">rtp_engine.h:2898</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4f20b037eb06eec1ae276f13beec7738"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">ast_rtp_engine_ice_candidate::foundation</a></div><div class="ttdeci">char * foundation</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00475">rtp_engine.h:475</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a87bc4581242c6ec6310b35f120ca5906"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a87bc4581242c6ec6310b35f120ca5906">ice_candidate_cmp</a></div><div class="ttdeci">static int ice_candidate_cmp(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00806">res_rtp_asterisk.c:806</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a83d758bec83d2a5d6af30efa7d0d7f84a5d902360d048d7e95d57908b9dcd6efb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a5d902360d048d7e95d57908b9dcd6efb">AST_RTP_ICE_CANDIDATE_TYPE_HOST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00456">rtp_engine.h:456</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a06332befc0224dfca0e6562d84f5df73"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">ast_rtp_engine_ice_candidate::address</a></div><div class="ttdeci">struct ast_sockaddr address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00479">rtp_engine.h:479</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#acec9ce2df15222151ad66fcb1d74eb9f">ast_rtp_engine_ice_candidate::priority</a></div><div class="ttdeci">int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00478">rtp_engine.h:478</a></div></div>
<div class="ttc" id="structice__wrap_html_a947772eea928bd56792836dc5c55dac9"><div class="ttname"><a href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">ice_wrap::real_ice</a></div><div class="ttdeci">pj_ice_sess * real_ice</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">res_rtp_asterisk.c:321</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a83d758bec83d2a5d6af30efa7d0d7f84a085c18dfb22d93242277f312fccaf9cb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a085c18dfb22d93242277f312fccaf9cb">AST_RTP_ICE_CANDIDATE_TYPE_RELAYED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00458">rtp_engine.h:458</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a608f39219a4fa9ac60ed67e8a7c686f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a608f39219a4fa9ac60ed67e8a7c686f6">&#9670;&nbsp;</a></span>ast_rtp_ice_add_remote_candidate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_ice_add_remote_candidate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a> *&#160;</td>
          <td class="paramname"><em>candidate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00821">821</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00479">ast_rtp_engine_ice_candidate::address</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01335">ao2_container_alloc_list</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00034">ao2_container_count()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01549">ao2_link</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02898">ast_debug_ice</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00766">ast_rtp_ice_candidate_destroy()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00475">ast_rtp_engine_ice_candidate::foundation</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00806">ice_candidate_cmp()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00476">ast_rtp_engine_ice_candidate::id</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00478">ast_rtp_engine_ice_candidate::priority</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00480">ast_rtp_engine_ice_candidate::relay_address</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00477">ast_rtp_engine_ice_candidate::transport</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00481">ast_rtp_engine_ice_candidate::type</a>.</p>
<div class="fragment"><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;{</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a> *remote_candidate;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;   <span class="comment">/* ICE sessions only support UDP candidates */</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   <span class="keywordflow">if</span> (strcasecmp(candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4a801f0d373475210a2d6ba3cfa9bb12">transport</a>, <span class="stringliteral">&quot;udp&quot;</span>)) {</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   }</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;ice_proposed_remote_candidates) {</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      rtp-&gt;ice_proposed_remote_candidates = <a class="code" href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a>(</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a87bc4581242c6ec6310b35f120ca5906">ice_candidate_cmp</a>);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <span class="keywordflow">if</span> (!rtp-&gt;ice_proposed_remote_candidates) {</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      }</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;   }</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   <span class="comment">/* If this is going to exceed the maximum number of ICE candidates don&#39;t even add it */</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(rtp-&gt;ice_proposed_remote_candidates) == PJ_ICE_MAX_CAND) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   }</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   <span class="keywordflow">if</span> (!(remote_candidate = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*remote_candidate), <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#acab9e9946146e1bcba7556eb444380e9">ast_rtp_ice_candidate_destroy</a>))) {</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   }</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   remote_candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">foundation</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">foundation</a>);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;   remote_candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">id</a> = candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">id</a>;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;   remote_candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4a801f0d373475210a2d6ba3cfa9bb12">transport</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4a801f0d373475210a2d6ba3cfa9bb12">transport</a>);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   remote_candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a> = candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;remote_candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>, &amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;remote_candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">relay_address</a>, &amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">relay_address</a>);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;   remote_candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">type</a> = candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">type</a>;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE add remote candidate\n&quot;</span>, instance);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(rtp-&gt;ice_proposed_remote_candidates, remote_candidate);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(remote_candidate, -1);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="astobj2_8h_html_add41bd9979cb8642f81dd38aa2dfcd6d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a></div><div class="ttdeci">#define ao2_container_alloc_list(ao2_options, container_options, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01335">astobj2.h:1335</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a></div><div class="ttdoc">Structure for an ICE candidate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00474">rtp_engine.h:474</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a830a6b4139e5b1b513777994b90b2a9c"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">ast_rtp_engine_ice_candidate::type</a></div><div class="ttdeci">enum ast_rtp_ice_candidate_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00481">rtp_engine.h:481</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_acab9e9946146e1bcba7556eb444380e9"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#acab9e9946146e1bcba7556eb444380e9">ast_rtp_ice_candidate_destroy</a></div><div class="ttdeci">static void ast_rtp_ice_candidate_destroy(void *obj)</div><div class="ttdoc">Destructor for locally created ICE candidates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00766">res_rtp_asterisk.c:766</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a71306846ae998e6b08b66d54169cc2d4"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">ast_rtp_engine_ice_candidate::relay_address</a></div><div class="ttdeci">struct ast_sockaddr relay_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00480">rtp_engine.h:480</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4b2c296e98c6e45d3f102dcec2d248da"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">ast_rtp_engine_ice_candidate::id</a></div><div class="ttdeci">enum ast_rtp_ice_component_type id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00476">rtp_engine.h:476</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4a801f0d373475210a2d6ba3cfa9bb12"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4a801f0d373475210a2d6ba3cfa9bb12">ast_rtp_engine_ice_candidate::transport</a></div><div class="ttdeci">char * transport</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00477">rtp_engine.h:477</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaad9e84526c8d48bd3e980e732dd1f7df"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a></div><div class="ttdeci">#define ast_debug_ice(sublevel,...)</div><div class="ttdoc">Log debug level ICE information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02898">rtp_engine.h:2898</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4f20b037eb06eec1ae276f13beec7738"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">ast_rtp_engine_ice_candidate::foundation</a></div><div class="ttdeci">char * foundation</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00475">rtp_engine.h:475</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a87bc4581242c6ec6310b35f120ca5906"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a87bc4581242c6ec6310b35f120ca5906">ice_candidate_cmp</a></div><div class="ttdeci">static int ice_candidate_cmp(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00806">res_rtp_asterisk.c:806</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a06332befc0224dfca0e6562d84f5df73"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">ast_rtp_engine_ice_candidate::address</a></div><div class="ttdeci">struct ast_sockaddr address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00479">rtp_engine.h:479</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#acec9ce2df15222151ad66fcb1d74eb9f">ast_rtp_engine_ice_candidate::priority</a></div><div class="ttdeci">int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00478">rtp_engine.h:478</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acab9e9946146e1bcba7556eb444380e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acab9e9946146e1bcba7556eb444380e9">&#9670;&nbsp;</a></span>ast_rtp_ice_candidate_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_ice_candidate_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor for locally created ICE candidates. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00766">766</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00475">ast_rtp_engine_ice_candidate::foundation</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00477">ast_rtp_engine_ice_candidate::transport</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01239">ast_rtp_ice_add_cand()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00821">ast_rtp_ice_add_remote_candidate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;{</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a> *candidate = obj;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <span class="keywordflow">if</span> (candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">foundation</a>) {</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">foundation</a>);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   }</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   <span class="keywordflow">if</span> (candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4a801f0d373475210a2d6ba3cfa9bb12">transport</a>) {</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4a801f0d373475210a2d6ba3cfa9bb12">transport</a>);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   }</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;}</div><div class="ttc" id="structast__rtp__engine__ice__candidate_html"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a></div><div class="ttdoc">Structure for an ICE candidate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00474">rtp_engine.h:474</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4a801f0d373475210a2d6ba3cfa9bb12"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4a801f0d373475210a2d6ba3cfa9bb12">ast_rtp_engine_ice_candidate::transport</a></div><div class="ttdeci">char * transport</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00477">rtp_engine.h:477</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4f20b037eb06eec1ae276f13beec7738"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">ast_rtp_engine_ice_candidate::foundation</a></div><div class="ttdeci">char * foundation</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00475">rtp_engine.h:475</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c7d6d7d009f35f151884843c7376695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c7d6d7d009f35f151884843c7376695">&#9670;&nbsp;</a></span>ast_rtp_ice_change_components()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_ice_change_components </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_components</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01734">1734</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02898">ast_debug_ice</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00959">ice_reset_session()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00214">icesupport</a>.</p>
<div class="fragment"><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;{</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;   <span class="comment">/* Don&#39;t do anything if ICE is unsupported or if we&#39;re not changing the</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="comment">    * number of components</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab452a162adc04bec273fda937902e95e">icesupport</a> || !rtp-&gt;ice || rtp-&gt;ice_num_components == num_components) {</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;   }</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE change number of components %u -&gt; %u\n&quot;</span>, instance,</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;      rtp-&gt;ice_num_components, num_components);</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;   rtp-&gt;ice_num_components = num_components;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#adde70b348dba6a01f45b8debf24fd536">ice_reset_session</a>(instance);</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ab452a162adc04bec273fda937902e95e"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab452a162adc04bec273fda937902e95e">icesupport</a></div><div class="ttdeci">static int icesupport</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00214">res_rtp_asterisk.c:214</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_adde70b348dba6a01f45b8debf24fd536"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#adde70b348dba6a01f45b8debf24fd536">ice_reset_session</a></div><div class="ttdeci">static int ice_reset_session(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00959">res_rtp_asterisk.c:959</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaad9e84526c8d48bd3e980e732dd1f7df"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a></div><div class="ttdeci">#define ast_debug_ice(sublevel,...)</div><div class="ttdoc">Log debug level ICE information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02898">rtp_engine.h:2898</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aedc03c909a05296eb1476f2ae5a7c3ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedc03c909a05296eb1476f2ae5a7c3ac">&#9670;&nbsp;</a></span>ast_rtp_ice_get_local_candidates()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a>* ast_rtp_ice_get_local_candidates </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01189">1189</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, and <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;{</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;ice_local_candidates) {</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(rtp-&gt;ice_local_candidates, +1);</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;   }</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;   <span class="keywordflow">return</span> rtp-&gt;ice_local_candidates;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0554cd5294b4a797871159a9539e9bd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0554cd5294b4a797871159a9539e9bd9">&#9670;&nbsp;</a></span>ast_rtp_ice_get_password()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* ast_rtp_ice_get_password </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01181">1181</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;{</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;   <span class="keywordflow">return</span> rtp-&gt;local_passwd;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aac772df5ebbf4214f8e71aeded87e59d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac772df5ebbf4214f8e71aeded87e59d">&#9670;&nbsp;</a></span>ast_rtp_ice_get_ufrag()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* ast_rtp_ice_get_ufrag </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01173">1173</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;{</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;   <span class="keywordflow">return</span> rtp-&gt;local_ufrag;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2b0130275dd17ab43dcf2680e7a5dd20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b0130275dd17ab43dcf2680e7a5dd20">&#9670;&nbsp;</a></span>ast_rtp_ice_lite()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_ice_lite </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01201">1201</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">pj_thread_register_check()</a>.</p>
<div class="fragment"><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;{</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;ice) {</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;   }</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a>();</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;   pj_ice_sess_change_role(rtp-&gt;ice-&gt;real_ice, PJ_ICE_SESS_ROLE_CONTROLLING);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4884315209af5f6ecb90ba9ef0a70344"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a></div><div class="ttdeci">static void pj_thread_register_check(void)</div><div class="ttdoc">Function used to check if the calling thread is registered with pjlib. If it is not it will be regist...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">res_rtp_asterisk.c:865</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af7ded463151f4227c09b4d2a641d53b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7ded463151f4227c09b4d2a641d53b1">&#9670;&nbsp;</a></span>ast_rtp_ice_set_authentication()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_ice_set_authentication </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ufrag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>password</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00780">780</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01720">generate_random_string()</a>.</p>
<div class="fragment"><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;{</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   <span class="keywordtype">int</span> ice_attrb_reset = 0;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(ufrag)) {</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(rtp-&gt;remote_ufrag) &amp;&amp; strcmp(ufrag, rtp-&gt;remote_ufrag)) {</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;         ice_attrb_reset = 1;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      }</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(rtp-&gt;remote_ufrag, ufrag, <span class="keyword">sizeof</span>(rtp-&gt;remote_ufrag));</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   }</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>)) {</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(rtp-&gt;remote_passwd) &amp;&amp; strcmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>, rtp-&gt;remote_passwd)) {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;         ice_attrb_reset = 1;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      }</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(rtp-&gt;remote_passwd, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>, <span class="keyword">sizeof</span>(rtp-&gt;remote_passwd));</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   }</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   <span class="comment">/* If the remote ufrag or passwd changed, local ufrag and passwd need to regenerate */</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   <span class="keywordflow">if</span> (ice_attrb_reset) {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9f4aa0ba10c92a6d97d91a1ba021da73">generate_random_string</a>(rtp-&gt;local_ufrag, <span class="keyword">sizeof</span>(rtp-&gt;local_ufrag));</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9f4aa0ba10c92a6d97d91a1ba021da73">generate_random_string</a>(rtp-&gt;local_passwd, <span class="keyword">sizeof</span>(rtp-&gt;local_passwd));</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ab4fdb206838f2974bd15fc2ca1e9d366"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a></div><div class="ttdeci">static struct ast_str * password</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00077">cdr_mysql.c:77</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a9f4aa0ba10c92a6d97d91a1ba021da73"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a9f4aa0ba10c92a6d97d91a1ba021da73">generate_random_string</a></div><div class="ttdeci">static char * generate_random_string(char *buf, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01720">res_rtp_asterisk.c:1720</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3f50c3faeab8e9e3fafd98cf6b61f0e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f50c3faeab8e9e3fafd98cf6b61f0e6">&#9670;&nbsp;</a></span>ast_rtp_ice_set_role()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_ice_set_role </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fb">ast_rtp_ice_role</a>&#160;</td>
          <td class="paramname"><em>role</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01215">1215</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02898">ast_debug_ice</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00469">AST_RTP_ICE_ROLE_CONTROLLED</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">pj_thread_register_check()</a>.</p>
<div class="fragment"><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;{</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;ice) {</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(3, <span class="stringliteral">&quot;(%p) ICE set role failed; no ice instance\n&quot;</span>, instance);</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;   }</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;   rtp-&gt;role = role;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;ice-&gt;real_ice-&gt;is_nominating &amp;&amp; !rtp-&gt;ice-&gt;real_ice-&gt;is_complete) {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a>();</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE set role to %s\n&quot;</span>,</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;         instance, role == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fba68f759b4c56106f7dbde793a886170d1">AST_RTP_ICE_ROLE_CONTROLLED</a> ? <span class="stringliteral">&quot;CONTROLLED&quot;</span> : <span class="stringliteral">&quot;CONTROLLING&quot;</span>);</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      pj_ice_sess_change_role(rtp-&gt;ice-&gt;real_ice, role == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fba68f759b4c56106f7dbde793a886170d1">AST_RTP_ICE_ROLE_CONTROLLED</a> ?</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;         PJ_ICE_SESS_ROLE_CONTROLLED : PJ_ICE_SESS_ROLE_CONTROLLING);</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE not setting role because state is %s\n&quot;</span>,</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;         instance, rtp-&gt;ice-&gt;real_ice-&gt;is_nominating ? <span class="stringliteral">&quot;nominating&quot;</span> : <span class="stringliteral">&quot;complete&quot;</span>);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;   }</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4884315209af5f6ecb90ba9ef0a70344"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a></div><div class="ttdeci">static void pj_thread_register_check(void)</div><div class="ttdoc">Function used to check if the calling thread is registered with pjlib. If it is not it will be regist...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">res_rtp_asterisk.c:865</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaad9e84526c8d48bd3e980e732dd1f7df"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a></div><div class="ttdeci">#define ast_debug_ice(sublevel,...)</div><div class="ttdoc">Log debug level ICE information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02898">rtp_engine.h:2898</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0758b5402aff85ff35e08f7d482308fba68f759b4c56106f7dbde793a886170d1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fba68f759b4c56106f7dbde793a886170d1">AST_RTP_ICE_ROLE_CONTROLLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00469">rtp_engine.h:469</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ae73161ed5f14e344e07c72ebae0529"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ae73161ed5f14e344e07c72ebae0529">&#9670;&nbsp;</a></span>ast_rtp_ice_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_ice_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01031">1031</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00479">ast_rtp_engine_ice_candidate::address</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00034">ao2_container_count()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02898">ast_debug_ice</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00456">AST_RTP_ICE_CANDIDATE_TYPE_HOST</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00458">AST_RTP_ICE_CANDIDATE_TYPE_RELAYED</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00457">AST_RTP_ICE_CANDIDATE_TYPE_SRFLX</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00464">AST_RTP_ICE_COMPONENT_RTCP</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00463">AST_RTP_ICE_COMPONENT_RTP</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00196">ast_test_suite_event_notify</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00475">ast_rtp_engine_ice_candidate::foundation</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01003">ice_candidates_compare()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00959">ice_reset_session()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00476">ast_rtp_engine_ice_candidate::id</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00939">pj2ast_rtp_ice_role()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">pj_thread_register_check()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00478">ast_rtp_engine_ice_candidate::priority</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">ice_wrap::real_ice</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00480">ast_rtp_engine_ice_candidate::relay_address</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00164">STRICT_RTP_OPEN</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00239">timer_heap</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00481">ast_rtp_engine_ice_candidate::type</a>.</p>
<div class="fragment"><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;{</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   pj_str_t ufrag = pj_str(rtp-&gt;remote_ufrag), passwd = pj_str(rtp-&gt;remote_passwd);</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;   pj_ice_sess_cand candidates[PJ_ICE_MAX_CAND];</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a> *candidate;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;   <span class="keywordtype">int</span> cand_cnt = 0, has_rtp = 0, has_rtcp = 0;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;ice || !rtp-&gt;ice_proposed_remote_candidates) {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;   }</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;   <span class="comment">/* Check for equivalence in the lists */</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;ice_active_remote_candidates &amp;&amp;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;         !<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aaac6e7b48030ec03f287fc3fd263a9b7">ice_candidates_compare</a>(rtp-&gt;ice_proposed_remote_candidates, rtp-&gt;ice_active_remote_candidates)) {</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE proposed equals active candidates\n&quot;</span>, instance);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(rtp-&gt;ice_proposed_remote_candidates);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      rtp-&gt;ice_proposed_remote_candidates = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="comment">/* If this ICE session is being preserved then go back to the role it currently is */</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2b5dd245c590a95f5f58c1e54d4650f5">pj2ast_rtp_ice_role</a>(rtp-&gt;ice-&gt;real_ice-&gt;role, &amp;rtp-&gt;role);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;   }</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   <span class="comment">/* Out with the old, in with the new */</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(rtp-&gt;ice_active_remote_candidates);</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;   rtp-&gt;ice_active_remote_candidates = rtp-&gt;ice_proposed_remote_candidates;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;   rtp-&gt;ice_proposed_remote_candidates = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE start\n&quot;</span>, instance);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   <span class="comment">/* Reset the ICE session. Is this going to work? */</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#adde70b348dba6a01f45b8debf24fd536">ice_reset_session</a>(instance)) {</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;(%p) ICE failed to create replacement session\n&quot;</span>, instance);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;   }</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a>();</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(rtp-&gt;ice_active_remote_candidates, 0);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;   <span class="keywordflow">while</span> ((candidate = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i)) &amp;&amp; (cand_cnt &lt; PJ_ICE_MAX_CAND)) {</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      pj_str_t <a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="comment">/* there needs to be at least one rtp and rtcp candidate in the list */</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      has_rtp |= candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">id</a> == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a>;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      has_rtcp |= candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">id</a> == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a>;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      pj_strdup2(rtp-&gt;ice-&gt;real_ice-&gt;pool, &amp;candidates[cand_cnt].foundation,</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;         candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">foundation</a>);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      candidates[cand_cnt].comp_id = candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">id</a>;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      candidates[cand_cnt].prio = candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      pj_sockaddr_parse(pj_AF_UNSPEC(), 0, pj_cstr(&amp;address, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>)), &amp;candidates[cand_cnt].addr);</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">relay_address</a>)) {</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;         pj_sockaddr_parse(pj_AF_UNSPEC(), 0, pj_cstr(&amp;address, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">relay_address</a>)), &amp;candidates[cand_cnt].rel_addr);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      }</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="keywordflow">if</span> (candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">type</a> == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a5d902360d048d7e95d57908b9dcd6efb">AST_RTP_ICE_CANDIDATE_TYPE_HOST</a>) {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;         candidates[cand_cnt].type = PJ_ICE_CAND_TYPE_HOST;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">type</a> == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a2d979a962e90d81ad13ad8a12e7f26ae">AST_RTP_ICE_CANDIDATE_TYPE_SRFLX</a>) {</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;         candidates[cand_cnt].type = PJ_ICE_CAND_TYPE_SRFLX;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">type</a> == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a085c18dfb22d93242277f312fccaf9cb">AST_RTP_ICE_CANDIDATE_TYPE_RELAYED</a>) {</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;         candidates[cand_cnt].type = PJ_ICE_CAND_TYPE_RELAYED;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      }</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      <span class="keywordflow">if</span> (candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">id</a> == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a> &amp;&amp; rtp-&gt;turn_rtp) {</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE RTP candidate %s\n&quot;</span>, instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>));</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;         <span class="comment">/* Release the instance lock to avoid deadlock with PJPROJECT group lock */</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;         pj_turn_sock_set_perm(rtp-&gt;turn_rtp, 1, &amp;candidates[cand_cnt].addr, 1);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">id</a> == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a> &amp;&amp; rtp-&gt;turn_rtcp) {</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE RTCP candidate %s\n&quot;</span>, instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>));</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;         <span class="comment">/* Release the instance lock to avoid deadlock with PJPROJECT group lock */</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;         pj_turn_sock_set_perm(rtp-&gt;turn_rtcp, 1, &amp;candidates[cand_cnt].addr, 1);</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      }</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      cand_cnt++;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(candidate, -1);</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;   <span class="keywordflow">if</span> (cand_cnt &lt; <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(rtp-&gt;ice_active_remote_candidates)) {</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;(%p) ICE lost %d candidates. Consider increasing PJ_ICE_MAX_CAND in PJSIP\n&quot;</span>,</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;         instance, <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(rtp-&gt;ice_active_remote_candidates) - cand_cnt);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;   }</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;   <span class="keywordflow">if</span> (!has_rtp) {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;(%p) ICE no RTP candidates; skipping checklist\n&quot;</span>, instance);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;   }</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;   <span class="comment">/* If we&#39;re only dealing with one ICE component, then we don&#39;t care about the lack of RTCP candidates */</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;   <span class="keywordflow">if</span> (!has_rtcp &amp;&amp; rtp-&gt;ice_num_components &gt; 1) {</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;(%p) ICE no RTCP candidates; skipping checklist\n&quot;</span>, instance);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   }</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;ice &amp;&amp; has_rtp &amp;&amp; (has_rtcp || rtp-&gt;ice_num_components == 1)) {</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      pj_status_t res;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <span class="keywordtype">char</span> reason[80];</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/db8/structice__wrap.html">ice_wrap</a> *ice;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      <span class="comment">/* Release the instance lock to avoid deadlock with PJPROJECT group lock */</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      ice = rtp-&gt;ice;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ice, +1);</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      res = pj_ice_sess_create_check_list(ice-&gt;<a class="code" href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">real_ice</a>, &amp;ufrag, &amp;passwd, cand_cnt, &amp;candidates[0]);</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      <span class="keywordflow">if</span> (res == PJ_SUCCESS) {</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE successfully created checklist\n&quot;</span>, instance);</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;ICECHECKLISTCREATE&quot;</span>, <span class="stringliteral">&quot;Result: SUCCESS&quot;</span>);</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;         pj_ice_sess_start_check(ice-&gt;<a class="code" href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">real_ice</a>);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;         pj_timer_heap_poll(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae9f993fcad1fd49cb50f4a541101ccb7">timer_heap</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ice, -1);</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;         rtp-&gt;strict_rtp_state = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1">STRICT_RTP_OPEN</a>;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      }</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ice, -1);</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      pj_strerror(res, reason, <span class="keyword">sizeof</span>(reason));</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;(%p) ICE failed to create session check list: %s\n&quot;</span>, instance, reason);</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   }</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;ICECHECKLISTCREATE&quot;</span>, <span class="stringliteral">&quot;Result: FAILURE&quot;</span>);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;   <span class="comment">/* even though create check list failed don&#39;t stop ice as</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment">      it might still work */</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;   <span class="comment">/* however we do need to reset remote candidates since</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment">      this function may be re-entered */</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(rtp-&gt;ice_active_remote_candidates, -1);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;   rtp-&gt;ice_active_remote_candidates = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;ice) {</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      rtp-&gt;ice-&gt;real_ice-&gt;rcand_cnt = rtp-&gt;ice-&gt;real_ice-&gt;clist.count = 0;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;   }</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00464">rtp_engine.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="f2c_8h_html_a27c1bdb0cba23a9db2a51eed7b3b2ac1"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a></div><div class="ttdeci">char * address</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00059">f2c.h:59</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1">STRICT_RTP_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00164">res_rtp_asterisk.c:164</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a></div><div class="ttdoc">Structure for an ICE candidate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00474">rtp_engine.h:474</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4884315209af5f6ecb90ba9ef0a70344"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a></div><div class="ttdeci">static void pj_thread_register_check(void)</div><div class="ttdoc">Function used to check if the calling thread is registered with pjlib. If it is not it will be regist...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">res_rtp_asterisk.c:865</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a830a6b4139e5b1b513777994b90b2a9c"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">ast_rtp_engine_ice_candidate::type</a></div><div class="ttdeci">enum ast_rtp_ice_candidate_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00481">rtp_engine.h:481</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_adde70b348dba6a01f45b8debf24fd536"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#adde70b348dba6a01f45b8debf24fd536">ice_reset_session</a></div><div class="ttdeci">static int ice_reset_session(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00959">res_rtp_asterisk.c:959</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structice__wrap_html"><div class="ttname"><a href="../../d9/db8/structice__wrap.html">ice_wrap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00320">res_rtp_asterisk.c:320</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a71306846ae998e6b08b66d54169cc2d4"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">ast_rtp_engine_ice_candidate::relay_address</a></div><div class="ttdeci">struct ast_sockaddr relay_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00480">rtp_engine.h:480</a></div></div>
<div class="ttc" id="test_8h_html_a9482d93ea3931853331bdbc745ce7cb4"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a></div><div class="ttdeci">#define ast_test_suite_event_notify(s, f,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00196">test.h:196</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00463">rtp_engine.h:463</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4b2c296e98c6e45d3f102dcec2d248da"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">ast_rtp_engine_ice_candidate::id</a></div><div class="ttdeci">enum ast_rtp_ice_component_type id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00476">rtp_engine.h:476</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a83d758bec83d2a5d6af30efa7d0d7f84a2d979a962e90d81ad13ad8a12e7f26ae"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a2d979a962e90d81ad13ad8a12e7f26ae">AST_RTP_ICE_CANDIDATE_TYPE_SRFLX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00457">rtp_engine.h:457</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaad9e84526c8d48bd3e980e732dd1f7df"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a></div><div class="ttdeci">#define ast_debug_ice(sublevel,...)</div><div class="ttdoc">Log debug level ICE information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02898">rtp_engine.h:2898</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aaac6e7b48030ec03f287fc3fd263a9b7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aaac6e7b48030ec03f287fc3fd263a9b7">ice_candidates_compare</a></div><div class="ttdeci">static int ice_candidates_compare(struct ao2_container *left, struct ao2_container *right)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01003">res_rtp_asterisk.c:1003</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2b5dd245c590a95f5f58c1e54d4650f5"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2b5dd245c590a95f5f58c1e54d4650f5">pj2ast_rtp_ice_role</a></div><div class="ttdeci">static void pj2ast_rtp_ice_role(enum pj_ice_sess_role pj_role, enum ast_rtp_ice_role *ast_role)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00939">res_rtp_asterisk.c:939</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4f20b037eb06eec1ae276f13beec7738"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">ast_rtp_engine_ice_candidate::foundation</a></div><div class="ttdeci">char * foundation</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00475">rtp_engine.h:475</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a83d758bec83d2a5d6af30efa7d0d7f84a5d902360d048d7e95d57908b9dcd6efb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a5d902360d048d7e95d57908b9dcd6efb">AST_RTP_ICE_CANDIDATE_TYPE_HOST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00456">rtp_engine.h:456</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a06332befc0224dfca0e6562d84f5df73"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">ast_rtp_engine_ice_candidate::address</a></div><div class="ttdeci">struct ast_sockaddr address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00479">rtp_engine.h:479</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ae9f993fcad1fd49cb50f4a541101ccb7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae9f993fcad1fd49cb50f4a541101ccb7">timer_heap</a></div><div class="ttdeci">static pj_timer_heap_t * timer_heap</div><div class="ttdoc">Global timer heap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00239">res_rtp_asterisk.c:239</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#acec9ce2df15222151ad66fcb1d74eb9f">ast_rtp_engine_ice_candidate::priority</a></div><div class="ttdeci">int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00478">rtp_engine.h:478</a></div></div>
<div class="ttc" id="structice__wrap_html_a947772eea928bd56792836dc5c55dac9"><div class="ttname"><a href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">ice_wrap::real_ice</a></div><div class="ttdeci">pj_ice_sess * real_ice</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">res_rtp_asterisk.c:321</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a83d758bec83d2a5d6af30efa7d0d7f84a085c18dfb22d93242277f312fccaf9cb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a085c18dfb22d93242277f312fccaf9cb">AST_RTP_ICE_CANDIDATE_TYPE_RELAYED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00458">rtp_engine.h:458</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3e47a532c686cf9ebf1c290b99206270"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e47a532c686cf9ebf1c290b99206270">&#9670;&nbsp;</a></span>ast_rtp_ice_start_media()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_ice_start_media </td>
          <td>(</td>
          <td class="paramtype">pj_ice_sess *&#160;</td>
          <td class="paramname"><em>ice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_status_t&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02581">2581</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d1f/logger__category_8h_source.html#l00171">ast_debug_category</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02850">AST_DEBUG_CATEGORY_DTLS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02852">AST_DEBUG_CATEGORY_ICE</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00464">AST_RTP_ICE_COMPONENT_RTCP</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00463">AST_RTP_ICE_COMPONENT_RTP</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00259">AST_RTP_INSTANCE_RTCP_STANDARD</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00705">ast_rtp_instance_set_prop()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01080">ast_rtp_instance_set_remote_address</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00115">AST_RTP_PROPERTY_NAT</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00140">ast_sockaddr_setnull()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03453">rtp_learning_start()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00206">strictrtp</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00749">update_address_with_ice_candidate()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02656">ast_rtp_on_ice_complete()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02648">ast_rtp_on_valid_pair()</a>.</p>
<div class="fragment"><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;{</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance = ice-&gt;user_data;</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a> == PJ_SUCCESS) {</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address;</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a>(&amp;remote_address);</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a42d4b1f8ff650d67378b345bb531ccac">update_address_with_ice_candidate</a>(ice, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a>, &amp;remote_address);</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;remote_address)) {</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;         <span class="comment">/* Symmetric RTP must be disabled for the remote address to not get overwritten */</span></div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a>, 0);</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a>(instance, &amp;remote_address);</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;      }</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;rtcp) {</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a42d4b1f8ff650d67378b345bb531ccac">update_address_with_ice_candidate</a>(ice, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a>, &amp;rtp-&gt;rtcp-&gt;them);</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;      }</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;   }</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP)</span></div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;   <span class="comment">/* If we&#39;ve already started media, no need to do all of this again */</span></div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;ice_media_started) {</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;   }</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;   <a class="code" href="../../d5/d1f/logger__category_8h.html#ad5e6ac27cd91f510ebbff6d445c42c91">ast_debug_category</a>(2, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga848f8deb4762ac97ef5f385b35f1c331">AST_DEBUG_CATEGORY_ICE</a> | <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0280c402086b9e30df2cfc73494213ac">AST_DEBUG_CATEGORY_DTLS</a>,</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;      <span class="stringliteral">&quot;(%p) ICE starting media - perform DTLS - (%p)\n&quot;</span>, instance, rtp);</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;<span class="comment">    * Seemingly no reason to call dtls_perform_setup here. Currently we&#39;ll do a full</span></div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;<span class="comment">    * protocol level renegotiation if things do change. And if bundled is being used</span></div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="comment">    * then ICE is reused when a stream is added.</span></div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;<span class="comment">    * Note, if for some reason in the future dtls_perform_setup does need to done here</span></div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;<span class="comment">    * be aware that creates a race condition between the call here (on ice completion)</span></div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;<span class="comment">    * and potential DTLS handshaking when receiving RTP. What happens is the ssl object</span></div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;<span class="comment">    * can get cleared (SSL_clear) during that handshaking process (DTLS init). If that</span></div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;<span class="comment">    * happens then Asterisk won&#39;t complete DTLS initialization. RTP packets are still</span></div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;<span class="comment">    * sent/received but won&#39;t be encrypted/decrypted.</span></div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;   dtls_perform_handshake(instance, &amp;rtp-&gt;dtls, 0);</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;rtcp &amp;&amp; rtp-&gt;rtcp-&gt;type == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38">AST_RTP_INSTANCE_RTCP_STANDARD</a>) {</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;      dtls_perform_handshake(instance, &amp;rtp-&gt;rtcp-&gt;dtls, 1);</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;   }</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;   rtp-&gt;ice_media_started = 1;</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a>) {</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;   }</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;%p -- Strict RTP learning after ICE completion\n&quot;</span>, rtp);</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ada712c8738c9286dabd805475002671e">rtp_learning_start</a>(rtp);</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;}</div><div class="ttc" id="logger__category_8h_html_ad5e6ac27cd91f510ebbff6d445c42c91"><div class="ttname"><a href="../../d5/d1f/logger__category_8h.html#ad5e6ac27cd91f510ebbff6d445c42c91">ast_debug_category</a></div><div class="ttdeci">#define ast_debug_category(sublevel, ids,...)</div><div class="ttdoc">Log for a debug category. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/logger__category_8h_source.html#l00171">logger_category.h:171</a></div></div>
<div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00464">rtp_engine.h:464</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38">AST_RTP_INSTANCE_RTCP_STANDARD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00259">rtp_engine.h:259</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ada712c8738c9286dabd805475002671e"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ada712c8738c9286dabd805475002671e">rtp_learning_start</a></div><div class="ttdeci">static void rtp_learning_start(struct ast_rtp *rtp)</div><div class="ttdoc">Start the strictrtp learning mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03453">res_rtp_asterisk.c:3453</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad91b5dfe4c188d15f4b2e9e2ec5d8864"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a></div><div class="ttdeci">static void ast_sockaddr_setnull(struct ast_sockaddr *addr)</div><div class="ttdoc">Sets address addr to null. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00140">netsock2.h:140</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00115">rtp_engine.h:115</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga848f8deb4762ac97ef5f385b35f1c331"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga848f8deb4762ac97ef5f385b35f1c331">AST_DEBUG_CATEGORY_ICE</a></div><div class="ttdeci">#define AST_DEBUG_CATEGORY_ICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02852">rtp_engine.h:2852</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a96336b3ac9e5b66f365f0ca5ba613995"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a></div><div class="ttdeci">static int strictrtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00206">res_rtp_asterisk.c:206</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00463">rtp_engine.h:463</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a90c48c7f24206e8822bf520dae0a2478"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_set_remote_address(instance, address)</div><div class="ttdoc">Set the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01080">rtp_engine.h:1080</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a42d4b1f8ff650d67378b345bb531ccac"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a42d4b1f8ff650d67378b345bb531ccac">update_address_with_ice_candidate</a></div><div class="ttdeci">static void update_address_with_ice_candidate(pj_ice_sess *ice, enum ast_rtp_ice_component_type component, struct ast_sockaddr *cand_address)</div><div class="ttdoc">Helper function which updates an ast_sockaddr with the candidate used for the component. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00749">res_rtp_asterisk.c:749</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga0280c402086b9e30df2cfc73494213ac"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga0280c402086b9e30df2cfc73494213ac">AST_DEBUG_CATEGORY_DTLS</a></div><div class="ttdeci">#define AST_DEBUG_CATEGORY_DTLS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02850">rtp_engine.h:2850</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a77f59605d15d7dfc53e0df12352b8235"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a></div><div class="ttdeci">void ast_rtp_instance_set_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property, int value)</div><div class="ttdoc">Set the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00705">rtp_engine.c:705</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad1bbfc1e97ca48872b4ff30e27cbe996"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1bbfc1e97ca48872b4ff30e27cbe996">&#9670;&nbsp;</a></span>ast_rtp_ice_stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_ice_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00891">891</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02898">ast_debug_ice</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03750">ice_create()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03901">rtp_deallocate_transport()</a>.</p>
<div class="fragment"><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;{</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/db8/structice__wrap.html">ice_wrap</a> *ice;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;   ice = rtp-&gt;ice;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;   rtp-&gt;ice = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;   <span class="keywordflow">if</span> (ice) {</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      <span class="comment">/* Release the instance lock to avoid deadlock with PJPROJECT group lock */</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ice, -1);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE stopped\n&quot;</span>, instance);</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   }</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structice__wrap_html"><div class="ttname"><a href="../../d9/db8/structice__wrap.html">ice_wrap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00320">res_rtp_asterisk.c:320</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaad9e84526c8d48bd3e980e732dd1f7df"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a></div><div class="ttdeci">#define ast_debug_ice(sublevel,...)</div><div class="ttdoc">Log debug level ICE information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02898">rtp_engine.h:2898</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7b0a5701597e079d3eab80b7145c3944"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b0a5701597e079d3eab80b7145c3944">&#9670;&nbsp;</a></span>ast_rtp_ice_turn_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_ice_turn_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78">ast_rtp_ice_component_type</a>&#160;</td>
          <td class="paramname"><em>component</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3">ast_transport</a>&#160;</td>
          <td class="paramname"><em>transport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>password</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01577">1577</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00476">ao2_object_get_lockaddr()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02898">ast_debug_ice</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01239">ast_rtp_ice_add_cand()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00464">AST_RTP_ICE_COMPONENT_RTCP</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00463">AST_RTP_ICE_COMPONENT_RTP</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00643">ast_rtp_instance_get_local_address()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01448">ast_rtp_turn_rtcp_sock_cb</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01382">ast_rtp_turn_rtp_sock_cb</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00238">ast_samp2tv()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00497">ast_sockaddr_is_ipv4()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00521">ast_sockaddr_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00061">AST_TRANSPORT_TCP</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00060">AST_TRANSPORT_UDP</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00233">cachingpool</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">PARSE_PORT_FORBID</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">ice_wrap::real_ice</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01512">rtp_ioqueue_thread_get_or_create()</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00215">stun_software_attribute</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00294">TRANSPORT_TURN_RTCP</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00293">TRANSPORT_TURN_RTP</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00107">TURN_STATE_WAIT_TIME</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>.</p>
<div class="fragment"><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;{</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;   pj_turn_sock **turn_sock;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;   <span class="keyword">const</span> pj_turn_sock_cb *turn_cb;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;   pj_turn_tp_type conn_type;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;   <span class="keywordtype">int</span> conn_transport;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;   pj_stun_auth_cred cred = { 0, };</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;   pj_str_t turn_addr;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> addr = { { 0, } };</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;   pj_stun_config stun_config;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;   <span class="keyword">struct </span>timeval wait = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a03f4d7d97d914208e1f779d1c09db7bb">TURN_STATE_WAIT_TIME</a>, 1000));</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;   <span class="keyword">struct </span>timespec ts = { .tv_sec = wait.tv_sec, .tv_nsec = wait.tv_usec * 1000, };</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;   pj_turn_session_info <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> local, loop;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;   pj_status_t <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;   pj_turn_sock_cfg turn_sock_cfg;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/db8/structice__wrap.html">ice_wrap</a> *ice;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a80baeff1bd121c3168ede2a955e9b3a2">ast_rtp_instance_get_local_address</a>(instance, &amp;local);</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a>(&amp;local)) {</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;loop, <span class="stringliteral">&quot;127.0.0.1&quot;</span>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a>);</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;loop, <span class="stringliteral">&quot;::1&quot;</span>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a>);</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;   }</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;   <span class="comment">/* Determine what component we are requesting a TURN session for */</span></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;   <span class="keywordflow">if</span> (component == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a>) {</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      turn_sock = &amp;rtp-&gt;turn_rtp;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      turn_cb = &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a8d2e62824f8d9acf79eae364ffa8f72f">ast_rtp_turn_rtp_sock_cb</a>;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      conn_transport = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa05629cc7dbc25042c121a9670f150e3">TRANSPORT_TURN_RTP</a>;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;loop, <a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(&amp;local));</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (component == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a>) {</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      turn_sock = &amp;rtp-&gt;turn_rtcp;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      turn_cb = &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad9c660bcc45ef01492a0442a3dbc6f1d">ast_rtp_turn_rtcp_sock_cb</a>;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      conn_transport = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a076af3a6d50860b502ce8182a5105dbd">TRANSPORT_TURN_RTCP</a>;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;loop, <a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(&amp;rtp-&gt;rtcp-&gt;us));</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;   }</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;   <span class="keywordflow">if</span> (transport == <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a806b187d5e4f7490e46a039792f850bc">AST_TRANSPORT_UDP</a>) {</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      conn_type = PJ_TURN_TP_UDP;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (transport == <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3acd1be5fd1357a3d7f56ec62fc01bdc20">AST_TRANSPORT_TCP</a>) {</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;      conn_type = PJ_TURN_TP_TCP;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;   }</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;addr, server, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a>);</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;   <span class="keywordflow">if</span> (*turn_sock) {</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;      rtp-&gt;turn_state = PJ_TURN_STATE_NULL;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      <span class="comment">/* Release the instance lock to avoid deadlock with PJPROJECT group lock */</span></div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      pj_turn_sock_destroy(*turn_sock);</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      <span class="keywordflow">while</span> (rtp-&gt;turn_state != PJ_TURN_STATE_DESTROYING) {</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;rtp-&gt;cond, <a class="code" href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a>(instance), &amp;ts);</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      }</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;   }</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;   <span class="keywordflow">if</span> (component == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a> &amp;&amp; !rtp-&gt;ioqueue) {</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;<span class="comment">       * We cannot hold the instance lock because we could wait</span></div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;<span class="comment">       * for the ioqueue thread to die and we might deadlock as</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;<span class="comment">       * a result.</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      rtp-&gt;ioqueue = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a945018e0a29fb3127c1003645a2277dc">rtp_ioqueue_thread_get_or_create</a>();</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;      <span class="keywordflow">if</span> (!rtp-&gt;ioqueue) {</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      }</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;   }</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;   pj_stun_config_init(&amp;stun_config, &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a>.factory, 0, rtp-&gt;ioqueue-&gt;ioqueue, rtp-&gt;ioqueue-&gt;timerheap);</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aac9d720f1922d92f186b0df72b624ea0">stun_software_attribute</a>) {</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;      stun_config.software_name = pj_str(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;   }</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;   <span class="comment">/* Use ICE session group lock for TURN session to avoid deadlock */</span></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;   pj_turn_sock_cfg_default(&amp;turn_sock_cfg);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;   ice = rtp-&gt;ice;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;   <span class="keywordflow">if</span> (ice) {</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;      turn_sock_cfg.grp_lock = ice-&gt;<a class="code" href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">real_ice</a>-&gt;grp_lock;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ice, +1);</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;   }</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;   <span class="comment">/* Release the instance lock to avoid deadlock with PJPROJECT group lock */</span></div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;   status = pj_turn_sock_create(&amp;stun_config,</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a>(&amp;addr) ? pj_AF_INET() : pj_AF_INET6(), conn_type,</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      turn_cb, &amp;turn_sock_cfg, instance, turn_sock);</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(ice);</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;   <span class="keywordflow">if</span> (status != PJ_SUCCESS) {</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;(%p) Could not create a TURN client socket\n&quot;</span>, instance);</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;   }</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;   cred.type = PJ_STUN_AUTH_CRED_STATIC;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;   pj_strset2(&amp;cred.data.static_cred.username, (<span class="keywordtype">char</span>*)username);</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;   cred.data.static_cred.data_type = PJ_STUN_PASSWD_PLAIN;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;   pj_strset2(&amp;cred.data.static_cred.data, (<span class="keywordtype">char</span>*)<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>);</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;   pj_turn_sock_alloc(*turn_sock, pj_cstr(&amp;turn_addr, server), port, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;cred, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE request TURN %s %s candidate\n&quot;</span>, instance,</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      transport == <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a806b187d5e4f7490e46a039792f850bc">AST_TRANSPORT_UDP</a> ? <span class="stringliteral">&quot;UDP&quot;</span> : <span class="stringliteral">&quot;TCP&quot;</span>,</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;      component == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a> ? <span class="stringliteral">&quot;RTP&quot;</span> : <span class="stringliteral">&quot;RTCP&quot;</span>);</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="comment">    * Because the TURN socket is asynchronous and we are synchronous we need to</span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;<span class="comment">    * wait until it is done</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;   <span class="keywordflow">while</span> (rtp-&gt;turn_state &lt; PJ_TURN_STATE_READY) {</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;rtp-&gt;cond, <a class="code" href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a>(instance), &amp;ts);</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;   }</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;   <span class="comment">/* If a TURN session was allocated add it as a candidate */</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;turn_state != PJ_TURN_STATE_READY) {</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;   }</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;   pj_turn_sock_get_info(*turn_sock, &amp;info);</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aec6a67dd9e8be83fce73c1c1a63a58d8">ast_rtp_ice_add_cand</a>(instance, rtp, component, conn_transport,</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      PJ_ICE_CAND_TYPE_RELAYED, 65535, &amp;info.relay_addr, &amp;info.relay_addr,</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;      &amp;info.mapped_addr, pj_sockaddr_get_len(&amp;info.relay_addr));</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;   <span class="keywordflow">if</span> (component == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a>) {</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;rtp-&gt;rtp_loop, &amp;loop);</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (component == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a>) {</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;rtp-&gt;rtcp_loop, &amp;loop);</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;   }</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00464">rtp_engine.h:464</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad9c660bcc45ef01492a0442a3dbc6f1d"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad9c660bcc45ef01492a0442a3dbc6f1d">ast_rtp_turn_rtcp_sock_cb</a></div><div class="ttdeci">static pj_turn_sock_cb ast_rtp_turn_rtcp_sock_cb</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01448">res_rtp_asterisk.c:1448</a></div></div>
<div class="ttc" id="netsock2_8h_html_aad98818272870e12d48fe4347aaa46d0"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a></div><div class="ttdeci">int ast_sockaddr_parse(struct ast_sockaddr *addr, const char *str, int flags)</div><div class="ttdoc">Parse an IPv4 or IPv6 address string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00230">netsock2.c:230</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a12d9cba0dfd29f12cf2f87a4ab1252e2"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a></div><div class="ttdeci">static pj_caching_pool cachingpool</div><div class="ttdoc">Pool factory used by pjlib to allocate memory. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00233">res_rtp_asterisk.c:233</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a8d2e62824f8d9acf79eae364ffa8f72f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a8d2e62824f8d9acf79eae364ffa8f72f">ast_rtp_turn_rtp_sock_cb</a></div><div class="ttdeci">static pj_turn_sock_cb ast_rtp_turn_rtp_sock_cb</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01382">res_rtp_asterisk.c:1382</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aac9d720f1922d92f186b0df72b624ea0"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aac9d720f1922d92f186b0df72b624ea0">stun_software_attribute</a></div><div class="ttdeci">static int stun_software_attribute</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00215">res_rtp_asterisk.c:215</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">include/asterisk/config.h:1135</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa05629cc7dbc25042c121a9670f150e3"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa05629cc7dbc25042c121a9670f150e3">TRANSPORT_TURN_RTP</a></div><div class="ttdeci">#define TRANSPORT_TURN_RTP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00293">res_rtp_asterisk.c:293</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ab4fdb206838f2974bd15fc2ca1e9d366"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a></div><div class="ttdeci">static struct ast_str * password</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00077">cdr_mysql.c:77</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a076af3a6d50860b502ce8182a5105dbd"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a076af3a6d50860b502ce8182a5105dbd">TRANSPORT_TURN_RTCP</a></div><div class="ttdeci">#define TRANSPORT_TURN_RTCP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00294">res_rtp_asterisk.c:294</a></div></div>
<div class="ttc" id="netsock2_8h_html_a51e2841175bf3ad58a4e11ad9fb2453f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a></div><div class="ttdeci">#define ast_sockaddr_port(addr)</div><div class="ttdoc">Get the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00521">netsock2.h:521</a></div></div>
<div class="ttc" id="astobj2_8h_html_a503b6c7ced96f9b56ec59c115cbeb29a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a></div><div class="ttdeci">void * ao2_object_get_lockaddr(void *obj)</div><div class="ttdoc">Return the mutex lock address of an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00476">astobj2.c:476</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="time_8h_html_a1d774df72e3dbb623475783e06ce4f61"><div class="ttname"><a href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a></div><div class="ttdeci">struct timeval ast_samp2tv(unsigned int _nsamp, unsigned int _rate)</div><div class="ttdoc">Returns a timeval corresponding to the duration of n samples at rate r. Useful to convert samples to ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00238">time.h:238</a></div></div>
<div class="ttc" id="structice__wrap_html"><div class="ttname"><a href="../../d9/db8/structice__wrap.html">ice_wrap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00320">res_rtp_asterisk.c:320</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a03f4d7d97d914208e1f779d1c09db7bb"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a03f4d7d97d914208e1f779d1c09db7bb">TURN_STATE_WAIT_TIME</a></div><div class="ttdeci">#define TURN_STATE_WAIT_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00107">res_rtp_asterisk.c:107</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aec6a67dd9e8be83fce73c1c1a63a58d8"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aec6a67dd9e8be83fce73c1c1a63a58d8">ast_rtp_ice_add_cand</a></div><div class="ttdeci">static void ast_rtp_ice_add_cand(struct ast_rtp_instance *instance, struct ast_rtp *rtp, unsigned comp_id, unsigned transport_id, pj_ice_cand_type type, pj_uint16_t local_pref, const pj_sockaddr_t *addr, const pj_sockaddr_t *base_addr, const pj_sockaddr_t *rel_addr, int addr_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01239">res_rtp_asterisk.c:1239</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00463">rtp_engine.h:463</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaad9e84526c8d48bd3e980e732dd1f7df"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a></div><div class="ttdeci">#define ast_debug_ice(sublevel,...)</div><div class="ttdoc">Log debug level ICE information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02898">rtp_engine.h:2898</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a80baeff1bd121c3168ede2a955e9b3a2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a80baeff1bd121c3168ede2a955e9b3a2">ast_rtp_instance_get_local_address</a></div><div class="ttdeci">void ast_rtp_instance_get_local_address(struct ast_rtp_instance *instance, struct ast_sockaddr *address)</div><div class="ttdoc">Get the local address that we are expecting RTP on. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00643">rtp_engine.c:643</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa2785c5990a086943fea750c980abbc3acd1be5fd1357a3d7f56ec62fc01bdc20"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3acd1be5fd1357a3d7f56ec62fc01bdc20">AST_TRANSPORT_TCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00061">netsock2.h:61</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="netsock2_8h_html_adbbb5a3382be0925c292a4933ce5b63d"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a></div><div class="ttdeci">int ast_sockaddr_is_ipv4(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if the address is an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00497">netsock2.c:497</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a945018e0a29fb3127c1003645a2277dc"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a945018e0a29fb3127c1003645a2277dc">rtp_ioqueue_thread_get_or_create</a></div><div class="ttdeci">static struct ast_rtp_ioqueue_thread * rtp_ioqueue_thread_get_or_create(void)</div><div class="ttdoc">Finder and allocator for an ioqueue thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01512">res_rtp_asterisk.c:1512</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa2785c5990a086943fea750c980abbc3a806b187d5e4f7490e46a039792f850bc"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a806b187d5e4f7490e46a039792f850bc">AST_TRANSPORT_UDP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00060">netsock2.h:60</a></div></div>
<div class="ttc" id="structice__wrap_html_a947772eea928bd56792836dc5c55dac9"><div class="ttname"><a href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">ice_wrap::real_ice</a></div><div class="ttdeci">pj_ice_sess * real_ice</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">res_rtp_asterisk.c:321</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4db6e4d59c2243c731f2155981d48d56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4db6e4d59c2243c731f2155981d48d56">&#9670;&nbsp;</a></span>ast_rtp_interpret()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* ast_rtp_interpret </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d11/structast__srtp.html">ast_srtp</a> *&#160;</td>
          <td class="paramname"><em>srtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>remote_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>read_area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>prev_seqno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>bundled</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">7200</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00517">ao2_replace</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00347">ast_codec_media_type2str()</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00378">ast_codec_samples_count()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00303">AST_CONTROL_SRCCHANGE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02864">ast_debug_rtp_packet_is_allowed</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00542">ast_format_cache_is_slinear()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00201">ast_format_cmp()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00036">AST_FORMAT_CMP_EQUAL</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00379">ast_format_get_sample_rate()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00354">ast_format_get_type()</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00236">ast_format_t140</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00241">ast_format_t140_red</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00597">ast_frame_byteswap_be</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">AST_FRAME_DTMF_END</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00114">AST_FRAME_TEXT</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">AST_FRAME_VIDEO</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00147">AST_FRFLAG_HAS_SEQUENCE_NUMBER</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00143">AST_FRFLAG_HAS_TIMING_INFO</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">AST_FRIENDLY_OFFSET</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00577">ast_frisolate</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00420">AST_LIST_FIRST</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00680">AST_LIST_HEAD_INIT_NOLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00034">AST_MEDIA_TYPE_IMAGE</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00035">AST_MEDIA_TYPE_TEXT</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00033">AST_MEDIA_TYPE_VIDEO</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03323">ast_rtcp_calc_interval()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04814">ast_rtcp_write()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00270">AST_RTP_CISCO_DTMF</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00268">AST_RTP_CN</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01479">ast_rtp_codecs_get_payload()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00266">AST_RTP_DTMF</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04209">ast_rtp_dtmf_continuation()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l04030">ast_rtp_get_rate()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02234">ast_rtp_instance_get_bridged()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00727">ast_rtp_instance_get_codecs()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00238">ast_samp2tv()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00226">ast_tv()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06649">bridge_p2p_rtp_write()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05413">calc_rxstamp()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05463">create_dtmf_frame()</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00441">DEBUG_ATLEAST</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00185">ast_frame::delivery</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00147">ext</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">ast_rtp::f</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00160">ast_frame_subclass::frame_ending</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00381">ast_rtp::lastitexttimestamp</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00379">ast_rtp::lastividtimestamp</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00193">ast_frame::len</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00241">LOG_DEBUG</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">ast_frame::mallocd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">ast_frame::offset</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05724">process_cn_rfc3389()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05644">process_dtmf_cisco()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05506">process_dtmf_rfc2833()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07142">rtp_instance_parse_extmap_extensions()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00094">RTP_SEQ_MOD</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">ast_frame::seqno</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">ast_frame::src</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00209">srtp_replay_protection</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">ast_frame::stream_num</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">ast_rtp::themssrc</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">ast_rtp::themssrc_valid</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00191">ast_frame::ts</a>, and <a class="el" href="../../de/d15/res__srtp_8h_source.html#l00048">ast_srtp_res::unprotect</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;{</div><div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *rtpheader = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>*)(read_area);</div><div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance1;</div><div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;   <span class="keywordtype">int</span> res = length, hdrlen = 12, ssrc, seqno, payloadtype, padding, mark, <a class="code" href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a>, cc;</div><div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> timestamp;</div><div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *, payload, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d42/structframe__list.html">frame_list</a> <a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>;</div><div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160;</div><div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160;   <span class="comment">/* If this payload is encrypted then decrypt it using the given SRTP instance */</span></div><div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;   <span class="keywordflow">if</span> ((*read_area &amp; 0xC0) &amp;&amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a0d5514f710438c5808ce30d0d35554c2">res_srtp</a> &amp;&amp; srtp &amp;&amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a0d5514f710438c5808ce30d0d35554c2">res_srtp</a>-&gt;<a class="code" href="../../d0/d5d/structast__srtp__res.html#a262f1edfb2ae69fc526cb4a6aea3a103">unprotect</a>(</div><div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160;          srtp, read_area, &amp;res, 0 | (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a62f7bf8eadfec58f81f33a8c90458f15">srtp_replay_protection</a> &lt;&lt; 1)) &lt; 0) {</div><div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07216"></a><span class="lineno"> 7216</span>&#160;   }</div><div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;</div><div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;   <span class="comment">/* If we are currently sending DTMF to the remote party send a continuation packet */</span></div><div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;sending_digit) {</div><div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4cf4fc0fc38586fe2f7692549f049b82">ast_rtp_dtmf_continuation</a>(instance);</div><div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160;   }</div><div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;</div><div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;   <span class="comment">/* Pull out the various other fields we will need */</span></div><div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;   ssrc = ntohl(rtpheader[2]);</div><div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;   seqno = ntohl(rtpheader[0]);</div><div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160;   payloadtype = (seqno &amp; 0x7f0000) &gt;&gt; 16;</div><div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;   padding = seqno &amp; (1 &lt;&lt; 29);</div><div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160;   mark = seqno &amp; (1 &lt;&lt; 23);</div><div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;   ext = seqno &amp; (1 &lt;&lt; 28);</div><div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;   cc = (seqno &amp; 0xF000000) &gt;&gt; 24;</div><div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160;   seqno &amp;= 0xffff;</div><div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;   timestamp = ntohl(rtpheader[1]);</div><div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160;</div><div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>);</div><div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160;</div><div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;   <span class="comment">/* Remove any padding bytes that may be present */</span></div><div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;   <span class="keywordflow">if</span> (padding) {</div><div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;      res -= read_area[res - 1];</div><div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;   }</div><div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;</div><div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;   <span class="comment">/* Skip over any CSRC fields */</span></div><div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160;   <span class="keywordflow">if</span> (cc) {</div><div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;      hdrlen += cc * 4;</div><div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;   }</div><div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;</div><div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;   <span class="comment">/* Look for any RTP extensions, currently we do not support any */</span></div><div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160;   <span class="keywordflow">if</span> (ext) {</div><div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;      <span class="keywordtype">int</span> extensions_size = (ntohl(rtpheader[hdrlen/4]) &amp; 0xffff) &lt;&lt; 2;</div><div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> profile;</div><div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160;      profile = (ntohl(rtpheader[3]) &amp; 0xffff0000) &gt;&gt; 16;</div><div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160;</div><div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;      <span class="keywordflow">if</span> (profile == 0xbede) {</div><div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;         <span class="comment">/* We skip over the first 4 bytes as they are just for the one byte extension header */</span></div><div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a995ed3a06efd4fc6c500c374e4483fde">rtp_instance_parse_extmap_extensions</a>(instance, rtp, read_area + hdrlen + 4, extensions_size);</div><div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a>(1)) {</div><div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160;         <span class="keywordflow">if</span> (profile == 0x505a) {</div><div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Found Zfone extension in RTP stream - zrtp - not supported.\n&quot;</span>);</div><div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;            <span class="comment">/* SDP negotiated RTP extensions can not currently be output in logging */</span></div><div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Found unknown RTP Extensions %x\n&quot;</span>, profile);</div><div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;         }</div><div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160;      }</div><div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;</div><div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;      hdrlen += extensions_size;</div><div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;      hdrlen += 4;</div><div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160;   }</div><div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;</div><div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;   <span class="comment">/* Make sure after we potentially mucked with the header length that it is once again valid */</span></div><div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160;   <span class="keywordflow">if</span> (res &lt; hdrlen) {</div><div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;RTP Read too short (%d, expecting %d\n&quot;</span>, res, hdrlen);</div><div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>) ? <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>) : &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160;   }</div><div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160;</div><div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;   <span class="comment">/* Only non-bundled instances can change/learn the remote&#39;s SSRC implicitly. */</span></div><div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160;   <span class="keywordflow">if</span> (!bundled) {</div><div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160;      <span class="comment">/* Force a marker bit and change SSRC if the SSRC changes */</span></div><div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">themssrc_valid</a> &amp;&amp; rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">themssrc</a> != ssrc) {</div><div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f, srcupdate = {</div><div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>,</div><div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;            .subclass.integer = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a>,</div><div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;         };</div><div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;</div><div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;         <span class="keywordflow">if</span> (!mark) {</div><div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a>) {</div><div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(0, <span class="stringliteral">&quot;(%p) RTP forcing Marker bit, because SSRC has changed\n&quot;</span>, instance);</div><div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;            }</div><div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;            mark = 1;</div><div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;         }</div><div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;</div><div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;         f = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a>(&amp;srcupdate);</div><div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;</div><div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;         rtp-&gt;seedrxseqno = 0;</div><div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;         rtp-&gt;rxcount = 0;</div><div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160;         rtp-&gt;rxoctetcount = 0;</div><div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;         rtp-&gt;cycles = 0;</div><div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;         prev_seqno = 0;</div><div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;         rtp-&gt;last_seqno = 0;</div><div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;         rtp-&gt;last_end_timestamp.ts = 0;</div><div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;         rtp-&gt;last_end_timestamp.is_set = 0;</div><div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160;         <span class="keywordflow">if</span> (rtp-&gt;rtcp) {</div><div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;            rtp-&gt;rtcp-&gt;expected_prior = 0;</div><div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;            rtp-&gt;rtcp-&gt;received_prior = 0;</div><div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;         }</div><div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;      }</div><div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;</div><div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">themssrc</a> = ssrc; <span class="comment">/* Record their SSRC to put in future RR */</span></div><div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">themssrc_valid</a> = 1;</div><div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;   }</div><div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160;</div><div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;   rtp-&gt;rxcount++;</div><div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;   rtp-&gt;rxoctetcount += (res - hdrlen);</div><div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;rxcount == 1) {</div><div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160;      rtp-&gt;seedrxseqno = <a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a>;</div><div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160;   }</div><div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;</div><div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;   <span class="comment">/* Do not schedule RR if RTCP isn&#39;t run */</span></div><div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;rtcp &amp;&amp; !<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;rtp-&gt;rtcp-&gt;them) &amp;&amp; rtp-&gt;rtcp-&gt;schedid &lt; 0) {</div><div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;      <span class="comment">/* Schedule transmission of Receiver Report */</span></div><div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(instance, +1);</div><div class="line"><a name="l07321"></a><span class="lineno"> 7321</span>&#160;      rtp-&gt;rtcp-&gt;schedid = <a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(rtp-&gt;sched, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#adabbce218f278a5ee9224a5c4dd94754">ast_rtcp_calc_interval</a>(rtp), <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aff89c2855ec73ffa6efdc958bb71c2e8">ast_rtcp_write</a>, instance);</div><div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;rtcp-&gt;schedid &lt; 0) {</div><div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(instance, -1);</div><div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;scheduling RTCP transmission failed.\n&quot;</span>);</div><div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;      }</div><div class="line"><a name="l07326"></a><span class="lineno"> 7326</span>&#160;   }</div><div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160;   <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)prev_seqno - (<span class="keywordtype">int</span>)seqno  &gt; 100) <span class="comment">/* if so it would indicate that the sender cycled; allow for misordering */</span></div><div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160;      rtp-&gt;cycles += <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af3a188c3caa83026e351d58ef855424a">RTP_SEQ_MOD</a>;</div><div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160;</div><div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160;   <span class="comment">/* If we are directly bridged to another instance send the audio directly out,</span></div><div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160;<span class="comment">    * but only after updating core information about the received traffic so that</span></div><div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;<span class="comment">    * outgoing RTCP reflects it.</span></div><div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;   instance1 = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a71281cffb0ab0658839b8da1296d06b6">ast_rtp_instance_get_bridged</a>(instance);</div><div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;   <span class="keywordflow">if</span> (instance1</div><div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;      &amp;&amp; !<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3ca5bc2e876461441b96ea02dcd41f81">bridge_p2p_rtp_write</a>(instance, instance1, rtpheader, res, hdrlen)) {</div><div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160;      <span class="keyword">struct </span>timeval rxtime;</div><div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;</div><div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;      <span class="comment">/* Update statistics for jitter so they are correct in RTCP */</span></div><div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a8c81edd11824e8abc1d749ef12ebcba5">calc_rxstamp</a>(&amp;rxtime, rtp, timestamp, mark);</div><div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160;</div><div class="line"><a name="l07343"></a><span class="lineno"> 7343</span>&#160;      <span class="comment">/* When doing P2P we don&#39;t need to raise any frames about SSRC change to the core */</span></div><div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160;      <span class="keywordflow">while</span> ((f = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)) != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;      }</div><div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;</div><div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;   }</div><div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160;</div><div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;   payload = <a class="code" href="../../d5/dde/rtp__engine_8h.html#abcc5bda5d149e63f9e2ab630b26fd66c">ast_rtp_codecs_get_payload</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(instance), payloadtype);</div><div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160;   <span class="keywordflow">if</span> (!payload) {</div><div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160;      <span class="comment">/* Unknown payload type. */</span></div><div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>) ? <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>) : &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160;   }</div><div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160;</div><div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;   <span class="comment">/* If the payload is not actually an Asterisk one but a special one pass it off to the respective handler */</span></div><div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160;   <span class="keywordflow">if</span> (!payload-&gt;asterisk_format) {</div><div class="line"><a name="l07359"></a><span class="lineno"> 7359</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160;      <span class="keywordflow">if</span> (payload-&gt;rtp_code == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a>) {</div><div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;         <span class="comment">/* process_dtmf_rfc2833 may need to return multiple frames. We do this</span></div><div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;<span class="comment">          * by passing the pointer to the frame list to it so that the method</span></div><div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160;<span class="comment">          * can append frames to the list as needed.</span></div><div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a5f3d4d692d14bc2a712ae50edad6feca">process_dtmf_rfc2833</a>(instance, read_area + hdrlen, res - hdrlen, seqno, timestamp, payloadtype, mark, &amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>);</div><div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (payload-&gt;rtp_code == <a class="code" href="../../d5/dde/rtp__engine_8h.html#afd196e2ba79659dff0799d49494e8b45">AST_RTP_CISCO_DTMF</a>) {</div><div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;         f = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a1483ca8227852811b993309a78562067">process_dtmf_cisco</a>(instance, read_area + hdrlen, res - hdrlen, seqno, timestamp, payloadtype, mark);</div><div class="line"><a name="l07368"></a><span class="lineno"> 7368</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (payload-&gt;rtp_code == <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad924782a38efb3a8f9edbb92d3135541">AST_RTP_CN</a>) {</div><div class="line"><a name="l07369"></a><span class="lineno"> 7369</span>&#160;         f = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ababe6a4928e53febfa8850584b9d88d7">process_cn_rfc3389</a>(instance, read_area + hdrlen, res - hdrlen, seqno, timestamp, payloadtype, mark);</div><div class="line"><a name="l07370"></a><span class="lineno"> 7370</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07371"></a><span class="lineno"> 7371</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Unknown RTP codec %d received from &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l07372"></a><span class="lineno"> 7372</span>&#160;            payloadtype,</div><div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(remote_address));</div><div class="line"><a name="l07374"></a><span class="lineno"> 7374</span>&#160;      }</div><div class="line"><a name="l07375"></a><span class="lineno"> 7375</span>&#160;</div><div class="line"><a name="l07376"></a><span class="lineno"> 7376</span>&#160;      <span class="keywordflow">if</span> (f) {</div><div class="line"><a name="l07377"></a><span class="lineno"> 7377</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l07378"></a><span class="lineno"> 7378</span>&#160;      }</div><div class="line"><a name="l07379"></a><span class="lineno"> 7379</span>&#160;      <span class="comment">/* Even if no frame was returned by one of the above methods,</span></div><div class="line"><a name="l07380"></a><span class="lineno"> 7380</span>&#160;<span class="comment">       * we may have a frame to return in our frame list</span></div><div class="line"><a name="l07381"></a><span class="lineno"> 7381</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l07382"></a><span class="lineno"> 7382</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>) ? <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>) : &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07383"></a><span class="lineno"> 7383</span>&#160;   }</div><div class="line"><a name="l07384"></a><span class="lineno"> 7384</span>&#160;</div><div class="line"><a name="l07385"></a><span class="lineno"> 7385</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(rtp-&gt;lastrxformat, payload-&gt;format);</div><div class="line"><a name="l07386"></a><span class="lineno"> 7386</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, payload-&gt;format);</div><div class="line"><a name="l07387"></a><span class="lineno"> 7387</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>)) {</div><div class="line"><a name="l07388"></a><span class="lineno"> 7388</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>:</div><div class="line"><a name="l07389"></a><span class="lineno"> 7389</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>;</div><div class="line"><a name="l07390"></a><span class="lineno"> 7390</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07391"></a><span class="lineno"> 7391</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>:</div><div class="line"><a name="l07392"></a><span class="lineno"> 7392</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a>;</div><div class="line"><a name="l07393"></a><span class="lineno"> 7393</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07394"></a><span class="lineno"> 7394</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212acdcfb16791fa00269621e51c42f5a4c3">AST_MEDIA_TYPE_TEXT</a>:</div><div class="line"><a name="l07395"></a><span class="lineno"> 7395</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a>;</div><div class="line"><a name="l07396"></a><span class="lineno"> 7396</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07397"></a><span class="lineno"> 7397</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212acab76c9fe8b00719aa5276d92922f2ca">AST_MEDIA_TYPE_IMAGE</a>:</div><div class="line"><a name="l07398"></a><span class="lineno"> 7398</span>&#160;      <span class="comment">/* Fall through */</span></div><div class="line"><a name="l07399"></a><span class="lineno"> 7399</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l07400"></a><span class="lineno"> 7400</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown or unsupported media type: %s\n&quot;</span>,</div><div class="line"><a name="l07401"></a><span class="lineno"> 7401</span>&#160;         <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>)));</div><div class="line"><a name="l07402"></a><span class="lineno"> 7402</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07403"></a><span class="lineno"> 7403</span>&#160;   }</div><div class="line"><a name="l07404"></a><span class="lineno"> 7404</span>&#160;</div><div class="line"><a name="l07405"></a><span class="lineno"> 7405</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;dtmf_timeout &amp;&amp; rtp-&gt;dtmf_timeout &lt; timestamp) {</div><div class="line"><a name="l07406"></a><span class="lineno"> 7406</span>&#160;      rtp-&gt;dtmf_timeout = 0;</div><div class="line"><a name="l07407"></a><span class="lineno"> 7407</span>&#160;</div><div class="line"><a name="l07408"></a><span class="lineno"> 7408</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;resp) {</div><div class="line"><a name="l07409"></a><span class="lineno"> 7409</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l07410"></a><span class="lineno"> 7410</span>&#160;         f = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d07f83ec38c7407d5c3e98936269221">create_dtmf_frame</a>(instance, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>, 0);</div><div class="line"><a name="l07411"></a><span class="lineno"> 7411</span>&#160;         f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(rtp-&gt;dtmf_duration, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>)), <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(0, 0));</div><div class="line"><a name="l07412"></a><span class="lineno"> 7412</span>&#160;         rtp-&gt;resp = 0;</div><div class="line"><a name="l07413"></a><span class="lineno"> 7413</span>&#160;         rtp-&gt;dtmf_timeout = rtp-&gt;dtmf_duration = 0;</div><div class="line"><a name="l07414"></a><span class="lineno"> 7414</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l07415"></a><span class="lineno"> 7415</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>);</div><div class="line"><a name="l07416"></a><span class="lineno"> 7416</span>&#160;      }</div><div class="line"><a name="l07417"></a><span class="lineno"> 7417</span>&#160;   }</div><div class="line"><a name="l07418"></a><span class="lineno"> 7418</span>&#160;</div><div class="line"><a name="l07419"></a><span class="lineno"> 7419</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a> = <span class="stringliteral">&quot;RTP&quot;</span>;</div><div class="line"><a name="l07420"></a><span class="lineno"> 7420</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">mallocd</a> = 0;</div><div class="line"><a name="l07421"></a><span class="lineno"> 7421</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = res - hdrlen;</div><div class="line"><a name="l07422"></a><span class="lineno"> 7422</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = read_area + hdrlen;</div><div class="line"><a name="l07423"></a><span class="lineno"> 7423</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = hdrlen + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l07424"></a><span class="lineno"> 7424</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feaccf78cd00b148145d1cc9e0f60fb7516">AST_FRFLAG_HAS_SEQUENCE_NUMBER</a>);</div><div class="line"><a name="l07425"></a><span class="lineno"> 7425</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a> = <a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a>;</div><div class="line"><a name="l07426"></a><span class="lineno"> 7426</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> = rtp-&gt;stream_num;</div><div class="line"><a name="l07427"></a><span class="lineno"> 7427</span>&#160;</div><div class="line"><a name="l07428"></a><span class="lineno"> 7428</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#adbb2a7346ad99c0a41cd6c43548835ba">ast_format_t140</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>)</div><div class="line"><a name="l07429"></a><span class="lineno"> 7429</span>&#160;      &amp;&amp; ((<span class="keywordtype">int</span>)seqno - (prev_seqno + 1) &gt; 0)</div><div class="line"><a name="l07430"></a><span class="lineno"> 7430</span>&#160;      &amp;&amp; ((<span class="keywordtype">int</span>)seqno - (prev_seqno + 1) &lt; 10)) {</div><div class="line"><a name="l07431"></a><span class="lineno"> 7431</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;</div><div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160;      memmove(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>+3, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);</div><div class="line"><a name="l07434"></a><span class="lineno"> 7434</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> +=3;</div><div class="line"><a name="l07435"></a><span class="lineno"> 7435</span>&#160;      *data++ = 0xEF;</div><div class="line"><a name="l07436"></a><span class="lineno"> 7436</span>&#160;      *data++ = 0xBF;</div><div class="line"><a name="l07437"></a><span class="lineno"> 7437</span>&#160;      *data = 0xBD;</div><div class="line"><a name="l07438"></a><span class="lineno"> 7438</span>&#160;   }</div><div class="line"><a name="l07439"></a><span class="lineno"> 7439</span>&#160;</div><div class="line"><a name="l07440"></a><span class="lineno"> 7440</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#abd1090ebd4176d40eabbe0878c82e216">ast_format_t140_red</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l07441"></a><span class="lineno"> 7441</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l07442"></a><span class="lineno"> 7442</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *header_end;</div><div class="line"><a name="l07443"></a><span class="lineno"> 7443</span>&#160;      <span class="keywordtype">int</span> num_generations;</div><div class="line"><a name="l07444"></a><span class="lineno"> 7444</span>&#160;      <span class="keywordtype">int</span> header_length;</div><div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160;      <span class="keywordtype">int</span> diff =(int)seqno - (prev_seqno+1); <span class="comment">/* if diff = 0, no drop*/</span></div><div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;      <span class="keywordtype">int</span> x;</div><div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160;</div><div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#adbb2a7346ad99c0a41cd6c43548835ba">ast_format_t140</a>);</div><div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;      header_end = memchr(data, ((*data) &amp; 0x7f), rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);</div><div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160;      <span class="keywordflow">if</span> (header_end == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l07452"></a><span class="lineno"> 7452</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>) ? <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>) : &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07453"></a><span class="lineno"> 7453</span>&#160;      }</div><div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;      header_end++;</div><div class="line"><a name="l07455"></a><span class="lineno"> 7455</span>&#160;</div><div class="line"><a name="l07456"></a><span class="lineno"> 7456</span>&#160;      header_length = header_end - <a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>;</div><div class="line"><a name="l07457"></a><span class="lineno"> 7457</span>&#160;      num_generations = header_length / 4;</div><div class="line"><a name="l07458"></a><span class="lineno"> 7458</span>&#160;      len = header_length;</div><div class="line"><a name="l07459"></a><span class="lineno"> 7459</span>&#160;</div><div class="line"><a name="l07460"></a><span class="lineno"> 7460</span>&#160;      <span class="keywordflow">if</span> (!diff) {</div><div class="line"><a name="l07461"></a><span class="lineno"> 7461</span>&#160;         <span class="keywordflow">for</span> (x = 0; x &lt; num_generations; x++)</div><div class="line"><a name="l07462"></a><span class="lineno"> 7462</span>&#160;            len += data[x * 4 + 3];</div><div class="line"><a name="l07463"></a><span class="lineno"> 7463</span>&#160;</div><div class="line"><a name="l07464"></a><span class="lineno"> 7464</span>&#160;         <span class="keywordflow">if</span> (!(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> - len))</div><div class="line"><a name="l07465"></a><span class="lineno"> 7465</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>) ? <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>) : &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07466"></a><span class="lineno"> 7466</span>&#160;</div><div class="line"><a name="l07467"></a><span class="lineno"> 7467</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> += <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l07468"></a><span class="lineno"> 7468</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> -= <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l07469"></a><span class="lineno"> 7469</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (diff &gt; num_generations &amp;&amp; diff &lt; 10) {</div><div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160;         len -= 3;</div><div class="line"><a name="l07471"></a><span class="lineno"> 7471</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> += <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l07472"></a><span class="lineno"> 7472</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> -= <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160;</div><div class="line"><a name="l07474"></a><span class="lineno"> 7474</span>&#160;         data = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l07475"></a><span class="lineno"> 7475</span>&#160;         *data++ = 0xEF;</div><div class="line"><a name="l07476"></a><span class="lineno"> 7476</span>&#160;         *data++ = 0xBF;</div><div class="line"><a name="l07477"></a><span class="lineno"> 7477</span>&#160;         *data = 0xBD;</div><div class="line"><a name="l07478"></a><span class="lineno"> 7478</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07479"></a><span class="lineno"> 7479</span>&#160;         <span class="keywordflow">for</span> ( x = 0; x &lt; num_generations - diff; x++)</div><div class="line"><a name="l07480"></a><span class="lineno"> 7480</span>&#160;            len += data[x * 4 + 3];</div><div class="line"><a name="l07481"></a><span class="lineno"> 7481</span>&#160;</div><div class="line"><a name="l07482"></a><span class="lineno"> 7482</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> += <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l07483"></a><span class="lineno"> 7483</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> -= <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l07484"></a><span class="lineno"> 7484</span>&#160;      }</div><div class="line"><a name="l07485"></a><span class="lineno"> 7485</span>&#160;   }</div><div class="line"><a name="l07486"></a><span class="lineno"> 7486</span>&#160;</div><div class="line"><a name="l07487"></a><span class="lineno"> 7487</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) == <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l07488"></a><span class="lineno"> 7488</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = <a class="code" href="../../d1/d16/codec_8h.html#a7f050fb90e8f78060ef644b502044412">ast_codec_samples_count</a>(&amp;rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>);</div><div class="line"><a name="l07489"></a><span class="lineno"> 7489</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/d1c/format__cache_8h.html#a309515067d94f11b99659093c5beefee">ast_format_cache_is_slinear</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>)) {</div><div class="line"><a name="l07490"></a><span class="lineno"> 7490</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a0eb09df2bca453c21ced51b12b52a88b">ast_frame_byteswap_be</a>(&amp;rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>);</div><div class="line"><a name="l07491"></a><span class="lineno"> 7491</span>&#160;      }</div><div class="line"><a name="l07492"></a><span class="lineno"> 7492</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a8c81edd11824e8abc1d749ef12ebcba5">calc_rxstamp</a>(&amp;rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>, rtp, timestamp, mark);</div><div class="line"><a name="l07493"></a><span class="lineno"> 7493</span>&#160;      <span class="comment">/* Add timing data to let ast_generic_bridge() put the frame into a jitterbuf */</span></div><div class="line"><a name="l07494"></a><span class="lineno"> 7494</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a">AST_FRFLAG_HAS_TIMING_INFO</a>);</div><div class="line"><a name="l07495"></a><span class="lineno"> 7495</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ts</a> = timestamp / (<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) / 1000);</div><div class="line"><a name="l07496"></a><span class="lineno"> 7496</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> / ((<a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) / 1000));</div><div class="line"><a name="l07497"></a><span class="lineno"> 7497</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) == <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>) {</div><div class="line"><a name="l07498"></a><span class="lineno"> 7498</span>&#160;      <span class="comment">/* Video -- samples is # of samples vs. 90000 */</span></div><div class="line"><a name="l07499"></a><span class="lineno"> 7499</span>&#160;      <span class="keywordflow">if</span> (!rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a19258cc54fe0aafdf3bbe1f4fcc29218">lastividtimestamp</a>)</div><div class="line"><a name="l07500"></a><span class="lineno"> 7500</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a19258cc54fe0aafdf3bbe1f4fcc29218">lastividtimestamp</a> = timestamp;</div><div class="line"><a name="l07501"></a><span class="lineno"> 7501</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a8c81edd11824e8abc1d749ef12ebcba5">calc_rxstamp</a>(&amp;rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>, rtp, timestamp, mark);</div><div class="line"><a name="l07502"></a><span class="lineno"> 7502</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a">AST_FRFLAG_HAS_TIMING_INFO</a>);</div><div class="line"><a name="l07503"></a><span class="lineno"> 7503</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ts</a> = timestamp / (<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) / 1000);</div><div class="line"><a name="l07504"></a><span class="lineno"> 7504</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = timestamp - rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a19258cc54fe0aafdf3bbe1f4fcc29218">lastividtimestamp</a>;</div><div class="line"><a name="l07505"></a><span class="lineno"> 7505</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a19258cc54fe0aafdf3bbe1f4fcc29218">lastividtimestamp</a> = timestamp;</div><div class="line"><a name="l07506"></a><span class="lineno"> 7506</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>.tv_sec = 0;</div><div class="line"><a name="l07507"></a><span class="lineno"> 7507</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>.tv_usec = 0;</div><div class="line"><a name="l07508"></a><span class="lineno"> 7508</span>&#160;      <span class="comment">/* Pass the RTP marker bit as bit */</span></div><div class="line"><a name="l07509"></a><span class="lineno"> 7509</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#a3779d6222d7632f2b46d2bbf06de7bb2">frame_ending</a> = mark ? 1 : 0;</div><div class="line"><a name="l07510"></a><span class="lineno"> 7510</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) == <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212acdcfb16791fa00269621e51c42f5a4c3">AST_MEDIA_TYPE_TEXT</a>) {</div><div class="line"><a name="l07511"></a><span class="lineno"> 7511</span>&#160;      <span class="comment">/* TEXT -- samples is # of samples vs. 1000 */</span></div><div class="line"><a name="l07512"></a><span class="lineno"> 7512</span>&#160;      <span class="keywordflow">if</span> (!rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#ae62094357b73bc730994119ae220bbd2">lastitexttimestamp</a>)</div><div class="line"><a name="l07513"></a><span class="lineno"> 7513</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#ae62094357b73bc730994119ae220bbd2">lastitexttimestamp</a> = timestamp;</div><div class="line"><a name="l07514"></a><span class="lineno"> 7514</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = timestamp - rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#ae62094357b73bc730994119ae220bbd2">lastitexttimestamp</a>;</div><div class="line"><a name="l07515"></a><span class="lineno"> 7515</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#ae62094357b73bc730994119ae220bbd2">lastitexttimestamp</a> = timestamp;</div><div class="line"><a name="l07516"></a><span class="lineno"> 7516</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>.tv_sec = 0;</div><div class="line"><a name="l07517"></a><span class="lineno"> 7517</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>.tv_usec = 0;</div><div class="line"><a name="l07518"></a><span class="lineno"> 7518</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07519"></a><span class="lineno"> 7519</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown or unsupported media type: %s\n&quot;</span>,</div><div class="line"><a name="l07520"></a><span class="lineno"> 7520</span>&#160;         <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>)));</div><div class="line"><a name="l07521"></a><span class="lineno"> 7521</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07522"></a><span class="lineno"> 7522</span>&#160;   }</div><div class="line"><a name="l07523"></a><span class="lineno"> 7523</span>&#160;</div><div class="line"><a name="l07524"></a><span class="lineno"> 7524</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, &amp;rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l07525"></a><span class="lineno"> 7525</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>);</div><div class="line"><a name="l07526"></a><span class="lineno"> 7526</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00036">format.h:36</a></div></div>
<div class="ttc" id="format_8h_html_a0aba6e17ced3e85e838ea097baa5ddc7"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a></div><div class="ttdeci">enum ast_media_type ast_format_get_type(const struct ast_format *format)</div><div class="ttdoc">Get the media type of a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00354">format.c:354</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abcc5bda5d149e63f9e2ab630b26fd66c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abcc5bda5d149e63f9e2ab630b26fd66c">ast_rtp_codecs_get_payload</a></div><div class="ttdeci">struct ast_rtp_payload_type * ast_rtp_codecs_get_payload(struct ast_rtp_codecs *codecs, int payload)</div><div class="ttdoc">Retrieve rx payload mapped information by payload type. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01479">rtp_engine.c:1479</a></div></div>
<div class="ttc" id="linkedlists_8h_html_adf1959c5c03a3a706da97ad2f49617e5"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a></div><div class="ttdeci">#define AST_LIST_FIRST(head)</div><div class="ttdoc">Returns the first entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00420">linkedlists.h:420</a></div></div>
<div class="ttc" id="structast__frame_html_aed7ea92f45bd273dde380a45ddced592"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">ast_frame::offset</a></div><div class="ttdeci">int offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">include/asterisk/frame.h:179</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a5f3d4d692d14bc2a712ae50edad6feca"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a5f3d4d692d14bc2a712ae50edad6feca">process_dtmf_rfc2833</a></div><div class="ttdeci">static void process_dtmf_rfc2833(struct ast_rtp_instance *instance, unsigned char *data, int len, unsigned int seqno, unsigned int timestamp, int payloadtype, int mark, struct frame_list *frames)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05506">res_rtp_asterisk.c:5506</a></div></div>
<div class="ttc" id="format__cache_8h_html_abd1090ebd4176d40eabbe0878c82e216"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#abd1090ebd4176d40eabbe0878c82e216">ast_format_t140_red</a></div><div class="ttdeci">struct ast_format * ast_format_t140_red</div><div class="ttdoc">Built-in cached t140 red format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00241">format_cache.c:241</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a995ed3a06efd4fc6c500c374e4483fde"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a995ed3a06efd4fc6c500c374e4483fde">rtp_instance_parse_extmap_extensions</a></div><div class="ttdeci">static void rtp_instance_parse_extmap_extensions(struct ast_rtp_instance *instance, struct ast_rtp *rtp, unsigned char *extension, int len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07142">res_rtp_asterisk.c:7142</a></div></div>
<div class="ttc" id="structast__frame_html_ab793262012344621455faf9266acbac2"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">ast_frame::seqno</a></div><div class="ttdeci">int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">include/asterisk/frame.h:195</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00114">include/asterisk/frame.h:114</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aff89c2855ec73ffa6efdc958bb71c2e8"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aff89c2855ec73ffa6efdc958bb71c2e8">ast_rtcp_write</a></div><div class="ttdeci">static int ast_rtcp_write(const void *data)</div><div class="ttdoc">Write a RTCP packet to the far end. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04814">res_rtp_asterisk.c:4814</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a">AST_FRFLAG_HAS_TIMING_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00143">include/asterisk/frame.h:143</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0376aa2503a185437fab8cb0b7d674fb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * ast_rtp_instance_get_codecs(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the codecs structure of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00727">rtp_engine.c:727</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="codec_8h_html_a97df2e6b65823085173625553d2e06c5"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a></div><div class="ttdeci">const char * ast_codec_media_type2str(enum ast_media_type type)</div><div class="ttdoc">Conversion function to take a media type and turn it into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00347">codec.c:347</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="structast__frame_html_a1eb46dcb363821328c0d2a758549216b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ast_frame::ts</a></div><div class="ttdeci">long ts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00191">include/asterisk/frame.h:191</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4d07f83ec38c7407d5c3e98936269221"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4d07f83ec38c7407d5c3e98936269221">create_dtmf_frame</a></div><div class="ttdeci">static struct ast_frame * create_dtmf_frame(struct ast_rtp_instance *instance, enum ast_frame_type type, int compensate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05463">res_rtp_asterisk.c:5463</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__rtp__payload__type_html"><div class="ttname"><a href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00275">rtp_engine.h:275</a></div></div>
<div class="ttc" id="logger_8h_html_a6ff63e8955665c4a58b1598f2b07c51a"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00241">logger.h:241</a></div></div>
<div class="ttc" id="http_8c_html_af9b32121c4ad80b0887a3d73fd24de5f"><div class="ttname"><a href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a></div><div class="ttdeci">const char * ext</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00147">http.c:147</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af3a188c3caa83026e351d58ef855424a"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af3a188c3caa83026e351d58ef855424a">RTP_SEQ_MOD</a></div><div class="ttdeci">#define RTP_SEQ_MOD</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00094">res_rtp_asterisk.c:94</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a0d5514f710438c5808ce30d0d35554c2"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a0d5514f710438c5808ce30d0d35554c2">res_srtp</a></div><div class="ttdeci">struct ast_srtp_res * res_srtp</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00177">rtp_engine.c:177</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212acab76c9fe8b00719aa5276d92922f2ca"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212acab76c9fe8b00719aa5276d92922f2ca">AST_MEDIA_TYPE_IMAGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00034">codec.h:34</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac8f7380b8620c80443286b44481f641c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a></div><div class="ttdeci">#define AST_FRIENDLY_OFFSET</div><div class="ttdoc">Offset into a frame&amp;#39;s data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">include/asterisk/frame.h:229</a></div></div>
<div class="ttc" id="structast__frame_html_af51e37c9331049b1e3d250a7c8bc3c26"><div class="ttname"><a href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">ast_frame::src</a></div><div class="ttdeci">const char * src</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">include/asterisk/frame.h:181</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="parser_8c_html_a61217d5bc9d5b446d9c08e7ca401b733"><div class="ttname"><a href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a></div><div class="ttdeci">static int frames</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d72/parser_8c_source.html#l00051">parser.c:51</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="time_8h_html_a1d774df72e3dbb623475783e06ce4f61"><div class="ttname"><a href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a></div><div class="ttdeci">struct timeval ast_samp2tv(unsigned int _nsamp, unsigned int _rate)</div><div class="ttdoc">Returns a timeval corresponding to the duration of n samples at rate r. Useful to convert samples to ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00238">time.h:238</a></div></div>
<div class="ttc" id="codec_8h_html_a7f050fb90e8f78060ef644b502044412"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a7f050fb90e8f78060ef644b502044412">ast_codec_samples_count</a></div><div class="ttdeci">unsigned int ast_codec_samples_count(struct ast_frame *frame)</div><div class="ttdoc">Get the number of samples contained within a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00378">codec.c:378</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structast__rtp_html_a7aaf7fb2b26e335304c8a89cc36aac00"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">ast_rtp::themssrc_valid</a></div><div class="ttdeci">unsigned int themssrc_valid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">res_rtp_asterisk.c:377</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4cf4fc0fc38586fe2f7692549f049b82"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4cf4fc0fc38586fe2f7692549f049b82">ast_rtp_dtmf_continuation</a></div><div class="ttdeci">static int ast_rtp_dtmf_continuation(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04209">res_rtp_asterisk.c:4209</a></div></div>
<div class="ttc" id="format__cache_8h_html_a309515067d94f11b99659093c5beefee"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a309515067d94f11b99659093c5beefee">ast_format_cache_is_slinear</a></div><div class="ttdeci">int ast_format_cache_is_slinear(struct ast_format *format)</div><div class="ttdoc">Determines if a format is one of the cached slin formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00542">format_cache.c:542</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga85ebb1735a6e9ce14a033b479076aaed"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a></div><div class="ttdeci">int ast_rtp_get_rate(const struct ast_format *format)</div><div class="ttdoc">Retrieve the sample rate of a format according to RTP specifications. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l04030">rtp_engine.c:4030</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="structast__rtp_html_afe92c8ff0d37afbf84f8715f4144ca27"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">ast_rtp::themssrc</a></div><div class="ttdeci">unsigned int themssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">res_rtp_asterisk.c:376</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a62f7bf8eadfec58f81f33a8c90458f15"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a62f7bf8eadfec58f81f33a8c90458f15">srtp_replay_protection</a></div><div class="ttdeci">static int srtp_replay_protection</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00209">res_rtp_asterisk.c:209</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">include/asterisk/frame.h:99</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga5009aeec1269fecc5f4e04c1c479116d"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a></div><div class="ttdeci">#define ast_debug_rtp_packet_is_allowed</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02864">rtp_engine.h:2864</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_afd196e2ba79659dff0799d49494e8b45"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#afd196e2ba79659dff0799d49494e8b45">AST_RTP_CISCO_DTMF</a></div><div class="ttdeci">#define AST_RTP_CISCO_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00270">rtp_engine.h:270</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a1483ca8227852811b993309a78562067"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a1483ca8227852811b993309a78562067">process_dtmf_cisco</a></div><div class="ttdeci">static struct ast_frame * process_dtmf_cisco(struct ast_rtp_instance *instance, unsigned char *data, int len, unsigned int seqno, unsigned int timestamp, int payloadtype, int mark)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05644">res_rtp_asterisk.c:5644</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__srtp__res_html_a262f1edfb2ae69fc526cb4a6aea3a103"><div class="ttname"><a href="../../d0/d5d/structast__srtp__res.html#a262f1edfb2ae69fc526cb4a6aea3a103">ast_srtp_res::unprotect</a></div><div class="ttdeci">int(* unprotect)(struct ast_srtp *srtp, void *buf, int *size, int rtcp)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/res__srtp_8h_source.html#l00048">res_srtp.h:48</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_a3779d6222d7632f2b46d2bbf06de7bb2"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#a3779d6222d7632f2b46d2bbf06de7bb2">ast_frame_subclass::frame_ending</a></div><div class="ttdeci">unsigned int frame_ending</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00160">include/asterisk/frame.h:160</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a8c81edd11824e8abc1d749ef12ebcba5"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a8c81edd11824e8abc1d749ef12ebcba5">calc_rxstamp</a></div><div class="ttdeci">static void calc_rxstamp(struct timeval *tv, struct ast_rtp *rtp, unsigned int timestamp, int mark)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05413">res_rtp_asterisk.c:5413</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a314496ce1d74ed7fdb9c5319c5e2e953"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a></div><div class="ttdeci">#define ast_frisolate(fr)</div><div class="ttdoc">Makes a frame independent of any static storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00577">include/asterisk/frame.h:577</a></div></div>
<div class="ttc" id="structast__rtp_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">ast_rtp::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">res_rtp_asterisk.c:370</a></div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="structast__frame_html_a41a708025486b4c9383e7432e9ba3f0e"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">ast_frame::delivery</a></div><div class="ttdeci">struct timeval delivery</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00185">include/asterisk/frame.h:185</a></div></div>
<div class="ttc" id="structast__frame_html_aed16590d48f41d89f31e0cf347f5cd99"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">ast_frame::mallocd</a></div><div class="ttdeci">int mallocd</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">include/asterisk/frame.h:175</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3ca5bc2e876461441b96ea02dcd41f81"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3ca5bc2e876461441b96ea02dcd41f81">bridge_p2p_rtp_write</a></div><div class="ttdeci">static int bridge_p2p_rtp_write(struct ast_rtp_instance *instance, struct ast_rtp_instance *instance1, unsigned int *rtpheader, int len, int hdrlen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06649">res_rtp_asterisk.c:6649</a></div></div>
<div class="ttc" id="structast__rtp_html_a19258cc54fe0aafdf3bbe1f4fcc29218"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a19258cc54fe0aafdf3bbe1f4fcc29218">ast_rtp::lastividtimestamp</a></div><div class="ttdeci">unsigned int lastividtimestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00379">res_rtp_asterisk.c:379</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00033">codec.h:33</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0d1f922e093ac18824a7863fe3f5fa27"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a></div><div class="ttdeci">#define AST_LIST_HEAD_INIT_NOLOCK(head)</div><div class="ttdoc">Initializes a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00680">linkedlists.h:680</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa81c8462bd0574f4f9e09e71f2772f44"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a></div><div class="ttdeci">#define ao2_replace(dst, src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00517">astobj2.h:517</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="time_8h_html_aebf04439f206cc509472ce4b6da48a5a"><div class="ttname"><a href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a></div><div class="ttdeci">struct timeval ast_tv(ast_time_t sec, ast_suseconds_t usec)</div><div class="ttdoc">Returns a timeval from sec, usec. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00226">time.h:226</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a71281cffb0ab0658839b8da1296d06b6"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a71281cffb0ab0658839b8da1296d06b6">ast_rtp_instance_get_bridged</a></div><div class="ttdeci">struct ast_rtp_instance * ast_rtp_instance_get_bridged(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the other RTP instance that an instance is bridged to. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02234">rtp_engine.c:2234</a></div></div>
<div class="ttc" id="format_8h_html_a499e920008f775eebadd958a42e85862"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a></div><div class="ttdeci">unsigned int ast_format_get_sample_rate(const struct ast_format *format)</div><div class="ttdoc">Get the sample rate of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00379">format.c:379</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_adabbce218f278a5ee9224a5c4dd94754"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#adabbce218f278a5ee9224a5c4dd94754">ast_rtcp_calc_interval</a></div><div class="ttdeci">static unsigned int ast_rtcp_calc_interval(struct ast_rtp *rtp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03323">res_rtp_asterisk.c:3323</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a8383e75e786449dd2f4258b0819dd8f1"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">ast_frame::stream_num</a></div><div class="ttdeci">int stream_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">include/asterisk/frame.h:197</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a0eb09df2bca453c21ced51b12b52a88b"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a0eb09df2bca453c21ced51b12b52a88b">ast_frame_byteswap_be</a></div><div class="ttdeci">#define ast_frame_byteswap_be(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00597">include/asterisk/frame.h:597</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">include/asterisk/frame.h:103</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ad924782a38efb3a8f9edbb92d3135541"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ad924782a38efb3a8f9edbb92d3135541">AST_RTP_CN</a></div><div class="ttdeci">#define AST_RTP_CN</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00268">rtp_engine.h:268</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3cc8001677e3b955b9b5ceb4267a76ec"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a></div><div class="ttdeci">#define AST_RTP_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00266">rtp_engine.h:266</a></div></div>
<div class="ttc" id="logger_8h_html_a33f6031de4ab6d1406465a7a3ee18e86"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a></div><div class="ttdeci">#define DEBUG_ATLEAST(level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00441">logger.h:441</a></div></div>
<div class="ttc" id="format__cache_8h_html_adbb2a7346ad99c0a41cd6c43548835ba"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#adbb2a7346ad99c0a41cd6c43548835ba">ast_format_t140</a></div><div class="ttdeci">struct ast_format * ast_format_t140</div><div class="ttdoc">Built-in cached t140 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00236">format_cache.c:236</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212acdcfb16791fa00269621e51c42f5a4c3"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212acdcfb16791fa00269621e51c42f5a4c3">AST_MEDIA_TYPE_TEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00035">codec.h:35</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac6bea760bc75e449a80b8cc28bf9a2feaccf78cd00b148145d1cc9e0f60fb7516"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feaccf78cd00b148145d1cc9e0f60fb7516">AST_FRFLAG_HAS_SEQUENCE_NUMBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00147">include/asterisk/frame.h:147</a></div></div>
<div class="ttc" id="structast__rtp_html_ae62094357b73bc730994119ae220bbd2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#ae62094357b73bc730994119ae220bbd2">ast_rtp::lastitexttimestamp</a></div><div class="ttdeci">unsigned int lastitexttimestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00381">res_rtp_asterisk.c:381</a></div></div>
<div class="ttc" id="structast__frame_html_aaccba9d5adc3f6c39aad767db95ba484"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">ast_frame::len</a></div><div class="ttdeci">long len</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00193">include/asterisk/frame.h:193</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ababe6a4928e53febfa8850584b9d88d7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ababe6a4928e53febfa8850584b9d88d7">process_cn_rfc3389</a></div><div class="ttdeci">static struct ast_frame * process_cn_rfc3389(struct ast_rtp_instance *instance, unsigned char *data, int len, unsigned int seqno, unsigned int timestamp, int payloadtype, int mark)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05724">res_rtp_asterisk.c:5724</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00303">include/asterisk/frame.h:303</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae10208d0239efac7fe0cbc21b0440df5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae10208d0239efac7fe0cbc21b0440df5">&#9670;&nbsp;</a></span>ast_rtp_local_bridge()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_local_bridge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>Neither instance0 nor instance1 are locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08643">8643</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../dc/dd7/smoother_8c_source.html#l00220">ast_smoother_free()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00287">FLAG_NEED_MARKER_BIT</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00289">FLAG_REQ_LOCAL_BRIDGE_BIT</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00373">ast_rtp::ssrc_orig</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00374">ast_rtp::ssrc_saved</a>.</p>
<div class="fragment"><div class="line"><a name="l08644"></a><span class="lineno"> 8644</span>&#160;{</div><div class="line"><a name="l08645"></a><span class="lineno"> 8645</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance0);</div><div class="line"><a name="l08646"></a><span class="lineno"> 8646</span>&#160;</div><div class="line"><a name="l08647"></a><span class="lineno"> 8647</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance0);</div><div class="line"><a name="l08648"></a><span class="lineno"> 8648</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(rtp, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab7d9bd5ba01a9647e359799e0d201cbf">FLAG_NEED_MARKER_BIT</a> | <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abd9786ad278407e1a62f847e4f6434a7">FLAG_REQ_LOCAL_BRIDGE_BIT</a>);</div><div class="line"><a name="l08649"></a><span class="lineno"> 8649</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;smoother) {</div><div class="line"><a name="l08650"></a><span class="lineno"> 8650</span>&#160;      <a class="code" href="../../d6/d7f/smoother_8h.html#a6d3b71e0a81af743bae6c33c02b64f1f">ast_smoother_free</a>(rtp-&gt;smoother);</div><div class="line"><a name="l08651"></a><span class="lineno"> 8651</span>&#160;      rtp-&gt;smoother = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08652"></a><span class="lineno"> 8652</span>&#160;   }</div><div class="line"><a name="l08653"></a><span class="lineno"> 8653</span>&#160;</div><div class="line"><a name="l08654"></a><span class="lineno"> 8654</span>&#160;   <span class="comment">/* We must use a new SSRC when local bridge ends */</span></div><div class="line"><a name="l08655"></a><span class="lineno"> 8655</span>&#160;   <span class="keywordflow">if</span> (!instance1) {</div><div class="line"><a name="l08656"></a><span class="lineno"> 8656</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a26ba8b353e2d42506af03af6250a9eb2">ssrc_orig</a>;</div><div class="line"><a name="l08657"></a><span class="lineno"> 8657</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a26ba8b353e2d42506af03af6250a9eb2">ssrc_orig</a> = 0;</div><div class="line"><a name="l08658"></a><span class="lineno"> 8658</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#ad506a0c04ba02aea956e88e65463cb91">ssrc_saved</a> = 0;</div><div class="line"><a name="l08659"></a><span class="lineno"> 8659</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#ad506a0c04ba02aea956e88e65463cb91">ssrc_saved</a>) {</div><div class="line"><a name="l08660"></a><span class="lineno"> 8660</span>&#160;      <span class="comment">/* In case ast_rtp_local_bridge is called multiple times, only save the ssrc from before local bridge began */</span></div><div class="line"><a name="l08661"></a><span class="lineno"> 8661</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a26ba8b353e2d42506af03af6250a9eb2">ssrc_orig</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>;</div><div class="line"><a name="l08662"></a><span class="lineno"> 8662</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#ad506a0c04ba02aea956e88e65463cb91">ssrc_saved</a> = 1;</div><div class="line"><a name="l08663"></a><span class="lineno"> 8663</span>&#160;   }</div><div class="line"><a name="l08664"></a><span class="lineno"> 8664</span>&#160;</div><div class="line"><a name="l08665"></a><span class="lineno"> 8665</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance0);</div><div class="line"><a name="l08666"></a><span class="lineno"> 8666</span>&#160;</div><div class="line"><a name="l08667"></a><span class="lineno"> 8667</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08668"></a><span class="lineno"> 8668</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="smoother_8h_html_a6d3b71e0a81af743bae6c33c02b64f1f"><div class="ttname"><a href="../../d6/d7f/smoother_8h.html#a6d3b71e0a81af743bae6c33c02b64f1f">ast_smoother_free</a></div><div class="ttdeci">void ast_smoother_free(struct ast_smoother *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd7/smoother_8c_source.html#l00220">smoother.c:220</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ab7d9bd5ba01a9647e359799e0d201cbf"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab7d9bd5ba01a9647e359799e0d201cbf">FLAG_NEED_MARKER_BIT</a></div><div class="ttdeci">#define FLAG_NEED_MARKER_BIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00287">res_rtp_asterisk.c:287</a></div></div>
<div class="ttc" id="structast__rtp_html_ad506a0c04ba02aea956e88e65463cb91"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#ad506a0c04ba02aea956e88e65463cb91">ast_rtp::ssrc_saved</a></div><div class="ttdeci">unsigned char ssrc_saved</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00374">res_rtp_asterisk.c:374</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_abd9786ad278407e1a62f847e4f6434a7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#abd9786ad278407e1a62f847e4f6434a7">FLAG_REQ_LOCAL_BRIDGE_BIT</a></div><div class="ttdeci">#define FLAG_REQ_LOCAL_BRIDGE_BIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00289">res_rtp_asterisk.c:289</a></div></div>
<div class="ttc" id="structast__rtp_html_a26ba8b353e2d42506af03af6250a9eb2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a26ba8b353e2d42506af03af6250a9eb2">ast_rtp::ssrc_orig</a></div><div class="ttdeci">unsigned int ssrc_orig</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00373">res_rtp_asterisk.c:373</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2a97dfd28d7243d671e8d80b59723274"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a97dfd28d7243d671e8d80b59723274">&#9670;&nbsp;</a></span>ast_rtp_new()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a> *&#160;</td>
          <td class="paramname"><em>sched</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03992">3992</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00251">ast_format_none</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">ast_random()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00558">ast_rtp_instance_set_data()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../df/da9/uuid_8c_source.html#l00143">ast_uuid_generate_str()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00375">ast_rtp::cname</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00384">ast_rtp::expectedrxseqno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">ast_rtp::f</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">rtp_allocate_transport()</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00400">sched</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>
<div class="fragment"><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;{</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;   <span class="comment">/* Create a new RTP structure to hold all of our data */</span></div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;   <span class="keywordflow">if</span> (!(rtp = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*rtp)))) {</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;   }</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;   <span class="comment">/* Set default parameters on the newly created RTP structure */</span></div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a> = <a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>();</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;   <a class="code" href="../../dd/d1d/uuid_8h.html#abe6d0b550cd9a54964e7891960d1e5bc">ast_uuid_generate_str</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a86a6d9392942a9a6df3adaccb271af60">cname</a>, <span class="keyword">sizeof</span>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a86a6d9392942a9a6df3adaccb271af60">cname</a>));</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;   rtp-&gt;seqno = <a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>() &amp; 0x7fff;</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> = -1;</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;   rtp-&gt;expectedseqno = -1;</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;   rtp-&gt;sched = <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a361b448e9abcfc301602a2573a662d3c">sched</a>;</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;rtp-&gt;bind_address, addr);</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;   <span class="comment">/* Transport creation operations can grab the RTP data from the instance, so set it */</span></div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6b8c5b512d000914dd61cb7d7660837f">ast_rtp_instance_set_data</a>(instance, rtp);</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a51ac7e289874d2165b05e7ae8dc068ae">rtp_allocate_transport</a>(instance, rtp)) {</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;   }</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;rtp-&gt;ssrc_mapping, 1)) {</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;   }</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;rtp-&gt;transport_wide_cc.packet_statistics, 0)) {</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;   }</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;   rtp-&gt;transport_wide_cc.schedid = -1;</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a7c28268f53182d9b82ddd6a4e7c91fa2">ast_format_none</a>);</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;   rtp-&gt;lastrxformat = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a7c28268f53182d9b82ddd6a4e7c91fa2">ast_format_none</a>);</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;   rtp-&gt;lasttxformat = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a7c28268f53182d9b82ddd6a4e7c91fa2">ast_format_none</a>);</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;   rtp-&gt;stream_num = -1;</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a361b448e9abcfc301602a2573a662d3c"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a361b448e9abcfc301602a2573a662d3c">sched</a></div><div class="ttdeci">static struct ast_sched_context * sched</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00400">chan_ooh323.c:400</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a51ac7e289874d2165b05e7ae8dc068ae"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a51ac7e289874d2165b05e7ae8dc068ae">rtp_allocate_transport</a></div><div class="ttdeci">static int rtp_allocate_transport(struct ast_rtp_instance *instance, struct ast_rtp *rtp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">res_rtp_asterisk.c:3828</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="format__cache_8h_html_a7c28268f53182d9b82ddd6a4e7c91fa2"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a7c28268f53182d9b82ddd6a4e7c91fa2">ast_format_none</a></div><div class="ttdeci">struct ast_format * ast_format_none</div><div class="ttdoc">Built-in &quot;null&quot; format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00251">format_cache.c:251</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="structast__rtp_html_a86a6d9392942a9a6df3adaccb271af60"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a86a6d9392942a9a6df3adaccb271af60">ast_rtp::cname</a></div><div class="ttdeci">char cname[AST_UUID_STR_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00375">res_rtp_asterisk.c:375</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a6b8c5b512d000914dd61cb7d7660837f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a6b8c5b512d000914dd61cb7d7660837f">ast_rtp_instance_set_data</a></div><div class="ttdeci">void ast_rtp_instance_set_data(struct ast_rtp_instance *instance, void *data)</div><div class="ttdoc">Set the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00558">rtp_engine.c:558</a></div></div>
<div class="ttc" id="utils_8h_html_a7b4f10b070e95ba413e258a3e4b03c20"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a></div><div class="ttdeci">long int ast_random(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02064">main/utils.c:2064</a></div></div>
<div class="ttc" id="structast__rtp_html_a79c13061e144053a6c288592cc1c159e"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">ast_rtp::expectedrxseqno</a></div><div class="ttdeci">int expectedrxseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00384">res_rtp_asterisk.c:384</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="uuid_8h_html_abe6d0b550cd9a54964e7891960d1e5bc"><div class="ttname"><a href="../../dd/d1d/uuid_8h.html#abe6d0b550cd9a54964e7891960d1e5bc">ast_uuid_generate_str</a></div><div class="ttdeci">char * ast_uuid_generate_str(char *buf, size_t size)</div><div class="ttdoc">Generate a UUID string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/da9/uuid_8c_source.html#l00143">uuid.c:143</a></div></div>
<div class="ttc" id="structast__rtp_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">ast_rtp::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">res_rtp_asterisk.c:370</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a25bc6f3c0ab72d3e3e5f63bca33a23b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25bc6f3c0ab72d3e3e5f63bca33a23b8">&#9670;&nbsp;</a></span>ast_rtp_on_ice_complete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_on_ice_complete </td>
          <td>(</td>
          <td class="paramtype">pj_ice_sess *&#160;</td>
          <td class="paramname"><em>ice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_status_t&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02656">2656</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02898">ast_debug_ice</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02581">ast_rtp_ice_start_media()</a>.</p>
<div class="fragment"><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;{</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE complete, start media\n&quot;</span>, ice-&gt;user_data);</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3e47a532c686cf9ebf1c290b99206270">ast_rtp_ice_start_media</a>(ice, <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>);</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;}</div><div class="ttc" id="group__StasisTopicsAndMessages_html_gaad9e84526c8d48bd3e980e732dd1f7df"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a></div><div class="ttdeci">#define ast_debug_ice(sublevel,...)</div><div class="ttdoc">Log debug level ICE information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02898">rtp_engine.h:2898</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3e47a532c686cf9ebf1c290b99206270"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3e47a532c686cf9ebf1c290b99206270">ast_rtp_ice_start_media</a></div><div class="ttdeci">static void ast_rtp_ice_start_media(pj_ice_sess *ice, pj_status_t status)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02581">res_rtp_asterisk.c:2581</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2499df345fd86006e5f2cc7fa7768686"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2499df345fd86006e5f2cc7fa7768686">&#9670;&nbsp;</a></span>ast_rtp_on_ice_rx_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_on_ice_rx_data </td>
          <td>(</td>
          <td class="paramtype">pj_ice_sess *&#160;</td>
          <td class="paramname"><em>ice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>comp_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>transport_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pj_sockaddr_t *&#160;</td>
          <td class="paramname"><em>src_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>src_addr_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02663">2663</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00292">TRANSPORT_SOCKET_RTCP</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00291">TRANSPORT_SOCKET_RTP</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00294">TRANSPORT_TURN_RTCP</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00293">TRANSPORT_TURN_RTP</a>.</p>
<div class="fragment"><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;{</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance = ice-&gt;user_data;</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;   <span class="comment">/* Instead of handling the packet here (which really doesn&#39;t work with our architecture) we set a bit to indicate that it should be handled after pj_ice_sess_on_rx_pkt</span></div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;<span class="comment">    * returns */</span></div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;   <span class="keywordflow">if</span> (transport_id == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a48d8ff743c69a9da11d543b387078590">TRANSPORT_SOCKET_RTP</a> || transport_id == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad7249b0dec2fde720fe4a30d04ce3482">TRANSPORT_SOCKET_RTCP</a>) {</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;      rtp-&gt;passthrough = 1;</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (transport_id == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa05629cc7dbc25042c121a9670f150e3">TRANSPORT_TURN_RTP</a>) {</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;      rtp-&gt;rtp_passthrough = 1;</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (transport_id == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a076af3a6d50860b502ce8182a5105dbd">TRANSPORT_TURN_RTCP</a>) {</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;      rtp-&gt;rtcp_passthrough = 1;</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;   }</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa05629cc7dbc25042c121a9670f150e3"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa05629cc7dbc25042c121a9670f150e3">TRANSPORT_TURN_RTP</a></div><div class="ttdeci">#define TRANSPORT_TURN_RTP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00293">res_rtp_asterisk.c:293</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a076af3a6d50860b502ce8182a5105dbd"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a076af3a6d50860b502ce8182a5105dbd">TRANSPORT_TURN_RTCP</a></div><div class="ttdeci">#define TRANSPORT_TURN_RTCP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00294">res_rtp_asterisk.c:294</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad7249b0dec2fde720fe4a30d04ce3482"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad7249b0dec2fde720fe4a30d04ce3482">TRANSPORT_SOCKET_RTCP</a></div><div class="ttdeci">#define TRANSPORT_SOCKET_RTCP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00292">res_rtp_asterisk.c:292</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a48d8ff743c69a9da11d543b387078590"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a48d8ff743c69a9da11d543b387078590">TRANSPORT_SOCKET_RTP</a></div><div class="ttdeci">#define TRANSPORT_SOCKET_RTP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00291">res_rtp_asterisk.c:291</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a18b4bf1b10dd453d9378c9397f870205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18b4bf1b10dd453d9378c9397f870205">&#9670;&nbsp;</a></span>ast_rtp_on_ice_tx_pkt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pj_status_t ast_rtp_on_ice_tx_pkt </td>
          <td>(</td>
          <td class="paramtype">pj_ice_sess *&#160;</td>
          <td class="paramname"><em>ice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>comp_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>transport_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pj_sockaddr_t *&#160;</td>
          <td class="paramname"><em>dst_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>dst_addr_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02680">2680</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">ast_rtp::s</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00292">TRANSPORT_SOCKET_RTCP</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00291">TRANSPORT_SOCKET_RTP</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00294">TRANSPORT_TURN_RTCP</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00293">TRANSPORT_TURN_RTP</a>.</p>
<div class="fragment"><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;{</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance = ice-&gt;user_data;</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;   pj_status_t <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a> = PJ_EINVALIDOP;</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;   pj_ssize_t _size = (pj_ssize_t)size;</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;   <span class="keywordflow">if</span> (transport_id == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a48d8ff743c69a9da11d543b387078590">TRANSPORT_SOCKET_RTP</a>) {</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;      <span class="comment">/* Traffic is destined to go right out the RTP socket we already have */</span></div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;      status = pj_sock_sendto(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>, pkt, &amp;_size, 0, dst_addr, dst_addr_len);</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;      <span class="comment">/* sendto on a connectionless socket should send all the data, or none at all */</span></div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(_size == size || status != PJ_SUCCESS);</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (transport_id == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad7249b0dec2fde720fe4a30d04ce3482">TRANSPORT_SOCKET_RTCP</a>) {</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;      <span class="comment">/* Traffic is destined to go right out the RTCP socket we already have */</span></div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;rtcp) {</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;         status = pj_sock_sendto(rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>, pkt, &amp;_size, 0, dst_addr, dst_addr_len);</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;         <span class="comment">/* sendto on a connectionless socket should send all the data, or none at all */</span></div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(_size == size || status != PJ_SUCCESS);</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;         status = PJ_SUCCESS;</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;      }</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (transport_id == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa05629cc7dbc25042c121a9670f150e3">TRANSPORT_TURN_RTP</a>) {</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;      <span class="comment">/* Traffic is going through the RTP TURN relay */</span></div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;turn_rtp) {</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;         status = pj_turn_sock_sendto(rtp-&gt;turn_rtp, pkt, size, dst_addr, dst_addr_len);</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;      }</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (transport_id == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a076af3a6d50860b502ce8182a5105dbd">TRANSPORT_TURN_RTCP</a>) {</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;      <span class="comment">/* Traffic is going through the RTCP TURN relay */</span></div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;turn_rtcp) {</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;         status = pj_turn_sock_sendto(rtp-&gt;turn_rtcp, pkt, size, dst_addr, dst_addr_len);</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;      }</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;   }</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa05629cc7dbc25042c121a9670f150e3"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa05629cc7dbc25042c121a9670f150e3">TRANSPORT_TURN_RTP</a></div><div class="ttdeci">#define TRANSPORT_TURN_RTP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00293">res_rtp_asterisk.c:293</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a076af3a6d50860b502ce8182a5105dbd"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a076af3a6d50860b502ce8182a5105dbd">TRANSPORT_TURN_RTCP</a></div><div class="ttdeci">#define TRANSPORT_TURN_RTCP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00294">res_rtp_asterisk.c:294</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad7249b0dec2fde720fe4a30d04ce3482"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad7249b0dec2fde720fe4a30d04ce3482">TRANSPORT_SOCKET_RTCP</a></div><div class="ttdeci">#define TRANSPORT_SOCKET_RTCP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00292">res_rtp_asterisk.c:292</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
<div class="ttc" id="structast__rtp_html_a339d22b3e442946380f98ed19e320db2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">ast_rtp::s</a></div><div class="ttdeci">int s</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">res_rtp_asterisk.c:368</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a48d8ff743c69a9da11d543b387078590"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a48d8ff743c69a9da11d543b387078590">TRANSPORT_SOCKET_RTP</a></div><div class="ttdeci">#define TRANSPORT_SOCKET_RTP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00291">res_rtp_asterisk.c:291</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad5266b2beb9a54914609a5eceae3fb7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5266b2beb9a54914609a5eceae3fb7d">&#9670;&nbsp;</a></span>ast_rtp_on_turn_rtcp_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_on_turn_rtcp_state </td>
          <td>(</td>
          <td class="paramtype">pj_turn_sock *&#160;</td>
          <td class="paramname"><em>turn_sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_turn_state_t&#160;</td>
          <td class="paramname"><em>old_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_turn_state_t&#160;</td>
          <td class="paramname"><em>new_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01421">1421</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;{</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance = pj_turn_sock_get_user_data(turn_sock);</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;   <span class="comment">/* If this is a leftover from an already destroyed RTP instance just ignore the state change */</span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;   <span class="keywordflow">if</span> (!instance) {</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;   }</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;   rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   <span class="comment">/* We store the new state so the other thread can actually handle it */</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;   rtp-&gt;turn_state = new_state;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;rtp-&gt;cond);</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;   <span class="keywordflow">if</span> (new_state == PJ_TURN_STATE_DESTROYING) {</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      pj_turn_sock_set_user_data(rtp-&gt;turn_rtcp, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      rtp-&gt;turn_rtcp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;   }</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8d524e4dfca90561abb09f3d5f99e4c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d524e4dfca90561abb09f3d5f99e4c6">&#9670;&nbsp;</a></span>ast_rtp_on_turn_rtp_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_on_turn_rtp_state </td>
          <td>(</td>
          <td class="paramtype">pj_turn_sock *&#160;</td>
          <td class="paramname"><em>turn_sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_turn_state_t&#160;</td>
          <td class="paramname"><em>old_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_turn_state_t&#160;</td>
          <td class="paramname"><em>new_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01355">1355</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;{</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance = pj_turn_sock_get_user_data(turn_sock);</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;   <span class="comment">/* If this is a leftover from an already notified RTP instance just ignore the state change */</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;   <span class="keywordflow">if</span> (!instance) {</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   }</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;   rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   <span class="comment">/* We store the new state so the other thread can actually handle it */</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   rtp-&gt;turn_state = new_state;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;rtp-&gt;cond);</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;   <span class="keywordflow">if</span> (new_state == PJ_TURN_STATE_DESTROYING) {</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      pj_turn_sock_set_user_data(rtp-&gt;turn_rtp, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;      rtp-&gt;turn_rtp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;   }</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1efec75c83ae755c18e03d4d2ab53194"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1efec75c83ae755c18e03d4d2ab53194">&#9670;&nbsp;</a></span>ast_rtp_on_turn_rx_rtcp_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_on_turn_rx_rtcp_data </td>
          <td>(</td>
          <td class="paramtype">pj_turn_sock *&#160;</td>
          <td class="paramname"><em>turn_sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>pkt_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pj_sockaddr_t *&#160;</td>
          <td class="paramname"><em>peer_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>addr_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01388">1388</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00464">AST_RTP_ICE_COMPONENT_RTCP</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00614">ast_sendto()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">ice_wrap::real_ice</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">ast_rtp::s</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00294">TRANSPORT_TURN_RTCP</a>.</p>
<div class="fragment"><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;{</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance = pj_turn_sock_get_user_data(turn_sock);</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/db8/structice__wrap.html">ice_wrap</a> *ice;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;   pj_status_t <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;   ice = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(rtp-&gt;ice);</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;   <span class="keywordflow">if</span> (ice) {</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      status = pj_ice_sess_on_rx_pkt(ice-&gt;<a class="code" href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">real_ice</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a>,</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a076af3a6d50860b502ce8182a5105dbd">TRANSPORT_TURN_RTCP</a>, pkt, pkt_len, peer_addr, addr_len);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ice, -1);</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      <span class="keywordflow">if</span> (status != PJ_SUCCESS) {</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;         <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[100];</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;         pj_strerror(status, buf, <span class="keyword">sizeof</span>(buf));</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;PJ ICE Rx error status code: %d &#39;%s&#39;.\n&quot;</span>,</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;            (<span class="keywordtype">int</span>)status, buf);</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      }</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <span class="keywordflow">if</span> (!rtp-&gt;rtcp_passthrough) {</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      }</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      rtp-&gt;rtcp_passthrough = 0;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;   }</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a71fb241d0d6b6ef1c73eaeb1d6d07ac6">ast_sendto</a>(rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>, pkt, pkt_len, 0, &amp;rtp-&gt;rtcp_loop);</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="netsock2_8h_html_a71fb241d0d6b6ef1c73eaeb1d6d07ac6"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a71fb241d0d6b6ef1c73eaeb1d6d07ac6">ast_sendto</a></div><div class="ttdeci">ssize_t ast_sendto(int sockfd, const void *buf, size_t len, int flags, const struct ast_sockaddr *dest_addr)</div><div class="ttdoc">Wrapper around sendto(2) that uses ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00614">netsock2.c:614</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00464">rtp_engine.h:464</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a076af3a6d50860b502ce8182a5105dbd"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a076af3a6d50860b502ce8182a5105dbd">TRANSPORT_TURN_RTCP</a></div><div class="ttdeci">#define TRANSPORT_TURN_RTCP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00294">res_rtp_asterisk.c:294</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structice__wrap_html"><div class="ttname"><a href="../../d9/db8/structice__wrap.html">ice_wrap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00320">res_rtp_asterisk.c:320</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structice__wrap_html_a947772eea928bd56792836dc5c55dac9"><div class="ttname"><a href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">ice_wrap::real_ice</a></div><div class="ttdeci">pj_ice_sess * real_ice</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">res_rtp_asterisk.c:321</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
<div class="ttc" id="structast__rtp_html_a339d22b3e442946380f98ed19e320db2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">ast_rtp::s</a></div><div class="ttdeci">int s</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">res_rtp_asterisk.c:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aedc48ae04320ccc7f753027e4653b39a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedc48ae04320ccc7f753027e4653b39a">&#9670;&nbsp;</a></span>ast_rtp_on_turn_rx_rtp_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_on_turn_rx_rtp_data </td>
          <td>(</td>
          <td class="paramtype">pj_turn_sock *&#160;</td>
          <td class="paramname"><em>turn_sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>pkt_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pj_sockaddr_t *&#160;</td>
          <td class="paramname"><em>peer_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>addr_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01322">1322</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00463">AST_RTP_ICE_COMPONENT_RTP</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00614">ast_sendto()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">ice_wrap::real_ice</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">ast_rtp::s</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00293">TRANSPORT_TURN_RTP</a>.</p>
<div class="fragment"><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;{</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance = pj_turn_sock_get_user_data(turn_sock);</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/db8/structice__wrap.html">ice_wrap</a> *ice;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;   pj_status_t <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   ice = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(rtp-&gt;ice);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;   <span class="keywordflow">if</span> (ice) {</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;      status = pj_ice_sess_on_rx_pkt(ice-&gt;<a class="code" href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">real_ice</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a>,</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa05629cc7dbc25042c121a9670f150e3">TRANSPORT_TURN_RTP</a>, pkt, pkt_len, peer_addr, addr_len);</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ice, -1);</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      <span class="keywordflow">if</span> (status != PJ_SUCCESS) {</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;         <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[100];</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;         pj_strerror(status, buf, <span class="keyword">sizeof</span>(buf));</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;(%p) ICE PJ Rx error status code: %d &#39;%s&#39;.\n&quot;</span>,</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;            instance, (<span class="keywordtype">int</span>)status, buf);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      }</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      <span class="keywordflow">if</span> (!rtp-&gt;rtp_passthrough) {</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      }</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;      rtp-&gt;rtp_passthrough = 0;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;   }</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a71fb241d0d6b6ef1c73eaeb1d6d07ac6">ast_sendto</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>, pkt, pkt_len, 0, &amp;rtp-&gt;rtp_loop);</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="netsock2_8h_html_a71fb241d0d6b6ef1c73eaeb1d6d07ac6"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a71fb241d0d6b6ef1c73eaeb1d6d07ac6">ast_sendto</a></div><div class="ttdeci">ssize_t ast_sendto(int sockfd, const void *buf, size_t len, int flags, const struct ast_sockaddr *dest_addr)</div><div class="ttdoc">Wrapper around sendto(2) that uses ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00614">netsock2.c:614</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa05629cc7dbc25042c121a9670f150e3"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa05629cc7dbc25042c121a9670f150e3">TRANSPORT_TURN_RTP</a></div><div class="ttdeci">#define TRANSPORT_TURN_RTP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00293">res_rtp_asterisk.c:293</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structice__wrap_html"><div class="ttname"><a href="../../d9/db8/structice__wrap.html">ice_wrap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00320">res_rtp_asterisk.c:320</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00463">rtp_engine.h:463</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structice__wrap_html_a947772eea928bd56792836dc5c55dac9"><div class="ttname"><a href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">ice_wrap::real_ice</a></div><div class="ttdeci">pj_ice_sess * real_ice</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">res_rtp_asterisk.c:321</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
<div class="ttc" id="structast__rtp_html_a339d22b3e442946380f98ed19e320db2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">ast_rtp::s</a></div><div class="ttdeci">int s</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">res_rtp_asterisk.c:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae23415fb68dd2822b9325faaab64c3eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae23415fb68dd2822b9325faaab64c3eb">&#9670;&nbsp;</a></span>ast_rtp_on_valid_pair()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_on_valid_pair </td>
          <td>(</td>
          <td class="paramtype">pj_ice_sess *&#160;</td>
          <td class="paramname"><em>ice</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02648">2648</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02898">ast_debug_ice</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02581">ast_rtp_ice_start_media()</a>.</p>
<div class="fragment"><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;{</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE valid pair, start media\n&quot;</span>, ice-&gt;user_data);</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3e47a532c686cf9ebf1c290b99206270">ast_rtp_ice_start_media</a>(ice, PJ_SUCCESS);</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;}</div><div class="ttc" id="group__StasisTopicsAndMessages_html_gaad9e84526c8d48bd3e980e732dd1f7df"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a></div><div class="ttdeci">#define ast_debug_ice(sublevel,...)</div><div class="ttdoc">Log debug level ICE information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02898">rtp_engine.h:2898</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3e47a532c686cf9ebf1c290b99206270"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3e47a532c686cf9ebf1c290b99206270">ast_rtp_ice_start_media</a></div><div class="ttdeci">static void ast_rtp_ice_start_media(pj_ice_sess *ice, pj_status_t status)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02581">res_rtp_asterisk.c:2581</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad11dc3a9cf6eefe955d11ff7523b9b19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad11dc3a9cf6eefe955d11ff7523b9b19">&#9670;&nbsp;</a></span>ast_rtp_prop_set()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_prop_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914c">ast_rtp_property</a>&#160;</td>
          <td class="paramname"><em>property</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08303">8303</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00590">ast_bind()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00145">ast_data_buffer_alloc()</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00338">ast_data_buffer_free()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02873">ast_debug_rtcp</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l01052">ast_find_ourip()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d9/db0/astmm_8c_source.html#l01771">ast_free_ptr()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00464">AST_RTP_ICE_COMPONENT_RTCP</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00643">ast_rtp_instance_get_local_address()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00259">AST_RTP_INSTANCE_RTCP_STANDARD</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00125">AST_RTP_PROPERTY_ASYMMETRIC_CODEC</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00127">AST_RTP_PROPERTY_RETRANS_RECV</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00129">AST_RTP_PROPERTY_RETRANS_SEND</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00123">AST_RTP_PROPERTY_RTCP</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00610">ast_sched_del()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00497">ast_sockaddr_is_ipv4()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00524">ast_sockaddr_is_ipv6()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00521">ast_sockaddr_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03360">create_new_socket()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00111">DEFAULT_RTP_RECV_BUFFER_SIZE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00109">DEFAULT_RTP_SEND_BUFFER_SIZE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">ast_rtp::s</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00292">TRANSPORT_SOCKET_RTCP</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>
<div class="fragment"><div class="line"><a name="l08304"></a><span class="lineno"> 8304</span>&#160;{</div><div class="line"><a name="l08305"></a><span class="lineno"> 8305</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l08306"></a><span class="lineno"> 8306</span>&#160;</div><div class="line"><a name="l08307"></a><span class="lineno"> 8307</span>&#160;   <span class="keywordflow">if</span> (property == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca9f63c95936712cfd6ec65555f1a27053">AST_RTP_PROPERTY_RTCP</a>) {</div><div class="line"><a name="l08308"></a><span class="lineno"> 8308</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>) {</div><div class="line"><a name="l08309"></a><span class="lineno"> 8309</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> local_addr;</div><div class="line"><a name="l08310"></a><span class="lineno"> 8310</span>&#160;</div><div class="line"><a name="l08311"></a><span class="lineno"> 8311</span>&#160;         <span class="keywordflow">if</span> (rtp-&gt;rtcp &amp;&amp; rtp-&gt;rtcp-&gt;type == <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>) {</div><div class="line"><a name="l08312"></a><span class="lineno"> 8312</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP ignoring duplicate property\n&quot;</span>, instance);</div><div class="line"><a name="l08313"></a><span class="lineno"> 8313</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l08314"></a><span class="lineno"> 8314</span>&#160;         }</div><div class="line"><a name="l08315"></a><span class="lineno"> 8315</span>&#160;</div><div class="line"><a name="l08316"></a><span class="lineno"> 8316</span>&#160;         <span class="keywordflow">if</span> (!rtp-&gt;rtcp) {</div><div class="line"><a name="l08317"></a><span class="lineno"> 8317</span>&#160;            rtp-&gt;rtcp = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*rtp-&gt;rtcp));</div><div class="line"><a name="l08318"></a><span class="lineno"> 8318</span>&#160;            <span class="keywordflow">if</span> (!rtp-&gt;rtcp) {</div><div class="line"><a name="l08319"></a><span class="lineno"> 8319</span>&#160;               <span class="keywordflow">return</span>;</div><div class="line"><a name="l08320"></a><span class="lineno"> 8320</span>&#160;            }</div><div class="line"><a name="l08321"></a><span class="lineno"> 8321</span>&#160;            rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> = -1;</div><div class="line"><a name="l08322"></a><span class="lineno"> 8322</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP)</span></div><div class="line"><a name="l08323"></a><span class="lineno"> 8323</span>&#160;            rtp-&gt;rtcp-&gt;dtls.timeout_timer = -1;</div><div class="line"><a name="l08324"></a><span class="lineno"> 8324</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08325"></a><span class="lineno"> 8325</span>&#160;            rtp-&gt;rtcp-&gt;schedid = -1;</div><div class="line"><a name="l08326"></a><span class="lineno"> 8326</span>&#160;         }</div><div class="line"><a name="l08327"></a><span class="lineno"> 8327</span>&#160;</div><div class="line"><a name="l08328"></a><span class="lineno"> 8328</span>&#160;         rtp-&gt;rtcp-&gt;type = <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l08329"></a><span class="lineno"> 8329</span>&#160;</div><div class="line"><a name="l08330"></a><span class="lineno"> 8330</span>&#160;         <span class="comment">/* Grab the IP address and port we are going to use */</span></div><div class="line"><a name="l08331"></a><span class="lineno"> 8331</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a80baeff1bd121c3168ede2a955e9b3a2">ast_rtp_instance_get_local_address</a>(instance, &amp;rtp-&gt;rtcp-&gt;us);</div><div class="line"><a name="l08332"></a><span class="lineno"> 8332</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38">AST_RTP_INSTANCE_RTCP_STANDARD</a>) {</div><div class="line"><a name="l08333"></a><span class="lineno"> 8333</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;rtp-&gt;rtcp-&gt;us,</div><div class="line"><a name="l08334"></a><span class="lineno"> 8334</span>&#160;               <a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(&amp;rtp-&gt;rtcp-&gt;us) + 1);</div><div class="line"><a name="l08335"></a><span class="lineno"> 8335</span>&#160;         }</div><div class="line"><a name="l08336"></a><span class="lineno"> 8336</span>&#160;</div><div class="line"><a name="l08337"></a><span class="lineno"> 8337</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;local_addr, &amp;rtp-&gt;rtcp-&gt;us);</div><div class="line"><a name="l08338"></a><span class="lineno"> 8338</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d59/acl_8h.html#a74a637419bacba1233890081dd2f0495">ast_find_ourip</a>(&amp;local_addr, &amp;rtp-&gt;rtcp-&gt;us, 0)) {</div><div class="line"><a name="l08339"></a><span class="lineno"> 8339</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;local_addr, <a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(&amp;rtp-&gt;rtcp-&gt;us));</div><div class="line"><a name="l08340"></a><span class="lineno"> 8340</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08341"></a><span class="lineno"> 8341</span>&#160;            <span class="comment">/* Failed to get local address reset to use default. */</span></div><div class="line"><a name="l08342"></a><span class="lineno"> 8342</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;local_addr, &amp;rtp-&gt;rtcp-&gt;us);</div><div class="line"><a name="l08343"></a><span class="lineno"> 8343</span>&#160;         }</div><div class="line"><a name="l08344"></a><span class="lineno"> 8344</span>&#160;</div><div class="line"><a name="l08345"></a><span class="lineno"> 8345</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(rtp-&gt;rtcp-&gt;local_addr_str);</div><div class="line"><a name="l08346"></a><span class="lineno"> 8346</span>&#160;         rtp-&gt;rtcp-&gt;local_addr_str = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;local_addr));</div><div class="line"><a name="l08347"></a><span class="lineno"> 8347</span>&#160;         <span class="keywordflow">if</span> (!rtp-&gt;rtcp-&gt;local_addr_str) {</div><div class="line"><a name="l08348"></a><span class="lineno"> 8348</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(rtp-&gt;rtcp);</div><div class="line"><a name="l08349"></a><span class="lineno"> 8349</span>&#160;            rtp-&gt;rtcp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08350"></a><span class="lineno"> 8350</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l08351"></a><span class="lineno"> 8351</span>&#160;         }</div><div class="line"><a name="l08352"></a><span class="lineno"> 8352</span>&#160;</div><div class="line"><a name="l08353"></a><span class="lineno"> 8353</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38">AST_RTP_INSTANCE_RTCP_STANDARD</a>) {</div><div class="line"><a name="l08354"></a><span class="lineno"> 8354</span>&#160;            <span class="comment">/* We&#39;re either setting up RTCP from scratch or</span></div><div class="line"><a name="l08355"></a><span class="lineno"> 8355</span>&#160;<span class="comment">             * switching from MUX. Either way, we won&#39;t have</span></div><div class="line"><a name="l08356"></a><span class="lineno"> 8356</span>&#160;<span class="comment">             * a socket set up, and we need to set it up</span></div><div class="line"><a name="l08357"></a><span class="lineno"> 8357</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l08358"></a><span class="lineno"> 8358</span>&#160;            <span class="keywordflow">if</span> ((rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> =</div><div class="line"><a name="l08359"></a><span class="lineno"> 8359</span>&#160;                 <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a64f68b734a7edd69efce133ae28e7d39">create_new_socket</a>(<span class="stringliteral">&quot;RTCP&quot;</span>,</div><div class="line"><a name="l08360"></a><span class="lineno"> 8360</span>&#160;                         <a class="code" href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a>(&amp;rtp-&gt;rtcp-&gt;us) ?</div><div class="line"><a name="l08361"></a><span class="lineno"> 8361</span>&#160;                         AF_INET :</div><div class="line"><a name="l08362"></a><span class="lineno"> 8362</span>&#160;                         <a class="code" href="../../db/df1/netsock2_8h.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a>(&amp;rtp-&gt;rtcp-&gt;us) ?</div><div class="line"><a name="l08363"></a><span class="lineno"> 8363</span>&#160;                         AF_INET6 : -1)) &lt; 0) {</div><div class="line"><a name="l08364"></a><span class="lineno"> 8364</span>&#160;               <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP failed to create a new socket\n&quot;</span>, instance);</div><div class="line"><a name="l08365"></a><span class="lineno"> 8365</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(rtp-&gt;rtcp-&gt;local_addr_str);</div><div class="line"><a name="l08366"></a><span class="lineno"> 8366</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(rtp-&gt;rtcp);</div><div class="line"><a name="l08367"></a><span class="lineno"> 8367</span>&#160;               rtp-&gt;rtcp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08368"></a><span class="lineno"> 8368</span>&#160;               <span class="keywordflow">return</span>;</div><div class="line"><a name="l08369"></a><span class="lineno"> 8369</span>&#160;            }</div><div class="line"><a name="l08370"></a><span class="lineno"> 8370</span>&#160;</div><div class="line"><a name="l08371"></a><span class="lineno"> 8371</span>&#160;            <span class="comment">/* Try to actually bind to the IP address and port we are going to use for RTCP, if this fails we have to bail out */</span></div><div class="line"><a name="l08372"></a><span class="lineno"> 8372</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a58f856feeaf684b7d5353357e85a0dd5">ast_bind</a>(rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>, &amp;rtp-&gt;rtcp-&gt;us)) {</div><div class="line"><a name="l08373"></a><span class="lineno"> 8373</span>&#160;               <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP failed to setup RTP instance\n&quot;</span>, instance);</div><div class="line"><a name="l08374"></a><span class="lineno"> 8374</span>&#160;               close(rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>);</div><div class="line"><a name="l08375"></a><span class="lineno"> 8375</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(rtp-&gt;rtcp-&gt;local_addr_str);</div><div class="line"><a name="l08376"></a><span class="lineno"> 8376</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(rtp-&gt;rtcp);</div><div class="line"><a name="l08377"></a><span class="lineno"> 8377</span>&#160;               rtp-&gt;rtcp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08378"></a><span class="lineno"> 8378</span>&#160;               <span class="keywordflow">return</span>;</div><div class="line"><a name="l08379"></a><span class="lineno"> 8379</span>&#160;            }</div><div class="line"><a name="l08380"></a><span class="lineno"> 8380</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l08381"></a><span class="lineno"> 8381</span>&#160;            <span class="keywordflow">if</span> (rtp-&gt;ice) {</div><div class="line"><a name="l08382"></a><span class="lineno"> 8382</span>&#160;               <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab1b4c0024c8207e04e00c38d3b6341d5">rtp_add_candidates_to_ice</a>(instance, rtp, &amp;rtp-&gt;rtcp-&gt;us, <a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(&amp;rtp-&gt;rtcp-&gt;us), <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a>, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad7249b0dec2fde720fe4a30d04ce3482">TRANSPORT_SOCKET_RTCP</a>);</div><div class="line"><a name="l08383"></a><span class="lineno"> 8383</span>&#160;            }</div><div class="line"><a name="l08384"></a><span class="lineno"> 8384</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08385"></a><span class="lineno"> 8385</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP)</span></div><div class="line"><a name="l08386"></a><span class="lineno"> 8386</span>&#160;            dtls_setup_rtcp(instance);</div><div class="line"><a name="l08387"></a><span class="lineno"> 8387</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08388"></a><span class="lineno"> 8388</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08389"></a><span class="lineno"> 8389</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> addr;</div><div class="line"><a name="l08390"></a><span class="lineno"> 8390</span>&#160;            <span class="comment">/* RTCPMUX uses the same socket as RTP. If we were previously using standard RTCP</span></div><div class="line"><a name="l08391"></a><span class="lineno"> 8391</span>&#160;<span class="comment">             * then close the socket we previously created.</span></div><div class="line"><a name="l08392"></a><span class="lineno"> 8392</span>&#160;<span class="comment">             *</span></div><div class="line"><a name="l08393"></a><span class="lineno"> 8393</span>&#160;<span class="comment">             * It may seem as though there is a possible race condition here where we might try</span></div><div class="line"><a name="l08394"></a><span class="lineno"> 8394</span>&#160;<span class="comment">             * to close the RTCP socket while it is being used to send data. However, this is not</span></div><div class="line"><a name="l08395"></a><span class="lineno"> 8395</span>&#160;<span class="comment">             * a problem in practice since setting and adjusting of RTCP properties happens prior</span></div><div class="line"><a name="l08396"></a><span class="lineno"> 8396</span>&#160;<span class="comment">             * to activating RTP. It is not until RTP is activated that timers start for RTCP</span></div><div class="line"><a name="l08397"></a><span class="lineno"> 8397</span>&#160;<span class="comment">             * transmission</span></div><div class="line"><a name="l08398"></a><span class="lineno"> 8398</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l08399"></a><span class="lineno"> 8399</span>&#160;            <span class="keywordflow">if</span> (rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> &gt; -1 &amp;&amp; rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> != rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>) {</div><div class="line"><a name="l08400"></a><span class="lineno"> 8400</span>&#160;               close(rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>);</div><div class="line"><a name="l08401"></a><span class="lineno"> 8401</span>&#160;            }</div><div class="line"><a name="l08402"></a><span class="lineno"> 8402</span>&#160;            rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>;</div><div class="line"><a name="l08403"></a><span class="lineno"> 8403</span>&#160;            <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(instance, &amp;addr);</div><div class="line"><a name="l08404"></a><span class="lineno"> 8404</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;rtp-&gt;rtcp-&gt;them, &amp;addr);</div><div class="line"><a name="l08405"></a><span class="lineno"> 8405</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP)</span></div><div class="line"><a name="l08406"></a><span class="lineno"> 8406</span>&#160;            <span class="keywordflow">if</span> (rtp-&gt;rtcp-&gt;dtls.ssl &amp;&amp; rtp-&gt;rtcp-&gt;dtls.ssl != rtp-&gt;dtls.ssl) {</div><div class="line"><a name="l08407"></a><span class="lineno"> 8407</span>&#160;               SSL_free(rtp-&gt;rtcp-&gt;dtls.ssl);</div><div class="line"><a name="l08408"></a><span class="lineno"> 8408</span>&#160;            }</div><div class="line"><a name="l08409"></a><span class="lineno"> 8409</span>&#160;            rtp-&gt;rtcp-&gt;dtls.ssl = rtp-&gt;dtls.ssl;</div><div class="line"><a name="l08410"></a><span class="lineno"> 8410</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08411"></a><span class="lineno"> 8411</span>&#160;         }</div><div class="line"><a name="l08412"></a><span class="lineno"> 8412</span>&#160;</div><div class="line"><a name="l08413"></a><span class="lineno"> 8413</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP setup on RTP instance\n&quot;</span>, instance);</div><div class="line"><a name="l08414"></a><span class="lineno"> 8414</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08415"></a><span class="lineno"> 8415</span>&#160;         <span class="keywordflow">if</span> (rtp-&gt;rtcp) {</div><div class="line"><a name="l08416"></a><span class="lineno"> 8416</span>&#160;            <span class="keywordflow">if</span> (rtp-&gt;rtcp-&gt;schedid &gt; -1) {</div><div class="line"><a name="l08417"></a><span class="lineno"> 8417</span>&#160;               <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l08418"></a><span class="lineno"> 8418</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d00/sched_8h.html#a3a093634fe17bd0ac4eb6f518aa0782e">ast_sched_del</a>(rtp-&gt;sched, rtp-&gt;rtcp-&gt;schedid)) {</div><div class="line"><a name="l08419"></a><span class="lineno"> 8419</span>&#160;                  <span class="comment">/* Successfully cancelled scheduler entry. */</span></div><div class="line"><a name="l08420"></a><span class="lineno"> 8420</span>&#160;                  <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(instance, -1);</div><div class="line"><a name="l08421"></a><span class="lineno"> 8421</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08422"></a><span class="lineno"> 8422</span>&#160;                  <span class="comment">/* Unable to cancel scheduler entry */</span></div><div class="line"><a name="l08423"></a><span class="lineno"> 8423</span>&#160;                  <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP failed to tear down RTCP\n&quot;</span>, instance);</div><div class="line"><a name="l08424"></a><span class="lineno"> 8424</span>&#160;                  <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l08425"></a><span class="lineno"> 8425</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l08426"></a><span class="lineno"> 8426</span>&#160;               }</div><div class="line"><a name="l08427"></a><span class="lineno"> 8427</span>&#160;               <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l08428"></a><span class="lineno"> 8428</span>&#160;               rtp-&gt;rtcp-&gt;schedid = -1;</div><div class="line"><a name="l08429"></a><span class="lineno"> 8429</span>&#160;            }</div><div class="line"><a name="l08430"></a><span class="lineno"> 8430</span>&#160;            <span class="keywordflow">if</span> (rtp-&gt;transport_wide_cc.schedid &gt; -1) {</div><div class="line"><a name="l08431"></a><span class="lineno"> 8431</span>&#160;               <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l08432"></a><span class="lineno"> 8432</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d00/sched_8h.html#a3a093634fe17bd0ac4eb6f518aa0782e">ast_sched_del</a>(rtp-&gt;sched, rtp-&gt;transport_wide_cc.schedid)) {</div><div class="line"><a name="l08433"></a><span class="lineno"> 8433</span>&#160;                  <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(instance, -1);</div><div class="line"><a name="l08434"></a><span class="lineno"> 8434</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08435"></a><span class="lineno"> 8435</span>&#160;                  <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP failed to tear down transport-cc feedback\n&quot;</span>, instance);</div><div class="line"><a name="l08436"></a><span class="lineno"> 8436</span>&#160;                  <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l08437"></a><span class="lineno"> 8437</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l08438"></a><span class="lineno"> 8438</span>&#160;               }</div><div class="line"><a name="l08439"></a><span class="lineno"> 8439</span>&#160;               <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l08440"></a><span class="lineno"> 8440</span>&#160;               rtp-&gt;transport_wide_cc.schedid = -1;</div><div class="line"><a name="l08441"></a><span class="lineno"> 8441</span>&#160;            }</div><div class="line"><a name="l08442"></a><span class="lineno"> 8442</span>&#160;            <span class="keywordflow">if</span> (rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> &gt; -1 &amp;&amp; rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> != rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>) {</div><div class="line"><a name="l08443"></a><span class="lineno"> 8443</span>&#160;               close(rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>);</div><div class="line"><a name="l08444"></a><span class="lineno"> 8444</span>&#160;            }</div><div class="line"><a name="l08445"></a><span class="lineno"> 8445</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP)</span></div><div class="line"><a name="l08446"></a><span class="lineno"> 8446</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l08447"></a><span class="lineno"> 8447</span>&#160;            dtls_srtp_stop_timeout_timer(instance, rtp, 1);</div><div class="line"><a name="l08448"></a><span class="lineno"> 8448</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l08449"></a><span class="lineno"> 8449</span>&#160;</div><div class="line"><a name="l08450"></a><span class="lineno"> 8450</span>&#160;            <span class="keywordflow">if</span> (rtp-&gt;rtcp-&gt;dtls.ssl &amp;&amp; rtp-&gt;rtcp-&gt;dtls.ssl != rtp-&gt;dtls.ssl) {</div><div class="line"><a name="l08451"></a><span class="lineno"> 8451</span>&#160;               SSL_free(rtp-&gt;rtcp-&gt;dtls.ssl);</div><div class="line"><a name="l08452"></a><span class="lineno"> 8452</span>&#160;            }</div><div class="line"><a name="l08453"></a><span class="lineno"> 8453</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08454"></a><span class="lineno"> 8454</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(rtp-&gt;rtcp-&gt;local_addr_str);</div><div class="line"><a name="l08455"></a><span class="lineno"> 8455</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(rtp-&gt;rtcp);</div><div class="line"><a name="l08456"></a><span class="lineno"> 8456</span>&#160;            rtp-&gt;rtcp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08457"></a><span class="lineno"> 8457</span>&#160;         }</div><div class="line"><a name="l08458"></a><span class="lineno"> 8458</span>&#160;      }</div><div class="line"><a name="l08459"></a><span class="lineno"> 8459</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (property == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914cab679b8bb7cef31829481294ffeb15a00">AST_RTP_PROPERTY_ASYMMETRIC_CODEC</a>) {</div><div class="line"><a name="l08460"></a><span class="lineno"> 8460</span>&#160;      rtp-&gt;asymmetric_codec = <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l08461"></a><span class="lineno"> 8461</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (property == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca9914ed5449593d9fb9aff0b1a4411ca5">AST_RTP_PROPERTY_RETRANS_SEND</a>) {</div><div class="line"><a name="l08462"></a><span class="lineno"> 8462</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>) {</div><div class="line"><a name="l08463"></a><span class="lineno"> 8463</span>&#160;         <span class="keywordflow">if</span> (!rtp-&gt;send_buffer) {</div><div class="line"><a name="l08464"></a><span class="lineno"> 8464</span>&#160;            rtp-&gt;send_buffer = <a class="code" href="../../d7/d82/data__buffer_8h.html#aee79ddfb7e64ef7430be933f9addcdfa">ast_data_buffer_alloc</a>(<a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab26cc2139530464f618633637abd2ac2">DEFAULT_RTP_SEND_BUFFER_SIZE</a>);</div><div class="line"><a name="l08465"></a><span class="lineno"> 8465</span>&#160;         }</div><div class="line"><a name="l08466"></a><span class="lineno"> 8466</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08467"></a><span class="lineno"> 8467</span>&#160;         <span class="keywordflow">if</span> (rtp-&gt;send_buffer) {</div><div class="line"><a name="l08468"></a><span class="lineno"> 8468</span>&#160;            <a class="code" href="../../d7/d82/data__buffer_8h.html#ae796391f113088352925d4359c8f96f5">ast_data_buffer_free</a>(rtp-&gt;send_buffer);</div><div class="line"><a name="l08469"></a><span class="lineno"> 8469</span>&#160;            rtp-&gt;send_buffer = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08470"></a><span class="lineno"> 8470</span>&#160;         }</div><div class="line"><a name="l08471"></a><span class="lineno"> 8471</span>&#160;      }</div><div class="line"><a name="l08472"></a><span class="lineno"> 8472</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (property == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca7e9e842048d8b79e9e01e02dcf569927">AST_RTP_PROPERTY_RETRANS_RECV</a>) {</div><div class="line"><a name="l08473"></a><span class="lineno"> 8473</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>) {</div><div class="line"><a name="l08474"></a><span class="lineno"> 8474</span>&#160;         <span class="keywordflow">if</span> (!rtp-&gt;recv_buffer) {</div><div class="line"><a name="l08475"></a><span class="lineno"> 8475</span>&#160;            rtp-&gt;recv_buffer = <a class="code" href="../../d7/d82/data__buffer_8h.html#aee79ddfb7e64ef7430be933f9addcdfa">ast_data_buffer_alloc</a>(<a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a1155654303702ccc5fdcee752b634d2f">DEFAULT_RTP_RECV_BUFFER_SIZE</a>);</div><div class="line"><a name="l08476"></a><span class="lineno"> 8476</span>&#160;            <a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;rtp-&gt;missing_seqno, 0);</div><div class="line"><a name="l08477"></a><span class="lineno"> 8477</span>&#160;         }</div><div class="line"><a name="l08478"></a><span class="lineno"> 8478</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08479"></a><span class="lineno"> 8479</span>&#160;         <span class="keywordflow">if</span> (rtp-&gt;recv_buffer) {</div><div class="line"><a name="l08480"></a><span class="lineno"> 8480</span>&#160;            <a class="code" href="../../d7/d82/data__buffer_8h.html#ae796391f113088352925d4359c8f96f5">ast_data_buffer_free</a>(rtp-&gt;recv_buffer);</div><div class="line"><a name="l08481"></a><span class="lineno"> 8481</span>&#160;            rtp-&gt;recv_buffer = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08482"></a><span class="lineno"> 8482</span>&#160;            <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;rtp-&gt;missing_seqno);</div><div class="line"><a name="l08483"></a><span class="lineno"> 8483</span>&#160;         }</div><div class="line"><a name="l08484"></a><span class="lineno"> 8484</span>&#160;      }</div><div class="line"><a name="l08485"></a><span class="lineno"> 8485</span>&#160;   }</div><div class="line"><a name="l08486"></a><span class="lineno"> 8486</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00464">rtp_engine.h:464</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38">AST_RTP_INSTANCE_RTCP_STANDARD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00259">rtp_engine.h:259</a></div></div>
<div class="ttc" id="data__buffer_8h_html_aee79ddfb7e64ef7430be933f9addcdfa"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#aee79ddfb7e64ef7430be933f9addcdfa">ast_data_buffer_alloc</a></div><div class="ttdeci">struct ast_data_buffer * ast_data_buffer_alloc(ast_data_buffer_free_callback free_fn, size_t size)</div><div class="ttdoc">Allocate a data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00145">data_buffer.c:145</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914ca7e9e842048d8b79e9e01e02dcf569927"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca7e9e842048d8b79e9e01e02dcf569927">AST_RTP_PROPERTY_RETRANS_RECV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00127">rtp_engine.h:127</a></div></div>
<div class="ttc" id="acl_8h_html_a74a637419bacba1233890081dd2f0495"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a74a637419bacba1233890081dd2f0495">ast_find_ourip</a></div><div class="ttdeci">int ast_find_ourip(struct ast_sockaddr *ourip, const struct ast_sockaddr *bindaddr, int family)</div><div class="ttdoc">Find our IP address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l01052">acl.c:1052</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914ca9f63c95936712cfd6ec65555f1a27053"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca9f63c95936712cfd6ec65555f1a27053">AST_RTP_PROPERTY_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00123">rtp_engine.h:123</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="astmm_8h_html_ad42ab843b767e8b57162c10a158b75c3"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a></div><div class="ttdeci">void ast_free_ptr(void *ptr)</div><div class="ttdoc">free() wrapper </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01771">astmm.c:1771</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="netsock2_8h_html_a58f856feeaf684b7d5353357e85a0dd5"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a58f856feeaf684b7d5353357e85a0dd5">ast_bind</a></div><div class="ttdeci">int ast_bind(int sockfd, const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around bind(2) that uses struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00590">netsock2.c:590</a></div></div>
<div class="ttc" id="netsock2_8h_html_a51e2841175bf3ad58a4e11ad9fb2453f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a></div><div class="ttdeci">#define ast_sockaddr_port(addr)</div><div class="ttdoc">Get the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00521">netsock2.h:521</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ab1b4c0024c8207e04e00c38d3b6341d5"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab1b4c0024c8207e04e00c38d3b6341d5">rtp_add_candidates_to_ice</a></div><div class="ttdeci">static void rtp_add_candidates_to_ice(struct ast_rtp_instance *instance, struct ast_rtp *rtp, struct ast_sockaddr *addr, int port, int component, int transport)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">res_rtp_asterisk.c:3522</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga0915be7e2d33217121465cfb689318fd"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a></div><div class="ttdeci">#define ast_debug_rtcp(sublevel,...)</div><div class="ttdoc">Log debug level RTCP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02873">rtp_engine.h:2873</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a1155654303702ccc5fdcee752b634d2f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a1155654303702ccc5fdcee752b634d2f">DEFAULT_RTP_RECV_BUFFER_SIZE</a></div><div class="ttdeci">#define DEFAULT_RTP_RECV_BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00111">res_rtp_asterisk.c:111</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914ca9914ed5449593d9fb9aff0b1a4411ca5"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca9914ed5449593d9fb9aff0b1a4411ca5">AST_RTP_PROPERTY_RETRANS_SEND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00129">rtp_engine.h:129</a></div></div>
<div class="ttc" id="sched_8h_html_a3a093634fe17bd0ac4eb6f518aa0782e"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a3a093634fe17bd0ac4eb6f518aa0782e">ast_sched_del</a></div><div class="ttdeci">int ast_sched_del(struct ast_sched_context *con, int id) attribute_warn_unused_result</div><div class="ttdoc">Deletes a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00610">sched.c:610</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914cab679b8bb7cef31829481294ffeb15a00"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914cab679b8bb7cef31829481294ffeb15a00">AST_RTP_PROPERTY_ASYMMETRIC_CODEC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00125">rtp_engine.h:125</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a80baeff1bd121c3168ede2a955e9b3a2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a80baeff1bd121c3168ede2a955e9b3a2">ast_rtp_instance_get_local_address</a></div><div class="ttdeci">void ast_rtp_instance_get_local_address(struct ast_rtp_instance *instance, struct ast_sockaddr *address)</div><div class="ttdoc">Get the local address that we are expecting RTP on. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00643">rtp_engine.c:643</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ab26cc2139530464f618633637abd2ac2"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab26cc2139530464f618633637abd2ac2">DEFAULT_RTP_SEND_BUFFER_SIZE</a></div><div class="ttdeci">#define DEFAULT_RTP_SEND_BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00109">res_rtp_asterisk.c:109</a></div></div>
<div class="ttc" id="netsock2_8h_html_adbbb5a3382be0925c292a4933ce5b63d"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a></div><div class="ttdeci">int ast_sockaddr_is_ipv4(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if the address is an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00497">netsock2.c:497</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad7249b0dec2fde720fe4a30d04ce3482"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad7249b0dec2fde720fe4a30d04ce3482">TRANSPORT_SOCKET_RTCP</a></div><div class="ttdeci">#define TRANSPORT_SOCKET_RTCP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00292">res_rtp_asterisk.c:292</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a64f68b734a7edd69efce133ae28e7d39"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a64f68b734a7edd69efce133ae28e7d39">create_new_socket</a></div><div class="ttdeci">static int create_new_socket(const char *type, int af)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03360">res_rtp_asterisk.c:3360</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
<div class="ttc" id="netsock2_8h_html_a579748bd6ceddd06b1cc6eb3578e8acc"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a></div><div class="ttdeci">int ast_sockaddr_is_ipv6(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if this is an IPv6 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00524">netsock2.c:524</a></div></div>
<div class="ttc" id="data__buffer_8h_html_ae796391f113088352925d4359c8f96f5"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#ae796391f113088352925d4359c8f96f5">ast_data_buffer_free</a></div><div class="ttdeci">void ast_data_buffer_free(struct ast_data_buffer *buffer)</div><div class="ttdoc">Free a data buffer (and all held data payloads) </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00338">data_buffer.c:338</a></div></div>
<div class="ttc" id="structast__rtp_html_a339d22b3e442946380f98ed19e320db2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">ast_rtp::s</a></div><div class="ttdeci">int s</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">res_rtp_asterisk.c:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a80e2deb736c4594727bd46b41574f4b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80e2deb736c4594727bd46b41574f4b2">&#9670;&nbsp;</a></span>ast_rtp_qos_set()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_qos_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>desc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08804">8804</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00621">ast_set_qos()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">ast_rtp::s</a>.</p>
<div class="fragment"><div class="line"><a name="l08805"></a><span class="lineno"> 8805</span>&#160;{</div><div class="line"><a name="l08806"></a><span class="lineno"> 8806</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l08807"></a><span class="lineno"> 8807</span>&#160;</div><div class="line"><a name="l08808"></a><span class="lineno"> 8808</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/df1/netsock2_8h.html#a9e06776a6cd2ae9f2780a445053a6864">ast_set_qos</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>, <a class="code" href="../../d5/dff/chan__iax2_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>, <a class="code" href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>);</div><div class="line"><a name="l08809"></a><span class="lineno"> 8809</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_ae91dad65f553f7afebe4af507803bc7f"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a></div><div class="ttdeci">unsigned int cos</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l00352">chan_iax2.c:352</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a787f82faccb7c1f40a2539a14855601b"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a></div><div class="ttdeci">static const char desc[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00073">cdr_mysql.c:73</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a25a9305efab3b493ca2519562fcec3d5"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a></div><div class="ttdeci">unsigned int tos</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l00351">chan_iax2.c:351</a></div></div>
<div class="ttc" id="netsock2_8h_html_a9e06776a6cd2ae9f2780a445053a6864"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a9e06776a6cd2ae9f2780a445053a6864">ast_set_qos</a></div><div class="ttdeci">int ast_set_qos(int sockfd, int tos, int cos, const char *desc)</div><div class="ttdoc">Set type of service. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00621">netsock2.c:621</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__rtp_html_a339d22b3e442946380f98ed19e320db2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">ast_rtp::s</a></div><div class="ttdeci">int s</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">res_rtp_asterisk.c:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a54703dd03f087fa55bf80e8ea8f6d35a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54703dd03f087fa55bf80e8ea8f6d35a">&#9670;&nbsp;</a></span>ast_rtp_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> * ast_rtp_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rtcp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">7638</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00347">ast_codec_media_type2str()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00303">AST_CONTROL_SRCCHANGE</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00356">ast_data_buffer_count()</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00269">ast_data_buffer_get()</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00363">ast_data_buffer_max()</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00203">ast_data_buffer_put()</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00299">ast_data_buffer_remove()</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00168">ast_data_buffer_resize()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02873">ast_debug_rtcp</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02860">ast_debug_rtp</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02864">ast_debug_rtp_packet_is_allowed</a>, <a class="el" href="../../d3/d00/stun_8h_source.html#l00053">ast_debug_stun</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00176">ast_frame_free()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">ast_frdup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d9/db0/astmm_8c_source.html#l01771">ast_free_ptr()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">AST_FRIENDLY_OFFSET</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00420">AST_LIST_FIRST</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00680">AST_LIST_HEAD_INIT_NOLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00033">AST_MEDIA_TYPE_VIDEO</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04579">ast_rtcp_calculate_sr_rr_statistics()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04699">ast_rtcp_generate_compound_prefix()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04729">ast_rtcp_generate_nack()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06590">ast_rtcp_read()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01460">ast_rtp_codecs_get_stream_type()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00727">ast_rtp_instance_get_codecs()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00716">ast_rtp_instance_get_prop()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00673">ast_rtp_instance_get_requested_target_address()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02763">ast_rtp_instance_get_srtp()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00259">AST_RTP_INSTANCE_RTCP_STANDARD</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00606">ast_rtp_instance_set_incoming_source_address()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01080">ast_rtp_instance_set_remote_address</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">ast_rtp_interpret()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00115">AST_RTP_PROPERTY_NAT</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03474">ast_rtp_rtcp_report_alloc()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00388">ast_sockaddr_cmp()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00782">ast_sockaddr_from_sin</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00037">ast_sockaddr_ipv4_mapped()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00497">ast_sockaddr_is_ipv4()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00521">ast_sockaddr_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00769">ast_sockaddr_to_sin</a>, <a class="el" href="../../d3/d00/stun_8h_source.html#l00064">AST_STUN_ACCEPT</a>, <a class="el" href="../../d1/dbd/stun_8c_source.html#l00268">ast_stun_handle_packet()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00196">ast_test_suite_event_notify</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../dd/d1d/uuid_8h_source.html#l00027">AST_UUID_STR_LEN</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00371">AST_VECTOR_ADD_SORTED</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00573">AST_VECTOR_ELEM_CLEANUP_NOOP</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00733">AST_VECTOR_GET_CMP</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00540">AST_VECTOR_REMOVE_CMP_ORDERED</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00627">AST_VECTOR_RESET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00587">ast_rtp_rtcp_nack_payload::buf</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00048">codecs</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03039">compare_by_value()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00384">ast_rtp::expectedrxseqno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">ast_rtp::f</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03045">find_by_value()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00284">FLAG_NAT_ACTIVE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00379">ast_rtp::lastividtimestamp</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00383">ast_rtp::lastrxseqno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00112">MAXIMUM_RTP_RECV_BUFFER_SIZE</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00226">MIN</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00114">MISSING_SEQNOS_ADDED_TRIGGER</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00113">OLD_PACKET_COUNT</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00371">ast_rtp::rawdata</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03050">rtcp_mux()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03303">rtcp_sendto()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">rtp_debug_test_addr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00161">RTP_DTLS_ESTABLISHED</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05897">rtp_find_instance_by_packet_source_ssrc()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06817">rtp_instance_unlock()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03403">rtp_learning_rtp_seq_update()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03386">rtp_learning_seq_init()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03241">rtp_recvfrom()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05160">rtp_write_rtcp_fir()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">ast_rtp::s</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">ast_frame::seqno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00116">SEQNO_CYCLE_OVER</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07583">should_drop_packets()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00586">ast_rtp_rtcp_nack_payload::size</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00166">STRICT_RTP_CLOSED</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00165">STRICT_RTP_LEARN</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00182">STRICT_RTP_LEARN_TIMEOUT</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00164">STRICT_RTP_OPEN</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">ast_rtp::themssrc_valid</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00391">version</a>.</p>
<div class="fragment"><div class="line"><a name="l07639"></a><span class="lineno"> 7639</span>&#160;{</div><div class="line"><a name="l07640"></a><span class="lineno"> 7640</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l07641"></a><span class="lineno"> 7641</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d11/structast__srtp.html">ast_srtp</a> *srtp;</div><div class="line"><a name="l07642"></a><span class="lineno"> 7642</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *, child, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9fba4bbd59bd9bcd7b0e06c4e2ac8ff6">rtp_instance_unlock</a>);</div><div class="line"><a name="l07643"></a><span class="lineno"> 7643</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> addr;</div><div class="line"><a name="l07644"></a><span class="lineno"> 7644</span>&#160;   <span class="keywordtype">int</span> res, hdrlen = 12, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a>, payloadtype;</div><div class="line"><a name="l07645"></a><span class="lineno"> 7645</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *read_area = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a8af53bd0e8b4f1e9275d51d2a4065991">rawdata</a> + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l07646"></a><span class="lineno"> 7646</span>&#160;   <span class="keywordtype">size_t</span> read_area_size = <span class="keyword">sizeof</span>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a8af53bd0e8b4f1e9275d51d2a4065991">rawdata</a>) - <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l07647"></a><span class="lineno"> 7647</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *rtpheader = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>*)(read_area), seqno, ssrc, timestamp, prev_seqno;</div><div class="line"><a name="l07648"></a><span class="lineno"> 7648</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address = { {0,} };</div><div class="line"><a name="l07649"></a><span class="lineno"> 7649</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d42/structframe__list.html">frame_list</a> <a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>;</div><div class="line"><a name="l07650"></a><span class="lineno"> 7650</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame;</div><div class="line"><a name="l07651"></a><span class="lineno"> 7651</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bundled;</div><div class="line"><a name="l07652"></a><span class="lineno"> 7652</span>&#160;</div><div class="line"><a name="l07653"></a><span class="lineno"> 7653</span>&#160;   <span class="comment">/* If this is actually RTCP let&#39;s hop on over and handle it */</span></div><div class="line"><a name="l07654"></a><span class="lineno"> 7654</span>&#160;   <span class="keywordflow">if</span> (rtcp) {</div><div class="line"><a name="l07655"></a><span class="lineno"> 7655</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;rtcp &amp;&amp; rtp-&gt;rtcp-&gt;type == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38">AST_RTP_INSTANCE_RTCP_STANDARD</a>) {</div><div class="line"><a name="l07656"></a><span class="lineno"> 7656</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac7bd4f073fac1bbe828d0390d7e9250f">ast_rtcp_read</a>(instance);</div><div class="line"><a name="l07657"></a><span class="lineno"> 7657</span>&#160;      }</div><div class="line"><a name="l07658"></a><span class="lineno"> 7658</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07659"></a><span class="lineno"> 7659</span>&#160;   }</div><div class="line"><a name="l07660"></a><span class="lineno"> 7660</span>&#160;</div><div class="line"><a name="l07661"></a><span class="lineno"> 7661</span>&#160;   <span class="comment">/* Actually read in the data from the socket */</span></div><div class="line"><a name="l07662"></a><span class="lineno"> 7662</span>&#160;   <span class="keywordflow">if</span> ((res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa0fc4bee4b3cceefec395ea724d20650">rtp_recvfrom</a>(instance, read_area, read_area_size, 0,</div><div class="line"><a name="l07663"></a><span class="lineno"> 7663</span>&#160;            &amp;addr)) &lt; 0) {</div><div class="line"><a name="l07664"></a><span class="lineno"> 7664</span>&#160;      <span class="keywordflow">if</span> (res == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3b7005812dac9fa0577e157db320ae4c">RTP_DTLS_ESTABLISHED</a>) {</div><div class="line"><a name="l07665"></a><span class="lineno"> 7665</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>;</div><div class="line"><a name="l07666"></a><span class="lineno"> 7666</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a>;</div><div class="line"><a name="l07667"></a><span class="lineno"> 7667</span>&#160;         <span class="keywordflow">return</span> &amp;rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>;</div><div class="line"><a name="l07668"></a><span class="lineno"> 7668</span>&#160;      }</div><div class="line"><a name="l07669"></a><span class="lineno"> 7669</span>&#160;</div><div class="line"><a name="l07670"></a><span class="lineno"> 7670</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EBADF);</div><div class="line"><a name="l07671"></a><span class="lineno"> 7671</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EAGAIN) {</div><div class="line"><a name="l07672"></a><span class="lineno"> 7672</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;RTP Read error: %s.  Hanging up.\n&quot;</span>,</div><div class="line"><a name="l07673"></a><span class="lineno"> 7673</span>&#160;            (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>) ? strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>) : <span class="stringliteral">&quot;Unspecified&quot;</span>);</div><div class="line"><a name="l07674"></a><span class="lineno"> 7674</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07675"></a><span class="lineno"> 7675</span>&#160;      }</div><div class="line"><a name="l07676"></a><span class="lineno"> 7676</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07677"></a><span class="lineno"> 7677</span>&#160;   }</div><div class="line"><a name="l07678"></a><span class="lineno"> 7678</span>&#160;</div><div class="line"><a name="l07679"></a><span class="lineno"> 7679</span>&#160;   <span class="comment">/* If this was handled by the ICE session don&#39;t do anything */</span></div><div class="line"><a name="l07680"></a><span class="lineno"> 7680</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l07681"></a><span class="lineno"> 7681</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07682"></a><span class="lineno"> 7682</span>&#160;   }</div><div class="line"><a name="l07683"></a><span class="lineno"> 7683</span>&#160;</div><div class="line"><a name="l07684"></a><span class="lineno"> 7684</span>&#160;   <span class="comment">/* This could be a multiplexed RTCP packet. If so, be sure to interpret it correctly */</span></div><div class="line"><a name="l07685"></a><span class="lineno"> 7685</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad49be45beb567b0fe0298d7bd0dd6419">rtcp_mux</a>(rtp, read_area)) {</div><div class="line"><a name="l07686"></a><span class="lineno"> 7686</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#acef3a2fc706fb66b5cf99569281b4948">ast_rtcp_interpret</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a622089f7b296c002cc855d73172e9da4">ast_rtp_instance_get_srtp</a>(instance, 1), read_area, res, &amp;addr);</div><div class="line"><a name="l07687"></a><span class="lineno"> 7687</span>&#160;   }</div><div class="line"><a name="l07688"></a><span class="lineno"> 7688</span>&#160;</div><div class="line"><a name="l07689"></a><span class="lineno"> 7689</span>&#160;   <span class="comment">/* Make sure the data that was read in is actually enough to make up an RTP packet */</span></div><div class="line"><a name="l07690"></a><span class="lineno"> 7690</span>&#160;   <span class="keywordflow">if</span> (res &lt; hdrlen) {</div><div class="line"><a name="l07691"></a><span class="lineno"> 7691</span>&#160;      <span class="comment">/* If this is a keepalive containing only nulls, don&#39;t bother with a warning */</span></div><div class="line"><a name="l07692"></a><span class="lineno"> 7692</span>&#160;      <span class="keywordtype">int</span> i;</div><div class="line"><a name="l07693"></a><span class="lineno"> 7693</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; res; ++i) {</div><div class="line"><a name="l07694"></a><span class="lineno"> 7694</span>&#160;         <span class="keywordflow">if</span> (read_area[i] != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l07695"></a><span class="lineno"> 7695</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;RTP Read too short\n&quot;</span>);</div><div class="line"><a name="l07696"></a><span class="lineno"> 7696</span>&#160;            <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07697"></a><span class="lineno"> 7697</span>&#160;         }</div><div class="line"><a name="l07698"></a><span class="lineno"> 7698</span>&#160;      }</div><div class="line"><a name="l07699"></a><span class="lineno"> 7699</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07700"></a><span class="lineno"> 7700</span>&#160;   }</div><div class="line"><a name="l07701"></a><span class="lineno"> 7701</span>&#160;</div><div class="line"><a name="l07702"></a><span class="lineno"> 7702</span>&#160;   <span class="comment">/* Get fields and verify this is an RTP packet */</span></div><div class="line"><a name="l07703"></a><span class="lineno"> 7703</span>&#160;   <a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a> = ntohl(rtpheader[0]);</div><div class="line"><a name="l07704"></a><span class="lineno"> 7704</span>&#160;</div><div class="line"><a name="l07705"></a><span class="lineno"> 7705</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(instance, &amp;remote_address);</div><div class="line"><a name="l07706"></a><span class="lineno"> 7706</span>&#160;</div><div class="line"><a name="l07707"></a><span class="lineno"> 7707</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a> = (<a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a> &amp; 0xC0000000) &gt;&gt; 30)) {</div><div class="line"><a name="l07708"></a><span class="lineno"> 7708</span>&#160;      <span class="keyword">struct </span>sockaddr_in addr_tmp;</div><div class="line"><a name="l07709"></a><span class="lineno"> 7709</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> addr_v4;</div><div class="line"><a name="l07710"></a><span class="lineno"> 7710</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a>(&amp;addr)) {</div><div class="line"><a name="l07711"></a><span class="lineno"> 7711</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a>(&amp;addr, &amp;addr_tmp);</div><div class="line"><a name="l07712"></a><span class="lineno"> 7712</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a42e610962ef06c151aad8260af428e3d">ast_sockaddr_ipv4_mapped</a>(&amp;addr, &amp;addr_v4)) {</div><div class="line"><a name="l07713"></a><span class="lineno"> 7713</span>&#160;         <a class="code" href="../../d3/d00/stun_8h.html#a6fe18262fa19169a3c2481829cd07cb3">ast_debug_stun</a>(1, <span class="stringliteral">&quot;(%p) STUN using IPv6 mapped address %s\n&quot;</span>,</div><div class="line"><a name="l07714"></a><span class="lineno"> 7714</span>&#160;            instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addr));</div><div class="line"><a name="l07715"></a><span class="lineno"> 7715</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a>(&amp;addr_v4, &amp;addr_tmp);</div><div class="line"><a name="l07716"></a><span class="lineno"> 7716</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07717"></a><span class="lineno"> 7717</span>&#160;         <a class="code" href="../../d3/d00/stun_8h.html#a6fe18262fa19169a3c2481829cd07cb3">ast_debug_stun</a>(1, <span class="stringliteral">&quot;(%p) STUN cannot do for non IPv4 address %s\n&quot;</span>,</div><div class="line"><a name="l07718"></a><span class="lineno"> 7718</span>&#160;            instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addr));</div><div class="line"><a name="l07719"></a><span class="lineno"> 7719</span>&#160;         <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07720"></a><span class="lineno"> 7720</span>&#160;      }</div><div class="line"><a name="l07721"></a><span class="lineno"> 7721</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../d3/d00/stun_8h.html#a54055c699858c128745d6802755f0abe">ast_stun_handle_packet</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>, &amp;addr_tmp, read_area, res, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) == <a class="code" href="../../d3/d00/stun_8h.html#aeebbffb9fd9d97e2ce5469547e5fb074a8f3217f91c38418aa44ff22ba9c19b97">AST_STUN_ACCEPT</a>) &amp;&amp;</div><div class="line"><a name="l07722"></a><span class="lineno"> 7722</span>&#160;          <a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;remote_address)) {</div><div class="line"><a name="l07723"></a><span class="lineno"> 7723</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a>(&amp;addr, &amp;addr_tmp);</div><div class="line"><a name="l07724"></a><span class="lineno"> 7724</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a>(instance, &amp;addr);</div><div class="line"><a name="l07725"></a><span class="lineno"> 7725</span>&#160;      }</div><div class="line"><a name="l07726"></a><span class="lineno"> 7726</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07727"></a><span class="lineno"> 7727</span>&#160;   }</div><div class="line"><a name="l07728"></a><span class="lineno"> 7728</span>&#160;</div><div class="line"><a name="l07729"></a><span class="lineno"> 7729</span>&#160;   <span class="comment">/* If the version is not what we expected by this point then just drop the packet */</span></div><div class="line"><a name="l07730"></a><span class="lineno"> 7730</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a> != 2) {</div><div class="line"><a name="l07731"></a><span class="lineno"> 7731</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07732"></a><span class="lineno"> 7732</span>&#160;   }</div><div class="line"><a name="l07733"></a><span class="lineno"> 7733</span>&#160;</div><div class="line"><a name="l07734"></a><span class="lineno"> 7734</span>&#160;   <span class="comment">/* We use the SSRC to determine what RTP instance this packet is actually for */</span></div><div class="line"><a name="l07735"></a><span class="lineno"> 7735</span>&#160;   ssrc = ntohl(rtpheader[2]);</div><div class="line"><a name="l07736"></a><span class="lineno"> 7736</span>&#160;</div><div class="line"><a name="l07737"></a><span class="lineno"> 7737</span>&#160;   <span class="comment">/* We use the SRTP data from the provided instance that it came in on, not the child */</span></div><div class="line"><a name="l07738"></a><span class="lineno"> 7738</span>&#160;   srtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a622089f7b296c002cc855d73172e9da4">ast_rtp_instance_get_srtp</a>(instance, 0);</div><div class="line"><a name="l07739"></a><span class="lineno"> 7739</span>&#160;</div><div class="line"><a name="l07740"></a><span class="lineno"> 7740</span>&#160;   <span class="comment">/* Determine the appropriate instance for this */</span></div><div class="line"><a name="l07741"></a><span class="lineno"> 7741</span>&#160;   child = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a5402d4a2ce7addf589cc3efdb25b27be">rtp_find_instance_by_packet_source_ssrc</a>(instance, rtp, ssrc);</div><div class="line"><a name="l07742"></a><span class="lineno"> 7742</span>&#160;   <span class="keywordflow">if</span> (!child) {</div><div class="line"><a name="l07743"></a><span class="lineno"> 7743</span>&#160;      <span class="comment">/* Neither the bundled parent nor any child has this SSRC */</span></div><div class="line"><a name="l07744"></a><span class="lineno"> 7744</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07745"></a><span class="lineno"> 7745</span>&#160;   }</div><div class="line"><a name="l07746"></a><span class="lineno"> 7746</span>&#160;   <span class="keywordflow">if</span> (child != instance) {</div><div class="line"><a name="l07747"></a><span class="lineno"> 7747</span>&#160;      <span class="comment">/* It is safe to hold the child lock while holding the parent lock, we guarantee that the locking order</span></div><div class="line"><a name="l07748"></a><span class="lineno"> 7748</span>&#160;<span class="comment">       * is always parent-&gt;child or that the child lock is not held when acquiring the parent lock.</span></div><div class="line"><a name="l07749"></a><span class="lineno"> 7749</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l07750"></a><span class="lineno"> 7750</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(child);</div><div class="line"><a name="l07751"></a><span class="lineno"> 7751</span>&#160;      instance = child;</div><div class="line"><a name="l07752"></a><span class="lineno"> 7752</span>&#160;      rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l07753"></a><span class="lineno"> 7753</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07754"></a><span class="lineno"> 7754</span>&#160;      <span class="comment">/* The child is the parent! We don&#39;t need to unlock it. */</span></div><div class="line"><a name="l07755"></a><span class="lineno"> 7755</span>&#160;      child = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07756"></a><span class="lineno"> 7756</span>&#160;   }</div><div class="line"><a name="l07757"></a><span class="lineno"> 7757</span>&#160;</div><div class="line"><a name="l07758"></a><span class="lineno"> 7758</span>&#160;   <span class="comment">/* If strict RTP protection is enabled see if we need to learn the remote address or if we need to drop the packet */</span></div><div class="line"><a name="l07759"></a><span class="lineno"> 7759</span>&#160;   <span class="keywordflow">switch</span> (rtp-&gt;strict_rtp_state) {</div><div class="line"><a name="l07760"></a><span class="lineno"> 7760</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4ba0c26c1144bb830775979deb20e049368">STRICT_RTP_LEARN</a>:</div><div class="line"><a name="l07761"></a><span class="lineno"> 7761</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l07762"></a><span class="lineno"> 7762</span>&#160;<span class="comment">       * Scenario setup:</span></div><div class="line"><a name="l07763"></a><span class="lineno"> 7763</span>&#160;<span class="comment">       * PartyA -- Ast1 -- Ast2 -- PartyB</span></div><div class="line"><a name="l07764"></a><span class="lineno"> 7764</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l07765"></a><span class="lineno"> 7765</span>&#160;<span class="comment">       * The learning timeout is necessary for Ast1 to handle the above</span></div><div class="line"><a name="l07766"></a><span class="lineno"> 7766</span>&#160;<span class="comment">       * setup where PartyA calls PartyB and Ast2 initiates direct media</span></div><div class="line"><a name="l07767"></a><span class="lineno"> 7767</span>&#160;<span class="comment">       * between Ast1 and PartyB.  Ast1 may lock onto the Ast2 stream and</span></div><div class="line"><a name="l07768"></a><span class="lineno"> 7768</span>&#160;<span class="comment">       * never learn the PartyB stream when it starts.  The timeout makes</span></div><div class="line"><a name="l07769"></a><span class="lineno"> 7769</span>&#160;<span class="comment">       * Ast1 stay in the learning state long enough to see and learn the</span></div><div class="line"><a name="l07770"></a><span class="lineno"> 7770</span>&#160;<span class="comment">       * RTP stream from PartyB.</span></div><div class="line"><a name="l07771"></a><span class="lineno"> 7771</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l07772"></a><span class="lineno"> 7772</span>&#160;<span class="comment">       * To mitigate against attack, the learning state cannot switch</span></div><div class="line"><a name="l07773"></a><span class="lineno"> 7773</span>&#160;<span class="comment">       * streams while there are competing streams.  The competing streams</span></div><div class="line"><a name="l07774"></a><span class="lineno"> 7774</span>&#160;<span class="comment">       * interfere with each other&#39;s qualification.  Once we accept a</span></div><div class="line"><a name="l07775"></a><span class="lineno"> 7775</span>&#160;<span class="comment">       * stream and reach the timeout, an attacker cannot interfere</span></div><div class="line"><a name="l07776"></a><span class="lineno"> 7776</span>&#160;<span class="comment">       * anymore.</span></div><div class="line"><a name="l07777"></a><span class="lineno"> 7777</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l07778"></a><span class="lineno"> 7778</span>&#160;<span class="comment">       * Here are a few scenarios and each one assumes that the streams</span></div><div class="line"><a name="l07779"></a><span class="lineno"> 7779</span>&#160;<span class="comment">       * are continuous:</span></div><div class="line"><a name="l07780"></a><span class="lineno"> 7780</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l07781"></a><span class="lineno"> 7781</span>&#160;<span class="comment">       * 1) We already have a known stream source address and the known</span></div><div class="line"><a name="l07782"></a><span class="lineno"> 7782</span>&#160;<span class="comment">       * stream wants to change to a new source address.  An attacking</span></div><div class="line"><a name="l07783"></a><span class="lineno"> 7783</span>&#160;<span class="comment">       * stream will block learning the new stream source.  After the</span></div><div class="line"><a name="l07784"></a><span class="lineno"> 7784</span>&#160;<span class="comment">       * timeout we re-lock onto the original stream source address which</span></div><div class="line"><a name="l07785"></a><span class="lineno"> 7785</span>&#160;<span class="comment">       * likely went away.  The result is one way audio.</span></div><div class="line"><a name="l07786"></a><span class="lineno"> 7786</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l07787"></a><span class="lineno"> 7787</span>&#160;<span class="comment">       * 2) We already have a known stream source address and the known</span></div><div class="line"><a name="l07788"></a><span class="lineno"> 7788</span>&#160;<span class="comment">       * stream doesn&#39;t want to change source addresses.  An attacking</span></div><div class="line"><a name="l07789"></a><span class="lineno"> 7789</span>&#160;<span class="comment">       * stream will not be able to replace the known stream.  After the</span></div><div class="line"><a name="l07790"></a><span class="lineno"> 7790</span>&#160;<span class="comment">       * timeout we re-lock onto the known stream.  The call is not</span></div><div class="line"><a name="l07791"></a><span class="lineno"> 7791</span>&#160;<span class="comment">       * affected.</span></div><div class="line"><a name="l07792"></a><span class="lineno"> 7792</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l07793"></a><span class="lineno"> 7793</span>&#160;<span class="comment">       * 3) We don&#39;t have a known stream source address.  This presumably</span></div><div class="line"><a name="l07794"></a><span class="lineno"> 7794</span>&#160;<span class="comment">       * is the start of a call.  Competing streams will result in staying</span></div><div class="line"><a name="l07795"></a><span class="lineno"> 7795</span>&#160;<span class="comment">       * in learning mode until a stream becomes the victor and we reach</span></div><div class="line"><a name="l07796"></a><span class="lineno"> 7796</span>&#160;<span class="comment">       * the timeout.  We cannot exit learning if we have no known stream</span></div><div class="line"><a name="l07797"></a><span class="lineno"> 7797</span>&#160;<span class="comment">       * to lock onto.  The result is one way audio until there is a victor.</span></div><div class="line"><a name="l07798"></a><span class="lineno"> 7798</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l07799"></a><span class="lineno"> 7799</span>&#160;<span class="comment">       * If we learn a stream source address before the timeout we will be</span></div><div class="line"><a name="l07800"></a><span class="lineno"> 7800</span>&#160;<span class="comment">       * in scenario 1) or 2) when a competing stream starts.</span></div><div class="line"><a name="l07801"></a><span class="lineno"> 7801</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l07802"></a><span class="lineno"> 7802</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;rtp-&gt;strict_rtp_address)</div><div class="line"><a name="l07803"></a><span class="lineno"> 7803</span>&#160;         &amp;&amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a91b1655b35022bc0a34e7187af475b26">STRICT_RTP_LEARN_TIMEOUT</a> &lt; <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), rtp-&gt;rtp_source_learn.start)) {</div><div class="line"><a name="l07804"></a><span class="lineno"> 7804</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;%p -- Strict RTP learning complete - Locking on source address %s\n&quot;</span>,</div><div class="line"><a name="l07805"></a><span class="lineno"> 7805</span>&#160;            rtp, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;rtp-&gt;strict_rtp_address));</div><div class="line"><a name="l07806"></a><span class="lineno"> 7806</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;STRICT_RTP_LEARN&quot;</span>, <span class="stringliteral">&quot;Source: %s&quot;</span>,</div><div class="line"><a name="l07807"></a><span class="lineno"> 7807</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;rtp-&gt;strict_rtp_address));</div><div class="line"><a name="l07808"></a><span class="lineno"> 7808</span>&#160;         rtp-&gt;strict_rtp_state = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4baff585ea9a2059021ce5a5f4a7ed8895f">STRICT_RTP_CLOSED</a>;</div><div class="line"><a name="l07809"></a><span class="lineno"> 7809</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07810"></a><span class="lineno"> 7810</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> target_address;</div><div class="line"><a name="l07811"></a><span class="lineno"> 7811</span>&#160;</div><div class="line"><a name="l07812"></a><span class="lineno"> 7812</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(&amp;rtp-&gt;strict_rtp_address, &amp;addr)) {</div><div class="line"><a name="l07813"></a><span class="lineno"> 7813</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l07814"></a><span class="lineno"> 7814</span>&#160;<span class="comment">             * We are open to learning a new address but have received</span></div><div class="line"><a name="l07815"></a><span class="lineno"> 7815</span>&#160;<span class="comment">             * traffic from the current address, accept it and reset</span></div><div class="line"><a name="l07816"></a><span class="lineno"> 7816</span>&#160;<span class="comment">             * the learning counts for a new source.  When no more</span></div><div class="line"><a name="l07817"></a><span class="lineno"> 7817</span>&#160;<span class="comment">             * current source packets arrive a new source can take over</span></div><div class="line"><a name="l07818"></a><span class="lineno"> 7818</span>&#160;<span class="comment">             * once sufficient traffic is received.</span></div><div class="line"><a name="l07819"></a><span class="lineno"> 7819</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l07820"></a><span class="lineno"> 7820</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad68124a712f2eb4ae298e08743ae2740">rtp_learning_seq_init</a>(&amp;rtp-&gt;rtp_source_learn, seqno);</div><div class="line"><a name="l07821"></a><span class="lineno"> 7821</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l07822"></a><span class="lineno"> 7822</span>&#160;         }</div><div class="line"><a name="l07823"></a><span class="lineno"> 7823</span>&#160;</div><div class="line"><a name="l07824"></a><span class="lineno"> 7824</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l07825"></a><span class="lineno"> 7825</span>&#160;<span class="comment">          * We give preferential treatment to the requested target address</span></div><div class="line"><a name="l07826"></a><span class="lineno"> 7826</span>&#160;<span class="comment">          * (negotiated SDP address) where we are to send our RTP.  However,</span></div><div class="line"><a name="l07827"></a><span class="lineno"> 7827</span>&#160;<span class="comment">          * the other end has no obligation to send from that address even</span></div><div class="line"><a name="l07828"></a><span class="lineno"> 7828</span>&#160;<span class="comment">          * though it is practically a requirement when NAT is involved.</span></div><div class="line"><a name="l07829"></a><span class="lineno"> 7829</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l07830"></a><span class="lineno"> 7830</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#ab035447ec9d2b67c82ab84a0d4215935">ast_rtp_instance_get_requested_target_address</a>(instance, &amp;target_address);</div><div class="line"><a name="l07831"></a><span class="lineno"> 7831</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(&amp;target_address, &amp;addr)) {</div><div class="line"><a name="l07832"></a><span class="lineno"> 7832</span>&#160;            <span class="comment">/* Accept the negotiated target RTP stream as the source */</span></div><div class="line"><a name="l07833"></a><span class="lineno"> 7833</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;%p -- Strict RTP switching to RTP target address %s as source\n&quot;</span>,</div><div class="line"><a name="l07834"></a><span class="lineno"> 7834</span>&#160;               rtp, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addr));</div><div class="line"><a name="l07835"></a><span class="lineno"> 7835</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;rtp-&gt;strict_rtp_address, &amp;addr);</div><div class="line"><a name="l07836"></a><span class="lineno"> 7836</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad68124a712f2eb4ae298e08743ae2740">rtp_learning_seq_init</a>(&amp;rtp-&gt;rtp_source_learn, seqno);</div><div class="line"><a name="l07837"></a><span class="lineno"> 7837</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l07838"></a><span class="lineno"> 7838</span>&#160;         }</div><div class="line"><a name="l07839"></a><span class="lineno"> 7839</span>&#160;</div><div class="line"><a name="l07840"></a><span class="lineno"> 7840</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l07841"></a><span class="lineno"> 7841</span>&#160;<span class="comment">          * Trying to learn a new address.  If we pass a probationary period</span></div><div class="line"><a name="l07842"></a><span class="lineno"> 7842</span>&#160;<span class="comment">          * with it, that means we&#39;ve stopped getting RTP from the original</span></div><div class="line"><a name="l07843"></a><span class="lineno"> 7843</span>&#160;<span class="comment">          * source and we should switch to it.</span></div><div class="line"><a name="l07844"></a><span class="lineno"> 7844</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l07845"></a><span class="lineno"> 7845</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(&amp;rtp-&gt;rtp_source_learn.proposed_address, &amp;addr)) {</div><div class="line"><a name="l07846"></a><span class="lineno"> 7846</span>&#160;            <span class="keywordflow">if</span> (rtp-&gt;rtp_source_learn.stream_type == <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>) {</div><div class="line"><a name="l07847"></a><span class="lineno"> 7847</span>&#160;               <span class="keyword">struct </span><a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>;</div><div class="line"><a name="l07848"></a><span class="lineno"> 7848</span>&#160;</div><div class="line"><a name="l07849"></a><span class="lineno"> 7849</span>&#160;               codecs = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(instance);</div><div class="line"><a name="l07850"></a><span class="lineno"> 7850</span>&#160;               rtp-&gt;rtp_source_learn.stream_type =</div><div class="line"><a name="l07851"></a><span class="lineno"> 7851</span>&#160;                  <a class="code" href="../../d5/dde/rtp__engine_8h.html#a576dcfebba6ad2a0d3bf3a97119cd953">ast_rtp_codecs_get_stream_type</a>(codecs);</div><div class="line"><a name="l07852"></a><span class="lineno"> 7852</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;%p -- Strict RTP qualifying stream type: %s\n&quot;</span>,</div><div class="line"><a name="l07853"></a><span class="lineno"> 7853</span>&#160;                  rtp, <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(rtp-&gt;rtp_source_learn.stream_type));</div><div class="line"><a name="l07854"></a><span class="lineno"> 7854</span>&#160;            }</div><div class="line"><a name="l07855"></a><span class="lineno"> 7855</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a1e91482dfb876c9f92964c4fcce1c670">rtp_learning_rtp_seq_update</a>(&amp;rtp-&gt;rtp_source_learn, seqno)) {</div><div class="line"><a name="l07856"></a><span class="lineno"> 7856</span>&#160;               <span class="comment">/* Accept the new RTP stream */</span></div><div class="line"><a name="l07857"></a><span class="lineno"> 7857</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;%p -- Strict RTP switching source address to %s\n&quot;</span>,</div><div class="line"><a name="l07858"></a><span class="lineno"> 7858</span>&#160;                  rtp, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addr));</div><div class="line"><a name="l07859"></a><span class="lineno"> 7859</span>&#160;               <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;rtp-&gt;strict_rtp_address, &amp;addr);</div><div class="line"><a name="l07860"></a><span class="lineno"> 7860</span>&#160;               <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad68124a712f2eb4ae298e08743ae2740">rtp_learning_seq_init</a>(&amp;rtp-&gt;rtp_source_learn, seqno);</div><div class="line"><a name="l07861"></a><span class="lineno"> 7861</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l07862"></a><span class="lineno"> 7862</span>&#160;            }</div><div class="line"><a name="l07863"></a><span class="lineno"> 7863</span>&#160;            <span class="comment">/* Not ready to accept the RTP stream candidate */</span></div><div class="line"><a name="l07864"></a><span class="lineno"> 7864</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p) RTP %p -- Received packet from %s, dropping due to strict RTP protection. Will switch to it in %d packets.\n&quot;</span>,</div><div class="line"><a name="l07865"></a><span class="lineno"> 7865</span>&#160;               instance, rtp, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addr), rtp-&gt;rtp_source_learn.packets);</div><div class="line"><a name="l07866"></a><span class="lineno"> 7866</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07867"></a><span class="lineno"> 7867</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l07868"></a><span class="lineno"> 7868</span>&#160;<span class="comment">             * This is either an attacking stream or</span></div><div class="line"><a name="l07869"></a><span class="lineno"> 7869</span>&#160;<span class="comment">             * the start of the expected new stream.</span></div><div class="line"><a name="l07870"></a><span class="lineno"> 7870</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l07871"></a><span class="lineno"> 7871</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;rtp-&gt;rtp_source_learn.proposed_address, &amp;addr);</div><div class="line"><a name="l07872"></a><span class="lineno"> 7872</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad68124a712f2eb4ae298e08743ae2740">rtp_learning_seq_init</a>(&amp;rtp-&gt;rtp_source_learn, seqno);</div><div class="line"><a name="l07873"></a><span class="lineno"> 7873</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p) RTP %p -- Received packet from %s, dropping due to strict RTP protection. Qualifying new stream.\n&quot;</span>,</div><div class="line"><a name="l07874"></a><span class="lineno"> 7874</span>&#160;               instance, rtp, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addr));</div><div class="line"><a name="l07875"></a><span class="lineno"> 7875</span>&#160;         }</div><div class="line"><a name="l07876"></a><span class="lineno"> 7876</span>&#160;         <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07877"></a><span class="lineno"> 7877</span>&#160;      }</div><div class="line"><a name="l07878"></a><span class="lineno"> 7878</span>&#160;      <span class="comment">/* Fall through */</span></div><div class="line"><a name="l07879"></a><span class="lineno"> 7879</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4baff585ea9a2059021ce5a5f4a7ed8895f">STRICT_RTP_CLOSED</a>:</div><div class="line"><a name="l07880"></a><span class="lineno"> 7880</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l07881"></a><span class="lineno"> 7881</span>&#160;<span class="comment">       * We should not allow a stream address change if the SSRC matches</span></div><div class="line"><a name="l07882"></a><span class="lineno"> 7882</span>&#160;<span class="comment">       * once strictrtp learning is closed.  Any kind of address change</span></div><div class="line"><a name="l07883"></a><span class="lineno"> 7883</span>&#160;<span class="comment">       * like this should have happened while we were in the learning</span></div><div class="line"><a name="l07884"></a><span class="lineno"> 7884</span>&#160;<span class="comment">       * state.  We do not want to allow the possibility of an attacker</span></div><div class="line"><a name="l07885"></a><span class="lineno"> 7885</span>&#160;<span class="comment">       * interfering with the RTP stream after the learning period.</span></div><div class="line"><a name="l07886"></a><span class="lineno"> 7886</span>&#160;<span class="comment">       * An attacker could manage to get an RTCP packet redirected to</span></div><div class="line"><a name="l07887"></a><span class="lineno"> 7887</span>&#160;<span class="comment">       * them which can contain the SSRC value.</span></div><div class="line"><a name="l07888"></a><span class="lineno"> 7888</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l07889"></a><span class="lineno"> 7889</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(&amp;rtp-&gt;strict_rtp_address, &amp;addr)) {</div><div class="line"><a name="l07890"></a><span class="lineno"> 7890</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l07891"></a><span class="lineno"> 7891</span>&#160;      }</div><div class="line"><a name="l07892"></a><span class="lineno"> 7892</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p) RTP %p -- Received packet from %s, dropping due to strict RTP protection.\n&quot;</span>,</div><div class="line"><a name="l07893"></a><span class="lineno"> 7893</span>&#160;         instance, rtp, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addr));</div><div class="line"><a name="l07894"></a><span class="lineno"> 7894</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l07895"></a><span class="lineno"> 7895</span>&#160;   {</div><div class="line"><a name="l07896"></a><span class="lineno"> 7896</span>&#160;      <span class="keyword">static</span> <span class="keywordtype">int</span> strict_rtp_test_event = 1;</div><div class="line"><a name="l07897"></a><span class="lineno"> 7897</span>&#160;      <span class="keywordflow">if</span> (strict_rtp_test_event) {</div><div class="line"><a name="l07898"></a><span class="lineno"> 7898</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;STRICT_RTP_CLOSED&quot;</span>, <span class="stringliteral">&quot;Source: %s&quot;</span>,</div><div class="line"><a name="l07899"></a><span class="lineno"> 7899</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addr));</div><div class="line"><a name="l07900"></a><span class="lineno"> 7900</span>&#160;         strict_rtp_test_event = 0; <span class="comment">/* Only run this event once to prevent possible spam */</span></div><div class="line"><a name="l07901"></a><span class="lineno"> 7901</span>&#160;      }</div><div class="line"><a name="l07902"></a><span class="lineno"> 7902</span>&#160;   }</div><div class="line"><a name="l07903"></a><span class="lineno"> 7903</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l07904"></a><span class="lineno"> 7904</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07905"></a><span class="lineno"> 7905</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1">STRICT_RTP_OPEN</a>:</div><div class="line"><a name="l07906"></a><span class="lineno"> 7906</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07907"></a><span class="lineno"> 7907</span>&#160;   }</div><div class="line"><a name="l07908"></a><span class="lineno"> 7908</span>&#160;</div><div class="line"><a name="l07909"></a><span class="lineno"> 7909</span>&#160;   <span class="comment">/* If symmetric RTP is enabled see if the remote side is not what we expected and change where we are sending audio */</span></div><div class="line"><a name="l07910"></a><span class="lineno"> 7910</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a>)) {</div><div class="line"><a name="l07911"></a><span class="lineno"> 7911</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(&amp;remote_address, &amp;addr)) {</div><div class="line"><a name="l07912"></a><span class="lineno"> 7912</span>&#160;         <span class="comment">/* do not update the originally given address, but only the remote */</span></div><div class="line"><a name="l07913"></a><span class="lineno"> 7913</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#abf8f7e808be60b78811d0435b6af4d42">ast_rtp_instance_set_incoming_source_address</a>(instance, &amp;addr);</div><div class="line"><a name="l07914"></a><span class="lineno"> 7914</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;remote_address, &amp;addr);</div><div class="line"><a name="l07915"></a><span class="lineno"> 7915</span>&#160;         <span class="keywordflow">if</span> (rtp-&gt;rtcp &amp;&amp; rtp-&gt;rtcp-&gt;type == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38">AST_RTP_INSTANCE_RTCP_STANDARD</a>) {</div><div class="line"><a name="l07916"></a><span class="lineno"> 7916</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;rtp-&gt;rtcp-&gt;them, &amp;addr);</div><div class="line"><a name="l07917"></a><span class="lineno"> 7917</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;rtp-&gt;rtcp-&gt;them, <a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(&amp;addr) + 1);</div><div class="line"><a name="l07918"></a><span class="lineno"> 7918</span>&#160;         }</div><div class="line"><a name="l07919"></a><span class="lineno"> 7919</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(rtp, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab67e21f67a96dd6a9e1b0450ecddecf3">FLAG_NAT_ACTIVE</a>);</div><div class="line"><a name="l07920"></a><span class="lineno"> 7920</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a>)</div><div class="line"><a name="l07921"></a><span class="lineno"> 7921</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(0, <span class="stringliteral">&quot;(%p) RTP NAT: Got audio from other end. Now sending to address %s\n&quot;</span>,</div><div class="line"><a name="l07922"></a><span class="lineno"> 7922</span>&#160;               instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address));</div><div class="line"><a name="l07923"></a><span class="lineno"> 7923</span>&#160;      }</div><div class="line"><a name="l07924"></a><span class="lineno"> 7924</span>&#160;   }</div><div class="line"><a name="l07925"></a><span class="lineno"> 7925</span>&#160;</div><div class="line"><a name="l07926"></a><span class="lineno"> 7926</span>&#160;   <span class="comment">/* Pull out the various other fields we will need */</span></div><div class="line"><a name="l07927"></a><span class="lineno"> 7927</span>&#160;   payloadtype = (seqno &amp; 0x7f0000) &gt;&gt; 16;</div><div class="line"><a name="l07928"></a><span class="lineno"> 7928</span>&#160;   seqno &amp;= 0xffff;</div><div class="line"><a name="l07929"></a><span class="lineno"> 7929</span>&#160;   timestamp = ntohl(rtpheader[1]);</div><div class="line"><a name="l07930"></a><span class="lineno"> 7930</span>&#160;</div><div class="line"><a name="l07931"></a><span class="lineno"> 7931</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l07932"></a><span class="lineno"> 7932</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a43ed5507fb9a133cd9c31d302f6492a2">should_drop_packets</a>(&amp;addr)) {</div><div class="line"><a name="l07933"></a><span class="lineno"> 7933</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(0, <span class="stringliteral">&quot;(%p) RTP: drop received packet from %s (type %-2.2d, seq %-6.6u, ts %-6.6u, len %-6.6d)\n&quot;</span>,</div><div class="line"><a name="l07934"></a><span class="lineno"> 7934</span>&#160;         instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addr), payloadtype, seqno, timestamp, res - hdrlen);</div><div class="line"><a name="l07935"></a><span class="lineno"> 7935</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l07936"></a><span class="lineno"> 7936</span>&#160;   }</div><div class="line"><a name="l07937"></a><span class="lineno"> 7937</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l07938"></a><span class="lineno"> 7938</span>&#160;</div><div class="line"><a name="l07939"></a><span class="lineno"> 7939</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a>(&amp;addr)) {</div><div class="line"><a name="l07940"></a><span class="lineno"> 7940</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Got  RTP packet from    %s (type %-2.2d, seq %-6.6u, ts %-6.6u, len %-6.6d)\n&quot;</span>,</div><div class="line"><a name="l07941"></a><span class="lineno"> 7941</span>&#160;             <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;addr),</div><div class="line"><a name="l07942"></a><span class="lineno"> 7942</span>&#160;             payloadtype, seqno, timestamp, res - hdrlen);</div><div class="line"><a name="l07943"></a><span class="lineno"> 7943</span>&#160;   }</div><div class="line"><a name="l07944"></a><span class="lineno"> 7944</span>&#160;</div><div class="line"><a name="l07945"></a><span class="lineno"> 7945</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>);</div><div class="line"><a name="l07946"></a><span class="lineno"> 7946</span>&#160;</div><div class="line"><a name="l07947"></a><span class="lineno"> 7947</span>&#160;   bundled = (child || <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;rtp-&gt;ssrc_mapping)) ? 1 : 0;</div><div class="line"><a name="l07948"></a><span class="lineno"> 7948</span>&#160;</div><div class="line"><a name="l07949"></a><span class="lineno"> 7949</span>&#160;   prev_seqno = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a184e1597cfcf7b28d1cf5d4857892a91">lastrxseqno</a>;</div><div class="line"><a name="l07950"></a><span class="lineno"> 7950</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a184e1597cfcf7b28d1cf5d4857892a91">lastrxseqno</a> = seqno;</div><div class="line"><a name="l07951"></a><span class="lineno"> 7951</span>&#160;</div><div class="line"><a name="l07952"></a><span class="lineno"> 7952</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;recv_buffer) {</div><div class="line"><a name="l07953"></a><span class="lineno"> 7953</span>&#160;      <span class="comment">/* If there is no receive buffer then we can pass back the frame directly */</span></div><div class="line"><a name="l07954"></a><span class="lineno"> 7954</span>&#160;      frame = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4db6e4d59c2243c731f2155981d48d56">ast_rtp_interpret</a>(instance, srtp, &amp;addr, read_area, res, prev_seqno, bundled);</div><div class="line"><a name="l07955"></a><span class="lineno"> 7955</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, frame, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l07956"></a><span class="lineno"> 7956</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>);</div><div class="line"><a name="l07957"></a><span class="lineno"> 7957</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> == -1 || seqno == rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a>) {</div><div class="line"><a name="l07958"></a><span class="lineno"> 7958</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> = seqno + 1;</div><div class="line"><a name="l07959"></a><span class="lineno"> 7959</span>&#160;</div><div class="line"><a name="l07960"></a><span class="lineno"> 7960</span>&#160;      <span class="comment">/* We&#39;ve cycled over, so go back to 0 */</span></div><div class="line"><a name="l07961"></a><span class="lineno"> 7961</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae55dc6ec08efa57214027cb16f7e83c1">SEQNO_CYCLE_OVER</a>) {</div><div class="line"><a name="l07962"></a><span class="lineno"> 7962</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> = 0;</div><div class="line"><a name="l07963"></a><span class="lineno"> 7963</span>&#160;      }</div><div class="line"><a name="l07964"></a><span class="lineno"> 7964</span>&#160;</div><div class="line"><a name="l07965"></a><span class="lineno"> 7965</span>&#160;      <span class="comment">/* If there are no buffered packets that will be placed after this frame then we can</span></div><div class="line"><a name="l07966"></a><span class="lineno"> 7966</span>&#160;<span class="comment">       * return it directly without duplicating it.</span></div><div class="line"><a name="l07967"></a><span class="lineno"> 7967</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l07968"></a><span class="lineno"> 7968</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d82/data__buffer_8h.html#a56472084280daafd2d67d69e4c2f7248">ast_data_buffer_count</a>(rtp-&gt;recv_buffer)) {</div><div class="line"><a name="l07969"></a><span class="lineno"> 7969</span>&#160;         frame = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4db6e4d59c2243c731f2155981d48d56">ast_rtp_interpret</a>(instance, srtp, &amp;addr, read_area, res, prev_seqno, bundled);</div><div class="line"><a name="l07970"></a><span class="lineno"> 7970</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, frame, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l07971"></a><span class="lineno"> 7971</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>);</div><div class="line"><a name="l07972"></a><span class="lineno"> 7972</span>&#160;      }</div><div class="line"><a name="l07973"></a><span class="lineno"> 7973</span>&#160;</div><div class="line"><a name="l07974"></a><span class="lineno"> 7974</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d68/vector_8h.html#a492e49277a4d2b403ec357440d933254">AST_VECTOR_REMOVE_CMP_ORDERED</a>(&amp;rtp-&gt;missing_seqno, seqno, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9c0765c9365f9caf28b8f072aac73409">find_by_value</a>,</div><div class="line"><a name="l07975"></a><span class="lineno"> 7975</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a>)) {</div><div class="line"><a name="l07976"></a><span class="lineno"> 7976</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(2, <span class="stringliteral">&quot;(%p) RTP Packet with sequence number &#39;%d&#39; on instance is no longer missing\n&quot;</span>,</div><div class="line"><a name="l07977"></a><span class="lineno"> 7977</span>&#160;            instance, seqno);</div><div class="line"><a name="l07978"></a><span class="lineno"> 7978</span>&#160;      }</div><div class="line"><a name="l07979"></a><span class="lineno"> 7979</span>&#160;</div><div class="line"><a name="l07980"></a><span class="lineno"> 7980</span>&#160;      <span class="comment">/* If we don&#39;t have the next packet after this we can directly return the frame, as there is no</span></div><div class="line"><a name="l07981"></a><span class="lineno"> 7981</span>&#160;<span class="comment">       * chance it will be overwritten.</span></div><div class="line"><a name="l07982"></a><span class="lineno"> 7982</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l07983"></a><span class="lineno"> 7983</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d82/data__buffer_8h.html#a91218206f7c98167c6fc48d26639cf0e">ast_data_buffer_get</a>(rtp-&gt;recv_buffer, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a>)) {</div><div class="line"><a name="l07984"></a><span class="lineno"> 7984</span>&#160;         frame = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4db6e4d59c2243c731f2155981d48d56">ast_rtp_interpret</a>(instance, srtp, &amp;addr, read_area, res, prev_seqno, bundled);</div><div class="line"><a name="l07985"></a><span class="lineno"> 7985</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, frame, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l07986"></a><span class="lineno"> 7986</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>);</div><div class="line"><a name="l07987"></a><span class="lineno"> 7987</span>&#160;      }</div><div class="line"><a name="l07988"></a><span class="lineno"> 7988</span>&#160;</div><div class="line"><a name="l07989"></a><span class="lineno"> 7989</span>&#160;      <span class="comment">/* Otherwise we need to dupe the frame so that the potential processing of frames placed after</span></div><div class="line"><a name="l07990"></a><span class="lineno"> 7990</span>&#160;<span class="comment">       * it do not overwrite the data. You may be thinking that we could just add the current packet</span></div><div class="line"><a name="l07991"></a><span class="lineno"> 7991</span>&#160;<span class="comment">       * to the head of the frames list and avoid having to duplicate it but this would result in out</span></div><div class="line"><a name="l07992"></a><span class="lineno"> 7992</span>&#160;<span class="comment">       * of order packet processing by libsrtp which we are trying to avoid.</span></div><div class="line"><a name="l07993"></a><span class="lineno"> 7993</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l07994"></a><span class="lineno"> 7994</span>&#160;      frame = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4db6e4d59c2243c731f2155981d48d56">ast_rtp_interpret</a>(instance, srtp, &amp;addr, read_area, res, prev_seqno, bundled));</div><div class="line"><a name="l07995"></a><span class="lineno"> 7995</span>&#160;      <span class="keywordflow">if</span> (frame) {</div><div class="line"><a name="l07996"></a><span class="lineno"> 7996</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, frame, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l07997"></a><span class="lineno"> 7997</span>&#160;         prev_seqno = seqno;</div><div class="line"><a name="l07998"></a><span class="lineno"> 7998</span>&#160;      }</div><div class="line"><a name="l07999"></a><span class="lineno"> 7999</span>&#160;</div><div class="line"><a name="l08000"></a><span class="lineno"> 8000</span>&#160;      <span class="comment">/* Add any additional packets that we have buffered and that are available */</span></div><div class="line"><a name="l08001"></a><span class="lineno"> 8001</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../d7/d82/data__buffer_8h.html#a56472084280daafd2d67d69e4c2f7248">ast_data_buffer_count</a>(rtp-&gt;recv_buffer)) {</div><div class="line"><a name="l08002"></a><span class="lineno"> 8002</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html">ast_rtp_rtcp_nack_payload</a> *payload;</div><div class="line"><a name="l08003"></a><span class="lineno"> 8003</span>&#160;</div><div class="line"><a name="l08004"></a><span class="lineno"> 8004</span>&#160;         payload = (<span class="keyword">struct </span><a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html">ast_rtp_rtcp_nack_payload</a> *)<a class="code" href="../../d7/d82/data__buffer_8h.html#ad15a633fb9ce31edf0ab9ad85031c198">ast_data_buffer_remove</a>(rtp-&gt;recv_buffer, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a>);</div><div class="line"><a name="l08005"></a><span class="lineno"> 8005</span>&#160;         <span class="keywordflow">if</span> (!payload) {</div><div class="line"><a name="l08006"></a><span class="lineno"> 8006</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l08007"></a><span class="lineno"> 8007</span>&#160;         }</div><div class="line"><a name="l08008"></a><span class="lineno"> 8008</span>&#160;</div><div class="line"><a name="l08009"></a><span class="lineno"> 8009</span>&#160;         frame = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4db6e4d59c2243c731f2155981d48d56">ast_rtp_interpret</a>(instance, srtp, &amp;addr, payload-&gt;<a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a69e3972abe4e2ef0a921d73212c28cba">buf</a>, payload-&gt;<a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a854352f53b148adc24983a58a1866d66">size</a>, prev_seqno, bundled));</div><div class="line"><a name="l08010"></a><span class="lineno"> 8010</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(payload);</div><div class="line"><a name="l08011"></a><span class="lineno"> 8011</span>&#160;</div><div class="line"><a name="l08012"></a><span class="lineno"> 8012</span>&#160;         <span class="keywordflow">if</span> (!frame) {</div><div class="line"><a name="l08013"></a><span class="lineno"> 8013</span>&#160;            <span class="comment">/* If this packet can&#39;t be interpeted due to being out of memory we return what we have and assume</span></div><div class="line"><a name="l08014"></a><span class="lineno"> 8014</span>&#160;<span class="comment">             * that we will determine it is a missing packet later and NACK for it.</span></div><div class="line"><a name="l08015"></a><span class="lineno"> 8015</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l08016"></a><span class="lineno"> 8016</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>);</div><div class="line"><a name="l08017"></a><span class="lineno"> 8017</span>&#160;         }</div><div class="line"><a name="l08018"></a><span class="lineno"> 8018</span>&#160;</div><div class="line"><a name="l08019"></a><span class="lineno"> 8019</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(2, <span class="stringliteral">&quot;(%p) RTP pulled buffered packet with sequence number &#39;%d&#39; to additionally return\n&quot;</span>,</div><div class="line"><a name="l08020"></a><span class="lineno"> 8020</span>&#160;            instance, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a>);</div><div class="line"><a name="l08021"></a><span class="lineno"> 8021</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, frame, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l08022"></a><span class="lineno"> 8022</span>&#160;         prev_seqno = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a>;</div><div class="line"><a name="l08023"></a><span class="lineno"> 8023</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a>++;</div><div class="line"><a name="l08024"></a><span class="lineno"> 8024</span>&#160;         <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae55dc6ec08efa57214027cb16f7e83c1">SEQNO_CYCLE_OVER</a>) {</div><div class="line"><a name="l08025"></a><span class="lineno"> 8025</span>&#160;            rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> = 0;</div><div class="line"><a name="l08026"></a><span class="lineno"> 8026</span>&#160;         }</div><div class="line"><a name="l08027"></a><span class="lineno"> 8027</span>&#160;      }</div><div class="line"><a name="l08028"></a><span class="lineno"> 8028</span>&#160;</div><div class="line"><a name="l08029"></a><span class="lineno"> 8029</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>);</div><div class="line"><a name="l08030"></a><span class="lineno"> 8030</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((((seqno - rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a>) &gt; 100) &amp;&amp; timestamp &gt; rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a19258cc54fe0aafdf3bbe1f4fcc29218">lastividtimestamp</a>) ||</div><div class="line"><a name="l08031"></a><span class="lineno"> 8031</span>&#160;      <a class="code" href="../../d7/d82/data__buffer_8h.html#a56472084280daafd2d67d69e4c2f7248">ast_data_buffer_count</a>(rtp-&gt;recv_buffer) == <a class="code" href="../../d7/d82/data__buffer_8h.html#a9e2eefe1a192ac86ab9ca3f588bf9b7a">ast_data_buffer_max</a>(rtp-&gt;recv_buffer)) {</div><div class="line"><a name="l08032"></a><span class="lineno"> 8032</span>&#160;      <span class="keywordtype">int</span> inserted = 0;</div><div class="line"><a name="l08033"></a><span class="lineno"> 8033</span>&#160;</div><div class="line"><a name="l08034"></a><span class="lineno"> 8034</span>&#160;      <span class="comment">/* We have a large number of outstanding buffered packets or we&#39;ve jumped far ahead in time.</span></div><div class="line"><a name="l08035"></a><span class="lineno"> 8035</span>&#160;<span class="comment">       * To compensate we dump what we have in the buffer and place the current packet in a logical</span></div><div class="line"><a name="l08036"></a><span class="lineno"> 8036</span>&#160;<span class="comment">       * spot. In the case of video we also require a full frame to give the decoding side a fighting</span></div><div class="line"><a name="l08037"></a><span class="lineno"> 8037</span>&#160;<span class="comment">       * chance.</span></div><div class="line"><a name="l08038"></a><span class="lineno"> 8038</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l08039"></a><span class="lineno"> 8039</span>&#160;</div><div class="line"><a name="l08040"></a><span class="lineno"> 8040</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;rtp_source_learn.stream_type == <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>) {</div><div class="line"><a name="l08041"></a><span class="lineno"> 8041</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(2, <span class="stringliteral">&quot;(%p) RTP source has wild gap or packet loss, sending FIR\n&quot;</span>,</div><div class="line"><a name="l08042"></a><span class="lineno"> 8042</span>&#160;            instance);</div><div class="line"><a name="l08043"></a><span class="lineno"> 8043</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af468e412cbb41cc4b890cf12aebf02fe">rtp_write_rtcp_fir</a>(instance, rtp, &amp;remote_address);</div><div class="line"><a name="l08044"></a><span class="lineno"> 8044</span>&#160;      }</div><div class="line"><a name="l08045"></a><span class="lineno"> 8045</span>&#160;</div><div class="line"><a name="l08046"></a><span class="lineno"> 8046</span>&#160;      <span class="comment">/* This works by going through the progression of the sequence number retrieving buffered packets</span></div><div class="line"><a name="l08047"></a><span class="lineno"> 8047</span>&#160;<span class="comment">       * or inserting the current received packet until we&#39;ve run out of packets. This ensures that the</span></div><div class="line"><a name="l08048"></a><span class="lineno"> 8048</span>&#160;<span class="comment">       * packets are in the correct sequence number order.</span></div><div class="line"><a name="l08049"></a><span class="lineno"> 8049</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l08050"></a><span class="lineno"> 8050</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../d7/d82/data__buffer_8h.html#a56472084280daafd2d67d69e4c2f7248">ast_data_buffer_count</a>(rtp-&gt;recv_buffer)) {</div><div class="line"><a name="l08051"></a><span class="lineno"> 8051</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html">ast_rtp_rtcp_nack_payload</a> *payload;</div><div class="line"><a name="l08052"></a><span class="lineno"> 8052</span>&#160;</div><div class="line"><a name="l08053"></a><span class="lineno"> 8053</span>&#160;         <span class="comment">/* If the packet we received is the one we are expecting at this point then add it in */</span></div><div class="line"><a name="l08054"></a><span class="lineno"> 8054</span>&#160;         <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> == seqno) {</div><div class="line"><a name="l08055"></a><span class="lineno"> 8055</span>&#160;            frame = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4db6e4d59c2243c731f2155981d48d56">ast_rtp_interpret</a>(instance, srtp, &amp;addr, read_area, res, prev_seqno, bundled));</div><div class="line"><a name="l08056"></a><span class="lineno"> 8056</span>&#160;            <span class="keywordflow">if</span> (frame) {</div><div class="line"><a name="l08057"></a><span class="lineno"> 8057</span>&#160;               <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, frame, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l08058"></a><span class="lineno"> 8058</span>&#160;               prev_seqno = seqno;</div><div class="line"><a name="l08059"></a><span class="lineno"> 8059</span>&#160;               <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(2, <span class="stringliteral">&quot;(%p) RTP inserted just received packet with sequence number &#39;%d&#39; in correct order\n&quot;</span>,</div><div class="line"><a name="l08060"></a><span class="lineno"> 8060</span>&#160;                  instance, seqno);</div><div class="line"><a name="l08061"></a><span class="lineno"> 8061</span>&#160;            }</div><div class="line"><a name="l08062"></a><span class="lineno"> 8062</span>&#160;            <span class="comment">/* It is possible due to packet retransmission for this packet to also exist in the receive</span></div><div class="line"><a name="l08063"></a><span class="lineno"> 8063</span>&#160;<span class="comment">             * buffer so we explicitly remove it in case this occurs, otherwise the receive buffer will</span></div><div class="line"><a name="l08064"></a><span class="lineno"> 8064</span>&#160;<span class="comment">             * never be empty.</span></div><div class="line"><a name="l08065"></a><span class="lineno"> 8065</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l08066"></a><span class="lineno"> 8066</span>&#160;            payload = (<span class="keyword">struct </span><a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html">ast_rtp_rtcp_nack_payload</a> *)<a class="code" href="../../d7/d82/data__buffer_8h.html#ad15a633fb9ce31edf0ab9ad85031c198">ast_data_buffer_remove</a>(rtp-&gt;recv_buffer, seqno);</div><div class="line"><a name="l08067"></a><span class="lineno"> 8067</span>&#160;            <span class="keywordflow">if</span> (payload) {</div><div class="line"><a name="l08068"></a><span class="lineno"> 8068</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(payload);</div><div class="line"><a name="l08069"></a><span class="lineno"> 8069</span>&#160;            }</div><div class="line"><a name="l08070"></a><span class="lineno"> 8070</span>&#160;            rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a>++;</div><div class="line"><a name="l08071"></a><span class="lineno"> 8071</span>&#160;            <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae55dc6ec08efa57214027cb16f7e83c1">SEQNO_CYCLE_OVER</a>) {</div><div class="line"><a name="l08072"></a><span class="lineno"> 8072</span>&#160;               rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> = 0;</div><div class="line"><a name="l08073"></a><span class="lineno"> 8073</span>&#160;            }</div><div class="line"><a name="l08074"></a><span class="lineno"> 8074</span>&#160;            inserted = 1;</div><div class="line"><a name="l08075"></a><span class="lineno"> 8075</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l08076"></a><span class="lineno"> 8076</span>&#160;         }</div><div class="line"><a name="l08077"></a><span class="lineno"> 8077</span>&#160;</div><div class="line"><a name="l08078"></a><span class="lineno"> 8078</span>&#160;         payload = (<span class="keyword">struct </span><a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html">ast_rtp_rtcp_nack_payload</a> *)<a class="code" href="../../d7/d82/data__buffer_8h.html#ad15a633fb9ce31edf0ab9ad85031c198">ast_data_buffer_remove</a>(rtp-&gt;recv_buffer, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a>);</div><div class="line"><a name="l08079"></a><span class="lineno"> 8079</span>&#160;         <span class="keywordflow">if</span> (payload) {</div><div class="line"><a name="l08080"></a><span class="lineno"> 8080</span>&#160;            frame = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4db6e4d59c2243c731f2155981d48d56">ast_rtp_interpret</a>(instance, srtp, &amp;addr, payload-&gt;<a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a69e3972abe4e2ef0a921d73212c28cba">buf</a>, payload-&gt;<a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a854352f53b148adc24983a58a1866d66">size</a>, prev_seqno, bundled));</div><div class="line"><a name="l08081"></a><span class="lineno"> 8081</span>&#160;            <span class="keywordflow">if</span> (frame) {</div><div class="line"><a name="l08082"></a><span class="lineno"> 8082</span>&#160;               <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, frame, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l08083"></a><span class="lineno"> 8083</span>&#160;               prev_seqno = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a>;</div><div class="line"><a name="l08084"></a><span class="lineno"> 8084</span>&#160;               <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(2, <span class="stringliteral">&quot;(%p) RTP emptying queue and returning packet with sequence number &#39;%d&#39;\n&quot;</span>,</div><div class="line"><a name="l08085"></a><span class="lineno"> 8085</span>&#160;                  instance, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a>);</div><div class="line"><a name="l08086"></a><span class="lineno"> 8086</span>&#160;            }</div><div class="line"><a name="l08087"></a><span class="lineno"> 8087</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(payload);</div><div class="line"><a name="l08088"></a><span class="lineno"> 8088</span>&#160;         }</div><div class="line"><a name="l08089"></a><span class="lineno"> 8089</span>&#160;</div><div class="line"><a name="l08090"></a><span class="lineno"> 8090</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a>++;</div><div class="line"><a name="l08091"></a><span class="lineno"> 8091</span>&#160;         <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae55dc6ec08efa57214027cb16f7e83c1">SEQNO_CYCLE_OVER</a>) {</div><div class="line"><a name="l08092"></a><span class="lineno"> 8092</span>&#160;            rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> = 0;</div><div class="line"><a name="l08093"></a><span class="lineno"> 8093</span>&#160;         }</div><div class="line"><a name="l08094"></a><span class="lineno"> 8094</span>&#160;      }</div><div class="line"><a name="l08095"></a><span class="lineno"> 8095</span>&#160;</div><div class="line"><a name="l08096"></a><span class="lineno"> 8096</span>&#160;      <span class="keywordflow">if</span> (!inserted) {</div><div class="line"><a name="l08097"></a><span class="lineno"> 8097</span>&#160;         <span class="comment">/* This current packet goes after them, and we assume that packets going forward will follow</span></div><div class="line"><a name="l08098"></a><span class="lineno"> 8098</span>&#160;<span class="comment">          * that new sequence number increment. It is okay for this to not be duplicated as it is guaranteed</span></div><div class="line"><a name="l08099"></a><span class="lineno"> 8099</span>&#160;<span class="comment">          * to be the last packet processed right now and it is also guaranteed that it will always return</span></div><div class="line"><a name="l08100"></a><span class="lineno"> 8100</span>&#160;<span class="comment">          * non-NULL.</span></div><div class="line"><a name="l08101"></a><span class="lineno"> 8101</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l08102"></a><span class="lineno"> 8102</span>&#160;         frame = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4db6e4d59c2243c731f2155981d48d56">ast_rtp_interpret</a>(instance, srtp, &amp;addr, read_area, res, prev_seqno, bundled);</div><div class="line"><a name="l08103"></a><span class="lineno"> 8103</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, frame, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l08104"></a><span class="lineno"> 8104</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> = seqno + 1;</div><div class="line"><a name="l08105"></a><span class="lineno"> 8105</span>&#160;         <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae55dc6ec08efa57214027cb16f7e83c1">SEQNO_CYCLE_OVER</a>) {</div><div class="line"><a name="l08106"></a><span class="lineno"> 8106</span>&#160;            rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> = 0;</div><div class="line"><a name="l08107"></a><span class="lineno"> 8107</span>&#160;         }</div><div class="line"><a name="l08108"></a><span class="lineno"> 8108</span>&#160;</div><div class="line"><a name="l08109"></a><span class="lineno"> 8109</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(2, <span class="stringliteral">&quot;(%p) RTP adding just received packet with sequence number &#39;%d&#39; to end of dumped queue\n&quot;</span>,</div><div class="line"><a name="l08110"></a><span class="lineno"> 8110</span>&#160;            instance, seqno);</div><div class="line"><a name="l08111"></a><span class="lineno"> 8111</span>&#160;      }</div><div class="line"><a name="l08112"></a><span class="lineno"> 8112</span>&#160;</div><div class="line"><a name="l08113"></a><span class="lineno"> 8113</span>&#160;      <span class="comment">/* When we flush increase our chance for next time by growing the receive buffer when possible</span></div><div class="line"><a name="l08114"></a><span class="lineno"> 8114</span>&#160;<span class="comment">       * by how many packets we missed, to give ourselves a bit more breathing room.</span></div><div class="line"><a name="l08115"></a><span class="lineno"> 8115</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l08116"></a><span class="lineno"> 8116</span>&#160;      <a class="code" href="../../d7/d82/data__buffer_8h.html#a6b088aaa6c2ae2366f12db54e6c76e5d">ast_data_buffer_resize</a>(rtp-&gt;recv_buffer, <a class="code" href="../../d5/d60/utils_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a89e0d6d0798eee9bc6c6c858fe3401fe">MAXIMUM_RTP_RECV_BUFFER_SIZE</a>,</div><div class="line"><a name="l08117"></a><span class="lineno"> 8117</span>&#160;         <a class="code" href="../../d7/d82/data__buffer_8h.html#a9e2eefe1a192ac86ab9ca3f588bf9b7a">ast_data_buffer_max</a>(rtp-&gt;recv_buffer) + <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;rtp-&gt;missing_seqno)));</div><div class="line"><a name="l08118"></a><span class="lineno"> 8118</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(2, <span class="stringliteral">&quot;(%p) RTP receive buffer is now at maximum of %zu\n&quot;</span>, instance, <a class="code" href="../../d7/d82/data__buffer_8h.html#a9e2eefe1a192ac86ab9ca3f588bf9b7a">ast_data_buffer_max</a>(rtp-&gt;recv_buffer));</div><div class="line"><a name="l08119"></a><span class="lineno"> 8119</span>&#160;</div><div class="line"><a name="l08120"></a><span class="lineno"> 8120</span>&#160;      <span class="comment">/* As there is such a large gap we don&#39;t want to flood the order side with missing packets, so we</span></div><div class="line"><a name="l08121"></a><span class="lineno"> 8121</span>&#160;<span class="comment">       * give up and start anew.</span></div><div class="line"><a name="l08122"></a><span class="lineno"> 8122</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l08123"></a><span class="lineno"> 8123</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a0e59aa540254f87575cb1d28821bbd1f">AST_VECTOR_RESET</a>(&amp;rtp-&gt;missing_seqno, <a class="code" href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a>);</div><div class="line"><a name="l08124"></a><span class="lineno"> 8124</span>&#160;</div><div class="line"><a name="l08125"></a><span class="lineno"> 8125</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>);</div><div class="line"><a name="l08126"></a><span class="lineno"> 8126</span>&#160;   }</div><div class="line"><a name="l08127"></a><span class="lineno"> 8127</span>&#160;</div><div class="line"><a name="l08128"></a><span class="lineno"> 8128</span>&#160;   <span class="comment">/* We&#39;re finished with the frames list */</span></div><div class="line"><a name="l08129"></a><span class="lineno"> 8129</span>&#160;   <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a27385fd97f84847f7aa3b7bfcb861361">ast_frame_free</a>(<a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>), 0);</div><div class="line"><a name="l08130"></a><span class="lineno"> 8130</span>&#160;</div><div class="line"><a name="l08131"></a><span class="lineno"> 8131</span>&#160;   <span class="comment">/* Determine if the received packet is from the last OLD_PACKET_COUNT (1000 by default) packets or not.</span></div><div class="line"><a name="l08132"></a><span class="lineno"> 8132</span>&#160;<span class="comment">    * For the case where the received sequence number exceeds that of the expected sequence number we calculate</span></div><div class="line"><a name="l08133"></a><span class="lineno"> 8133</span>&#160;<span class="comment">    * the past sequence number that would be 1000 sequence numbers ago. If the received sequence number</span></div><div class="line"><a name="l08134"></a><span class="lineno"> 8134</span>&#160;<span class="comment">    * exceeds or meets that then it is within OLD_PACKET_COUNT packets ago. For example if the expected</span></div><div class="line"><a name="l08135"></a><span class="lineno"> 8135</span>&#160;<span class="comment">    * sequence number is 100 and we receive 65530, then it would be considered old. This is because</span></div><div class="line"><a name="l08136"></a><span class="lineno"> 8136</span>&#160;<span class="comment">    * 65535 - 1000 + 100 = 64635 which gives us the sequence number at which we would consider the packets</span></div><div class="line"><a name="l08137"></a><span class="lineno"> 8137</span>&#160;<span class="comment">    * old. Since 65530 is above that, it would be considered old.</span></div><div class="line"><a name="l08138"></a><span class="lineno"> 8138</span>&#160;<span class="comment">    * For the case where the received sequence number is less than the expected sequence number we can do</span></div><div class="line"><a name="l08139"></a><span class="lineno"> 8139</span>&#160;<span class="comment">    * a simple subtraction to see if it is 1000 packets ago or not.</span></div><div class="line"><a name="l08140"></a><span class="lineno"> 8140</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l08141"></a><span class="lineno"> 8141</span>&#160;   <span class="keywordflow">if</span> ((seqno &lt; rtp-&gt;expectedrxseqno &amp;&amp; ((rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> - seqno) &lt;= <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a038f2cbb7068c08f4be16b20f6ffdb39">OLD_PACKET_COUNT</a>)) ||</div><div class="line"><a name="l08142"></a><span class="lineno"> 8142</span>&#160;      (seqno &gt; rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a> &amp;&amp; (seqno &gt;= (65535 - <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a038f2cbb7068c08f4be16b20f6ffdb39">OLD_PACKET_COUNT</a> + rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a>)))) {</div><div class="line"><a name="l08143"></a><span class="lineno"> 8143</span>&#160;      <span class="comment">/* If this is a packet from the past then we have received a duplicate packet, so just drop it */</span></div><div class="line"><a name="l08144"></a><span class="lineno"> 8144</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(2, <span class="stringliteral">&quot;(%p) RTP received an old packet with sequence number &#39;%d&#39;, dropping it\n&quot;</span>,</div><div class="line"><a name="l08145"></a><span class="lineno"> 8145</span>&#160;         instance, seqno);</div><div class="line"><a name="l08146"></a><span class="lineno"> 8146</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l08147"></a><span class="lineno"> 8147</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d82/data__buffer_8h.html#a91218206f7c98167c6fc48d26639cf0e">ast_data_buffer_get</a>(rtp-&gt;recv_buffer, seqno)) {</div><div class="line"><a name="l08148"></a><span class="lineno"> 8148</span>&#160;      <span class="comment">/* If this is a packet we already have buffered then it is a duplicate, so just drop it */</span></div><div class="line"><a name="l08149"></a><span class="lineno"> 8149</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(2, <span class="stringliteral">&quot;(%p) RTP received a duplicate transmission of packet with sequence number &#39;%d&#39;, dropping it\n&quot;</span>,</div><div class="line"><a name="l08150"></a><span class="lineno"> 8150</span>&#160;         instance, seqno);</div><div class="line"><a name="l08151"></a><span class="lineno"> 8151</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l08152"></a><span class="lineno"> 8152</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08153"></a><span class="lineno"> 8153</span>&#160;      <span class="comment">/* This is an out of order packet from the future */</span></div><div class="line"><a name="l08154"></a><span class="lineno"> 8154</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html">ast_rtp_rtcp_nack_payload</a> *payload;</div><div class="line"><a name="l08155"></a><span class="lineno"> 8155</span>&#160;      <span class="keywordtype">int</span> missing_seqno;</div><div class="line"><a name="l08156"></a><span class="lineno"> 8156</span>&#160;      <span class="keywordtype">int</span> remove_failed;</div><div class="line"><a name="l08157"></a><span class="lineno"> 8157</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> missing_seqnos_added = 0;</div><div class="line"><a name="l08158"></a><span class="lineno"> 8158</span>&#160;</div><div class="line"><a name="l08159"></a><span class="lineno"> 8159</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(2, <span class="stringliteral">&quot;(%p) RTP received an out of order packet with sequence number &#39;%d&#39; while expecting &#39;%d&#39; from the future\n&quot;</span>,</div><div class="line"><a name="l08160"></a><span class="lineno"> 8160</span>&#160;         instance, seqno, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">expectedrxseqno</a>);</div><div class="line"><a name="l08161"></a><span class="lineno"> 8161</span>&#160;</div><div class="line"><a name="l08162"></a><span class="lineno"> 8162</span>&#160;      payload = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*payload) + res);</div><div class="line"><a name="l08163"></a><span class="lineno"> 8163</span>&#160;      <span class="keywordflow">if</span> (!payload) {</div><div class="line"><a name="l08164"></a><span class="lineno"> 8164</span>&#160;         <span class="comment">/* If the payload can&#39;t be allocated then we can&#39;t defer this packet right now.</span></div><div class="line"><a name="l08165"></a><span class="lineno"> 8165</span>&#160;<span class="comment">          * Instead of dumping what we have we pretend we lost this packet. It will then</span></div><div class="line"><a name="l08166"></a><span class="lineno"> 8166</span>&#160;<span class="comment">          * get NACKed later or the existing buffer will be returned entirely. Well, we may</span></div><div class="line"><a name="l08167"></a><span class="lineno"> 8167</span>&#160;<span class="comment">          * try since we&#39;re seemingly out of memory. It&#39;s a bad situation all around and</span></div><div class="line"><a name="l08168"></a><span class="lineno"> 8168</span>&#160;<span class="comment">          * packets are likely to get lost anyway.</span></div><div class="line"><a name="l08169"></a><span class="lineno"> 8169</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l08170"></a><span class="lineno"> 8170</span>&#160;         <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l08171"></a><span class="lineno"> 8171</span>&#160;      }</div><div class="line"><a name="l08172"></a><span class="lineno"> 8172</span>&#160;</div><div class="line"><a name="l08173"></a><span class="lineno"> 8173</span>&#160;      payload-&gt;<a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a854352f53b148adc24983a58a1866d66">size</a> = res;</div><div class="line"><a name="l08174"></a><span class="lineno"> 8174</span>&#160;      memcpy(payload-&gt;<a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a69e3972abe4e2ef0a921d73212c28cba">buf</a>, rtpheader, res);</div><div class="line"><a name="l08175"></a><span class="lineno"> 8175</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d82/data__buffer_8h.html#a8d5b92d5d157c9d56600596c9238b933">ast_data_buffer_put</a>(rtp-&gt;recv_buffer, seqno, payload) == -1) {</div><div class="line"><a name="l08176"></a><span class="lineno"> 8176</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(payload);</div><div class="line"><a name="l08177"></a><span class="lineno"> 8177</span>&#160;      }</div><div class="line"><a name="l08178"></a><span class="lineno"> 8178</span>&#160;</div><div class="line"><a name="l08179"></a><span class="lineno"> 8179</span>&#160;      <span class="comment">/* If this sequence number is removed that means we had a gap and this packet has filled it in</span></div><div class="line"><a name="l08180"></a><span class="lineno"> 8180</span>&#160;<span class="comment">       * some. Since it was part of the gap we will have already added any other missing sequence numbers</span></div><div class="line"><a name="l08181"></a><span class="lineno"> 8181</span>&#160;<span class="comment">       * before it (and possibly after it) to the vector so we don&#39;t need to do that again. Note that</span></div><div class="line"><a name="l08182"></a><span class="lineno"> 8182</span>&#160;<span class="comment">       * remove_failed will be set to -1 if the sequence number isn&#39;t removed, and 0 if it is.</span></div><div class="line"><a name="l08183"></a><span class="lineno"> 8183</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l08184"></a><span class="lineno"> 8184</span>&#160;      remove_failed = <a class="code" href="../../d6/d68/vector_8h.html#a492e49277a4d2b403ec357440d933254">AST_VECTOR_REMOVE_CMP_ORDERED</a>(&amp;rtp-&gt;missing_seqno, seqno, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9c0765c9365f9caf28b8f072aac73409">find_by_value</a>,</div><div class="line"><a name="l08185"></a><span class="lineno"> 8185</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a>);</div><div class="line"><a name="l08186"></a><span class="lineno"> 8186</span>&#160;      <span class="keywordflow">if</span> (!remove_failed) {</div><div class="line"><a name="l08187"></a><span class="lineno"> 8187</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(2, <span class="stringliteral">&quot;(%p) RTP packet with sequence number &#39;%d&#39; is no longer missing\n&quot;</span>,</div><div class="line"><a name="l08188"></a><span class="lineno"> 8188</span>&#160;            instance, seqno);</div><div class="line"><a name="l08189"></a><span class="lineno"> 8189</span>&#160;      }</div><div class="line"><a name="l08190"></a><span class="lineno"> 8190</span>&#160;</div><div class="line"><a name="l08191"></a><span class="lineno"> 8191</span>&#160;      <span class="comment">/* The missing sequence number code works by taking the sequence number of the</span></div><div class="line"><a name="l08192"></a><span class="lineno"> 8192</span>&#160;<span class="comment">       * packet we&#39;ve just received and going backwards until we hit the sequence number</span></div><div class="line"><a name="l08193"></a><span class="lineno"> 8193</span>&#160;<span class="comment">       * of the last packet we&#39;ve received. While doing so we check to make sure that the</span></div><div class="line"><a name="l08194"></a><span class="lineno"> 8194</span>&#160;<span class="comment">       * sequence number is not already missing and that it is not already buffered.</span></div><div class="line"><a name="l08195"></a><span class="lineno"> 8195</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l08196"></a><span class="lineno"> 8196</span>&#160;      missing_seqno = seqno;</div><div class="line"><a name="l08197"></a><span class="lineno"> 8197</span>&#160;      <span class="keywordflow">while</span> (remove_failed) {</div><div class="line"><a name="l08198"></a><span class="lineno"> 8198</span>&#160;         missing_seqno -= 1;</div><div class="line"><a name="l08199"></a><span class="lineno"> 8199</span>&#160;</div><div class="line"><a name="l08200"></a><span class="lineno"> 8200</span>&#160;         <span class="comment">/* If we&#39;ve cycled backwards then start back at the top */</span></div><div class="line"><a name="l08201"></a><span class="lineno"> 8201</span>&#160;         <span class="keywordflow">if</span> (missing_seqno &lt; 0) {</div><div class="line"><a name="l08202"></a><span class="lineno"> 8202</span>&#160;            missing_seqno = 65535;</div><div class="line"><a name="l08203"></a><span class="lineno"> 8203</span>&#160;         }</div><div class="line"><a name="l08204"></a><span class="lineno"> 8204</span>&#160;</div><div class="line"><a name="l08205"></a><span class="lineno"> 8205</span>&#160;         <span class="comment">/* We&#39;ve gone backwards enough such that we&#39;ve hit the previous sequence number */</span></div><div class="line"><a name="l08206"></a><span class="lineno"> 8206</span>&#160;         <span class="keywordflow">if</span> (missing_seqno == prev_seqno) {</div><div class="line"><a name="l08207"></a><span class="lineno"> 8207</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l08208"></a><span class="lineno"> 8208</span>&#160;         }</div><div class="line"><a name="l08209"></a><span class="lineno"> 8209</span>&#160;</div><div class="line"><a name="l08210"></a><span class="lineno"> 8210</span>&#160;         <span class="comment">/* We don&#39;t want missing sequence number duplicates. If, for some reason,</span></div><div class="line"><a name="l08211"></a><span class="lineno"> 8211</span>&#160;<span class="comment">          * packets are really out of order, we could end up in this scenario:</span></div><div class="line"><a name="l08212"></a><span class="lineno"> 8212</span>&#160;<span class="comment">          *</span></div><div class="line"><a name="l08213"></a><span class="lineno"> 8213</span>&#160;<span class="comment">          * We are expecting sequence number 100</span></div><div class="line"><a name="l08214"></a><span class="lineno"> 8214</span>&#160;<span class="comment">          * We receive sequence number 105</span></div><div class="line"><a name="l08215"></a><span class="lineno"> 8215</span>&#160;<span class="comment">          * Sequence numbers 100 through 104 get added to the vector</span></div><div class="line"><a name="l08216"></a><span class="lineno"> 8216</span>&#160;<span class="comment">          * We receive sequence number 101 (this section is skipped)</span></div><div class="line"><a name="l08217"></a><span class="lineno"> 8217</span>&#160;<span class="comment">          * We receive sequence number 103</span></div><div class="line"><a name="l08218"></a><span class="lineno"> 8218</span>&#160;<span class="comment">          * Sequence number 102 is added to the vector</span></div><div class="line"><a name="l08219"></a><span class="lineno"> 8219</span>&#160;<span class="comment">          *</span></div><div class="line"><a name="l08220"></a><span class="lineno"> 8220</span>&#160;<span class="comment">          * This will prevent the duplicate from being added.</span></div><div class="line"><a name="l08221"></a><span class="lineno"> 8221</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l08222"></a><span class="lineno"> 8222</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a7851644ae05acad1ab8b970ccfb172ba">AST_VECTOR_GET_CMP</a>(&amp;rtp-&gt;missing_seqno, missing_seqno,</div><div class="line"><a name="l08223"></a><span class="lineno"> 8223</span>&#160;                  <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9c0765c9365f9caf28b8f072aac73409">find_by_value</a>)) {</div><div class="line"><a name="l08224"></a><span class="lineno"> 8224</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l08225"></a><span class="lineno"> 8225</span>&#160;         }</div><div class="line"><a name="l08226"></a><span class="lineno"> 8226</span>&#160;</div><div class="line"><a name="l08227"></a><span class="lineno"> 8227</span>&#160;         <span class="comment">/* If this packet has been buffered already then don&#39;t count it amongst the</span></div><div class="line"><a name="l08228"></a><span class="lineno"> 8228</span>&#160;<span class="comment">          * missing.</span></div><div class="line"><a name="l08229"></a><span class="lineno"> 8229</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l08230"></a><span class="lineno"> 8230</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d7/d82/data__buffer_8h.html#a91218206f7c98167c6fc48d26639cf0e">ast_data_buffer_get</a>(rtp-&gt;recv_buffer, missing_seqno)) {</div><div class="line"><a name="l08231"></a><span class="lineno"> 8231</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l08232"></a><span class="lineno"> 8232</span>&#160;         }</div><div class="line"><a name="l08233"></a><span class="lineno"> 8233</span>&#160;</div><div class="line"><a name="l08234"></a><span class="lineno"> 8234</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(2, <span class="stringliteral">&quot;(%p) RTP added missing sequence number &#39;%d&#39;\n&quot;</span>,</div><div class="line"><a name="l08235"></a><span class="lineno"> 8235</span>&#160;            instance, missing_seqno);</div><div class="line"><a name="l08236"></a><span class="lineno"> 8236</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#a8418853c95c2093a85174233f0ef4827">AST_VECTOR_ADD_SORTED</a>(&amp;rtp-&gt;missing_seqno, missing_seqno,</div><div class="line"><a name="l08237"></a><span class="lineno"> 8237</span>&#160;               <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a83943ef00898b267fa0cddf6db6fd937">compare_by_value</a>);</div><div class="line"><a name="l08238"></a><span class="lineno"> 8238</span>&#160;         missing_seqnos_added++;</div><div class="line"><a name="l08239"></a><span class="lineno"> 8239</span>&#160;      }</div><div class="line"><a name="l08240"></a><span class="lineno"> 8240</span>&#160;</div><div class="line"><a name="l08241"></a><span class="lineno"> 8241</span>&#160;      <span class="comment">/* When we add a large number of missing sequence numbers we assume there was a substantial</span></div><div class="line"><a name="l08242"></a><span class="lineno"> 8242</span>&#160;<span class="comment">       * gap in reception so we trigger an immediate NACK. When our data buffer is 1/4 full we</span></div><div class="line"><a name="l08243"></a><span class="lineno"> 8243</span>&#160;<span class="comment">       * assume that the packets aren&#39;t just out of order but have actually been lost. At 1/2</span></div><div class="line"><a name="l08244"></a><span class="lineno"> 8244</span>&#160;<span class="comment">       * full we get more aggressive and ask for retransmission when we get a new packet.</span></div><div class="line"><a name="l08245"></a><span class="lineno"> 8245</span>&#160;<span class="comment">       * To get them back we construct and send a NACK causing the sender to retransmit them.</span></div><div class="line"><a name="l08246"></a><span class="lineno"> 8246</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l08247"></a><span class="lineno"> 8247</span>&#160;      <span class="keywordflow">if</span> (missing_seqnos_added &gt;= <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa94121f808aa4871f949d54edef0e79c">MISSING_SEQNOS_ADDED_TRIGGER</a> ||</div><div class="line"><a name="l08248"></a><span class="lineno"> 8248</span>&#160;         <a class="code" href="../../d7/d82/data__buffer_8h.html#a56472084280daafd2d67d69e4c2f7248">ast_data_buffer_count</a>(rtp-&gt;recv_buffer) == <a class="code" href="../../d7/d82/data__buffer_8h.html#a9e2eefe1a192ac86ab9ca3f588bf9b7a">ast_data_buffer_max</a>(rtp-&gt;recv_buffer) / 4 ||</div><div class="line"><a name="l08249"></a><span class="lineno"> 8249</span>&#160;         <a class="code" href="../../d7/d82/data__buffer_8h.html#a56472084280daafd2d67d69e4c2f7248">ast_data_buffer_count</a>(rtp-&gt;recv_buffer) &gt;= <a class="code" href="../../d7/d82/data__buffer_8h.html#a9e2eefe1a192ac86ab9ca3f588bf9b7a">ast_data_buffer_max</a>(rtp-&gt;recv_buffer) / 2) {</div><div class="line"><a name="l08250"></a><span class="lineno"> 8250</span>&#160;         <span class="keywordtype">int</span> packet_len = 0;</div><div class="line"><a name="l08251"></a><span class="lineno"> 8251</span>&#160;         <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l08252"></a><span class="lineno"> 8252</span>&#160;         <span class="keywordtype">int</span> ice;</div><div class="line"><a name="l08253"></a><span class="lineno"> 8253</span>&#160;         <span class="keywordtype">int</span> sr;</div><div class="line"><a name="l08254"></a><span class="lineno"> 8254</span>&#160;         <span class="keywordtype">size_t</span> data_size = <a class="code" href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a> + 128 + (<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;rtp-&gt;missing_seqno) * 4);</div><div class="line"><a name="l08255"></a><span class="lineno"> 8255</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *, rtcpheader, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>);</div><div class="line"><a name="l08256"></a><span class="lineno"> 8256</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *, rtcp_report,</div><div class="line"><a name="l08257"></a><span class="lineno"> 8257</span>&#160;               <a class="code" href="../../d5/dde/rtp__engine_8h.html#a199d704f3867124fe0f56f4c8856a0b4">ast_rtp_rtcp_report_alloc</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">themssrc_valid</a> ? 1 : 0),</div><div class="line"><a name="l08258"></a><span class="lineno"> 8258</span>&#160;               <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l08259"></a><span class="lineno"> 8259</span>&#160;</div><div class="line"><a name="l08260"></a><span class="lineno"> 8260</span>&#160;         <span class="comment">/* Sufficient space for RTCP headers and report, SDES with CNAME, NACK header,</span></div><div class="line"><a name="l08261"></a><span class="lineno"> 8261</span>&#160;<span class="comment">          * and worst case 4 bytes per missing sequence number.</span></div><div class="line"><a name="l08262"></a><span class="lineno"> 8262</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l08263"></a><span class="lineno"> 8263</span>&#160;         rtcpheader = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*rtcpheader) + data_size);</div><div class="line"><a name="l08264"></a><span class="lineno"> 8264</span>&#160;         <span class="keywordflow">if</span> (!rtcpheader) {</div><div class="line"><a name="l08265"></a><span class="lineno"> 8265</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP failed to allocate memory for NACK\n&quot;</span>, instance);</div><div class="line"><a name="l08266"></a><span class="lineno"> 8266</span>&#160;            <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l08267"></a><span class="lineno"> 8267</span>&#160;         }</div><div class="line"><a name="l08268"></a><span class="lineno"> 8268</span>&#160;</div><div class="line"><a name="l08269"></a><span class="lineno"> 8269</span>&#160;         memset(rtcpheader, 0, data_size);</div><div class="line"><a name="l08270"></a><span class="lineno"> 8270</span>&#160;</div><div class="line"><a name="l08271"></a><span class="lineno"> 8271</span>&#160;         res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a6a3e89b50705b66f142eaaff7d3fe52d">ast_rtcp_generate_compound_prefix</a>(instance, rtcpheader, rtcp_report, &amp;sr);</div><div class="line"><a name="l08272"></a><span class="lineno"> 8272</span>&#160;</div><div class="line"><a name="l08273"></a><span class="lineno"> 8273</span>&#160;         <span class="keywordflow">if</span> (res == 0 || res == 1) {</div><div class="line"><a name="l08274"></a><span class="lineno"> 8274</span>&#160;            <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l08275"></a><span class="lineno"> 8275</span>&#160;         }</div><div class="line"><a name="l08276"></a><span class="lineno"> 8276</span>&#160;</div><div class="line"><a name="l08277"></a><span class="lineno"> 8277</span>&#160;         packet_len += res;</div><div class="line"><a name="l08278"></a><span class="lineno"> 8278</span>&#160;</div><div class="line"><a name="l08279"></a><span class="lineno"> 8279</span>&#160;         res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a412fb88c15a637214233ca3cce6d9ad9">ast_rtcp_generate_nack</a>(instance, rtcpheader + packet_len);</div><div class="line"><a name="l08280"></a><span class="lineno"> 8280</span>&#160;</div><div class="line"><a name="l08281"></a><span class="lineno"> 8281</span>&#160;         <span class="keywordflow">if</span> (res == 0) {</div><div class="line"><a name="l08282"></a><span class="lineno"> 8282</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP failed to construct NACK, stopping here\n&quot;</span>, instance);</div><div class="line"><a name="l08283"></a><span class="lineno"> 8283</span>&#160;            <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l08284"></a><span class="lineno"> 8284</span>&#160;         }</div><div class="line"><a name="l08285"></a><span class="lineno"> 8285</span>&#160;</div><div class="line"><a name="l08286"></a><span class="lineno"> 8286</span>&#160;         packet_len += res;</div><div class="line"><a name="l08287"></a><span class="lineno"> 8287</span>&#160;</div><div class="line"><a name="l08288"></a><span class="lineno"> 8288</span>&#160;         res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a849b3d418fbe0446b4e9289a9ef94397">rtcp_sendto</a>(instance, rtcpheader, packet_len, 0, &amp;remote_address, &amp;ice);</div><div class="line"><a name="l08289"></a><span class="lineno"> 8289</span>&#160;         <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l08290"></a><span class="lineno"> 8290</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP failed to send NACK request out\n&quot;</span>, instance);</div><div class="line"><a name="l08291"></a><span class="lineno"> 8291</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08292"></a><span class="lineno"> 8292</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(2, <span class="stringliteral">&quot;(%p) RTCP sending a NACK request to get missing packets\n&quot;</span>, instance);</div><div class="line"><a name="l08293"></a><span class="lineno"> 8293</span>&#160;            <span class="comment">/* Update RTCP SR/RR statistics */</span></div><div class="line"><a name="l08294"></a><span class="lineno"> 8294</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac39a35490fcf802b678e67b448eb381c">ast_rtcp_calculate_sr_rr_statistics</a>(instance, rtcp_report, remote_address, ice, sr);</div><div class="line"><a name="l08295"></a><span class="lineno"> 8295</span>&#160;         }</div><div class="line"><a name="l08296"></a><span class="lineno"> 8296</span>&#160;      }</div><div class="line"><a name="l08297"></a><span class="lineno"> 8297</span>&#160;   }</div><div class="line"><a name="l08298"></a><span class="lineno"> 8298</span>&#160;</div><div class="line"><a name="l08299"></a><span class="lineno"> 8299</span>&#160;   <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l08300"></a><span class="lineno"> 8300</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a1e91482dfb876c9f92964c4fcce1c670"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a1e91482dfb876c9f92964c4fcce1c670">rtp_learning_rtp_seq_update</a></div><div class="ttdeci">static int rtp_learning_rtp_seq_update(struct rtp_learning_info *info, uint16_t seq)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03403">res_rtp_asterisk.c:3403</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a></div><div class="ttdoc">An object that represents data sent during a SR/RR RTCP report. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00331">rtp_engine.h:331</a></div></div>
<div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a417ee8a61074ec7570971202908e2c4f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a></div><div class="ttdeci">#define ast_frdup(fr)</div><div class="ttdoc">Copies a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">include/asterisk/frame.h:585</a></div></div>
<div class="ttc" id="vector_8h_html_a8418853c95c2093a85174233f0ef4827"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a8418853c95c2093a85174233f0ef4827">AST_VECTOR_ADD_SORTED</a></div><div class="ttdeci">#define AST_VECTOR_ADD_SORTED(vec, elem, cmp)</div><div class="ttdoc">Add an element into a sorted vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00371">vector.h:371</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38">AST_RTP_INSTANCE_RTCP_STANDARD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00259">rtp_engine.h:259</a></div></div>
<div class="ttc" id="linkedlists_8h_html_adf1959c5c03a3a706da97ad2f49617e5"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a></div><div class="ttdeci">#define AST_LIST_FIRST(head)</div><div class="ttdoc">Returns the first entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00420">linkedlists.h:420</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aca6484d75ee9d79a5d4447149f9c8c4ba0c26c1144bb830775979deb20e049368"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4ba0c26c1144bb830775979deb20e049368">STRICT_RTP_LEARN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00165">res_rtp_asterisk.c:165</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a6a3e89b50705b66f142eaaff7d3fe52d"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a6a3e89b50705b66f142eaaff7d3fe52d">ast_rtcp_generate_compound_prefix</a></div><div class="ttdeci">static int ast_rtcp_generate_compound_prefix(struct ast_rtp_instance *instance, unsigned char *rtcpheader, struct ast_rtp_rtcp_report *report, int *sr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04699">res_rtp_asterisk.c:4699</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a412fb88c15a637214233ca3cce6d9ad9"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a412fb88c15a637214233ca3cce6d9ad9">ast_rtcp_generate_nack</a></div><div class="ttdeci">static int ast_rtcp_generate_nack(struct ast_rtp_instance *instance, unsigned char *rtcpheader)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04729">res_rtp_asterisk.c:4729</a></div></div>
<div class="ttc" id="data__buffer_8h_html_ad15a633fb9ce31edf0ab9ad85031c198"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#ad15a633fb9ce31edf0ab9ad85031c198">ast_data_buffer_remove</a></div><div class="ttdeci">void * ast_data_buffer_remove(struct ast_data_buffer *buffer, size_t pos)</div><div class="ttdoc">Remove a data payload from the data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00299">data_buffer.c:299</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ae55dc6ec08efa57214027cb16f7e83c1"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae55dc6ec08efa57214027cb16f7e83c1">SEQNO_CYCLE_OVER</a></div><div class="ttdeci">#define SEQNO_CYCLE_OVER</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00116">res_rtp_asterisk.c:116</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af468e412cbb41cc4b890cf12aebf02fe"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af468e412cbb41cc4b890cf12aebf02fe">rtp_write_rtcp_fir</a></div><div class="ttdeci">static void rtp_write_rtcp_fir(struct ast_rtp_instance *instance, struct ast_rtp *rtp, struct ast_sockaddr *remote_address)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05160">res_rtp_asterisk.c:5160</a></div></div>
<div class="ttc" id="structast__frame_html_ab793262012344621455faf9266acbac2"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">ast_frame::seqno</a></div><div class="ttdeci">int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">include/asterisk/frame.h:195</a></div></div>
<div class="ttc" id="structast__srtp_html"><div class="ttname"><a href="../../d4/d11/structast__srtp.html">ast_srtp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd4/res__srtp_8c_source.html#l00065">res_srtp.c:65</a></div></div>
<div class="ttc" id="uuid_8h_html_a127408e53d34dca0c589a099fabf1e13"><div class="ttname"><a href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a></div><div class="ttdeci">#define AST_UUID_STR_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d1d/uuid_8h_source.html#l00027">uuid.h:27</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__nack__payload_html"><div class="ttname"><a href="../../d4/da4/structast__rtp__rtcp__nack__payload.html">ast_rtp_rtcp_nack_payload</a></div><div class="ttdoc">Structure for storing RTP packets for retransmission. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00585">res_rtp_asterisk.c:585</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad68124a712f2eb4ae298e08743ae2740"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad68124a712f2eb4ae298e08743ae2740">rtp_learning_seq_init</a></div><div class="ttdeci">static void rtp_learning_seq_init(struct rtp_learning_info *info, uint16_t seq)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03386">res_rtp_asterisk.c:3386</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a038f2cbb7068c08f4be16b20f6ffdb39"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a038f2cbb7068c08f4be16b20f6ffdb39">OLD_PACKET_COUNT</a></div><div class="ttdeci">#define OLD_PACKET_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00113">res_rtp_asterisk.c:113</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a83943ef00898b267fa0cddf6db6fd937"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a83943ef00898b267fa0cddf6db6fd937">compare_by_value</a></div><div class="ttdeci">static int compare_by_value(int elem, int value)</div><div class="ttdoc">Helper function to compare an elem in a vector by value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03039">res_rtp_asterisk.c:3039</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa94121f808aa4871f949d54edef0e79c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa94121f808aa4871f949d54edef0e79c">MISSING_SEQNOS_ADDED_TRIGGER</a></div><div class="ttdeci">#define MISSING_SEQNOS_ADDED_TRIGGER</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00114">res_rtp_asterisk.c:114</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0376aa2503a185437fab8cb0b7d674fb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * ast_rtp_instance_get_codecs(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the codecs structure of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00727">rtp_engine.c:727</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__nack__payload_html_a69e3972abe4e2ef0a921d73212c28cba"><div class="ttname"><a href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a69e3972abe4e2ef0a921d73212c28cba">ast_rtp_rtcp_nack_payload::buf</a></div><div class="ttdeci">unsigned char buf[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00587">res_rtp_asterisk.c:587</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3b7005812dac9fa0577e157db320ae4c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3b7005812dac9fa0577e157db320ae4c">RTP_DTLS_ESTABLISHED</a></div><div class="ttdeci">#define RTP_DTLS_ESTABLISHED</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00161">res_rtp_asterisk.c:161</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a9fba4bbd59bd9bcd7b0e06c4e2ac8ff6"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a9fba4bbd59bd9bcd7b0e06c4e2ac8ff6">rtp_instance_unlock</a></div><div class="ttdeci">static void rtp_instance_unlock(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06817">res_rtp_asterisk.c:6817</a></div></div>
<div class="ttc" id="netsock2_8h_html_a42e610962ef06c151aad8260af428e3d"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a42e610962ef06c151aad8260af428e3d">ast_sockaddr_ipv4_mapped</a></div><div class="ttdeci">int ast_sockaddr_ipv4_mapped(const struct ast_sockaddr *addr, struct ast_sockaddr *ast_mapped)</div><div class="ttdoc">Convert an IPv4-mapped IPv6 address into an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00037">netsock2.c:37</a></div></div>
<div class="ttc" id="codec_8h_html_a97df2e6b65823085173625553d2e06c5"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a></div><div class="ttdeci">const char * ast_codec_media_type2str(enum ast_media_type type)</div><div class="ttdoc">Conversion function to take a media type and turn it into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00347">codec.c:347</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1">STRICT_RTP_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00164">res_rtp_asterisk.c:164</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__nack__payload_html_a854352f53b148adc24983a58a1866d66"><div class="ttname"><a href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a854352f53b148adc24983a58a1866d66">ast_rtp_rtcp_nack_payload::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00586">res_rtp_asterisk.c:586</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a5402d4a2ce7addf589cc3efdb25b27be"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a5402d4a2ce7addf589cc3efdb25b27be">rtp_find_instance_by_packet_source_ssrc</a></div><div class="ttdeci">static struct ast_rtp_instance * rtp_find_instance_by_packet_source_ssrc(struct ast_rtp_instance *instance, struct ast_rtp *rtp, unsigned int ssrc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05897">res_rtp_asterisk.c:5897</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a622089f7b296c002cc855d73172e9da4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a622089f7b296c002cc855d73172e9da4">ast_rtp_instance_get_srtp</a></div><div class="ttdeci">struct ast_srtp * ast_rtp_instance_get_srtp(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdoc">Obtain the SRTP instance associated with an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02763">rtp_engine.c:2763</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4db6e4d59c2243c731f2155981d48d56"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4db6e4d59c2243c731f2155981d48d56">ast_rtp_interpret</a></div><div class="ttdeci">static struct ast_frame * ast_rtp_interpret(struct ast_rtp_instance *instance, struct ast_srtp *srtp, const struct ast_sockaddr *remote_address, unsigned char *read_area, int length, int prev_seqno, unsigned int bundled)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">res_rtp_asterisk.c:7200</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a27385fd97f84847f7aa3b7bfcb861361"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a27385fd97f84847f7aa3b7bfcb861361">ast_frame_free</a></div><div class="ttdeci">void ast_frame_free(struct ast_frame *fr, int cache)</div><div class="ttdoc">Requests a frame to be allocated. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00176">main/frame.c:176</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="netsock2_8h_html_abae1b903c8f5b7639235b579a267aaab"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a></div><div class="ttdeci">int ast_sockaddr_cmp(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00388">netsock2.c:388</a></div></div>
<div class="ttc" id="stun_8h_html_a54055c699858c128745d6802755f0abe"><div class="ttname"><a href="../../d3/d00/stun_8h.html#a54055c699858c128745d6802755f0abe">ast_stun_handle_packet</a></div><div class="ttdeci">int ast_stun_handle_packet(int s, struct sockaddr_in *src, unsigned char *data, size_t len, stun_cb_f *stun_cb, void *arg)</div><div class="ttdoc">handle an incoming STUN message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dbd/stun_8c_source.html#l00268">stun.c:268</a></div></div>
<div class="ttc" id="astmm_8h_html_ad42ab843b767e8b57162c10a158b75c3"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a></div><div class="ttdeci">void ast_free_ptr(void *ptr)</div><div class="ttdoc">free() wrapper </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01771">astmm.c:1771</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="stun_8h_html_aeebbffb9fd9d97e2ce5469547e5fb074a8f3217f91c38418aa44ff22ba9c19b97"><div class="ttname"><a href="../../d3/d00/stun_8h.html#aeebbffb9fd9d97e2ce5469547e5fb074a8f3217f91c38418aa44ff22ba9c19b97">AST_STUN_ACCEPT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/stun_8h_source.html#l00064">stun.h:64</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="data__buffer_8h_html_a8d5b92d5d157c9d56600596c9238b933"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#a8d5b92d5d157c9d56600596c9238b933">ast_data_buffer_put</a></div><div class="ttdeci">int ast_data_buffer_put(struct ast_data_buffer *buffer, size_t pos, void *payload)</div><div class="ttdoc">Place a data payload at a position in the data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00203">data_buffer.c:203</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="netsock2_8h_html_a51e2841175bf3ad58a4e11ad9fb2453f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a></div><div class="ttdeci">#define ast_sockaddr_port(addr)</div><div class="ttdoc">Get the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00521">netsock2.h:521</a></div></div>
<div class="ttc" id="structast__rtp_html_a8af53bd0e8b4f1e9275d51d2a4065991"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a8af53bd0e8b4f1e9275d51d2a4065991">ast_rtp::rawdata</a></div><div class="ttdeci">unsigned char rawdata[8192+AST_FRIENDLY_OFFSET]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00371">res_rtp_asterisk.c:371</a></div></div>
<div class="ttc" id="utils_8h_html_a3acffbd305ee72dcd4593c0d8af64a4f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a></div><div class="ttdeci">#define MIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00226">utils.h:226</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ab67e21f67a96dd6a9e1b0450ecddecf3"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab67e21f67a96dd6a9e1b0450ecddecf3">FLAG_NAT_ACTIVE</a></div><div class="ttdeci">#define FLAG_NAT_ACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00284">res_rtp_asterisk.c:284</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac963384d2cd5bf0a453061cc6889a44b"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a></div><div class="ttdeci">static int rtp_debug_test_addr(struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">res_rtp_asterisk.c:2746</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00115">rtp_engine.h:115</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac8f7380b8620c80443286b44481f641c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a></div><div class="ttdeci">#define AST_FRIENDLY_OFFSET</div><div class="ttdoc">Offset into a frame&amp;#39;s data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">include/asterisk/frame.h:229</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad68264a6784dc22570eda3cb447307f8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a></div><div class="ttdeci">#define ast_sockaddr_from_sin(addr, sin)</div><div class="ttdoc">Converts a struct sockaddr_in to a struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00782">netsock2.h:782</a></div></div>
<div class="ttc" id="vector_8h_html_a1885c25b9d767a53d1df9b641f53951a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a></div><div class="ttdeci">#define AST_VECTOR_ELEM_CLEANUP_NOOP(elem)</div><div class="ttdoc">Vector element cleanup that does nothing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00573">vector.h:573</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="parser_8c_html_a61217d5bc9d5b446d9c08e7ca401b733"><div class="ttname"><a href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a></div><div class="ttdeci">static int frames</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d72/parser_8c_source.html#l00051">parser.c:51</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga669fb90e123085584d65608ef87b2fe4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a></div><div class="ttdeci">#define ast_debug_rtp(sublevel,...)</div><div class="ttdoc">Log debug level RTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02860">rtp_engine.h:2860</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="codec_8c_html_a26d06e92c695d54e16beb8070dc5461d"><div class="ttname"><a href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a></div><div class="ttdeci">static struct ao2_container * codecs</div><div class="ttdoc">Registered codecs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00048">codec.c:48</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga0915be7e2d33217121465cfb689318fd"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a></div><div class="ttdeci">#define ast_debug_rtcp(sublevel,...)</div><div class="ttdoc">Log debug level RTCP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02873">rtp_engine.h:2873</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a89e0d6d0798eee9bc6c6c858fe3401fe"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a89e0d6d0798eee9bc6c6c858fe3401fe">MAXIMUM_RTP_RECV_BUFFER_SIZE</a></div><div class="ttdeci">#define MAXIMUM_RTP_RECV_BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00112">res_rtp_asterisk.c:112</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="structast__rtp_html_a7aaf7fb2b26e335304c8a89cc36aac00"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">ast_rtp::themssrc_valid</a></div><div class="ttdeci">unsigned int themssrc_valid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">res_rtp_asterisk.c:377</a></div></div>
<div class="ttc" id="data__buffer_8h_html_a91218206f7c98167c6fc48d26639cf0e"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#a91218206f7c98167c6fc48d26639cf0e">ast_data_buffer_get</a></div><div class="ttdeci">void * ast_data_buffer_get(const struct ast_data_buffer *buffer, size_t pos)</div><div class="ttdoc">Retrieve a data payload from the data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00269">data_buffer.c:269</a></div></div>
<div class="ttc" id="structast__rtp_html_a184e1597cfcf7b28d1cf5d4857892a91"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a184e1597cfcf7b28d1cf5d4857892a91">ast_rtp::lastrxseqno</a></div><div class="ttdeci">int lastrxseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00383">res_rtp_asterisk.c:383</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a91b1655b35022bc0a34e7187af475b26"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a91b1655b35022bc0a34e7187af475b26">STRICT_RTP_LEARN_TIMEOUT</a></div><div class="ttdeci">#define STRICT_RTP_LEARN_TIMEOUT</div><div class="ttdoc">Strict RTP learning timeout time in milliseconds. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00182">res_rtp_asterisk.c:182</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a199d704f3867124fe0f56f4c8856a0b4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a199d704f3867124fe0f56f4c8856a0b4">ast_rtp_rtcp_report_alloc</a></div><div class="ttdeci">struct ast_rtp_rtcp_report * ast_rtp_rtcp_report_alloc(unsigned int report_blocks)</div><div class="ttdoc">Allocate an ao2 ref counted instance of ast_rtp_rtcp_report. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03474">rtp_engine.c:3474</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_acef3a2fc706fb66b5cf99569281b4948"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#acef3a2fc706fb66b5cf99569281b4948">ast_rtcp_interpret</a></div><div class="ttdeci">static struct ast_frame * ast_rtcp_interpret(struct ast_rtp_instance *instance, struct ast_srtp *srtp, const unsigned char *rtcpdata, size_t size, struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">res_rtp_asterisk.c:6100</a></div></div>
<div class="ttc" id="test_8h_html_a9482d93ea3931853331bdbc745ce7cb4"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a></div><div class="ttdeci">#define ast_test_suite_event_notify(s, f,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00196">test.h:196</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="stun_8h_html_a6fe18262fa19169a3c2481829cd07cb3"><div class="ttname"><a href="../../d3/d00/stun_8h.html#a6fe18262fa19169a3c2481829cd07cb3">ast_debug_stun</a></div><div class="ttdeci">#define ast_debug_stun(sublevel,...)</div><div class="ttdoc">Log debug level STUN information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/stun_8h_source.html#l00053">stun.h:53</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa0fc4bee4b3cceefec395ea724d20650"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa0fc4bee4b3cceefec395ea724d20650">rtp_recvfrom</a></div><div class="ttdeci">static int rtp_recvfrom(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03241">res_rtp_asterisk.c:3241</a></div></div>
<div class="ttc" id="structast__rtp_html_a79c13061e144053a6c288592cc1c159e"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a79c13061e144053a6c288592cc1c159e">ast_rtp::expectedrxseqno</a></div><div class="ttdeci">int expectedrxseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00384">res_rtp_asterisk.c:384</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a90c48c7f24206e8822bf520dae0a2478"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_set_remote_address(instance, address)</div><div class="ttdoc">Set the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01080">rtp_engine.h:1080</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac7bd4f073fac1bbe828d0390d7e9250f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac7bd4f073fac1bbe828d0390d7e9250f">ast_rtcp_read</a></div><div class="ttdeci">static struct ast_frame * ast_rtcp_read(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06590">res_rtp_asterisk.c:6590</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga5009aeec1269fecc5f4e04c1c479116d"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a></div><div class="ttdeci">#define ast_debug_rtp_packet_is_allowed</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02864">rtp_engine.h:2864</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a43ed5507fb9a133cd9c31d302f6492a2"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a43ed5507fb9a133cd9c31d302f6492a2">should_drop_packets</a></div><div class="ttdeci">static int should_drop_packets(struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07583">res_rtp_asterisk.c:7583</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a81b4b1c3c855fb371e7723b473f1ee78"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a></div><div class="ttdeci">static char version[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00391">chan_ooh323.c:391</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="vector_8h_html_a0e59aa540254f87575cb1d28821bbd1f"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0e59aa540254f87575cb1d28821bbd1f">AST_VECTOR_RESET</a></div><div class="ttdeci">#define AST_VECTOR_RESET(vec, cleanup)</div><div class="ttdoc">Reset vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00627">vector.h:627</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aca6484d75ee9d79a5d4447149f9c8c4baff585ea9a2059021ce5a5f4a7ed8895f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4baff585ea9a2059021ce5a5f4a7ed8895f">STRICT_RTP_CLOSED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00166">res_rtp_asterisk.c:166</a></div></div>
<div class="ttc" id="structast__rtp_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">ast_rtp::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">res_rtp_asterisk.c:370</a></div></div>
<div class="ttc" id="vector_8h_html_a7851644ae05acad1ab8b970ccfb172ba"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a7851644ae05acad1ab8b970ccfb172ba">AST_VECTOR_GET_CMP</a></div><div class="ttdeci">#define AST_VECTOR_GET_CMP(vec, value, cmp)</div><div class="ttdoc">Get an element from a vector that matches the given comparison. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00733">vector.h:733</a></div></div>
<div class="ttc" id="vector_8h_html_a492e49277a4d2b403ec357440d933254"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a492e49277a4d2b403ec357440d933254">AST_VECTOR_REMOVE_CMP_ORDERED</a></div><div class="ttdeci">#define AST_VECTOR_REMOVE_CMP_ORDERED(vec, value, cmp, cleanup)</div><div class="ttdoc">Remove an element from a vector that matches the given comparison while maintaining order...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00540">vector.h:540</a></div></div>
<div class="ttc" id="structast__rtp__codecs_html"><div class="ttname"><a href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00705">rtp_engine.h:705</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="structast__rtp_html_a19258cc54fe0aafdf3bbe1f4fcc29218"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a19258cc54fe0aafdf3bbe1f4fcc29218">ast_rtp::lastividtimestamp</a></div><div class="ttdeci">unsigned int lastividtimestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00379">res_rtp_asterisk.c:379</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00033">codec.h:33</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0d1f922e093ac18824a7863fe3f5fa27"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a></div><div class="ttdeci">#define AST_LIST_HEAD_INIT_NOLOCK(head)</div><div class="ttdoc">Initializes a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00680">linkedlists.h:680</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac39a35490fcf802b678e67b448eb381c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac39a35490fcf802b678e67b448eb381c">ast_rtcp_calculate_sr_rr_statistics</a></div><div class="ttdeci">static int ast_rtcp_calculate_sr_rr_statistics(struct ast_rtp_instance *instance, struct ast_rtp_rtcp_report *rtcp_report, struct ast_sockaddr remote_address, int ice, int sr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04579">res_rtp_asterisk.c:4579</a></div></div>
<div class="ttc" id="data__buffer_8h_html_a56472084280daafd2d67d69e4c2f7248"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#a56472084280daafd2d67d69e4c2f7248">ast_data_buffer_count</a></div><div class="ttdeci">size_t ast_data_buffer_count(const struct ast_data_buffer *buffer)</div><div class="ttdoc">Return the number of payloads in a data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00356">data_buffer.c:356</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ab035447ec9d2b67c82ab84a0d4215935"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ab035447ec9d2b67c82ab84a0d4215935">ast_rtp_instance_get_requested_target_address</a></div><div class="ttdeci">void ast_rtp_instance_get_requested_target_address(struct ast_rtp_instance *instance, struct ast_sockaddr *address)</div><div class="ttdoc">Get the requested target address of the remote endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00673">rtp_engine.c:673</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2a2d35167e5880fdd5ec8d7df44f18b1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a></div><div class="ttdeci">int ast_rtp_instance_get_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property)</div><div class="ttdoc">Get the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00716">rtp_engine.c:716</a></div></div>
<div class="ttc" id="netsock2_8h_html_adbbb5a3382be0925c292a4933ce5b63d"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a></div><div class="ttdeci">int ast_sockaddr_is_ipv4(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if the address is an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00497">netsock2.c:497</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad49be45beb567b0fe0298d7bd0dd6419"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad49be45beb567b0fe0298d7bd0dd6419">rtcp_mux</a></div><div class="ttdeci">static int rtcp_mux(struct ast_rtp *rtp, const unsigned char *packet)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03050">res_rtp_asterisk.c:3050</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa60da39edcabcec05ca9219c7b290395"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a></div><div class="ttdeci">#define ast_sockaddr_to_sin(addr, sin)</div><div class="ttdoc">Converts a struct ast_sockaddr to a struct sockaddr_in. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00769">netsock2.h:769</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a849b3d418fbe0446b4e9289a9ef94397"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a849b3d418fbe0446b4e9289a9ef94397">rtcp_sendto</a></div><div class="ttdeci">static int rtcp_sendto(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int *ice)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03303">res_rtp_asterisk.c:3303</a></div></div>
<div class="ttc" id="data__buffer_8h_html_a6b088aaa6c2ae2366f12db54e6c76e5d"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#a6b088aaa6c2ae2366f12db54e6c76e5d">ast_data_buffer_resize</a></div><div class="ttdeci">void ast_data_buffer_resize(struct ast_data_buffer *buffer, size_t size)</div><div class="ttdoc">Resize a data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00168">data_buffer.c:168</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a576dcfebba6ad2a0d3bf3a97119cd953"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a576dcfebba6ad2a0d3bf3a97119cd953">ast_rtp_codecs_get_stream_type</a></div><div class="ttdeci">enum ast_media_type ast_rtp_codecs_get_stream_type(struct ast_rtp_codecs *codecs)</div><div class="ttdoc">Determine the type of RTP stream media from the codecs mapped. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01460">rtp_engine.c:1460</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a9c0765c9365f9caf28b8f072aac73409"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a9c0765c9365f9caf28b8f072aac73409">find_by_value</a></div><div class="ttdeci">static int find_by_value(int elem, int value)</div><div class="ttdoc">Helper function to find an elem in a vector by value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03045">res_rtp_asterisk.c:3045</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
<div class="ttc" id="data__buffer_8h_html_a9e2eefe1a192ac86ab9ca3f588bf9b7a"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#a9e2eefe1a192ac86ab9ca3f588bf9b7a">ast_data_buffer_max</a></div><div class="ttdeci">size_t ast_data_buffer_max(const struct ast_data_buffer *buffer)</div><div class="ttdoc">Return the maximum number of payloads a data buffer can hold. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00363">data_buffer.c:363</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abf8f7e808be60b78811d0435b6af4d42"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abf8f7e808be60b78811d0435b6af4d42">ast_rtp_instance_set_incoming_source_address</a></div><div class="ttdeci">int ast_rtp_instance_set_incoming_source_address(struct ast_rtp_instance *instance, const struct ast_sockaddr *address)</div><div class="ttdoc">Set the incoming source address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00606">rtp_engine.c:606</a></div></div>
<div class="ttc" id="structast__rtp_html_a339d22b3e442946380f98ed19e320db2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">ast_rtp::s</a></div><div class="ttdeci">int s</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">res_rtp_asterisk.c:368</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00303">include/asterisk/frame.h:303</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae09e4a9b3d29788aeaaab5e65015f48e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae09e4a9b3d29788aeaaab5e65015f48e">&#9670;&nbsp;</a></span>ast_rtp_remote_address_set()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_remote_address_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08497">8497</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02873">ast_debug_rtcp</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l01005">ast_ouraddrfor()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00643">ast_rtp_instance_get_local_address()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00259">AST_RTP_INSTANCE_RTCP_STANDARD</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00588">ast_rtp_instance_set_local_address()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01080">ast_rtp_instance_set_remote_address</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00388">ast_sockaddr_cmp()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00521">ast_sockaddr_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00670">AST_VECTOR_GET_ADDR</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00332">rtp_ssrc_mapping::instance</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03453">rtp_learning_start()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00164">STRICT_RTP_OPEN</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00206">strictrtp</a>.</p>
<div class="fragment"><div class="line"><a name="l08498"></a><span class="lineno"> 8498</span>&#160;{</div><div class="line"><a name="l08499"></a><span class="lineno"> 8499</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l08500"></a><span class="lineno"> 8500</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> local;</div><div class="line"><a name="l08501"></a><span class="lineno"> 8501</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l08502"></a><span class="lineno"> 8502</span>&#160;</div><div class="line"><a name="l08503"></a><span class="lineno"> 8503</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a80baeff1bd121c3168ede2a955e9b3a2">ast_rtp_instance_get_local_address</a>(instance, &amp;local);</div><div class="line"><a name="l08504"></a><span class="lineno"> 8504</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(addr)) {</div><div class="line"><a name="l08505"></a><span class="lineno"> 8505</span>&#160;      <span class="comment">/* Update the local RTP address with what is being used */</span></div><div class="line"><a name="l08506"></a><span class="lineno"> 8506</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d59/acl_8h.html#a652b53325b914138d49526f69f6dd546">ast_ouraddrfor</a>(addr, &amp;local)) {</div><div class="line"><a name="l08507"></a><span class="lineno"> 8507</span>&#160;         <span class="comment">/* Failed to update our address so reuse old local address */</span></div><div class="line"><a name="l08508"></a><span class="lineno"> 8508</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a80baeff1bd121c3168ede2a955e9b3a2">ast_rtp_instance_get_local_address</a>(instance, &amp;local);</div><div class="line"><a name="l08509"></a><span class="lineno"> 8509</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08510"></a><span class="lineno"> 8510</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a852b2b1d8dbc848c5c27bd37f33e13e0">ast_rtp_instance_set_local_address</a>(instance, &amp;local);</div><div class="line"><a name="l08511"></a><span class="lineno"> 8511</span>&#160;      }</div><div class="line"><a name="l08512"></a><span class="lineno"> 8512</span>&#160;   }</div><div class="line"><a name="l08513"></a><span class="lineno"> 8513</span>&#160;</div><div class="line"><a name="l08514"></a><span class="lineno"> 8514</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;rtcp &amp;&amp; !<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(addr)) {</div><div class="line"><a name="l08515"></a><span class="lineno"> 8515</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP setting address on RTP instance\n&quot;</span>, instance);</div><div class="line"><a name="l08516"></a><span class="lineno"> 8516</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;rtp-&gt;rtcp-&gt;them, addr);</div><div class="line"><a name="l08517"></a><span class="lineno"> 8517</span>&#160;</div><div class="line"><a name="l08518"></a><span class="lineno"> 8518</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;rtcp-&gt;type == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38">AST_RTP_INSTANCE_RTCP_STANDARD</a>) {</div><div class="line"><a name="l08519"></a><span class="lineno"> 8519</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;rtp-&gt;rtcp-&gt;them, <a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(addr) + 1);</div><div class="line"><a name="l08520"></a><span class="lineno"> 8520</span>&#160;</div><div class="line"><a name="l08521"></a><span class="lineno"> 8521</span>&#160;         <span class="comment">/* Update the local RTCP address with what is being used */</span></div><div class="line"><a name="l08522"></a><span class="lineno"> 8522</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;local, <a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(&amp;local) + 1);</div><div class="line"><a name="l08523"></a><span class="lineno"> 8523</span>&#160;      }</div><div class="line"><a name="l08524"></a><span class="lineno"> 8524</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;rtp-&gt;rtcp-&gt;us, &amp;local);</div><div class="line"><a name="l08525"></a><span class="lineno"> 8525</span>&#160;</div><div class="line"><a name="l08526"></a><span class="lineno"> 8526</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(rtp-&gt;rtcp-&gt;local_addr_str);</div><div class="line"><a name="l08527"></a><span class="lineno"> 8527</span>&#160;      rtp-&gt;rtcp-&gt;local_addr_str = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;local));</div><div class="line"><a name="l08528"></a><span class="lineno"> 8528</span>&#160;   }</div><div class="line"><a name="l08529"></a><span class="lineno"> 8529</span>&#160;</div><div class="line"><a name="l08530"></a><span class="lineno"> 8530</span>&#160;   <span class="comment">/* Update any bundled RTP instances */</span></div><div class="line"><a name="l08531"></a><span class="lineno"> 8531</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;rtp-&gt;ssrc_mapping); ++index) {</div><div class="line"><a name="l08532"></a><span class="lineno"> 8532</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../db/de7/structrtp__ssrc__mapping.html">rtp_ssrc_mapping</a> *mapping = <a class="code" href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a>(&amp;rtp-&gt;ssrc_mapping, index);</div><div class="line"><a name="l08533"></a><span class="lineno"> 8533</span>&#160;</div><div class="line"><a name="l08534"></a><span class="lineno"> 8534</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a>(mapping-&gt;<a class="code" href="../../db/de7/structrtp__ssrc__mapping.html#ab8379d828ec083fe0cdb16f540f67d1f">instance</a>, addr);</div><div class="line"><a name="l08535"></a><span class="lineno"> 8535</span>&#160;   }</div><div class="line"><a name="l08536"></a><span class="lineno"> 8536</span>&#160;</div><div class="line"><a name="l08537"></a><span class="lineno"> 8537</span>&#160;   <span class="comment">/* Need to reset the DTMF last sequence number and the timestamp of the last END packet */</span></div><div class="line"><a name="l08538"></a><span class="lineno"> 8538</span>&#160;   rtp-&gt;last_seqno = 0;</div><div class="line"><a name="l08539"></a><span class="lineno"> 8539</span>&#160;   rtp-&gt;last_end_timestamp.ts = 0;</div><div class="line"><a name="l08540"></a><span class="lineno"> 8540</span>&#160;   rtp-&gt;last_end_timestamp.is_set = 0;</div><div class="line"><a name="l08541"></a><span class="lineno"> 8541</span>&#160;</div><div class="line"><a name="l08542"></a><span class="lineno"> 8542</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a> &amp;&amp; rtp-&gt;strict_rtp_state != <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1">STRICT_RTP_OPEN</a></div><div class="line"><a name="l08543"></a><span class="lineno"> 8543</span>&#160;      &amp;&amp; !<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(addr) &amp;&amp; <a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(addr, &amp;rtp-&gt;strict_rtp_address)) {</div><div class="line"><a name="l08544"></a><span class="lineno"> 8544</span>&#160;      <span class="comment">/* We only need to learn a new strict source address if we&#39;ve been told the source is</span></div><div class="line"><a name="l08545"></a><span class="lineno"> 8545</span>&#160;<span class="comment">       * changing to something different.</span></div><div class="line"><a name="l08546"></a><span class="lineno"> 8546</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l08547"></a><span class="lineno"> 8547</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;%p -- Strict RTP learning after remote address set to: %s\n&quot;</span>,</div><div class="line"><a name="l08548"></a><span class="lineno"> 8548</span>&#160;         rtp, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(addr));</div><div class="line"><a name="l08549"></a><span class="lineno"> 8549</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ada712c8738c9286dabd805475002671e">rtp_learning_start</a>(rtp);</div><div class="line"><a name="l08550"></a><span class="lineno"> 8550</span>&#160;   }</div><div class="line"><a name="l08551"></a><span class="lineno"> 8551</span>&#160;}</div><div class="ttc" id="structrtp__ssrc__mapping_html_ab8379d828ec083fe0cdb16f540f67d1f"><div class="ttname"><a href="../../db/de7/structrtp__ssrc__mapping.html#ab8379d828ec083fe0cdb16f540f67d1f">rtp_ssrc_mapping::instance</a></div><div class="ttdeci">struct ast_rtp_instance * instance</div><div class="ttdoc">The RTP instance this SSRC belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00332">res_rtp_asterisk.c:332</a></div></div>
<div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="structrtp__ssrc__mapping_html"><div class="ttname"><a href="../../db/de7/structrtp__ssrc__mapping.html">rtp_ssrc_mapping</a></div><div class="ttdoc">Structure used for mapping an incoming SSRC to an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00326">res_rtp_asterisk.c:326</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38">AST_RTP_INSTANCE_RTCP_STANDARD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00259">rtp_engine.h:259</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1">STRICT_RTP_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00164">res_rtp_asterisk.c:164</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ada712c8738c9286dabd805475002671e"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ada712c8738c9286dabd805475002671e">rtp_learning_start</a></div><div class="ttdeci">static void rtp_learning_start(struct ast_rtp *rtp)</div><div class="ttdoc">Start the strictrtp learning mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03453">res_rtp_asterisk.c:3453</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="netsock2_8h_html_abae1b903c8f5b7639235b579a267aaab"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a></div><div class="ttdeci">int ast_sockaddr_cmp(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00388">netsock2.c:388</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="netsock2_8h_html_a51e2841175bf3ad58a4e11ad9fb2453f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a></div><div class="ttdeci">#define ast_sockaddr_port(addr)</div><div class="ttdoc">Get the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00521">netsock2.h:521</a></div></div>
<div class="ttc" id="acl_8h_html_a652b53325b914138d49526f69f6dd546"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a652b53325b914138d49526f69f6dd546">ast_ouraddrfor</a></div><div class="ttdeci">int ast_ouraddrfor(const struct ast_sockaddr *them, struct ast_sockaddr *us)</div><div class="ttdoc">Get our local IP address when contacting a remote host. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l01005">acl.c:1005</a></div></div>
<div class="ttc" id="vector_8h_html_af613aa5306ff5ad101734708861d634e"><div class="ttname"><a href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a></div><div class="ttdeci">#define AST_VECTOR_GET_ADDR(vec, idx)</div><div class="ttdoc">Get an address of element in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00670">vector.h:670</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga0915be7e2d33217121465cfb689318fd"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a></div><div class="ttdeci">#define ast_debug_rtcp(sublevel,...)</div><div class="ttdoc">Log debug level RTCP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02873">rtp_engine.h:2873</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a852b2b1d8dbc848c5c27bd37f33e13e0"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a852b2b1d8dbc848c5c27bd37f33e13e0">ast_rtp_instance_set_local_address</a></div><div class="ttdeci">int ast_rtp_instance_set_local_address(struct ast_rtp_instance *instance, const struct ast_sockaddr *address)</div><div class="ttdoc">Set the address that we are expecting to receive RTP on. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00588">rtp_engine.c:588</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a96336b3ac9e5b66f365f0ca5ba613995"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a></div><div class="ttdeci">static int strictrtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00206">res_rtp_asterisk.c:206</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a90c48c7f24206e8822bf520dae0a2478"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_set_remote_address(instance, address)</div><div class="ttdoc">Set the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01080">rtp_engine.h:1080</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a80baeff1bd121c3168ede2a955e9b3a2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a80baeff1bd121c3168ede2a955e9b3a2">ast_rtp_instance_get_local_address</a></div><div class="ttdeci">void ast_rtp_instance_get_local_address(struct ast_rtp_instance *instance, struct ast_sockaddr *address)</div><div class="ttdoc">Get the local address that we are expecting RTP on. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00643">rtp_engine.c:643</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0fb21b1e16b180484b413cbfd591fa7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fb21b1e16b180484b413cbfd591fa7f">&#9670;&nbsp;</a></span>ast_rtp_rtcp_handle_nack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_rtcp_handle_nack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>nackdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05963">5963</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00269">ast_data_buffer_get()</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00363">ast_data_buffer_max()</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00168">ast_data_buffer_resize()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02873">ast_debug_rtcp</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00546">AST_RTP_EXTENSION_ABS_SEND_TIME</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00886">ast_rtp_instance_extmap_get_id()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00587">ast_rtp_rtcp_nack_payload::buf</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00110">MAXIMUM_RTP_SEND_BUFFER_SIZE</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00226">MIN</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04876">put_unaligned_time24()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">rtp_sendto()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00586">ast_rtp_rtcp_nack_payload::size</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04392">timeval2ntp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;{</div><div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;   <span class="keywordtype">int</span> blp_index;</div><div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;   <span class="keywordtype">int</span> packet_index;</div><div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;   <span class="keywordtype">int</span> ice;</div><div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html">ast_rtp_rtcp_nack_payload</a> *payload;</div><div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> current_word;</div><div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pid; <span class="comment">/* Packet ID which refers to seqno of lost packet */</span></div><div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> blp; <span class="comment">/* Bitmask of following lost packets */</span></div><div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address = { {0,} };</div><div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;   <span class="keywordtype">int</span> abs_send_time_id;</div><div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> now_msw = 0;</div><div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> now_lsw = 0;</div><div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> packets_not_found = 0;</div><div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;</div><div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;send_buffer) {</div><div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP tried to handle NACK request, &quot;</span></div><div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;         <span class="stringliteral">&quot;but we don&#39;t have a RTP packet storage!\n&quot;</span>, instance);</div><div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;   }</div><div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;</div><div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160;   abs_send_time_id = <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad0e27894cc1156205f52b3692096c14d">ast_rtp_instance_extmap_get_id</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa2244dfdd646dfd5287d1029c44d1f3f5">AST_RTP_EXTENSION_ABS_SEND_TIME</a>);</div><div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;   <span class="keywordflow">if</span> (abs_send_time_id != -1) {</div><div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae07b5d23a23d4d09988c4a1c5d477d14">timeval2ntp</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), &amp;now_msw, &amp;now_lsw);</div><div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;   }</div><div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;</div><div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(instance, &amp;remote_address);</div><div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;</div><div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;<span class="comment">    * We use index 3 because with feedback messages, the FCI (Feedback Control Information)</span></div><div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;<span class="comment">    * does not begin until after the version, packet SSRC, and media SSRC words.</span></div><div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;   <span class="keywordflow">for</span> (packet_index = 3; packet_index &lt; length; packet_index++) {</div><div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;      current_word = ntohl(nackdata[position + packet_index]);</div><div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;      pid = current_word &gt;&gt; 16;</div><div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;      <span class="comment">/* We know the remote end is missing this packet. Go ahead and send it if we still have it. */</span></div><div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160;      payload = (<span class="keyword">struct </span><a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html">ast_rtp_rtcp_nack_payload</a> *)<a class="code" href="../../d7/d82/data__buffer_8h.html#a91218206f7c98167c6fc48d26639cf0e">ast_data_buffer_get</a>(rtp-&gt;send_buffer, pid);</div><div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;      <span class="keywordflow">if</span> (payload) {</div><div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;         <span class="keywordflow">if</span> (abs_send_time_id != -1) {</div><div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;            <span class="comment">/* On retransmission we need to update the timestamp within the packet, as it</span></div><div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;<span class="comment">             * is supposed to contain when the packet was actually sent.</span></div><div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3fa030a6094ca05ea43a3b49f14e5cc3">put_unaligned_time24</a>(payload-&gt;<a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a69e3972abe4e2ef0a921d73212c28cba">buf</a> + 17, now_msw, now_lsw);</div><div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;         }</div><div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;         res += <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a>(instance, payload-&gt;<a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a69e3972abe4e2ef0a921d73212c28cba">buf</a>, payload-&gt;<a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a854352f53b148adc24983a58a1866d66">size</a>, 0, &amp;remote_address, &amp;ice);</div><div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP received NACK request for RTP packet with seqno %d, &quot;</span></div><div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;            <span class="stringliteral">&quot;but we don&#39;t have it\n&quot;</span>, instance, pid);</div><div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;         packets_not_found++;</div><div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;      }</div><div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;<span class="comment">       * The bitmask. Denoting the least significant bit as 1 and its most significant bit</span></div><div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;<span class="comment">       * as 16, then bit i of the bitmask is set to 1 if the receiver has not received RTP</span></div><div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;<span class="comment">       * packet (pid+i)(modulo 2^16). Otherwise, it is set to 0. We cannot assume bits set</span></div><div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;<span class="comment">       * to 0 after a bit set to 1 have actually been received.</span></div><div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;      blp = current_word &amp; 0xffff;</div><div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;      blp_index = 1;</div><div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;      <span class="keywordflow">while</span> (blp) {</div><div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;         <span class="keywordflow">if</span> (blp &amp; 1) {</div><div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;            <span class="comment">/* Packet (pid + i)(modulo 2^16) is missing too. */</span></div><div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> seqno = (pid + blp_index) % 65536;</div><div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;            payload = (<span class="keyword">struct </span><a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html">ast_rtp_rtcp_nack_payload</a> *)<a class="code" href="../../d7/d82/data__buffer_8h.html#a91218206f7c98167c6fc48d26639cf0e">ast_data_buffer_get</a>(rtp-&gt;send_buffer, seqno);</div><div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;            <span class="keywordflow">if</span> (payload) {</div><div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;               <span class="keywordflow">if</span> (abs_send_time_id != -1) {</div><div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;                  <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3fa030a6094ca05ea43a3b49f14e5cc3">put_unaligned_time24</a>(payload-&gt;<a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a69e3972abe4e2ef0a921d73212c28cba">buf</a> + 17, now_msw, now_lsw);</div><div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;               }</div><div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;               res += <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a>(instance, payload-&gt;<a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a69e3972abe4e2ef0a921d73212c28cba">buf</a>, payload-&gt;<a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a854352f53b148adc24983a58a1866d66">size</a>, 0, &amp;remote_address, &amp;ice);</div><div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;               <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP remote end also requested RTP packet with seqno %d, &quot;</span></div><div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;                  <span class="stringliteral">&quot;but we don&#39;t have it\n&quot;</span>, instance, seqno);</div><div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;               packets_not_found++;</div><div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;            }</div><div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;         }</div><div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;         blp &gt;&gt;= 1;</div><div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;         blp_index++;</div><div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;      }</div><div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;   }</div><div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;</div><div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;   <span class="keywordflow">if</span> (packets_not_found) {</div><div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;      <span class="comment">/* Grow the send buffer based on how many packets were not found in the buffer, but</span></div><div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;<span class="comment">       * enforce a maximum.</span></div><div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;      <a class="code" href="../../d7/d82/data__buffer_8h.html#a6b088aaa6c2ae2366f12db54e6c76e5d">ast_data_buffer_resize</a>(rtp-&gt;send_buffer, <a class="code" href="../../d5/d60/utils_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af6e0d898757b96d87a1d93e446d71bdd">MAXIMUM_RTP_SEND_BUFFER_SIZE</a>,</div><div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;         <a class="code" href="../../d7/d82/data__buffer_8h.html#a9e2eefe1a192ac86ab9ca3f588bf9b7a">ast_data_buffer_max</a>(rtp-&gt;send_buffer) + packets_not_found));</div><div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(2, <span class="stringliteral">&quot;(%p) RTCP send buffer on RTP instance is now at maximum of %zu\n&quot;</span>,</div><div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;         instance, <a class="code" href="../../d7/d82/data__buffer_8h.html#a9e2eefe1a192ac86ab9ca3f588bf9b7a">ast_data_buffer_max</a>(rtp-&gt;send_buffer));</div><div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160;   }</div><div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;</div><div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ad0e27894cc1156205f52b3692096c14d"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ad0e27894cc1156205f52b3692096c14d">ast_rtp_instance_extmap_get_id</a></div><div class="ttdeci">int ast_rtp_instance_extmap_get_id(struct ast_rtp_instance *instance, enum ast_rtp_extension extension)</div><div class="ttdoc">Retrieve the id for an RTP extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00886">rtp_engine.c:886</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__nack__payload_html"><div class="ttname"><a href="../../d4/da4/structast__rtp__rtcp__nack__payload.html">ast_rtp_rtcp_nack_payload</a></div><div class="ttdoc">Structure for storing RTP packets for retransmission. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00585">res_rtp_asterisk.c:585</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__nack__payload_html_a69e3972abe4e2ef0a921d73212c28cba"><div class="ttname"><a href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a69e3972abe4e2ef0a921d73212c28cba">ast_rtp_rtcp_nack_payload::buf</a></div><div class="ttdeci">unsigned char buf[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00587">res_rtp_asterisk.c:587</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__nack__payload_html_a854352f53b148adc24983a58a1866d66"><div class="ttname"><a href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a854352f53b148adc24983a58a1866d66">ast_rtp_rtcp_nack_payload::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00586">res_rtp_asterisk.c:586</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ae07b5d23a23d4d09988c4a1c5d477d14"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae07b5d23a23d4d09988c4a1c5d477d14">timeval2ntp</a></div><div class="ttdeci">static void timeval2ntp(struct timeval tv, unsigned int *msw, unsigned int *lsw)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04392">res_rtp_asterisk.c:4392</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af6e0d898757b96d87a1d93e446d71bdd"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af6e0d898757b96d87a1d93e446d71bdd">MAXIMUM_RTP_SEND_BUFFER_SIZE</a></div><div class="ttdeci">#define MAXIMUM_RTP_SEND_BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00110">res_rtp_asterisk.c:110</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="utils_8h_html_a3acffbd305ee72dcd4593c0d8af64a4f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a></div><div class="ttdeci">#define MIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00226">utils.h:226</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a88677a524d7f3d7201f5d2f773cfc8ffa2244dfdd646dfd5287d1029c44d1f3f5"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa2244dfdd646dfd5287d1029c44d1f3f5">AST_RTP_EXTENSION_ABS_SEND_TIME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00546">rtp_engine.h:546</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga0915be7e2d33217121465cfb689318fd"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a></div><div class="ttdeci">#define ast_debug_rtcp(sublevel,...)</div><div class="ttdoc">Log debug level RTCP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02873">rtp_engine.h:2873</a></div></div>
<div class="ttc" id="data__buffer_8h_html_a91218206f7c98167c6fc48d26639cf0e"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#a91218206f7c98167c6fc48d26639cf0e">ast_data_buffer_get</a></div><div class="ttdeci">void * ast_data_buffer_get(const struct ast_data_buffer *buffer, size_t pos)</div><div class="ttdoc">Retrieve a data payload from the data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00269">data_buffer.c:269</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ade1c64796fc8534818c62a28b95bcd38"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a></div><div class="ttdeci">static int rtp_sendto(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int *ice)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">res_rtp_asterisk.c:3309</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3fa030a6094ca05ea43a3b49f14e5cc3"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3fa030a6094ca05ea43a3b49f14e5cc3">put_unaligned_time24</a></div><div class="ttdeci">static void put_unaligned_time24(void *p, uint32_t time_msw, uint32_t time_lsw)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04876">res_rtp_asterisk.c:4876</a></div></div>
<div class="ttc" id="data__buffer_8h_html_a6b088aaa6c2ae2366f12db54e6c76e5d"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#a6b088aaa6c2ae2366f12db54e6c76e5d">ast_data_buffer_resize</a></div><div class="ttdeci">void ast_data_buffer_resize(struct ast_data_buffer *buffer, size_t size)</div><div class="ttdoc">Resize a data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00168">data_buffer.c:168</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
<div class="ttc" id="data__buffer_8h_html_a9e2eefe1a192ac86ab9ca3f588bf9b7a"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#a9e2eefe1a192ac86ab9ca3f588bf9b7a">ast_data_buffer_max</a></div><div class="ttdeci">size_t ast_data_buffer_max(const struct ast_data_buffer *buffer)</div><div class="ttdoc">Return the maximum number of payloads a data buffer can hold. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00363">data_buffer.c:363</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb8701cef9b982766056774ff71538f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb8701cef9b982766056774ff71538f1">&#9670;&nbsp;</a></span>ast_rtp_sendcng()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_sendcng </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>generate comfort noice (CNG) </p>
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08816">8816</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00268">AST_RTP_CN</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01928">ast_rtp_codecs_payload_code_tx()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00727">ast_rtp_instance_get_codecs()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00226">ast_tv()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00378">ast_rtp::lastts</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">rtp_debug_test_addr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">rtp_sendto()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>.</p>
<div class="fragment"><div class="line"><a name="l08817"></a><span class="lineno"> 8817</span>&#160;{</div><div class="line"><a name="l08818"></a><span class="lineno"> 8818</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *rtpheader;</div><div class="line"><a name="l08819"></a><span class="lineno"> 8819</span>&#160;   <span class="keywordtype">int</span> hdrlen = 12;</div><div class="line"><a name="l08820"></a><span class="lineno"> 8820</span>&#160;   <span class="keywordtype">int</span> res, payload = 0;</div><div class="line"><a name="l08821"></a><span class="lineno"> 8821</span>&#160;   <span class="keywordtype">char</span> data[256];</div><div class="line"><a name="l08822"></a><span class="lineno"> 8822</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l08823"></a><span class="lineno"> 8823</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address = { {0,} };</div><div class="line"><a name="l08824"></a><span class="lineno"> 8824</span>&#160;   <span class="keywordtype">int</span> ice;</div><div class="line"><a name="l08825"></a><span class="lineno"> 8825</span>&#160;</div><div class="line"><a name="l08826"></a><span class="lineno"> 8826</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(instance, &amp;remote_address);</div><div class="line"><a name="l08827"></a><span class="lineno"> 8827</span>&#160;</div><div class="line"><a name="l08828"></a><span class="lineno"> 8828</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;remote_address)) {</div><div class="line"><a name="l08829"></a><span class="lineno"> 8829</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08830"></a><span class="lineno"> 8830</span>&#160;   }</div><div class="line"><a name="l08831"></a><span class="lineno"> 8831</span>&#160;</div><div class="line"><a name="l08832"></a><span class="lineno"> 8832</span>&#160;   payload = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a8631c44e7160622bcbdc6aea8b449e5f">ast_rtp_codecs_payload_code_tx</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(instance), 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad924782a38efb3a8f9edbb92d3135541">AST_RTP_CN</a>);</div><div class="line"><a name="l08833"></a><span class="lineno"> 8833</span>&#160;</div><div class="line"><a name="l08834"></a><span class="lineno"> 8834</span>&#160;   level = 127 - (level &amp; 0x7f);</div><div class="line"><a name="l08835"></a><span class="lineno"> 8835</span>&#160;</div><div class="line"><a name="l08836"></a><span class="lineno"> 8836</span>&#160;   rtp-&gt;dtmfmute = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(0, 500000));</div><div class="line"><a name="l08837"></a><span class="lineno"> 8837</span>&#160;</div><div class="line"><a name="l08838"></a><span class="lineno"> 8838</span>&#160;   <span class="comment">/* Get a pointer to the header */</span></div><div class="line"><a name="l08839"></a><span class="lineno"> 8839</span>&#160;   rtpheader = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)data;</div><div class="line"><a name="l08840"></a><span class="lineno"> 8840</span>&#160;   rtpheader[0] = htonl((2 &lt;&lt; 30) | (payload &lt;&lt; 16) | (rtp-&gt;seqno));</div><div class="line"><a name="l08841"></a><span class="lineno"> 8841</span>&#160;   rtpheader[1] = htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a>);</div><div class="line"><a name="l08842"></a><span class="lineno"> 8842</span>&#160;   rtpheader[2] = htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>);</div><div class="line"><a name="l08843"></a><span class="lineno"> 8843</span>&#160;   data[12] = level;</div><div class="line"><a name="l08844"></a><span class="lineno"> 8844</span>&#160;</div><div class="line"><a name="l08845"></a><span class="lineno"> 8845</span>&#160;   res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a>(instance, (<span class="keywordtype">void</span> *) rtpheader, hdrlen + 1, 0, &amp;remote_address, &amp;ice);</div><div class="line"><a name="l08846"></a><span class="lineno"> 8846</span>&#160;</div><div class="line"><a name="l08847"></a><span class="lineno"> 8847</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l08848"></a><span class="lineno"> 8848</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;RTP Comfort Noise Transmission error to %s: %s\n&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address), strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l08849"></a><span class="lineno"> 8849</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l08850"></a><span class="lineno"> 8850</span>&#160;   }</div><div class="line"><a name="l08851"></a><span class="lineno"> 8851</span>&#160;</div><div class="line"><a name="l08852"></a><span class="lineno"> 8852</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a>(&amp;remote_address)) {</div><div class="line"><a name="l08853"></a><span class="lineno"> 8853</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Sent Comfort Noise RTP packet to %s%s (type %-2.2d, seq %-6.6d, ts %-6.6u, len %-6.6d)\n&quot;</span>,</div><div class="line"><a name="l08854"></a><span class="lineno"> 8854</span>&#160;             <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address),</div><div class="line"><a name="l08855"></a><span class="lineno"> 8855</span>&#160;             ice ? <span class="stringliteral">&quot; (via ICE)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l08856"></a><span class="lineno"> 8856</span>&#160;             <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad924782a38efb3a8f9edbb92d3135541">AST_RTP_CN</a>, rtp-&gt;seqno, rtp-&gt;lastdigitts, res - hdrlen);</div><div class="line"><a name="l08857"></a><span class="lineno"> 8857</span>&#160;   }</div><div class="line"><a name="l08858"></a><span class="lineno"> 8858</span>&#160;</div><div class="line"><a name="l08859"></a><span class="lineno"> 8859</span>&#160;   rtp-&gt;seqno++;</div><div class="line"><a name="l08860"></a><span class="lineno"> 8860</span>&#160;</div><div class="line"><a name="l08861"></a><span class="lineno"> 8861</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l08862"></a><span class="lineno"> 8862</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0376aa2503a185437fab8cb0b7d674fb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * ast_rtp_instance_get_codecs(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the codecs structure of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00727">rtp_engine.c:727</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a8631c44e7160622bcbdc6aea8b449e5f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a8631c44e7160622bcbdc6aea8b449e5f">ast_rtp_codecs_payload_code_tx</a></div><div class="ttdeci">int ast_rtp_codecs_payload_code_tx(struct ast_rtp_codecs *codecs, int asterisk_format, const struct ast_format *format, int code)</div><div class="ttdoc">Retrieve a tx mapped payload type based on whether it is an Asterisk format and the code...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01928">rtp_engine.c:1928</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac963384d2cd5bf0a453061cc6889a44b"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a></div><div class="ttdeci">static int rtp_debug_test_addr(struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">res_rtp_asterisk.c:2746</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__rtp_html_a2eb3b9494c999b0dd38c4d40bfdc55b4"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">ast_rtp::lastts</a></div><div class="ttdeci">unsigned int lastts</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00378">res_rtp_asterisk.c:378</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ade1c64796fc8534818c62a28b95bcd38"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a></div><div class="ttdeci">static int rtp_sendto(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int *ice)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">res_rtp_asterisk.c:3309</a></div></div>
<div class="ttc" id="time_8h_html_aebf04439f206cc509472ce4b6da48a5a"><div class="ttname"><a href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a></div><div class="ttdeci">struct timeval ast_tv(ast_time_t sec, ast_suseconds_t usec)</div><div class="ttdoc">Returns a timeval from sec, usec. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00226">time.h:226</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ad924782a38efb3a8f9edbb92d3135541"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ad924782a38efb3a8f9edbb92d3135541">AST_RTP_CN</a></div><div class="ttdeci">#define AST_RTP_CN</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00268">rtp_engine.h:268</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad103ac99f895ad9b95024e1adc4bb9f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad103ac99f895ad9b95024e1adc4bb9f5">&#9670;&nbsp;</a></span>ast_rtp_set_remote_ssrc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_set_remote_ssrc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>ssrc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08881">8881</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00670">AST_VECTOR_GET_ADDR</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00332">rtp_ssrc_mapping::instance</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00328">rtp_ssrc_mapping::ssrc</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00330">rtp_ssrc_mapping::ssrc_valid</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">ast_rtp::themssrc</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">ast_rtp::themssrc_valid</a>.</p>
<div class="fragment"><div class="line"><a name="l08882"></a><span class="lineno"> 8882</span>&#160;{</div><div class="line"><a name="l08883"></a><span class="lineno"> 8883</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l08884"></a><span class="lineno"> 8884</span>&#160;</div><div class="line"><a name="l08885"></a><span class="lineno"> 8885</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">themssrc_valid</a> &amp;&amp; rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">themssrc</a> == <a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>) {</div><div class="line"><a name="l08886"></a><span class="lineno"> 8886</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l08887"></a><span class="lineno"> 8887</span>&#160;   }</div><div class="line"><a name="l08888"></a><span class="lineno"> 8888</span>&#160;</div><div class="line"><a name="l08889"></a><span class="lineno"> 8889</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">themssrc</a> = <a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>;</div><div class="line"><a name="l08890"></a><span class="lineno"> 8890</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">themssrc_valid</a> = 1;</div><div class="line"><a name="l08891"></a><span class="lineno"> 8891</span>&#160;</div><div class="line"><a name="l08892"></a><span class="lineno"> 8892</span>&#160;   <span class="comment">/* If this is bundled we need to update the SSRC mapping */</span></div><div class="line"><a name="l08893"></a><span class="lineno"> 8893</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;bundled) {</div><div class="line"><a name="l08894"></a><span class="lineno"> 8894</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *bundled_rtp;</div><div class="line"><a name="l08895"></a><span class="lineno"> 8895</span>&#160;      <span class="keywordtype">int</span> index;</div><div class="line"><a name="l08896"></a><span class="lineno"> 8896</span>&#160;</div><div class="line"><a name="l08897"></a><span class="lineno"> 8897</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l08898"></a><span class="lineno"> 8898</span>&#160;</div><div class="line"><a name="l08899"></a><span class="lineno"> 8899</span>&#160;      <span class="comment">/* The child lock can&#39;t be held while accessing the parent */</span></div><div class="line"><a name="l08900"></a><span class="lineno"> 8900</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(rtp-&gt;bundled);</div><div class="line"><a name="l08901"></a><span class="lineno"> 8901</span>&#160;      bundled_rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(rtp-&gt;bundled);</div><div class="line"><a name="l08902"></a><span class="lineno"> 8902</span>&#160;</div><div class="line"><a name="l08903"></a><span class="lineno"> 8903</span>&#160;      <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;bundled_rtp-&gt;ssrc_mapping); ++index) {</div><div class="line"><a name="l08904"></a><span class="lineno"> 8904</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../db/de7/structrtp__ssrc__mapping.html">rtp_ssrc_mapping</a> *mapping = <a class="code" href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a>(&amp;bundled_rtp-&gt;ssrc_mapping, index);</div><div class="line"><a name="l08905"></a><span class="lineno"> 8905</span>&#160;</div><div class="line"><a name="l08906"></a><span class="lineno"> 8906</span>&#160;         <span class="keywordflow">if</span> (mapping-&gt;<a class="code" href="../../db/de7/structrtp__ssrc__mapping.html#ab8379d828ec083fe0cdb16f540f67d1f">instance</a> == instance) {</div><div class="line"><a name="l08907"></a><span class="lineno"> 8907</span>&#160;            mapping-&gt;<a class="code" href="../../db/de7/structrtp__ssrc__mapping.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a> = <a class="code" href="../../db/de7/structrtp__ssrc__mapping.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>;</div><div class="line"><a name="l08908"></a><span class="lineno"> 8908</span>&#160;            mapping-&gt;<a class="code" href="../../db/de7/structrtp__ssrc__mapping.html#ab41fa616af8668af19f475a60215b2da">ssrc_valid</a> = 1;</div><div class="line"><a name="l08909"></a><span class="lineno"> 8909</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l08910"></a><span class="lineno"> 8910</span>&#160;         }</div><div class="line"><a name="l08911"></a><span class="lineno"> 8911</span>&#160;      }</div><div class="line"><a name="l08912"></a><span class="lineno"> 8912</span>&#160;</div><div class="line"><a name="l08913"></a><span class="lineno"> 8913</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(rtp-&gt;bundled);</div><div class="line"><a name="l08914"></a><span class="lineno"> 8914</span>&#160;</div><div class="line"><a name="l08915"></a><span class="lineno"> 8915</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l08916"></a><span class="lineno"> 8916</span>&#160;   }</div><div class="line"><a name="l08917"></a><span class="lineno"> 8917</span>&#160;}</div><div class="ttc" id="structrtp__ssrc__mapping_html_ab8379d828ec083fe0cdb16f540f67d1f"><div class="ttname"><a href="../../db/de7/structrtp__ssrc__mapping.html#ab8379d828ec083fe0cdb16f540f67d1f">rtp_ssrc_mapping::instance</a></div><div class="ttdeci">struct ast_rtp_instance * instance</div><div class="ttdoc">The RTP instance this SSRC belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00332">res_rtp_asterisk.c:332</a></div></div>
<div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="structrtp__ssrc__mapping_html"><div class="ttname"><a href="../../db/de7/structrtp__ssrc__mapping.html">rtp_ssrc_mapping</a></div><div class="ttdoc">Structure used for mapping an incoming SSRC to an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00326">res_rtp_asterisk.c:326</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structrtp__ssrc__mapping_html_ab41fa616af8668af19f475a60215b2da"><div class="ttname"><a href="../../db/de7/structrtp__ssrc__mapping.html#ab41fa616af8668af19f475a60215b2da">rtp_ssrc_mapping::ssrc_valid</a></div><div class="ttdeci">unsigned int ssrc_valid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00330">res_rtp_asterisk.c:330</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="vector_8h_html_af613aa5306ff5ad101734708861d634e"><div class="ttname"><a href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a></div><div class="ttdeci">#define AST_VECTOR_GET_ADDR(vec, idx)</div><div class="ttdoc">Get an address of element in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00670">vector.h:670</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structast__rtp_html_a7aaf7fb2b26e335304c8a89cc36aac00"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">ast_rtp::themssrc_valid</a></div><div class="ttdeci">unsigned int themssrc_valid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">res_rtp_asterisk.c:377</a></div></div>
<div class="ttc" id="structast__rtp_html_afe92c8ff0d37afbf84f8715f4144ca27"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">ast_rtp::themssrc</a></div><div class="ttdeci">unsigned int themssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">res_rtp_asterisk.c:376</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structrtp__ssrc__mapping_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../db/de7/structrtp__ssrc__mapping.html#a9e10385ac55d32d10ef322d1a08a699d">rtp_ssrc_mapping::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdoc">The received SSRC. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00328">res_rtp_asterisk.c:328</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a63f6b697a273c80e6b5f242f2b04c698"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63f6b697a273c80e6b5f242f2b04c698">&#9670;&nbsp;</a></span>ast_rtp_set_stream_num()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_set_stream_num </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stream_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08919">8919</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l08920"></a><span class="lineno"> 8920</span>&#160;{</div><div class="line"><a name="l08921"></a><span class="lineno"> 8921</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l08922"></a><span class="lineno"> 8922</span>&#160;</div><div class="line"><a name="l08923"></a><span class="lineno"> 8923</span>&#160;   rtp-&gt;stream_num = stream_num;</div><div class="line"><a name="l08924"></a><span class="lineno"> 8924</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abcb204a65c7f912f8ff993204370fad7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcb204a65c7f912f8ff993204370fad7">&#9670;&nbsp;</a></span>ast_rtp_stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08755">8755</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01080">ast_rtp_instance_set_remote_address</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00610">ast_sched_del()</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00080">AST_SCHED_DEL_UNREF</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00287">FLAG_NEED_MARKER_BIT</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l08756"></a><span class="lineno"> 8756</span>&#160;{</div><div class="line"><a name="l08757"></a><span class="lineno"> 8757</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l08758"></a><span class="lineno"> 8758</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> addr = { {0,} };</div><div class="line"><a name="l08759"></a><span class="lineno"> 8759</span>&#160;</div><div class="line"><a name="l08760"></a><span class="lineno"> 8760</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP)</span></div><div class="line"><a name="l08761"></a><span class="lineno"> 8761</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l08762"></a><span class="lineno"> 8762</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a11e2d4283c11790a27a0f899dab00e93">AST_SCHED_DEL_UNREF</a>(rtp-&gt;sched, rtp-&gt;rekeyid, <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(instance, -1));</div><div class="line"><a name="l08763"></a><span class="lineno"> 8763</span>&#160;</div><div class="line"><a name="l08764"></a><span class="lineno"> 8764</span>&#160;   dtls_srtp_stop_timeout_timer(instance, rtp, 0);</div><div class="line"><a name="l08765"></a><span class="lineno"> 8765</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;rtcp) {</div><div class="line"><a name="l08766"></a><span class="lineno"> 8766</span>&#160;      dtls_srtp_stop_timeout_timer(instance, rtp, 1);</div><div class="line"><a name="l08767"></a><span class="lineno"> 8767</span>&#160;   }</div><div class="line"><a name="l08768"></a><span class="lineno"> 8768</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l08769"></a><span class="lineno"> 8769</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08770"></a><span class="lineno"> 8770</span>&#160;</div><div class="line"><a name="l08771"></a><span class="lineno"> 8771</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;rtcp &amp;&amp; rtp-&gt;rtcp-&gt;schedid &gt; -1) {</div><div class="line"><a name="l08772"></a><span class="lineno"> 8772</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l08773"></a><span class="lineno"> 8773</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d00/sched_8h.html#a3a093634fe17bd0ac4eb6f518aa0782e">ast_sched_del</a>(rtp-&gt;sched, rtp-&gt;rtcp-&gt;schedid)) {</div><div class="line"><a name="l08774"></a><span class="lineno"> 8774</span>&#160;         <span class="comment">/* successfully cancelled scheduler entry. */</span></div><div class="line"><a name="l08775"></a><span class="lineno"> 8775</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(instance, -1);</div><div class="line"><a name="l08776"></a><span class="lineno"> 8776</span>&#160;      }</div><div class="line"><a name="l08777"></a><span class="lineno"> 8777</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l08778"></a><span class="lineno"> 8778</span>&#160;      rtp-&gt;rtcp-&gt;schedid = -1;</div><div class="line"><a name="l08779"></a><span class="lineno"> 8779</span>&#160;   }</div><div class="line"><a name="l08780"></a><span class="lineno"> 8780</span>&#160;</div><div class="line"><a name="l08781"></a><span class="lineno"> 8781</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;transport_wide_cc.schedid &gt; -1) {</div><div class="line"><a name="l08782"></a><span class="lineno"> 8782</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l08783"></a><span class="lineno"> 8783</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d00/sched_8h.html#a3a093634fe17bd0ac4eb6f518aa0782e">ast_sched_del</a>(rtp-&gt;sched, rtp-&gt;transport_wide_cc.schedid)) {</div><div class="line"><a name="l08784"></a><span class="lineno"> 8784</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(instance, -1);</div><div class="line"><a name="l08785"></a><span class="lineno"> 8785</span>&#160;      }</div><div class="line"><a name="l08786"></a><span class="lineno"> 8786</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l08787"></a><span class="lineno"> 8787</span>&#160;      rtp-&gt;transport_wide_cc.schedid = -1;</div><div class="line"><a name="l08788"></a><span class="lineno"> 8788</span>&#160;        }</div><div class="line"><a name="l08789"></a><span class="lineno"> 8789</span>&#160;</div><div class="line"><a name="l08790"></a><span class="lineno"> 8790</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;red) {</div><div class="line"><a name="l08791"></a><span class="lineno"> 8791</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l08792"></a><span class="lineno"> 8792</span>&#160;      <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(rtp-&gt;sched, rtp-&gt;red-&gt;schedid);</div><div class="line"><a name="l08793"></a><span class="lineno"> 8793</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l08794"></a><span class="lineno"> 8794</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(rtp-&gt;red);</div><div class="line"><a name="l08795"></a><span class="lineno"> 8795</span>&#160;      rtp-&gt;red = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08796"></a><span class="lineno"> 8796</span>&#160;   }</div><div class="line"><a name="l08797"></a><span class="lineno"> 8797</span>&#160;</div><div class="line"><a name="l08798"></a><span class="lineno"> 8798</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a>(instance, &amp;addr);</div><div class="line"><a name="l08799"></a><span class="lineno"> 8799</span>&#160;</div><div class="line"><a name="l08800"></a><span class="lineno"> 8800</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(rtp, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab7d9bd5ba01a9647e359799e0d201cbf">FLAG_NEED_MARKER_BIT</a>);</div><div class="line"><a name="l08801"></a><span class="lineno"> 8801</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="sched_8h_html_a11e2d4283c11790a27a0f899dab00e93"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a11e2d4283c11790a27a0f899dab00e93">AST_SCHED_DEL_UNREF</a></div><div class="ttdeci">#define AST_SCHED_DEL_UNREF(sched, id, refcall)</div><div class="ttdoc">schedule task to get deleted and call unref function </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00080">sched.h:80</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ab7d9bd5ba01a9647e359799e0d201cbf"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab7d9bd5ba01a9647e359799e0d201cbf">FLAG_NEED_MARKER_BIT</a></div><div class="ttdeci">#define FLAG_NEED_MARKER_BIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00287">res_rtp_asterisk.c:287</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a90c48c7f24206e8822bf520dae0a2478"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_set_remote_address(instance, address)</div><div class="ttdoc">Set the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01080">rtp_engine.h:1080</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="sched_8h_html_a3a093634fe17bd0ac4eb6f518aa0782e"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a3a093634fe17bd0ac4eb6f518aa0782e">ast_sched_del</a></div><div class="ttdeci">int ast_sched_del(struct ast_sched_context *con, int id) attribute_warn_unused_result</div><div class="ttdoc">Deletes a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00610">sched.c:610</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aefc58a7696f4b9ede26fe63fa5b96364"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefc58a7696f4b9ede26fe63fa5b96364">&#9670;&nbsp;</a></span>ast_rtp_stun_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_stun_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>suggestion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>username</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is NOT locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08740">8740</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00782">ast_sockaddr_from_sin</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00769">ast_sockaddr_to_sin</a>, <a class="el" href="../../d1/dbd/stun_8c_source.html#l00384">ast_stun_request()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">ast_rtp::s</a>.</p>
<div class="fragment"><div class="line"><a name="l08741"></a><span class="lineno"> 8741</span>&#160;{</div><div class="line"><a name="l08742"></a><span class="lineno"> 8742</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l08743"></a><span class="lineno"> 8743</span>&#160;   <span class="keyword">struct </span>sockaddr_in suggestion_tmp;</div><div class="line"><a name="l08744"></a><span class="lineno"> 8744</span>&#160;</div><div class="line"><a name="l08745"></a><span class="lineno"> 8745</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l08746"></a><span class="lineno"> 8746</span>&#160;<span class="comment">    * The instance should not be locked because we can block</span></div><div class="line"><a name="l08747"></a><span class="lineno"> 8747</span>&#160;<span class="comment">    * waiting for a STUN respone.</span></div><div class="line"><a name="l08748"></a><span class="lineno"> 8748</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l08749"></a><span class="lineno"> 8749</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a>(suggestion, &amp;suggestion_tmp);</div><div class="line"><a name="l08750"></a><span class="lineno"> 8750</span>&#160;   <a class="code" href="../../d3/d00/stun_8h.html#a494a72723299c0e75e1c2cf092135ea6">ast_stun_request</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>, &amp;suggestion_tmp, username, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l08751"></a><span class="lineno"> 8751</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a>(suggestion, &amp;suggestion_tmp);</div><div class="line"><a name="l08752"></a><span class="lineno"> 8752</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad68264a6784dc22570eda3cb447307f8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a></div><div class="ttdeci">#define ast_sockaddr_from_sin(addr, sin)</div><div class="ttdoc">Converts a struct sockaddr_in to a struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00782">netsock2.h:782</a></div></div>
<div class="ttc" id="stun_8h_html_a494a72723299c0e75e1c2cf092135ea6"><div class="ttname"><a href="../../d3/d00/stun_8h.html#a494a72723299c0e75e1c2cf092135ea6">ast_stun_request</a></div><div class="ttdeci">int ast_stun_request(int s, struct sockaddr_in *dst, const char *username, struct sockaddr_in *answer)</div><div class="ttdoc">Generic STUN request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dbd/stun_8c_source.html#l00384">stun.c:384</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa60da39edcabcec05ca9219c7b290395"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a></div><div class="ttdeci">#define ast_sockaddr_to_sin(addr, sin)</div><div class="ttdoc">Converts a struct ast_sockaddr to a struct sockaddr_in. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00769">netsock2.h:769</a></div></div>
<div class="ttc" id="structast__rtp_html_a339d22b3e442946380f98ed19e320db2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">ast_rtp::s</a></div><div class="ttdeci">int s</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">res_rtp_asterisk.c:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a05ce5de973f030a1c2766718581464d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05ce5de973f030a1c2766718581464d2">&#9670;&nbsp;</a></span>ast_rtp_update_source()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_rtp_update_source </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04348">4348</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02860">ast_debug_rtp</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00287">FLAG_NEED_MARKER_BIT</a>.</p>
<div class="fragment"><div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;{</div><div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;</div><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;   <span class="comment">/* We simply set this bit so that the next packet sent will have the marker bit turned on */</span></div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(rtp, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab7d9bd5ba01a9647e359799e0d201cbf">FLAG_NEED_MARKER_BIT</a>);</div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(3, <span class="stringliteral">&quot;(%p) RTP setting the marker bit due to a source update\n&quot;</span>, instance);</div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;</div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga669fb90e123085584d65608ef87b2fe4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a></div><div class="ttdeci">#define ast_debug_rtp(sublevel,...)</div><div class="ttdoc">Log debug level RTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02860">rtp_engine.h:2860</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ab7d9bd5ba01a9647e359799e0d201cbf"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab7d9bd5ba01a9647e359799e0d201cbf">FLAG_NEED_MARKER_BIT</a></div><div class="ttdeci">#define FLAG_NEED_MARKER_BIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00287">res_rtp_asterisk.c:287</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aac1f4d7457f54890cb39395406b37a22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac1f4d7457f54890cb39395406b37a22">&#9670;&nbsp;</a></span>ast_rtp_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_rtp_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05289">5289</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00517">ao2_replace</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00295">AST_CONTROL_VIDUPDATE</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02860">ast_debug_rtp</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00344">ast_format_can_be_smoothed()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00201">ast_format_cmp()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00359">ast_format_get_default_ms()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00374">ast_format_get_minimum_bytes()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00364">ast_format_get_minimum_ms()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00349">ast_format_get_smoother_flags()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00135">AST_FRAME_RTCP</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00114">AST_FRAME_TEXT</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">AST_FRAME_VIDEO</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">ast_frdup</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01569">ast_rtp_codecs_get_framing()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01928">ast_rtp_codecs_payload_code_tx()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00727">ast_rtp_instance_get_codecs()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00299">AST_RTP_RTCP_PSFB</a>, <a class="el" href="../../d6/d7f/smoother_8h_source.html#l00076">ast_smoother_feed</a>, <a class="el" href="../../d6/d7f/smoother_8h_source.html#l00081">ast_smoother_feed_be</a>, <a class="el" href="../../d6/d7f/smoother_8h_source.html#l00035">AST_SMOOTHER_FLAG_BE</a>, <a class="el" href="../../d6/d7f/smoother_8h_source.html#l00036">AST_SMOOTHER_FLAG_FORCED</a>, <a class="el" href="../../dc/dd7/smoother_8c_source.html#l00220">ast_smoother_free()</a>, <a class="el" href="../../dc/dd7/smoother_8c_source.html#l00108">ast_smoother_new()</a>, <a class="el" href="../../dc/dd7/smoother_8c_source.html#l00169">ast_smoother_read()</a>, <a class="el" href="../../dc/dd7/smoother_8c_source.html#l00123">ast_smoother_set_flags()</a>, <a class="el" href="../../dc/dd7/smoother_8c_source.html#l00128">ast_smoother_test_flag()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00047">ast_format::codec</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">ast_frame::offset</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05120">red_t140_to_red()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">rtp_raw_write()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05160">rtp_write_rtcp_fir()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05222">rtp_write_rtcp_psfb()</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08560">red_write()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08608">rtp_red_buffer()</a>.</p>
<div class="fragment"><div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;{</div><div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address = { {0,} };</div><div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>;</div><div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/d98/structast__format.html#a002bc95cb72ce2c09248462d935cf72f">codec</a>;</div><div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;</div><div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(instance, &amp;remote_address);</div><div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;</div><div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;   <span class="comment">/* If we don&#39;t actually know the remote address don&#39;t even bother doing anything */</span></div><div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;remote_address)) {</div><div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p) RTP no remote address on instance, so dropping frame\n&quot;</span>, instance);</div><div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;   }</div><div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;</div><div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;   <span class="comment">/* VP8: is this a request to send a RTCP FIR? */</span></div><div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;   <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a> &amp;&amp; frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a>) {</div><div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af468e412cbb41cc4b890cf12aebf02fe">rtp_write_rtcp_fir</a>(instance, rtp, &amp;remote_address);</div><div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a>) {</div><div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;      <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a02281c7f49b834e978a6fa7d7dd19de2">AST_RTP_RTCP_PSFB</a>) {</div><div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af265fda7047566e1da9fa1b391ec3c31">rtp_write_rtcp_psfb</a>(instance, rtp, frame, &amp;remote_address);</div><div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;      }</div><div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;   }</div><div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;</div><div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;   <span class="comment">/* If there is no data length we can&#39;t very well send the packet */</span></div><div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;   <span class="keywordflow">if</span> (!frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>) {</div><div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p) RTP received frame with no data for instance, so dropping frame\n&quot;</span>, instance);</div><div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;   }</div><div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;</div><div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;   <span class="comment">/* If the packet is not one our RTP stack supports bail out */</span></div><div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;   <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a> &amp;&amp; frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a> &amp;&amp; frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a>) {</div><div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;RTP can only send voice, video, and text\n&quot;</span>);</div><div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;   }</div><div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;</div><div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;red) {</div><div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;      <span class="comment">/* return 0; */</span></div><div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;      <span class="comment">/* no primary data or generations to send */</span></div><div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;      <span class="keywordflow">if</span> ((frame = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3c9ac7e749d6db9936d12d7549037954">red_t140_to_red</a>(rtp-&gt;red)) == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;   }</div><div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;</div><div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;   <span class="comment">/* Grab the subclass and look up the payload we are going to use */</span></div><div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;   codec = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a8631c44e7160622bcbdc6aea8b449e5f">ast_rtp_codecs_payload_code_tx</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(instance),</div><div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;      1, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, 0);</div><div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;   <span class="keywordflow">if</span> (codec &lt; 0) {</div><div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Don&#39;t know how to send format %s packets with RTP\n&quot;</span>,</div><div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;         <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;   }</div><div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;</div><div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;   <span class="comment">/* Note that we do not increase the ref count here as this pointer</span></div><div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;<span class="comment">    * will not be held by any thing explicitly. The format variable is</span></div><div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;<span class="comment">    * merely a convenience reference to frame-&gt;subclass.format */</span></div><div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;   format = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>;</div><div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(rtp-&gt;lasttxformat, format) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;      <span class="comment">/* Oh dear, if the format changed we will have to set up a new smoother */</span></div><div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p) RTP ooh, format changed from %s to %s\n&quot;</span>,</div><div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;         instance, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(rtp-&gt;lasttxformat),</div><div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;         <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(rtp-&gt;lasttxformat, format);</div><div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;smoother) {</div><div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;         <a class="code" href="../../d6/d7f/smoother_8h.html#a6d3b71e0a81af743bae6c33c02b64f1f">ast_smoother_free</a>(rtp-&gt;smoother);</div><div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;         rtp-&gt;smoother = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;      }</div><div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;   }</div><div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;</div><div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;   <span class="comment">/* If no smoother is present see if we have to set one up */</span></div><div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;smoother &amp;&amp; <a class="code" href="../../d0/d0a/format_8h.html#a3947136520bdababb2fa2af393386992">ast_format_can_be_smoothed</a>(format)) {</div><div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> smoother_flags = <a class="code" href="../../d0/d0a/format_8h.html#a0272246af9c0b43ac17fbefee22f6b2f">ast_format_get_smoother_flags</a>(format);</div><div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> framing_ms = <a class="code" href="../../d5/dde/rtp__engine_8h.html#aef5d988932736b654957f46ff4360889">ast_rtp_codecs_get_framing</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(instance));</div><div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;</div><div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;      <span class="keywordflow">if</span> (!framing_ms &amp;&amp; (smoother_flags &amp; <a class="code" href="../../d6/d7f/smoother_8h.html#a7e30324fe54c974ed1fa71d664237d76">AST_SMOOTHER_FLAG_FORCED</a>)) {</div><div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;         framing_ms = <a class="code" href="../../d0/d0a/format_8h.html#aa15010a220a06dae92ecc816dd5a0727">ast_format_get_default_ms</a>(format);</div><div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;      }</div><div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;</div><div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;      <span class="keywordflow">if</span> (framing_ms) {</div><div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;         rtp-&gt;smoother = <a class="code" href="../../d6/d7f/smoother_8h.html#a6f1c795e5db00c9eb553e540dce7a503">ast_smoother_new</a>((framing_ms * <a class="code" href="../../d0/d0a/format_8h.html#a447032b2d99bcec6c2210d649c46d9c4">ast_format_get_minimum_bytes</a>(format)) / <a class="code" href="../../d0/d0a/format_8h.html#a64282110de51eaa14b1aaf08d2a0dbe0">ast_format_get_minimum_ms</a>(format));</div><div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;         <span class="keywordflow">if</span> (!rtp-&gt;smoother) {</div><div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create smoother: format %s ms: %u len: %u\n&quot;</span>,</div><div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;               <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(format), framing_ms, <a class="code" href="../../d0/d0a/format_8h.html#a447032b2d99bcec6c2210d649c46d9c4">ast_format_get_minimum_bytes</a>(format));</div><div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;         }</div><div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;         <a class="code" href="../../d6/d7f/smoother_8h.html#a2bf0a4739b534e4f317230763ec3afcb">ast_smoother_set_flags</a>(rtp-&gt;smoother, smoother_flags);</div><div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;      }</div><div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;   }</div><div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;</div><div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;   <span class="comment">/* Feed audio frames into the actual function that will create a frame and send it */</span></div><div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;smoother) {</div><div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;</div><div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7f/smoother_8h.html#a3d6997c8a03e68d88c52f784c16c069f">ast_smoother_test_flag</a>(rtp-&gt;smoother, <a class="code" href="../../d6/d7f/smoother_8h.html#af2e180889cb2b85cd10823803b9eb005">AST_SMOOTHER_FLAG_BE</a>)) {</div><div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;         <a class="code" href="../../d6/d7f/smoother_8h.html#a3af01c93b369d5de7caccd2be0b97c4a">ast_smoother_feed_be</a>(rtp-&gt;smoother, frame);</div><div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;         <a class="code" href="../../d6/d7f/smoother_8h.html#aab5808a118c74febd13f39746bcce96c">ast_smoother_feed</a>(rtp-&gt;smoother, frame);</div><div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;      }</div><div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;</div><div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;      <span class="keywordflow">while</span> ((f = <a class="code" href="../../d6/d7f/smoother_8h.html#af8d6dcd265eaf403b1b1139770c885d8">ast_smoother_read</a>(rtp-&gt;smoother)) &amp;&amp; (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>)) {</div><div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e586786c824dc22c28692ba41646bbb">rtp_raw_write</a>(instance, f, codec);</div><div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;      }</div><div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;      <span class="keywordtype">int</span> hdrlen = 12;</div><div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;</div><div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;      <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">offset</a> &lt; hdrlen) {</div><div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;         f = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(frame);</div><div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;         f = frame;</div><div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;      }</div><div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;      <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>) {</div><div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e586786c824dc22c28692ba41646bbb">rtp_raw_write</a>(instance, f, codec);</div><div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;      }</div><div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;      <span class="keywordflow">if</span> (f != frame) {</div><div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;      }</div><div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;</div><div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;   }</div><div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;</div><div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a417ee8a61074ec7570971202908e2c4f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a></div><div class="ttdeci">#define ast_frdup(fr)</div><div class="ttdoc">Copies a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">include/asterisk/frame.h:585</a></div></div>
<div class="ttc" id="structast__frame_html_aed7ea92f45bd273dde380a45ddced592"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">ast_frame::offset</a></div><div class="ttdeci">int offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">include/asterisk/frame.h:179</a></div></div>
<div class="ttc" id="smoother_8h_html_aab5808a118c74febd13f39746bcce96c"><div class="ttname"><a href="../../d6/d7f/smoother_8h.html#aab5808a118c74febd13f39746bcce96c">ast_smoother_feed</a></div><div class="ttdeci">#define ast_smoother_feed(s, f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7f/smoother_8h_source.html#l00076">smoother.h:76</a></div></div>
<div class="ttc" id="smoother_8h_html_a6f1c795e5db00c9eb553e540dce7a503"><div class="ttname"><a href="../../d6/d7f/smoother_8h.html#a6f1c795e5db00c9eb553e540dce7a503">ast_smoother_new</a></div><div class="ttdeci">struct ast_smoother * ast_smoother_new(int bytes)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd7/smoother_8c_source.html#l00108">smoother.c:108</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af468e412cbb41cc4b890cf12aebf02fe"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af468e412cbb41cc4b890cf12aebf02fe">rtp_write_rtcp_fir</a></div><div class="ttdeci">static void rtp_write_rtcp_fir(struct ast_rtp_instance *instance, struct ast_rtp *rtp, struct ast_sockaddr *remote_address)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05160">res_rtp_asterisk.c:5160</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00114">include/asterisk/frame.h:114</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e586786c824dc22c28692ba41646bbb"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e586786c824dc22c28692ba41646bbb">rtp_raw_write</a></div><div class="ttdeci">static int rtp_raw_write(struct ast_rtp_instance *instance, struct ast_frame *frame, int codec)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">res_rtp_asterisk.c:4891</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0376aa2503a185437fab8cb0b7d674fb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * ast_rtp_instance_get_codecs(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the codecs structure of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00727">rtp_engine.c:727</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af265fda7047566e1da9fa1b391ec3c31"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af265fda7047566e1da9fa1b391ec3c31">rtp_write_rtcp_psfb</a></div><div class="ttdeci">static void rtp_write_rtcp_psfb(struct ast_rtp_instance *instance, struct ast_rtp *rtp, struct ast_frame *frame, struct ast_sockaddr *remote_address)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05222">res_rtp_asterisk.c:5222</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a8631c44e7160622bcbdc6aea8b449e5f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a8631c44e7160622bcbdc6aea8b449e5f">ast_rtp_codecs_payload_code_tx</a></div><div class="ttdeci">int ast_rtp_codecs_payload_code_tx(struct ast_rtp_codecs *codecs, int asterisk_format, const struct ast_format *format, int code)</div><div class="ttdoc">Retrieve a tx mapped payload type based on whether it is an Asterisk format and the code...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01928">rtp_engine.c:1928</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_aef5d988932736b654957f46ff4360889"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#aef5d988932736b654957f46ff4360889">ast_rtp_codecs_get_framing</a></div><div class="ttdeci">unsigned int ast_rtp_codecs_get_framing(struct ast_rtp_codecs *codecs)</div><div class="ttdoc">Get the framing used for a set of codecs. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01569">rtp_engine.c:1569</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="format_8h_html_a0272246af9c0b43ac17fbefee22f6b2f"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a0272246af9c0b43ac17fbefee22f6b2f">ast_format_get_smoother_flags</a></div><div class="ttdeci">int ast_format_get_smoother_flags(const struct ast_format *format)</div><div class="ttdoc">Get smoother flags for this format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00349">format.c:349</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="smoother_8h_html_a6d3b71e0a81af743bae6c33c02b64f1f"><div class="ttname"><a href="../../d6/d7f/smoother_8h.html#a6d3b71e0a81af743bae6c33c02b64f1f">ast_smoother_free</a></div><div class="ttdeci">void ast_smoother_free(struct ast_smoother *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd7/smoother_8c_source.html#l00220">smoother.c:220</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga669fb90e123085584d65608ef87b2fe4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a></div><div class="ttdeci">#define ast_debug_rtp(sublevel,...)</div><div class="ttdoc">Log debug level RTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02860">rtp_engine.h:2860</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="smoother_8h_html_a7e30324fe54c974ed1fa71d664237d76"><div class="ttname"><a href="../../d6/d7f/smoother_8h.html#a7e30324fe54c974ed1fa71d664237d76">AST_SMOOTHER_FLAG_FORCED</a></div><div class="ttdeci">#define AST_SMOOTHER_FLAG_FORCED</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7f/smoother_8h_source.html#l00036">smoother.h:36</a></div></div>
<div class="ttc" id="format_8h_html_a447032b2d99bcec6c2210d649c46d9c4"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a447032b2d99bcec6c2210d649c46d9c4">ast_format_get_minimum_bytes</a></div><div class="ttdeci">unsigned int ast_format_get_minimum_bytes(const struct ast_format *format)</div><div class="ttdoc">Get the minimum number of bytes expected in a frame for this format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00374">format.c:374</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00135">include/asterisk/frame.h:135</a></div></div>
<div class="ttc" id="format_8h_html_a3947136520bdababb2fa2af393386992"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a3947136520bdababb2fa2af393386992">ast_format_can_be_smoothed</a></div><div class="ttdeci">int ast_format_can_be_smoothed(const struct ast_format *format)</div><div class="ttdoc">Get whether or not the format can be smoothed. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00344">format.c:344</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="smoother_8h_html_a3af01c93b369d5de7caccd2be0b97c4a"><div class="ttname"><a href="../../d6/d7f/smoother_8h.html#a3af01c93b369d5de7caccd2be0b97c4a">ast_smoother_feed_be</a></div><div class="ttdeci">#define ast_smoother_feed_be(s, f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7f/smoother_8h_source.html#l00081">smoother.h:81</a></div></div>
<div class="ttc" id="structast__format_html_a002bc95cb72ce2c09248462d935cf72f"><div class="ttname"><a href="../../d0/d98/structast__format.html#a002bc95cb72ce2c09248462d935cf72f">ast_format::codec</a></div><div class="ttdeci">struct ast_codec * codec</div><div class="ttdoc">Pointer to the codec in use for this format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00047">format.c:47</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="format_8h_html_aa15010a220a06dae92ecc816dd5a0727"><div class="ttname"><a href="../../d0/d0a/format_8h.html#aa15010a220a06dae92ecc816dd5a0727">ast_format_get_default_ms</a></div><div class="ttdeci">unsigned int ast_format_get_default_ms(const struct ast_format *format)</div><div class="ttdoc">Get the default framing size (in milliseconds) for a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00359">format.c:359</a></div></div>
<div class="ttc" id="smoother_8h_html_a3d6997c8a03e68d88c52f784c16c069f"><div class="ttname"><a href="../../d6/d7f/smoother_8h.html#a3d6997c8a03e68d88c52f784c16c069f">ast_smoother_test_flag</a></div><div class="ttdeci">int ast_smoother_test_flag(struct ast_smoother *s, int flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd7/smoother_8c_source.html#l00128">smoother.c:128</a></div></div>
<div class="ttc" id="smoother_8h_html_af2e180889cb2b85cd10823803b9eb005"><div class="ttname"><a href="../../d6/d7f/smoother_8h.html#af2e180889cb2b85cd10823803b9eb005">AST_SMOOTHER_FLAG_BE</a></div><div class="ttdeci">#define AST_SMOOTHER_FLAG_BE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7f/smoother_8h_source.html#l00035">smoother.h:35</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00295">include/asterisk/frame.h:295</a></div></div>
<div class="ttc" id="smoother_8h_html_a2bf0a4739b534e4f317230763ec3afcb"><div class="ttname"><a href="../../d6/d7f/smoother_8h.html#a2bf0a4739b534e4f317230763ec3afcb">ast_smoother_set_flags</a></div><div class="ttdeci">void ast_smoother_set_flags(struct ast_smoother *smoother, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd7/smoother_8c_source.html#l00123">smoother.c:123</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa81c8462bd0574f4f9e09e71f2772f44"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a></div><div class="ttdeci">#define ao2_replace(dst, src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00517">astobj2.h:517</a></div></div>
<div class="ttc" id="smoother_8h_html_af8d6dcd265eaf403b1b1139770c885d8"><div class="ttname"><a href="../../d6/d7f/smoother_8h.html#af8d6dcd265eaf403b1b1139770c885d8">ast_smoother_read</a></div><div class="ttdeci">struct ast_frame * ast_smoother_read(struct ast_smoother *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd7/smoother_8c_source.html#l00169">smoother.c:169</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a02281c7f49b834e978a6fa7d7dd19de2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a02281c7f49b834e978a6fa7d7dd19de2">AST_RTP_RTCP_PSFB</a></div><div class="ttdeci">#define AST_RTP_RTCP_PSFB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00299">rtp_engine.h:299</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3c9ac7e749d6db9936d12d7549037954"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3c9ac7e749d6db9936d12d7549037954">red_t140_to_red</a></div><div class="ttdeci">static struct ast_frame * red_t140_to_red(struct rtp_red *red)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05120">res_rtp_asterisk.c:5120</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">include/asterisk/frame.h:103</a></div></div>
<div class="ttc" id="format_8h_html_a64282110de51eaa14b1aaf08d2a0dbe0"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a64282110de51eaa14b1aaf08d2a0dbe0">ast_format_get_minimum_ms</a></div><div class="ttdeci">unsigned int ast_format_get_minimum_ms(const struct ast_format *format)</div><div class="ttdoc">Get the minimum amount of media carried in this format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00364">format.c:364</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ca5bc2e876461441b96ea02dcd41f81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ca5bc2e876461441b96ea02dcd41f81">&#9670;&nbsp;</a></span>bridge_p2p_rtp_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_p2p_rtp_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>rtpheader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hdrlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06649">6649</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00517">ao2_replace</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02860">ast_debug_rtp</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02864">ast_debug_rtp_packet_is_allowed</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00201">ast_format_cmp()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00251">ast_format_none</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01975">ast_rtp_codecs_find_payload_code()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01479">ast_rtp_codecs_get_payload()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01928">ast_rtp_codecs_payload_code_tx()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00727">ast_rtp_instance_get_codecs()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00716">ast_rtp_instance_get_prop()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00115">AST_RTP_PROPERTY_NAT</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00441">DEBUG_ATLEAST</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00284">FLAG_NAT_ACTIVE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00285">FLAG_NAT_INACTIVE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00286">FLAG_NAT_INACTIVE_NOWARN</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00287">FLAG_NEED_MARKER_BIT</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00289">FLAG_REQ_LOCAL_BRIDGE_BIT</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/d89/codec__g726_8c_source.html#l00331">reconstruct()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">rtp_debug_test_addr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">rtp_sendto()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">ast_rtp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;{</div><div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *bridged;</div><div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;   <span class="keywordtype">int</span> res = 0, payload = 0, bridged_payload = 0, mark;</div><div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *, payload_type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/d89/codec__g726_8c.html#aab1f392cff37399fc43db0d4b2cc11c8">reconstruct</a> = ntohl(rtpheader[0]);</div><div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address = { {0,} };</div><div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;   <span class="keywordtype">int</span> ice;</div><div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> timestamp = ntohl(rtpheader[1]);</div><div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;</div><div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160;   <span class="comment">/* Get fields from packet */</span></div><div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160;   payload = (reconstruct &amp; 0x7f0000) &gt;&gt; 16;</div><div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;   mark = (reconstruct &amp; 0x800000) &gt;&gt; 23;</div><div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;</div><div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;   <span class="comment">/* Check what the payload value should be */</span></div><div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;   payload_type = <a class="code" href="../../d5/dde/rtp__engine_8h.html#abcc5bda5d149e63f9e2ab630b26fd66c">ast_rtp_codecs_get_payload</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(instance), payload);</div><div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;   <span class="keywordflow">if</span> (!payload_type) {</div><div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;   }</div><div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;</div><div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;   <span class="comment">/* Otherwise adjust bridged payload to match */</span></div><div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;   bridged_payload = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a8631c44e7160622bcbdc6aea8b449e5f">ast_rtp_codecs_payload_code_tx</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(instance1),</div><div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;      payload_type-&gt;asterisk_format, payload_type-&gt;format, payload_type-&gt;rtp_code);</div><div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;</div><div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;   <span class="comment">/* If no codec could be matched between instance and instance1, then somehow things were made incompatible while we were still bridged.  Bail. */</span></div><div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;   <span class="keywordflow">if</span> (bridged_payload &lt; 0) {</div><div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;   }</div><div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;</div><div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;   <span class="comment">/* If the payload coming in is not one of the negotiated ones then send it to the core, this will cause formats to change and the bridge to break */</span></div><div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a7a339b51a851d9fa454e48a38f69d9d7">ast_rtp_codecs_find_payload_code</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(instance1), bridged_payload) == -1) {</div><div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p, %p) RTP unsupported payload type received\n&quot;</span>, instance, instance1);</div><div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;   }</div><div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;</div><div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;<span class="comment">    * Even if we are no longer in dtmf, we could still be receiving</span></div><div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;<span class="comment">    * re-transmissions of the last dtmf end still.  Feed those to the</span></div><div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;<span class="comment">    * core so they can be filtered accordingly.</span></div><div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;last_end_timestamp.is_set &amp;&amp; rtp-&gt;last_end_timestamp.ts == timestamp) {</div><div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p, %p) RTP feeding packet with duplicate timestamp to core\n&quot;</span>, instance, instance1);</div><div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;   }</div><div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;</div><div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160;   <span class="keywordflow">if</span> (payload_type-&gt;asterisk_format) {</div><div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(rtp-&gt;lastrxformat, payload_type-&gt;format);</div><div class="line"><a name="l06698"></a><span class="lineno"> 6698</span>&#160;   }</div><div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160;</div><div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;<span class="comment">    * We have now determined that we need to send the RTP packet</span></div><div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160;<span class="comment">    * out the bridged instance to do local bridging so we must unlock</span></div><div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;<span class="comment">    * the receiving instance to prevent deadlock with the bridged</span></div><div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;<span class="comment">    * instance.</span></div><div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;<span class="comment">    * Technically we should grab a ref to instance1 so it won&#39;t go</span></div><div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;<span class="comment">    * away on us.  However, we should be safe because the bridged</span></div><div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;<span class="comment">    * instance won&#39;t change without both channels involved being</span></div><div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;<span class="comment">    * locked and we currently have the channel lock for the receiving</span></div><div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;<span class="comment">    * instance.</span></div><div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance1);</div><div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;</div><div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160;<span class="comment">    * Get the peer rtp pointer now to emphasize that using it</span></div><div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;<span class="comment">    * must happen while instance1 is locked.</span></div><div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;   bridged = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance1);</div><div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;</div><div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160;</div><div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;   <span class="comment">/* If bridged peer is in dtmf, feed all packets to core until it finishes to avoid infinite dtmf */</span></div><div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;   <span class="keywordflow">if</span> (bridged-&gt;sending_digit) {</div><div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p, %p) RTP Feeding packet to core until DTMF finishes\n&quot;</span>, instance, instance1);</div><div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance1);</div><div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;   }</div><div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160;</div><div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160;   <span class="keywordflow">if</span> (payload_type-&gt;asterisk_format) {</div><div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160;<span class="comment">       * If bridged peer has already received rtp, perform the asymmetric codec check</span></div><div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160;<span class="comment">       * if that feature has been activated</span></div><div class="line"><a name="l06734"></a><span class="lineno"> 6734</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;      <span class="keywordflow">if</span> (!bridged-&gt;asymmetric_codec</div><div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;         &amp;&amp; bridged-&gt;lastrxformat != <a class="code" href="../../db/d1c/format__cache_8h.html#a7c28268f53182d9b82ddd6a4e7c91fa2">ast_format_none</a></div><div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;         &amp;&amp; <a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(payload_type-&gt;format, bridged-&gt;lastrxformat) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p, %p) RTP asymmetric RTP codecs detected (TX: %s, RX: %s) sending frame to core\n&quot;</span>,</div><div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;            instance, instance1, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(payload_type-&gt;format),</div><div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(bridged-&gt;lastrxformat));</div><div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance1);</div><div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;      }</div><div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;</div><div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(bridged-&gt;lasttxformat, payload_type-&gt;format);</div><div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;   }</div><div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;</div><div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(instance1, &amp;remote_address);</div><div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;</div><div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;remote_address)) {</div><div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(5, <span class="stringliteral">&quot;(%p, %p) RTP remote address is null, most likely RTP has been stopped\n&quot;</span>,</div><div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;         instance, instance1);</div><div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance1);</div><div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;   }</div><div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;</div><div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;   <span class="comment">/* If the marker bit has been explicitly set turn it on */</span></div><div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(bridged, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab7d9bd5ba01a9647e359799e0d201cbf">FLAG_NEED_MARKER_BIT</a>)) {</div><div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;      mark = 1;</div><div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(bridged, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab7d9bd5ba01a9647e359799e0d201cbf">FLAG_NEED_MARKER_BIT</a>);</div><div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;   }</div><div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;</div><div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;   <span class="comment">/* Set the marker bit for the first local bridged packet which has the first bridged peer&#39;s SSRC. */</span></div><div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(bridged, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abd9786ad278407e1a62f847e4f6434a7">FLAG_REQ_LOCAL_BRIDGE_BIT</a>)) {</div><div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;      mark = 1;</div><div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(bridged, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abd9786ad278407e1a62f847e4f6434a7">FLAG_REQ_LOCAL_BRIDGE_BIT</a>);</div><div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;   }</div><div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;</div><div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;   <span class="comment">/* Reconstruct part of the packet */</span></div><div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;   reconstruct &amp;= 0xFF80FFFF;</div><div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;   reconstruct |= (bridged_payload &lt;&lt; 16);</div><div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;   reconstruct |= (mark &lt;&lt; 23);</div><div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;   rtpheader[0] = htonl(reconstruct);</div><div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;</div><div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;   <span class="keywordflow">if</span> (mark) {</div><div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;      <span class="comment">/* make this rtp instance aware of the new ssrc it is sending */</span></div><div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;      bridged-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a> = ntohl(rtpheader[2]);</div><div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;   }</div><div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;</div><div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;   <span class="comment">/* Send the packet back out */</span></div><div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;   res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a>(instance1, (<span class="keywordtype">void</span> *)rtpheader, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, 0, &amp;remote_address, &amp;ice);</div><div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a>(instance1, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a>) || (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a>(instance1, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a>) &amp;&amp; (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(bridged, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab67e21f67a96dd6a9e1b0450ecddecf3">FLAG_NAT_ACTIVE</a>) == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab67e21f67a96dd6a9e1b0450ecddecf3">FLAG_NAT_ACTIVE</a>))) {</div><div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;            <span class="stringliteral">&quot;RTP Transmission error of packet to %s: %s\n&quot;</span>,</div><div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address),</div><div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160;            strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(bridged, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab67e21f67a96dd6a9e1b0450ecddecf3">FLAG_NAT_ACTIVE</a>) == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a7ea8f10bd8b1fab6990526c3271a7b59">FLAG_NAT_INACTIVE</a>) || <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a>) &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(bridged, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad2adc4c49cf65121c15dc838f43c6cb0">FLAG_NAT_INACTIVE_NOWARN</a>)) {</div><div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a> || <a class="code" href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a>(1)) {</div><div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;               <span class="stringliteral">&quot;RTP NAT: Can&#39;t write RTP to private &quot;</span></div><div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;               <span class="stringliteral">&quot;address %s, waiting for other end to &quot;</span></div><div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;               <span class="stringliteral">&quot;send audio...\n&quot;</span>,</div><div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;               <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address));</div><div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;         }</div><div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(bridged, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad2adc4c49cf65121c15dc838f43c6cb0">FLAG_NAT_INACTIVE_NOWARN</a>);</div><div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;      }</div><div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance1);</div><div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;   }</div><div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;</div><div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a>(&amp;remote_address)) {</div><div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Sent RTP P2P packet to %s%s (type %-2.2d, len %-6.6d)\n&quot;</span>,</div><div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;             <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address),</div><div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;             ice ? <span class="stringliteral">&quot; (via ICE)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;             bridged_payload, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> - hdrlen);</div><div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;   }</div><div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;</div><div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance1);</div><div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abcc5bda5d149e63f9e2ab630b26fd66c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abcc5bda5d149e63f9e2ab630b26fd66c">ast_rtp_codecs_get_payload</a></div><div class="ttdeci">struct ast_rtp_payload_type * ast_rtp_codecs_get_payload(struct ast_rtp_codecs *codecs, int payload)</div><div class="ttdoc">Retrieve rx payload mapped information by payload type. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01479">rtp_engine.c:1479</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0376aa2503a185437fab8cb0b7d674fb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * ast_rtp_instance_get_codecs(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the codecs structure of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00727">rtp_engine.c:727</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__rtp__payload__type_html"><div class="ttname"><a href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00275">rtp_engine.h:275</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="format__cache_8h_html_a7c28268f53182d9b82ddd6a4e7c91fa2"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a7c28268f53182d9b82ddd6a4e7c91fa2">ast_format_none</a></div><div class="ttdeci">struct ast_format * ast_format_none</div><div class="ttdoc">Built-in &quot;null&quot; format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00251">format_cache.c:251</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a8631c44e7160622bcbdc6aea8b449e5f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a8631c44e7160622bcbdc6aea8b449e5f">ast_rtp_codecs_payload_code_tx</a></div><div class="ttdeci">int ast_rtp_codecs_payload_code_tx(struct ast_rtp_codecs *codecs, int asterisk_format, const struct ast_format *format, int code)</div><div class="ttdoc">Retrieve a tx mapped payload type based on whether it is an Asterisk format and the code...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01928">rtp_engine.c:1928</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ab67e21f67a96dd6a9e1b0450ecddecf3"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab67e21f67a96dd6a9e1b0450ecddecf3">FLAG_NAT_ACTIVE</a></div><div class="ttdeci">#define FLAG_NAT_ACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00284">res_rtp_asterisk.c:284</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac963384d2cd5bf0a453061cc6889a44b"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a></div><div class="ttdeci">static int rtp_debug_test_addr(struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">res_rtp_asterisk.c:2746</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad2adc4c49cf65121c15dc838f43c6cb0"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad2adc4c49cf65121c15dc838f43c6cb0">FLAG_NAT_INACTIVE_NOWARN</a></div><div class="ttdeci">#define FLAG_NAT_INACTIVE_NOWARN</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00286">res_rtp_asterisk.c:286</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00115">rtp_engine.h:115</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga669fb90e123085584d65608ef87b2fe4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a></div><div class="ttdeci">#define ast_debug_rtp(sublevel,...)</div><div class="ttdoc">Log debug level RTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02860">rtp_engine.h:2860</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ab7d9bd5ba01a9647e359799e0d201cbf"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab7d9bd5ba01a9647e359799e0d201cbf">FLAG_NEED_MARKER_BIT</a></div><div class="ttdeci">#define FLAG_NEED_MARKER_BIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00287">res_rtp_asterisk.c:287</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga5009aeec1269fecc5f4e04c1c479116d"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a></div><div class="ttdeci">#define ast_debug_rtp_packet_is_allowed</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02864">rtp_engine.h:2864</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="codec__g726_8c_html_aab1f392cff37399fc43db0d4b2cc11c8"><div class="ttname"><a href="../../d0/d89/codec__g726_8c.html#aab1f392cff37399fc43db0d4b2cc11c8">reconstruct</a></div><div class="ttdeci">static int reconstruct(int sign, int dqln, int y)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/codec__g726_8c_source.html#l00331">codec_g726.c:331</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa81c8462bd0574f4f9e09e71f2772f44"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a></div><div class="ttdeci">#define ao2_replace(dst, src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00517">astobj2.h:517</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ade1c64796fc8534818c62a28b95bcd38"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a></div><div class="ttdeci">static int rtp_sendto(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int *ice)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">res_rtp_asterisk.c:3309</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_abd9786ad278407e1a62f847e4f6434a7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#abd9786ad278407e1a62f847e4f6434a7">FLAG_REQ_LOCAL_BRIDGE_BIT</a></div><div class="ttdeci">#define FLAG_REQ_LOCAL_BRIDGE_BIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00289">res_rtp_asterisk.c:289</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2a2d35167e5880fdd5ec8d7df44f18b1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a></div><div class="ttdeci">int ast_rtp_instance_get_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property)</div><div class="ttdoc">Get the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00716">rtp_engine.c:716</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a7a339b51a851d9fa454e48a38f69d9d7"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a7a339b51a851d9fa454e48a38f69d9d7">ast_rtp_codecs_find_payload_code</a></div><div class="ttdeci">int ast_rtp_codecs_find_payload_code(struct ast_rtp_codecs *codecs, int payload)</div><div class="ttdoc">Search for the tx payload type in the ast_rtp_codecs structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01975">rtp_engine.c:1975</a></div></div>
<div class="ttc" id="logger_8h_html_a33f6031de4ab6d1406465a7a3ee18e86"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a></div><div class="ttdeci">#define DEBUG_ATLEAST(level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00441">logger.h:441</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a7ea8f10bd8b1fab6990526c3271a7b59"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a7ea8f10bd8b1fab6990526c3271a7b59">FLAG_NAT_INACTIVE</a></div><div class="ttdeci">#define FLAG_NAT_INACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00285">res_rtp_asterisk.c:285</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a82df1dfe66fb8ab6832b5b8e9fa84d42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82df1dfe66fb8ab6832b5b8e9fa84d42">&#9670;&nbsp;</a></span>calc_mean_and_standard_deviation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void calc_mean_and_standard_deviation </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>new_sample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>mean</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>std_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03332">3332</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00260">ast_rtp_ioqueue_thread::count</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05413">calc_rxstamp()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04428">calculate_lost_packet_statistics()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05824">update_jitter_stats()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05848">update_lost_stats()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05768">update_rtt_stats()</a>.</p>
<div class="fragment"><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;{</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;   <span class="keywordtype">double</span> delta1;</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;   <span class="keywordtype">double</span> delta2;</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;   <span class="comment">/* First convert the standard deviation back into a sum of squares. */</span></div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;   <span class="keywordtype">double</span> last_sum_of_squares = (*std_dev) * (*std_dev) * (*count ?: 1);</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;   <span class="keywordflow">if</span> (++(*count) == 0) {</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;      <span class="comment">/* Avoid potential divide by zero on an overflow */</span></div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;      *count = 1;</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;   }</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;<span class="comment">    * Below is an implementation of Welford&#39;s online algorithm [1] for calculating</span></div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;<span class="comment">    * mean and variance in a single pass.</span></div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;<span class="comment">    * [1] https://en.wikipedia.org/wiki/Algorithms_for_calculating_variance</span></div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;   delta1 = new_sample - *mean;</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;   *mean += (delta1 / *count);</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;   delta2 = new_sample - *mean;</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;   <span class="comment">/* Now calculate the new variance, and subsequent standard deviation */</span></div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;   *std_dev = sqrt((last_sum_of_squares + (delta1 * delta2)) / *count);</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a8c81edd11824e8abc1d749ef12ebcba5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c81edd11824e8abc1d749ef12ebcba5">&#9670;&nbsp;</a></span>calc_rxstamp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void calc_rxstamp </td>
          <td>(</td>
          <td class="paramtype">struct timeval *&#160;</td>
          <td class="paramname"><em>tv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mark</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05413">5413</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l04030">ast_rtp_get_rate()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00238">ast_samp2tv()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02298">ast_tvsub()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03332">calc_mean_and_standard_deviation()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00049">d</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">ast_rtp::f</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">ast_rtp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;{</div><div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;   <span class="keyword">struct </span>timeval now;</div><div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;   <span class="keyword">struct </span>timeval <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;   <span class="keywordtype">double</span> transit;</div><div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;   <span class="keywordtype">double</span> current_time;</div><div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;   <span class="keywordtype">double</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>;</div><div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;   <span class="keywordtype">double</span> dtv;</div><div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;   <span class="keywordtype">double</span> prog;</div><div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;   <span class="keywordtype">int</span> rate = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;</div><div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;   <span class="keywordflow">if</span> ((!rtp-&gt;rxcore.tv_sec &amp;&amp; !rtp-&gt;rxcore.tv_usec) || mark) {</div><div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;      gettimeofday(&amp;rtp-&gt;rxcore, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;      rtp-&gt;drxcore = (double) rtp-&gt;rxcore.tv_sec + (<span class="keywordtype">double</span>) rtp-&gt;rxcore.tv_usec / 1000000;</div><div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;      <span class="comment">/* map timestamp to a real time */</span></div><div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;      rtp-&gt;seedrxts = timestamp; <span class="comment">/* Their RTP timestamp started with this */</span></div><div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;      <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> = <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(timestamp, rate);</div><div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;      rtp-&gt;rxcore = <a class="code" href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a>(rtp-&gt;rxcore, <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>);</div><div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;      <span class="comment">/* Round to 0.1ms for nice, pretty timestamps */</span></div><div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;      rtp-&gt;rxcore.tv_usec -= rtp-&gt;rxcore.tv_usec % 100;</div><div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;   }</div><div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;</div><div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;   gettimeofday(&amp;now,<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;   <span class="comment">/* rxcore is the mapping between the RTP timestamp and _our_ real time from gettimeofday() */</span></div><div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;   <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> = <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(timestamp, rate);</div><div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;   *tv = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(rtp-&gt;rxcore, <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>);</div><div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;</div><div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;   prog = (double)((timestamp-rtp-&gt;seedrxts)/(float)(rate));</div><div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;   dtv = (double)rtp-&gt;drxcore + (<span class="keywordtype">double</span>)(prog);</div><div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;   current_time = (double)now.tv_sec + (<span class="keywordtype">double</span>)now.tv_usec/1000000;</div><div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;   transit = current_time - dtv;</div><div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;   d = transit - rtp-&gt;rxtransit;</div><div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;   rtp-&gt;rxtransit = transit;</div><div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;   <span class="keywordflow">if</span> (d&lt;0) {</div><div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;      d=-<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>;</div><div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;   }</div><div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;   rtp-&gt;rxjitter += (1./16.) * (d - rtp-&gt;rxjitter);</div><div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;rtcp) {</div><div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;rxjitter &gt; rtp-&gt;rtcp-&gt;maxrxjitter)</div><div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;         rtp-&gt;rtcp-&gt;maxrxjitter = rtp-&gt;rxjitter;</div><div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;rtcp-&gt;rxjitter_count == 1)</div><div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;         rtp-&gt;rtcp-&gt;minrxjitter = rtp-&gt;rxjitter;</div><div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;rtcp &amp;&amp; rtp-&gt;rxjitter &lt; rtp-&gt;rtcp-&gt;minrxjitter)</div><div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;         rtp-&gt;rtcp-&gt;minrxjitter = rtp-&gt;rxjitter;</div><div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;</div><div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a82df1dfe66fb8ab6832b5b8e9fa84d42">calc_mean_and_standard_deviation</a>(rtp-&gt;rxjitter, &amp;rtp-&gt;rtcp-&gt;normdev_rxjitter,</div><div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;         &amp;rtp-&gt;rtcp-&gt;stdev_rxjitter, &amp;rtp-&gt;rtcp-&gt;rxjitter_count);</div><div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;   }</div><div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;}</div><div class="ttc" id="test__linkedlists_8c_html_a156f09c32102fa036620ad75c3ee4fbf"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a></div><div class="ttdeci">static struct test_val d</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00049">test_linkedlists.c:49</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a82df1dfe66fb8ab6832b5b8e9fa84d42"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a82df1dfe66fb8ab6832b5b8e9fa84d42">calc_mean_and_standard_deviation</a></div><div class="ttdeci">static void calc_mean_and_standard_deviation(double new_sample, double *mean, double *std_dev, unsigned int *count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03332">res_rtp_asterisk.c:3332</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="time_8h_html_a1d774df72e3dbb623475783e06ce4f61"><div class="ttname"><a href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a></div><div class="ttdeci">struct timeval ast_samp2tv(unsigned int _nsamp, unsigned int _rate)</div><div class="ttdoc">Returns a timeval corresponding to the duration of n samples at rate r. Useful to convert samples to ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00238">time.h:238</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga85ebb1735a6e9ce14a033b479076aaed"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a></div><div class="ttdeci">int ast_rtp_get_rate(const struct ast_format *format)</div><div class="ttdoc">Retrieve the sample rate of a format according to RTP specifications. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l04030">rtp_engine.c:4030</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="structast__rtp_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">ast_rtp::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">res_rtp_asterisk.c:370</a></div></div>
<div class="ttc" id="time_8h_html_aa13b651c18bc6004cab21ac041d44dd8"><div class="ttname"><a href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a></div><div class="ttdeci">struct timeval ast_tvsub(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the difference of two timevals a - b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02298">extconf.c:2298</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4c3a6d3e3a2ffc5044526e5db91fb6b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c3a6d3e3a2ffc5044526e5db91fb6b5">&#9670;&nbsp;</a></span>calc_txstamp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int calc_txstamp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval *&#160;</td>
          <td class="paramname"><em>delivery</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03716">3716</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, and <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04134">ast_rtp_dtmf_begin()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04209">ast_rtp_dtmf_continuation()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04255">ast_rtp_dtmf_end_with_duration()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">rtp_raw_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;{</div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;   <span class="keyword">struct </span>timeval t;</div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;   <span class="keywordtype">long</span> ms;</div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(rtp-&gt;txcore)) {</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;      rtp-&gt;txcore = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;      rtp-&gt;txcore.tv_usec -= rtp-&gt;txcore.tv_usec % 20000;</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;   }</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;   t = (delivery &amp;&amp; !<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(*delivery)) ? *delivery : <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;   <span class="keywordflow">if</span> ((ms = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(t, rtp-&gt;txcore)) &lt; 0) {</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;      ms = 0;</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;   }</div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;   rtp-&gt;txcore = t;</div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;   <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) ms;</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;}</div><div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5b8b24cbfebc4c43f748c47fe467320d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b8b24cbfebc4c43f748c47fe467320d">&#9670;&nbsp;</a></span>calculate_lost_packet_statistics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void calculate_lost_packet_statistics </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>lost_packets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>fraction_lost</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04428">4428</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03332">calc_mean_and_standard_deviation()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00383">ast_rtp::lastrxseqno</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04491">ast_rtcp_generate_report()</a>.</p>
<div class="fragment"><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;{</div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> extended_seq_no;</div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> expected_packets;</div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> expected_interval;</div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> received_interval;</div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;   <span class="keywordtype">int</span> lost_interval;</div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;</div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;   <span class="comment">/* Compute statistics */</span></div><div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;   extended_seq_no = rtp-&gt;cycles + rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a184e1597cfcf7b28d1cf5d4857892a91">lastrxseqno</a>;</div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;   expected_packets = extended_seq_no - rtp-&gt;seedrxseqno + 1;</div><div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;rxcount &gt; expected_packets) {</div><div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;      expected_packets += rtp-&gt;rxcount - expected_packets;</div><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;   }</div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;   *lost_packets = expected_packets - rtp-&gt;rxcount;</div><div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;   expected_interval = expected_packets - rtp-&gt;rtcp-&gt;expected_prior;</div><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;   received_interval = rtp-&gt;rxcount - rtp-&gt;rtcp-&gt;received_prior;</div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;   <span class="keywordflow">if</span> (received_interval &gt; expected_interval) {</div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;      <span class="comment">/* If we receive some late packets it is possible for the packets</span></div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;<span class="comment">       * we received in this interval to exceed the number we expected.</span></div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;<span class="comment">       * We update the expected so that the packet loss calculations</span></div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;<span class="comment">       * show that no packets are lost.</span></div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;      expected_interval = received_interval;</div><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;   }</div><div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;   lost_interval = expected_interval - received_interval;</div><div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;   <span class="keywordflow">if</span> (expected_interval == 0 || lost_interval &lt;= 0) {</div><div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;      *fraction_lost = 0;</div><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;      *fraction_lost = (lost_interval &lt;&lt; 8) / expected_interval;</div><div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;   }</div><div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;</div><div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;   <span class="comment">/* Update RTCP statistics */</span></div><div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;   rtp-&gt;rtcp-&gt;received_prior = rtp-&gt;rxcount;</div><div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;   rtp-&gt;rtcp-&gt;expected_prior = expected_packets;</div><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;</div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;<span class="comment">    * While rxlost represents the number of packets lost since the last report was sent, for</span></div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;<span class="comment">    * the calculations below it should be thought of as a single sample. Thus min/max are the</span></div><div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;<span class="comment">    * lowest/highest sample value seen, and the mean is the average number of packets lost</span></div><div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;<span class="comment">    * between each report. As such rxlost_count only needs to be incremented per report.</span></div><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;   <span class="keywordflow">if</span> (lost_interval &lt;= 0) {</div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;      rtp-&gt;rtcp-&gt;rxlost = 0;</div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;      rtp-&gt;rtcp-&gt;rxlost = lost_interval;</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;   }</div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;rtcp-&gt;rxlost_count == 0) {</div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;      rtp-&gt;rtcp-&gt;minrxlost = rtp-&gt;rtcp-&gt;rxlost;</div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;   }</div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;   <span class="keywordflow">if</span> (lost_interval &amp;&amp; lost_interval &lt; rtp-&gt;rtcp-&gt;minrxlost) {</div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;      rtp-&gt;rtcp-&gt;minrxlost = rtp-&gt;rtcp-&gt;rxlost;</div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;   }</div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;   <span class="keywordflow">if</span> (lost_interval &gt; rtp-&gt;rtcp-&gt;maxrxlost) {</div><div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;      rtp-&gt;rtcp-&gt;maxrxlost = rtp-&gt;rtcp-&gt;rxlost;</div><div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;   }</div><div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;</div><div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a82df1dfe66fb8ab6832b5b8e9fa84d42">calc_mean_and_standard_deviation</a>(rtp-&gt;rtcp-&gt;rxlost, &amp;rtp-&gt;rtcp-&gt;normdev_rxlost,</div><div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;      &amp;rtp-&gt;rtcp-&gt;stdev_rxlost, &amp;rtp-&gt;rtcp-&gt;rxlost_count);</div><div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a82df1dfe66fb8ab6832b5b8e9fa84d42"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a82df1dfe66fb8ab6832b5b8e9fa84d42">calc_mean_and_standard_deviation</a></div><div class="ttdeci">static void calc_mean_and_standard_deviation(double new_sample, double *mean, double *std_dev, unsigned int *count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03332">res_rtp_asterisk.c:3332</a></div></div>
<div class="ttc" id="structast__rtp_html_a184e1597cfcf7b28d1cf5d4857892a91"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a184e1597cfcf7b28d1cf5d4857892a91">ast_rtp::lastrxseqno</a></div><div class="ttdeci">int lastrxseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00383">res_rtp_asterisk.c:383</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a83943ef00898b267fa0cddf6db6fd937"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83943ef00898b267fa0cddf6db6fd937">&#9670;&nbsp;</a></span>compare_by_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int compare_by_value </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>elem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to compare an elem in a vector by value. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03039">3039</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;{</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;   <span class="keywordflow">return</span> elem - <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;}</div><div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d07f83ec38c7407d5c3e98936269221"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d07f83ec38c7407d5c3e98936269221">&#9670;&nbsp;</a></span>create_dtmf_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* create_dtmf_frame </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">ast_frame_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>compensate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05463">5463</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00286">AST_CONTROL_FLASH</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02860">ast_debug_rtp</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">AST_FRAME_DTMF_BEGIN</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">AST_FRAME_DTMF_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00438">AST_LIST_NEXT</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00128">ast_tvcmp()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">ast_rtp::f</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">ast_frame::mallocd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">ast_frame::src</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">ast_rtp_interpret()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05644">process_dtmf_cisco()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05506">process_dtmf_rfc2833()</a>.</p>
<div class="fragment"><div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;{</div><div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address = { {0,} };</div><div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;</div><div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(instance, &amp;remote_address);</div><div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;</div><div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;   <span class="keywordflow">if</span> (((compensate &amp;&amp; <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>) || (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a>)) &amp;&amp; <a class="code" href="../../de/df7/time_8h.html#a6daa33e2052acd094bb63e78aba29733">ast_tvcmp</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), rtp-&gt;dtmfmute) &lt; 0) {</div><div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p) RTP ignore potential DTMF echo from &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;         instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address));</div><div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;      rtp-&gt;resp = 0;</div><div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;      rtp-&gt;dtmfsamples = 0;</div><div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a> &amp;&amp; rtp-&gt;resp == <span class="charliteral">&#39;X&#39;</span>) {</div><div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p) RTP ignore flash begin from &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;         instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address));</div><div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;      rtp-&gt;resp = 0;</div><div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;      rtp-&gt;dtmfsamples = 0;</div><div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;   }</div><div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;</div><div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;resp == <span class="charliteral">&#39;X&#39;</span>) {</div><div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p) RTP creating flash Frame at %s\n&quot;</span>,</div><div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;         instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address));</div><div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>;</div><div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a>;</div><div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p) RTP creating %s DTMF Frame: %d (%c), at %s\n&quot;</span>,</div><div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;         instance, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a> ? <span class="stringliteral">&quot;END&quot;</span> : <span class="stringliteral">&quot;BEGIN&quot;</span>,</div><div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;         rtp-&gt;resp, rtp-&gt;resp,</div><div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address));</div><div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = rtp-&gt;resp;</div><div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;   }</div><div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = 0;</div><div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = 0;</div><div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">mallocd</a> = 0;</div><div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a> = <span class="stringliteral">&quot;RTP&quot;</span>;</div><div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(&amp;rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;</div><div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;   <span class="keywordflow">return</span> &amp;rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>;</div><div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00286">include/asterisk/frame.h:286</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ae234825bcb65b88c0554b995ff1b8ba6"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a></div><div class="ttdeci">#define AST_LIST_NEXT(elm, field)</div><div class="ttdoc">Returns the next entry in the list after the given entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00438">linkedlists.h:438</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="structast__frame_html_af51e37c9331049b1e3d250a7c8bc3c26"><div class="ttname"><a href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">ast_frame::src</a></div><div class="ttdeci">const char * src</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">include/asterisk/frame.h:181</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga669fb90e123085584d65608ef87b2fe4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a></div><div class="ttdeci">#define ast_debug_rtp(sublevel,...)</div><div class="ttdoc">Log debug level RTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02860">rtp_engine.h:2860</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="time_8h_html_a6daa33e2052acd094bb63e78aba29733"><div class="ttname"><a href="../../de/df7/time_8h.html#a6daa33e2052acd094bb63e78aba29733">ast_tvcmp</a></div><div class="ttdeci">int ast_tvcmp(struct timeval _a, struct timeval _b)</div><div class="ttdoc">Compres two struct timeval instances returning -1, 0, 1 if the first arg is smaller, equal or greater to the second. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00128">time.h:128</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">include/asterisk/frame.h:99</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__rtp_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">ast_rtp::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">res_rtp_asterisk.c:370</a></div></div>
<div class="ttc" id="structast__frame_html_aed16590d48f41d89f31e0cf347f5cd99"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">ast_frame::mallocd</a></div><div class="ttdeci">int mallocd</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">include/asterisk/frame.h:175</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">include/asterisk/frame.h:125</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a64f68b734a7edd69efce133ae28e7d39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64f68b734a7edd69efce133ae28e7d39">&#9670;&nbsp;</a></span>create_new_socket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int create_new_socket </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>af</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03360">3360</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l01043">ast_socket_nonblock</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08303">ast_rtp_prop_set()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">rtp_allocate_transport()</a>.</p>
<div class="fragment"><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;{</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;   <span class="keywordtype">int</span> sock = <a class="code" href="../../d5/d60/utils_8h.html#a4aacbe2dadb9b8befc5a76765ea6d14b">ast_socket_nonblock</a>(af, SOCK_DGRAM, 0);</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;   <span class="keywordflow">if</span> (sock &lt; 0) {</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to allocate %s socket: %s\n&quot;</span>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;      <span class="keywordflow">return</span> sock;</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;   }</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;<span class="preprocessor">#ifdef SO_NO_CHECK</span></div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;   <span class="keywordflow">if</span> (nochecksums) {</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;      setsockopt(sock, SOL_SOCKET, SO_NO_CHECK, &amp;nochecksums, <span class="keyword">sizeof</span>(nochecksums));</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;   }</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;   <span class="keywordflow">return</span> sock;</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="utils_8h_html_a4aacbe2dadb9b8befc5a76765ea6d14b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4aacbe2dadb9b8befc5a76765ea6d14b">ast_socket_nonblock</a></div><div class="ttdeci">#define ast_socket_nonblock(domain, type, protocol)</div><div class="ttdoc">Create a non-blocking socket. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l01043">utils.h:1043</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3fa482ae7eda83a3e17baa26c4db9445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fa482ae7eda83a3e17baa26c4db9445">&#9670;&nbsp;</a></span>drop_packets_data_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void drop_packets_data_update </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>tv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07553">7553</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">ast_random()</a>, <a class="el" href="../../df/d73/time_8c_source.html#l00112">ast_time_create_by_unit()</a>, <a class="el" href="../../df/d73/time_8c_source.html#l00089">ast_time_tv_to_usec()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07551">drop_packets_data</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07542">rtp_drop_packets_data::interval</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07544">rtp_drop_packets_data::next</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07539">rtp_drop_packets_data::num_dropped</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07537">rtp_drop_packets_data::num_to_drop</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00246">TIME_UNIT_MICROSECOND</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07534">rtp_drop_packets_data::use_random_interval</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07532">rtp_drop_packets_data::use_random_num</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09213">handle_cli_rtp_drop_incoming_packets()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07583">should_drop_packets()</a>.</p>
<div class="fragment"><div class="line"><a name="l07554"></a><span class="lineno"> 7554</span>&#160;{</div><div class="line"><a name="l07555"></a><span class="lineno"> 7555</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l07556"></a><span class="lineno"> 7556</span>&#160;<span class="comment">    * num_dropped keeps up with the number of packets that have been dropped for a</span></div><div class="line"><a name="l07557"></a><span class="lineno"> 7557</span>&#160;<span class="comment">    * given interval. Once the specified number of packets have been dropped and</span></div><div class="line"><a name="l07558"></a><span class="lineno"> 7558</span>&#160;<span class="comment">    * the next time interval is ready to trigger then set this number to zero (drop</span></div><div class="line"><a name="l07559"></a><span class="lineno"> 7559</span>&#160;<span class="comment">    * the next &#39;n&#39; packets up to &#39;num_to_drop&#39;), or if &#39;use_random_num&#39; is set to</span></div><div class="line"><a name="l07560"></a><span class="lineno"> 7560</span>&#160;<span class="comment">    * true then set to a random number between zero and &#39;num_to_drop&#39;.</span></div><div class="line"><a name="l07561"></a><span class="lineno"> 7561</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07562"></a><span class="lineno"> 7562</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#aada5fb2c6b982bd66e06bed27074312d">num_dropped</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#afbd40d35ea0879dcf8c64c44dcceb5dc">use_random_num</a> ?</div><div class="line"><a name="l07563"></a><span class="lineno"> 7563</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>() % <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#aea3c75c96b342163a7543b70ba69cfc2">num_to_drop</a> : 0;</div><div class="line"><a name="l07564"></a><span class="lineno"> 7564</span>&#160;</div><div class="line"><a name="l07565"></a><span class="lineno"> 7565</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l07566"></a><span class="lineno"> 7566</span>&#160;<span class="comment">    * A specified number of packets can be dropped at a given interval (e.g every</span></div><div class="line"><a name="l07567"></a><span class="lineno"> 7567</span>&#160;<span class="comment">    * 30 seconds). If &#39;use_random_interval&#39; is false simply add the interval to</span></div><div class="line"><a name="l07568"></a><span class="lineno"> 7568</span>&#160;<span class="comment">    * the given time to get the next trigger point. If set to true, then get a</span></div><div class="line"><a name="l07569"></a><span class="lineno"> 7569</span>&#160;<span class="comment">    * random time between the given time and up to the specified interval.</span></div><div class="line"><a name="l07570"></a><span class="lineno"> 7570</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07571"></a><span class="lineno"> 7571</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#a061dcd6c25c901c0a794d0d258b9ee0c">use_random_interval</a>) {</div><div class="line"><a name="l07572"></a><span class="lineno"> 7572</span>&#160;      <span class="comment">/* Calculate as a percentage of the specified drop packets interval */</span></div><div class="line"><a name="l07573"></a><span class="lineno"> 7573</span>&#160;      <span class="keyword">struct </span>timeval interval = <a class="code" href="../../de/df7/time_8h.html#a7252ab607fc6663ec18b44175e4d80e2">ast_time_create_by_unit</a>(<a class="code" href="../../de/df7/time_8h.html#ab2f94e5f2c9020d961198b2b875b2429">ast_time_tv_to_usec</a>(</div><div class="line"><a name="l07574"></a><span class="lineno"> 7574</span>&#160;         &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#a8fab7697ae649035214a377c3149d28a">interval</a>) * ((<span class="keywordtype">double</span>)(<a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>() % 100 + 1) / 100),</div><div class="line"><a name="l07575"></a><span class="lineno"> 7575</span>&#160;         <a class="code" href="../../de/df7/time_8h.html#a5da573f3c060cef19a23b3604b18143ea41bff20b339e806220e3e62585d8c801">TIME_UNIT_MICROSECOND</a>);</div><div class="line"><a name="l07576"></a><span class="lineno"> 7576</span>&#160;</div><div class="line"><a name="l07577"></a><span class="lineno"> 7577</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#ad570b730b5e8beb611d76668ddf4e9ef">next</a> = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(tv, interval);</div><div class="line"><a name="l07578"></a><span class="lineno"> 7578</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07579"></a><span class="lineno"> 7579</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#ad570b730b5e8beb611d76668ddf4e9ef">next</a> = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(tv, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#a8fab7697ae649035214a377c3149d28a">interval</a>);</div><div class="line"><a name="l07580"></a><span class="lineno"> 7580</span>&#160;   }</div><div class="line"><a name="l07581"></a><span class="lineno"> 7581</span>&#160;}</div><div class="ttc" id="time_8h_html_ab2f94e5f2c9020d961198b2b875b2429"><div class="ttname"><a href="../../de/df7/time_8h.html#ab2f94e5f2c9020d961198b2b875b2429">ast_time_tv_to_usec</a></div><div class="ttdeci">ast_suseconds_t ast_time_tv_to_usec(const struct timeval *tv)</div><div class="ttdoc">Convert a timeval structure to microseconds. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d73/time_8c_source.html#l00089">time.c:89</a></div></div>
<div class="ttc" id="time_8h_html_a5da573f3c060cef19a23b3604b18143ea41bff20b339e806220e3e62585d8c801"><div class="ttname"><a href="../../de/df7/time_8h.html#a5da573f3c060cef19a23b3604b18143ea41bff20b339e806220e3e62585d8c801">TIME_UNIT_MICROSECOND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00246">time.h:246</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_aea3c75c96b342163a7543b70ba69cfc2"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#aea3c75c96b342163a7543b70ba69cfc2">rtp_drop_packets_data::num_to_drop</a></div><div class="ttdeci">unsigned int num_to_drop</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07537">res_rtp_asterisk.c:7537</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_a061dcd6c25c901c0a794d0d258b9ee0c"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#a061dcd6c25c901c0a794d0d258b9ee0c">rtp_drop_packets_data::use_random_interval</a></div><div class="ttdeci">unsigned int use_random_interval</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07534">res_rtp_asterisk.c:7534</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_ad570b730b5e8beb611d76668ddf4e9ef"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#ad570b730b5e8beb611d76668ddf4e9ef">rtp_drop_packets_data::next</a></div><div class="ttdeci">struct timeval next</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07544">res_rtp_asterisk.c:7544</a></div></div>
<div class="ttc" id="utils_8h_html_a7b4f10b070e95ba413e258a3e4b03c20"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a></div><div class="ttdeci">long int ast_random(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02064">main/utils.c:2064</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_afbd40d35ea0879dcf8c64c44dcceb5dc"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#afbd40d35ea0879dcf8c64c44dcceb5dc">rtp_drop_packets_data::use_random_num</a></div><div class="ttdeci">unsigned int use_random_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07532">res_rtp_asterisk.c:7532</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_aada5fb2c6b982bd66e06bed27074312d"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#aada5fb2c6b982bd66e06bed27074312d">rtp_drop_packets_data::num_dropped</a></div><div class="ttdeci">unsigned int num_dropped</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07539">res_rtp_asterisk.c:7539</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_a8fab7697ae649035214a377c3149d28a"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#a8fab7697ae649035214a377c3149d28a">rtp_drop_packets_data::interval</a></div><div class="ttdeci">struct timeval interval</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07542">res_rtp_asterisk.c:7542</a></div></div>
<div class="ttc" id="time_8h_html_a7252ab607fc6663ec18b44175e4d80e2"><div class="ttname"><a href="../../de/df7/time_8h.html#a7252ab607fc6663ec18b44175e4d80e2">ast_time_create_by_unit</a></div><div class="ttdeci">struct timeval ast_time_create_by_unit(unsigned long val, enum TIME_UNIT unit)</div><div class="ttdoc">Convert the given unit value, and create a timeval object from it. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d73/time_8c_source.html#l00112">time.c:112</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_add0b2eb61bb2de637255dbac0520c955"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a></div><div class="ttdeci">static struct rtp_drop_packets_data drop_packets_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07551">res_rtp_asterisk.c:7551</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c0765c9365f9caf28b8f072aac73409"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c0765c9365f9caf28b8f072aac73409">&#9670;&nbsp;</a></span>find_by_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int find_by_value </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>elem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to find an elem in a vector by value. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03045">3045</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04729">ast_rtcp_generate_nack()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;{</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;   <span class="keywordflow">return</span> elem == <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;}</div><div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9f4aa0ba10c92a6d97d91a1ba021da73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f4aa0ba10c92a6d97d91a1ba021da73">&#9670;&nbsp;</a></span>generate_random_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * generate_random_string </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01720">1720</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">ast_random()</a>, and <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00780">ast_rtp_ice_set_authentication()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">rtp_allocate_transport()</a>.</p>
<div class="fragment"><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;{</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <span class="keywordtype">long</span> <a class="code" href="../../d5/d85/structval.html">val</a>[4];</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        <span class="keywordflow">for</span> (x=0; x&lt;4; x++) {</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                val[x] = <a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>();</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;   }</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        snprintf(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size, <span class="stringliteral">&quot;%08lx%08lx%08lx%08lx&quot;</span>, (<span class="keywordtype">long</span> <span class="keywordtype">unsigned</span>)val[0], (<span class="keywordtype">long</span> <span class="keywordtype">unsigned</span>)val[1], (<span class="keywordtype">long</span> <span class="keywordtype">unsigned</span>)val[2], (<span class="keywordtype">long</span> <span class="keywordtype">unsigned</span>)val[3]);</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;}</div><div class="ttc" id="structval_html"><div class="ttname"><a href="../../d5/d85/structval.html">val</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l00325">ast_expr2.c:325</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="utils_8h_html_a7b4f10b070e95ba413e258a3e4b03c20"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a></div><div class="ttdeci">long int ast_random(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02064">main/utils.c:2064</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa235d0749772310f08d172d24f5718e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa235d0749772310f08d172d24f5718e6">&#9670;&nbsp;</a></span>get_recv_buffer_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t get_recv_buffer_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02430">2430</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00356">ast_data_buffer_count()</a>, and <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;{</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;   <span class="keywordflow">if</span> (rtp &amp;&amp; rtp-&gt;recv_buffer) {</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d7/d82/data__buffer_8h.html#a56472084280daafd2d67d69e4c2f7248">ast_data_buffer_count</a>(rtp-&gt;recv_buffer);</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;   }</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="data__buffer_8h_html_a56472084280daafd2d67d69e4c2f7248"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#a56472084280daafd2d67d69e4c2f7248">ast_data_buffer_count</a></div><div class="ttdeci">size_t ast_data_buffer_count(const struct ast_data_buffer *buffer)</div><div class="ttdoc">Return the number of payloads in a data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00356">data_buffer.c:356</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd55d8f78db2190bc72a222885615a6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd55d8f78db2190bc72a222885615a6b">&#9670;&nbsp;</a></span>get_recv_buffer_max()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t get_recv_buffer_max </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02441">2441</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00363">ast_data_buffer_max()</a>, and <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;{</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;   <span class="keywordflow">if</span> (rtp &amp;&amp; rtp-&gt;recv_buffer) {</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d7/d82/data__buffer_8h.html#a9e2eefe1a192ac86ab9ca3f588bf9b7a">ast_data_buffer_max</a>(rtp-&gt;recv_buffer);</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;   }</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="data__buffer_8h_html_a9e2eefe1a192ac86ab9ca3f588bf9b7a"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#a9e2eefe1a192ac86ab9ca3f588bf9b7a">ast_data_buffer_max</a></div><div class="ttdeci">size_t ast_data_buffer_max(const struct ast_data_buffer *buffer)</div><div class="ttdoc">Return the maximum number of payloads a data buffer can hold. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00363">data_buffer.c:363</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a991b0b26c18e5f41445fa1dfb83334d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a991b0b26c18e5f41445fa1dfb83334d8">&#9670;&nbsp;</a></span>get_send_buffer_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t get_send_buffer_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02452">2452</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00356">ast_data_buffer_count()</a>, and <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;{</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;   <span class="keywordflow">if</span> (rtp &amp;&amp; rtp-&gt;send_buffer) {</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d7/d82/data__buffer_8h.html#a56472084280daafd2d67d69e4c2f7248">ast_data_buffer_count</a>(rtp-&gt;send_buffer);</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;   }</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="data__buffer_8h_html_a56472084280daafd2d67d69e4c2f7248"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#a56472084280daafd2d67d69e4c2f7248">ast_data_buffer_count</a></div><div class="ttdeci">size_t ast_data_buffer_count(const struct ast_data_buffer *buffer)</div><div class="ttdoc">Return the number of payloads in a data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00356">data_buffer.c:356</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ec75d08ff56cd99acc84c2c9fe390e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ec75d08ff56cd99acc84c2c9fe390e3">&#9670;&nbsp;</a></span>handle_cli_rtcp_set_debug()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_rtcp_set_debug </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09145">9145</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d0/d87/logger__category_8c_source.html#l00289">ast_debug_category_set_sublevel()</a>, <a class="el" href="../../d5/d1f/logger__category_8h_source.html#l00031">AST_LOG_CATEGORY_DISABLED</a>, <a class="el" href="../../d5/d1f/logger__category_8h_source.html#l00026">AST_LOG_CATEGORY_ENABLED</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02830">AST_LOG_CATEGORY_RTCP_PACKET</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09055">rtcp_do_debug_ip()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00200">rtcpdebugaddr</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l09146"></a><span class="lineno"> 9146</span>&#160;{</div><div class="line"><a name="l09147"></a><span class="lineno"> 9147</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l09148"></a><span class="lineno"> 9148</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l09149"></a><span class="lineno"> 9149</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;rtcp set debug {on|off|ip}&quot;</span>;</div><div class="line"><a name="l09150"></a><span class="lineno"> 9150</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l09151"></a><span class="lineno"> 9151</span>&#160;         <span class="stringliteral">&quot;Usage: rtcp set debug {on|off|ip host[:port]}\n&quot;</span></div><div class="line"><a name="l09152"></a><span class="lineno"> 9152</span>&#160;         <span class="stringliteral">&quot;       Enable/Disable dumping of all RTCP packets. If &#39;ip&#39; is\n&quot;</span></div><div class="line"><a name="l09153"></a><span class="lineno"> 9153</span>&#160;         <span class="stringliteral">&quot;       specified, limit the dumped packets to those to and from\n&quot;</span></div><div class="line"><a name="l09154"></a><span class="lineno"> 9154</span>&#160;         <span class="stringliteral">&quot;       the specified &#39;host&#39; with optional port.\n&quot;</span>;</div><div class="line"><a name="l09155"></a><span class="lineno"> 9155</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09156"></a><span class="lineno"> 9156</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l09157"></a><span class="lineno"> 9157</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09158"></a><span class="lineno"> 9158</span>&#160;   }</div><div class="line"><a name="l09159"></a><span class="lineno"> 9159</span>&#160;</div><div class="line"><a name="l09160"></a><span class="lineno"> 9160</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) { <span class="comment">/* set on or off */</span></div><div class="line"><a name="l09161"></a><span class="lineno"> 9161</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>-1], <span class="stringliteral">&quot;on&quot;</span>, 2)) {</div><div class="line"><a name="l09162"></a><span class="lineno"> 9162</span>&#160;         <a class="code" href="../../d5/d1f/logger__category_8h.html#ae69108dfd1226cb66d86d02bec5de3cb">ast_debug_category_set_sublevel</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga501ac56386fce3535f67353537a508e7">AST_LOG_CATEGORY_RTCP_PACKET</a>, <a class="code" href="../../d5/d1f/logger__category_8h.html#a1b441edad5de1831924e98abec3bbf57">AST_LOG_CATEGORY_ENABLED</a>);</div><div class="line"><a name="l09163"></a><span class="lineno"> 9163</span>&#160;         memset(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a86444a258e6234bc5344daa32cbfdbdd">rtcpdebugaddr</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a86444a258e6234bc5344daa32cbfdbdd">rtcpdebugaddr</a>));</div><div class="line"><a name="l09164"></a><span class="lineno"> 9164</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;RTCP Packet Debugging Enabled\n&quot;</span>);</div><div class="line"><a name="l09165"></a><span class="lineno"> 9165</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l09166"></a><span class="lineno"> 9166</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>-1], <span class="stringliteral">&quot;off&quot;</span>, 3)) {</div><div class="line"><a name="l09167"></a><span class="lineno"> 9167</span>&#160;         <a class="code" href="../../d5/d1f/logger__category_8h.html#ae69108dfd1226cb66d86d02bec5de3cb">ast_debug_category_set_sublevel</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga501ac56386fce3535f67353537a508e7">AST_LOG_CATEGORY_RTCP_PACKET</a>, <a class="code" href="../../d5/d1f/logger__category_8h.html#a09fcd330c76d877051b5be368f2430d3">AST_LOG_CATEGORY_DISABLED</a>);</div><div class="line"><a name="l09168"></a><span class="lineno"> 9168</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;RTCP Packet Debugging Disabled\n&quot;</span>);</div><div class="line"><a name="l09169"></a><span class="lineno"> 9169</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l09170"></a><span class="lineno"> 9170</span>&#160;      }</div><div class="line"><a name="l09171"></a><span class="lineno"> 9171</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> +1) { <span class="comment">/* ip */</span></div><div class="line"><a name="l09172"></a><span class="lineno"> 9172</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac5880d6e79bbf0f0fc09483c25ece2b6">rtcp_do_debug_ip</a>(a);</div><div class="line"><a name="l09173"></a><span class="lineno"> 9173</span>&#160;   }</div><div class="line"><a name="l09174"></a><span class="lineno"> 9174</span>&#160;</div><div class="line"><a name="l09175"></a><span class="lineno"> 9175</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;   <span class="comment">/* default, failure */</span></div><div class="line"><a name="l09176"></a><span class="lineno"> 9176</span>&#160;}</div><div class="ttc" id="logger__category_8h_html_ae69108dfd1226cb66d86d02bec5de3cb"><div class="ttname"><a href="../../d5/d1f/logger__category_8h.html#ae69108dfd1226cb66d86d02bec5de3cb">ast_debug_category_set_sublevel</a></div><div class="ttdeci">int ast_debug_category_set_sublevel(const char *name, int sublevel)</div><div class="ttdoc">Set the debug category&amp;#39;s sublevel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d87/logger__category_8c_source.html#l00289">logger_category.c:289</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac5880d6e79bbf0f0fc09483c25ece2b6"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac5880d6e79bbf0f0fc09483c25ece2b6">rtcp_do_debug_ip</a></div><div class="ttdeci">static char * rtcp_do_debug_ip(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09055">res_rtp_asterisk.c:9055</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a86444a258e6234bc5344daa32cbfdbdd"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a86444a258e6234bc5344daa32cbfdbdd">rtcpdebugaddr</a></div><div class="ttdeci">static struct ast_sockaddr rtcpdebugaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00200">res_rtp_asterisk.c:200</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga501ac56386fce3535f67353537a508e7"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga501ac56386fce3535f67353537a508e7">AST_LOG_CATEGORY_RTCP_PACKET</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_RTCP_PACKET</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02830">rtp_engine.h:2830</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="logger__category_8h_html_a09fcd330c76d877051b5be368f2430d3"><div class="ttname"><a href="../../d5/d1f/logger__category_8h.html#a09fcd330c76d877051b5be368f2430d3">AST_LOG_CATEGORY_DISABLED</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_DISABLED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/logger__category_8h_source.html#l00031">logger_category.h:31</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="logger__category_8h_html_a1b441edad5de1831924e98abec3bbf57"><div class="ttname"><a href="../../d5/d1f/logger__category_8h.html#a1b441edad5de1831924e98abec3bbf57">AST_LOG_CATEGORY_ENABLED</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_ENABLED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/logger__category_8h_source.html#l00026">logger_category.h:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a96a3270020e5335d892ddeed13d689ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96a3270020e5335d892ddeed13d689ee">&#9670;&nbsp;</a></span>handle_cli_rtcp_set_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_rtcp_set_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09178">9178</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00197">rtcpstats</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l09179"></a><span class="lineno"> 9179</span>&#160;{</div><div class="line"><a name="l09180"></a><span class="lineno"> 9180</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l09181"></a><span class="lineno"> 9181</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l09182"></a><span class="lineno"> 9182</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;rtcp set stats {on|off}&quot;</span>;</div><div class="line"><a name="l09183"></a><span class="lineno"> 9183</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l09184"></a><span class="lineno"> 9184</span>&#160;         <span class="stringliteral">&quot;Usage: rtcp set stats {on|off}\n&quot;</span></div><div class="line"><a name="l09185"></a><span class="lineno"> 9185</span>&#160;         <span class="stringliteral">&quot;       Enable/Disable dumping of RTCP stats.\n&quot;</span>;</div><div class="line"><a name="l09186"></a><span class="lineno"> 9186</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09187"></a><span class="lineno"> 9187</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l09188"></a><span class="lineno"> 9188</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09189"></a><span class="lineno"> 9189</span>&#160;   }</div><div class="line"><a name="l09190"></a><span class="lineno"> 9190</span>&#160;</div><div class="line"><a name="l09191"></a><span class="lineno"> 9191</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>)</div><div class="line"><a name="l09192"></a><span class="lineno"> 9192</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l09193"></a><span class="lineno"> 9193</span>&#160;</div><div class="line"><a name="l09194"></a><span class="lineno"> 9194</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>-1], <span class="stringliteral">&quot;on&quot;</span>, 2))</div><div class="line"><a name="l09195"></a><span class="lineno"> 9195</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af31fe34042d18a4597e04781f84f0e3c">rtcpstats</a> = 1;</div><div class="line"><a name="l09196"></a><span class="lineno"> 9196</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>-1], <span class="stringliteral">&quot;off&quot;</span>, 3))</div><div class="line"><a name="l09197"></a><span class="lineno"> 9197</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af31fe34042d18a4597e04781f84f0e3c">rtcpstats</a> = 0;</div><div class="line"><a name="l09198"></a><span class="lineno"> 9198</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l09199"></a><span class="lineno"> 9199</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l09200"></a><span class="lineno"> 9200</span>&#160;</div><div class="line"><a name="l09201"></a><span class="lineno"> 9201</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;RTCP Stats %s\n&quot;</span>, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af31fe34042d18a4597e04781f84f0e3c">rtcpstats</a> ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>);</div><div class="line"><a name="l09202"></a><span class="lineno"> 9202</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l09203"></a><span class="lineno"> 9203</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_af31fe34042d18a4597e04781f84f0e3c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af31fe34042d18a4597e04781f84f0e3c">rtcpstats</a></div><div class="ttdeci">static int rtcpstats</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00197">res_rtp_asterisk.c:197</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9d8b00c85ed520d85e130839784c3e0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d8b00c85ed520d85e130839784c3e0b">&#9670;&nbsp;</a></span>handle_cli_rtp_drop_incoming_packets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_rtp_drop_incoming_packets </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09213">9213</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07546">rtp_drop_packets_data::addr</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01811">ast_cli_complete()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l02726">ast_cli_completion_add()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00521">ast_sockaddr_port</a>, <a class="el" href="../../d6/d1e/conversions_8c_source.html#l00056">ast_str_to_uint()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../df/d73/time_8c_source.html#l00142">ast_time_create_by_unit_str()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07551">drop_packets_data</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07553">drop_packets_data_update()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07542">rtp_drop_packets_data::interval</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00165">ast_cli_args::n</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07537">rtp_drop_packets_data::num_to_drop</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07548">rtp_drop_packets_data::port</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09207">use_random()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07534">rtp_drop_packets_data::use_random_interval</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07532">rtp_drop_packets_data::use_random_num</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>
<div class="fragment"><div class="line"><a name="l09214"></a><span class="lineno"> 9214</span>&#160;{</div><div class="line"><a name="l09215"></a><span class="lineno"> 9215</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> completions_2[] = { <span class="stringliteral">&quot;stop&quot;</span>, <span class="stringliteral">&quot;&lt;N&gt;&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> };</div><div class="line"><a name="l09216"></a><span class="lineno"> 9216</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> completions_3[] = { <span class="stringliteral">&quot;random&quot;</span>, <span class="stringliteral">&quot;incoming packets&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> };</div><div class="line"><a name="l09217"></a><span class="lineno"> 9217</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> completions_5[] = { <span class="stringliteral">&quot;on&quot;</span>, <span class="stringliteral">&quot;every&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> };</div><div class="line"><a name="l09218"></a><span class="lineno"> 9218</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> completions_units[] = { <span class="stringliteral">&quot;random&quot;</span>, <span class="stringliteral">&quot;usec&quot;</span>, <span class="stringliteral">&quot;msec&quot;</span>, <span class="stringliteral">&quot;sec&quot;</span>, <span class="stringliteral">&quot;min&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> };</div><div class="line"><a name="l09219"></a><span class="lineno"> 9219</span>&#160;</div><div class="line"><a name="l09220"></a><span class="lineno"> 9220</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> use_random_num = 0;</div><div class="line"><a name="l09221"></a><span class="lineno"> 9221</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> use_random_interval = 0;</div><div class="line"><a name="l09222"></a><span class="lineno"> 9222</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> num_to_drop = 0;</div><div class="line"><a name="l09223"></a><span class="lineno"> 9223</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> interval = 0;</div><div class="line"><a name="l09224"></a><span class="lineno"> 9224</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *interval_s = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09225"></a><span class="lineno"> 9225</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *unit_s = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09226"></a><span class="lineno"> 9226</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> addr;</div><div class="line"><a name="l09227"></a><span class="lineno"> 9227</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *addr_s = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09228"></a><span class="lineno"> 9228</span>&#160;</div><div class="line"><a name="l09229"></a><span class="lineno"> 9229</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l09230"></a><span class="lineno"> 9230</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l09231"></a><span class="lineno"> 9231</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;rtp drop&quot;</span>;</div><div class="line"><a name="l09232"></a><span class="lineno"> 9232</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l09233"></a><span class="lineno"> 9233</span>&#160;         <span class="stringliteral">&quot;Usage: rtp drop [stop|[&lt;N&gt; [random] incoming packets[ every &lt;N&gt; [random] {usec|msec|sec|min}][ on &lt;ip[:port]&gt;]]\n&quot;</span></div><div class="line"><a name="l09234"></a><span class="lineno"> 9234</span>&#160;         <span class="stringliteral">&quot;       Drop RTP incoming packets.\n&quot;</span>;</div><div class="line"><a name="l09235"></a><span class="lineno"> 9235</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09236"></a><span class="lineno"> 9236</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l09237"></a><span class="lineno"> 9237</span>&#160;      use_random_num = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aee504a29ee883de6e0ce2966da770566">use_random</a>(a, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, 4);</div><div class="line"><a name="l09238"></a><span class="lineno"> 9238</span>&#160;      use_random_interval = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aee504a29ee883de6e0ce2966da770566">use_random</a>(a, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, 8 + use_random_num) ||</div><div class="line"><a name="l09239"></a><span class="lineno"> 9239</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aee504a29ee883de6e0ce2966da770566">use_random</a>(a, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, 10 + use_random_num);</div><div class="line"><a name="l09240"></a><span class="lineno"> 9240</span>&#160;</div><div class="line"><a name="l09241"></a><span class="lineno"> 9241</span>&#160;      <span class="keywordflow">switch</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> - use_random_num - use_random_interval) {</div><div class="line"><a name="l09242"></a><span class="lineno"> 9242</span>&#160;      <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l09243"></a><span class="lineno"> 9243</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a2a43f82ed19e84f386787154f2f22fc9">ast_cli_complete</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, completions_2, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l09244"></a><span class="lineno"> 9244</span>&#160;      <span class="keywordflow">case</span> 3:</div><div class="line"><a name="l09245"></a><span class="lineno"> 9245</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a2a43f82ed19e84f386787154f2f22fc9">ast_cli_complete</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, completions_3 + use_random_num, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l09246"></a><span class="lineno"> 9246</span>&#160;      <span class="keywordflow">case</span> 5:</div><div class="line"><a name="l09247"></a><span class="lineno"> 9247</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a2a43f82ed19e84f386787154f2f22fc9">ast_cli_complete</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, completions_5, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l09248"></a><span class="lineno"> 9248</span>&#160;      <span class="keywordflow">case</span> 7:</div><div class="line"><a name="l09249"></a><span class="lineno"> 9249</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> - 2], <span class="stringliteral">&quot;on&quot;</span>)) {</div><div class="line"><a name="l09250"></a><span class="lineno"> 9250</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a>(<a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;every&quot;</span>));</div><div class="line"><a name="l09251"></a><span class="lineno"> 9251</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09252"></a><span class="lineno"> 9252</span>&#160;         }</div><div class="line"><a name="l09253"></a><span class="lineno"> 9253</span>&#160;         <span class="comment">/* Fall through */</span></div><div class="line"><a name="l09254"></a><span class="lineno"> 9254</span>&#160;      <span class="keywordflow">case</span> 9:</div><div class="line"><a name="l09255"></a><span class="lineno"> 9255</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> - 2 - use_random_interval], <span class="stringliteral">&quot;every&quot;</span>)) {</div><div class="line"><a name="l09256"></a><span class="lineno"> 9256</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a2a43f82ed19e84f386787154f2f22fc9">ast_cli_complete</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, completions_units + use_random_interval, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l09257"></a><span class="lineno"> 9257</span>&#160;         }</div><div class="line"><a name="l09258"></a><span class="lineno"> 9258</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09259"></a><span class="lineno"> 9259</span>&#160;      <span class="keywordflow">case</span> 8:</div><div class="line"><a name="l09260"></a><span class="lineno"> 9260</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> - 3 - use_random_interval], <span class="stringliteral">&quot;every&quot;</span>)) {</div><div class="line"><a name="l09261"></a><span class="lineno"> 9261</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a>(<a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;on&quot;</span>));</div><div class="line"><a name="l09262"></a><span class="lineno"> 9262</span>&#160;         }</div><div class="line"><a name="l09263"></a><span class="lineno"> 9263</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09264"></a><span class="lineno"> 9264</span>&#160;      }</div><div class="line"><a name="l09265"></a><span class="lineno"> 9265</span>&#160;</div><div class="line"><a name="l09266"></a><span class="lineno"> 9266</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09267"></a><span class="lineno"> 9267</span>&#160;   }</div><div class="line"><a name="l09268"></a><span class="lineno"> 9268</span>&#160;</div><div class="line"><a name="l09269"></a><span class="lineno"> 9269</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 3) {</div><div class="line"><a name="l09270"></a><span class="lineno"> 9270</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l09271"></a><span class="lineno"> 9271</span>&#160;   }</div><div class="line"><a name="l09272"></a><span class="lineno"> 9272</span>&#160;</div><div class="line"><a name="l09273"></a><span class="lineno"> 9273</span>&#160;   use_random_num = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aee504a29ee883de6e0ce2966da770566">use_random</a>(a, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a>, 4);</div><div class="line"><a name="l09274"></a><span class="lineno"> 9274</span>&#160;   use_random_interval = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aee504a29ee883de6e0ce2966da770566">use_random</a>(a, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a>, 8 + use_random_num) ||</div><div class="line"><a name="l09275"></a><span class="lineno"> 9275</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aee504a29ee883de6e0ce2966da770566">use_random</a>(a, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a>, 10 + use_random_num);</div><div class="line"><a name="l09276"></a><span class="lineno"> 9276</span>&#160;</div><div class="line"><a name="l09277"></a><span class="lineno"> 9277</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], <span class="stringliteral">&quot;stop&quot;</span>)) {</div><div class="line"><a name="l09278"></a><span class="lineno"> 9278</span>&#160;      <span class="comment">/* rtp drop stop */</span></div><div class="line"><a name="l09279"></a><span class="lineno"> 9279</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 5) {</div><div class="line"><a name="l09280"></a><span class="lineno"> 9280</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l09281"></a><span class="lineno"> 9281</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/dd6/conversions_8h.html#a9982602f3c9f6975b4689b0ac441efa9">ast_str_to_uint</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], &amp;num_to_drop)) {</div><div class="line"><a name="l09282"></a><span class="lineno"> 9282</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s is not a valid number of packets to drop\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l09283"></a><span class="lineno"> 9283</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l09284"></a><span class="lineno"> 9284</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> - use_random_num == 5) {</div><div class="line"><a name="l09285"></a><span class="lineno"> 9285</span>&#160;      <span class="comment">/* rtp drop &lt;N&gt; [random] incoming packets */</span></div><div class="line"><a name="l09286"></a><span class="lineno"> 9286</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> - use_random_num &gt;= 7 &amp;&amp; !strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[5 + use_random_num], <span class="stringliteral">&quot;on&quot;</span>)) {</div><div class="line"><a name="l09287"></a><span class="lineno"> 9287</span>&#160;      <span class="comment">/* rtp drop &lt;N&gt; [random] incoming packets on &lt;ip[:port]&gt; */</span></div><div class="line"><a name="l09288"></a><span class="lineno"> 9288</span>&#160;      addr_s = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[6 + use_random_num];</div><div class="line"><a name="l09289"></a><span class="lineno"> 9289</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> - use_random_num - use_random_interval == 10 &amp;&amp;</div><div class="line"><a name="l09290"></a><span class="lineno"> 9290</span>&#160;            !strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[7 + use_random_num], <span class="stringliteral">&quot;every&quot;</span>)) {</div><div class="line"><a name="l09291"></a><span class="lineno"> 9291</span>&#160;         <span class="comment">/* rtp drop &lt;N&gt; [random] incoming packets on &lt;ip[:port]&gt; every &lt;N&gt; [random] {usec|msec|sec|min} */</span></div><div class="line"><a name="l09292"></a><span class="lineno"> 9292</span>&#160;         interval_s = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[8 + use_random_num];</div><div class="line"><a name="l09293"></a><span class="lineno"> 9293</span>&#160;         unit_s = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[9 + use_random_num + use_random_interval];</div><div class="line"><a name="l09294"></a><span class="lineno"> 9294</span>&#160;      }</div><div class="line"><a name="l09295"></a><span class="lineno"> 9295</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> - use_random_num &gt;= 8 &amp;&amp; !strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[5 + use_random_num], <span class="stringliteral">&quot;every&quot;</span>)) {</div><div class="line"><a name="l09296"></a><span class="lineno"> 9296</span>&#160;      <span class="comment">/* rtp drop &lt;N&gt; [random] incoming packets every &lt;N&gt; [random] {usec|msec|sec|min} */</span></div><div class="line"><a name="l09297"></a><span class="lineno"> 9297</span>&#160;      interval_s = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[6 + use_random_num];</div><div class="line"><a name="l09298"></a><span class="lineno"> 9298</span>&#160;      unit_s = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[7 + use_random_num + use_random_interval];</div><div class="line"><a name="l09299"></a><span class="lineno"> 9299</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 10 + use_random_num + use_random_interval &amp;&amp;</div><div class="line"><a name="l09300"></a><span class="lineno"> 9300</span>&#160;            !strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[8 + use_random_num + use_random_interval], <span class="stringliteral">&quot;on&quot;</span>)) {</div><div class="line"><a name="l09301"></a><span class="lineno"> 9301</span>&#160;         <span class="comment">/* rtp drop &lt;N&gt; [random] incoming packets every &lt;N&gt; [random] {usec|msec|sec|min} on &lt;ip[:port]&gt; */</span></div><div class="line"><a name="l09302"></a><span class="lineno"> 9302</span>&#160;         addr_s = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[9 + use_random_num + use_random_interval];</div><div class="line"><a name="l09303"></a><span class="lineno"> 9303</span>&#160;      }</div><div class="line"><a name="l09304"></a><span class="lineno"> 9304</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09305"></a><span class="lineno"> 9305</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l09306"></a><span class="lineno"> 9306</span>&#160;   }</div><div class="line"><a name="l09307"></a><span class="lineno"> 9307</span>&#160;</div><div class="line"><a name="l09308"></a><span class="lineno"> 9308</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> - use_random_num &gt;= 8 &amp;&amp; !interval_s &amp;&amp; !addr_s) {</div><div class="line"><a name="l09309"></a><span class="lineno"> 9309</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l09310"></a><span class="lineno"> 9310</span>&#160;   }</div><div class="line"><a name="l09311"></a><span class="lineno"> 9311</span>&#160;</div><div class="line"><a name="l09312"></a><span class="lineno"> 9312</span>&#160;   <span class="keywordflow">if</span> (interval_s &amp;&amp; <a class="code" href="../../da/dd6/conversions_8h.html#a9982602f3c9f6975b4689b0ac441efa9">ast_str_to_uint</a>(interval_s, &amp;interval)) {</div><div class="line"><a name="l09313"></a><span class="lineno"> 9313</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s is not a valid interval number\n&quot;</span>, interval_s);</div><div class="line"><a name="l09314"></a><span class="lineno"> 9314</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l09315"></a><span class="lineno"> 9315</span>&#160;   }</div><div class="line"><a name="l09316"></a><span class="lineno"> 9316</span>&#160;</div><div class="line"><a name="l09317"></a><span class="lineno"> 9317</span>&#160;   memset(&amp;addr, 0, <span class="keyword">sizeof</span>(addr));</div><div class="line"><a name="l09318"></a><span class="lineno"> 9318</span>&#160;   <span class="keywordflow">if</span> (addr_s &amp;&amp; !<a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;addr, addr_s, 0)) {</div><div class="line"><a name="l09319"></a><span class="lineno"> 9319</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s is not a valid hostname[:port]\n&quot;</span>, addr_s);</div><div class="line"><a name="l09320"></a><span class="lineno"> 9320</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l09321"></a><span class="lineno"> 9321</span>&#160;   }</div><div class="line"><a name="l09322"></a><span class="lineno"> 9322</span>&#160;</div><div class="line"><a name="l09323"></a><span class="lineno"> 9323</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#afbd40d35ea0879dcf8c64c44dcceb5dc">use_random_num</a> = use_random_num;</div><div class="line"><a name="l09324"></a><span class="lineno"> 9324</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#a061dcd6c25c901c0a794d0d258b9ee0c">use_random_interval</a> = use_random_interval;</div><div class="line"><a name="l09325"></a><span class="lineno"> 9325</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#aea3c75c96b342163a7543b70ba69cfc2">num_to_drop</a> = num_to_drop;</div><div class="line"><a name="l09326"></a><span class="lineno"> 9326</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#a8fab7697ae649035214a377c3149d28a">interval</a> = <a class="code" href="../../de/df7/time_8h.html#aa01f844ab005e8a05c75db9be176ecb2">ast_time_create_by_unit_str</a>(interval, unit_s);</div><div class="line"><a name="l09327"></a><span class="lineno"> 9327</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#a10838452c09fae7f0e3de86581d85379">addr</a>, &amp;addr);</div><div class="line"><a name="l09328"></a><span class="lineno"> 9328</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#a938bdc6ae46c346147b6d4f67ad1e704">port</a> = <a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(&amp;addr);</div><div class="line"><a name="l09329"></a><span class="lineno"> 9329</span>&#160;</div><div class="line"><a name="l09330"></a><span class="lineno"> 9330</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3fa482ae7eda83a3e17baa26c4db9445">drop_packets_data_update</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>());</div><div class="line"><a name="l09331"></a><span class="lineno"> 9331</span>&#160;</div><div class="line"><a name="l09332"></a><span class="lineno"> 9332</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l09333"></a><span class="lineno"> 9333</span>&#160;}</div><div class="ttc" id="structrtp__drop__packets__data_html_a938bdc6ae46c346147b6d4f67ad1e704"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#a938bdc6ae46c346147b6d4f67ad1e704">rtp_drop_packets_data::port</a></div><div class="ttdeci">unsigned int port</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07548">res_rtp_asterisk.c:7548</a></div></div>
<div class="ttc" id="netsock2_8h_html_aad98818272870e12d48fe4347aaa46d0"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a></div><div class="ttdeci">int ast_sockaddr_parse(struct ast_sockaddr *addr, const char *str, int flags)</div><div class="ttdoc">Parse an IPv4 or IPv6 address string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00230">netsock2.c:230</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="time_8h_html_aa01f844ab005e8a05c75db9be176ecb2"><div class="ttname"><a href="../../de/df7/time_8h.html#aa01f844ab005e8a05c75db9be176ecb2">ast_time_create_by_unit_str</a></div><div class="ttdeci">struct timeval ast_time_create_by_unit_str(unsigned long val, const char *unit)</div><div class="ttdoc">Convert the given unit value, and create a timeval object from it. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d73/time_8c_source.html#l00142">time.c:142</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_aea3c75c96b342163a7543b70ba69cfc2"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#aea3c75c96b342163a7543b70ba69cfc2">rtp_drop_packets_data::num_to_drop</a></div><div class="ttdeci">unsigned int num_to_drop</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07537">res_rtp_asterisk.c:7537</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#a10838452c09fae7f0e3de86581d85379">rtp_drop_packets_data::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07546">res_rtp_asterisk.c:7546</a></div></div>
<div class="ttc" id="cli_8h_html_a2a43f82ed19e84f386787154f2f22fc9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a2a43f82ed19e84f386787154f2f22fc9">ast_cli_complete</a></div><div class="ttdeci">char * ast_cli_complete(const char *word, const char *const choices[], int pos)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l01811">main/cli.c:1811</a></div></div>
<div class="ttc" id="netsock2_8h_html_a51e2841175bf3ad58a4e11ad9fb2453f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a></div><div class="ttdeci">#define ast_sockaddr_port(addr)</div><div class="ttdoc">Get the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00521">netsock2.h:521</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_acfc02ec89670db29251fda6a66602ce2"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">ast_cli_args::n</a></div><div class="ttdeci">const int n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00165">cli.h:165</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_a061dcd6c25c901c0a794d0d258b9ee0c"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#a061dcd6c25c901c0a794d0d258b9ee0c">rtp_drop_packets_data::use_random_interval</a></div><div class="ttdeci">unsigned int use_random_interval</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07534">res_rtp_asterisk.c:7534</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3fa482ae7eda83a3e17baa26c4db9445"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3fa482ae7eda83a3e17baa26c4db9445">drop_packets_data_update</a></div><div class="ttdeci">static void drop_packets_data_update(struct timeval tv)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07553">res_rtp_asterisk.c:7553</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_afbd40d35ea0879dcf8c64c44dcceb5dc"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#afbd40d35ea0879dcf8c64c44dcceb5dc">rtp_drop_packets_data::use_random_num</a></div><div class="ttdeci">unsigned int use_random_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07532">res_rtp_asterisk.c:7532</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="conversions_8h_html_a9982602f3c9f6975b4689b0ac441efa9"><div class="ttname"><a href="../../da/dd6/conversions_8h.html#a9982602f3c9f6975b4689b0ac441efa9">ast_str_to_uint</a></div><div class="ttdeci">int ast_str_to_uint(const char *str, unsigned int *res)</div><div class="ttdoc">Convert the given string to an unsigned integer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d1e/conversions_8c_source.html#l00056">conversions.c:56</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_a8fab7697ae649035214a377c3149d28a"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#a8fab7697ae649035214a377c3149d28a">rtp_drop_packets_data::interval</a></div><div class="ttdeci">struct timeval interval</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07542">res_rtp_asterisk.c:7542</a></div></div>
<div class="ttc" id="cli_8h_html_a6f5f6c330757d980065d3f887c62237f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a></div><div class="ttdeci">int ast_cli_completion_add(char *value)</div><div class="ttdoc">Add a result to a request for completion options. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l02726">main/cli.c:2726</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_add0b2eb61bb2de637255dbac0520c955"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a></div><div class="ttdeci">static struct rtp_drop_packets_data drop_packets_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07551">res_rtp_asterisk.c:7551</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aee504a29ee883de6e0ce2966da770566"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aee504a29ee883de6e0ce2966da770566">use_random</a></div><div class="ttdeci">static unsigned int use_random(struct ast_cli_args *a, int pos, unsigned int index)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09207">res_rtp_asterisk.c:9207</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a54e80a72f7a13775f84d6b98497499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a54e80a72f7a13775f84d6b98497499">&#9670;&nbsp;</a></span>handle_cli_rtp_set_debug()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_rtp_set_debug </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09072">9072</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d0/d87/logger__category_8c_source.html#l00289">ast_debug_category_set_sublevel()</a>, <a class="el" href="../../d5/d1f/logger__category_8h_source.html#l00031">AST_LOG_CATEGORY_DISABLED</a>, <a class="el" href="../../d5/d1f/logger__category_8h_source.html#l00026">AST_LOG_CATEGORY_ENABLED</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02826">AST_LOG_CATEGORY_RTP_PACKET</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09038">rtp_do_debug_ip()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00199">rtpdebugaddr</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l09073"></a><span class="lineno"> 9073</span>&#160;{</div><div class="line"><a name="l09074"></a><span class="lineno"> 9074</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l09075"></a><span class="lineno"> 9075</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l09076"></a><span class="lineno"> 9076</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;rtp set debug {on|off|ip}&quot;</span>;</div><div class="line"><a name="l09077"></a><span class="lineno"> 9077</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l09078"></a><span class="lineno"> 9078</span>&#160;         <span class="stringliteral">&quot;Usage: rtp set debug {on|off|ip host[:port]}\n&quot;</span></div><div class="line"><a name="l09079"></a><span class="lineno"> 9079</span>&#160;         <span class="stringliteral">&quot;       Enable/Disable dumping of all RTP packets. If &#39;ip&#39; is\n&quot;</span></div><div class="line"><a name="l09080"></a><span class="lineno"> 9080</span>&#160;         <span class="stringliteral">&quot;       specified, limit the dumped packets to those to and from\n&quot;</span></div><div class="line"><a name="l09081"></a><span class="lineno"> 9081</span>&#160;         <span class="stringliteral">&quot;       the specified &#39;host&#39; with optional port.\n&quot;</span>;</div><div class="line"><a name="l09082"></a><span class="lineno"> 9082</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09083"></a><span class="lineno"> 9083</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l09084"></a><span class="lineno"> 9084</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09085"></a><span class="lineno"> 9085</span>&#160;   }</div><div class="line"><a name="l09086"></a><span class="lineno"> 9086</span>&#160;</div><div class="line"><a name="l09087"></a><span class="lineno"> 9087</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) { <span class="comment">/* set on or off */</span></div><div class="line"><a name="l09088"></a><span class="lineno"> 9088</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>-1], <span class="stringliteral">&quot;on&quot;</span>, 2)) {</div><div class="line"><a name="l09089"></a><span class="lineno"> 9089</span>&#160;         <a class="code" href="../../d5/d1f/logger__category_8h.html#ae69108dfd1226cb66d86d02bec5de3cb">ast_debug_category_set_sublevel</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaa5ecf12e596867bc22d8df75d2568d96">AST_LOG_CATEGORY_RTP_PACKET</a>, <a class="code" href="../../d5/d1f/logger__category_8h.html#a1b441edad5de1831924e98abec3bbf57">AST_LOG_CATEGORY_ENABLED</a>);</div><div class="line"><a name="l09090"></a><span class="lineno"> 9090</span>&#160;         memset(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a183791de441f6c5592785ed3f9043a50">rtpdebugaddr</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a183791de441f6c5592785ed3f9043a50">rtpdebugaddr</a>));</div><div class="line"><a name="l09091"></a><span class="lineno"> 9091</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;RTP Packet Debugging Enabled\n&quot;</span>);</div><div class="line"><a name="l09092"></a><span class="lineno"> 9092</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l09093"></a><span class="lineno"> 9093</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>-1], <span class="stringliteral">&quot;off&quot;</span>, 3)) {</div><div class="line"><a name="l09094"></a><span class="lineno"> 9094</span>&#160;         <a class="code" href="../../d5/d1f/logger__category_8h.html#ae69108dfd1226cb66d86d02bec5de3cb">ast_debug_category_set_sublevel</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaa5ecf12e596867bc22d8df75d2568d96">AST_LOG_CATEGORY_RTP_PACKET</a>, <a class="code" href="../../d5/d1f/logger__category_8h.html#a09fcd330c76d877051b5be368f2430d3">AST_LOG_CATEGORY_DISABLED</a>);</div><div class="line"><a name="l09095"></a><span class="lineno"> 9095</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;RTP Packet Debugging Disabled\n&quot;</span>);</div><div class="line"><a name="l09096"></a><span class="lineno"> 9096</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l09097"></a><span class="lineno"> 9097</span>&#160;      }</div><div class="line"><a name="l09098"></a><span class="lineno"> 9098</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> +1) { <span class="comment">/* ip */</span></div><div class="line"><a name="l09099"></a><span class="lineno"> 9099</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a07116c4a926b544b84936ff2f788883f">rtp_do_debug_ip</a>(a);</div><div class="line"><a name="l09100"></a><span class="lineno"> 9100</span>&#160;   }</div><div class="line"><a name="l09101"></a><span class="lineno"> 9101</span>&#160;</div><div class="line"><a name="l09102"></a><span class="lineno"> 9102</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;   <span class="comment">/* default, failure */</span></div><div class="line"><a name="l09103"></a><span class="lineno"> 9103</span>&#160;}</div><div class="ttc" id="logger__category_8h_html_ae69108dfd1226cb66d86d02bec5de3cb"><div class="ttname"><a href="../../d5/d1f/logger__category_8h.html#ae69108dfd1226cb66d86d02bec5de3cb">ast_debug_category_set_sublevel</a></div><div class="ttdeci">int ast_debug_category_set_sublevel(const char *name, int sublevel)</div><div class="ttdoc">Set the debug category&amp;#39;s sublevel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d87/logger__category_8c_source.html#l00289">logger_category.c:289</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a183791de441f6c5592785ed3f9043a50"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a183791de441f6c5592785ed3f9043a50">rtpdebugaddr</a></div><div class="ttdeci">static struct ast_sockaddr rtpdebugaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00199">res_rtp_asterisk.c:199</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="logger__category_8h_html_a09fcd330c76d877051b5be368f2430d3"><div class="ttname"><a href="../../d5/d1f/logger__category_8h.html#a09fcd330c76d877051b5be368f2430d3">AST_LOG_CATEGORY_DISABLED</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_DISABLED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/logger__category_8h_source.html#l00031">logger_category.h:31</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a07116c4a926b544b84936ff2f788883f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a07116c4a926b544b84936ff2f788883f">rtp_do_debug_ip</a></div><div class="ttdeci">static char * rtp_do_debug_ip(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09038">res_rtp_asterisk.c:9038</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaa5ecf12e596867bc22d8df75d2568d96"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaa5ecf12e596867bc22d8df75d2568d96">AST_LOG_CATEGORY_RTP_PACKET</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_RTP_PACKET</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02826">rtp_engine.h:2826</a></div></div>
<div class="ttc" id="logger__category_8h_html_a1b441edad5de1831924e98abec3bbf57"><div class="ttname"><a href="../../d5/d1f/logger__category_8h.html#a1b441edad5de1831924e98abec3bbf57">AST_LOG_CATEGORY_ENABLED</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_ENABLED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/logger__category_8h_source.html#l00026">logger_category.h:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2834658816ca722d6ef3b6ede9f764fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2834658816ca722d6ef3b6ede9f764fb">&#9670;&nbsp;</a></span>handle_cli_rtp_settings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_rtp_settings </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09106">9106</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00071">AST_CLI_YESNO</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00193">dtmftimeout</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00214">icesupport</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00207">learning_min_sequential</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00196">rtpend</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00195">rtpstart</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00209">srtp_replay_protection</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00206">strictrtp</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l09107"></a><span class="lineno"> 9107</span>&#160;{</div><div class="line"><a name="l09108"></a><span class="lineno"> 9108</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l09109"></a><span class="lineno"> 9109</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l09110"></a><span class="lineno"> 9110</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;rtp show settings&quot;</span>;</div><div class="line"><a name="l09111"></a><span class="lineno"> 9111</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l09112"></a><span class="lineno"> 9112</span>&#160;         <span class="stringliteral">&quot;Usage: rtp show settings\n&quot;</span></div><div class="line"><a name="l09113"></a><span class="lineno"> 9113</span>&#160;         <span class="stringliteral">&quot;       Display RTP configuration settings\n&quot;</span>;</div><div class="line"><a name="l09114"></a><span class="lineno"> 9114</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09115"></a><span class="lineno"> 9115</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l09116"></a><span class="lineno"> 9116</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09117"></a><span class="lineno"> 9117</span>&#160;   }</div><div class="line"><a name="l09118"></a><span class="lineno"> 9118</span>&#160;</div><div class="line"><a name="l09119"></a><span class="lineno"> 9119</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l09120"></a><span class="lineno"> 9120</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l09121"></a><span class="lineno"> 9121</span>&#160;   }</div><div class="line"><a name="l09122"></a><span class="lineno"> 9122</span>&#160;</div><div class="line"><a name="l09123"></a><span class="lineno"> 9123</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n\nGeneral Settings:\n&quot;</span>);</div><div class="line"><a name="l09124"></a><span class="lineno"> 9124</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;----------------\n&quot;</span>);</div><div class="line"><a name="l09125"></a><span class="lineno"> 9125</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Port start:      %d\n&quot;</span>, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a>);</div><div class="line"><a name="l09126"></a><span class="lineno"> 9126</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Port end:        %d\n&quot;</span>, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a>);</div><div class="line"><a name="l09127"></a><span class="lineno"> 9127</span>&#160;<span class="preprocessor">#ifdef SO_NO_CHECK</span></div><div class="line"><a name="l09128"></a><span class="lineno"> 9128</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Checksums:       %s\n&quot;</span>, <a class="code" href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a>(nochecksums == 0));</div><div class="line"><a name="l09129"></a><span class="lineno"> 9129</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09130"></a><span class="lineno"> 9130</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  DTMF Timeout:    %d\n&quot;</span>, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aead922624018c01780f0f060df89e6a7">dtmftimeout</a>);</div><div class="line"><a name="l09131"></a><span class="lineno"> 9131</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Strict RTP:      %s\n&quot;</span>, <a class="code" href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a>));</div><div class="line"><a name="l09132"></a><span class="lineno"> 9132</span>&#160;</div><div class="line"><a name="l09133"></a><span class="lineno"> 9133</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a>) {</div><div class="line"><a name="l09134"></a><span class="lineno"> 9134</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Probation:       %d frames\n&quot;</span>, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4ec95260935fbacc0443e815297e61bb">learning_min_sequential</a>);</div><div class="line"><a name="l09135"></a><span class="lineno"> 9135</span>&#160;   }</div><div class="line"><a name="l09136"></a><span class="lineno"> 9136</span>&#160;</div><div class="line"><a name="l09137"></a><span class="lineno"> 9137</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Replay Protect:  %s\n&quot;</span>, <a class="code" href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a62f7bf8eadfec58f81f33a8c90458f15">srtp_replay_protection</a>));</div><div class="line"><a name="l09138"></a><span class="lineno"> 9138</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l09139"></a><span class="lineno"> 9139</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  ICE support:     %s\n&quot;</span>, <a class="code" href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab452a162adc04bec273fda937902e95e">icesupport</a>));</div><div class="line"><a name="l09140"></a><span class="lineno"> 9140</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09141"></a><span class="lineno"> 9141</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l09142"></a><span class="lineno"> 9142</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_ab452a162adc04bec273fda937902e95e"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab452a162adc04bec273fda937902e95e">icesupport</a></div><div class="ttdeci">static int icesupport</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00214">res_rtp_asterisk.c:214</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa3d9ba5adbb6566211600f0ab4a027c7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a></div><div class="ttdeci">static int rtpstart</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00195">res_rtp_asterisk.c:195</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aead922624018c01780f0f060df89e6a7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aead922624018c01780f0f060df89e6a7">dtmftimeout</a></div><div class="ttdeci">static int dtmftimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00193">res_rtp_asterisk.c:193</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a62f7bf8eadfec58f81f33a8c90458f15"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a62f7bf8eadfec58f81f33a8c90458f15">srtp_replay_protection</a></div><div class="ttdeci">static int srtp_replay_protection</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00209">res_rtp_asterisk.c:209</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a96336b3ac9e5b66f365f0ca5ba613995"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a></div><div class="ttdeci">static int strictrtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00206">res_rtp_asterisk.c:206</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4ec95260935fbacc0443e815297e61bb"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4ec95260935fbacc0443e815297e61bb">learning_min_sequential</a></div><div class="ttdeci">static int learning_min_sequential</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00207">res_rtp_asterisk.c:207</a></div></div>
<div class="ttc" id="cli_8h_html_a29e703082f8137e165097c41f249e6d1"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a></div><div class="ttdeci">#define AST_CLI_YESNO(x)</div><div class="ttdoc">Return Yes or No depending on the argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00071">cli.h:71</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4b0895b04a97fb8d38e0f15dfed4c9e0"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a></div><div class="ttdeci">static int rtpend</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00196">res_rtp_asterisk.c:196</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aef821ad4c8e25611b5fd4db4bf1bb60e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef821ad4c8e25611b5fd4db4bf1bb60e">&#9670;&nbsp;</a></span>host_candidate_overrides_clear()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void host_candidate_overrides_clear </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function which clears the ICE host candidate mapping. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00735">735</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00262">ast_rtp_ioqueue_thread::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09709">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;{</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db5/structast__ice__host__candidate.html">ast_ice_host_candidate</a> *candidate;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d7/db0/structhost__candidates.html">host_candidates</a>);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d7/db0/structhost__candidates.html">host_candidates</a>, candidate, next) {</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(next);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(candidate);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   }</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/db0/structhost__candidates.html">host_candidates</a>);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;}</div><div class="ttc" id="structhost__candidates_html"><div class="ttname"><a href="../../d7/db0/structhost__candidates.html">host_candidates</a></div><div class="ttdoc">List of ICE host candidate mappings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00277">res_rtp_asterisk.c:277</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__ice__host__candidate_html"><div class="ttname"><a href="../../d4/db5/structast__ice__host__candidate.html">ast_ice_host_candidate</a></div><div class="ttdoc">Structure which contains ICE host candidate mapping information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00269">res_rtp_asterisk.c:269</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a87bc4581242c6ec6310b35f120ca5906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87bc4581242c6ec6310b35f120ca5906">&#9670;&nbsp;</a></span>ice_candidate_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ice_candidate_cmp </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00806">806</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00479">ast_rtp_engine_ice_candidate::address</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00388">ast_sockaddr_cmp()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01032">CMP_STOP</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00475">ast_rtp_engine_ice_candidate::foundation</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00476">ast_rtp_engine_ice_candidate::id</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00481">ast_rtp_engine_ice_candidate::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01239">ast_rtp_ice_add_cand()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00821">ast_rtp_ice_add_remote_candidate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;{</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a> *candidate1 = obj, *candidate2 = arg;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   <span class="keywordflow">if</span> (strcmp(candidate1-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">foundation</a>, candidate2-&gt;foundation) ||</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;         candidate1-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">id</a> != candidate2-&gt;id ||</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;         candidate1-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">type</a> != candidate2-&gt;type ||</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(&amp;candidate1-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>, &amp;candidate2-&gt;address)) {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   }</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01032">astobj2.h:1032</a></div></div>
<div class="ttc" id="netsock2_8h_html_abae1b903c8f5b7639235b579a267aaab"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a></div><div class="ttdeci">int ast_sockaddr_cmp(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00388">netsock2.c:388</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a></div><div class="ttdoc">Structure for an ICE candidate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00474">rtp_engine.h:474</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a830a6b4139e5b1b513777994b90b2a9c"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">ast_rtp_engine_ice_candidate::type</a></div><div class="ttdeci">enum ast_rtp_ice_candidate_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00481">rtp_engine.h:481</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4b2c296e98c6e45d3f102dcec2d248da"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">ast_rtp_engine_ice_candidate::id</a></div><div class="ttdeci">enum ast_rtp_ice_component_type id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00476">rtp_engine.h:476</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4f20b037eb06eec1ae276f13beec7738"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">ast_rtp_engine_ice_candidate::foundation</a></div><div class="ttdeci">char * foundation</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00475">rtp_engine.h:475</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a06332befc0224dfca0e6562d84f5df73"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">ast_rtp_engine_ice_candidate::address</a></div><div class="ttdeci">struct ast_sockaddr address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00479">rtp_engine.h:479</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaac6e7b48030ec03f287fc3fd263a9b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaac6e7b48030ec03f287fc3fd263a9b7">&#9670;&nbsp;</a></span>ice_candidates_compare()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ice_candidates_compare </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td>
          <td class="paramname"><em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td>
          <td class="paramname"><em>right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01003">1003</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00034">ao2_container_count()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01154">OBJ_POINTER</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01031">ast_rtp_ice_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;{</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a> *right_candidate;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(left) != <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(right)) {</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   }</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(right, 0);</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;   <span class="keywordflow">while</span> ((right_candidate = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a> *left_candidate = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(left, right_candidate, <a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a>);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <span class="keywordflow">if</span> (!left_candidate) {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(right_candidate, -1);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      }</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(left_candidate, -1);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(right_candidate, -1);</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;   }</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2448088751e4d494d1981c7f4b84e8d0"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a></div><div class="ttdeci">#define OBJ_POINTER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01154">astobj2.h:1154</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a></div><div class="ttdoc">Structure for an ICE candidate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00474">rtp_engine.h:474</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a15d17ae297e9f6b5c781f98b4795341d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15d17ae297e9f6b5c781f98b4795341d">&#9670;&nbsp;</a></span>ice_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ice_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>replace</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03750">3750</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02898">ast_debug_ice</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00464">AST_RTP_ICE_COMPONENT_RTCP</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00463">AST_RTP_ICE_COMPONENT_RTP</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00891">ast_rtp_ice_stop()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00521">ast_sockaddr_port</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00233">cachingpool</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00916">ice_wrap_dtor()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">pj_thread_register_check()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">ice_wrap::real_ice</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00215">stun_software_attribute</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00239">timer_heap</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00292">TRANSPORT_SOCKET_RTCP</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00291">TRANSPORT_SOCKET_RTP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00959">ice_reset_session()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">pj_thread_register_check()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">rtp_allocate_transport()</a>.</p>
<div class="fragment"><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;{</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;   pj_stun_config stun_config;</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;   pj_str_t ufrag, passwd;</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;   pj_status_t <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/db8/structice__wrap.html">ice_wrap</a> *ice_old;</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/db8/structice__wrap.html">ice_wrap</a> *ice;</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;   pj_ice_sess *<a class="code" href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">real_ice</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;</div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(rtp-&gt;ice_local_candidates);</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;   rtp-&gt;ice_local_candidates = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE create%s\n&quot;</span>, instance, <a class="code" href="../../d9/d1e/func__strings_8c.html#a7f763283c27da5574f6f8d1b2a2b9288">replace</a> ? <span class="stringliteral">&quot; and replace&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;   ice = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*ice), <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae5f8ddbef49d8b7f61c257946028dc73">ice_wrap_dtor</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;   <span class="keywordflow">if</span> (!ice) {</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad1bbfc1e97ca48872b4ff30e27cbe996">ast_rtp_ice_stop</a>(instance);</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;   }</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a>();</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;   pj_stun_config_init(&amp;stun_config, &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a>.factory, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae9f993fcad1fd49cb50f4a541101ccb7">timer_heap</a>);</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aac9d720f1922d92f186b0df72b624ea0">stun_software_attribute</a>) {</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;      stun_config.software_name = pj_str(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;   }</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;   ufrag = pj_str(rtp-&gt;local_ufrag);</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;   passwd = pj_str(rtp-&gt;local_passwd);</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;   <span class="comment">/* Release the instance lock to avoid deadlock with PJPROJECT group lock */</span></div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;   <span class="comment">/* Create an ICE session for ICE negotiation */</span></div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;   status = pj_ice_sess_create(&amp;stun_config, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, PJ_ICE_SESS_ROLE_UNKNOWN,</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;      rtp-&gt;ice_num_components, &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac0bfdc19ac1767b2a1f91b2933117370">ast_rtp_ice_sess_cb</a>, &amp;ufrag, &amp;passwd, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;real_ice);</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;   <span class="keywordflow">if</span> (status == PJ_SUCCESS) {</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;      <span class="comment">/* Safely complete linking the ICE session into the instance */</span></div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;      real_ice-&gt;user_data = instance;</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;      ice-&gt;<a class="code" href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">real_ice</a> = real_ice;</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;      ice_old = rtp-&gt;ice;</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;      rtp-&gt;ice = ice;</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;      <span class="keywordflow">if</span> (ice_old) {</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ice_old, -1);</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;      }</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;      <span class="comment">/* Add all of the available candidates to the ICE session */</span></div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab1b4c0024c8207e04e00c38d3b6341d5">rtp_add_candidates_to_ice</a>(instance, rtp, addr, port, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a>,</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a48d8ff743c69a9da11d543b387078590">TRANSPORT_SOCKET_RTP</a>);</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;      <span class="comment">/* Only add the RTCP candidates to ICE when replacing the session and if</span></div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;<span class="comment">       * the ICE session contains more than just an RTP component. New sessions</span></div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;<span class="comment">       * handle this in a separate part of the setup phase */</span></div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1e/func__strings_8c.html#a7f763283c27da5574f6f8d1b2a2b9288">replace</a> &amp;&amp; rtp-&gt;rtcp &amp;&amp; rtp-&gt;ice_num_components &gt; 1) {</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab1b4c0024c8207e04e00c38d3b6341d5">rtp_add_candidates_to_ice</a>(instance, rtp, &amp;rtp-&gt;rtcp-&gt;us,</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(&amp;rtp-&gt;rtcp-&gt;us), <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a>,</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad7249b0dec2fde720fe4a30d04ce3482">TRANSPORT_SOCKET_RTCP</a>);</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;      }</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;</div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;   }</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;<span class="comment">    * It is safe to unref this while instance is locked here.</span></div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;<span class="comment">    * It was not initialized with a real_ice pointer.</span></div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ice, -1);</div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad1bbfc1e97ca48872b4ff30e27cbe996">ast_rtp_ice_stop</a>(instance);</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;</div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00464">rtp_engine.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a12d9cba0dfd29f12cf2f87a4ab1252e2"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a></div><div class="ttdeci">static pj_caching_pool cachingpool</div><div class="ttdoc">Pool factory used by pjlib to allocate memory. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00233">res_rtp_asterisk.c:233</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ae5f8ddbef49d8b7f61c257946028dc73"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae5f8ddbef49d8b7f61c257946028dc73">ice_wrap_dtor</a></div><div class="ttdeci">static void ice_wrap_dtor(void *vdoomed)</div><div class="ttdoc">ao2 ICE wrapper object destructor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00916">res_rtp_asterisk.c:916</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aac9d720f1922d92f186b0df72b624ea0"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aac9d720f1922d92f186b0df72b624ea0">stun_software_attribute</a></div><div class="ttdeci">static int stun_software_attribute</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00215">res_rtp_asterisk.c:215</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac0bfdc19ac1767b2a1f91b2933117370"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac0bfdc19ac1767b2a1f91b2933117370">ast_rtp_ice_sess_cb</a></div><div class="ttdeci">static pj_ice_sess_cb ast_rtp_ice_sess_cb</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02717">res_rtp_asterisk.c:2717</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad1bbfc1e97ca48872b4ff30e27cbe996"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad1bbfc1e97ca48872b4ff30e27cbe996">ast_rtp_ice_stop</a></div><div class="ttdeci">static void ast_rtp_ice_stop(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00891">res_rtp_asterisk.c:891</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4884315209af5f6ecb90ba9ef0a70344"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a></div><div class="ttdeci">static void pj_thread_register_check(void)</div><div class="ttdoc">Function used to check if the calling thread is registered with pjlib. If it is not it will be regist...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">res_rtp_asterisk.c:865</a></div></div>
<div class="ttc" id="netsock2_8h_html_a51e2841175bf3ad58a4e11ad9fb2453f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a></div><div class="ttdeci">#define ast_sockaddr_port(addr)</div><div class="ttdoc">Get the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00521">netsock2.h:521</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ab1b4c0024c8207e04e00c38d3b6341d5"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab1b4c0024c8207e04e00c38d3b6341d5">rtp_add_candidates_to_ice</a></div><div class="ttdeci">static void rtp_add_candidates_to_ice(struct ast_rtp_instance *instance, struct ast_rtp *rtp, struct ast_sockaddr *addr, int port, int component, int transport)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">res_rtp_asterisk.c:3522</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structice__wrap_html"><div class="ttname"><a href="../../d9/db8/structice__wrap.html">ice_wrap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00320">res_rtp_asterisk.c:320</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00463">rtp_engine.h:463</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaad9e84526c8d48bd3e980e732dd1f7df"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a></div><div class="ttdeci">#define ast_debug_ice(sublevel,...)</div><div class="ttdoc">Log debug level ICE information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02898">rtp_engine.h:2898</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="func__strings_8c_html_a7f763283c27da5574f6f8d1b2a2b9288"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#a7f763283c27da5574f6f8d1b2a2b9288">replace</a></div><div class="ttdeci">static int replace(struct ast_channel *chan, const char *cmd, char *data, struct ast_str **buf, ssize_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l00790">func_strings.c:790</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad7249b0dec2fde720fe4a30d04ce3482"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad7249b0dec2fde720fe4a30d04ce3482">TRANSPORT_SOCKET_RTCP</a></div><div class="ttdeci">#define TRANSPORT_SOCKET_RTCP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00292">res_rtp_asterisk.c:292</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ae9f993fcad1fd49cb50f4a541101ccb7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae9f993fcad1fd49cb50f4a541101ccb7">timer_heap</a></div><div class="ttdeci">static pj_timer_heap_t * timer_heap</div><div class="ttdoc">Global timer heap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00239">res_rtp_asterisk.c:239</a></div></div>
<div class="ttc" id="structice__wrap_html_a947772eea928bd56792836dc5c55dac9"><div class="ttname"><a href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">ice_wrap::real_ice</a></div><div class="ttdeci">pj_ice_sess * real_ice</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">res_rtp_asterisk.c:321</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a48d8ff743c69a9da11d543b387078590"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a48d8ff743c69a9da11d543b387078590">TRANSPORT_SOCKET_RTP</a></div><div class="ttdeci">#define TRANSPORT_SOCKET_RTP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00291">res_rtp_asterisk.c:291</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adde70b348dba6a01f45b8debf24fd536"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adde70b348dba6a01f45b8debf24fd536">&#9670;&nbsp;</a></span>ice_reset_session()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ice_reset_session </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00959">959</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00476">ao2_object_get_lockaddr()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00927">ast2pj_rtp_ice_role()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02898">ast_debug_ice</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00238">ast_samp2tv()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03750">ice_create()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00107">TURN_STATE_WAIT_TIME</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01734">ast_rtp_ice_change_components()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01031">ast_rtp_ice_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;{</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(3, <span class="stringliteral">&quot;(%p) ICE resetting\n&quot;</span>, instance);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;ice-&gt;real_ice-&gt;is_nominating &amp;&amp; !rtp-&gt;ice-&gt;real_ice-&gt;is_complete) {</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(3, <span class="stringliteral">&quot; (%p) ICE nevermind, not ready for a reset\n&quot;</span>, instance);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   }</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(3, <span class="stringliteral">&quot;(%p) ICE recreating ICE session %s (%d)\n&quot;</span>,</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;rtp-&gt;ice_original_rtp_addr), rtp-&gt;ice_port);</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a15d17ae297e9f6b5c781f98b4795341d">ice_create</a>(instance, &amp;rtp-&gt;ice_original_rtp_addr, rtp-&gt;ice_port, 1);</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      <span class="comment">/* Use the current expected role for the ICE session */</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <span class="keyword">enum</span> pj_ice_sess_role role = PJ_ICE_SESS_ROLE_UNKNOWN;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab6ad0b308e683619205502e38e17d24b">ast2pj_rtp_ice_role</a>(rtp-&gt;role, &amp;role);</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      pj_ice_sess_change_role(rtp-&gt;ice-&gt;real_ice, role);</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;   }</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;   <span class="comment">/* If we only have one component now, and we previously set up TURN for RTCP,</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment">    * we need to destroy that TURN socket.</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;ice_num_components == 1 &amp;&amp; rtp-&gt;turn_rtcp) {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <span class="keyword">struct </span>timeval wait = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a03f4d7d97d914208e1f779d1c09db7bb">TURN_STATE_WAIT_TIME</a>, 1000));</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <span class="keyword">struct </span>timespec ts = { .tv_sec = wait.tv_sec, .tv_nsec = wait.tv_usec * 1000, };</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      rtp-&gt;turn_state = PJ_TURN_STATE_NULL;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <span class="comment">/* Release the instance lock to avoid deadlock with PJPROJECT group lock */</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      pj_turn_sock_destroy(rtp-&gt;turn_rtcp);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <span class="keywordflow">while</span> (rtp-&gt;turn_state != PJ_TURN_STATE_DESTROYING) {</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;rtp-&gt;cond, <a class="code" href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a>(instance), &amp;ts);</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      }</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;   }</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   rtp-&gt;ice_media_started = 0;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ab6ad0b308e683619205502e38e17d24b"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab6ad0b308e683619205502e38e17d24b">ast2pj_rtp_ice_role</a></div><div class="ttdeci">static void ast2pj_rtp_ice_role(enum ast_rtp_ice_role ast_role, enum pj_ice_sess_role *pj_role)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00927">res_rtp_asterisk.c:927</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astobj2_8h_html_a503b6c7ced96f9b56ec59c115cbeb29a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a></div><div class="ttdeci">void * ao2_object_get_lockaddr(void *obj)</div><div class="ttdoc">Return the mutex lock address of an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00476">astobj2.c:476</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="time_8h_html_a1d774df72e3dbb623475783e06ce4f61"><div class="ttname"><a href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a></div><div class="ttdeci">struct timeval ast_samp2tv(unsigned int _nsamp, unsigned int _rate)</div><div class="ttdoc">Returns a timeval corresponding to the duration of n samples at rate r. Useful to convert samples to ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00238">time.h:238</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a03f4d7d97d914208e1f779d1c09db7bb"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a03f4d7d97d914208e1f779d1c09db7bb">TURN_STATE_WAIT_TIME</a></div><div class="ttdeci">#define TURN_STATE_WAIT_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00107">res_rtp_asterisk.c:107</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaad9e84526c8d48bd3e980e732dd1f7df"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a></div><div class="ttdeci">#define ast_debug_ice(sublevel,...)</div><div class="ttdoc">Log debug level ICE information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02898">rtp_engine.h:2898</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a15d17ae297e9f6b5c781f98b4795341d"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a15d17ae297e9f6b5c781f98b4795341d">ice_create</a></div><div class="ttdeci">static int ice_create(struct ast_rtp_instance *instance, struct ast_sockaddr *addr, int port, int replace)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03750">res_rtp_asterisk.c:3750</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae5f8ddbef49d8b7f61c257946028dc73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5f8ddbef49d8b7f61c257946028dc73">&#9670;&nbsp;</a></span>ice_wrap_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ice_wrap_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vdoomed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ao2 ICE wrapper object destructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vdoomed</td><td>Object being destroyed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The associated struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> object must not be locked when unreffing the object. Otherwise we could deadlock trying to destroy the PJPROJECT ICE structure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00916">916</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">pj_thread_register_check()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">ice_wrap::real_ice</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03750">ice_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;{</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/db8/structice__wrap.html">ice_wrap</a> *ice = vdoomed;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;   <span class="keywordflow">if</span> (ice-&gt;<a class="code" href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">real_ice</a>) {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a>();</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      pj_ice_sess_destroy(ice-&gt;<a class="code" href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">real_ice</a>);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;   }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a4884315209af5f6ecb90ba9ef0a70344"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a></div><div class="ttdeci">static void pj_thread_register_check(void)</div><div class="ttdoc">Function used to check if the calling thread is registered with pjlib. If it is not it will be regist...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">res_rtp_asterisk.c:865</a></div></div>
<div class="ttc" id="structice__wrap_html"><div class="ttname"><a href="../../d9/db8/structice__wrap.html">ice_wrap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00320">res_rtp_asterisk.c:320</a></div></div>
<div class="ttc" id="structice__wrap_html_a947772eea928bd56792836dc5c55dac9"><div class="ttname"><a href="../../d9/db8/structice__wrap.html#a947772eea928bd56792836dc5c55dac9">ice_wrap::real_ice</a></div><div class="ttdeci">pj_ice_sess * real_ice</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00321">res_rtp_asterisk.c:321</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abf03493a87472511142b26b9a2d27c87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf03493a87472511142b26b9a2d27c87">&#9670;&nbsp;</a></span>ioqueue_worker_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ioqueue_worker_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Worker thread for ioqueue and timerheap. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01454">1454</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00254">ast_rtp_ioqueue_thread::ioqueue</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00258">ast_rtp_ioqueue_thread::terminate</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00256">ast_rtp_ioqueue_thread::timerheap</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01512">rtp_ioqueue_thread_get_or_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;{</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html">ast_rtp_ioqueue_thread</a> *<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a90235fd4bf5d3d36f1b72255eb0a3eea">ioqueue</a> = data;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;   <span class="keywordflow">while</span> (!ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a1111f678042df19d49f4b718b3d0582c">terminate</a>) {</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      <span class="keyword">const</span> pj_time_val delay = {0, 10};</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      pj_ioqueue_poll(ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a90235fd4bf5d3d36f1b72255eb0a3eea">ioqueue</a>, &amp;delay);</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;      pj_timer_heap_poll(ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a3e99b304fddd76c59ccae669dcdefb82">timerheap</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;   }</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;}</div><div class="ttc" id="structast__rtp__ioqueue__thread_html"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html">ast_rtp_ioqueue_thread</a></div><div class="ttdoc">Structure which contains ioqueue thread information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00248">res_rtp_asterisk.c:248</a></div></div>
<div class="ttc" id="structast__rtp__ioqueue__thread_html_a1111f678042df19d49f4b718b3d0582c"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html#a1111f678042df19d49f4b718b3d0582c">ast_rtp_ioqueue_thread::terminate</a></div><div class="ttdeci">int terminate</div><div class="ttdoc">Termination request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00258">res_rtp_asterisk.c:258</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__rtp__ioqueue__thread_html_a90235fd4bf5d3d36f1b72255eb0a3eea"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html#a90235fd4bf5d3d36f1b72255eb0a3eea">ast_rtp_ioqueue_thread::ioqueue</a></div><div class="ttdeci">pj_ioqueue_t * ioqueue</div><div class="ttdoc">Ioqueue which polls on sockets. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00254">res_rtp_asterisk.c:254</a></div></div>
<div class="ttc" id="structast__rtp__ioqueue__thread_html_a3e99b304fddd76c59ccae669dcdefb82"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html#a3e99b304fddd76c59ccae669dcdefb82">ast_rtp_ioqueue_thread::timerheap</a></div><div class="ttdeci">pj_timer_heap_t * timerheap</div><div class="ttdoc">Timer heap for scheduled items. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00256">res_rtp_asterisk.c:256</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09624">9624</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00465">ast_pjproject_caching_pool_init()</a>, <a class="el" href="../../d7/d5b/options_8h_source.html#l00166">AST_PJPROJECT_INIT_LOG_LEVEL</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00794">ast_rtp_engine_register</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00364">ast_rtp_engine_unregister()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00233">cachingpool</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01133">PARSE_PORT_IGNORE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00250">ast_rtp_ioqueue_thread::pool</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09599">rtp_terminate_pjproject()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00239">timer_heap</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00242">timer_thread</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02727">timer_worker_thread()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09709">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l09625"></a><span class="lineno"> 9625</span>&#160;{</div><div class="line"><a name="l09626"></a><span class="lineno"> 9626</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l09627"></a><span class="lineno"> 9627</span>&#160;   pj_lock_t *<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>;</div><div class="line"><a name="l09628"></a><span class="lineno"> 9628</span>&#160;</div><div class="line"><a name="l09629"></a><span class="lineno"> 9629</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae3e4a18170e8b5a1f73042adc647455f">lo6</a>, <span class="stringliteral">&quot;::1&quot;</span>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d">PARSE_PORT_IGNORE</a>);</div><div class="line"><a name="l09630"></a><span class="lineno"> 9630</span>&#160;</div><div class="line"><a name="l09631"></a><span class="lineno"> 9631</span>&#160;   <a class="code" href="../../d7/d5b/options_8h.html#aabc97e2179f7386ad424681b71cb7541">AST_PJPROJECT_INIT_LOG_LEVEL</a>();</div><div class="line"><a name="l09632"></a><span class="lineno"> 9632</span>&#160;   <span class="keywordflow">if</span> (pj_init() != PJ_SUCCESS) {</div><div class="line"><a name="l09633"></a><span class="lineno"> 9633</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l09634"></a><span class="lineno"> 9634</span>&#160;   }</div><div class="line"><a name="l09635"></a><span class="lineno"> 9635</span>&#160;</div><div class="line"><a name="l09636"></a><span class="lineno"> 9636</span>&#160;   <span class="keywordflow">if</span> (pjlib_util_init() != PJ_SUCCESS) {</div><div class="line"><a name="l09637"></a><span class="lineno"> 9637</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af8a0d1a6b0e61b0fd209699d8a718226">rtp_terminate_pjproject</a>();</div><div class="line"><a name="l09638"></a><span class="lineno"> 9638</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l09639"></a><span class="lineno"> 9639</span>&#160;   }</div><div class="line"><a name="l09640"></a><span class="lineno"> 9640</span>&#160;</div><div class="line"><a name="l09641"></a><span class="lineno"> 9641</span>&#160;   <span class="keywordflow">if</span> (pjnath_init() != PJ_SUCCESS) {</div><div class="line"><a name="l09642"></a><span class="lineno"> 9642</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af8a0d1a6b0e61b0fd209699d8a718226">rtp_terminate_pjproject</a>();</div><div class="line"><a name="l09643"></a><span class="lineno"> 9643</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l09644"></a><span class="lineno"> 9644</span>&#160;   }</div><div class="line"><a name="l09645"></a><span class="lineno"> 9645</span>&#160;</div><div class="line"><a name="l09646"></a><span class="lineno"> 9646</span>&#160;   <a class="code" href="../../df/dd5/res__pjproject_8h.html#a87bb9df420d237f2b5eefa7adaa78b01">ast_pjproject_caching_pool_init</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a>, &amp;pj_pool_factory_default_policy, 0);</div><div class="line"><a name="l09647"></a><span class="lineno"> 9647</span>&#160;</div><div class="line"><a name="l09648"></a><span class="lineno"> 9648</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = pj_pool_create(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a>.factory, <span class="stringliteral">&quot;timer&quot;</span>, 512, 512, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l09649"></a><span class="lineno"> 9649</span>&#160;</div><div class="line"><a name="l09650"></a><span class="lineno"> 9650</span>&#160;   <span class="keywordflow">if</span> (pj_timer_heap_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, 100, &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae9f993fcad1fd49cb50f4a541101ccb7">timer_heap</a>) != PJ_SUCCESS) {</div><div class="line"><a name="l09651"></a><span class="lineno"> 9651</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af8a0d1a6b0e61b0fd209699d8a718226">rtp_terminate_pjproject</a>();</div><div class="line"><a name="l09652"></a><span class="lineno"> 9652</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l09653"></a><span class="lineno"> 9653</span>&#160;   }</div><div class="line"><a name="l09654"></a><span class="lineno"> 9654</span>&#160;</div><div class="line"><a name="l09655"></a><span class="lineno"> 9655</span>&#160;   <span class="keywordflow">if</span> (pj_lock_create_recursive_mutex(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;rtp%p&quot;</span>, &amp;lock) != PJ_SUCCESS) {</div><div class="line"><a name="l09656"></a><span class="lineno"> 9656</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af8a0d1a6b0e61b0fd209699d8a718226">rtp_terminate_pjproject</a>();</div><div class="line"><a name="l09657"></a><span class="lineno"> 9657</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l09658"></a><span class="lineno"> 9658</span>&#160;   }</div><div class="line"><a name="l09659"></a><span class="lineno"> 9659</span>&#160;</div><div class="line"><a name="l09660"></a><span class="lineno"> 9660</span>&#160;   pj_timer_heap_set_lock(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae9f993fcad1fd49cb50f4a541101ccb7">timer_heap</a>, lock, PJ_TRUE);</div><div class="line"><a name="l09661"></a><span class="lineno"> 9661</span>&#160;</div><div class="line"><a name="l09662"></a><span class="lineno"> 9662</span>&#160;   <span class="keywordflow">if</span> (pj_thread_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;timer&quot;</span>, &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aaa8322f30d6ca185866395af0577bf32">timer_worker_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, 0, &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af4ede498f08f6025306ce45fe163f298">timer_thread</a>) != PJ_SUCCESS) {</div><div class="line"><a name="l09663"></a><span class="lineno"> 9663</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af8a0d1a6b0e61b0fd209699d8a718226">rtp_terminate_pjproject</a>();</div><div class="line"><a name="l09664"></a><span class="lineno"> 9664</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l09665"></a><span class="lineno"> 9665</span>&#160;   }</div><div class="line"><a name="l09666"></a><span class="lineno"> 9666</span>&#160;</div><div class="line"><a name="l09667"></a><span class="lineno"> 9667</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09668"></a><span class="lineno"> 9668</span>&#160;</div><div class="line"><a name="l09669"></a><span class="lineno"> 9669</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP) &amp;&amp; defined(HAVE_OPENSSL_BIO_METHOD)</span></div><div class="line"><a name="l09670"></a><span class="lineno"> 9670</span>&#160;   dtls_bio_methods = BIO_meth_new(BIO_TYPE_BIO, <span class="stringliteral">&quot;rtp write&quot;</span>);</div><div class="line"><a name="l09671"></a><span class="lineno"> 9671</span>&#160;   <span class="keywordflow">if</span> (!dtls_bio_methods) {</div><div class="line"><a name="l09672"></a><span class="lineno"> 9672</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l09673"></a><span class="lineno"> 9673</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af8a0d1a6b0e61b0fd209699d8a718226">rtp_terminate_pjproject</a>();</div><div class="line"><a name="l09674"></a><span class="lineno"> 9674</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09675"></a><span class="lineno"> 9675</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l09676"></a><span class="lineno"> 9676</span>&#160;   }</div><div class="line"><a name="l09677"></a><span class="lineno"> 9677</span>&#160;   BIO_meth_set_write(dtls_bio_methods, dtls_bio_write);</div><div class="line"><a name="l09678"></a><span class="lineno"> 9678</span>&#160;   BIO_meth_set_ctrl(dtls_bio_methods, dtls_bio_ctrl);</div><div class="line"><a name="l09679"></a><span class="lineno"> 9679</span>&#160;   BIO_meth_set_create(dtls_bio_methods, dtls_bio_new);</div><div class="line"><a name="l09680"></a><span class="lineno"> 9680</span>&#160;   BIO_meth_set_destroy(dtls_bio_methods, dtls_bio_free);</div><div class="line"><a name="l09681"></a><span class="lineno"> 9681</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09682"></a><span class="lineno"> 9682</span>&#160;</div><div class="line"><a name="l09683"></a><span class="lineno"> 9683</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/rtp__engine_8h.html#afb1149b0aee8d6417f5336fc3b4288fd">ast_rtp_engine_register</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a44a4250e68a4aa76f545a8643afaf0fe">asterisk_rtp_engine</a>)) {</div><div class="line"><a name="l09684"></a><span class="lineno"> 9684</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP) &amp;&amp; defined(HAVE_OPENSSL_BIO_METHOD)</span></div><div class="line"><a name="l09685"></a><span class="lineno"> 9685</span>&#160;      BIO_meth_free(dtls_bio_methods);</div><div class="line"><a name="l09686"></a><span class="lineno"> 9686</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09687"></a><span class="lineno"> 9687</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l09688"></a><span class="lineno"> 9688</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af8a0d1a6b0e61b0fd209699d8a718226">rtp_terminate_pjproject</a>();</div><div class="line"><a name="l09689"></a><span class="lineno"> 9689</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09690"></a><span class="lineno"> 9690</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l09691"></a><span class="lineno"> 9691</span>&#160;   }</div><div class="line"><a name="l09692"></a><span class="lineno"> 9692</span>&#160;</div><div class="line"><a name="l09693"></a><span class="lineno"> 9693</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa5f5020c8ed253374c8aead44db57c16">cli_rtp</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa5f5020c8ed253374c8aead44db57c16">cli_rtp</a>))) {</div><div class="line"><a name="l09694"></a><span class="lineno"> 9694</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP) &amp;&amp; defined(HAVE_OPENSSL_BIO_METHOD)</span></div><div class="line"><a name="l09695"></a><span class="lineno"> 9695</span>&#160;      BIO_meth_free(dtls_bio_methods);</div><div class="line"><a name="l09696"></a><span class="lineno"> 9696</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09697"></a><span class="lineno"> 9697</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l09698"></a><span class="lineno"> 9698</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#add142521845774a8b3cbf6ba2693aeff">ast_rtp_engine_unregister</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a44a4250e68a4aa76f545a8643afaf0fe">asterisk_rtp_engine</a>);</div><div class="line"><a name="l09699"></a><span class="lineno"> 9699</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af8a0d1a6b0e61b0fd209699d8a718226">rtp_terminate_pjproject</a>();</div><div class="line"><a name="l09700"></a><span class="lineno"> 9700</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09701"></a><span class="lineno"> 9701</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l09702"></a><span class="lineno"> 9702</span>&#160;   }</div><div class="line"><a name="l09703"></a><span class="lineno"> 9703</span>&#160;</div><div class="line"><a name="l09704"></a><span class="lineno"> 9704</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a0fd33c0dc833ac5b48e7990897319088">rtp_reload</a>(0, 0);</div><div class="line"><a name="l09705"></a><span class="lineno"> 9705</span>&#160;</div><div class="line"><a name="l09706"></a><span class="lineno"> 9706</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l09707"></a><span class="lineno"> 9707</span>&#160;}</div><div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d">PARSE_PORT_IGNORE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01133">include/asterisk/config.h:1133</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a0fd33c0dc833ac5b48e7990897319088"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a0fd33c0dc833ac5b48e7990897319088">rtp_reload</a></div><div class="ttdeci">static int rtp_reload(int reload, int by_external_config)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">res_rtp_asterisk.c:9346</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_afb1149b0aee8d6417f5336fc3b4288fd"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#afb1149b0aee8d6417f5336fc3b4288fd">ast_rtp_engine_register</a></div><div class="ttdeci">#define ast_rtp_engine_register(engine)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00794">rtp_engine.h:794</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="netsock2_8h_html_aad98818272870e12d48fe4347aaa46d0"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a></div><div class="ttdeci">int ast_sockaddr_parse(struct ast_sockaddr *addr, const char *str, int flags)</div><div class="ttdoc">Parse an IPv4 or IPv6 address string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00230">netsock2.c:230</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a12d9cba0dfd29f12cf2f87a4ab1252e2"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a></div><div class="ttdeci">static pj_caching_pool cachingpool</div><div class="ttdoc">Pool factory used by pjlib to allocate memory. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00233">res_rtp_asterisk.c:233</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aaa8322f30d6ca185866395af0577bf32"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aaa8322f30d6ca185866395af0577bf32">timer_worker_thread</a></div><div class="ttdeci">static int timer_worker_thread(void *data)</div><div class="ttdoc">Worker thread for timerheap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02727">res_rtp_asterisk.c:2727</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ae3e4a18170e8b5a1f73042adc647455f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae3e4a18170e8b5a1f73042adc647455f">lo6</a></div><div class="ttdeci">static struct ast_sockaddr lo6</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00222">res_rtp_asterisk.c:222</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_add142521845774a8b3cbf6ba2693aeff"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#add142521845774a8b3cbf6ba2693aeff">ast_rtp_engine_unregister</a></div><div class="ttdeci">int ast_rtp_engine_unregister(struct ast_rtp_engine *engine)</div><div class="ttdoc">Unregister an RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00364">rtp_engine.c:364</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af8a0d1a6b0e61b0fd209699d8a718226"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af8a0d1a6b0e61b0fd209699d8a718226">rtp_terminate_pjproject</a></div><div class="ttdeci">static void rtp_terminate_pjproject(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09599">res_rtp_asterisk.c:9599</a></div></div>
<div class="ttc" id="res__pjproject_8h_html_a87bb9df420d237f2b5eefa7adaa78b01"><div class="ttname"><a href="../../df/dd5/res__pjproject_8h.html#a87bb9df420d237f2b5eefa7adaa78b01">ast_pjproject_caching_pool_init</a></div><div class="ttdeci">void ast_pjproject_caching_pool_init(pj_caching_pool *cp, const pj_pool_factory_policy *policy, pj_size_t max_capacity)</div><div class="ttdoc">Initialize the caching pool factory. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/deb/res__pjproject_8c_source.html#l00465">res_pjproject.c:465</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af4ede498f08f6025306ce45fe163f298"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af4ede498f08f6025306ce45fe163f298">timer_thread</a></div><div class="ttdeci">static pj_thread_t * timer_thread</div><div class="ttdoc">Thread executing the timer heap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00242">res_rtp_asterisk.c:242</a></div></div>
<div class="ttc" id="options_8h_html_aabc97e2179f7386ad424681b71cb7541"><div class="ttname"><a href="../../d7/d5b/options_8h.html#aabc97e2179f7386ad424681b71cb7541">AST_PJPROJECT_INIT_LOG_LEVEL</a></div><div class="ttdeci">#define AST_PJPROJECT_INIT_LOG_LEVEL()</div><div class="ttdoc">Get maximum log level pjproject was compiled with. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00166">options.h:166</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa5f5020c8ed253374c8aead44db57c16"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa5f5020c8ed253374c8aead44db57c16">cli_rtp</a></div><div class="ttdeci">static struct ast_cli_entry cli_rtp[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09336">res_rtp_asterisk.c:9336</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a44a4250e68a4aa76f545a8643afaf0fe"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a44a4250e68a4aa76f545a8643afaf0fe">asterisk_rtp_engine</a></div><div class="ttdeci">static struct ast_rtp_engine asterisk_rtp_engine</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02484">res_rtp_asterisk.c:2484</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ae9f993fcad1fd49cb50f4a541101ccb7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae9f993fcad1fd49cb50f4a541101ccb7">timer_heap</a></div><div class="ttdeci">static pj_timer_heap_t * timer_heap</div><div class="ttdoc">Global timer heap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00239">res_rtp_asterisk.c:239</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1635c093c05170fc6fea298ff747093f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1635c093c05170fc6fea298ff747093f">&#9670;&nbsp;</a></span>ntp2timeval()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ntp2timeval </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>msw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>lsw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval *&#160;</td>
          <td class="paramname"><em>tv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04421">4421</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;{</div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;   tv-&gt;tv_sec = msw - 2208988800u;</div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;   <span class="comment">/* Reverse the sequence in timeval2ntp() */</span></div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;   tv-&gt;tv_usec = ((((lsw &gt;&gt; 7) * 125) &gt;&gt; 7) * 125) &gt;&gt; 12;</div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a2b5dd245c590a95f5f58c1e54d4650f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b5dd245c590a95f5f58c1e54d4650f5">&#9670;&nbsp;</a></span>pj2ast_rtp_ice_role()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pj2ast_rtp_ice_role </td>
          <td>(</td>
          <td class="paramtype">enum pj_ice_sess_role&#160;</td>
          <td class="paramname"><em>pj_role</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fb">ast_rtp_ice_role</a> *&#160;</td>
          <td class="paramname"><em>ast_role</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00939">939</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00469">AST_RTP_ICE_ROLE_CONTROLLED</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00470">AST_RTP_ICE_ROLE_CONTROLLING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01031">ast_rtp_ice_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;{</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <span class="keywordflow">switch</span> (pj_role) {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   <span class="keywordflow">case</span> PJ_ICE_SESS_ROLE_CONTROLLED:</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      *ast_role = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fba68f759b4c56106f7dbde793a886170d1">AST_RTP_ICE_ROLE_CONTROLLED</a>;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   <span class="keywordflow">case</span> PJ_ICE_SESS_ROLE_CONTROLLING:</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      *ast_role = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fba0a8d3389c5ab721fe23150a3d7f6da41">AST_RTP_ICE_ROLE_CONTROLLING</a>;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   <span class="keywordflow">case</span> PJ_ICE_SESS_ROLE_UNKNOWN:</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      <span class="comment">/* Don&#39;t change anything */</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <span class="comment">/* If we aren&#39;t explicitly handling something, it&#39;s a bug */</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;   }</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0758b5402aff85ff35e08f7d482308fba0a8d3389c5ab721fe23150a3d7f6da41"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fba0a8d3389c5ab721fe23150a3d7f6da41">AST_RTP_ICE_ROLE_CONTROLLING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00470">rtp_engine.h:470</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0758b5402aff85ff35e08f7d482308fba68f759b4c56106f7dbde793a886170d1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fba68f759b4c56106f7dbde793a886170d1">AST_RTP_ICE_ROLE_CONTROLLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00469">rtp_engine.h:469</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4884315209af5f6ecb90ba9ef0a70344"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4884315209af5f6ecb90ba9ef0a70344">&#9670;&nbsp;</a></span>pj_thread_register_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pj_thread_register_check </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function used to check if the calling thread is registered with pjlib. If it is not it will be registered. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">865</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dc/d7d/threadstorage_8h_source.html#l00197">ast_threadstorage_get()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00073">desc</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03750">ice_create()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00862">pj_thread_storage</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l00790">replace()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00252">ast_rtp_ioqueue_thread::thread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03084">__rtp_recvfrom()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03247">__rtp_sendto()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01239">ast_rtp_ice_add_cand()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01201">ast_rtp_ice_lite()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01215">ast_rtp_ice_set_role()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01031">ast_rtp_ice_start()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03750">ice_create()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00916">ice_wrap_dtor()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03901">rtp_deallocate_transport()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09599">rtp_terminate_pjproject()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09709">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;{</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;   pj_thread_desc *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   pj_thread_t *<a class="code" href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;   <span class="keywordflow">if</span> (pj_thread_is_registered() == PJ_TRUE) {</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;   }</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   desc = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a885e6f9577102981b862e68b879057ce">pj_thread_storage</a>, <span class="keyword">sizeof</span>(pj_thread_desc));</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   <span class="keywordflow">if</span> (!desc) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not get thread desc from thread-local storage. Expect awful things to occur\n&quot;</span>);</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;   }</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   pj_bzero(*desc, <span class="keyword">sizeof</span>(*desc));</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   <span class="keywordflow">if</span> (pj_thread_register(<span class="stringliteral">&quot;Asterisk Thread&quot;</span>, *desc, &amp;thread) != PJ_SUCCESS) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Coudln&#39;t register thread with PJLIB.\n&quot;</span>);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;}</div><div class="ttc" id="app__meetme_8c_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01089">app_meetme.c:1089</a></div></div>
<div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a787f82faccb7c1f40a2539a14855601b"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a></div><div class="ttdeci">static const char desc[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00073">cdr_mysql.c:73</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a885e6f9577102981b862e68b879057ce"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a885e6f9577102981b862e68b879057ce">pj_thread_storage</a></div><div class="ttdeci">static struct ast_threadstorage pj_thread_storage</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00862">res_rtp_asterisk.c:862</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ababe6a4928e53febfa8850584b9d88d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ababe6a4928e53febfa8850584b9d88d7">&#9670;&nbsp;</a></span>process_cn_rfc3389()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* process_cn_rfc3389 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>seqno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>payloadtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mark</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05724">5724</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02864">ast_debug_rtp_packet_is_allowed</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00121">AST_FRAME_CNG</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">AST_FRIENDLY_OFFSET</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00185">ast_frame::delivery</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">ast_rtp::f</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00283">FLAG_3389_WARNING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">ast_frame::offset</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00371">ast_rtp::rawdata</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">ast_rtp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;{</div><div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;</div><div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;   <span class="comment">/* Convert comfort noise into audio with various codecs.  Unfortunately this doesn&#39;t</span></div><div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;<span class="comment">      totally help us out becuase we don&#39;t have an engine to keep it going and we are not</span></div><div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;<span class="comment">      guaranteed to have it every 20ms or anything */</span></div><div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a>) {</div><div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(0, <span class="stringliteral">&quot;- RTP 3389 Comfort noise event: Format %s (len = %d)\n&quot;</span>,</div><div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;         <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(rtp-&gt;lastrxformat), <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;   }</div><div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;</div><div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(rtp, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a1b696f676e4e78260e3356973f647034">FLAG_3389_WARNING</a>)) {</div><div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address = { {0,} };</div><div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;</div><div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(instance, &amp;remote_address);</div><div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;</div><div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Comfort noise support incomplete in Asterisk (RFC 3389). Please turn off on client if possible. Client address: %s\n&quot;</span>,</div><div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address));</div><div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(rtp, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a1b696f676e4e78260e3356973f647034">FLAG_3389_WARNING</a>);</div><div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;   }</div><div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;</div><div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;   <span class="comment">/* Must have at least one byte */</span></div><div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>) {</div><div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;   }</div><div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> &lt; 24) {</div><div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a8af53bd0e8b4f1e9275d51d2a4065991">rawdata</a> + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> - 1;</div><div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;      memcpy(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, data + 1, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> - 1);</div><div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = 0;</div><div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = 0;</div><div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;   }</div><div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4">AST_FRAME_CNG</a>;</div><div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = data[0] &amp; 0x7f;</div><div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = 0;</div><div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;   rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>.tv_usec = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>.tv_sec = 0;</div><div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;</div><div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;   <span class="keywordflow">return</span> &amp;rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">f</a>;</div><div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a1b696f676e4e78260e3356973f647034"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a1b696f676e4e78260e3356973f647034">FLAG_3389_WARNING</a></div><div class="ttdeci">#define FLAG_3389_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00283">res_rtp_asterisk.c:283</a></div></div>
<div class="ttc" id="structast__frame_html_aed7ea92f45bd273dde380a45ddced592"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">ast_frame::offset</a></div><div class="ttdeci">int offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">include/asterisk/frame.h:179</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="structast__rtp_html_a8af53bd0e8b4f1e9275d51d2a4065991"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a8af53bd0e8b4f1e9275d51d2a4065991">ast_rtp::rawdata</a></div><div class="ttdeci">unsigned char rawdata[8192+AST_FRIENDLY_OFFSET]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00371">res_rtp_asterisk.c:371</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac8f7380b8620c80443286b44481f641c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a></div><div class="ttdeci">#define AST_FRIENDLY_OFFSET</div><div class="ttdoc">Offset into a frame&amp;#39;s data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">include/asterisk/frame.h:229</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga5009aeec1269fecc5f4e04c1c479116d"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a></div><div class="ttdeci">#define ast_debug_rtp_packet_is_allowed</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02864">rtp_engine.h:2864</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4">AST_FRAME_CNG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00121">include/asterisk/frame.h:121</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__rtp_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a735f764b1095611ace084e7c6c06857d">ast_rtp::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00370">res_rtp_asterisk.c:370</a></div></div>
<div class="ttc" id="structast__frame_html_a41a708025486b4c9383e7432e9ba3f0e"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">ast_frame::delivery</a></div><div class="ttdeci">struct timeval delivery</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00185">include/asterisk/frame.h:185</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1483ca8227852811b993309a78562067"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1483ca8227852811b993309a78562067">&#9670;&nbsp;</a></span>process_dtmf_cisco()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* process_dtmf_cisco </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>seqno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>payloadtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mark</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05644">5644</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02864">ast_debug_rtp_packet_is_allowed</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">AST_FRAME_DTMF_BEGIN</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">AST_FRAME_DTMF_END</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l04030">ast_rtp_get_rate()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00716">ast_rtp_instance_get_prop()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00119">AST_RTP_PROPERTY_DTMF_COMPENSATE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05463">create_dtmf_frame()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, and <a class="el" href="../../d7/d81/app__sms_8c_source.html#l00120">seq</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">ast_rtp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;{</div><div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d7d/structevent.html">event</a>, flags, power;</div><div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;   <span class="keywordtype">char</span> resp = 0;</div><div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="../../d7/d81/app__sms_8c.html#a8514112da88a5d13451aaf8c9b064017">seq</a>;</div><div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;</div><div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> &lt; 4) {</div><div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;   }</div><div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;</div><div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;   <span class="comment">/*      The format of Cisco RTP DTMF packet looks like next:</span></div><div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;<span class="comment">      +0                              - sequence number of DTMF RTP packet (begins from 1,</span></div><div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;<span class="comment">                    wrapped to 0)</span></div><div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;<span class="comment">      +1                              - set of flags</span></div><div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;<span class="comment">      +1 (bit 0)              - flaps by different DTMF digits delimited by audio</span></div><div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;<span class="comment">                    or repeated digit without audio???</span></div><div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;<span class="comment">      +2 (+4,+6,...)  - power level? (rises from 0 to 32 at begin of tone</span></div><div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;<span class="comment">                    then falls to 0 at its end)</span></div><div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;<span class="comment">      +3 (+5,+7,...)  - detected DTMF digit (0..9,*,#,A-D,...)</span></div><div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;<span class="comment">      Repeated DTMF information (bytes 4/5, 6/7) is history shifted right</span></div><div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;<span class="comment">      by each new packet and thus provides some redudancy.</span></div><div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;<span class="comment">      Sample of Cisco RTP DTMF packet is (all data in hex):</span></div><div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;<span class="comment">         19 07 00 02 12 02 20 02</span></div><div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;<span class="comment">      showing end of DTMF digit &#39;2&#39;.</span></div><div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;<span class="comment">      The packets</span></div><div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;<span class="comment">         27 07 00 02 0A 02 20 02</span></div><div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;<span class="comment">         28 06 20 02 00 02 0A 02</span></div><div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;<span class="comment">      shows begin of new digit &#39;2&#39; with very short pause (20 ms) after</span></div><div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;<span class="comment">      previous digit &#39;2&#39;. Bit +1.0 flips at begin of new digit.</span></div><div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;<span class="comment">      Cisco RTP DTMF packets comes as replacement of audio RTP packets</span></div><div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;<span class="comment">      so its uses the same sequencing and timestamping rules as replaced</span></div><div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;<span class="comment">      audio packets. Repeat interval of DTMF packets is 20 ms and not rely</span></div><div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;<span class="comment">      on audio framing parameters. Marker bit isn&#39;t used within stream of</span></div><div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;<span class="comment">      DTMFs nor audio stream coming immediately after DTMF stream. Timestamps</span></div><div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;<span class="comment">      are not sequential at borders between DTMF and audio streams,</span></div><div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;</div><div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;   seq = <a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>[0];</div><div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;   flags = <a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>[1];</div><div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;   power = <a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>[2];</div><div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;   <span class="keyword">event</span> = <a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>[3] &amp; 0x1f;</div><div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;</div><div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a>)</div><div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(0, <span class="stringliteral">&quot;Cisco DTMF Digit: %02x (len=%d, seq=%d, flags=%02x, power=%u, history count=%d)\n&quot;</span>, event, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, seq, flags, power, (<a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> - 4) / 2);</div><div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;   <span class="keywordflow">if</span> (event &lt; 10) {</div><div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;      resp = <span class="charliteral">&#39;0&#39;</span> + event;</div><div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event &lt; 11) {</div><div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;      resp = <span class="charliteral">&#39;*&#39;</span>;</div><div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event &lt; 12) {</div><div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;      resp = <span class="charliteral">&#39;#&#39;</span>;</div><div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event &lt; 16) {</div><div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;      resp = <span class="charliteral">&#39;A&#39;</span> + (<span class="keyword">event</span> - 12);</div><div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event &lt; 17) {</div><div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;      resp = <span class="charliteral">&#39;X&#39;</span>;</div><div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;   }</div><div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;   <span class="keywordflow">if</span> ((!rtp-&gt;resp &amp;&amp; power) || (rtp-&gt;resp &amp;&amp; (rtp-&gt;resp != resp))) {</div><div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;      rtp-&gt;resp = resp;</div><div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;      <span class="comment">/* Why we should care on DTMF compensation at reception? */</span></div><div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914caed6b528e252b3896d2b220f1805c3d63">AST_RTP_PROPERTY_DTMF_COMPENSATE</a>)) {</div><div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;         f = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d07f83ec38c7407d5c3e98936269221">create_dtmf_frame</a>(instance, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a>, 0);</div><div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;         rtp-&gt;dtmfsamples = 0;</div><div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;      }</div><div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((rtp-&gt;resp == resp) &amp;&amp; !power) {</div><div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;      f = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d07f83ec38c7407d5c3e98936269221">create_dtmf_frame</a>(instance, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914caed6b528e252b3896d2b220f1805c3d63">AST_RTP_PROPERTY_DTMF_COMPENSATE</a>));</div><div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;      f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = rtp-&gt;dtmfsamples * (<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a>(rtp-&gt;lastrxformat) / 1000);</div><div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;      rtp-&gt;resp = 0;</div><div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rtp-&gt;resp == resp) {</div><div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;      rtp-&gt;dtmfsamples += 20 * (<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a>(rtp-&gt;lastrxformat) / 1000);</div><div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;   }</div><div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;</div><div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;   rtp-&gt;dtmf_timeout = 0;</div><div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;</div><div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;   <span class="keywordflow">return</span> f;</div><div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914caed6b528e252b3896d2b220f1805c3d63"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914caed6b528e252b3896d2b220f1805c3d63">AST_RTP_PROPERTY_DTMF_COMPENSATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00119">rtp_engine.h:119</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4d07f83ec38c7407d5c3e98936269221"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4d07f83ec38c7407d5c3e98936269221">create_dtmf_frame</a></div><div class="ttdeci">static struct ast_frame * create_dtmf_frame(struct ast_rtp_instance *instance, enum ast_frame_type type, int compensate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05463">res_rtp_asterisk.c:5463</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga85ebb1735a6e9ce14a033b479076aaed"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a></div><div class="ttdeci">int ast_rtp_get_rate(const struct ast_format *format)</div><div class="ttdoc">Retrieve the sample rate of a format according to RTP specifications. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l04030">rtp_engine.c:4030</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">include/asterisk/frame.h:99</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga5009aeec1269fecc5f4e04c1c479116d"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a></div><div class="ttdeci">#define ast_debug_rtp_packet_is_allowed</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02864">rtp_engine.h:2864</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="app__sms_8c_html_a8514112da88a5d13451aaf8c9b064017"><div class="ttname"><a href="../../d7/d81/app__sms_8c.html#a8514112da88a5d13451aaf8c9b064017">seq</a></div><div class="ttdeci">static volatile unsigned int seq</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d81/app__sms_8c_source.html#l00120">app_sms.c:120</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2a2d35167e5880fdd5ec8d7df44f18b1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a></div><div class="ttdeci">int ast_rtp_instance_get_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property)</div><div class="ttdoc">Get the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00716">rtp_engine.c:716</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">include/asterisk/frame.h:125</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5f3d4d692d14bc2a712ae50edad6feca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f3d4d692d14bc2a712ae50edad6feca">&#9670;&nbsp;</a></span>process_dtmf_rfc2833()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void process_dtmf_rfc2833 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>seqno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>payloadtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mark</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d42/structframe__list.html">frame_list</a> *&#160;</td>
          <td class="paramname"><em>frames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05506">5506</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02860">ast_debug_rtp</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02864">ast_debug_rtp_packet_is_allowed</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">AST_FRAME_DTMF_BEGIN</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">AST_FRAME_DTMF_END</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">ast_frdup</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l04030">ast_rtp_get_rate()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00716">ast_rtp_instance_get_prop()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00119">AST_RTP_PROPERTY_DTMF_COMPENSATE</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00238">ast_samp2tv()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00226">ast_tv()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05463">create_dtmf_frame()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00193">dtmftimeout</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00193">ast_frame::len</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">rtp_debug_test_addr()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">ast_frame::seqno</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">ast_rtp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;{</div><div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address = { {0,} };</div><div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d7d/structevent.html">event</a>, event_end, samples;</div><div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;   <span class="keywordtype">char</span> resp = 0;</div><div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;</div><div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(instance, &amp;remote_address);</div><div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;</div><div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;   <span class="comment">/* Figure out event, event end, and samples */</span></div><div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;   <span class="keyword">event</span> = ntohl(*((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)(<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>)));</div><div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;   <span class="keyword">event</span> &gt;&gt;= 24;</div><div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;   event_end = ntohl(*((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)(<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>)));</div><div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;   event_end &lt;&lt;= 8;</div><div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;   event_end &gt;&gt;= 24;</div><div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;   samples = ntohl(*((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)(<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>)));</div><div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;   samples &amp;= 0xFFFF;</div><div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;</div><div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a>(&amp;remote_address)) {</div><div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Got  RTP RFC2833 from   %s (type %-2.2d, seq %-6.6u, ts %-6.6u, len %-6.6d, mark %d, event %08x, end %d, duration %-5.5u) \n&quot;</span>,</div><div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;             <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address),</div><div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;             payloadtype, <a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a>, timestamp, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, (mark?1:0), event, ((event_end &amp; 0x80)?1:0), samples);</div><div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;   }</div><div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;</div><div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;   <span class="comment">/* Print out debug if turned on */</span></div><div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a>)</div><div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(0, <span class="stringliteral">&quot;- RTP 2833 Event: %08x (len = %d)\n&quot;</span>, event, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;</div><div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;   <span class="comment">/* Figure out what digit was pressed */</span></div><div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;   <span class="keywordflow">if</span> (event &lt; 10) {</div><div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;      resp = <span class="charliteral">&#39;0&#39;</span> + event;</div><div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event &lt; 11) {</div><div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;      resp = <span class="charliteral">&#39;*&#39;</span>;</div><div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event &lt; 12) {</div><div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;      resp = <span class="charliteral">&#39;#&#39;</span>;</div><div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event &lt; 16) {</div><div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;      resp = <span class="charliteral">&#39;A&#39;</span> + (<span class="keyword">event</span> - 12);</div><div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event &lt; 17) {        <span class="comment">/* Event 16: Hook flash */</span></div><div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;      resp = <span class="charliteral">&#39;X&#39;</span>;</div><div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;      <span class="comment">/* Not a supported event */</span></div><div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p) RTP ignoring RTP 2833 Event: %08x. Not a DTMF Digit.\n&quot;</span>, instance, event);</div><div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;   }</div><div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;</div><div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914caed6b528e252b3896d2b220f1805c3d63">AST_RTP_PROPERTY_DTMF_COMPENSATE</a>)) {</div><div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;      <span class="keywordflow">if</span> (!rtp-&gt;last_end_timestamp.is_set || rtp-&gt;last_end_timestamp.ts != timestamp || (rtp-&gt;resp &amp;&amp; rtp-&gt;resp != resp)) {</div><div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;         rtp-&gt;resp = resp;</div><div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;         rtp-&gt;dtmf_timeout = 0;</div><div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;         f = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d07f83ec38c7407d5c3e98936269221">create_dtmf_frame</a>(instance, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914caed6b528e252b3896d2b220f1805c3d63">AST_RTP_PROPERTY_DTMF_COMPENSATE</a>)));</div><div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;         f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = 0;</div><div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;         rtp-&gt;last_end_timestamp.ts = timestamp;</div><div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;         rtp-&gt;last_end_timestamp.is_set = 1;</div><div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(frames, f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;      }</div><div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;      <span class="comment">/*  The duration parameter measures the complete</span></div><div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;<span class="comment">          duration of the event (from the beginning) - RFC2833.</span></div><div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;<span class="comment">          Account for the fact that duration is only 16 bits long</span></div><div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;<span class="comment">          (about 8 seconds at 8000 Hz) and can wrap is digit</span></div><div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;<span class="comment">          is hold for too long. */</span></div><div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> new_duration = rtp-&gt;dtmf_duration;</div><div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> last_duration = new_duration &amp; 0xFFFF;</div><div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;</div><div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;      <span class="keywordflow">if</span> (last_duration &gt; 64000 &amp;&amp; samples &lt; last_duration) {</div><div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;         new_duration += 0xFFFF + 1;</div><div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;      }</div><div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;      new_duration = (new_duration &amp; ~0xFFFF) | samples;</div><div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;</div><div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;      <span class="keywordflow">if</span> (event_end &amp; 0x80) {</div><div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;         <span class="comment">/* End event */</span></div><div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;         <span class="keywordflow">if</span> (rtp-&gt;last_seqno != <a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a> &amp;&amp; (!rtp-&gt;last_end_timestamp.is_set || timestamp &gt; rtp-&gt;last_end_timestamp.ts)) {</div><div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;            rtp-&gt;last_end_timestamp.ts = timestamp;</div><div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;            rtp-&gt;last_end_timestamp.is_set = 1;</div><div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;            rtp-&gt;dtmf_duration = new_duration;</div><div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;            rtp-&gt;resp = resp;</div><div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;            f = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d07f83ec38c7407d5c3e98936269221">create_dtmf_frame</a>(instance, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>, 0));</div><div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;            f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(rtp-&gt;dtmf_duration, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>)), <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(0, 0));</div><div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;            rtp-&gt;resp = 0;</div><div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;            rtp-&gt;dtmf_duration = rtp-&gt;dtmf_timeout = 0;</div><div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(frames, f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a>) {</div><div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p) RTP dropping duplicate or out of order DTMF END frame (seqno: %u, ts %u, digit %c)\n&quot;</span>,</div><div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;               instance, <a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a>, timestamp, resp);</div><div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;         }</div><div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;         <span class="comment">/* Begin/continuation */</span></div><div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;</div><div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;         <span class="comment">/* The second portion of the seqno check is to not mistakenly</span></div><div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;<span class="comment">          * stop accepting DTMF if the seqno rolls over beyond</span></div><div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;<span class="comment">          * 65535.</span></div><div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;         <span class="keywordflow">if</span> ((rtp-&gt;last_seqno &gt; <a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a> &amp;&amp; rtp-&gt;last_seqno - <a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a> &lt; 50)</div><div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;            || (rtp-&gt;last_end_timestamp.is_set</div><div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;              &amp;&amp; timestamp &lt;= rtp-&gt;last_end_timestamp.ts)) {</div><div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;            <span class="comment">/* Out of order frame. Processing this can cause us to</span></div><div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;<span class="comment">             * improperly duplicate incoming DTMF, so just drop</span></div><div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;<span class="comment">             * this.</span></div><div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a>) {</div><div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(0, <span class="stringliteral">&quot;Dropping out of order DTMF frame (seqno %u, ts %u, digit %c)\n&quot;</span>,</div><div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;                  <a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a>, timestamp, resp);</div><div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;            }</div><div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;         }</div><div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;</div><div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;         <span class="keywordflow">if</span> (rtp-&gt;resp &amp;&amp; rtp-&gt;resp != resp) {</div><div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;            <span class="comment">/* Another digit already began. End it */</span></div><div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;            f = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d07f83ec38c7407d5c3e98936269221">create_dtmf_frame</a>(instance, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>, 0));</div><div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;            f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(rtp-&gt;dtmf_duration, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>)), <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(0, 0));</div><div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;            rtp-&gt;resp = 0;</div><div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;            rtp-&gt;dtmf_duration = rtp-&gt;dtmf_timeout = 0;</div><div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(frames, f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;         }</div><div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;</div><div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;         <span class="keywordflow">if</span> (rtp-&gt;resp) {</div><div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;            <span class="comment">/* Digit continues */</span></div><div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;            rtp-&gt;dtmf_duration = new_duration;</div><div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;            <span class="comment">/* New digit began */</span></div><div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;            rtp-&gt;resp = resp;</div><div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;            f = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d07f83ec38c7407d5c3e98936269221">create_dtmf_frame</a>(instance, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a>, 0));</div><div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;            rtp-&gt;dtmf_duration = <a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(frames, f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;         }</div><div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;</div><div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;         rtp-&gt;dtmf_timeout = timestamp + rtp-&gt;dtmf_duration + <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aead922624018c01780f0f060df89e6a7">dtmftimeout</a>;</div><div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;      }</div><div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;</div><div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;      rtp-&gt;last_seqno = <a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a>;</div><div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;   }</div><div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;</div><div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;   rtp-&gt;dtmfsamples = <a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;</div><div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a417ee8a61074ec7570971202908e2c4f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a></div><div class="ttdeci">#define ast_frdup(fr)</div><div class="ttdoc">Copies a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">include/asterisk/frame.h:585</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914caed6b528e252b3896d2b220f1805c3d63"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914caed6b528e252b3896d2b220f1805c3d63">AST_RTP_PROPERTY_DTMF_COMPENSATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00119">rtp_engine.h:119</a></div></div>
<div class="ttc" id="structast__frame_html_ab793262012344621455faf9266acbac2"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">ast_frame::seqno</a></div><div class="ttdeci">int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">include/asterisk/frame.h:195</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4d07f83ec38c7407d5c3e98936269221"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4d07f83ec38c7407d5c3e98936269221">create_dtmf_frame</a></div><div class="ttdeci">static struct ast_frame * create_dtmf_frame(struct ast_rtp_instance *instance, enum ast_frame_type type, int compensate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05463">res_rtp_asterisk.c:5463</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aead922624018c01780f0f060df89e6a7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aead922624018c01780f0f060df89e6a7">dtmftimeout</a></div><div class="ttdeci">static int dtmftimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00193">res_rtp_asterisk.c:193</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac963384d2cd5bf0a453061cc6889a44b"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a></div><div class="ttdeci">static int rtp_debug_test_addr(struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">res_rtp_asterisk.c:2746</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga669fb90e123085584d65608ef87b2fe4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a></div><div class="ttdeci">#define ast_debug_rtp(sublevel,...)</div><div class="ttdoc">Log debug level RTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02860">rtp_engine.h:2860</a></div></div>
<div class="ttc" id="time_8h_html_a1d774df72e3dbb623475783e06ce4f61"><div class="ttname"><a href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a></div><div class="ttdeci">struct timeval ast_samp2tv(unsigned int _nsamp, unsigned int _rate)</div><div class="ttdoc">Returns a timeval corresponding to the duration of n samples at rate r. Useful to convert samples to ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00238">time.h:238</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga85ebb1735a6e9ce14a033b479076aaed"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a></div><div class="ttdeci">int ast_rtp_get_rate(const struct ast_format *format)</div><div class="ttdoc">Retrieve the sample rate of a format according to RTP specifications. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l04030">rtp_engine.c:4030</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">include/asterisk/frame.h:99</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga5009aeec1269fecc5f4e04c1c479116d"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a></div><div class="ttdeci">#define ast_debug_rtp_packet_is_allowed</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02864">rtp_engine.h:2864</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="time_8h_html_aebf04439f206cc509472ce4b6da48a5a"><div class="ttname"><a href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a></div><div class="ttdeci">struct timeval ast_tv(ast_time_t sec, ast_suseconds_t usec)</div><div class="ttdoc">Returns a timeval from sec, usec. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00226">time.h:226</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2a2d35167e5880fdd5ec8d7df44f18b1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a></div><div class="ttdeci">int ast_rtp_instance_get_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property)</div><div class="ttdoc">Get the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00716">rtp_engine.c:716</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">include/asterisk/frame.h:125</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
<div class="ttc" id="structast__frame_html_aaccba9d5adc3f6c39aad767db95ba484"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">ast_frame::len</a></div><div class="ttdeci">long len</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00193">include/asterisk/frame.h:193</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3fa030a6094ca05ea43a3b49f14e5cc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fa030a6094ca05ea43a3b49f14e5cc3">&#9670;&nbsp;</a></span>put_unaligned_time24()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void put_unaligned_time24 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>time_msw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>time_lsw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04876">4876</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05963">ast_rtp_rtcp_handle_nack()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">rtp_raw_write()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06900">rtp_transport_wide_cc_feedback_produce()</a>.</p>
<div class="fragment"><div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;{</div><div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *cp = p;</div><div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;   uint32_t <a class="code" href="../../d6/d07/structdatum.html">datum</a>;</div><div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;</div><div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;   <span class="comment">/* Convert the time to 6.18 format */</span></div><div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;   datum = (time_msw &lt;&lt; 18) &amp; 0x00fc0000;</div><div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;   datum |= (time_lsw &gt;&gt; 14) &amp; 0x0003ffff;</div><div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;</div><div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;   cp[0] = datum &gt;&gt; 16;</div><div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;   cp[1] = datum &gt;&gt; 8;</div><div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;   cp[2] = datum;</div><div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;}</div><div class="ttc" id="structdatum_html"><div class="ttname"><a href="../../d6/d07/structdatum.html">datum</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dbb/ndbm_8h_source.html#l00057">ndbm.h:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c9ac7e749d6db9936d12d7549037954"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c9ac7e749d6db9936d12d7549037954">&#9670;&nbsp;</a></span>red_t140_to_red()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* red_t140_to_red </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/dbb/structrtp__red.html">rtp_red</a> *&#160;</td>
          <td class="paramname"><em>red</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05120">5120</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00580">rtp_red::hdrlen</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00574">rtp_red::len</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00575">rtp_red::num_gen</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00570">rtp_red::t140</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00571">rtp_red::t140red</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05289">ast_rtp_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;{</div><div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a> = red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#adfe7111938aee5781b7eb99f86db13cd">t140red</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = 0;</div><div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;</div><div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;   <span class="comment">/* replace most aged generation */</span></div><div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;   <span class="keywordflow">if</span> (red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a33f2de9f3cbd94024412b3c5dd88d5e9">len</a>[0]) {</div><div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;      <span class="keywordflow">for</span> (i = 1; i &lt; red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a616e41679f381ce34cf536b20e24011a">num_gen</a>+1; i++)</div><div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;         len += red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a33f2de9f3cbd94024412b3c5dd88d5e9">len</a>[i];</div><div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;</div><div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;      memmove(&amp;data[red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#aba689c8df7cf733548a05ee5c649fd79">hdrlen</a>], &amp;data[red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#aba689c8df7cf733548a05ee5c649fd79">hdrlen</a>+red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a33f2de9f3cbd94024412b3c5dd88d5e9">len</a>[0]], len);</div><div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;   }</div><div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;</div><div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;   <span class="comment">/* Store length of each generation and primary data length*/</span></div><div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a616e41679f381ce34cf536b20e24011a">num_gen</a>; i++)</div><div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;      red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a33f2de9f3cbd94024412b3c5dd88d5e9">len</a>[i] = red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a33f2de9f3cbd94024412b3c5dd88d5e9">len</a>[i+1];</div><div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;   red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a33f2de9f3cbd94024412b3c5dd88d5e9">len</a>[i] = red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a0a9f2f354cbd850064f42809bcee83dc">t140</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>;</div><div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;</div><div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;   <span class="comment">/* write each generation length in red header */</span></div><div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;   len = red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#aba689c8df7cf733548a05ee5c649fd79">hdrlen</a>;</div><div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;   for (i = 0; i &lt; red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a616e41679f381ce34cf536b20e24011a">num_gen</a>; i++) {</div><div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;      len += data[i*4+3] = red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a33f2de9f3cbd94024412b3c5dd88d5e9">len</a>[i];</div><div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;   }</div><div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;</div><div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;   <span class="comment">/* add primary data to buffer */</span></div><div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;   memcpy(&amp;data[len], red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a0a9f2f354cbd850064f42809bcee83dc">t140</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a0a9f2f354cbd850064f42809bcee83dc">t140</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);</div><div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;   red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#adfe7111938aee5781b7eb99f86db13cd">t140red</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = len + red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a0a9f2f354cbd850064f42809bcee83dc">t140</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>;</div><div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;</div><div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;   <span class="comment">/* no primary data and no generations to send */</span></div><div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;   <span class="keywordflow">if</span> (len == red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#aba689c8df7cf733548a05ee5c649fd79">hdrlen</a> &amp;&amp; !red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a0a9f2f354cbd850064f42809bcee83dc">t140</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>) {</div><div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;   }</div><div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;</div><div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;   <span class="comment">/* reset t.140 buffer */</span></div><div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;   red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a0a9f2f354cbd850064f42809bcee83dc">t140</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = 0;</div><div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;</div><div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;   <span class="keywordflow">return</span> &amp;red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#adfe7111938aee5781b7eb99f86db13cd">t140red</a>;</div><div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;}</div><div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structrtp__red_html_a616e41679f381ce34cf536b20e24011a"><div class="ttname"><a href="../../da/dbb/structrtp__red.html#a616e41679f381ce34cf536b20e24011a">rtp_red::num_gen</a></div><div class="ttdeci">int num_gen</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00575">res_rtp_asterisk.c:575</a></div></div>
<div class="ttc" id="structrtp__red_html_aba689c8df7cf733548a05ee5c649fd79"><div class="ttname"><a href="../../da/dbb/structrtp__red.html#aba689c8df7cf733548a05ee5c649fd79">rtp_red::hdrlen</a></div><div class="ttdeci">int hdrlen</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00580">res_rtp_asterisk.c:580</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="structrtp__red_html_adfe7111938aee5781b7eb99f86db13cd"><div class="ttname"><a href="../../da/dbb/structrtp__red.html#adfe7111938aee5781b7eb99f86db13cd">rtp_red::t140red</a></div><div class="ttdeci">struct ast_frame t140red</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00571">res_rtp_asterisk.c:571</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structrtp__red_html_a0a9f2f354cbd850064f42809bcee83dc"><div class="ttname"><a href="../../da/dbb/structrtp__red.html#a0a9f2f354cbd850064f42809bcee83dc">rtp_red::t140</a></div><div class="ttdeci">struct ast_frame t140</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00570">res_rtp_asterisk.c:570</a></div></div>
<div class="ttc" id="structrtp__red_html_a33f2de9f3cbd94024412b3c5dd88d5e9"><div class="ttname"><a href="../../da/dbb/structrtp__red.html#a33f2de9f3cbd94024412b3c5dd88d5e9">rtp_red::len</a></div><div class="ttdeci">unsigned char len[AST_RED_MAX_GENERATION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00574">res_rtp_asterisk.c:574</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af8fe2466849c65c9d60466c769ea5f2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8fe2466849c65c9d60466c769ea5f2d">&#9670;&nbsp;</a></span>red_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int red_write </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write t140 redundacy frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>primary data to be buffered</td></tr>
  </table>
  </dd>
</dl>
<p>Scheduler callback </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08560">8560</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05289">ast_rtp_write()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08575">rtp_red_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l08561"></a><span class="lineno"> 8561</span>&#160;{</div><div class="line"><a name="l08562"></a><span class="lineno"> 8562</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance = (<span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a>*) <a class="code" href="../../df/d7a/structast__rtp__instance.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l08563"></a><span class="lineno"> 8563</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l08564"></a><span class="lineno"> 8564</span>&#160;</div><div class="line"><a name="l08565"></a><span class="lineno"> 8565</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l08566"></a><span class="lineno"> 8566</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;red-&gt;t140.datalen &gt; 0) {</div><div class="line"><a name="l08567"></a><span class="lineno"> 8567</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aac1f4d7457f54890cb39395406b37a22">ast_rtp_write</a>(instance, &amp;rtp-&gt;red-&gt;t140);</div><div class="line"><a name="l08568"></a><span class="lineno"> 8568</span>&#160;   }</div><div class="line"><a name="l08569"></a><span class="lineno"> 8569</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l08570"></a><span class="lineno"> 8570</span>&#160;</div><div class="line"><a name="l08571"></a><span class="lineno"> 8571</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l08572"></a><span class="lineno"> 8572</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aac1f4d7457f54890cb39395406b37a22"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aac1f4d7457f54890cb39395406b37a22">ast_rtp_write</a></div><div class="ttdeci">static int ast_rtp_write(struct ast_rtp_instance *instance, struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05289">res_rtp_asterisk.c:5289</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a735984d41155bc1032e09bece8f8d66d">ast_rtp_instance::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00193">rtp_engine.c:193</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c6ac25ea7536c0bc9ed18cbcf917527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c6ac25ea7536c0bc9ed18cbcf917527">&#9670;&nbsp;</a></span>reload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09592">9592</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09709">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l09593"></a><span class="lineno"> 9593</span>&#160;{</div><div class="line"><a name="l09594"></a><span class="lineno"> 9594</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a0fd33c0dc833ac5b48e7990897319088">rtp_reload</a>(1, 0);</div><div class="line"><a name="l09595"></a><span class="lineno"> 9595</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l09596"></a><span class="lineno"> 9596</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a0fd33c0dc833ac5b48e7990897319088"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a0fd33c0dc833ac5b48e7990897319088">rtp_reload</a></div><div class="ttdeci">static int rtp_reload(int reload, int by_external_config)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">res_rtp_asterisk.c:9346</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a804d7f1392ba5f1a19530c5243d93894"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a804d7f1392ba5f1a19530c5243d93894">&#9670;&nbsp;</a></span>rtcp_debug_test_addr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtcp_debug_test_addr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02762">2762</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d15/res__srtp_8h_source.html#l00071">ast_srtp_policy_res::alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02886">ast_debug_dtls</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02877">ast_debug_rtcp_packet_is_allowed</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00529">AST_RTP_DTLS_HASH_SHA1</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00528">AST_RTP_DTLS_HASH_SHA256</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00514">AST_RTP_DTLS_SETUP_ACTIVE</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00535">AST_RTP_DTLS_VERIFY_FINGERPRINT</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02736">ast_rtp_instance_add_srtp_policy()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03778">ast_rtp_instance_get_ssrc()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00080">AST_SCHED_DEL_UNREF</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00388">ast_sockaddr_cmp()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00413">ast_sockaddr_cmp_addr()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00670">AST_VECTOR_GET_ADDR</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../de/d15/res__srtp_8h_source.html#l00072">ast_srtp_policy_res::destroy</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00332">rtp_ssrc_mapping::instance</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00200">rtcpdebugaddr</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00202">rtcpdebugport</a>, <a class="el" href="../../de/d15/res__srtp_8h_source.html#l00074">ast_srtp_policy_res::set_master_key</a>, <a class="el" href="../../de/d15/res__srtp_8h_source.html#l00075">ast_srtp_policy_res::set_ssrc</a>, <a class="el" href="../../de/d15/res__srtp_8h_source.html#l00073">ast_srtp_policy_res::set_suite</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00157">SRTP_MASTER_KEY_LEN</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00159">SRTP_MASTER_LEN</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00158">SRTP_MASTER_SALT_LEN</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04579">ast_rtcp_calculate_sr_rr_statistics()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;{</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga05b6db9484a21807cf4bcdbbf9539eb7">ast_debug_rtcp_packet_is_allowed</a>) {</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;   }</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a86444a258e6234bc5344daa32cbfdbdd">rtcpdebugaddr</a>)) {</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2f918344639d1c901edd21fe78342f1d">rtcpdebugport</a>) {</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;         <span class="keywordflow">return</span> (<a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a86444a258e6234bc5344daa32cbfdbdd">rtcpdebugaddr</a>, addr) == 0); <span class="comment">/* look for RTCP packets from IP+Port */</span></div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;         <span class="keywordflow">return</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a5fb3221004de6004d4c1f04c816eaac8">ast_sockaddr_cmp_addr</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a86444a258e6234bc5344daa32cbfdbdd">rtcpdebugaddr</a>, addr) == 0); <span class="comment">/* only look for RTCP packets from IP */</span></div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;      }</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;   }</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a2f918344639d1c901edd21fe78342f1d"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2f918344639d1c901edd21fe78342f1d">rtcpdebugport</a></div><div class="ttdeci">static int rtcpdebugport</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00202">res_rtp_asterisk.c:202</a></div></div>
<div class="ttc" id="netsock2_8h_html_abae1b903c8f5b7639235b579a267aaab"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a></div><div class="ttdeci">int ast_sockaddr_cmp(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00388">netsock2.c:388</a></div></div>
<div class="ttc" id="netsock2_8h_html_a5fb3221004de6004d4c1f04c816eaac8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a5fb3221004de6004d4c1f04c816eaac8">ast_sockaddr_cmp_addr</a></div><div class="ttdeci">int ast_sockaddr_cmp_addr(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares the addresses of two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00413">netsock2.c:413</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a86444a258e6234bc5344daa32cbfdbdd"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a86444a258e6234bc5344daa32cbfdbdd">rtcpdebugaddr</a></div><div class="ttdeci">static struct ast_sockaddr rtcpdebugaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00200">res_rtp_asterisk.c:200</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga05b6db9484a21807cf4bcdbbf9539eb7"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga05b6db9484a21807cf4bcdbbf9539eb7">ast_debug_rtcp_packet_is_allowed</a></div><div class="ttdeci">#define ast_debug_rtcp_packet_is_allowed</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02877">rtp_engine.h:2877</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac5880d6e79bbf0f0fc09483c25ece2b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5880d6e79bbf0f0fc09483c25ece2b6">&#9670;&nbsp;</a></span>rtcp_do_debug_ip()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* rtcp_do_debug_ip </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09055">9055</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d0/d87/logger__category_8c_source.html#l00289">ast_debug_category_set_sublevel()</a>, <a class="el" href="../../d5/d1f/logger__category_8h_source.html#l00026">AST_LOG_CATEGORY_ENABLED</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02830">AST_LOG_CATEGORY_RTCP_PACKET</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00164">ast_sockaddr_split_hostport()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00200">rtcpdebugaddr</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00202">rtcpdebugport</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09145">handle_cli_rtcp_set_debug()</a>.</p>
<div class="fragment"><div class="line"><a name="l09056"></a><span class="lineno"> 9056</span>&#160;{</div><div class="line"><a name="l09057"></a><span class="lineno"> 9057</span>&#160;   <span class="keywordtype">char</span> *arg = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]);</div><div class="line"><a name="l09058"></a><span class="lineno"> 9058</span>&#160;   <span class="keywordtype">char</span> *debughost = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09059"></a><span class="lineno"> 9059</span>&#160;   <span class="keywordtype">char</span> *debugport = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09060"></a><span class="lineno"> 9060</span>&#160;</div><div class="line"><a name="l09061"></a><span class="lineno"> 9061</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a86444a258e6234bc5344daa32cbfdbdd">rtcpdebugaddr</a>, arg, 0) || !<a class="code" href="../../db/df1/netsock2_8h.html#a774d22af00b04d5bc0c9e3456ac44ad2">ast_sockaddr_split_hostport</a>(arg, &amp;debughost, &amp;debugport, 0)) {</div><div class="line"><a name="l09062"></a><span class="lineno"> 9062</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Lookup failed for &#39;%s&#39;\n&quot;</span>, arg);</div><div class="line"><a name="l09063"></a><span class="lineno"> 9063</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l09064"></a><span class="lineno"> 9064</span>&#160;   }</div><div class="line"><a name="l09065"></a><span class="lineno"> 9065</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2f918344639d1c901edd21fe78342f1d">rtcpdebugport</a> = (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(debugport) &amp;&amp; debugport[0] != <span class="charliteral">&#39;0&#39;</span>);</div><div class="line"><a name="l09066"></a><span class="lineno"> 9066</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;RTCP Packet Debugging Enabled for address: %s\n&quot;</span>,</div><div class="line"><a name="l09067"></a><span class="lineno"> 9067</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a86444a258e6234bc5344daa32cbfdbdd">rtcpdebugaddr</a>));</div><div class="line"><a name="l09068"></a><span class="lineno"> 9068</span>&#160;   <a class="code" href="../../d5/d1f/logger__category_8h.html#ae69108dfd1226cb66d86d02bec5de3cb">ast_debug_category_set_sublevel</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga501ac56386fce3535f67353537a508e7">AST_LOG_CATEGORY_RTCP_PACKET</a>, <a class="code" href="../../d5/d1f/logger__category_8h.html#a1b441edad5de1831924e98abec3bbf57">AST_LOG_CATEGORY_ENABLED</a>);</div><div class="line"><a name="l09069"></a><span class="lineno"> 9069</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l09070"></a><span class="lineno"> 9070</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a2f918344639d1c901edd21fe78342f1d"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2f918344639d1c901edd21fe78342f1d">rtcpdebugport</a></div><div class="ttdeci">static int rtcpdebugport</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00202">res_rtp_asterisk.c:202</a></div></div>
<div class="ttc" id="netsock2_8h_html_aad98818272870e12d48fe4347aaa46d0"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a></div><div class="ttdeci">int ast_sockaddr_parse(struct ast_sockaddr *addr, const char *str, int flags)</div><div class="ttdoc">Parse an IPv4 or IPv6 address string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00230">netsock2.c:230</a></div></div>
<div class="ttc" id="logger__category_8h_html_ae69108dfd1226cb66d86d02bec5de3cb"><div class="ttname"><a href="../../d5/d1f/logger__category_8h.html#ae69108dfd1226cb66d86d02bec5de3cb">ast_debug_category_set_sublevel</a></div><div class="ttdeci">int ast_debug_category_set_sublevel(const char *name, int sublevel)</div><div class="ttdoc">Set the debug category&amp;#39;s sublevel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d87/logger__category_8c_source.html#l00289">logger_category.c:289</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="netsock2_8h_html_a774d22af00b04d5bc0c9e3456ac44ad2"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a774d22af00b04d5bc0c9e3456ac44ad2">ast_sockaddr_split_hostport</a></div><div class="ttdeci">int ast_sockaddr_split_hostport(char *str, char **host, char **port, int flags)</div><div class="ttdoc">Splits a string into its host and port components. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00164">netsock2.c:164</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a86444a258e6234bc5344daa32cbfdbdd"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a86444a258e6234bc5344daa32cbfdbdd">rtcpdebugaddr</a></div><div class="ttdeci">static struct ast_sockaddr rtcpdebugaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00200">res_rtp_asterisk.c:200</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga501ac56386fce3535f67353537a508e7"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga501ac56386fce3535f67353537a508e7">AST_LOG_CATEGORY_RTCP_PACKET</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_RTCP_PACKET</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02830">rtp_engine.h:2830</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="logger__category_8h_html_a1b441edad5de1831924e98abec3bbf57"><div class="ttname"><a href="../../d5/d1f/logger__category_8h.html#a1b441edad5de1831924e98abec3bbf57">AST_LOG_CATEGORY_ENABLED</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_ENABLED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/logger__category_8h_source.html#l00026">logger_category.h:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad49be45beb567b0fe0298d7bd0dd6419"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad49be45beb567b0fe0298d7bd0dd6419">&#9670;&nbsp;</a></span>rtcp_mux()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtcp_mux </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>packet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03050">3050</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00261">AST_RTP_INSTANCE_RTCP_MUX</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00391">version</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;{</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;   uint8_t <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a>;</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;   uint8_t pt;</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;   uint8_t m;</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;rtcp || rtp-&gt;rtcp-&gt;type != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457a23ac343d133642c75682a53db92a7dbb">AST_RTP_INSTANCE_RTCP_MUX</a>) {</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;   }</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;   version = (packet[0] &amp; 0XC0) &gt;&gt; 6;</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;   <span class="keywordflow">if</span> (version == 0) {</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;      <span class="comment">/* version 0 indicates this is a STUN packet and shouldn&#39;t</span></div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;<span class="comment">       * be interpreted as a possible RTCP packet</span></div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;   }</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;   <span class="comment">/* The second octet of a packet will be one of the following:</span></div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;<span class="comment">    * For RTP: The marker bit (1 bit) and the RTP payload type (7 bits)</span></div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;<span class="comment">    * For RTCP: The payload type (8)</span></div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;<span class="comment">    * RTP has a forbidden range of payload types (64-95) since these</span></div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;<span class="comment">    * will conflict with RTCP payload numbers if the marker bit is set.</span></div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;   m = packet[1] &amp; 0x80;</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;   pt = packet[1] &amp; 0x7F;</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;   <span class="keywordflow">if</span> (m &amp;&amp; pt &gt;= 64 &amp;&amp; pt &lt;= 95) {</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;   }</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_a41d9cffc63ede37b7012d68124f4a457a23ac343d133642c75682a53db92a7dbb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457a23ac343d133642c75682a53db92a7dbb">AST_RTP_INSTANCE_RTCP_MUX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00261">rtp_engine.h:261</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a81b4b1c3c855fb371e7723b473f1ee78"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a></div><div class="ttdeci">static char version[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00391">chan_ooh323.c:391</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afcddb5ff85cb2691779171663a3a8229"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcddb5ff85cb2691779171663a3a8229">&#9670;&nbsp;</a></span>rtcp_payload_subtype2str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* rtcp_payload_subtype2str </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>pt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>subtype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05942">5942</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00303">AST_RTP_RTCP_FMT_NACK</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00309">AST_RTP_RTCP_FMT_REMB</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00297">AST_RTP_RTCP_RTPFB</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00132">RTCP_PT_PSFB</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;{</div><div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;   <span class="keywordflow">switch</span> (pt) {</div><div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4a9c0900c44c60bd881c22ff57169a1a">AST_RTP_RTCP_RTPFB</a>:</div><div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;      <span class="keywordflow">if</span> (subtype == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a665ba1f8447831ebe494fbf0915edb6a">AST_RTP_RTCP_FMT_NACK</a>) {</div><div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;         <span class="keywordflow">return</span> <span class="stringliteral">&quot;NACK&quot;</span>;</div><div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;      }</div><div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a711189b19386915beec87d8edddb3464">RTCP_PT_PSFB</a>:</div><div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;      <span class="keywordflow">if</span> (subtype == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a92dbab4f62cc24fc05ac849a2b2b0e5c">AST_RTP_RTCP_FMT_REMB</a>) {</div><div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;         <span class="keywordflow">return</span> <span class="stringliteral">&quot;REMB&quot;</span>;</div><div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;      }</div><div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;   }</div><div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;</div><div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_a665ba1f8447831ebe494fbf0915edb6a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a665ba1f8447831ebe494fbf0915edb6a">AST_RTP_RTCP_FMT_NACK</a></div><div class="ttdeci">#define AST_RTP_RTCP_FMT_NACK</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00303">rtp_engine.h:303</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4a9c0900c44c60bd881c22ff57169a1a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4a9c0900c44c60bd881c22ff57169a1a">AST_RTP_RTCP_RTPFB</a></div><div class="ttdeci">#define AST_RTP_RTCP_RTPFB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00297">rtp_engine.h:297</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a711189b19386915beec87d8edddb3464"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a711189b19386915beec87d8edddb3464">RTCP_PT_PSFB</a></div><div class="ttdeci">#define RTCP_PT_PSFB</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00132">res_rtp_asterisk.c:132</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a92dbab4f62cc24fc05ac849a2b2b0e5c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a92dbab4f62cc24fc05ac849a2b2b0e5c">AST_RTP_RTCP_FMT_REMB</a></div><div class="ttdeci">#define AST_RTP_RTCP_FMT_REMB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00309">rtp_engine.h:309</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a280f0e254e281a27c39489fc2603329c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a280f0e254e281a27c39489fc2603329c">&#9670;&nbsp;</a></span>rtcp_payload_type2str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* rtcp_payload_type2str </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05910">5910</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00127">RTCP_PT_BYE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00119">RTCP_PT_FUR</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00132">RTCP_PT_PSFB</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00123">RTCP_PT_RR</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00125">RTCP_PT_SDES</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00121">RTCP_PT_SR</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;{</div><div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;</div><div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;   <span class="keywordflow">switch</span> (pt) {</div><div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abe50a9d9c36c702889863e206f4502c6">RTCP_PT_SR</a>:</div><div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;      str = <span class="stringliteral">&quot;Sender Report&quot;</span>;</div><div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4d8564f9c96df1cd1076ad4f6faed7ab">RTCP_PT_RR</a>:</div><div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;      str = <span class="stringliteral">&quot;Receiver Report&quot;</span>;</div><div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a38fce7504b6d0ac96b1f07fa86598ce8">RTCP_PT_FUR</a>:</div><div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;      <span class="comment">/* Full INTRA-frame Request / Fast Update Request */</span></div><div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;      str = <span class="stringliteral">&quot;H.261 FUR&quot;</span>;</div><div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a711189b19386915beec87d8edddb3464">RTCP_PT_PSFB</a>:</div><div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;      <span class="comment">/* Payload Specific Feed Back */</span></div><div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;      str = <span class="stringliteral">&quot;PSFB&quot;</span>;</div><div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa6a84235b636497872f31a832a8b17af">RTCP_PT_SDES</a>:</div><div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;      str = <span class="stringliteral">&quot;Source Description&quot;</span>;</div><div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a5723708baf43b6326706331795fcd52f">RTCP_PT_BYE</a>:</div><div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;      str = <span class="stringliteral">&quot;BYE&quot;</span>;</div><div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160;      str = <span class="stringliteral">&quot;Unknown&quot;</span>;</div><div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;   }</div><div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_abe50a9d9c36c702889863e206f4502c6"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#abe50a9d9c36c702889863e206f4502c6">RTCP_PT_SR</a></div><div class="ttdeci">#define RTCP_PT_SR</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00121">res_rtp_asterisk.c:121</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4d8564f9c96df1cd1076ad4f6faed7ab"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4d8564f9c96df1cd1076ad4f6faed7ab">RTCP_PT_RR</a></div><div class="ttdeci">#define RTCP_PT_RR</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00123">res_rtp_asterisk.c:123</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a38fce7504b6d0ac96b1f07fa86598ce8"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a38fce7504b6d0ac96b1f07fa86598ce8">RTCP_PT_FUR</a></div><div class="ttdeci">#define RTCP_PT_FUR</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00119">res_rtp_asterisk.c:119</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa6a84235b636497872f31a832a8b17af"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa6a84235b636497872f31a832a8b17af">RTCP_PT_SDES</a></div><div class="ttdeci">#define RTCP_PT_SDES</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00125">res_rtp_asterisk.c:125</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a5723708baf43b6326706331795fcd52f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a5723708baf43b6326706331795fcd52f">RTCP_PT_BYE</a></div><div class="ttdeci">#define RTCP_PT_BYE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00127">res_rtp_asterisk.c:127</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a711189b19386915beec87d8edddb3464"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a711189b19386915beec87d8edddb3464">RTCP_PT_PSFB</a></div><div class="ttdeci">#define RTCP_PT_PSFB</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00132">res_rtp_asterisk.c:132</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a33608656bad4878dfd5c84ec9aef96c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33608656bad4878dfd5c84ec9aef96c9">&#9670;&nbsp;</a></span>rtcp_recvfrom()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtcp_recvfrom </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>sa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03235">3235</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03084">__rtp_recvfrom()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06590">ast_rtcp_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;{</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abb6d9500accafb5cb6df3a6ee6e73990">__rtp_recvfrom</a>(instance, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size, flags, sa, 1);</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_abb6d9500accafb5cb6df3a6ee6e73990"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#abb6d9500accafb5cb6df3a6ee6e73990">__rtp_recvfrom</a></div><div class="ttdeci">static int __rtp_recvfrom(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int rtcp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03084">res_rtp_asterisk.c:3084</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a849b3d418fbe0446b4e9289a9ef94397"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a849b3d418fbe0446b4e9289a9ef94397">&#9670;&nbsp;</a></span>rtcp_sendto()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtcp_sendto </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>sa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ice</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03303">3303</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03247">__rtp_sendto()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04814">ast_rtcp_write()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06900">rtp_transport_wide_cc_feedback_produce()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05160">rtp_write_rtcp_fir()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05222">rtp_write_rtcp_psfb()</a>.</p>
<div class="fragment"><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;{</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abef5f1e6bda48737ffca70d3123023b6">__rtp_sendto</a>(instance, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size, flags, sa, 1, ice, 1);</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_abef5f1e6bda48737ffca70d3123023b6"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#abef5f1e6bda48737ffca70d3123023b6">__rtp_sendto</a></div><div class="ttdeci">static int __rtp_sendto(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int rtcp, int *via_ice, int use_srtp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03247">res_rtp_asterisk.c:3247</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab1b4c0024c8207e04e00c38d3b6341d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1b4c0024c8207e04e00c38d3b6341d5">&#9670;&nbsp;</a></span>rtp_add_candidates_to_ice()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_add_candidates_to_ice </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>component</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>transport</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">3522</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00479">ast_rtp_engine_ice_candidate::address</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00271">ast_ice_host_candidate::advertised</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d1f/logger__category_8h_source.html#l00171">ast_debug_category</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02852">AST_DEBUG_CATEGORY_ICE</a>, <a class="el" href="../../d3/d00/stun_8h_source.html#l00044">AST_DEBUG_CATEGORY_STUN</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02898">ast_debug_ice</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00782">ast_inet_ntoa()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01239">ast_rtp_ice_add_cand()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00464">AST_RTP_ICE_COMPONENT_RTCP</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00463">AST_RTP_ICE_COMPONENT_RTP</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01577">ast_rtp_ice_turn_request()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00388">ast_sockaddr_cmp()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00413">ast_sockaddr_cmp_addr()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00824">ast_sockaddr_from_sockaddr</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00534">ast_sockaddr_is_any()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00497">ast_sockaddr_is_ipv4()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00140">ast_sockaddr_setnull()</a>, <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00477">ast_sockaddr_to_pj_sockaddr()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d1/dbd/stun_8c_source.html#l00384">ast_stun_request()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00061">AST_TRANSPORT_TCP</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00060">AST_TRANSPORT_UDP</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00260">ast_rtp_ioqueue_thread::count</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00147">ext</a>, <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00868">if()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00272">ast_ice_host_candidate::include_local</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00270">ast_ice_host_candidate::local</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00262">ast_rtp_ioqueue_thread::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03487">rtp_address_is_ice_blacklisted()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">ast_rtp::s</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03510">stun_address_is_blacklisted()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00216">stunaddr</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00217">turnaddr</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00220">turnpassword</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00218">turnport</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00219">turnusername</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08303">ast_rtp_prop_set()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03750">ice_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;{</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;   <span class="keyword">struct </span>ifaddrs *ifa, *ia;</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;   pj_sockaddr pjtmp;</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db5/structast__ice__host__candidate.html">ast_ice_host_candidate</a> *candidate;</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;   <span class="keywordtype">int</span> af_inet_ok = 0, af_inet6_ok = 0;</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a>(addr)) {</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;      af_inet_ok = 1;</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a7704d67f19f3ca91198d8cc6e6445c3f">ast_sockaddr_is_any</a>(addr)) {</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;      af_inet_ok = af_inet6_ok = 1;</div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;      af_inet6_ok = 1;</div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;   }</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;   <span class="keywordflow">if</span> (getifaddrs(&amp;ifa) &lt; 0) {</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;      <span class="comment">/* If we can&#39;t get addresses, we can&#39;t load ICE candidates */</span></div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;(%p) ICE Error obtaining list of local addresses: %s\n&quot;</span>,</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;            instance, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE add system candidates\n&quot;</span>, instance);</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;      <span class="comment">/* Iterate through the list of addresses obtained from the system,</span></div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;<span class="comment">       * until we&#39;ve iterated through all of them, or accepted</span></div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;<span class="comment">       * PJ_ICE_MAX_CAND candidates */</span></div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;      <span class="keywordflow">for</span> (ia = ifa; ia &amp;&amp; count &lt; PJ_ICE_MAX_CAND; ia = ia-&gt;ifa_next) {</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;         <span class="comment">/* Interface is either not UP or doesn&#39;t have an address assigned,</span></div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;<span class="comment">          * eg, a ppp that just completed LCP but no IPCP yet */</span></div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;         <span class="keywordflow">if</span> (!ia-&gt;ifa_addr || (ia-&gt;ifa_flags &amp; IFF_UP) == 0) {</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;         }</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;         <span class="comment">/* Filter out non-IPvX addresses, eg, link-layer */</span></div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;         <span class="keywordflow">if</span> (ia-&gt;ifa_addr-&gt;sa_family != AF_INET &amp;&amp; ia-&gt;ifa_addr-&gt;sa_family != AF_INET6) {</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;         }</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#a5d076255155f742978b2568498bf562e">ast_sockaddr_from_sockaddr</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, ia-&gt;ifa_addr);</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;         <span class="keywordflow">if</span> (ia-&gt;ifa_addr-&gt;sa_family == AF_INET) {</div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;            <span class="keyword">const</span> <span class="keyword">struct </span>sockaddr_in *sa_in = (<span class="keyword">struct </span>sockaddr_in*)ia-&gt;ifa_addr;</div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;            <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a> (!af_inet_ok) {</div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;            }</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;            <span class="comment">/* Skip 127.0.0.0/8 (loopback) */</span></div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;            <span class="comment">/* Don&#39;t use IFF_LOOPBACK check since one could assign usable</span></div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;<span class="comment">             * publics to the loopback */</span></div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;            <span class="keywordflow">if</span> ((sa_in-&gt;sin_addr.s_addr &amp; htonl(0xFF000000)) == htonl(0x7F000000)) {</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;            }</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;            <span class="comment">/* Skip 0.0.0.0/8 based on RFC1122, and from pjproject */</span></div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;            <span class="keywordflow">if</span> ((sa_in-&gt;sin_addr.s_addr &amp; htonl(0xFF000000)) == 0) {</div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;            }</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;         } <span class="keywordflow">else</span> { <span class="comment">/* ia-&gt;ifa_addr-&gt;sa_family == AF_INET6 */</span></div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;            <span class="keywordflow">if</span> (!af_inet6_ok) {</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;            }</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;</div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;            <span class="comment">/* Filter ::1 */</span></div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#a5fb3221004de6004d4c1f04c816eaac8">ast_sockaddr_cmp_addr</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae3e4a18170e8b5a1f73042adc647455f">lo6</a>, &amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>)) {</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;            }</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;         }</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;         <span class="comment">/* Pull in the host candidates from [ice_host_candidates] */</span></div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d7/db0/structhost__candidates.html">host_candidates</a>);</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d7/db0/structhost__candidates.html">host_candidates</a>, candidate, next) {</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(&amp;candidate-&gt;<a class="code" href="../../d4/db5/structast__ice__host__candidate.html#a5256006bb1426efe38b3903704b65389">local</a>, &amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>)) {</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;               <span class="comment">/* candidate-&gt;local matches actual assigned, so check if</span></div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;<span class="comment">                * advertised is blacklisted, if not, add it to the</span></div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;<span class="comment">                * advertised list.  Not that it would make sense to remap</span></div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;<span class="comment">                * a local address to a blacklisted address, but honour it</span></div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;<span class="comment">                * anyway. */</span></div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aae6227e287afecf4d8ada4d05b82554a">rtp_address_is_ice_blacklisted</a>(&amp;candidate-&gt;<a class="code" href="../../d4/db5/structast__ice__host__candidate.html#acd8b71d30c6e8b2369e0b2c377d29cb6">advertised</a>)) {</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;                  <a class="code" href="../../df/dd5/res__pjproject_8h.html#a2a645245bf7eb35b94aacaac3aa119df">ast_sockaddr_to_pj_sockaddr</a>(&amp;candidate-&gt;<a class="code" href="../../d4/db5/structast__ice__host__candidate.html#acd8b71d30c6e8b2369e0b2c377d29cb6">advertised</a>, &amp;pjtmp);</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;                  pj_sockaddr_set_port(&amp;pjtmp, port);</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;                  <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aec6a67dd9e8be83fce73c1c1a63a58d8">ast_rtp_ice_add_cand</a>(instance, rtp, component, transport,</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;                        PJ_ICE_CAND_TYPE_HOST, 65535, &amp;pjtmp, &amp;pjtmp, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;                        pj_sockaddr_get_len(&amp;pjtmp));</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;                  ++count;</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;               }</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;               <span class="keywordflow">if</span> (!candidate-&gt;<a class="code" href="../../d4/db5/structast__ice__host__candidate.html#a22906b79916bbcd963916c92a328fab0">include_local</a>) {</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;                  <span class="comment">/* We don&#39;t want to advertise the actual address */</span></div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;                  <a class="code" href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>);</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;               }</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;            }</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;         }</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/db0/structhost__candidates.html">host_candidates</a>);</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;         <span class="comment">/* we had an entry in [ice_host_candidates] that matched, and</span></div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;<span class="comment">          * didn&#39;t have include_local_address set.  Alternatively, adding</span></div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;<span class="comment">          * that match resulted in us going to PJ_ICE_MAX_CAND */</span></div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>) || count == PJ_ICE_MAX_CAND) {</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;         }</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aae6227e287afecf4d8ada4d05b82554a">rtp_address_is_ice_blacklisted</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>)) {</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;         }</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;         <a class="code" href="../../df/dd5/res__pjproject_8h.html#a2a645245bf7eb35b94aacaac3aa119df">ast_sockaddr_to_pj_sockaddr</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, &amp;pjtmp);</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;         pj_sockaddr_set_port(&amp;pjtmp, port);</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aec6a67dd9e8be83fce73c1c1a63a58d8">ast_rtp_ice_add_cand</a>(instance, rtp, component, transport,</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;               PJ_ICE_CAND_TYPE_HOST, 65535, &amp;pjtmp, &amp;pjtmp, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;               pj_sockaddr_get_len(&amp;pjtmp));</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;         ++count;</div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;      }</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;      freeifaddrs(ifa);</div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;   }</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;   <span class="comment">/* If configured to use a STUN server to get our external mapped address do so */</span></div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a53f406ef990fb9279d21572104158ab2">stunaddr</a>.sin_addr.s_addr &amp;&amp; !<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a6b801d4e79b211acfad64dbf20da9f72">stun_address_is_blacklisted</a>(addr) &amp;&amp;</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;      (<a class="code" href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a>(addr) || <a class="code" href="../../db/df1/netsock2_8h.html#a7704d67f19f3ca91198d8cc6e6445c3f">ast_sockaddr_is_any</a>(addr)) &amp;&amp;</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;      count &lt; PJ_ICE_MAX_CAND) {</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;      <span class="keyword">struct </span>sockaddr_in <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>;</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;      <span class="keywordtype">int</span> rsp;</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;      <a class="code" href="../../d5/d1f/logger__category_8h.html#ad5e6ac27cd91f510ebbff6d445c42c91">ast_debug_category</a>(3, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga848f8deb4762ac97ef5f385b35f1c331">AST_DEBUG_CATEGORY_ICE</a> | <a class="code" href="../../d3/d00/stun_8h.html#a8112b74e5f7e64a3ec084f4a91e261a9">AST_DEBUG_CATEGORY_STUN</a>,</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;         <span class="stringliteral">&quot;(%p) ICE request STUN %s %s candidate\n&quot;</span>, instance,</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;         transport == <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a806b187d5e4f7490e46a039792f850bc">AST_TRANSPORT_UDP</a> ? <span class="stringliteral">&quot;UDP&quot;</span> : <span class="stringliteral">&quot;TCP&quot;</span>,</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;         component == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a> ? <span class="stringliteral">&quot;RTP&quot;</span> : <span class="stringliteral">&quot;RTCP&quot;</span>);</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;<span class="comment">       * The instance should not be locked because we can block</span></div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;<span class="comment">       * waiting for a STUN respone.</span></div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;      rsp = <a class="code" href="../../d3/d00/stun_8h.html#a494a72723299c0e75e1c2cf092135ea6">ast_stun_request</a>(component == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a></div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;         ? rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> : rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>, &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a53f406ef990fb9279d21572104158ab2">stunaddr</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>);</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;      <span class="keywordflow">if</span> (!rsp) {</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a> *candidate;</div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;         pj_sockaddr <a class="code" href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a>, base;</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;         pj_str_t mapped = pj_str(<a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>.sin_addr)));</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;         <span class="keywordtype">int</span> srflx = 1, baseset = 0;</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;         pj_sockaddr_init(pj_AF_INET(), &amp;ext, &amp;mapped, ntohs(<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>.sin_port));</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;<span class="comment">          * If the returned address is the same as one of our host</span></div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;<span class="comment">          * candidates, don&#39;t send the srflx.  At the same time,</span></div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;<span class="comment">          * we need to set the base address (raddr).</span></div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;         i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(rtp-&gt;ice_local_candidates, 0);</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;         <span class="keywordflow">while</span> (srflx &amp;&amp; (candidate = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;            <span class="keywordflow">if</span> (!baseset &amp;&amp; <a class="code" href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>)) {</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;               baseset = 1;</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;               <a class="code" href="../../df/dd5/res__pjproject_8h.html#a2a645245bf7eb35b94aacaac3aa119df">ast_sockaddr_to_pj_sockaddr</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>, &amp;base);</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;            }</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;            <span class="keywordflow">if</span> (!pj_sockaddr_cmp(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>, &amp;ext)) {</div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;               srflx = 0;</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;            }</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(candidate, -1);</div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;         }</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;         <span class="keywordflow">if</span> (srflx &amp;&amp; baseset) {</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;            pj_sockaddr_set_port(&amp;base, port);</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aec6a67dd9e8be83fce73c1c1a63a58d8">ast_rtp_ice_add_cand</a>(instance, rtp, component, transport,</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;               PJ_ICE_CAND_TYPE_SRFLX, 65535, &amp;ext, &amp;base, &amp;base,</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;               pj_sockaddr_get_len(&amp;ext));</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;         }</div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;      }</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;   }</div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;   <span class="comment">/* If configured to use a TURN relay create a session and allocate */</span></div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;   <span class="keywordflow">if</span> (pj_strlen(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a97d66f714d8a621c7e6deb9ca3ce407a">turnaddr</a>)) {</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a7b0a5701597e079d3eab80b7145c3944">ast_rtp_ice_turn_request</a>(instance, component, <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3acd1be5fd1357a3d7f56ec62fc01bdc20">AST_TRANSPORT_TCP</a>, pj_strbuf(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a97d66f714d8a621c7e6deb9ca3ce407a">turnaddr</a>), <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad251f81e8d409b245b9f2ce9993e1df7">turnport</a>,</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;         pj_strbuf(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a54c70c91c4221587d7f59bf536539780">turnusername</a>), pj_strbuf(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac2c7ecf8b1b5d36e9b8601c19aece7b4">turnpassword</a>));</div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;   }</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;}</div><div class="ttc" id="structast__ice__host__candidate_html_a5256006bb1426efe38b3903704b65389"><div class="ttname"><a href="../../d4/db5/structast__ice__host__candidate.html#a5256006bb1426efe38b3903704b65389">ast_ice_host_candidate::local</a></div><div class="ttdeci">struct ast_sockaddr local</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00270">res_rtp_asterisk.c:270</a></div></div>
<div class="ttc" id="logger__category_8h_html_ad5e6ac27cd91f510ebbff6d445c42c91"><div class="ttname"><a href="../../d5/d1f/logger__category_8h.html#ad5e6ac27cd91f510ebbff6d445c42c91">ast_debug_category</a></div><div class="ttdeci">#define ast_debug_category(sublevel, ids,...)</div><div class="ttdoc">Log for a debug category. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/logger__category_8h_source.html#l00171">logger_category.h:171</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a803f0eec67b997f0f582f04586635a10">AST_RTP_ICE_COMPONENT_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00464">rtp_engine.h:464</a></div></div>
<div class="ttc" id="structhost__candidates_html"><div class="ttname"><a href="../../d7/db0/structhost__candidates.html">host_candidates</a></div><div class="ttdoc">List of ICE host candidate mappings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00277">res_rtp_asterisk.c:277</a></div></div>
<div class="ttc" id="stun_8h_html_a8112b74e5f7e64a3ec084f4a91e261a9"><div class="ttname"><a href="../../d3/d00/stun_8h.html#a8112b74e5f7e64a3ec084f4a91e261a9">AST_DEBUG_CATEGORY_STUN</a></div><div class="ttdeci">#define AST_DEBUG_CATEGORY_STUN</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/stun_8h_source.html#l00044">stun.h:44</a></div></div>
<div class="ttc" id="structast__ice__host__candidate_html_a22906b79916bbcd963916c92a328fab0"><div class="ttname"><a href="../../d4/db5/structast__ice__host__candidate.html#a22906b79916bbcd963916c92a328fab0">ast_ice_host_candidate::include_local</a></div><div class="ttdeci">unsigned int include_local</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00272">res_rtp_asterisk.c:272</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="res__pjproject_8h_html_a2a645245bf7eb35b94aacaac3aa119df"><div class="ttname"><a href="../../df/dd5/res__pjproject_8h.html#a2a645245bf7eb35b94aacaac3aa119df">ast_sockaddr_to_pj_sockaddr</a></div><div class="ttdeci">int ast_sockaddr_to_pj_sockaddr(const struct ast_sockaddr *addr, pj_sockaddr *pjaddr)</div><div class="ttdoc">Fill a pj_sockaddr from an ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/deb/res__pjproject_8c_source.html#l00477">res_pjproject.c:477</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a33e91cd0cef6786e9e3a27ac67707207"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a></div><div class="ttdeci">if(!yyg-&gt;yy_init)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00868">ast_expr2f.c:868</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="netsock2_8h_html_abae1b903c8f5b7639235b579a267aaab"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a></div><div class="ttdeci">int ast_sockaddr_cmp(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00388">netsock2.c:388</a></div></div>
<div class="ttc" id="http_8c_html_af9b32121c4ad80b0887a3d73fd24de5f"><div class="ttname"><a href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a></div><div class="ttdeci">const char * ext</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00147">http.c:147</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a></div><div class="ttdoc">Structure for an ICE candidate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00474">rtp_engine.h:474</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="netsock2_8h_html_a5fb3221004de6004d4c1f04c816eaac8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a5fb3221004de6004d4c1f04c816eaac8">ast_sockaddr_cmp_addr</a></div><div class="ttdeci">int ast_sockaddr_cmp_addr(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares the addresses of two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00413">netsock2.c:413</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ae3e4a18170e8b5a1f73042adc647455f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae3e4a18170e8b5a1f73042adc647455f">lo6</a></div><div class="ttdeci">static struct ast_sockaddr lo6</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00222">res_rtp_asterisk.c:222</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad91b5dfe4c188d15f4b2e9e2ec5d8864"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a></div><div class="ttdeci">static void ast_sockaddr_setnull(struct ast_sockaddr *addr)</div><div class="ttdoc">Sets address addr to null. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00140">netsock2.h:140</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad251f81e8d409b245b9f2ce9993e1df7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad251f81e8d409b245b9f2ce9993e1df7">turnport</a></div><div class="ttdeci">static int turnport</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00218">res_rtp_asterisk.c:218</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="netsock2_8h_html_a7704d67f19f3ca91198d8cc6e6445c3f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a7704d67f19f3ca91198d8cc6e6445c3f">ast_sockaddr_is_any</a></div><div class="ttdeci">int ast_sockaddr_is_any(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if the address type is unspecified, or &quot;any&quot; address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00534">netsock2.c:534</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a53f406ef990fb9279d21572104158ab2"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a53f406ef990fb9279d21572104158ab2">stunaddr</a></div><div class="ttdeci">static struct sockaddr_in stunaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00216">res_rtp_asterisk.c:216</a></div></div>
<div class="ttc" id="stun_8h_html_a494a72723299c0e75e1c2cf092135ea6"><div class="ttname"><a href="../../d3/d00/stun_8h.html#a494a72723299c0e75e1c2cf092135ea6">ast_stun_request</a></div><div class="ttdeci">int ast_stun_request(int s, struct sockaddr_in *dst, const char *username, struct sockaddr_in *answer)</div><div class="ttdoc">Generic STUN request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dbd/stun_8c_source.html#l00384">stun.c:384</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ab8dde573cc3974acd626c5626fae14b4"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a></div><div class="ttdeci">static int answer(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00682">chan_pjsip.c:682</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga848f8deb4762ac97ef5f385b35f1c331"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga848f8deb4762ac97ef5f385b35f1c331">AST_DEBUG_CATEGORY_ICE</a></div><div class="ttdeci">#define AST_DEBUG_CATEGORY_ICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02852">rtp_engine.h:2852</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aec6a67dd9e8be83fce73c1c1a63a58d8"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aec6a67dd9e8be83fce73c1c1a63a58d8">ast_rtp_ice_add_cand</a></div><div class="ttdeci">static void ast_rtp_ice_add_cand(struct ast_rtp_instance *instance, struct ast_rtp *rtp, unsigned comp_id, unsigned transport_id, pj_ice_cand_type type, pj_uint16_t local_pref, const pj_sockaddr_t *addr, const pj_sockaddr_t *base_addr, const pj_sockaddr_t *rel_addr, int addr_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01239">res_rtp_asterisk.c:1239</a></div></div>
<div class="ttc" id="netsock2_8h_html_a5d076255155f742978b2568498bf562e"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a5d076255155f742978b2568498bf562e">ast_sockaddr_from_sockaddr</a></div><div class="ttdeci">#define ast_sockaddr_from_sockaddr(addr, sa)</div><div class="ttdoc">Converts a struct sockaddr to a struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00824">netsock2.h:824</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78a9c7714a26263c1e7fb88ff9defd64ea2">AST_RTP_ICE_COMPONENT_RTP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00463">rtp_engine.h:463</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a6b801d4e79b211acfad64dbf20da9f72"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a6b801d4e79b211acfad64dbf20da9f72">stun_address_is_blacklisted</a></div><div class="ttdeci">static int stun_address_is_blacklisted(const struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03510">res_rtp_asterisk.c:3510</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaad9e84526c8d48bd3e980e732dd1f7df"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a></div><div class="ttdeci">#define ast_debug_ice(sublevel,...)</div><div class="ttdoc">Log debug level ICE information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02898">rtp_engine.h:2898</a></div></div>
<div class="ttc" id="network_8h_html_a5a735cb59e8a8ddd78078d396db7e106"><div class="ttname"><a href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a></div><div class="ttdeci">const char * ast_inet_ntoa(struct in_addr ia)</div><div class="ttdoc">thread-safe replacement for inet_ntoa(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00782">main/utils.c:782</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aae6227e287afecf4d8ada4d05b82554a"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aae6227e287afecf4d8ada4d05b82554a">rtp_address_is_ice_blacklisted</a></div><div class="ttdeci">static int rtp_address_is_ice_blacklisted(const struct ast_sockaddr *address)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03487">res_rtp_asterisk.c:3487</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa2785c5990a086943fea750c980abbc3acd1be5fd1357a3d7f56ec62fc01bdc20"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3acd1be5fd1357a3d7f56ec62fc01bdc20">AST_TRANSPORT_TCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00061">netsock2.h:61</a></div></div>
<div class="ttc" id="structast__ice__host__candidate_html_acd8b71d30c6e8b2369e0b2c377d29cb6"><div class="ttname"><a href="../../d4/db5/structast__ice__host__candidate.html#acd8b71d30c6e8b2369e0b2c377d29cb6">ast_ice_host_candidate::advertised</a></div><div class="ttdeci">struct ast_sockaddr advertised</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00271">res_rtp_asterisk.c:271</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a97d66f714d8a621c7e6deb9ca3ce407a"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a97d66f714d8a621c7e6deb9ca3ce407a">turnaddr</a></div><div class="ttdeci">static pj_str_t turnaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00217">res_rtp_asterisk.c:217</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac2c7ecf8b1b5d36e9b8601c19aece7b4"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac2c7ecf8b1b5d36e9b8601c19aece7b4">turnpassword</a></div><div class="ttdeci">static pj_str_t turnpassword</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00220">res_rtp_asterisk.c:220</a></div></div>
<div class="ttc" id="structast__ice__host__candidate_html"><div class="ttname"><a href="../../d4/db5/structast__ice__host__candidate.html">ast_ice_host_candidate</a></div><div class="ttdoc">Structure which contains ICE host candidate mapping information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00269">res_rtp_asterisk.c:269</a></div></div>
<div class="ttc" id="netsock2_8h_html_adbbb5a3382be0925c292a4933ce5b63d"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a></div><div class="ttdeci">int ast_sockaddr_is_ipv4(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if the address is an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00497">netsock2.c:497</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa2785c5990a086943fea750c980abbc3a806b187d5e4f7490e46a039792f850bc"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a806b187d5e4f7490e46a039792f850bc">AST_TRANSPORT_UDP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00060">netsock2.h:60</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a06332befc0224dfca0e6562d84f5df73"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">ast_rtp_engine_ice_candidate::address</a></div><div class="ttdeci">struct ast_sockaddr address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00479">rtp_engine.h:479</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a54c70c91c4221587d7f59bf536539780"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a54c70c91c4221587d7f59bf536539780">turnusername</a></div><div class="ttdeci">static pj_str_t turnusername</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00219">res_rtp_asterisk.c:219</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a7b0a5701597e079d3eab80b7145c3944"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a7b0a5701597e079d3eab80b7145c3944">ast_rtp_ice_turn_request</a></div><div class="ttdeci">static void ast_rtp_ice_turn_request(struct ast_rtp_instance *instance, enum ast_rtp_ice_component_type component, enum ast_transport transport, const char *server, unsigned int port, const char *username, const char *password)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01577">res_rtp_asterisk.c:1577</a></div></div>
<div class="ttc" id="structast__rtp_html_a339d22b3e442946380f98ed19e320db2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">ast_rtp::s</a></div><div class="ttdeci">int s</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">res_rtp_asterisk.c:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aae6227e287afecf4d8ada4d05b82554a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae6227e287afecf4d8ada4d05b82554a">&#9670;&nbsp;</a></span>rtp_address_is_ice_blacklisted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtp_address_is_ice_blacklisted </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03487">3487</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/db8/acl_8c_source.html#l00804">ast_apply_acl_nolog()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00233">ast_rwlock_rdlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../d5/d59/acl_8h_source.html#l00037">AST_SENSE_DENY</a>, and <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>.</p>
<div class="fragment"><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;{</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = 0;</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aab7301990e5a8cbb0455c7efc4596ac5">ice_acl_lock</a>);</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;   result |= <a class="code" href="../../d5/d59/acl_8h.html#a8752b9c65a8a31102f7155f99451ca53">ast_apply_acl_nolog</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aab6e5d05eb162134d044fec583e951d1">ice_acl</a>, address) == <a class="code" href="../../d5/d59/acl_8h.html#a764d04fe9485be95771e652dc2c87445abb486b5b819cf3b3951ce0a2e584f065">AST_SENSE_DENY</a>;</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aab7301990e5a8cbb0455c7efc4596ac5">ice_acl_lock</a>);</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;}</div><div class="ttc" id="lock_8h_html_a7330ac9d36b05bad68b188c2dcfa42d7"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a></div><div class="ttdeci">#define ast_rwlock_rdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00233">lock.h:233</a></div></div>
<div class="ttc" id="acl_8h_html_a8752b9c65a8a31102f7155f99451ca53"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a8752b9c65a8a31102f7155f99451ca53">ast_apply_acl_nolog</a></div><div class="ttdeci">enum ast_acl_sense ast_apply_acl_nolog(struct ast_acl_list *acl_list, const struct ast_sockaddr *addr)</div><div class="ttdoc">Apply a set of rules to a given IP address, don&amp;#39;t log failure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l00804">acl.c:804</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aab6e5d05eb162134d044fec583e951d1"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aab6e5d05eb162134d044fec583e951d1">ice_acl</a></div><div class="ttdeci">static struct ast_acl_list * ice_acl</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00225">res_rtp_asterisk.c:225</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aab7301990e5a8cbb0455c7efc4596ac5"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aab7301990e5a8cbb0455c7efc4596ac5">ice_acl_lock</a></div><div class="ttdeci">static ast_rwlock_t ice_acl_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00226">res_rtp_asterisk.c:226</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="acl_8h_html_a764d04fe9485be95771e652dc2c87445abb486b5b819cf3b3951ce0a2e584f065"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a764d04fe9485be95771e652dc2c87445abb486b5b819cf3b3951ce0a2e584f065">AST_SENSE_DENY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d59/acl_8h_source.html#l00037">acl.h:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a51ac7e289874d2165b05e7ae8dc068ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51ac7e289874d2165b05e7ae8dc068ae">&#9670;&nbsp;</a></span>rtp_allocate_transport()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtp_allocate_transport </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">3828</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00590">ast_bind()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02898">ast_debug_ice</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02860">ast_debug_rtp</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">ast_random()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00588">ast_rtp_instance_set_local_address()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00497">ast_sockaddr_is_ipv4()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00524">ast_sockaddr_is_ipv6()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00196">ast_test_suite_event_notify</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03360">create_new_socket()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01720">generate_random_string()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03750">ice_create()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00214">icesupport</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00196">rtpend</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00195">rtpstart</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">ast_rtp::s</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00166">STRICT_RTP_CLOSED</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00164">STRICT_RTP_OPEN</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00206">strictrtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08938">ast_rtp_bundle()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03992">ast_rtp_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;{</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;   <span class="keywordtype">int</span> x, startplace;</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;   rtp-&gt;strict_rtp_state = (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a> ? <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4baff585ea9a2059021ce5a5f4a7ed8895f">STRICT_RTP_CLOSED</a> : <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1">STRICT_RTP_OPEN</a>);</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;   <span class="comment">/* Create a new socket for us to listen on and use */</span></div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;   <span class="keywordflow">if</span> ((rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> =</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;        <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a64f68b734a7edd69efce133ae28e7d39">create_new_socket</a>(<span class="stringliteral">&quot;RTP&quot;</span>,</div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;                <a class="code" href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a>(&amp;rtp-&gt;bind_address) ? AF_INET  :</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;                <a class="code" href="../../db/df1/netsock2_8h.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a>(&amp;rtp-&gt;bind_address) ? AF_INET6 : -1)) &lt; 0) {</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to create a new socket for RTP instance &#39;%p&#39;\n&quot;</span>, instance);</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;   }</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;   <span class="comment">/* Now actually find a free RTP port to use */</span></div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;   x = (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a> == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a>) ? <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a> : (<a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>() % (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a> - <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a>)) + <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a>;</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;   x = x &amp; ~1;</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;   startplace = x;</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;rtp-&gt;bind_address, x);</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;      <span class="comment">/* Try to bind, this will tell us whether the port is available or not */</span></div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#a58f856feeaf684b7d5353357e85a0dd5">ast_bind</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>, &amp;rtp-&gt;bind_address)) {</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p) RTP allocated port %d\n&quot;</span>, instance, x);</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a852b2b1d8dbc848c5c27bd37f33e13e0">ast_rtp_instance_set_local_address</a>(instance, &amp;rtp-&gt;bind_address);</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;RTP_PORT_ALLOCATED&quot;</span>, <span class="stringliteral">&quot;Port: %d&quot;</span>, x);</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;      }</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;      x += 2;</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;      <span class="keywordflow">if</span> (x &gt; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a>) {</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;         x = (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a> + 1) &amp; ~1;</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;      }</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;      <span class="comment">/* See if we ran out of ports or if the bind actually failed because of something other than the address being in use */</span></div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;      <span class="keywordflow">if</span> (x == startplace || (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EADDRINUSE &amp;&amp; <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EACCES)) {</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Oh dear... we couldn&#39;t allocate a port for RTP instance &#39;%p&#39;\n&quot;</span>, instance);</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;         close(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>);</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;         rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> = -1;</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;      }</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;   }</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;</div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;   <span class="comment">/* Initialize synchronization aspects */</span></div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;rtp-&gt;cond, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9f4aa0ba10c92a6d97d91a1ba021da73">generate_random_string</a>(rtp-&gt;local_ufrag, <span class="keyword">sizeof</span>(rtp-&gt;local_ufrag));</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9f4aa0ba10c92a6d97d91a1ba021da73">generate_random_string</a>(rtp-&gt;local_passwd, <span class="keyword">sizeof</span>(rtp-&gt;local_passwd));</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;   <span class="comment">/* Create an ICE session for ICE negotiation */</span></div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab452a162adc04bec273fda937902e95e">icesupport</a>) {</div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;      rtp-&gt;ice_num_components = 2;</div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE creating session %s (%d)\n&quot;</span>, instance,</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;rtp-&gt;bind_address), x);</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a15d17ae297e9f6b5c781f98b4795341d">ice_create</a>(instance, &amp;rtp-&gt;bind_address, x, 0)) {</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;(%p) ICE failed to create session\n&quot;</span>, instance);</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;         rtp-&gt;ice_port = x;</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;rtp-&gt;ice_original_rtp_addr, &amp;rtp-&gt;bind_address);</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;      }</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;   }</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;</div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP)</span></div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;   rtp-&gt;rekeyid = -1;</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;   rtp-&gt;dtls.timeout_timer = -1;</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_ab452a162adc04bec273fda937902e95e"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab452a162adc04bec273fda937902e95e">icesupport</a></div><div class="ttdeci">static int icesupport</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00214">res_rtp_asterisk.c:214</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa3d9ba5adbb6566211600f0ab4a027c7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a></div><div class="ttdeci">static int rtpstart</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00195">res_rtp_asterisk.c:195</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4bab82bff21db6795dfa152e316f6ae6bc1">STRICT_RTP_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00164">res_rtp_asterisk.c:164</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="netsock2_8h_html_a58f856feeaf684b7d5353357e85a0dd5"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a58f856feeaf684b7d5353357e85a0dd5">ast_bind</a></div><div class="ttdeci">int ast_bind(int sockfd, const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around bind(2) that uses struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00590">netsock2.c:590</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga669fb90e123085584d65608ef87b2fe4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a></div><div class="ttdeci">#define ast_debug_rtp(sublevel,...)</div><div class="ttdoc">Log debug level RTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02860">rtp_engine.h:2860</a></div></div>
<div class="ttc" id="utils_8h_html_a7b4f10b070e95ba413e258a3e4b03c20"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a></div><div class="ttdeci">long int ast_random(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02064">main/utils.c:2064</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a852b2b1d8dbc848c5c27bd37f33e13e0"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a852b2b1d8dbc848c5c27bd37f33e13e0">ast_rtp_instance_set_local_address</a></div><div class="ttdeci">int ast_rtp_instance_set_local_address(struct ast_rtp_instance *instance, const struct ast_sockaddr *address)</div><div class="ttdoc">Set the address that we are expecting to receive RTP on. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00588">rtp_engine.c:588</a></div></div>
<div class="ttc" id="test_8h_html_a9482d93ea3931853331bdbc745ce7cb4"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a></div><div class="ttdeci">#define ast_test_suite_event_notify(s, f,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00196">test.h:196</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a96336b3ac9e5b66f365f0ca5ba613995"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a></div><div class="ttdeci">static int strictrtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00206">res_rtp_asterisk.c:206</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaad9e84526c8d48bd3e980e732dd1f7df"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a></div><div class="ttdeci">#define ast_debug_ice(sublevel,...)</div><div class="ttdoc">Log debug level ICE information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02898">rtp_engine.h:2898</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a9f4aa0ba10c92a6d97d91a1ba021da73"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a9f4aa0ba10c92a6d97d91a1ba021da73">generate_random_string</a></div><div class="ttdeci">static char * generate_random_string(char *buf, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01720">res_rtp_asterisk.c:1720</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aca6484d75ee9d79a5d4447149f9c8c4baff585ea9a2059021ce5a5f4a7ed8895f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4baff585ea9a2059021ce5a5f4a7ed8895f">STRICT_RTP_CLOSED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00166">res_rtp_asterisk.c:166</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a15d17ae297e9f6b5c781f98b4795341d"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a15d17ae297e9f6b5c781f98b4795341d">ice_create</a></div><div class="ttdeci">static int ice_create(struct ast_rtp_instance *instance, struct ast_sockaddr *addr, int port, int replace)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03750">res_rtp_asterisk.c:3750</a></div></div>
<div class="ttc" id="netsock2_8h_html_adbbb5a3382be0925c292a4933ce5b63d"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a></div><div class="ttdeci">int ast_sockaddr_is_ipv4(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if the address is an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00497">netsock2.c:497</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a64f68b734a7edd69efce133ae28e7d39"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a64f68b734a7edd69efce133ae28e7d39">create_new_socket</a></div><div class="ttdeci">static int create_new_socket(const char *type, int af)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03360">res_rtp_asterisk.c:3360</a></div></div>
<div class="ttc" id="netsock2_8h_html_a579748bd6ceddd06b1cc6eb3578e8acc"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a></div><div class="ttdeci">int ast_sockaddr_is_ipv6(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if this is an IPv6 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00524">netsock2.c:524</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4b0895b04a97fb8d38e0f15dfed4c9e0"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a></div><div class="ttdeci">static int rtpend</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00196">res_rtp_asterisk.c:196</a></div></div>
<div class="ttc" id="structast__rtp_html_a339d22b3e442946380f98ed19e320db2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">ast_rtp::s</a></div><div class="ttdeci">int s</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">res_rtp_asterisk.c:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ae4ff586a4129d3eab4c60b39c65f36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ae4ff586a4129d3eab4c60b39c65f36">&#9670;&nbsp;</a></span>rtp_deallocate_transport()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_deallocate_transport </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03901">3901</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00476">ao2_object_get_lockaddr()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02898">ast_debug_ice</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00891">ast_rtp_ice_stop()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00238">ast_samp2tv()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">pj_thread_register_check()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01492">rtp_ioqueue_thread_remove()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">ast_rtp::s</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00107">TURN_STATE_WAIT_TIME</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08938">ast_rtp_bundle()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04048">ast_rtp_destroy()</a>.</p>
<div class="fragment"><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;{</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;   <span class="keywordtype">int</span> saved_rtp_s = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>;</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;   <span class="keyword">struct </span>timeval wait = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a03f4d7d97d914208e1f779d1c09db7bb">TURN_STATE_WAIT_TIME</a>, 1000));</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;   <span class="keyword">struct </span>timespec ts = { .tv_sec = wait.tv_sec, .tv_nsec = wait.tv_usec * 1000, };</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP)</span></div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;   ast_rtp_dtls_stop(instance);</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;   <span class="comment">/* Close our own socket so we no longer get packets */</span></div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> &gt; -1) {</div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;      close(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>);</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> = -1;</div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;   }</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;   <span class="comment">/* Destroy RTCP if it was being used */</span></div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;rtcp &amp;&amp; rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> &gt; -1) {</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;      <span class="keywordflow">if</span> (saved_rtp_s != rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>) {</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;         close(rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a>);</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;      }</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;      rtp-&gt;rtcp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">s</a> = -1;</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;   }</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;</div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a>();</div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;<span class="comment">    * The instance lock is already held.</span></div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;<span class="comment">    * Destroy the RTP TURN relay if being used</span></div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;turn_rtp) {</div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;      rtp-&gt;turn_state = PJ_TURN_STATE_NULL;</div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;</div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;      <span class="comment">/* Release the instance lock to avoid deadlock with PJPROJECT group lock */</span></div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;      pj_turn_sock_destroy(rtp-&gt;turn_rtp);</div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;      <span class="keywordflow">while</span> (rtp-&gt;turn_state != PJ_TURN_STATE_DESTROYING) {</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;rtp-&gt;cond, <a class="code" href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a>(instance), &amp;ts);</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;      }</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;      rtp-&gt;turn_rtp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;   }</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;   <span class="comment">/* Destroy the RTCP TURN relay if being used */</span></div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;turn_rtcp) {</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;      rtp-&gt;turn_state = PJ_TURN_STATE_NULL;</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;      <span class="comment">/* Release the instance lock to avoid deadlock with PJPROJECT group lock */</span></div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;      pj_turn_sock_destroy(rtp-&gt;turn_rtcp);</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;      <span class="keywordflow">while</span> (rtp-&gt;turn_state != PJ_TURN_STATE_DESTROYING) {</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;rtp-&gt;cond, <a class="code" href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a>(instance), &amp;ts);</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;      }</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;      rtp-&gt;turn_rtcp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;   }</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE RTP transport deallocating\n&quot;</span>, instance);</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;   <span class="comment">/* Destroy any ICE session */</span></div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad1bbfc1e97ca48872b4ff30e27cbe996">ast_rtp_ice_stop</a>(instance);</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;   <span class="comment">/* Destroy any candidates */</span></div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;ice_local_candidates) {</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(rtp-&gt;ice_local_candidates, -1);</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;      rtp-&gt;ice_local_candidates = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;   }</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;ice_active_remote_candidates) {</div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(rtp-&gt;ice_active_remote_candidates, -1);</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;      rtp-&gt;ice_active_remote_candidates = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;   }</div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;ioqueue) {</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;<span class="comment">       * We cannot hold the instance lock because we could wait</span></div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;<span class="comment">       * for the ioqueue thread to die and we might deadlock as</span></div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;<span class="comment">       * a result.</span></div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad2725307ebff2c0f2a0d7065fc613b32">rtp_ioqueue_thread_remove</a>(rtp-&gt;ioqueue);</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;      rtp-&gt;ioqueue = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;   }</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;}</div><div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad1bbfc1e97ca48872b4ff30e27cbe996"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad1bbfc1e97ca48872b4ff30e27cbe996">ast_rtp_ice_stop</a></div><div class="ttdeci">static void ast_rtp_ice_stop(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00891">res_rtp_asterisk.c:891</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4884315209af5f6ecb90ba9ef0a70344"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a></div><div class="ttdeci">static void pj_thread_register_check(void)</div><div class="ttdoc">Function used to check if the calling thread is registered with pjlib. If it is not it will be regist...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">res_rtp_asterisk.c:865</a></div></div>
<div class="ttc" id="astobj2_8h_html_a503b6c7ced96f9b56ec59c115cbeb29a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a></div><div class="ttdeci">void * ao2_object_get_lockaddr(void *obj)</div><div class="ttdoc">Return the mutex lock address of an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00476">astobj2.c:476</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="time_8h_html_a1d774df72e3dbb623475783e06ce4f61"><div class="ttname"><a href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a></div><div class="ttdeci">struct timeval ast_samp2tv(unsigned int _nsamp, unsigned int _rate)</div><div class="ttdoc">Returns a timeval corresponding to the duration of n samples at rate r. Useful to convert samples to ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00238">time.h:238</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a03f4d7d97d914208e1f779d1c09db7bb"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a03f4d7d97d914208e1f779d1c09db7bb">TURN_STATE_WAIT_TIME</a></div><div class="ttdeci">#define TURN_STATE_WAIT_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00107">res_rtp_asterisk.c:107</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaad9e84526c8d48bd3e980e732dd1f7df"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a></div><div class="ttdeci">#define ast_debug_ice(sublevel,...)</div><div class="ttdoc">Log debug level ICE information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02898">rtp_engine.h:2898</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad2725307ebff2c0f2a0d7065fc613b32"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad2725307ebff2c0f2a0d7065fc613b32">rtp_ioqueue_thread_remove</a></div><div class="ttdeci">static void rtp_ioqueue_thread_remove(struct ast_rtp_ioqueue_thread *ioqueue)</div><div class="ttdoc">Removal function for ioqueue thread, determines if it should be terminated and destroyed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01492">res_rtp_asterisk.c:1492</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="structast__rtp_html_a339d22b3e442946380f98ed19e320db2"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a339d22b3e442946380f98ed19e320db2">ast_rtp::s</a></div><div class="ttdeci">int s</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00368">res_rtp_asterisk.c:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac963384d2cd5bf0a453061cc6889a44b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac963384d2cd5bf0a453061cc6889a44b">&#9670;&nbsp;</a></span>rtp_debug_test_addr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtp_debug_test_addr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">2746</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02864">ast_debug_rtp_packet_is_allowed</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00388">ast_sockaddr_cmp()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00413">ast_sockaddr_cmp_addr()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00199">rtpdebugaddr</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00201">rtpdebugport</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04134">ast_rtp_dtmf_begin()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04209">ast_rtp_dtmf_continuation()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04255">ast_rtp_dtmf_end_with_duration()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08816">ast_rtp_sendcng()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06649">bridge_p2p_rtp_write()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05506">process_dtmf_rfc2833()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">rtp_raw_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;{</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a>) {</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;   }</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a183791de441f6c5592785ed3f9043a50">rtpdebugaddr</a>)) {</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a057bbbbb7c8ac748932e093d251dc7bf">rtpdebugport</a>) {</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;         <span class="keywordflow">return</span> (<a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a183791de441f6c5592785ed3f9043a50">rtpdebugaddr</a>, addr) == 0); <span class="comment">/* look for RTP packets from IP+Port */</span></div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;         <span class="keywordflow">return</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a5fb3221004de6004d4c1f04c816eaac8">ast_sockaddr_cmp_addr</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a183791de441f6c5592785ed3f9043a50">rtpdebugaddr</a>, addr) == 0); <span class="comment">/* only look for RTP packets from IP */</span></div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;      }</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;   }</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a057bbbbb7c8ac748932e093d251dc7bf"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a057bbbbb7c8ac748932e093d251dc7bf">rtpdebugport</a></div><div class="ttdeci">static int rtpdebugport</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00201">res_rtp_asterisk.c:201</a></div></div>
<div class="ttc" id="netsock2_8h_html_abae1b903c8f5b7639235b579a267aaab"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a></div><div class="ttdeci">int ast_sockaddr_cmp(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00388">netsock2.c:388</a></div></div>
<div class="ttc" id="netsock2_8h_html_a5fb3221004de6004d4c1f04c816eaac8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a5fb3221004de6004d4c1f04c816eaac8">ast_sockaddr_cmp_addr</a></div><div class="ttdeci">int ast_sockaddr_cmp_addr(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares the addresses of two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00413">netsock2.c:413</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a183791de441f6c5592785ed3f9043a50"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a183791de441f6c5592785ed3f9043a50">rtpdebugaddr</a></div><div class="ttdeci">static struct ast_sockaddr rtpdebugaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00199">res_rtp_asterisk.c:199</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga5009aeec1269fecc5f4e04c1c479116d"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a></div><div class="ttdeci">#define ast_debug_rtp_packet_is_allowed</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02864">rtp_engine.h:2864</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a07116c4a926b544b84936ff2f788883f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07116c4a926b544b84936ff2f788883f">&#9670;&nbsp;</a></span>rtp_do_debug_ip()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* rtp_do_debug_ip </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09038">9038</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d0/d87/logger__category_8c_source.html#l00289">ast_debug_category_set_sublevel()</a>, <a class="el" href="../../d5/d1f/logger__category_8h_source.html#l00026">AST_LOG_CATEGORY_ENABLED</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02826">AST_LOG_CATEGORY_RTP_PACKET</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00164">ast_sockaddr_split_hostport()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00199">rtpdebugaddr</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00201">rtpdebugport</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09072">handle_cli_rtp_set_debug()</a>.</p>
<div class="fragment"><div class="line"><a name="l09039"></a><span class="lineno"> 9039</span>&#160;{</div><div class="line"><a name="l09040"></a><span class="lineno"> 9040</span>&#160;   <span class="keywordtype">char</span> *arg = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]);</div><div class="line"><a name="l09041"></a><span class="lineno"> 9041</span>&#160;   <span class="keywordtype">char</span> *debughost = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09042"></a><span class="lineno"> 9042</span>&#160;   <span class="keywordtype">char</span> *debugport = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09043"></a><span class="lineno"> 9043</span>&#160;</div><div class="line"><a name="l09044"></a><span class="lineno"> 9044</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a183791de441f6c5592785ed3f9043a50">rtpdebugaddr</a>, arg, 0) || !<a class="code" href="../../db/df1/netsock2_8h.html#a774d22af00b04d5bc0c9e3456ac44ad2">ast_sockaddr_split_hostport</a>(arg, &amp;debughost, &amp;debugport, 0)) {</div><div class="line"><a name="l09045"></a><span class="lineno"> 9045</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Lookup failed for &#39;%s&#39;\n&quot;</span>, arg);</div><div class="line"><a name="l09046"></a><span class="lineno"> 9046</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l09047"></a><span class="lineno"> 9047</span>&#160;   }</div><div class="line"><a name="l09048"></a><span class="lineno"> 9048</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a057bbbbb7c8ac748932e093d251dc7bf">rtpdebugport</a> = (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(debugport) &amp;&amp; debugport[0] != <span class="charliteral">&#39;0&#39;</span>);</div><div class="line"><a name="l09049"></a><span class="lineno"> 9049</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;RTP Packet Debugging Enabled for address: %s\n&quot;</span>,</div><div class="line"><a name="l09050"></a><span class="lineno"> 9050</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a183791de441f6c5592785ed3f9043a50">rtpdebugaddr</a>));</div><div class="line"><a name="l09051"></a><span class="lineno"> 9051</span>&#160;   <a class="code" href="../../d5/d1f/logger__category_8h.html#ae69108dfd1226cb66d86d02bec5de3cb">ast_debug_category_set_sublevel</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaa5ecf12e596867bc22d8df75d2568d96">AST_LOG_CATEGORY_RTP_PACKET</a>, <a class="code" href="../../d5/d1f/logger__category_8h.html#a1b441edad5de1831924e98abec3bbf57">AST_LOG_CATEGORY_ENABLED</a>);</div><div class="line"><a name="l09052"></a><span class="lineno"> 9052</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l09053"></a><span class="lineno"> 9053</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_aad98818272870e12d48fe4347aaa46d0"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a></div><div class="ttdeci">int ast_sockaddr_parse(struct ast_sockaddr *addr, const char *str, int flags)</div><div class="ttdoc">Parse an IPv4 or IPv6 address string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00230">netsock2.c:230</a></div></div>
<div class="ttc" id="logger__category_8h_html_ae69108dfd1226cb66d86d02bec5de3cb"><div class="ttname"><a href="../../d5/d1f/logger__category_8h.html#ae69108dfd1226cb66d86d02bec5de3cb">ast_debug_category_set_sublevel</a></div><div class="ttdeci">int ast_debug_category_set_sublevel(const char *name, int sublevel)</div><div class="ttdoc">Set the debug category&amp;#39;s sublevel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d87/logger__category_8c_source.html#l00289">logger_category.c:289</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a057bbbbb7c8ac748932e093d251dc7bf"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a057bbbbb7c8ac748932e093d251dc7bf">rtpdebugport</a></div><div class="ttdeci">static int rtpdebugport</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00201">res_rtp_asterisk.c:201</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="netsock2_8h_html_a774d22af00b04d5bc0c9e3456ac44ad2"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a774d22af00b04d5bc0c9e3456ac44ad2">ast_sockaddr_split_hostport</a></div><div class="ttdeci">int ast_sockaddr_split_hostport(char *str, char **host, char **port, int flags)</div><div class="ttdoc">Splits a string into its host and port components. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00164">netsock2.c:164</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a183791de441f6c5592785ed3f9043a50"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a183791de441f6c5592785ed3f9043a50">rtpdebugaddr</a></div><div class="ttdeci">static struct ast_sockaddr rtpdebugaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00199">res_rtp_asterisk.c:199</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaa5ecf12e596867bc22d8df75d2568d96"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaa5ecf12e596867bc22d8df75d2568d96">AST_LOG_CATEGORY_RTP_PACKET</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_RTP_PACKET</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02826">rtp_engine.h:2826</a></div></div>
<div class="ttc" id="logger__category_8h_html_a1b441edad5de1831924e98abec3bbf57"><div class="ttname"><a href="../../d5/d1f/logger__category_8h.html#a1b441edad5de1831924e98abec3bbf57">AST_LOG_CATEGORY_ENABLED</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_ENABLED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/logger__category_8h_source.html#l00026">logger_category.h:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab9d6ff10648a47e0e609f57ac749d6dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9d6ff10648a47e0e609f57ac749d6dc">&#9670;&nbsp;</a></span>rtp_find_instance_by_media_source_ssrc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a>* rtp_find_instance_by_media_source_ssrc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>ssrc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05904">5904</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05869">__rtp_find_instance_by_ssrc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;{</div><div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a91f96771023031aa67c022c6ab35fcb3">__rtp_find_instance_by_ssrc</a>(instance, rtp, ssrc, 1);</div><div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a91f96771023031aa67c022c6ab35fcb3"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a91f96771023031aa67c022c6ab35fcb3">__rtp_find_instance_by_ssrc</a></div><div class="ttdeci">static struct ast_rtp_instance * __rtp_find_instance_by_ssrc(struct ast_rtp_instance *instance, struct ast_rtp *rtp, unsigned int ssrc, int source)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05869">res_rtp_asterisk.c:5869</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5402d4a2ce7addf589cc3efdb25b27be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5402d4a2ce7addf589cc3efdb25b27be">&#9670;&nbsp;</a></span>rtp_find_instance_by_packet_source_ssrc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a>* rtp_find_instance_by_packet_source_ssrc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>ssrc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05897">5897</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05869">__rtp_find_instance_by_ssrc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;{</div><div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a91f96771023031aa67c022c6ab35fcb3">__rtp_find_instance_by_ssrc</a>(instance, rtp, ssrc, 0);</div><div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a91f96771023031aa67c022c6ab35fcb3"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a91f96771023031aa67c022c6ab35fcb3">__rtp_find_instance_by_ssrc</a></div><div class="ttdeci">static struct ast_rtp_instance * __rtp_find_instance_by_ssrc(struct ast_rtp_instance *instance, struct ast_rtp *rtp, unsigned int ssrc, int source)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05869">res_rtp_asterisk.c:5869</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a995ed3a06efd4fc6c500c374e4483fde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a995ed3a06efd4fc6c500c374e4483fde">&#9670;&nbsp;</a></span>rtp_instance_parse_extmap_extensions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_instance_parse_extmap_extensions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>extension</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07142">7142</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00548">AST_RTP_EXTENSION_TRANSPORT_WIDE_CC</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00886">ast_rtp_instance_extmap_get_id()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07087">rtp_instance_parse_transport_wide_cc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">ast_rtp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;{</div><div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;   <span class="keywordtype">int</span> transport_wide_cc_id = <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad0e27894cc1156205f52b3692096c14d">ast_rtp_instance_extmap_get_id</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa163f70dc8ad29138217161bca3ac9b90">AST_RTP_EXTENSION_TRANSPORT_WIDE_CC</a>);</div><div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;   <span class="keywordtype">int</span> pos = 0;</div><div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160;</div><div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;   <span class="comment">/* We currently only care about the transport-cc extension, so if that&#39;s not negotiated then do nothing */</span></div><div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;   <span class="keywordflow">if</span> (transport_wide_cc_id == -1) {</div><div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;   }</div><div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160;</div><div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;   <span class="comment">/* Only while we do not exceed available extension data do we continue */</span></div><div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;   <span class="keywordflow">while</span> (pos &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>) {</div><div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;      <span class="keywordtype">int</span> <span class="keywordtype">id</span> = <a class="code" href="../../d0/d5a/structextension.html">extension</a>[pos] &gt;&gt; 4;</div><div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;      <span class="keywordtype">int</span> extension_len = (<a class="code" href="../../d0/d5a/structextension.html">extension</a>[pos] &amp; 0xF) + 1;</div><div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;</div><div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160;      <span class="comment">/* We&#39;ve handled the first byte as it contains the extension id and length, so always</span></div><div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;<span class="comment">       * skip ahead now</span></div><div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;      pos += 1;</div><div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;</div><div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;      <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == 0) {</div><div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;         <span class="comment">/* From the RFC:</span></div><div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;<span class="comment">          * In both forms, padding bytes have the value of 0 (zero).  They may be</span></div><div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;<span class="comment">          * placed between extension elements, if desired for alignment, or after</span></div><div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;<span class="comment">          * the last extension element, if needed for padding.  A padding byte</span></div><div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;<span class="comment">          * does not supply the ID of an element, nor the length field.  When a</span></div><div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;<span class="comment">          * padding byte is found, it is ignored and the parser moves on to</span></div><div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;<span class="comment">          * interpreting the next byte.</span></div><div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == 15) {</div><div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;         <span class="comment">/* From the RFC:</span></div><div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;<span class="comment">          * The local identifier value 15 is reserved for future extension and</span></div><div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;<span class="comment">          * MUST NOT be used as an identifier.  If the ID value 15 is</span></div><div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;<span class="comment">          * encountered, its length field should be ignored, processing of the</span></div><div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;<span class="comment">          * entire extension should terminate at that point, and only the</span></div><div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;<span class="comment">          * extension elements present prior to the element with ID 15</span></div><div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;<span class="comment">          * considered.</span></div><div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((pos + extension_len) &gt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>) {</div><div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;         <span class="comment">/* The extension is corrupted and is stating that it contains more data than is</span></div><div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;<span class="comment">          * available in the extensions data.</span></div><div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;      }</div><div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;</div><div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;      <span class="comment">/* If this is transport-cc then we need to parse it further */</span></div><div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;      <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == transport_wide_cc_id) {</div><div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b6314d4761099aa184b731d1fd9fe1a">rtp_instance_parse_transport_wide_cc</a>(instance, rtp, <a class="code" href="../../d0/d5a/structextension.html">extension</a> + pos, extension_len);</div><div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;      }</div><div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160;</div><div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;      <span class="comment">/* Skip ahead to the next extension */</span></div><div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;      pos += extension_len;</div><div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160;   }</div><div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_ad0e27894cc1156205f52b3692096c14d"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ad0e27894cc1156205f52b3692096c14d">ast_rtp_instance_extmap_get_id</a></div><div class="ttdeci">int ast_rtp_instance_extmap_get_id(struct ast_rtp_instance *instance, enum ast_rtp_extension extension)</div><div class="ttdoc">Retrieve the id for an RTP extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00886">rtp_engine.c:886</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a88677a524d7f3d7201f5d2f773cfc8ffa163f70dc8ad29138217161bca3ac9b90"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa163f70dc8ad29138217161bca3ac9b90">AST_RTP_EXTENSION_TRANSPORT_WIDE_CC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00548">rtp_engine.h:548</a></div></div>
<div class="ttc" id="structextension_html"><div class="ttname"><a href="../../d0/d5a/structextension.html">extension</a></div><div class="ttdoc">structure to hold extensions </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00287">res_phoneprov.c:287</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4b6314d4761099aa184b731d1fd9fe1a"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4b6314d4761099aa184b731d1fd9fe1a">rtp_instance_parse_transport_wide_cc</a></div><div class="ttdeci">static void rtp_instance_parse_transport_wide_cc(struct ast_rtp_instance *instance, struct ast_rtp *rtp, unsigned char *data, int len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07087">res_rtp_asterisk.c:7087</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b6314d4761099aa184b731d1fd9fe1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b6314d4761099aa184b731d1fd9fe1a">&#9670;&nbsp;</a></span>rtp_instance_parse_transport_wide_cc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_instance_parse_transport_wide_cc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07087">7087</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02873">ast_debug_rtcp</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00371">AST_VECTOR_ADD_SORTED</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00573">AST_VECTOR_ELEM_CLEANUP_NOOP</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00627">AST_VECTOR_RESET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00340">rtp_transport_wide_cc_packet_statistics::received</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00094">RTP_SEQ_MOD</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06900">rtp_transport_wide_cc_feedback_produce()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06824">rtp_transport_wide_cc_packet_statistics_cmp()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00338">rtp_transport_wide_cc_packet_statistics::seqno</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07142">rtp_instance_parse_extmap_extensions()</a>.</p>
<div class="fragment"><div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;{</div><div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;   uint16_t *seqno = (uint16_t *)data;</div><div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html">rtp_transport_wide_cc_packet_statistics</a> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>;</div><div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *transport = rtp-&gt;bundled ? rtp-&gt;bundled : instance;</div><div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *transport_rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(transport);</div><div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;</div><div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;   <span class="comment">/* If the sequence number has cycled over then record it as such */</span></div><div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;   <span class="keywordflow">if</span> (((<span class="keywordtype">int</span>)transport_rtp-&gt;transport_wide_cc.last_seqno - (<span class="keywordtype">int</span>)ntohs(*seqno)) &gt; 100) {</div><div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;      transport_rtp-&gt;transport_wide_cc.cycles += <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af3a188c3caa83026e351d58ef855424a">RTP_SEQ_MOD</a>;</div><div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;   }</div><div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;</div><div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;   <span class="comment">/* Populate the statistics information for this packet */</span></div><div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;   <a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>.seqno = transport_rtp-&gt;transport_wide_cc.cycles + ntohs(*seqno);</div><div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;   <a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>.received = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;</div><div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;   <span class="comment">/* We allow at a maximum 1000 packet statistics in play at a time, if we hit the</span></div><div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;<span class="comment">    * limit we give up and start fresh.</span></div><div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;transport_rtp-&gt;transport_wide_cc.packet_statistics) &gt; 1000) {</div><div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a0e59aa540254f87575cb1d28821bbd1f">AST_VECTOR_RESET</a>(&amp;rtp-&gt;transport_wide_cc.packet_statistics, <a class="code" href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a>);</div><div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;   }</div><div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160;</div><div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;transport_rtp-&gt;transport_wide_cc.packet_statistics) ||</div><div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;      <a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>.seqno &gt; transport_rtp-&gt;transport_wide_cc.last_extended_seqno) {</div><div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160;      <span class="comment">/* This is the expected path */</span></div><div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;transport_rtp-&gt;transport_wide_cc.packet_statistics, <a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>)) {</div><div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;      }</div><div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160;</div><div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;      transport_rtp-&gt;transport_wide_cc.last_extended_seqno = <a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>.seqno;</div><div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;      transport_rtp-&gt;transport_wide_cc.last_seqno = ntohs(*seqno);</div><div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;      <span class="comment">/* This packet was out of order, so reorder it within the vector accordingly */</span></div><div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a8418853c95c2093a85174233f0ef4827">AST_VECTOR_ADD_SORTED</a>(&amp;transport_rtp-&gt;transport_wide_cc.packet_statistics, <a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>,</div><div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac5fc4402a4674c499f27f76d55ec2f83">rtp_transport_wide_cc_packet_statistics_cmp</a>)) {</div><div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;      }</div><div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;   }</div><div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;</div><div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;   <span class="comment">/* If we have not yet scheduled the periodic sending of feedback for this transport then do so */</span></div><div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;   <span class="keywordflow">if</span> (transport_rtp-&gt;transport_wide_cc.schedid &lt; 0 &amp;&amp; transport_rtp-&gt;rtcp) {</div><div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP starting transport-cc feedback transmission on RTP instance &#39;%p&#39;\n&quot;</span>, instance, transport);</div><div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(transport, +1);</div><div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;      transport_rtp-&gt;transport_wide_cc.schedid = <a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(rtp-&gt;sched, 1000,</div><div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a227f7cf18ced801d02a072ac3f8d1d1e">rtp_transport_wide_cc_feedback_produce</a>, transport);</div><div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;      <span class="keywordflow">if</span> (transport_rtp-&gt;transport_wide_cc.schedid &lt; 0) {</div><div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(transport, -1);</div><div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Scheduling RTCP transport-cc feedback transmission failed on RTP instance &#39;%p&#39;\n&quot;</span>,</div><div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;            transport);</div><div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;      }</div><div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;   }</div><div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="vector_8h_html_a8418853c95c2093a85174233f0ef4827"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a8418853c95c2093a85174233f0ef4827">AST_VECTOR_ADD_SORTED</a></div><div class="ttdeci">#define AST_VECTOR_ADD_SORTED(vec, elem, cmp)</div><div class="ttdoc">Add an element into a sorted vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00371">vector.h:371</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a227f7cf18ced801d02a072ac3f8d1d1e"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a227f7cf18ced801d02a072ac3f8d1d1e">rtp_transport_wide_cc_feedback_produce</a></div><div class="ttdeci">static int rtp_transport_wide_cc_feedback_produce(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06900">res_rtp_asterisk.c:6900</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structrtp__transport__wide__cc__packet__statistics_html"><div class="ttname"><a href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html">rtp_transport_wide_cc_packet_statistics</a></div><div class="ttdoc">Packet statistics (used for transport-cc) </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00336">res_rtp_asterisk.c:336</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac5fc4402a4674c499f27f76d55ec2f83"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac5fc4402a4674c499f27f76d55ec2f83">rtp_transport_wide_cc_packet_statistics_cmp</a></div><div class="ttdeci">static int rtp_transport_wide_cc_packet_statistics_cmp(struct rtp_transport_wide_cc_packet_statistics a, struct rtp_transport_wide_cc_packet_statistics b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06824">res_rtp_asterisk.c:6824</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af3a188c3caa83026e351d58ef855424a"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af3a188c3caa83026e351d58ef855424a">RTP_SEQ_MOD</a></div><div class="ttdeci">#define RTP_SEQ_MOD</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00094">res_rtp_asterisk.c:94</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="vector_8h_html_a1885c25b9d767a53d1df9b641f53951a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a></div><div class="ttdeci">#define AST_VECTOR_ELEM_CLEANUP_NOOP(elem)</div><div class="ttdoc">Vector element cleanup that does nothing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00573">vector.h:573</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga0915be7e2d33217121465cfb689318fd"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a></div><div class="ttdeci">#define ast_debug_rtcp(sublevel,...)</div><div class="ttdoc">Log debug level RTCP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02873">rtp_engine.h:2873</a></div></div>
<div class="ttc" id="vector_8h_html_a0e59aa540254f87575cb1d28821bbd1f"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0e59aa540254f87575cb1d28821bbd1f">AST_VECTOR_RESET</a></div><div class="ttdeci">#define AST_VECTOR_RESET(vec, cleanup)</div><div class="ttdoc">Reset vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00627">vector.h:627</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9fba4bbd59bd9bcd7b0e06c4e2ac8ff6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fba4bbd59bd9bcd7b0e06c4e2ac8ff6">&#9670;&nbsp;</a></span>rtp_instance_unlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_instance_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06817">6817</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;{</div><div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;   <span class="keywordflow">if</span> (instance) {</div><div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;   }</div><div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af5ddef0d16ad270efac76761db301d7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5ddef0d16ad270efac76761db301d7c">&#9670;&nbsp;</a></span>rtp_ioqueue_thread_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_ioqueue_thread_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d1f/structast__rtp__ioqueue__thread.html">ast_rtp_ioqueue_thread</a> *&#160;</td>
          <td class="paramname"><em>ioqueue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroyer for ioqueue thread. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01470">1470</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00250">ast_rtp_ioqueue_thread::pool</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00258">ast_rtp_ioqueue_thread::terminate</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00252">ast_rtp_ioqueue_thread::thread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01512">rtp_ioqueue_thread_get_or_create()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01492">rtp_ioqueue_thread_remove()</a>.</p>
<div class="fragment"><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;{</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;   <span class="keywordflow">if</span> (ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a5fefb100c242520f18c40e9068914858">thread</a>) {</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a1111f678042df19d49f4b718b3d0582c">terminate</a> = 1;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      pj_thread_join(ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a5fefb100c242520f18c40e9068914858">thread</a>);</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      pj_thread_destroy(ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a5fefb100c242520f18c40e9068914858">thread</a>);</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;   }</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;   <span class="keywordflow">if</span> (ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>) {</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      <span class="comment">/* This mimics the behavior of pj_pool_safe_release</span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="comment">       * which was introduced in pjproject 2.6.</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;      pj_pool_t *temp_pool = ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;      ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      pj_pool_release(temp_pool);</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;   }</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(ioqueue);</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;}</div><div class="ttc" id="structast__rtp__ioqueue__thread_html_a1111f678042df19d49f4b718b3d0582c"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html#a1111f678042df19d49f4b718b3d0582c">ast_rtp_ioqueue_thread::terminate</a></div><div class="ttdeci">int terminate</div><div class="ttdoc">Termination request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00258">res_rtp_asterisk.c:258</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__rtp__ioqueue__thread_html_a5fefb100c242520f18c40e9068914858"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html#a5fefb100c242520f18c40e9068914858">ast_rtp_ioqueue_thread::thread</a></div><div class="ttdeci">pj_thread_t * thread</div><div class="ttdoc">The thread handling the queue and timer heap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00252">res_rtp_asterisk.c:252</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__rtp__ioqueue__thread_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">ast_rtp_ioqueue_thread::pool</a></div><div class="ttdeci">pj_pool_t * pool</div><div class="ttdoc">Pool used by the thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00250">res_rtp_asterisk.c:250</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a945018e0a29fb3127c1003645a2277dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a945018e0a29fb3127c1003645a2277dc">&#9670;&nbsp;</a></span>rtp_ioqueue_thread_get_or_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../db/d1f/structast__rtp__ioqueue__thread.html">ast_rtp_ioqueue_thread</a>* rtp_ioqueue_thread_get_or_create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finder and allocator for an ioqueue thread. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01512">1512</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00233">cachingpool</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00260">ast_rtp_ioqueue_thread::count</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00254">ast_rtp_ioqueue_thread::ioqueue</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01454">ioqueue_worker_thread()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00262">ast_rtp_ioqueue_thread::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00250">ast_rtp_ioqueue_thread::pool</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01470">rtp_ioqueue_thread_destroy()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00252">ast_rtp_ioqueue_thread::thread</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00256">ast_rtp_ioqueue_thread::timerheap</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01577">ast_rtp_ice_turn_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;{</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html">ast_rtp_ioqueue_thread</a> *<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a90235fd4bf5d3d36f1b72255eb0a3eea">ioqueue</a>;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;   pj_lock_t *<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d2/de0/structioqueues.html">ioqueues</a>);</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;   <span class="comment">/* See if an ioqueue thread exists that can handle more */</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d2/de0/structioqueues.html">ioqueues</a>, ioqueue, <a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a483f1d09e2333d274edea52128d19dc6">next</a>) {</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      <span class="keywordflow">if</span> ((ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a16ff2d8e15ade4948398b0aeb80124a8">count</a> + 2) &lt; PJ_IOQUEUE_MAX_HANDLES) {</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      }</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;   }</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;   <span class="comment">/* If we found one bump it up and return it */</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;   <span class="keywordflow">if</span> (ioqueue) {</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a16ff2d8e15ade4948398b0aeb80124a8">count</a> += 2;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;   }</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;   ioqueue = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*ioqueue));</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;   <span class="keywordflow">if</span> (!ioqueue) {</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;   }</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;   ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = pj_pool_create(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a>.factory, <span class="stringliteral">&quot;rtp&quot;</span>, 512, 512, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;   <span class="comment">/* We use a timer on the ioqueue thread for TURN so that two threads aren&#39;t operating</span></div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;<span class="comment">    * on a session at the same time</span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;   <span class="keywordflow">if</span> (pj_timer_heap_create(ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, 4, &amp;ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a3e99b304fddd76c59ccae669dcdefb82">timerheap</a>) != PJ_SUCCESS) {</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      <span class="keywordflow">goto</span> fatal;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;   }</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;   <span class="keywordflow">if</span> (pj_lock_create_recursive_mutex(ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;rtp%p&quot;</span>, &amp;lock) != PJ_SUCCESS) {</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      <span class="keywordflow">goto</span> fatal;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;   }</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;   pj_timer_heap_set_lock(ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a3e99b304fddd76c59ccae669dcdefb82">timerheap</a>, lock, PJ_TRUE);</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;   <span class="keywordflow">if</span> (pj_ioqueue_create(ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, PJ_IOQUEUE_MAX_HANDLES, &amp;ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a90235fd4bf5d3d36f1b72255eb0a3eea">ioqueue</a>) != PJ_SUCCESS) {</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;      <span class="keywordflow">goto</span> fatal;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;   }</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;   <span class="keywordflow">if</span> (pj_thread_create(ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;ice&quot;</span>, &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abf03493a87472511142b26b9a2d27c87">ioqueue_worker_thread</a>, ioqueue, 0, 0, &amp;ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a5fefb100c242520f18c40e9068914858">thread</a>) != PJ_SUCCESS) {</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      <span class="keywordflow">goto</span> fatal;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;   }</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d2/de0/structioqueues.html">ioqueues</a>, ioqueue, <a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a483f1d09e2333d274edea52128d19dc6">next</a>);</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;   <span class="comment">/* Since this is being returned to an active session the count always starts at 2 */</span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;   ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a16ff2d8e15ade4948398b0aeb80124a8">count</a> = 2;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;   <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;fatal:</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af5ddef0d16ad270efac76761db301d7c">rtp_ioqueue_thread_destroy</a>(ioqueue);</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;   ioqueue = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/de0/structioqueues.html">ioqueues</a>);</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a90235fd4bf5d3d36f1b72255eb0a3eea">ioqueue</a>;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structast__rtp__ioqueue__thread_html"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html">ast_rtp_ioqueue_thread</a></div><div class="ttdoc">Structure which contains ioqueue thread information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00248">res_rtp_asterisk.c:248</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a12d9cba0dfd29f12cf2f87a4ab1252e2"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a></div><div class="ttdeci">static pj_caching_pool cachingpool</div><div class="ttdoc">Pool factory used by pjlib to allocate memory. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00233">res_rtp_asterisk.c:233</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_abf03493a87472511142b26b9a2d27c87"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#abf03493a87472511142b26b9a2d27c87">ioqueue_worker_thread</a></div><div class="ttdeci">static int ioqueue_worker_thread(void *data)</div><div class="ttdoc">Worker thread for ioqueue and timerheap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01454">res_rtp_asterisk.c:1454</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="structast__rtp__ioqueue__thread_html_a5fefb100c242520f18c40e9068914858"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html#a5fefb100c242520f18c40e9068914858">ast_rtp_ioqueue_thread::thread</a></div><div class="ttdeci">pj_thread_t * thread</div><div class="ttdoc">The thread handling the queue and timer heap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00252">res_rtp_asterisk.c:252</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structast__rtp__ioqueue__thread_html_a90235fd4bf5d3d36f1b72255eb0a3eea"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html#a90235fd4bf5d3d36f1b72255eb0a3eea">ast_rtp_ioqueue_thread::ioqueue</a></div><div class="ttdeci">pj_ioqueue_t * ioqueue</div><div class="ttdoc">Ioqueue which polls on sockets. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00254">res_rtp_asterisk.c:254</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structast__rtp__ioqueue__thread_html_a483f1d09e2333d274edea52128d19dc6"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html#a483f1d09e2333d274edea52128d19dc6">ast_rtp_ioqueue_thread::next</a></div><div class="ttdeci">struct ast_rtp_ioqueue_thread * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00262">res_rtp_asterisk.c:262</a></div></div>
<div class="ttc" id="structast__rtp__ioqueue__thread_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">ast_rtp_ioqueue_thread::pool</a></div><div class="ttdeci">pj_pool_t * pool</div><div class="ttdoc">Pool used by the thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00250">res_rtp_asterisk.c:250</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af5ddef0d16ad270efac76761db301d7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af5ddef0d16ad270efac76761db301d7c">rtp_ioqueue_thread_destroy</a></div><div class="ttdeci">static void rtp_ioqueue_thread_destroy(struct ast_rtp_ioqueue_thread *ioqueue)</div><div class="ttdoc">Destroyer for ioqueue thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01470">res_rtp_asterisk.c:1470</a></div></div>
<div class="ttc" id="structioqueues_html"><div class="ttname"><a href="../../d2/de0/structioqueues.html">ioqueues</a></div><div class="ttdoc">List of ioqueue threads. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00266">res_rtp_asterisk.c:266</a></div></div>
<div class="ttc" id="structast__rtp__ioqueue__thread_html_a16ff2d8e15ade4948398b0aeb80124a8"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html#a16ff2d8e15ade4948398b0aeb80124a8">ast_rtp_ioqueue_thread::count</a></div><div class="ttdeci">unsigned int count</div><div class="ttdoc">Current number of descriptors being waited on. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00260">res_rtp_asterisk.c:260</a></div></div>
<div class="ttc" id="structast__rtp__ioqueue__thread_html_a3e99b304fddd76c59ccae669dcdefb82"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html#a3e99b304fddd76c59ccae669dcdefb82">ast_rtp_ioqueue_thread::timerheap</a></div><div class="ttdeci">pj_timer_heap_t * timerheap</div><div class="ttdoc">Timer heap for scheduled items. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00256">res_rtp_asterisk.c:256</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad2725307ebff2c0f2a0d7065fc613b32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2725307ebff2c0f2a0d7065fc613b32">&#9670;&nbsp;</a></span>rtp_ioqueue_thread_remove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_ioqueue_thread_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d1f/structast__rtp__ioqueue__thread.html">ast_rtp_ioqueue_thread</a> *&#160;</td>
          <td class="paramname"><em>ioqueue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removal function for ioqueue thread, determines if it should be terminated and destroyed. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01492">1492</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00855">AST_LIST_REMOVE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00260">ast_rtp_ioqueue_thread::count</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00291">destroy()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00262">ast_rtp_ioqueue_thread::next</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01470">rtp_ioqueue_thread_destroy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03901">rtp_deallocate_transport()</a>.</p>
<div class="fragment"><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;{</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d43/translate_8c.html#acd32a6ef4f3c191685ae65f8439407e7">destroy</a> = 0;</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   <span class="comment">/* If nothing is using this ioqueue thread destroy it */</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d2/de0/structioqueues.html">ioqueues</a>);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;   <span class="keywordflow">if</span> ((ioqueue-&gt;<a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a16ff2d8e15ade4948398b0aeb80124a8">count</a> - 2) == 0) {</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      destroy = 1;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(&amp;<a class="code" href="../../d2/de0/structioqueues.html">ioqueues</a>, ioqueue, <a class="code" href="../../db/d1f/structast__rtp__ioqueue__thread.html#a483f1d09e2333d274edea52128d19dc6">next</a>);</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;   }</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/de0/structioqueues.html">ioqueues</a>);</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;   <span class="keywordflow">if</span> (!destroy) {</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;   }</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af5ddef0d16ad270efac76761db301d7c">rtp_ioqueue_thread_destroy</a>(ioqueue);</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa36e72b77f1b80881cd0a9fcca66ce19"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a></div><div class="ttdeci">#define AST_LIST_REMOVE(head, elm, field)</div><div class="ttdoc">Removes a specific entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00855">linkedlists.h:855</a></div></div>
<div class="ttc" id="translate_8c_html_acd32a6ef4f3c191685ae65f8439407e7"><div class="ttname"><a href="../../de/d43/translate_8c.html#acd32a6ef4f3c191685ae65f8439407e7">destroy</a></div><div class="ttdeci">static void destroy(struct ast_trans_pvt *pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00291">translate.c:291</a></div></div>
<div class="ttc" id="structast__rtp__ioqueue__thread_html_a483f1d09e2333d274edea52128d19dc6"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html#a483f1d09e2333d274edea52128d19dc6">ast_rtp_ioqueue_thread::next</a></div><div class="ttdeci">struct ast_rtp_ioqueue_thread * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00262">res_rtp_asterisk.c:262</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af5ddef0d16ad270efac76761db301d7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af5ddef0d16ad270efac76761db301d7c">rtp_ioqueue_thread_destroy</a></div><div class="ttdeci">static void rtp_ioqueue_thread_destroy(struct ast_rtp_ioqueue_thread *ioqueue)</div><div class="ttdoc">Destroyer for ioqueue thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01470">res_rtp_asterisk.c:1470</a></div></div>
<div class="ttc" id="structioqueues_html"><div class="ttname"><a href="../../d2/de0/structioqueues.html">ioqueues</a></div><div class="ttdoc">List of ioqueue threads. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00266">res_rtp_asterisk.c:266</a></div></div>
<div class="ttc" id="structast__rtp__ioqueue__thread_html_a16ff2d8e15ade4948398b0aeb80124a8"><div class="ttname"><a href="../../db/d1f/structast__rtp__ioqueue__thread.html#a16ff2d8e15ade4948398b0aeb80124a8">ast_rtp_ioqueue_thread::count</a></div><div class="ttdeci">unsigned int count</div><div class="ttdoc">Current number of descriptors being waited on. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00260">res_rtp_asterisk.c:260</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1e91482dfb876c9f92964c4fcce1c670"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e91482dfb876c9f92964c4fcce1c670">&#9670;&nbsp;</a></span>rtp_learning_rtp_seq_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtp_learning_rtp_seq_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d7d/structrtp__learning__info.html">rtp_learning_info</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>seq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03403">3403</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00036">AST_MEDIA_TYPE_END</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00034">AST_MEDIA_TYPE_IMAGE</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00035">AST_MEDIA_TYPE_TEXT</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00033">AST_MEDIA_TYPE_VIDEO</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00208">learning_min_duration</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00207">learning_min_sequential</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00301">rtp_learning_info::max_seq</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00302">rtp_learning_info::packets</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00300">rtp_learning_info::received</a>, <a class="el" href="../../d7/d81/app__sms_8c_source.html#l00120">seq</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00304">rtp_learning_info::stream_type</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00171">STRICT_RTP_YES</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00206">strictrtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;{</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d81/app__sms_8c.html#a8514112da88a5d13451aaf8c9b064017">seq</a> == (uint16_t) (info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#a6e5ff1ebd10aa4b364033fb2f340ffad">max_seq</a> + 1)) {</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;      <span class="comment">/* packet is in sequence */</span></div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;      info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#acb7b2259cca68a4a88294167d16a27d1">packets</a>--;</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;      <span class="comment">/* Sequence discontinuity; reset */</span></div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;      info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#acb7b2259cca68a4a88294167d16a27d1">packets</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4ec95260935fbacc0443e815297e61bb">learning_min_sequential</a> - 1;</div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;      info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#a2b078c65ed0f81356119070a02330f58">received</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;   }</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;   <span class="comment">/* Only check time if strictrtp is set to yes. Otherwise, we only needed to check seqno */</span></div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a> == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4aa60bd948f9a50c92c99d384481de8448">STRICT_RTP_YES</a>) {</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;      <span class="keywordflow">switch</span> (info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#a266ebd05910b92f8a2b48eaa3db1eb34">stream_type</a>) {</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>:</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>:</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;<span class="comment">          * Protect against packet floods by checking that we</span></div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;<span class="comment">          * received the packet sequence in at least the minimum</span></div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;<span class="comment">          * allowed time.</span></div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#a2b078c65ed0f81356119070a02330f58">received</a>)) {</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;            info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#a2b078c65ed0f81356119070a02330f58">received</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#acb7b2259cca68a4a88294167d16a27d1">packets</a></div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;            &amp;&amp; <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#a2b078c65ed0f81356119070a02330f58">received</a>) &lt; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a64079d5324b80886f3bafe6cfd8fa0b4">learning_min_duration</a>) {</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;            <span class="comment">/* Packet flood; reset */</span></div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;            info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#acb7b2259cca68a4a88294167d16a27d1">packets</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4ec95260935fbacc0443e815297e61bb">learning_min_sequential</a> - 1;</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;            info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#a2b078c65ed0f81356119070a02330f58">received</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;         }</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>:</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212acab76c9fe8b00719aa5276d92922f2ca">AST_MEDIA_TYPE_IMAGE</a>:</div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212acdcfb16791fa00269621e51c42f5a4c3">AST_MEDIA_TYPE_TEXT</a>:</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a412130c13f852573e1e662864d35b55c">AST_MEDIA_TYPE_END</a>:</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;      }</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;   }</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;   info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#a6e5ff1ebd10aa4b364033fb2f340ffad">max_seq</a> = <a class="code" href="../../d7/d81/app__sms_8c.html#a8514112da88a5d13451aaf8c9b064017">seq</a>;</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;   <span class="keywordflow">return</span> info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#acb7b2259cca68a4a88294167d16a27d1">packets</a>;</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;}</div><div class="ttc" id="structrtp__learning__info_html_a6e5ff1ebd10aa4b364033fb2f340ffad"><div class="ttname"><a href="../../d6/d7d/structrtp__learning__info.html#a6e5ff1ebd10aa4b364033fb2f340ffad">rtp_learning_info::max_seq</a></div><div class="ttdeci">int max_seq</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00301">res_rtp_asterisk.c:301</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a41f01397502dd66338663a1fa72382e4aa60bd948f9a50c92c99d384481de8448"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4aa60bd948f9a50c92c99d384481de8448">STRICT_RTP_YES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00171">res_rtp_asterisk.c:171</a></div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212acab76c9fe8b00719aa5276d92922f2ca"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212acab76c9fe8b00719aa5276d92922f2ca">AST_MEDIA_TYPE_IMAGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00034">codec.h:34</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a96336b3ac9e5b66f365f0ca5ba613995"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a></div><div class="ttdeci">static int strictrtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00206">res_rtp_asterisk.c:206</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="structrtp__learning__info_html_a266ebd05910b92f8a2b48eaa3db1eb34"><div class="ttname"><a href="../../d6/d7d/structrtp__learning__info.html#a266ebd05910b92f8a2b48eaa3db1eb34">rtp_learning_info::stream_type</a></div><div class="ttdeci">enum ast_media_type stream_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00304">res_rtp_asterisk.c:304</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a64079d5324b80886f3bafe6cfd8fa0b4"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a64079d5324b80886f3bafe6cfd8fa0b4">learning_min_duration</a></div><div class="ttdeci">static int learning_min_duration</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00208">res_rtp_asterisk.c:208</a></div></div>
<div class="ttc" id="app__sms_8c_html_a8514112da88a5d13451aaf8c9b064017"><div class="ttname"><a href="../../d7/d81/app__sms_8c.html#a8514112da88a5d13451aaf8c9b064017">seq</a></div><div class="ttdeci">static volatile unsigned int seq</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d81/app__sms_8c_source.html#l00120">app_sms.c:120</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00033">codec.h:33</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4ec95260935fbacc0443e815297e61bb"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4ec95260935fbacc0443e815297e61bb">learning_min_sequential</a></div><div class="ttdeci">static int learning_min_sequential</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00207">res_rtp_asterisk.c:207</a></div></div>
<div class="ttc" id="structrtp__learning__info_html_a2b078c65ed0f81356119070a02330f58"><div class="ttname"><a href="../../d6/d7d/structrtp__learning__info.html#a2b078c65ed0f81356119070a02330f58">rtp_learning_info::received</a></div><div class="ttdeci">struct timeval received</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00300">res_rtp_asterisk.c:300</a></div></div>
<div class="ttc" id="structrtp__learning__info_html_acb7b2259cca68a4a88294167d16a27d1"><div class="ttname"><a href="../../d6/d7d/structrtp__learning__info.html#acb7b2259cca68a4a88294167d16a27d1">rtp_learning_info::packets</a></div><div class="ttdeci">int packets</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00302">res_rtp_asterisk.c:302</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a412130c13f852573e1e662864d35b55c"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a412130c13f852573e1e662864d35b55c">AST_MEDIA_TYPE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00036">codec.h:36</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212acdcfb16791fa00269621e51c42f5a4c3"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212acdcfb16791fa00269621e51c42f5a4c3">AST_MEDIA_TYPE_TEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00035">codec.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad68124a712f2eb4ae298e08743ae2740"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad68124a712f2eb4ae298e08743ae2740">&#9670;&nbsp;</a></span>rtp_learning_seq_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_learning_seq_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d7d/structrtp__learning__info.html">rtp_learning_info</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>seq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03386">3386</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00207">learning_min_sequential</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00301">rtp_learning_info::max_seq</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00302">rtp_learning_info::packets</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00300">rtp_learning_info::received</a>, and <a class="el" href="../../d7/d81/app__sms_8c_source.html#l00120">seq</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03453">rtp_learning_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;{</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;   info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#a6e5ff1ebd10aa4b364033fb2f340ffad">max_seq</a> = <a class="code" href="../../d7/d81/app__sms_8c.html#a8514112da88a5d13451aaf8c9b064017">seq</a>;</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;   info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#acb7b2259cca68a4a88294167d16a27d1">packets</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4ec95260935fbacc0443e815297e61bb">learning_min_sequential</a>;</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;   memset(&amp;info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#a2b078c65ed0f81356119070a02330f58">received</a>, 0, <span class="keyword">sizeof</span>(info-&gt;<a class="code" href="../../d6/d7d/structrtp__learning__info.html#a2b078c65ed0f81356119070a02330f58">received</a>));</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;}</div><div class="ttc" id="structrtp__learning__info_html_a6e5ff1ebd10aa4b364033fb2f340ffad"><div class="ttname"><a href="../../d6/d7d/structrtp__learning__info.html#a6e5ff1ebd10aa4b364033fb2f340ffad">rtp_learning_info::max_seq</a></div><div class="ttdeci">int max_seq</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00301">res_rtp_asterisk.c:301</a></div></div>
<div class="ttc" id="app__sms_8c_html_a8514112da88a5d13451aaf8c9b064017"><div class="ttname"><a href="../../d7/d81/app__sms_8c.html#a8514112da88a5d13451aaf8c9b064017">seq</a></div><div class="ttdeci">static volatile unsigned int seq</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d81/app__sms_8c_source.html#l00120">app_sms.c:120</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4ec95260935fbacc0443e815297e61bb"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4ec95260935fbacc0443e815297e61bb">learning_min_sequential</a></div><div class="ttdeci">static int learning_min_sequential</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00207">res_rtp_asterisk.c:207</a></div></div>
<div class="ttc" id="structrtp__learning__info_html_a2b078c65ed0f81356119070a02330f58"><div class="ttname"><a href="../../d6/d7d/structrtp__learning__info.html#a2b078c65ed0f81356119070a02330f58">rtp_learning_info::received</a></div><div class="ttdeci">struct timeval received</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00300">res_rtp_asterisk.c:300</a></div></div>
<div class="ttc" id="structrtp__learning__info_html_acb7b2259cca68a4a88294167d16a27d1"><div class="ttname"><a href="../../d6/d7d/structrtp__learning__info.html#acb7b2259cca68a4a88294167d16a27d1">rtp_learning_info::packets</a></div><div class="ttdeci">int packets</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00302">res_rtp_asterisk.c:302</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ada712c8738c9286dabd805475002671e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada712c8738c9286dabd805475002671e">&#9670;&nbsp;</a></span>rtp_learning_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_learning_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start the strictrtp learning mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rtp</td><td>RTP session description</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03453">3453</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09613">acl_change_stasis_cb()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00383">ast_rtp::lastrxseqno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03386">rtp_learning_seq_init()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00165">STRICT_RTP_LEARN</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02581">ast_rtp_ice_start_media()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08497">ast_rtp_remote_address_set()</a>.</p>
<div class="fragment"><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;{</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;   rtp-&gt;strict_rtp_state = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4ba0c26c1144bb830775979deb20e049368">STRICT_RTP_LEARN</a>;</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;   memset(&amp;rtp-&gt;rtp_source_learn.proposed_address, 0,</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;      <span class="keyword">sizeof</span>(rtp-&gt;rtp_source_learn.proposed_address));</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;   rtp-&gt;rtp_source_learn.start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad68124a712f2eb4ae298e08743ae2740">rtp_learning_seq_init</a>(&amp;rtp-&gt;rtp_source_learn, (uint16_t) rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a184e1597cfcf7b28d1cf5d4857892a91">lastrxseqno</a>);</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_aca6484d75ee9d79a5d4447149f9c8c4ba0c26c1144bb830775979deb20e049368"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aca6484d75ee9d79a5d4447149f9c8c4ba0c26c1144bb830775979deb20e049368">STRICT_RTP_LEARN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00165">res_rtp_asterisk.c:165</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad68124a712f2eb4ae298e08743ae2740"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad68124a712f2eb4ae298e08743ae2740">rtp_learning_seq_init</a></div><div class="ttdeci">static void rtp_learning_seq_init(struct rtp_learning_info *info, uint16_t seq)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03386">res_rtp_asterisk.c:3386</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="structast__rtp_html_a184e1597cfcf7b28d1cf5d4857892a91"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a184e1597cfcf7b28d1cf5d4857892a91">ast_rtp::lastrxseqno</a></div><div class="ttdeci">int lastrxseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00383">res_rtp_asterisk.c:383</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e586786c824dc22c28692ba41646bbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e586786c824dc22c28692ba41646bbb">&#9670;&nbsp;</a></span>rtp_raw_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtp_raw_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>codec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">4891</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/dc2/f2c_8h_source.html#l00195">abs</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00203">ast_data_buffer_put()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02873">ast_debug_rtcp</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02860">ast_debug_rtp</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02864">ast_debug_rtp_packet_is_allowed</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00201">ast_format_cmp()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00036">AST_FORMAT_CMP_EQUAL</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00111">ast_format_g722</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">AST_FRAME_VIDEO</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00147">AST_FRFLAG_HAS_SEQUENCE_NUMBER</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00143">AST_FRFLAG_HAS_TIMING_INFO</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03323">ast_rtcp_calc_interval()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04814">ast_rtcp_write()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00546">AST_RTP_EXTENSION_ABS_SEND_TIME</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l04030">ast_rtp_get_rate()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00886">ast_rtp_instance_extmap_get_id()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00716">ast_rtp_instance_get_prop()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02901">ast_rtp_instance_get_test()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00115">AST_RTP_PROPERTY_NAT</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00587">ast_rtp_rtcp_nack_payload::buf</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03716">calc_txstamp()</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00185">ast_frame::delivery</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00147">ext</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00284">FLAG_NAT_ACTIVE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00285">FLAG_NAT_INACTIVE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00286">FLAG_NAT_INACTIVE_NOWARN</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00287">FLAG_NEED_MARKER_BIT</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00160">ast_frame_subclass::frame_ending</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00382">ast_rtp::lastotexttimestamp</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00380">ast_rtp::lastovidtimestamp</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00378">ast_rtp::lastts</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00092">MAX_TIMESTAMP_SKEW</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04876">put_unaligned_time24()</a>, <a class="el" href="../../d2/d1e/unaligned_8h_source.html#l00058">put_unaligned_uint32()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">rtp_debug_test_addr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">rtp_sendto()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00599">ast_rtp_engine_test::send_report</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">ast_frame::seqno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00586">ast_rtp_rtcp_nack_payload::size</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04392">timeval2ntp()</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00191">ast_frame::ts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05289">ast_rtp_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;{</div><div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;   <span class="keywordtype">int</span> pred, mark = 0;</div><div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ms = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4c3a6d3e3a2ffc5044526e5db91fb6b5">calc_txstamp</a>(rtp, &amp;frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>);</div><div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address = { {0,} };</div><div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;   <span class="keywordtype">int</span> rate = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a>(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) / 1000;</div><div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> seqno;</div><div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a> *<a class="code" href="../../d8/d89/structtest.html">test</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a>(instance);</div><div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;</div><div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#ad02ea989608ad5180d04cb0c4e75294c">ast_format_g722</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;      frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> /= 2;</div><div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;   }</div><div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;</div><div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;sending_digit) {</div><div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;   }</div><div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;</div><div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;   <span class="keywordflow">if</span> (test &amp;&amp; test-&gt;<a class="code" href="../../d5/d98/structast__rtp__engine__test.html#a9ed17e77f1720e944b2e0a6870e7b1c0">send_report</a>) {</div><div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;      test-&gt;<a class="code" href="../../d5/d98/structast__rtp__engine__test.html#a9ed17e77f1720e944b2e0a6870e7b1c0">send_report</a> = 0;</div><div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aff89c2855ec73ffa6efdc958bb71c2e8">ast_rtcp_write</a>(instance);</div><div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;   }</div><div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;</div><div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;   <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>) {</div><div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;      pred = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> + frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;</div><div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;      <span class="comment">/* Re-calculate last TS */</span></div><div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> + ms * rate;</div><div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>)) {</div><div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;         <span class="comment">/* If this isn&#39;t an absolute delivery time, Check if it is close to our prediction,</span></div><div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;<span class="comment">            and if so, go with our prediction */</span></div><div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc2/f2c_8h.html#a3aa069ac3980707dae1e0530f50d59e4">abs</a>((<span class="keywordtype">int</span>)rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> - pred) &lt; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a12a850150b82a6ce1077e204d4f5638c">MAX_TIMESTAMP_SKEW</a>) {</div><div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;            rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> = pred;</div><div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(3, <span class="stringliteral">&quot;(%p) RTP audio difference is %d, ms is %u\n&quot;</span>,</div><div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;               instance, <a class="code" href="../../dc/dc2/f2c_8h.html#a3aa069ac3980707dae1e0530f50d59e4">abs</a>((<span class="keywordtype">int</span>)rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> - pred), ms);</div><div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;            mark = 1;</div><div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;         }</div><div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;      }</div><div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a>) {</div><div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;      mark = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#a3779d6222d7632f2b46d2bbf06de7bb2">frame_ending</a>;</div><div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;      pred = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9a2293b0120398a3a10aed1a98a5ea59">lastovidtimestamp</a> + frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;      <span class="comment">/* Re-calculate last TS */</span></div><div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> + ms * 90;</div><div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;      <span class="comment">/* If it&#39;s close to our prediction, go for it */</span></div><div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>)) {</div><div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc2/f2c_8h.html#a3aa069ac3980707dae1e0530f50d59e4">abs</a>((<span class="keywordtype">int</span>)rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> - pred) &lt; 7200) {</div><div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;            rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> = pred;</div><div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;            rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9a2293b0120398a3a10aed1a98a5ea59">lastovidtimestamp</a> += frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(3, <span class="stringliteral">&quot;(%p) RTP video difference is %d, ms is %u (%u), pred/ts/samples %u/%d/%d\n&quot;</span>,</div><div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;               instance, <a class="code" href="../../dc/dc2/f2c_8h.html#a3aa069ac3980707dae1e0530f50d59e4">abs</a>((<span class="keywordtype">int</span>)rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> - pred), ms, ms * 90, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a>, pred, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;            rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9a2293b0120398a3a10aed1a98a5ea59">lastovidtimestamp</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a>;</div><div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;         }</div><div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;      }</div><div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;      pred = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#abf1f99fdbacb09d2077fdc250bccc269">lastotexttimestamp</a> + frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;      <span class="comment">/* Re-calculate last TS */</span></div><div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> + ms;</div><div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;      <span class="comment">/* If it&#39;s close to our prediction, go for it */</span></div><div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>)) {</div><div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc2/f2c_8h.html#a3aa069ac3980707dae1e0530f50d59e4">abs</a>((<span class="keywordtype">int</span>)rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> - pred) &lt; 7200) {</div><div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;            rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> = pred;</div><div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;            rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#abf1f99fdbacb09d2077fdc250bccc269">lastotexttimestamp</a> += frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(3, <span class="stringliteral">&quot;(%p) RTP other difference is %d, ms is %u, pred/ts/samples %u/%d/%d\n&quot;</span>,</div><div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;               instance, <a class="code" href="../../dc/dc2/f2c_8h.html#a3aa069ac3980707dae1e0530f50d59e4">abs</a>((<span class="keywordtype">int</span>)rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> - pred), ms, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a>, pred, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;            rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#abf1f99fdbacb09d2077fdc250bccc269">lastotexttimestamp</a> = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a>;</div><div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;         }</div><div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;      }</div><div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;   }</div><div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;</div><div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;   <span class="comment">/* If we have been explicitly told to set the marker bit then do so */</span></div><div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(rtp, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab7d9bd5ba01a9647e359799e0d201cbf">FLAG_NEED_MARKER_BIT</a>)) {</div><div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;      mark = 1;</div><div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(rtp, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab7d9bd5ba01a9647e359799e0d201cbf">FLAG_NEED_MARKER_BIT</a>);</div><div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;   }</div><div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;</div><div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;   <span class="comment">/* If the timestamp for non-digt packets has moved beyond the timestamp for digits, update the digit timestamp */</span></div><div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> &gt; rtp-&gt;lastdigitts) {</div><div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;      rtp-&gt;lastdigitts = rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a>;</div><div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;   }</div><div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;</div><div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;   <span class="comment">/* Assume that the sequence number we expect to use is what will be used until proven otherwise */</span></div><div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;   seqno = rtp-&gt;seqno;</div><div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;</div><div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;   <span class="comment">/* If the frame contains sequence number information use it to influence our sequence number */</span></div><div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(frame, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feaccf78cd00b148145d1cc9e0f60fb7516">AST_FRFLAG_HAS_SEQUENCE_NUMBER</a>)) {</div><div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;expectedseqno != -1) {</div><div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;         <span class="comment">/* Determine where the frame from the core is in relation to where we expected */</span></div><div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;         <span class="keywordtype">int</span> difference = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a> - rtp-&gt;expectedseqno;</div><div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;</div><div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;         <span class="comment">/* If there is a substantial difference then we&#39;ve either got packets really out</span></div><div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;<span class="comment">          * of order, or the source is RTP and it has cycled. If this happens we resync</span></div><div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;<span class="comment">          * the sequence number adjustments to this frame. If we also have packet loss</span></div><div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;<span class="comment">          * things won&#39;t be reflected correctly but it will sort itself out after a bit.</span></div><div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc2/f2c_8h.html#a3aa069ac3980707dae1e0530f50d59e4">abs</a>(difference) &gt; 100) {</div><div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;            difference = 0;</div><div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;         }</div><div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;</div><div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;         <span class="comment">/* Adjust the sequence number being used for this packet accordingly */</span></div><div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;         seqno += difference;</div><div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;</div><div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;         <span class="keywordflow">if</span> (difference &gt;= 0) {</div><div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;            <span class="comment">/* This frame is on time or in the future */</span></div><div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;            rtp-&gt;expectedseqno = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a> + 1;</div><div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;            rtp-&gt;seqno += difference;</div><div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;         }</div><div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;         <span class="comment">/* This is the first frame with sequence number we&#39;ve seen, so start keeping track */</span></div><div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;         rtp-&gt;expectedseqno = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a> + 1;</div><div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;      }</div><div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;      rtp-&gt;expectedseqno = -1;</div><div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;   }</div><div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;</div><div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(frame, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a">AST_FRFLAG_HAS_TIMING_INFO</a>)) {</div><div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;      rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a> = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ts</a> * rate;</div><div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;   }</div><div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;</div><div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(instance, &amp;remote_address);</div><div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;</div><div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;   <span class="comment">/* If we know the remote address construct a packet and send it out */</span></div><div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;remote_address)) {</div><div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;      <span class="keywordtype">int</span> hdrlen = 12;</div><div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;      <span class="keywordtype">int</span> res;</div><div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;      <span class="keywordtype">int</span> ice;</div><div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a> = 0;</div><div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;      <span class="keywordtype">int</span> abs_send_time_id;</div><div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;      <span class="keywordtype">int</span> packet_len;</div><div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *rtpheader;</div><div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;</div><div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;      <span class="comment">/* If the abs-send-time extension has been negotiated determine how much space we need */</span></div><div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;      abs_send_time_id = <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad0e27894cc1156205f52b3692096c14d">ast_rtp_instance_extmap_get_id</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa2244dfdd646dfd5287d1029c44d1f3f5">AST_RTP_EXTENSION_ABS_SEND_TIME</a>);</div><div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;      <span class="keywordflow">if</span> (abs_send_time_id != -1) {</div><div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;         <span class="comment">/* 4 bytes for the shared information, 1 byte for identifier, 3 bytes for abs-send-time */</span></div><div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;         hdrlen += 8;</div><div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;         ext = 1;</div><div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;      }</div><div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;</div><div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;      packet_len = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> + hdrlen;</div><div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;      rtpheader = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> - hdrlen);</div><div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;</div><div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtpheader, htonl((2 &lt;&lt; 30) | (ext &lt;&lt; 28) | (codec &lt;&lt; 16) | (seqno) | (mark &lt;&lt; 23)));</div><div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtpheader + 4, htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a>));</div><div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtpheader + 8, htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>));</div><div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;</div><div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;      <span class="comment">/* We assume right now that we will only ever have the abs-send-time extension in the packet</span></div><div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;<span class="comment">       * which simplifies things a bit.</span></div><div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;      <span class="keywordflow">if</span> (abs_send_time_id != -1) {</div><div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> now_msw;</div><div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> now_lsw;</div><div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;</div><div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;         <span class="comment">/* This happens before being placed into the retransmission buffer so that when we</span></div><div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;<span class="comment">          * retransmit we only have to update the timestamp, not everything else.</span></div><div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;         <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtpheader + 12, htonl((0xBEDE &lt;&lt; 16) | 1));</div><div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;         rtpheader[16] = (abs_send_time_id &lt;&lt; 4) | 2;</div><div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;</div><div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae07b5d23a23d4d09988c4a1c5d477d14">timeval2ntp</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), &amp;now_msw, &amp;now_lsw);</div><div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3fa030a6094ca05ea43a3b49f14e5cc3">put_unaligned_time24</a>(rtpheader + 17, now_msw, now_lsw);</div><div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;      }</div><div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;</div><div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;      <span class="comment">/* If retransmissions are enabled, we need to store this packet for future use */</span></div><div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;      <span class="keywordflow">if</span> (rtp-&gt;send_buffer) {</div><div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html">ast_rtp_rtcp_nack_payload</a> *payload;</div><div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;</div><div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;         payload = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*payload) + packet_len);</div><div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;         <span class="keywordflow">if</span> (payload) {</div><div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;            payload-&gt;<a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a854352f53b148adc24983a58a1866d66">size</a> = packet_len;</div><div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;            memcpy(payload-&gt;<a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a69e3972abe4e2ef0a921d73212c28cba">buf</a>, rtpheader, packet_len);</div><div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d7/d82/data__buffer_8h.html#a8d5b92d5d157c9d56600596c9238b933">ast_data_buffer_put</a>(rtp-&gt;send_buffer, rtp-&gt;seqno, payload) == -1) {</div><div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(payload);</div><div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;            }</div><div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;         }</div><div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;      }</div><div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;</div><div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;      res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a>(instance, (<span class="keywordtype">void</span> *)rtpheader, packet_len, 0, &amp;remote_address, &amp;ice);</div><div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a>) || (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a>) &amp;&amp; (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(rtp, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab67e21f67a96dd6a9e1b0450ecddecf3">FLAG_NAT_ACTIVE</a>) == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab67e21f67a96dd6a9e1b0450ecddecf3">FLAG_NAT_ACTIVE</a>))) {</div><div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;(%p) RTP transmission error of packet %d to %s: %s\n&quot;</span>,</div><div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;                 instance, rtp-&gt;seqno,</div><div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;                 <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address),</div><div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;                 strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(rtp, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab67e21f67a96dd6a9e1b0450ecddecf3">FLAG_NAT_ACTIVE</a>) == <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a7ea8f10bd8b1fab6990526c3271a7b59">FLAG_NAT_INACTIVE</a>) || <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a>) &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(rtp, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad2adc4c49cf65121c15dc838f43c6cb0">FLAG_NAT_INACTIVE_NOWARN</a>)) {</div><div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;            <span class="comment">/* Only give this error message once if we are not RTP debugging */</span></div><div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a>)</div><div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(0, <span class="stringliteral">&quot;(%p) RTP NAT: Can&#39;t write RTP to private address %s, waiting for other end to send audio...\n&quot;</span>,</div><div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;                  instance, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address));</div><div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(rtp, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad2adc4c49cf65121c15dc838f43c6cb0">FLAG_NAT_INACTIVE_NOWARN</a>);</div><div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;         }</div><div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;         <span class="keywordflow">if</span> (rtp-&gt;rtcp &amp;&amp; rtp-&gt;rtcp-&gt;schedid &lt; 0) {</div><div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP starting transmission\n&quot;</span>, instance);</div><div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(instance, +1);</div><div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;            rtp-&gt;rtcp-&gt;schedid = <a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(rtp-&gt;sched, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#adabbce218f278a5ee9224a5c4dd94754">ast_rtcp_calc_interval</a>(rtp), <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aff89c2855ec73ffa6efdc958bb71c2e8">ast_rtcp_write</a>, instance);</div><div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;            <span class="keywordflow">if</span> (rtp-&gt;rtcp-&gt;schedid &lt; 0) {</div><div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;               <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(instance, -1);</div><div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;scheduling RTCP transmission failed.\n&quot;</span>);</div><div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;            }</div><div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;         }</div><div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;      }</div><div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;</div><div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a>(&amp;remote_address)) {</div><div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Sent RTP packet to      %s%s (type %-2.2d, seq %-6.6d, ts %-6.6u, len %-6.6d)\n&quot;</span>,</div><div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;                <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address),</div><div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;                ice ? <span class="stringliteral">&quot; (via ICE)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;                codec, rtp-&gt;seqno, rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">lastts</a>, res - hdrlen);</div><div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;      }</div><div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;   }</div><div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;</div><div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;   <span class="comment">/* If the sequence number that has been used doesn&#39;t match what we expected then this is an out of</span></div><div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;<span class="comment">    * order late packet, so we don&#39;t need to increment as we haven&#39;t yet gotten the expected frame from</span></div><div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;<span class="comment">    * the core.</span></div><div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;   <span class="keywordflow">if</span> (seqno == rtp-&gt;seqno) {</div><div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;      rtp-&gt;seqno++;</div><div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;   }</div><div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;</div><div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00036">format.h:36</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ad0e27894cc1156205f52b3692096c14d"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ad0e27894cc1156205f52b3692096c14d">ast_rtp_instance_extmap_get_id</a></div><div class="ttdeci">int ast_rtp_instance_extmap_get_id(struct ast_rtp_instance *instance, enum ast_rtp_extension extension)</div><div class="ttdoc">Retrieve the id for an RTP extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00886">rtp_engine.c:886</a></div></div>
<div class="ttc" id="structast__rtp_html_a9a2293b0120398a3a10aed1a98a5ea59"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9a2293b0120398a3a10aed1a98a5ea59">ast_rtp::lastovidtimestamp</a></div><div class="ttdeci">unsigned int lastovidtimestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00380">res_rtp_asterisk.c:380</a></div></div>
<div class="ttc" id="structast__frame_html_ab793262012344621455faf9266acbac2"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">ast_frame::seqno</a></div><div class="ttdeci">int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">include/asterisk/frame.h:195</a></div></div>
<div class="ttc" id="structast__rtp_html_abf1f99fdbacb09d2077fdc250bccc269"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#abf1f99fdbacb09d2077fdc250bccc269">ast_rtp::lastotexttimestamp</a></div><div class="ttdeci">unsigned int lastotexttimestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00382">res_rtp_asterisk.c:382</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__nack__payload_html"><div class="ttname"><a href="../../d4/da4/structast__rtp__rtcp__nack__payload.html">ast_rtp_rtcp_nack_payload</a></div><div class="ttdoc">Structure for storing RTP packets for retransmission. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00585">res_rtp_asterisk.c:585</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aff89c2855ec73ffa6efdc958bb71c2e8"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aff89c2855ec73ffa6efdc958bb71c2e8">ast_rtcp_write</a></div><div class="ttdeci">static int ast_rtcp_write(const void *data)</div><div class="ttdoc">Write a RTCP packet to the far end. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04814">res_rtp_asterisk.c:4814</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a">AST_FRFLAG_HAS_TIMING_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00143">include/asterisk/frame.h:143</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__nack__payload_html_a69e3972abe4e2ef0a921d73212c28cba"><div class="ttname"><a href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a69e3972abe4e2ef0a921d73212c28cba">ast_rtp_rtcp_nack_payload::buf</a></div><div class="ttdeci">unsigned char buf[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00587">res_rtp_asterisk.c:587</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a368880aa0afe3ee532508eff1ba26882"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a></div><div class="ttdeci">struct ast_rtp_engine_test * ast_rtp_instance_get_test(struct ast_rtp_instance *instance)</div><div class="ttdoc">Obtain a pointer to the test callbacks on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02901">rtp_engine.c:2901</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__nack__payload_html_a854352f53b148adc24983a58a1866d66"><div class="ttname"><a href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a854352f53b148adc24983a58a1866d66">ast_rtp_rtcp_nack_payload::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00586">res_rtp_asterisk.c:586</a></div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="structast__rtp__engine__test_html_a9ed17e77f1720e944b2e0a6870e7b1c0"><div class="ttname"><a href="../../d5/d98/structast__rtp__engine__test.html#a9ed17e77f1720e944b2e0a6870e7b1c0">ast_rtp_engine_test::send_report</a></div><div class="ttdeci">int send_report</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00599">rtp_engine.h:599</a></div></div>
<div class="ttc" id="unaligned_8h_html_ae0b7823a3fab76dbec84f308adeb7f5a"><div class="ttname"><a href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a></div><div class="ttdeci">static void put_unaligned_uint32(void *p, unsigned int datum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1e/unaligned_8h_source.html#l00058">unaligned.h:58</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ae07b5d23a23d4d09988c4a1c5d477d14"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae07b5d23a23d4d09988c4a1c5d477d14">timeval2ntp</a></div><div class="ttdeci">static void timeval2ntp(struct timeval tv, unsigned int *msw, unsigned int *lsw)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04392">res_rtp_asterisk.c:4392</a></div></div>
<div class="ttc" id="structast__frame_html_a1eb46dcb363821328c0d2a758549216b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ast_frame::ts</a></div><div class="ttdeci">long ts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00191">include/asterisk/frame.h:191</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="format__cache_8h_html_ad02ea989608ad5180d04cb0c4e75294c"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#ad02ea989608ad5180d04cb0c4e75294c">ast_format_g722</a></div><div class="ttdeci">struct ast_format * ast_format_g722</div><div class="ttdoc">Built-in cached g722 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00111">format_cache.c:111</a></div></div>
<div class="ttc" id="http_8c_html_af9b32121c4ad80b0887a3d73fd24de5f"><div class="ttname"><a href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a></div><div class="ttdeci">const char * ext</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00147">http.c:147</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="data__buffer_8h_html_a8d5b92d5d157c9d56600596c9238b933"><div class="ttname"><a href="../../d7/d82/data__buffer_8h.html#a8d5b92d5d157c9d56600596c9238b933">ast_data_buffer_put</a></div><div class="ttdeci">int ast_data_buffer_put(struct ast_data_buffer *buffer, size_t pos, void *payload)</div><div class="ttdoc">Place a data payload at a position in the data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00203">data_buffer.c:203</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a88677a524d7f3d7201f5d2f773cfc8ffa2244dfdd646dfd5287d1029c44d1f3f5"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa2244dfdd646dfd5287d1029c44d1f3f5">AST_RTP_EXTENSION_ABS_SEND_TIME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00546">rtp_engine.h:546</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ab67e21f67a96dd6a9e1b0450ecddecf3"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab67e21f67a96dd6a9e1b0450ecddecf3">FLAG_NAT_ACTIVE</a></div><div class="ttdeci">#define FLAG_NAT_ACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00284">res_rtp_asterisk.c:284</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac963384d2cd5bf0a453061cc6889a44b"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac963384d2cd5bf0a453061cc6889a44b">rtp_debug_test_addr</a></div><div class="ttdeci">static int rtp_debug_test_addr(struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">res_rtp_asterisk.c:2746</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad2adc4c49cf65121c15dc838f43c6cb0"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad2adc4c49cf65121c15dc838f43c6cb0">FLAG_NAT_INACTIVE_NOWARN</a></div><div class="ttdeci">#define FLAG_NAT_INACTIVE_NOWARN</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00286">res_rtp_asterisk.c:286</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00115">rtp_engine.h:115</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga669fb90e123085584d65608ef87b2fe4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a></div><div class="ttdeci">#define ast_debug_rtp(sublevel,...)</div><div class="ttdoc">Log debug level RTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02860">rtp_engine.h:2860</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga0915be7e2d33217121465cfb689318fd"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a></div><div class="ttdeci">#define ast_debug_rtcp(sublevel,...)</div><div class="ttdoc">Log debug level RTCP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02873">rtp_engine.h:2873</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ab7d9bd5ba01a9647e359799e0d201cbf"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab7d9bd5ba01a9647e359799e0d201cbf">FLAG_NEED_MARKER_BIT</a></div><div class="ttdeci">#define FLAG_NEED_MARKER_BIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00287">res_rtp_asterisk.c:287</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga85ebb1735a6e9ce14a033b479076aaed"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a></div><div class="ttdeci">int ast_rtp_get_rate(const struct ast_format *format)</div><div class="ttdoc">Retrieve the sample rate of a format according to RTP specifications. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l04030">rtp_engine.c:4030</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga5009aeec1269fecc5f4e04c1c479116d"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga5009aeec1269fecc5f4e04c1c479116d">ast_debug_rtp_packet_is_allowed</a></div><div class="ttdeci">#define ast_debug_rtp_packet_is_allowed</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02864">rtp_engine.h:2864</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4c3a6d3e3a2ffc5044526e5db91fb6b5"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4c3a6d3e3a2ffc5044526e5db91fb6b5">calc_txstamp</a></div><div class="ttdeci">static unsigned int calc_txstamp(struct ast_rtp *rtp, struct timeval *delivery)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03716">res_rtp_asterisk.c:3716</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_a3779d6222d7632f2b46d2bbf06de7bb2"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#a3779d6222d7632f2b46d2bbf06de7bb2">ast_frame_subclass::frame_ending</a></div><div class="ttdeci">unsigned int frame_ending</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00160">include/asterisk/frame.h:160</a></div></div>
<div class="ttc" id="structast__rtp__engine__test_html"><div class="ttname"><a href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a></div><div class="ttdoc">Structure that represents the test functionality for res_rtp_asterisk unit tests. ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00595">rtp_engine.h:595</a></div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="structast__frame_html_a41a708025486b4c9383e7432e9ba3f0e"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">ast_frame::delivery</a></div><div class="ttdeci">struct timeval delivery</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00185">include/asterisk/frame.h:185</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__rtp_html_a2eb3b9494c999b0dd38c4d40bfdc55b4"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a2eb3b9494c999b0dd38c4d40bfdc55b4">ast_rtp::lastts</a></div><div class="ttdeci">unsigned int lastts</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00378">res_rtp_asterisk.c:378</a></div></div>
<div class="ttc" id="f2c_8h_html_a3aa069ac3980707dae1e0530f50d59e4"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#a3aa069ac3980707dae1e0530f50d59e4">abs</a></div><div class="ttdeci">#define abs(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00195">f2c.h:195</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ade1c64796fc8534818c62a28b95bcd38"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ade1c64796fc8534818c62a28b95bcd38">rtp_sendto</a></div><div class="ttdeci">static int rtp_sendto(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int *ice)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">res_rtp_asterisk.c:3309</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3fa030a6094ca05ea43a3b49f14e5cc3"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3fa030a6094ca05ea43a3b49f14e5cc3">put_unaligned_time24</a></div><div class="ttdeci">static void put_unaligned_time24(void *p, uint32_t time_msw, uint32_t time_lsw)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04876">res_rtp_asterisk.c:4876</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2a2d35167e5880fdd5ec8d7df44f18b1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a></div><div class="ttdeci">int ast_rtp_instance_get_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property)</div><div class="ttdoc">Get the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00716">rtp_engine.c:716</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_adabbce218f278a5ee9224a5c4dd94754"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#adabbce218f278a5ee9224a5c4dd94754">ast_rtcp_calc_interval</a></div><div class="ttdeci">static unsigned int ast_rtcp_calc_interval(struct ast_rtp *rtp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03323">res_rtp_asterisk.c:3323</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">include/asterisk/frame.h:103</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a12a850150b82a6ce1077e204d4f5638c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a12a850150b82a6ce1077e204d4f5638c">MAX_TIMESTAMP_SKEW</a></div><div class="ttdeci">#define MAX_TIMESTAMP_SKEW</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00092">res_rtp_asterisk.c:92</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac6bea760bc75e449a80b8cc28bf9a2feaccf78cd00b148145d1cc9e0f60fb7516"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feaccf78cd00b148145d1cc9e0f60fb7516">AST_FRFLAG_HAS_SEQUENCE_NUMBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00147">include/asterisk/frame.h:147</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a7ea8f10bd8b1fab6990526c3271a7b59"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a7ea8f10bd8b1fab6990526c3271a7b59">FLAG_NAT_INACTIVE</a></div><div class="ttdeci">#define FLAG_NAT_INACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00285">res_rtp_asterisk.c:285</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa0fc4bee4b3cceefec395ea724d20650"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0fc4bee4b3cceefec395ea724d20650">&#9670;&nbsp;</a></span>rtp_recvfrom()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtp_recvfrom </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>sa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03241">3241</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03084">__rtp_recvfrom()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;{</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abb6d9500accafb5cb6df3a6ee6e73990">__rtp_recvfrom</a>(instance, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a854352f53b148adc24983a58a1866d66">size</a>, flags, sa, 0);</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__nack__payload_html_a854352f53b148adc24983a58a1866d66"><div class="ttname"><a href="../../d4/da4/structast__rtp__rtcp__nack__payload.html#a854352f53b148adc24983a58a1866d66">ast_rtp_rtcp_nack_payload::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00586">res_rtp_asterisk.c:586</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_abb6d9500accafb5cb6df3a6ee6e73990"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#abb6d9500accafb5cb6df3a6ee6e73990">__rtp_recvfrom</a></div><div class="ttdeci">static int __rtp_recvfrom(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int rtcp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03084">res_rtp_asterisk.c:3084</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8e14bd5df65c8c88c04971316fb2bb2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e14bd5df65c8c88c04971316fb2bb2f">&#9670;&nbsp;</a></span>rtp_red_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtp_red_buffer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08608">8608</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05289">ast_rtp_write()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00579">rtp_red::buf_data</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00570">rtp_red::t140</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00191">ast_frame::ts</a>.</p>
<div class="fragment"><div class="line"><a name="l08609"></a><span class="lineno"> 8609</span>&#160;{</div><div class="line"><a name="l08610"></a><span class="lineno"> 8610</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l08611"></a><span class="lineno"> 8611</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dbb/structrtp__red.html">rtp_red</a> *red = rtp-&gt;red;</div><div class="line"><a name="l08612"></a><span class="lineno"> 8612</span>&#160;</div><div class="line"><a name="l08613"></a><span class="lineno"> 8613</span>&#160;   <span class="keywordflow">if</span> (!red) {</div><div class="line"><a name="l08614"></a><span class="lineno"> 8614</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08615"></a><span class="lineno"> 8615</span>&#160;   }</div><div class="line"><a name="l08616"></a><span class="lineno"> 8616</span>&#160;</div><div class="line"><a name="l08617"></a><span class="lineno"> 8617</span>&#160;   <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> &gt; 0) {</div><div class="line"><a name="l08618"></a><span class="lineno"> 8618</span>&#160;      <span class="keywordflow">if</span> (red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a0a9f2f354cbd850064f42809bcee83dc">t140</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> &gt; 0) {</div><div class="line"><a name="l08619"></a><span class="lineno"> 8619</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *primary = red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a7f4fdeaff8e8d4e34a0f75b9863a69e0">buf_data</a>;</div><div class="line"><a name="l08620"></a><span class="lineno"> 8620</span>&#160;</div><div class="line"><a name="l08621"></a><span class="lineno"> 8621</span>&#160;         <span class="comment">/* There is something already in the T.140 buffer */</span></div><div class="line"><a name="l08622"></a><span class="lineno"> 8622</span>&#160;         <span class="keywordflow">if</span> (primary[0] == 0x08 || primary[0] == 0x0a || primary[0] == 0x0d) {</div><div class="line"><a name="l08623"></a><span class="lineno"> 8623</span>&#160;            <span class="comment">/* Flush the previous T.140 packet if it is a command */</span></div><div class="line"><a name="l08624"></a><span class="lineno"> 8624</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aac1f4d7457f54890cb39395406b37a22">ast_rtp_write</a>(instance, &amp;rtp-&gt;red-&gt;t140);</div><div class="line"><a name="l08625"></a><span class="lineno"> 8625</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08626"></a><span class="lineno"> 8626</span>&#160;            primary = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l08627"></a><span class="lineno"> 8627</span>&#160;            <span class="keywordflow">if</span> (primary[0] == 0x08 || primary[0] == 0x0a || primary[0] == 0x0d) {</div><div class="line"><a name="l08628"></a><span class="lineno"> 8628</span>&#160;               <span class="comment">/* Flush the previous T.140 packet if we are buffering a command now */</span></div><div class="line"><a name="l08629"></a><span class="lineno"> 8629</span>&#160;               <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aac1f4d7457f54890cb39395406b37a22">ast_rtp_write</a>(instance, &amp;rtp-&gt;red-&gt;t140);</div><div class="line"><a name="l08630"></a><span class="lineno"> 8630</span>&#160;            }</div><div class="line"><a name="l08631"></a><span class="lineno"> 8631</span>&#160;         }</div><div class="line"><a name="l08632"></a><span class="lineno"> 8632</span>&#160;      }</div><div class="line"><a name="l08633"></a><span class="lineno"> 8633</span>&#160;</div><div class="line"><a name="l08634"></a><span class="lineno"> 8634</span>&#160;      memcpy(&amp;red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a7f4fdeaff8e8d4e34a0f75b9863a69e0">buf_data</a>[red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a0a9f2f354cbd850064f42809bcee83dc">t140</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>], frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);</div><div class="line"><a name="l08635"></a><span class="lineno"> 8635</span>&#160;      red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a0a9f2f354cbd850064f42809bcee83dc">t140</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> += frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>;</div><div class="line"><a name="l08636"></a><span class="lineno"> 8636</span>&#160;      red-&gt;<a class="code" href="../../da/dbb/structrtp__red.html#a0a9f2f354cbd850064f42809bcee83dc">t140</a>.<a class="code" href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ts</a> = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ts</a>;</div><div class="line"><a name="l08637"></a><span class="lineno"> 8637</span>&#160;   }</div><div class="line"><a name="l08638"></a><span class="lineno"> 8638</span>&#160;</div><div class="line"><a name="l08639"></a><span class="lineno"> 8639</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08640"></a><span class="lineno"> 8640</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="structast__frame_html_a1eb46dcb363821328c0d2a758549216b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ast_frame::ts</a></div><div class="ttdeci">long ts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00191">include/asterisk/frame.h:191</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aac1f4d7457f54890cb39395406b37a22"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aac1f4d7457f54890cb39395406b37a22">ast_rtp_write</a></div><div class="ttdeci">static int ast_rtp_write(struct ast_rtp_instance *instance, struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05289">res_rtp_asterisk.c:5289</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="structrtp__red_html"><div class="ttname"><a href="../../da/dbb/structrtp__red.html">rtp_red</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00569">res_rtp_asterisk.c:569</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structrtp__red_html_a0a9f2f354cbd850064f42809bcee83dc"><div class="ttname"><a href="../../da/dbb/structrtp__red.html#a0a9f2f354cbd850064f42809bcee83dc">rtp_red::t140</a></div><div class="ttdeci">struct ast_frame t140</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00570">res_rtp_asterisk.c:570</a></div></div>
<div class="ttc" id="structrtp__red_html_a7f4fdeaff8e8d4e34a0f75b9863a69e0"><div class="ttname"><a href="../../da/dbb/structrtp__red.html#a7f4fdeaff8e8d4e34a0f75b9863a69e0">rtp_red::buf_data</a></div><div class="ttdeci">unsigned char buf_data[64000]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00579">res_rtp_asterisk.c:579</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aca23f8d877d129c9057fd296aa4ee8be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca23f8d877d129c9057fd296aa4ee8be">&#9670;&nbsp;</a></span>rtp_red_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtp_red_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buffer_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>payloads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>generations</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08575">8575</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00241">ast_format_t140_red</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00114">AST_FRAME_TEXT</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08560">red_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l08576"></a><span class="lineno"> 8576</span>&#160;{</div><div class="line"><a name="l08577"></a><span class="lineno"> 8577</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l08578"></a><span class="lineno"> 8578</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l08579"></a><span class="lineno"> 8579</span>&#160;</div><div class="line"><a name="l08580"></a><span class="lineno"> 8580</span>&#160;   rtp-&gt;red = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*rtp-&gt;red));</div><div class="line"><a name="l08581"></a><span class="lineno"> 8581</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;red) {</div><div class="line"><a name="l08582"></a><span class="lineno"> 8582</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08583"></a><span class="lineno"> 8583</span>&#160;   }</div><div class="line"><a name="l08584"></a><span class="lineno"> 8584</span>&#160;</div><div class="line"><a name="l08585"></a><span class="lineno"> 8585</span>&#160;   rtp-&gt;red-&gt;t140.frametype = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a>;</div><div class="line"><a name="l08586"></a><span class="lineno"> 8586</span>&#160;   rtp-&gt;red-&gt;t140.subclass.format = <a class="code" href="../../db/d1c/format__cache_8h.html#abd1090ebd4176d40eabbe0878c82e216">ast_format_t140_red</a>;</div><div class="line"><a name="l08587"></a><span class="lineno"> 8587</span>&#160;   rtp-&gt;red-&gt;t140.data.ptr = &amp;rtp-&gt;red-&gt;buf_data;</div><div class="line"><a name="l08588"></a><span class="lineno"> 8588</span>&#160;</div><div class="line"><a name="l08589"></a><span class="lineno"> 8589</span>&#160;   rtp-&gt;red-&gt;t140red = rtp-&gt;red-&gt;t140;</div><div class="line"><a name="l08590"></a><span class="lineno"> 8590</span>&#160;   rtp-&gt;red-&gt;t140red.data.ptr = &amp;rtp-&gt;red-&gt;t140red_data;</div><div class="line"><a name="l08591"></a><span class="lineno"> 8591</span>&#160;</div><div class="line"><a name="l08592"></a><span class="lineno"> 8592</span>&#160;   rtp-&gt;red-&gt;ti = buffer_time;</div><div class="line"><a name="l08593"></a><span class="lineno"> 8593</span>&#160;   rtp-&gt;red-&gt;num_gen = generations;</div><div class="line"><a name="l08594"></a><span class="lineno"> 8594</span>&#160;   rtp-&gt;red-&gt;hdrlen = generations * 4 + 1;</div><div class="line"><a name="l08595"></a><span class="lineno"> 8595</span>&#160;</div><div class="line"><a name="l08596"></a><span class="lineno"> 8596</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; generations; x++) {</div><div class="line"><a name="l08597"></a><span class="lineno"> 8597</span>&#160;      rtp-&gt;red-&gt;pt[x] = payloads[x];</div><div class="line"><a name="l08598"></a><span class="lineno"> 8598</span>&#160;      rtp-&gt;red-&gt;pt[x] |= 1 &lt;&lt; 7; <span class="comment">/* mark redundant generations pt */</span></div><div class="line"><a name="l08599"></a><span class="lineno"> 8599</span>&#160;      rtp-&gt;red-&gt;t140red_data[x*4] = rtp-&gt;red-&gt;pt[x];</div><div class="line"><a name="l08600"></a><span class="lineno"> 8600</span>&#160;   }</div><div class="line"><a name="l08601"></a><span class="lineno"> 8601</span>&#160;   rtp-&gt;red-&gt;t140red_data[x*4] = rtp-&gt;red-&gt;pt[x] = payloads[x]; <span class="comment">/* primary pt */</span></div><div class="line"><a name="l08602"></a><span class="lineno"> 8602</span>&#160;   rtp-&gt;red-&gt;schedid = <a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(rtp-&gt;sched, generations, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af8fe2466849c65c9d60466c769ea5f2d">red_write</a>, instance);</div><div class="line"><a name="l08603"></a><span class="lineno"> 8603</span>&#160;</div><div class="line"><a name="l08604"></a><span class="lineno"> 8604</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08605"></a><span class="lineno"> 8605</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="format__cache_8h_html_abd1090ebd4176d40eabbe0878c82e216"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#abd1090ebd4176d40eabbe0878c82e216">ast_format_t140_red</a></div><div class="ttdeci">struct ast_format * ast_format_t140_red</div><div class="ttdoc">Built-in cached t140 red format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00241">format_cache.c:241</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00114">include/asterisk/frame.h:114</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af8fe2466849c65c9d60466c769ea5f2d"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af8fe2466849c65c9d60466c769ea5f2d">red_write</a></div><div class="ttdeci">static int red_write(const void *data)</div><div class="ttdoc">Write t140 redundacy frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08560">res_rtp_asterisk.c:8560</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0fd33c0dc833ac5b48e7990897319088"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fd33c0dc833ac5b48e7990897319088">&#9670;&nbsp;</a></span>rtp_reload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtp_reload </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>by_external_config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This resource is not "reloaded" so much as unloaded and loaded again. In the case of the TURN related variables, the memory referenced by a previously loaded instance <em>should</em> have been released when the corresponding pool was destroyed. If at some point in the future this resource were to support ACTUAL live reconfiguration and did NOT release the pool this will cause a small memory leak.</p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">9346</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00271">ast_ice_host_candidate::advertised</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00430">ast_append_acl()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03154">ast_config_load2()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01968">ast_false()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00233">ast_free_acl_list()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00782">ast_inet_ntoa()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d59/acl_8h.html#a1d3de55deab4206400a7df534511fcf7">ast_named_acl_change_type()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03657">ast_parse_arg()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00740">AST_RWLIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00234">ast_rwlock_wrlock</a>, <a class="el" href="../../d8/d30/main_2security__events_8c_source.html#l00380">ast_security_topic()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00157">ast_skip_blanks()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00140">ast_sockaddr_setnull()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01216">ast_variable_browse()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l00694">ast_variable_retrieve()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00154">CALC_LEARNING_MIN_DURATION</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00043">CONFIG_FLAG_FILEUNCHANGED</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00059">CONFIG_STATUS_FILEUNCHANGED</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00188">DEFAULT_DTLS_MTU</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00137">DEFAULT_DTMF_TIMEOUT</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00186">DEFAULT_ICESUPPORT</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00155">DEFAULT_LEARNING_MIN_DURATION</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00141">DEFAULT_LEARNING_MIN_SEQUENTIAL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00100">DEFAULT_RTP_END</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00099">DEFAULT_RTP_START</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00185">DEFAULT_SRTP_REPLAY_PROTECTION</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00184">DEFAULT_STRICT_RTP</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00187">DEFAULT_STUN_SOFTWARE_ATTRIBUTE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00105">DEFAULT_TURN_PORT</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00193">dtmftimeout</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00735">host_candidate_overrides_clear()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00225">ice_acl</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00214">icesupport</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00272">ast_ice_host_candidate::include_local</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00208">learning_min_duration</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00207">learning_min_sequential</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00270">ast_ice_host_candidate::local</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00103">MAXIMUM_RTP_PORT</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00102">MINIMUM_RTP_PORT</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00262">ast_rtp_ioqueue_thread::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01104">PARSE_ADDR</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01110">PARSE_INADDR</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01133">PARSE_PORT_IGNORE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00250">ast_rtp_ioqueue_thread::pool</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00095">RTCP_DEFAULT_INTERVALMS</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00097">RTCP_MAX_INTERVALMS</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00096">RTCP_MIN_INTERVALMS</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00198">rtcpinterval</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00196">rtpend</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00195">rtpstart</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00209">srtp_replay_protection</a>, <a class="el" href="../../d3/d00/stun_8h_source.html#l00060">STANDARD_STUN_PORT</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01025">stasis_subscription_accept_message_type()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00300">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01079">stasis_subscription_set_filter()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01136">stasis_unsubscribe_and_join()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00170">STRICT_RTP_NO</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00172">STRICT_RTP_SEQNO</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00171">STRICT_RTP_YES</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00206">strictrtp</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00229">stun_acl</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00215">stun_software_attribute</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00216">stunaddr</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00217">turnaddr</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00220">turnpassword</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00218">turnport</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00219">turnusername</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09613">acl_change_stasis_cb()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09624">load_module()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09592">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l09347"></a><span class="lineno"> 9347</span>&#160;{</div><div class="line"><a name="l09348"></a><span class="lineno"> 9348</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l09349"></a><span class="lineno"> 9349</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l09350"></a><span class="lineno"> 9350</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { (<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> &amp;&amp; !by_external_config) ? <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a> : 0 };</div><div class="line"><a name="l09351"></a><span class="lineno"> 9351</span>&#160;</div><div class="line"><a name="l09352"></a><span class="lineno"> 9352</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l09353"></a><span class="lineno"> 9353</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l09354"></a><span class="lineno"> 9354</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/db5/structast__ice__host__candidate.html">ast_ice_host_candidate</a> *candidate;</div><div class="line"><a name="l09355"></a><span class="lineno"> 9355</span>&#160;   <span class="keywordtype">int</span> acl_subscription_flag = 0;</div><div class="line"><a name="l09356"></a><span class="lineno"> 9356</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09357"></a><span class="lineno"> 9357</span>&#160;</div><div class="line"><a name="l09358"></a><span class="lineno"> 9358</span>&#160;   cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a>(<span class="stringliteral">&quot;rtp.conf&quot;</span>, <span class="stringliteral">&quot;rtp&quot;</span>, config_flags);</div><div class="line"><a name="l09359"></a><span class="lineno"> 9359</span>&#160;   <span class="keywordflow">if</span> (!cfg || cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a> || cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l09360"></a><span class="lineno"> 9360</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l09361"></a><span class="lineno"> 9361</span>&#160;   }</div><div class="line"><a name="l09362"></a><span class="lineno"> 9362</span>&#160;</div><div class="line"><a name="l09363"></a><span class="lineno"> 9363</span>&#160;<span class="preprocessor">#ifdef SO_NO_CHECK</span></div><div class="line"><a name="l09364"></a><span class="lineno"> 9364</span>&#160;   nochecksums = 0;</div><div class="line"><a name="l09365"></a><span class="lineno"> 9365</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09366"></a><span class="lineno"> 9366</span>&#160;</div><div class="line"><a name="l09367"></a><span class="lineno"> 9367</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa01c54d6d9412e8278c7422dab8899e5">DEFAULT_RTP_START</a>;</div><div class="line"><a name="l09368"></a><span class="lineno"> 9368</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a332be34df280794db6d6915c32ab842e">DEFAULT_RTP_END</a>;</div><div class="line"><a name="l09369"></a><span class="lineno"> 9369</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9426365d90a1b664b096a41d3a099a9f">rtcpinterval</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3a8359edb63fbe2754be0314451ce8b3">RTCP_DEFAULT_INTERVALMS</a>;</div><div class="line"><a name="l09370"></a><span class="lineno"> 9370</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aead922624018c01780f0f060df89e6a7">dtmftimeout</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3d5f788ed405ca3ab6a778892570b2a2">DEFAULT_DTMF_TIMEOUT</a>;</div><div class="line"><a name="l09371"></a><span class="lineno"> 9371</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aeb729ec664cf95a04d65276f08a80b24">DEFAULT_STRICT_RTP</a>;</div><div class="line"><a name="l09372"></a><span class="lineno"> 9372</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4ec95260935fbacc0443e815297e61bb">learning_min_sequential</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a19b83f0b08541761e041bc81db287bce">DEFAULT_LEARNING_MIN_SEQUENTIAL</a>;</div><div class="line"><a name="l09373"></a><span class="lineno"> 9373</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a64079d5324b80886f3bafe6cfd8fa0b4">learning_min_duration</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af9e0d41ebd37d2b8e758b7fff48d31f0">DEFAULT_LEARNING_MIN_DURATION</a>;</div><div class="line"><a name="l09374"></a><span class="lineno"> 9374</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a62f7bf8eadfec58f81f33a8c90458f15">srtp_replay_protection</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a73b8af2a30d6bdd4dc566f24ddb2f51f">DEFAULT_SRTP_REPLAY_PROTECTION</a>;</div><div class="line"><a name="l09375"></a><span class="lineno"> 9375</span>&#160;<span class="comment"></span></div><div class="line"><a name="l09376"></a><span class="lineno"> 9376</span>&#160;<span class="comment">   /** This resource is not &quot;reloaded&quot; so much as unloaded and loaded again.</span></div><div class="line"><a name="l09377"></a><span class="lineno"> 9377</span>&#160;<span class="comment">    * In the case of the TURN related variables, the memory referenced by a</span></div><div class="line"><a name="l09378"></a><span class="lineno"> 9378</span>&#160;<span class="comment">    * previously loaded instance  *should* have been released when the</span></div><div class="line"><a name="l09379"></a><span class="lineno"> 9379</span>&#160;<span class="comment">    * corresponding pool was destroyed. If at some point in the future this</span></div><div class="line"><a name="l09380"></a><span class="lineno"> 9380</span>&#160;<span class="comment">    * resource were to support ACTUAL live reconfiguration and did NOT release</span></div><div class="line"><a name="l09381"></a><span class="lineno"> 9381</span>&#160;<span class="comment">    * the pool this will cause a small memory leak.</span></div><div class="line"><a name="l09382"></a><span class="lineno"> 9382</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l09383"></a><span class="lineno"> 9383</span>&#160;</div><div class="line"><a name="l09384"></a><span class="lineno"> 9384</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l09385"></a><span class="lineno"> 9385</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab452a162adc04bec273fda937902e95e">icesupport</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a1362d4944e44c2bb083c0d185b9685f6">DEFAULT_ICESUPPORT</a>;</div><div class="line"><a name="l09386"></a><span class="lineno"> 9386</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aac9d720f1922d92f186b0df72b624ea0">stun_software_attribute</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af927b84002d0ac80345425c105ed0d10">DEFAULT_STUN_SOFTWARE_ATTRIBUTE</a>;</div><div class="line"><a name="l09387"></a><span class="lineno"> 9387</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad251f81e8d409b245b9f2ce9993e1df7">turnport</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af54f297bc8f157b342b0fe94bbbbb899">DEFAULT_TURN_PORT</a>;</div><div class="line"><a name="l09388"></a><span class="lineno"> 9388</span>&#160;   memset(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a53f406ef990fb9279d21572104158ab2">stunaddr</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a53f406ef990fb9279d21572104158ab2">stunaddr</a>));</div><div class="line"><a name="l09389"></a><span class="lineno"> 9389</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a97d66f714d8a621c7e6deb9ca3ce407a">turnaddr</a> = pj_str(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l09390"></a><span class="lineno"> 9390</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a54c70c91c4221587d7f59bf536539780">turnusername</a> = pj_str(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l09391"></a><span class="lineno"> 9391</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac2c7ecf8b1b5d36e9b8601c19aece7b4">turnpassword</a> = pj_str(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l09392"></a><span class="lineno"> 9392</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aef821ad4c8e25611b5fd4db4bf1bb60e">host_candidate_overrides_clear</a>();</div><div class="line"><a name="l09393"></a><span class="lineno"> 9393</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09394"></a><span class="lineno"> 9394</span>&#160;</div><div class="line"><a name="l09395"></a><span class="lineno"> 9395</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP)</span></div><div class="line"><a name="l09396"></a><span class="lineno"> 9396</span>&#160;   dtls_mtu = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a78f0d65ed005465b56a9f04834077907">DEFAULT_DTLS_MTU</a>;</div><div class="line"><a name="l09397"></a><span class="lineno"> 9397</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09398"></a><span class="lineno"> 9398</span>&#160;</div><div class="line"><a name="l09399"></a><span class="lineno"> 9399</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;rtpstart&quot;</span>))) {</div><div class="line"><a name="l09400"></a><span class="lineno"> 9400</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a> = atoi(s);</div><div class="line"><a name="l09401"></a><span class="lineno"> 9401</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a> &lt; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa4c6fd39ea1aa9fe6b3c067224c18550">MINIMUM_RTP_PORT</a>)</div><div class="line"><a name="l09402"></a><span class="lineno"> 9402</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa4c6fd39ea1aa9fe6b3c067224c18550">MINIMUM_RTP_PORT</a>;</div><div class="line"><a name="l09403"></a><span class="lineno"> 9403</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a> &gt; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ade9a07c6403adc775d18c0bc71be6c92">MAXIMUM_RTP_PORT</a>)</div><div class="line"><a name="l09404"></a><span class="lineno"> 9404</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ade9a07c6403adc775d18c0bc71be6c92">MAXIMUM_RTP_PORT</a>;</div><div class="line"><a name="l09405"></a><span class="lineno"> 9405</span>&#160;   }</div><div class="line"><a name="l09406"></a><span class="lineno"> 9406</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;rtpend&quot;</span>))) {</div><div class="line"><a name="l09407"></a><span class="lineno"> 9407</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a> = atoi(s);</div><div class="line"><a name="l09408"></a><span class="lineno"> 9408</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a> &lt; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa4c6fd39ea1aa9fe6b3c067224c18550">MINIMUM_RTP_PORT</a>)</div><div class="line"><a name="l09409"></a><span class="lineno"> 9409</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa4c6fd39ea1aa9fe6b3c067224c18550">MINIMUM_RTP_PORT</a>;</div><div class="line"><a name="l09410"></a><span class="lineno"> 9410</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a> &gt; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ade9a07c6403adc775d18c0bc71be6c92">MAXIMUM_RTP_PORT</a>)</div><div class="line"><a name="l09411"></a><span class="lineno"> 9411</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ade9a07c6403adc775d18c0bc71be6c92">MAXIMUM_RTP_PORT</a>;</div><div class="line"><a name="l09412"></a><span class="lineno"> 9412</span>&#160;   }</div><div class="line"><a name="l09413"></a><span class="lineno"> 9413</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;rtcpinterval&quot;</span>))) {</div><div class="line"><a name="l09414"></a><span class="lineno"> 9414</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9426365d90a1b664b096a41d3a099a9f">rtcpinterval</a> = atoi(s);</div><div class="line"><a name="l09415"></a><span class="lineno"> 9415</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9426365d90a1b664b096a41d3a099a9f">rtcpinterval</a> == 0)</div><div class="line"><a name="l09416"></a><span class="lineno"> 9416</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9426365d90a1b664b096a41d3a099a9f">rtcpinterval</a> = 0; <span class="comment">/* Just so we&#39;re clear... it&#39;s zero */</span></div><div class="line"><a name="l09417"></a><span class="lineno"> 9417</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9426365d90a1b664b096a41d3a099a9f">rtcpinterval</a> &lt; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abc283785a565edd42110d25d9ade9080">RTCP_MIN_INTERVALMS</a>)</div><div class="line"><a name="l09418"></a><span class="lineno"> 9418</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9426365d90a1b664b096a41d3a099a9f">rtcpinterval</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abc283785a565edd42110d25d9ade9080">RTCP_MIN_INTERVALMS</a>; <span class="comment">/* This catches negative numbers too */</span></div><div class="line"><a name="l09419"></a><span class="lineno"> 9419</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9426365d90a1b664b096a41d3a099a9f">rtcpinterval</a> &gt; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a40ff8a6874204fbbe6c375ae79d17b5e">RTCP_MAX_INTERVALMS</a>)</div><div class="line"><a name="l09420"></a><span class="lineno"> 9420</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a9426365d90a1b664b096a41d3a099a9f">rtcpinterval</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a40ff8a6874204fbbe6c375ae79d17b5e">RTCP_MAX_INTERVALMS</a>;</div><div class="line"><a name="l09421"></a><span class="lineno"> 9421</span>&#160;   }</div><div class="line"><a name="l09422"></a><span class="lineno"> 9422</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;rtpchecksums&quot;</span>))) {</div><div class="line"><a name="l09423"></a><span class="lineno"> 9423</span>&#160;<span class="preprocessor">#ifdef SO_NO_CHECK</span></div><div class="line"><a name="l09424"></a><span class="lineno"> 9424</span>&#160;      nochecksums = <a class="code" href="../../d6/d90/strings_8h.html#a6c3dc0bad204e9dd9890325c1c861e38">ast_false</a>(s) ? 1 : 0;</div><div class="line"><a name="l09425"></a><span class="lineno"> 9425</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l09426"></a><span class="lineno"> 9426</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a6c3dc0bad204e9dd9890325c1c861e38">ast_false</a>(s))</div><div class="line"><a name="l09427"></a><span class="lineno"> 9427</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Disabling RTP checksums is not supported on this operating system!\n&quot;</span>);</div><div class="line"><a name="l09428"></a><span class="lineno"> 9428</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09429"></a><span class="lineno"> 9429</span>&#160;   }</div><div class="line"><a name="l09430"></a><span class="lineno"> 9430</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;dtmftimeout&quot;</span>))) {</div><div class="line"><a name="l09431"></a><span class="lineno"> 9431</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aead922624018c01780f0f060df89e6a7">dtmftimeout</a> = atoi(s);</div><div class="line"><a name="l09432"></a><span class="lineno"> 9432</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aead922624018c01780f0f060df89e6a7">dtmftimeout</a> &lt; 0) || (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aead922624018c01780f0f060df89e6a7">dtmftimeout</a> &gt; 64000)) {</div><div class="line"><a name="l09433"></a><span class="lineno"> 9433</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;DTMF timeout of &#39;%d&#39; outside range, using default of &#39;%d&#39; instead\n&quot;</span>,</div><div class="line"><a name="l09434"></a><span class="lineno"> 9434</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aead922624018c01780f0f060df89e6a7">dtmftimeout</a>, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3d5f788ed405ca3ab6a778892570b2a2">DEFAULT_DTMF_TIMEOUT</a>);</div><div class="line"><a name="l09435"></a><span class="lineno"> 9435</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aead922624018c01780f0f060df89e6a7">dtmftimeout</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3d5f788ed405ca3ab6a778892570b2a2">DEFAULT_DTMF_TIMEOUT</a>;</div><div class="line"><a name="l09436"></a><span class="lineno"> 9436</span>&#160;      };</div><div class="line"><a name="l09437"></a><span class="lineno"> 9437</span>&#160;   }</div><div class="line"><a name="l09438"></a><span class="lineno"> 9438</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;strictrtp&quot;</span>))) {</div><div class="line"><a name="l09439"></a><span class="lineno"> 9439</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(s)) {</div><div class="line"><a name="l09440"></a><span class="lineno"> 9440</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4aa60bd948f9a50c92c99d384481de8448">STRICT_RTP_YES</a>;</div><div class="line"><a name="l09441"></a><span class="lineno"> 9441</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(s, <span class="stringliteral">&quot;seqno&quot;</span>)) {</div><div class="line"><a name="l09442"></a><span class="lineno"> 9442</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4a82328ab5af804ea335d057e3be8f7ae4">STRICT_RTP_SEQNO</a>;</div><div class="line"><a name="l09443"></a><span class="lineno"> 9443</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09444"></a><span class="lineno"> 9444</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4abe40d855eebd173a196e0ea75d0d4b9e">STRICT_RTP_NO</a>;</div><div class="line"><a name="l09445"></a><span class="lineno"> 9445</span>&#160;      }</div><div class="line"><a name="l09446"></a><span class="lineno"> 9446</span>&#160;   }</div><div class="line"><a name="l09447"></a><span class="lineno"> 9447</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;probation&quot;</span>))) {</div><div class="line"><a name="l09448"></a><span class="lineno"> 9448</span>&#160;      <span class="keywordflow">if</span> ((sscanf(s, <span class="stringliteral">&quot;%d&quot;</span>, &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4ec95260935fbacc0443e815297e61bb">learning_min_sequential</a>) != 1) || <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4ec95260935fbacc0443e815297e61bb">learning_min_sequential</a> &lt;= 1) {</div><div class="line"><a name="l09449"></a><span class="lineno"> 9449</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Value for &#39;probation&#39; could not be read, using default of &#39;%d&#39; instead\n&quot;</span>,</div><div class="line"><a name="l09450"></a><span class="lineno"> 9450</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a19b83f0b08541761e041bc81db287bce">DEFAULT_LEARNING_MIN_SEQUENTIAL</a>);</div><div class="line"><a name="l09451"></a><span class="lineno"> 9451</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4ec95260935fbacc0443e815297e61bb">learning_min_sequential</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a19b83f0b08541761e041bc81db287bce">DEFAULT_LEARNING_MIN_SEQUENTIAL</a>;</div><div class="line"><a name="l09452"></a><span class="lineno"> 9452</span>&#160;      }</div><div class="line"><a name="l09453"></a><span class="lineno"> 9453</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a64079d5324b80886f3bafe6cfd8fa0b4">learning_min_duration</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac5a44ba6e8dbccfe0f8ba5bfd1e9b10d">CALC_LEARNING_MIN_DURATION</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4ec95260935fbacc0443e815297e61bb">learning_min_sequential</a>);</div><div class="line"><a name="l09454"></a><span class="lineno"> 9454</span>&#160;   }</div><div class="line"><a name="l09455"></a><span class="lineno"> 9455</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;srtpreplayprotection&quot;</span>))) {</div><div class="line"><a name="l09456"></a><span class="lineno"> 9456</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a62f7bf8eadfec58f81f33a8c90458f15">srtp_replay_protection</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(s);</div><div class="line"><a name="l09457"></a><span class="lineno"> 9457</span>&#160;   }</div><div class="line"><a name="l09458"></a><span class="lineno"> 9458</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l09459"></a><span class="lineno"> 9459</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;icesupport&quot;</span>))) {</div><div class="line"><a name="l09460"></a><span class="lineno"> 9460</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ab452a162adc04bec273fda937902e95e">icesupport</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(s);</div><div class="line"><a name="l09461"></a><span class="lineno"> 9461</span>&#160;   }</div><div class="line"><a name="l09462"></a><span class="lineno"> 9462</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;stun_software_attribute&quot;</span>))) {</div><div class="line"><a name="l09463"></a><span class="lineno"> 9463</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aac9d720f1922d92f186b0df72b624ea0">stun_software_attribute</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(s);</div><div class="line"><a name="l09464"></a><span class="lineno"> 9464</span>&#160;   }</div><div class="line"><a name="l09465"></a><span class="lineno"> 9465</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;stunaddr&quot;</span>))) {</div><div class="line"><a name="l09466"></a><span class="lineno"> 9466</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a53f406ef990fb9279d21572104158ab2">stunaddr</a>.sin_port = htons(<a class="code" href="../../d3/d00/stun_8h.html#ade1989b36864c3baa50a69e9f05a38cb">STANDARD_STUN_PORT</a>);</div><div class="line"><a name="l09467"></a><span class="lineno"> 9467</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7e9aea581abeaae5d3799367d95284ac">ast_parse_arg</a>(s, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fadbbce4323faf5d2131137e15c1da10f1">PARSE_INADDR</a>, &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a53f406ef990fb9279d21572104158ab2">stunaddr</a>)) {</div><div class="line"><a name="l09468"></a><span class="lineno"> 9468</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid STUN server address: %s\n&quot;</span>, s);</div><div class="line"><a name="l09469"></a><span class="lineno"> 9469</span>&#160;      }</div><div class="line"><a name="l09470"></a><span class="lineno"> 9470</span>&#160;   }</div><div class="line"><a name="l09471"></a><span class="lineno"> 9471</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;turnaddr&quot;</span>))) {</div><div class="line"><a name="l09472"></a><span class="lineno"> 9472</span>&#160;      <span class="keyword">struct </span>sockaddr_in addr;</div><div class="line"><a name="l09473"></a><span class="lineno"> 9473</span>&#160;      addr.sin_port = htons(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af54f297bc8f157b342b0fe94bbbbb899">DEFAULT_TURN_PORT</a>);</div><div class="line"><a name="l09474"></a><span class="lineno"> 9474</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7e9aea581abeaae5d3799367d95284ac">ast_parse_arg</a>(s, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fadbbce4323faf5d2131137e15c1da10f1">PARSE_INADDR</a>, &amp;addr)) {</div><div class="line"><a name="l09475"></a><span class="lineno"> 9475</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid TURN server address: %s\n&quot;</span>, s);</div><div class="line"><a name="l09476"></a><span class="lineno"> 9476</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09477"></a><span class="lineno"> 9477</span>&#160;         pj_strdup2_with_null(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a97d66f714d8a621c7e6deb9ca3ce407a">turnaddr</a>, <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(addr.sin_addr));</div><div class="line"><a name="l09478"></a><span class="lineno"> 9478</span>&#160;         <span class="comment">/* ntohs() is not a bug here. The port number is used in host byte order with</span></div><div class="line"><a name="l09479"></a><span class="lineno"> 9479</span>&#160;<span class="comment">          * a pjnat API. */</span></div><div class="line"><a name="l09480"></a><span class="lineno"> 9480</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad251f81e8d409b245b9f2ce9993e1df7">turnport</a> = ntohs(addr.sin_port);</div><div class="line"><a name="l09481"></a><span class="lineno"> 9481</span>&#160;      }</div><div class="line"><a name="l09482"></a><span class="lineno"> 9482</span>&#160;   }</div><div class="line"><a name="l09483"></a><span class="lineno"> 9483</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;turnusername&quot;</span>))) {</div><div class="line"><a name="l09484"></a><span class="lineno"> 9484</span>&#160;      pj_strdup2_with_null(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a54c70c91c4221587d7f59bf536539780">turnusername</a>, s);</div><div class="line"><a name="l09485"></a><span class="lineno"> 9485</span>&#160;   }</div><div class="line"><a name="l09486"></a><span class="lineno"> 9486</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;turnpassword&quot;</span>))) {</div><div class="line"><a name="l09487"></a><span class="lineno"> 9487</span>&#160;      pj_strdup2_with_null(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac2c7ecf8b1b5d36e9b8601c19aece7b4">turnpassword</a>, s);</div><div class="line"><a name="l09488"></a><span class="lineno"> 9488</span>&#160;   }</div><div class="line"><a name="l09489"></a><span class="lineno"> 9489</span>&#160;</div><div class="line"><a name="l09490"></a><span class="lineno"> 9490</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d7/db0/structhost__candidates.html">host_candidates</a>);</div><div class="line"><a name="l09491"></a><span class="lineno"> 9491</span>&#160;   <span class="keywordflow">for</span> (var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, <span class="stringliteral">&quot;ice_host_candidates&quot;</span>); <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>; var = var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l09492"></a><span class="lineno"> 9492</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> local_addr, advertised_addr;</div><div class="line"><a name="l09493"></a><span class="lineno"> 9493</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> include_local_address = 0;</div><div class="line"><a name="l09494"></a><span class="lineno"> 9494</span>&#160;      <span class="keywordtype">char</span> *sep;</div><div class="line"><a name="l09495"></a><span class="lineno"> 9495</span>&#160;</div><div class="line"><a name="l09496"></a><span class="lineno"> 9496</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a>(&amp;local_addr);</div><div class="line"><a name="l09497"></a><span class="lineno"> 9497</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a>(&amp;advertised_addr);</div><div class="line"><a name="l09498"></a><span class="lineno"> 9498</span>&#160;</div><div class="line"><a name="l09499"></a><span class="lineno"> 9499</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7e9aea581abeaae5d3799367d95284ac">ast_parse_arg</a>(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa4b42c80c591c4da820aecc2bb80bde18">PARSE_ADDR</a> | <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d">PARSE_PORT_IGNORE</a>, &amp;local_addr)) {</div><div class="line"><a name="l09500"></a><span class="lineno"> 9500</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid local ICE host address: %s\n&quot;</span>, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l09501"></a><span class="lineno"> 9501</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l09502"></a><span class="lineno"> 9502</span>&#160;      }</div><div class="line"><a name="l09503"></a><span class="lineno"> 9503</span>&#160;</div><div class="line"><a name="l09504"></a><span class="lineno"> 9504</span>&#160;      sep = strchr(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>,<span class="charliteral">&#39;,&#39;</span>);</div><div class="line"><a name="l09505"></a><span class="lineno"> 9505</span>&#160;      <span class="keywordflow">if</span> (sep) {</div><div class="line"><a name="l09506"></a><span class="lineno"> 9506</span>&#160;         *sep = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l09507"></a><span class="lineno"> 9507</span>&#160;         sep++;</div><div class="line"><a name="l09508"></a><span class="lineno"> 9508</span>&#160;         sep = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(sep);</div><div class="line"><a name="l09509"></a><span class="lineno"> 9509</span>&#160;         include_local_address = strcmp(sep, <span class="stringliteral">&quot;include_local_address&quot;</span>) == 0;</div><div class="line"><a name="l09510"></a><span class="lineno"> 9510</span>&#160;      }</div><div class="line"><a name="l09511"></a><span class="lineno"> 9511</span>&#160;</div><div class="line"><a name="l09512"></a><span class="lineno"> 9512</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7e9aea581abeaae5d3799367d95284ac">ast_parse_arg</a>(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa4b42c80c591c4da820aecc2bb80bde18">PARSE_ADDR</a> | <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d">PARSE_PORT_IGNORE</a>, &amp;advertised_addr)) {</div><div class="line"><a name="l09513"></a><span class="lineno"> 9513</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid advertised ICE host address: %s\n&quot;</span>, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l09514"></a><span class="lineno"> 9514</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l09515"></a><span class="lineno"> 9515</span>&#160;      }</div><div class="line"><a name="l09516"></a><span class="lineno"> 9516</span>&#160;</div><div class="line"><a name="l09517"></a><span class="lineno"> 9517</span>&#160;      <span class="keywordflow">if</span> (!(candidate = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*candidate)))) {</div><div class="line"><a name="l09518"></a><span class="lineno"> 9518</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to allocate ICE host candidate mapping.\n&quot;</span>);</div><div class="line"><a name="l09519"></a><span class="lineno"> 9519</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09520"></a><span class="lineno"> 9520</span>&#160;      }</div><div class="line"><a name="l09521"></a><span class="lineno"> 9521</span>&#160;</div><div class="line"><a name="l09522"></a><span class="lineno"> 9522</span>&#160;      candidate-&gt;<a class="code" href="../../d4/db5/structast__ice__host__candidate.html#a22906b79916bbcd963916c92a328fab0">include_local</a> = include_local_address;</div><div class="line"><a name="l09523"></a><span class="lineno"> 9523</span>&#160;</div><div class="line"><a name="l09524"></a><span class="lineno"> 9524</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;candidate-&gt;<a class="code" href="../../d4/db5/structast__ice__host__candidate.html#a5256006bb1426efe38b3903704b65389">local</a>, &amp;local_addr);</div><div class="line"><a name="l09525"></a><span class="lineno"> 9525</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;candidate-&gt;<a class="code" href="../../d4/db5/structast__ice__host__candidate.html#acd8b71d30c6e8b2369e0b2c377d29cb6">advertised</a>, &amp;advertised_addr);</div><div class="line"><a name="l09526"></a><span class="lineno"> 9526</span>&#160;</div><div class="line"><a name="l09527"></a><span class="lineno"> 9527</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d7/db0/structhost__candidates.html">host_candidates</a>, candidate, next);</div><div class="line"><a name="l09528"></a><span class="lineno"> 9528</span>&#160;   }</div><div class="line"><a name="l09529"></a><span class="lineno"> 9529</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/db0/structhost__candidates.html">host_candidates</a>);</div><div class="line"><a name="l09530"></a><span class="lineno"> 9530</span>&#160;</div><div class="line"><a name="l09531"></a><span class="lineno"> 9531</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aab7301990e5a8cbb0455c7efc4596ac5">ice_acl_lock</a>);</div><div class="line"><a name="l09532"></a><span class="lineno"> 9532</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a453b496a5a02d8741bf2e52675f13a39">stun_acl_lock</a>);</div><div class="line"><a name="l09533"></a><span class="lineno"> 9533</span>&#160;</div><div class="line"><a name="l09534"></a><span class="lineno"> 9534</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aab6e5d05eb162134d044fec583e951d1">ice_acl</a> = <a class="code" href="../../d5/d59/acl_8h.html#a7fc796b79184fa0f4340037e5c1445c6">ast_free_acl_list</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aab6e5d05eb162134d044fec583e951d1">ice_acl</a>);</div><div class="line"><a name="l09535"></a><span class="lineno"> 9535</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a49055c15c8722fe931745104670be0c5">stun_acl</a> = <a class="code" href="../../d5/d59/acl_8h.html#a7fc796b79184fa0f4340037e5c1445c6">ast_free_acl_list</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a49055c15c8722fe931745104670be0c5">stun_acl</a>);</div><div class="line"><a name="l09536"></a><span class="lineno"> 9536</span>&#160;</div><div class="line"><a name="l09537"></a><span class="lineno"> 9537</span>&#160;   <span class="keywordflow">for</span> (var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>); <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>; var = var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l09538"></a><span class="lineno"> 9538</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* sense = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09539"></a><span class="lineno"> 9539</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d3/da4/structast__acl__list.html">ast_acl_list</a> **<a class="code" href="../../dc/dff/structacl.html">acl</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09540"></a><span class="lineno"> 9540</span>&#160;      <span class="keywordflow">if</span> (strncasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;ice_&quot;</span>, 4) == 0) {</div><div class="line"><a name="l09541"></a><span class="lineno"> 9541</span>&#160;         sense = var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> + 4;</div><div class="line"><a name="l09542"></a><span class="lineno"> 9542</span>&#160;         acl = &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aab6e5d05eb162134d044fec583e951d1">ice_acl</a>;</div><div class="line"><a name="l09543"></a><span class="lineno"> 9543</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;stun_&quot;</span>, 5) == 0) {</div><div class="line"><a name="l09544"></a><span class="lineno"> 9544</span>&#160;         sense = var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> + 5;</div><div class="line"><a name="l09545"></a><span class="lineno"> 9545</span>&#160;         acl = &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a49055c15c8722fe931745104670be0c5">stun_acl</a>;</div><div class="line"><a name="l09546"></a><span class="lineno"> 9546</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09547"></a><span class="lineno"> 9547</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l09548"></a><span class="lineno"> 9548</span>&#160;      }</div><div class="line"><a name="l09549"></a><span class="lineno"> 9549</span>&#160;</div><div class="line"><a name="l09550"></a><span class="lineno"> 9550</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(sense, <span class="stringliteral">&quot;blacklist&quot;</span>) == 0) {</div><div class="line"><a name="l09551"></a><span class="lineno"> 9551</span>&#160;         sense = <span class="stringliteral">&quot;deny&quot;</span>;</div><div class="line"><a name="l09552"></a><span class="lineno"> 9552</span>&#160;      }</div><div class="line"><a name="l09553"></a><span class="lineno"> 9553</span>&#160;</div><div class="line"><a name="l09554"></a><span class="lineno"> 9554</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(sense, <span class="stringliteral">&quot;acl&quot;</span>) &amp;&amp; strcasecmp(sense, <span class="stringliteral">&quot;permit&quot;</span>) &amp;&amp; strcasecmp(sense, <span class="stringliteral">&quot;deny&quot;</span>)) {</div><div class="line"><a name="l09555"></a><span class="lineno"> 9555</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l09556"></a><span class="lineno"> 9556</span>&#160;      }</div><div class="line"><a name="l09557"></a><span class="lineno"> 9557</span>&#160;</div><div class="line"><a name="l09558"></a><span class="lineno"> 9558</span>&#160;      <a class="code" href="../../d5/d59/acl_8h.html#a6b6715d0c234599571cf5e1adddfec33">ast_append_acl</a>(sense, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, acl, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;acl_subscription_flag);</div><div class="line"><a name="l09559"></a><span class="lineno"> 9559</span>&#160;   }</div><div class="line"><a name="l09560"></a><span class="lineno"> 9560</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aab7301990e5a8cbb0455c7efc4596ac5">ice_acl_lock</a>);</div><div class="line"><a name="l09561"></a><span class="lineno"> 9561</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a453b496a5a02d8741bf2e52675f13a39">stun_acl_lock</a>);</div><div class="line"><a name="l09562"></a><span class="lineno"> 9562</span>&#160;</div><div class="line"><a name="l09563"></a><span class="lineno"> 9563</span>&#160;   <span class="keywordflow">if</span> (acl_subscription_flag &amp;&amp; !<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a322eb26fcd507fe69297e038d584db02">acl_change_sub</a>) {</div><div class="line"><a name="l09564"></a><span class="lineno"> 9564</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a322eb26fcd507fe69297e038d584db02">acl_change_sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../d0/d29/include_2asterisk_2security__events_8h.html#a0db46f92449a8f63b954d776ebead63a">ast_security_topic</a>(), <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af4adfeec3f6af24e2ede7e730bee32eb">acl_change_stasis_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l09565"></a><span class="lineno"> 9565</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a322eb26fcd507fe69297e038d584db02">acl_change_sub</a>, <a class="code" href="../../d5/d59/acl_8h.html#a1d3de55deab4206400a7df534511fcf7">ast_named_acl_change_type</a>());</div><div class="line"><a name="l09566"></a><span class="lineno"> 9566</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a52b5393bef89d7781c0d039d6489de23">stasis_subscription_set_filter</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a322eb26fcd507fe69297e038d584db02">acl_change_sub</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>);</div><div class="line"><a name="l09567"></a><span class="lineno"> 9567</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!acl_subscription_flag &amp;&amp; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a322eb26fcd507fe69297e038d584db02">acl_change_sub</a>) {</div><div class="line"><a name="l09568"></a><span class="lineno"> 9568</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a322eb26fcd507fe69297e038d584db02">acl_change_sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a322eb26fcd507fe69297e038d584db02">acl_change_sub</a>);</div><div class="line"><a name="l09569"></a><span class="lineno"> 9569</span>&#160;   }</div><div class="line"><a name="l09570"></a><span class="lineno"> 9570</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09571"></a><span class="lineno"> 9571</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP)</span></div><div class="line"><a name="l09572"></a><span class="lineno"> 9572</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;dtls_mtu&quot;</span>))) {</div><div class="line"><a name="l09573"></a><span class="lineno"> 9573</span>&#160;      <span class="keywordflow">if</span> ((sscanf(s, <span class="stringliteral">&quot;%d&quot;</span>, &amp;dtls_mtu) != 1) || dtls_mtu &lt; 256) {</div><div class="line"><a name="l09574"></a><span class="lineno"> 9574</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Value for &#39;dtls_mtu&#39; could not be read, using default of &#39;%d&#39; instead\n&quot;</span>,</div><div class="line"><a name="l09575"></a><span class="lineno"> 9575</span>&#160;            <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a78f0d65ed005465b56a9f04834077907">DEFAULT_DTLS_MTU</a>);</div><div class="line"><a name="l09576"></a><span class="lineno"> 9576</span>&#160;         dtls_mtu = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a78f0d65ed005465b56a9f04834077907">DEFAULT_DTLS_MTU</a>;</div><div class="line"><a name="l09577"></a><span class="lineno"> 9577</span>&#160;      }</div><div class="line"><a name="l09578"></a><span class="lineno"> 9578</span>&#160;   }</div><div class="line"><a name="l09579"></a><span class="lineno"> 9579</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09580"></a><span class="lineno"> 9580</span>&#160;</div><div class="line"><a name="l09581"></a><span class="lineno"> 9581</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l09582"></a><span class="lineno"> 9582</span>&#160;</div><div class="line"><a name="l09583"></a><span class="lineno"> 9583</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a> &gt;= <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a>) {</div><div class="line"><a name="l09584"></a><span class="lineno"> 9584</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unreasonable values for RTP start/end port in rtp.conf\n&quot;</span>);</div><div class="line"><a name="l09585"></a><span class="lineno"> 9585</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa01c54d6d9412e8278c7422dab8899e5">DEFAULT_RTP_START</a>;</div><div class="line"><a name="l09586"></a><span class="lineno"> 9586</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a> = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a332be34df280794db6d6915c32ab842e">DEFAULT_RTP_END</a>;</div><div class="line"><a name="l09587"></a><span class="lineno"> 9587</span>&#160;   }</div><div class="line"><a name="l09588"></a><span class="lineno"> 9588</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;RTP Allocating from port range %d -&gt; %d\n&quot;</span>, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a>, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a>);</div><div class="line"><a name="l09589"></a><span class="lineno"> 9589</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l09590"></a><span class="lineno"> 9590</span>&#160;}</div><div class="ttc" id="structast__ice__host__candidate_html_a5256006bb1426efe38b3903704b65389"><div class="ttname"><a href="../../d4/db5/structast__ice__host__candidate.html#a5256006bb1426efe38b3903704b65389">ast_ice_host_candidate::local</a></div><div class="ttdeci">struct ast_sockaddr local</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00270">res_rtp_asterisk.c:270</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d">PARSE_PORT_IGNORE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01133">include/asterisk/config.h:1133</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aeb729ec664cf95a04d65276f08a80b24"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aeb729ec664cf95a04d65276f08a80b24">DEFAULT_STRICT_RTP</a></div><div class="ttdeci">#define DEFAULT_STRICT_RTP</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00184">res_rtp_asterisk.c:184</a></div></div>
<div class="ttc" id="structhost__candidates_html"><div class="ttname"><a href="../../d7/db0/structhost__candidates.html">host_candidates</a></div><div class="ttdoc">List of ICE host candidate mappings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00277">res_rtp_asterisk.c:277</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a73b8af2a30d6bdd4dc566f24ddb2f51f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a73b8af2a30d6bdd4dc566f24ddb2f51f">DEFAULT_SRTP_REPLAY_PROTECTION</a></div><div class="ttdeci">#define DEFAULT_SRTP_REPLAY_PROTECTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00185">res_rtp_asterisk.c:185</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ab452a162adc04bec273fda937902e95e"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ab452a162adc04bec273fda937902e95e">icesupport</a></div><div class="ttdeci">static int icesupport</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00214">res_rtp_asterisk.c:214</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af54f297bc8f157b342b0fe94bbbbb899"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af54f297bc8f157b342b0fe94bbbbb899">DEFAULT_TURN_PORT</a></div><div class="ttdeci">#define DEFAULT_TURN_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00105">res_rtp_asterisk.c:105</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aef636ed2f3d33f4c7a1ba67eb7c4d052"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a></div><div class="ttdeci">struct ast_variable * ast_variable_browse(const struct ast_config *config, const char *category_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01216">extconf.c:1216</a></div></div>
<div class="ttc" id="include_2asterisk_2security__events_8h_html_a0db46f92449a8f63b954d776ebead63a"><div class="ttname"><a href="../../d0/d29/include_2asterisk_2security__events_8h.html#a0db46f92449a8f63b954d776ebead63a">ast_security_topic</a></div><div class="ttdeci">struct stasis_topic * ast_security_topic(void)</div><div class="ttdoc">A stasis_topic which publishes messages for security related issues. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d30/main_2security__events_8c_source.html#l00380">main/security_events.c:380</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3d5f788ed405ca3ab6a778892570b2a2"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3d5f788ed405ca3ab6a778892570b2a2">DEFAULT_DTMF_TIMEOUT</a></div><div class="ttdeci">#define DEFAULT_DTMF_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00137">res_rtp_asterisk.c:137</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a41f01397502dd66338663a1fa72382e4aa60bd948f9a50c92c99d384481de8448"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4aa60bd948f9a50c92c99d384481de8448">STRICT_RTP_YES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00171">res_rtp_asterisk.c:171</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa3d9ba5adbb6566211600f0ab4a027c7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa3d9ba5adbb6566211600f0ab4a027c7">rtpstart</a></div><div class="ttdeci">static int rtpstart</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00195">res_rtp_asterisk.c:195</a></div></div>
<div class="ttc" id="structast__ice__host__candidate_html_a22906b79916bbcd963916c92a328fab0"><div class="ttname"><a href="../../d4/db5/structast__ice__host__candidate.html#a22906b79916bbcd963916c92a328fab0">ast_ice_host_candidate::include_local</a></div><div class="ttdeci">unsigned int include_local</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00272">res_rtp_asterisk.c:272</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa4c6fd39ea1aa9fe6b3c067224c18550"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa4c6fd39ea1aa9fe6b3c067224c18550">MINIMUM_RTP_PORT</a></div><div class="ttdeci">#define MINIMUM_RTP_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00102">res_rtp_asterisk.c:102</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aab3eac8fa82a86a93c074deb7b77dbc9"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a></div><div class="ttdeci">struct ast_config * ast_config_load2(const char *filename, const char *who_asked, struct ast_flags flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03154">main/config.c:3154</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_abc283785a565edd42110d25d9ade9080"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#abc283785a565edd42110d25d9ade9080">RTCP_MIN_INTERVALMS</a></div><div class="ttdeci">#define RTCP_MIN_INTERVALMS</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00096">res_rtp_asterisk.c:96</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aac9d720f1922d92f186b0df72b624ea0"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aac9d720f1922d92f186b0df72b624ea0">stun_software_attribute</a></div><div class="ttdeci">static int stun_software_attribute</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00215">res_rtp_asterisk.c:215</a></div></div>
<div class="ttc" id="stasis_8h_html_a52b5393bef89d7781c0d039d6489de23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a52b5393bef89d7781c0d039d6489de23">stasis_subscription_set_filter</a></div><div class="ttdeci">int stasis_subscription_set_filter(struct stasis_subscription *subscription, enum stasis_subscription_message_filter filter)</div><div class="ttdoc">Set the message type filtering level on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01079">stasis.c:1079</a></div></div>
<div class="ttc" id="acl_8h_html_a1d3de55deab4206400a7df534511fcf7"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a1d3de55deab4206400a7df534511fcf7">ast_named_acl_change_type</a></div><div class="ttdeci">struct stasis_message_type * ast_named_acl_change_type(void)</div><div class="ttdoc">a stasis_message_type for changes against a named ACL or the set of all named ACLs ...</div></div>
<div class="ttc" id="structast__acl__list_html"><div class="ttname"><a href="../../d3/da4/structast__acl__list.html">ast_acl_list</a></div><div class="ttdoc">Wrapper for an ast_acl linked list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d59/acl_8h_source.html#l00076">acl.h:76</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a332be34df280794db6d6915c32ab842e"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a332be34df280794db6d6915c32ab842e">DEFAULT_RTP_END</a></div><div class="ttdeci">#define DEFAULT_RTP_END</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00100">res_rtp_asterisk.c:100</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aead922624018c01780f0f060df89e6a7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aead922624018c01780f0f060df89e6a7">dtmftimeout</a></div><div class="ttdeci">static int dtmftimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00193">res_rtp_asterisk.c:193</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a40ff8a6874204fbbe6c375ae79d17b5e"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a40ff8a6874204fbbe6c375ae79d17b5e">RTCP_MAX_INTERVALMS</a></div><div class="ttdeci">#define RTCP_MAX_INTERVALMS</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00097">res_rtp_asterisk.c:97</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af4adfeec3f6af24e2ede7e730bee32eb"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af4adfeec3f6af24e2ede7e730bee32eb">acl_change_stasis_cb</a></div><div class="ttdeci">static void acl_change_stasis_cb(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09613">res_rtp_asterisk.c:9613</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad91b5dfe4c188d15f4b2e9e2ec5d8864"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a></div><div class="ttdeci">static void ast_sockaddr_setnull(struct ast_sockaddr *addr)</div><div class="ttdoc">Sets address addr to null. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00140">netsock2.h:140</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa4b42c80c591c4da820aecc2bb80bde18"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa4b42c80c591c4da820aecc2bb80bde18">PARSE_ADDR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01104">include/asterisk/config.h:1104</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad251f81e8d409b245b9f2ce9993e1df7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad251f81e8d409b245b9f2ce9993e1df7">turnport</a></div><div class="ttdeci">static int turnport</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00218">res_rtp_asterisk.c:218</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a53f406ef990fb9279d21572104158ab2"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a53f406ef990fb9279d21572104158ab2">stunaddr</a></div><div class="ttdeci">static struct sockaddr_in stunaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00216">res_rtp_asterisk.c:216</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="stun_8h_html_ade1989b36864c3baa50a69e9f05a38cb"><div class="ttname"><a href="../../d3/d00/stun_8h.html#ade1989b36864c3baa50a69e9f05a38cb">STANDARD_STUN_PORT</a></div><div class="ttdeci">static const int STANDARD_STUN_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d00/stun_8h_source.html#l00060">stun.h:60</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fadbbce4323faf5d2131137e15c1da10f1"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fadbbce4323faf5d2131137e15c1da10f1">PARSE_INADDR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01110">include/asterisk/config.h:1110</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ade9a07c6403adc775d18c0bc71be6c92"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ade9a07c6403adc775d18c0bc71be6c92">MAXIMUM_RTP_PORT</a></div><div class="ttdeci">#define MAXIMUM_RTP_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00103">res_rtp_asterisk.c:103</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a49055c15c8722fe931745104670be0c5"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a49055c15c8722fe931745104670be0c5">stun_acl</a></div><div class="ttdeci">static struct ast_acl_list * stun_acl</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00229">res_rtp_asterisk.c:229</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aab6e5d05eb162134d044fec583e951d1"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aab6e5d05eb162134d044fec583e951d1">ice_acl</a></div><div class="ttdeci">static struct ast_acl_list * ice_acl</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00225">res_rtp_asterisk.c:225</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af9e0d41ebd37d2b8e758b7fff48d31f0"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af9e0d41ebd37d2b8e758b7fff48d31f0">DEFAULT_LEARNING_MIN_DURATION</a></div><div class="ttdeci">#define DEFAULT_LEARNING_MIN_DURATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00155">res_rtp_asterisk.c:155</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a846844eb2c4eb44554445936b3770711"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEUNCHANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00059">include/asterisk/config.h:59</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a19b83f0b08541761e041bc81db287bce"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a19b83f0b08541761e041bc81db287bce">DEFAULT_LEARNING_MIN_SEQUENTIAL</a></div><div class="ttdeci">#define DEFAULT_LEARNING_MIN_SEQUENTIAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00141">res_rtp_asterisk.c:141</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa01c54d6d9412e8278c7422dab8899e5"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa01c54d6d9412e8278c7422dab8899e5">DEFAULT_RTP_START</a></div><div class="ttdeci">#define DEFAULT_RTP_START</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00099">res_rtp_asterisk.c:99</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a62f7bf8eadfec58f81f33a8c90458f15"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a62f7bf8eadfec58f81f33a8c90458f15">srtp_replay_protection</a></div><div class="ttdeci">static int srtp_replay_protection</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00209">res_rtp_asterisk.c:209</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aef821ad4c8e25611b5fd4db4bf1bb60e"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aef821ad4c8e25611b5fd4db4bf1bb60e">host_candidate_overrides_clear</a></div><div class="ttdeci">static void host_candidate_overrides_clear(void)</div><div class="ttdoc">Helper function which clears the ICE host candidate mapping. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00735">res_rtp_asterisk.c:735</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a96336b3ac9e5b66f365f0ca5ba613995"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a96336b3ac9e5b66f365f0ca5ba613995">strictrtp</a></div><div class="ttdeci">static int strictrtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00206">res_rtp_asterisk.c:206</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a322eb26fcd507fe69297e038d584db02"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a322eb26fcd507fe69297e038d584db02">acl_change_sub</a></div><div class="ttdeci">static struct stasis_subscription * acl_change_sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00221">res_rtp_asterisk.c:221</a></div></div>
<div class="ttc" id="acl_8h_html_a7fc796b79184fa0f4340037e5c1445c6"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a7fc796b79184fa0f4340037e5c1445c6">ast_free_acl_list</a></div><div class="ttdeci">struct ast_acl_list * ast_free_acl_list(struct ast_acl_list *acl)</div><div class="ttdoc">Free a list of ACLs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l00233">acl.c:233</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aab7301990e5a8cbb0455c7efc4596ac5"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aab7301990e5a8cbb0455c7efc4596ac5">ice_acl_lock</a></div><div class="ttdeci">static ast_rwlock_t ice_acl_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00226">res_rtp_asterisk.c:226</a></div></div>
<div class="ttc" id="strings_8h_html_af5693da955fa3bc73bc49c47b601fc7a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a></div><div class="ttdeci">char * ast_skip_blanks(const char *str)</div><div class="ttdoc">Gets a pointer to the first non-whitespace character in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00157">strings.h:157</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="structacl_html"><div class="ttname"><a href="../../dc/dff/structacl.html">acl</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dcf/test__acl_8c_source.html#l00111">test_acl.c:111</a></div></div>
<div class="ttc" id="network_8h_html_a5a735cb59e8a8ddd78078d396db7e106"><div class="ttname"><a href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a></div><div class="ttdeci">const char * ast_inet_ntoa(struct in_addr ia)</div><div class="ttdoc">thread-safe replacement for inet_ntoa(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00782">main/utils.c:782</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3a8359edb63fbe2754be0314451ce8b3"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3a8359edb63fbe2754be0314451ce8b3">RTCP_DEFAULT_INTERVALMS</a></div><div class="ttdeci">#define RTCP_DEFAULT_INTERVALMS</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00095">res_rtp_asterisk.c:95</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ad1982509765f4870f1f63412a53ea668"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a></div><div class="ttdeci">static int reload(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00741">cdr_mysql.c:741</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a7e9aea581abeaae5d3799367d95284ac"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a7e9aea581abeaae5d3799367d95284ac">ast_parse_arg</a></div><div class="ttdeci">int ast_parse_arg(const char *arg, enum ast_parse_flags flags, void *result,...)</div><div class="ttdoc">The argument parsing routine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03657">main/config.c:3657</a></div></div>
<div class="ttc" id="stasis_8h_html_a221d05010106dcde0cc2e2b43c1a8b67"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe_and_join(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription, blocking until the last message is processed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01136">stasis.c:1136</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a1362d4944e44c2bb083c0d185b9685f6"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a1362d4944e44c2bb083c0d185b9685f6">DEFAULT_ICESUPPORT</a></div><div class="ttdeci">#define DEFAULT_ICESUPPORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00186">res_rtp_asterisk.c:186</a></div></div>
<div class="ttc" id="structast__ice__host__candidate_html_acd8b71d30c6e8b2369e0b2c377d29cb6"><div class="ttname"><a href="../../d4/db5/structast__ice__host__candidate.html#acd8b71d30c6e8b2369e0b2c377d29cb6">ast_ice_host_candidate::advertised</a></div><div class="ttdeci">struct ast_sockaddr advertised</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00271">res_rtp_asterisk.c:271</a></div></div>
<div class="ttc" id="lock_8h_html_a045bd81ceab2de81e42af338ad7cf121"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a></div><div class="ttdeci">#define ast_rwlock_wrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00234">lock.h:234</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a64079d5324b80886f3bafe6cfd8fa0b4"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a64079d5324b80886f3bafe6cfd8fa0b4">learning_min_duration</a></div><div class="ttdeci">static int learning_min_duration</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00208">res_rtp_asterisk.c:208</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a9ff7aa27ae5f1a980bcf81f91cd6e470"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a></div><div class="ttdeci">const char * ast_variable_retrieve(struct ast_config *config, const char *category, const char *variable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00694">main/config.c:694</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a97d66f714d8a621c7e6deb9ca3ce407a"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a97d66f714d8a621c7e6deb9ca3ce407a">turnaddr</a></div><div class="ttdeci">static pj_str_t turnaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00217">res_rtp_asterisk.c:217</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac2c7ecf8b1b5d36e9b8601c19aece7b4"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac2c7ecf8b1b5d36e9b8601c19aece7b4">turnpassword</a></div><div class="ttdeci">static pj_str_t turnpassword</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00220">res_rtp_asterisk.c:220</a></div></div>
<div class="ttc" id="acl_8h_html_a6b6715d0c234599571cf5e1adddfec33"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a6b6715d0c234599571cf5e1adddfec33">ast_append_acl</a></div><div class="ttdeci">void ast_append_acl(const char *sense, const char *stuff, struct ast_acl_list **path, int *error, int *named_acl_flag)</div><div class="ttdoc">Add a rule to an ACL struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l00430">acl.c:430</a></div></div>
<div class="ttc" id="strings_8h_html_a6c3dc0bad204e9dd9890325c1c861e38"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a6c3dc0bad204e9dd9890325c1c861e38">ast_false</a></div><div class="ttdeci">int attribute_pure ast_false(const char *val)</div><div class="ttdoc">Make sure something is false. Determine if a string containing a boolean value is &quot;false&quot;...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01968">main/utils.c:1968</a></div></div>
<div class="ttc" id="structast__ice__host__candidate_html"><div class="ttname"><a href="../../d4/db5/structast__ice__host__candidate.html">ast_ice_host_candidate</a></div><div class="ttdoc">Structure which contains ICE host candidate mapping information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00269">res_rtp_asterisk.c:269</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4ec95260935fbacc0443e815297e61bb"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4ec95260935fbacc0443e815297e61bb">learning_min_sequential</a></div><div class="ttdeci">static int learning_min_sequential</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00207">res_rtp_asterisk.c:207</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a41f01397502dd66338663a1fa72382e4abe40d855eebd173a196e0ea75d0d4b9e"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4abe40d855eebd173a196e0ea75d0d4b9e">STRICT_RTP_NO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00170">res_rtp_asterisk.c:170</a></div></div>
<div class="ttc" id="stasis_8h_html_a4f248ee5f4791f05d0af8768aaab282b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a></div><div class="ttdeci">int stasis_subscription_accept_message_type(struct stasis_subscription *subscription, const struct stasis_message_type *type)</div><div class="ttdoc">Indicate to a subscription that we are interested in a message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01025">stasis.c:1025</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a78f0d65ed005465b56a9f04834077907"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a78f0d65ed005465b56a9f04834077907">DEFAULT_DTLS_MTU</a></div><div class="ttdeci">#define DEFAULT_DTLS_MTU</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00188">res_rtp_asterisk.c:188</a></div></div>
<div class="ttc" id="stasis_8h_html_a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00300">stasis.h:300</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a9426365d90a1b664b096a41d3a099a9f"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a9426365d90a1b664b096a41d3a099a9f">rtcpinterval</a></div><div class="ttdeci">static int rtcpinterval</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00198">res_rtp_asterisk.c:198</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a41f01397502dd66338663a1fa72382e4a82328ab5af804ea335d057e3be8f7ae4"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a41f01397502dd66338663a1fa72382e4a82328ab5af804ea335d057e3be8f7ae4">STRICT_RTP_SEQNO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00172">res_rtp_asterisk.c:172</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac5a44ba6e8dbccfe0f8ba5bfd1e9b10d"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac5a44ba6e8dbccfe0f8ba5bfd1e9b10d">CALC_LEARNING_MIN_DURATION</a></div><div class="ttdeci">#define CALC_LEARNING_MIN_DURATION(count)</div><div class="ttdoc">Calculate the min learning duration in ms. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00154">res_rtp_asterisk.c:154</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a453b496a5a02d8741bf2e52675f13a39"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a453b496a5a02d8741bf2e52675f13a39">stun_acl_lock</a></div><div class="ttdeci">static ast_rwlock_t stun_acl_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00230">res_rtp_asterisk.c:230</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af927b84002d0ac80345425c105ed0d10"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af927b84002d0ac80345425c105ed0d10">DEFAULT_STUN_SOFTWARE_ATTRIBUTE</a></div><div class="ttdeci">#define DEFAULT_STUN_SOFTWARE_ATTRIBUTE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00187">res_rtp_asterisk.c:187</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a54c70c91c4221587d7f59bf536539780"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a54c70c91c4221587d7f59bf536539780">turnusername</a></div><div class="ttdeci">static pj_str_t turnusername</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00219">res_rtp_asterisk.c:219</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4b0895b04a97fb8d38e0f15dfed4c9e0"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4b0895b04a97fb8d38e0f15dfed4c9e0">rtpend</a></div><div class="ttdeci">static int rtpend</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00196">res_rtp_asterisk.c:196</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00043">include/asterisk/config.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ade1c64796fc8534818c62a28b95bcd38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade1c64796fc8534818c62a28b95bcd38">&#9670;&nbsp;</a></span>rtp_sendto()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtp_sendto </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>sa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ice</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>instance is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03309">3309</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03247">__rtp_sendto()</a>, and <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04134">ast_rtp_dtmf_begin()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04209">ast_rtp_dtmf_continuation()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04255">ast_rtp_dtmf_end_with_duration()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05963">ast_rtp_rtcp_handle_nack()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08816">ast_rtp_sendcng()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06649">bridge_p2p_rtp_write()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">rtp_raw_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;{</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;   <span class="keywordtype">int</span> hdrlen = 12;</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;   <span class="keywordflow">if</span> ((res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#abef5f1e6bda48737ffca70d3123023b6">__rtp_sendto</a>(instance, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size, flags, sa, 0, ice, 1)) &gt; 0) {</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;      rtp-&gt;txcount++;</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;      rtp-&gt;txoctetcount += (res - hdrlen);</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;   }</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_abef5f1e6bda48737ffca70d3123023b6"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#abef5f1e6bda48737ffca70d3123023b6">__rtp_sendto</a></div><div class="ttdeci">static int __rtp_sendto(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int rtcp, int *via_ice, int use_srtp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03247">res_rtp_asterisk.c:3247</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af8a0d1a6b0e61b0fd209699d8a718226"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8a0d1a6b0e61b0fd209699d8a718226">&#9670;&nbsp;</a></span>rtp_terminate_pjproject()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_terminate_pjproject </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09599">9599</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00472">ast_pjproject_caching_pool_destroy()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00233">cachingpool</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">pj_thread_register_check()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00245">timer_terminate</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00242">timer_thread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09624">load_module()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09709">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l09600"></a><span class="lineno"> 9600</span>&#160;{</div><div class="line"><a name="l09601"></a><span class="lineno"> 9601</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a>();</div><div class="line"><a name="l09602"></a><span class="lineno"> 9602</span>&#160;</div><div class="line"><a name="l09603"></a><span class="lineno"> 9603</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af4ede498f08f6025306ce45fe163f298">timer_thread</a>) {</div><div class="line"><a name="l09604"></a><span class="lineno"> 9604</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a7fb15032ffb90f20278960e03525e479">timer_terminate</a> = 1;</div><div class="line"><a name="l09605"></a><span class="lineno"> 9605</span>&#160;      pj_thread_join(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af4ede498f08f6025306ce45fe163f298">timer_thread</a>);</div><div class="line"><a name="l09606"></a><span class="lineno"> 9606</span>&#160;      pj_thread_destroy(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af4ede498f08f6025306ce45fe163f298">timer_thread</a>);</div><div class="line"><a name="l09607"></a><span class="lineno"> 9607</span>&#160;   }</div><div class="line"><a name="l09608"></a><span class="lineno"> 9608</span>&#160;</div><div class="line"><a name="l09609"></a><span class="lineno"> 9609</span>&#160;   <a class="code" href="../../df/dd5/res__pjproject_8h.html#a2ce5e75f8b8e29d166785477a5034ebd">ast_pjproject_caching_pool_destroy</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a>);</div><div class="line"><a name="l09610"></a><span class="lineno"> 9610</span>&#160;   pj_shutdown();</div><div class="line"><a name="l09611"></a><span class="lineno"> 9611</span>&#160;}</div><div class="ttc" id="res__pjproject_8h_html_a2ce5e75f8b8e29d166785477a5034ebd"><div class="ttname"><a href="../../df/dd5/res__pjproject_8h.html#a2ce5e75f8b8e29d166785477a5034ebd">ast_pjproject_caching_pool_destroy</a></div><div class="ttdeci">void ast_pjproject_caching_pool_destroy(pj_caching_pool *cp)</div><div class="ttdoc">Destroy caching pool factory and all cached pools. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/deb/res__pjproject_8c_source.html#l00472">res_pjproject.c:472</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a12d9cba0dfd29f12cf2f87a4ab1252e2"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a></div><div class="ttdeci">static pj_caching_pool cachingpool</div><div class="ttdoc">Pool factory used by pjlib to allocate memory. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00233">res_rtp_asterisk.c:233</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4884315209af5f6ecb90ba9ef0a70344"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a></div><div class="ttdeci">static void pj_thread_register_check(void)</div><div class="ttdoc">Function used to check if the calling thread is registered with pjlib. If it is not it will be regist...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">res_rtp_asterisk.c:865</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a7fb15032ffb90f20278960e03525e479"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a7fb15032ffb90f20278960e03525e479">timer_terminate</a></div><div class="ttdeci">static int timer_terminate</div><div class="ttdoc">Used to tell the timer thread to terminate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00245">res_rtp_asterisk.c:245</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af4ede498f08f6025306ce45fe163f298"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af4ede498f08f6025306ce45fe163f298">timer_thread</a></div><div class="ttdeci">static pj_thread_t * timer_thread</div><div class="ttdoc">Thread executing the timer heap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00242">res_rtp_asterisk.c:242</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a227f7cf18ced801d02a072ac3f8d1d1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a227f7cf18ced801d02a072ac3f8d1d1e">&#9670;&nbsp;</a></span>rtp_transport_wide_cc_feedback_produce()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtp_transport_wide_cc_feedback_produce </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06900">6900</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02873">ast_debug_rtcp</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00548">ast_rtp_instance_get_channel_id()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00311">AST_RTP_RTCP_FMT_TRANSPORT_WIDE_CC</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00297">AST_RTP_RTCP_RTPFB</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00078">ast_tvdiff_us()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00573">AST_VECTOR_ELEM_CLEANUP_NOOP</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00670">AST_VECTOR_GET_ADDR</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00627">AST_VECTOR_RESET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00342">rtp_transport_wide_cc_packet_statistics::delta</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04876">put_unaligned_time24()</a>, <a class="el" href="../../d2/d1e/unaligned_8h_source.html#l00065">put_unaligned_uint16()</a>, <a class="el" href="../../d2/d1e/unaligned_8h_source.html#l00058">put_unaligned_uint32()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00340">rtp_transport_wide_cc_packet_statistics::received</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03303">rtcp_sendto()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06859">rtp_transport_wide_cc_feedback_status_append()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00338">rtp_transport_wide_cc_packet_statistics::seqno</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00287">statistics()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">ast_rtp::themssrc</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04392">timeval2ntp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07087">rtp_instance_parse_transport_wide_cc()</a>.</p>
<div class="fragment"><div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;{</div><div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance = (<span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *) <a class="code" href="../../df/d7a/structast__rtp__instance.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *rtcpheader;</div><div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;   <span class="keywordtype">char</span> bdata[1024];</div><div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html">rtp_transport_wide_cc_packet_statistics</a> *first_packet;</div><div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html">rtp_transport_wide_cc_packet_statistics</a> *previous_packet;</div><div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;   <span class="keywordtype">int</span> status_vector_chunk_bits = 14;</div><div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;   uint16_t status_vector_chunk = (1 &lt;&lt; 15) | (1 &lt;&lt; 14);</div><div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;   <span class="keywordtype">int</span> run_length_chunk_count = 0;</div><div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;   <span class="keywordtype">int</span> run_length_chunk_status = -1;</div><div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;   <span class="keywordtype">int</span> packet_len = 20;</div><div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;   <span class="keywordtype">int</span> delta_len = 0;</div><div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;   <span class="keywordtype">int</span> packet_count = 0;</div><div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> received_msw;</div><div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> received_lsw;</div><div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> remote_address = { { 0, } };</div><div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;   <span class="keywordtype">int</span> ice;</div><div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> large_delta_count = 0;</div><div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> small_delta_count = 0;</div><div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lost_count = 0;</div><div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;</div><div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;   <span class="keywordflow">if</span> (!rtp || !rtp-&gt;rtcp || rtp-&gt;transport_wide_cc.schedid == -1) {</div><div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(instance, -1);</div><div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;   }</div><div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;</div><div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;</div><div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;   <span class="comment">/* If no packets have been received then do nothing */</span></div><div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;rtp-&gt;transport_wide_cc.packet_statistics)) {</div><div class="line"><a name="l06934"></a><span class="lineno"> 6934</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160;      <span class="keywordflow">return</span> 1000;</div><div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;   }</div><div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160;</div><div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;   rtcpheader = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)bdata;</div><div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;</div><div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160;   <span class="comment">/* The first packet in the vector acts as our base sequence number and reference time */</span></div><div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;   first_packet = <a class="code" href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a>(&amp;rtp-&gt;transport_wide_cc.packet_statistics, 0);</div><div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;   previous_packet = first_packet;</div><div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;</div><div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;   <span class="comment">/* We go through each packet that we have statistics for, adding it either to a status</span></div><div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;<span class="comment">    * vector chunk or a run length chunk. The code tries to be as efficient as possible to</span></div><div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;<span class="comment">    * reduce packet size and will favor run length chunks when it makes sense.</span></div><div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;rtp-&gt;transport_wide_cc.packet_statistics); ++i) {</div><div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html">rtp_transport_wide_cc_packet_statistics</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>;</div><div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;      <span class="keywordtype">int</span> lost = 0;</div><div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;      <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;</div><div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;      statistics = <a class="code" href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a>(&amp;rtp-&gt;transport_wide_cc.packet_statistics, i);</div><div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;</div><div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;      packet_count++;</div><div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;</div><div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160;      <span class="keywordflow">if</span> (first_packet != statistics) {</div><div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;         <span class="comment">/* The vector stores statistics in a sorted fashion based on the sequence</span></div><div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;<span class="comment">          * number. This ensures we can detect any packets that have been lost/not</span></div><div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;<span class="comment">          * received by comparing the sequence numbers.</span></div><div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;         lost = statistics-&gt;<a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#aac99560397aa1e3e12367419ed305d11">seqno</a> - (previous_packet-&gt;<a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#aac99560397aa1e3e12367419ed305d11">seqno</a> + 1);</div><div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;         lost_count += lost;</div><div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;      }</div><div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;</div><div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;      <span class="keywordflow">while</span> (lost) {</div><div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;         <span class="comment">/* We append a not received status until all the lost packets have been accounted for */</span></div><div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a43ba6fd9ff27756fb87ea9999d565c80">rtp_transport_wide_cc_feedback_status_append</a>(rtcpheader, &amp;packet_len, &amp;status_vector_chunk_bits,</div><div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;            &amp;status_vector_chunk, &amp;run_length_chunk_count, &amp;run_length_chunk_status, 0);</div><div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;         packet_count++;</div><div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;</div><div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;         <span class="comment">/* If there is no more room left for storing packets stop now, we leave 20</span></div><div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160;<span class="comment">          * extra bits at the end just in case.</span></div><div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;         <span class="keywordflow">if</span> (packet_len + delta_len + 20 &gt; <span class="keyword">sizeof</span>(bdata)) {</div><div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;            res = -1;</div><div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;         }</div><div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;</div><div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;         lost--;</div><div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;      }</div><div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;</div><div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;      <span class="comment">/* If the lost packet appending bailed out because we have no more space, then exit here too */</span></div><div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;      <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160;      }</div><div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;</div><div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;      <span class="comment">/* Per the spec the delta is in increments of 250 */</span></div><div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;      statistics-&gt;<a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#a1dfcb70b9229f2da17dd5922b87ecf2c">delta</a> = <a class="code" href="../../de/df7/time_8h.html#a14d1e085a2d8580052c28807e762bfad">ast_tvdiff_us</a>(statistics-&gt;<a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#a2b078c65ed0f81356119070a02330f58">received</a>, previous_packet-&gt;<a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#a2b078c65ed0f81356119070a02330f58">received</a>) / 250;</div><div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;</div><div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;      <span class="comment">/* Based on the delta determine the status of this packet */</span></div><div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;      <span class="keywordflow">if</span> (statistics-&gt;<a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#a1dfcb70b9229f2da17dd5922b87ecf2c">delta</a> &lt; 0 || statistics-&gt;<a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#a1dfcb70b9229f2da17dd5922b87ecf2c">delta</a> &gt; 127) {</div><div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;         <span class="comment">/* Large or negative delta */</span></div><div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a43ba6fd9ff27756fb87ea9999d565c80">rtp_transport_wide_cc_feedback_status_append</a>(rtcpheader, &amp;packet_len, &amp;status_vector_chunk_bits,</div><div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;            &amp;status_vector_chunk, &amp;run_length_chunk_count, &amp;run_length_chunk_status, 2);</div><div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;         delta_len += 2;</div><div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;         large_delta_count++;</div><div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;         <span class="comment">/* Small delta */</span></div><div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a43ba6fd9ff27756fb87ea9999d565c80">rtp_transport_wide_cc_feedback_status_append</a>(rtcpheader, &amp;packet_len, &amp;status_vector_chunk_bits,</div><div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;            &amp;status_vector_chunk, &amp;run_length_chunk_count, &amp;run_length_chunk_status, 1);</div><div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;         delta_len += 1;</div><div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;         small_delta_count++;</div><div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;      }</div><div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;</div><div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;      previous_packet = <a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>;</div><div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;</div><div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;      <span class="comment">/* If there is no more room left in the packet stop handling of any subsequent packets */</span></div><div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;      <span class="keywordflow">if</span> (packet_len + delta_len + 20 &gt; <span class="keyword">sizeof</span>(bdata)) {</div><div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;      }</div><div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;   }</div><div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;</div><div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;   <span class="keywordflow">if</span> (status_vector_chunk_bits != 14) {</div><div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;      <span class="comment">/* If the status vector chunk has packets in it then place it in the RTCP packet */</span></div><div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#a31285bcf21169ef487fa4431931b38d2">put_unaligned_uint16</a>(rtcpheader + packet_len, htons(status_vector_chunk));</div><div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160;      packet_len += 2;</div><div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (run_length_chunk_count) {</div><div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;      <span class="comment">/* If there is a run length chunk in progress then place it in the RTCP packet */</span></div><div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;      <a class="code" href="../../d2/d1e/unaligned_8h.html#a31285bcf21169ef487fa4431931b38d2">put_unaligned_uint16</a>(rtcpheader + packet_len, htons((0 &lt;&lt; 15) | (run_length_chunk_status &lt;&lt; 13) | run_length_chunk_count));</div><div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;      packet_len += 2;</div><div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160;   }</div><div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;</div><div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;   <span class="comment">/* We iterate again to build delta chunks */</span></div><div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;rtp-&gt;transport_wide_cc.packet_statistics); ++i) {</div><div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html">rtp_transport_wide_cc_packet_statistics</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>;</div><div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;</div><div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;      statistics = <a class="code" href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a>(&amp;rtp-&gt;transport_wide_cc.packet_statistics, i);</div><div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;</div><div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160;      <span class="keywordflow">if</span> (statistics-&gt;<a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#a1dfcb70b9229f2da17dd5922b87ecf2c">delta</a> &lt; 0 || statistics-&gt;<a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#a1dfcb70b9229f2da17dd5922b87ecf2c">delta</a> &gt; 127) {</div><div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160;         <span class="comment">/* We need 2 bytes to store this delta */</span></div><div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160;         <a class="code" href="../../d2/d1e/unaligned_8h.html#a31285bcf21169ef487fa4431931b38d2">put_unaligned_uint16</a>(rtcpheader + packet_len, htons(statistics-&gt;<a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#a1dfcb70b9229f2da17dd5922b87ecf2c">delta</a>));</div><div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;         packet_len += 2;</div><div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160;         <span class="comment">/* We can store this delta in 1 byte */</span></div><div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;         rtcpheader[packet_len] = statistics-&gt;<a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#a1dfcb70b9229f2da17dd5922b87ecf2c">delta</a>;</div><div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160;         packet_len += 1;</div><div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;      }</div><div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;</div><div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;      <span class="comment">/* If this is the last packet handled by the run length chunk or status vector chunk code</span></div><div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;<span class="comment">       * then we can go no further.</span></div><div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;      <span class="keywordflow">if</span> (statistics == previous_packet) {</div><div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;      }</div><div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;   }</div><div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;</div><div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;   <span class="comment">/* Zero pad the end of the packet */</span></div><div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;   <span class="keywordflow">while</span> (packet_len % 4) {</div><div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;      rtcpheader[packet_len++] = 0;</div><div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;   }</div><div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160;</div><div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;   <span class="comment">/* Add the general RTCP header information */</span></div><div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader, htonl((2 &lt;&lt; 30) | (<a class="code" href="../../d5/dde/rtp__engine_8h.html#ae8b37e5dfbe97a9b4273783530d53e2a">AST_RTP_RTCP_FMT_TRANSPORT_WIDE_CC</a> &lt;&lt; 24)</div><div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;      | (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a4a9c0900c44c60bd881c22ff57169a1a">AST_RTP_RTCP_RTPFB</a> &lt;&lt; 16) | ((packet_len / 4) - 1)));</div><div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + 4, htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>));</div><div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + 8, htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">themssrc</a>));</div><div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;</div><div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160;   <span class="comment">/* Add the transport-cc specific header information */</span></div><div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + 12, htonl((first_packet-&gt;<a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#aac99560397aa1e3e12367419ed305d11">seqno</a> &lt;&lt; 16) | packet_count));</div><div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;</div><div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae07b5d23a23d4d09988c4a1c5d477d14">timeval2ntp</a>(first_packet-&gt;<a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#a2b078c65ed0f81356119070a02330f58">received</a>, &amp;received_msw, &amp;received_lsw);</div><div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3fa030a6094ca05ea43a3b49f14e5cc3">put_unaligned_time24</a>(rtcpheader + 16, received_msw, received_lsw);</div><div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;   rtcpheader[19] = rtp-&gt;transport_wide_cc.feedback_count;</div><div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160;</div><div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;   <span class="comment">/* The packet is now fully constructed so send it out */</span></div><div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;remote_address, &amp;rtp-&gt;rtcp-&gt;them);</div><div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160;</div><div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(2, <span class="stringliteral">&quot;(%p) RTCP sending transport-cc feedback packet of size &#39;%d&#39; on &#39;%s&#39; with packet count of %d (small = %d, large = %d, lost = %d)\n&quot;</span>,</div><div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;      instance, packet_len, <a class="code" href="../../d5/dde/rtp__engine_8h.html#aedb3ea08a82c48e8817dd7458319d22f">ast_rtp_instance_get_channel_id</a>(instance), packet_count, small_delta_count, large_delta_count, lost_count);</div><div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;</div><div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;   res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a849b3d418fbe0446b4e9289a9ef94397">rtcp_sendto</a>(instance, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)rtcpheader, packet_len, 0, &amp;remote_address, &amp;ice);</div><div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;RTCP transport-cc feedback error to %s due to %s\n&quot;</span>,</div><div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;remote_address), strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;   }</div><div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;</div><div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a0e59aa540254f87575cb1d28821bbd1f">AST_VECTOR_RESET</a>(&amp;rtp-&gt;transport_wide_cc.packet_statistics, <a class="code" href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a>);</div><div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160;</div><div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;   rtp-&gt;transport_wide_cc.feedback_count++;</div><div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;</div><div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;</div><div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;   <span class="keywordflow">return</span> 1000;</div><div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="structrtp__transport__wide__cc__packet__statistics_html"><div class="ttname"><a href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html">rtp_transport_wide_cc_packet_statistics</a></div><div class="ttdoc">Packet statistics (used for transport-cc) </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00336">res_rtp_asterisk.c:336</a></div></div>
<div class="ttc" id="unaligned_8h_html_a31285bcf21169ef487fa4431931b38d2"><div class="ttname"><a href="../../d2/d1e/unaligned_8h.html#a31285bcf21169ef487fa4431931b38d2">put_unaligned_uint16</a></div><div class="ttdeci">static void put_unaligned_uint16(void *p, unsigned short datum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1e/unaligned_8h_source.html#l00065">unaligned.h:65</a></div></div>
<div class="ttc" id="unaligned_8h_html_ae0b7823a3fab76dbec84f308adeb7f5a"><div class="ttname"><a href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a></div><div class="ttdeci">static void put_unaligned_uint32(void *p, unsigned int datum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1e/unaligned_8h_source.html#l00058">unaligned.h:58</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ae07b5d23a23d4d09988c4a1c5d477d14"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae07b5d23a23d4d09988c4a1c5d477d14">timeval2ntp</a></div><div class="ttdeci">static void timeval2ntp(struct timeval tv, unsigned int *msw, unsigned int *lsw)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04392">res_rtp_asterisk.c:4392</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a43ba6fd9ff27756fb87ea9999d565c80"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a43ba6fd9ff27756fb87ea9999d565c80">rtp_transport_wide_cc_feedback_status_append</a></div><div class="ttdeci">static void rtp_transport_wide_cc_feedback_status_append(unsigned char *rtcpheader, int *packet_len, int *status_vector_chunk_bits, uint16_t *status_vector_chunk, int *run_length_chunk_count, int *run_length_chunk_status, int status)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06859">res_rtp_asterisk.c:6859</a></div></div>
<div class="ttc" id="structrtp__transport__wide__cc__packet__statistics_html_aac99560397aa1e3e12367419ed305d11"><div class="ttname"><a href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#aac99560397aa1e3e12367419ed305d11">rtp_transport_wide_cc_packet_statistics::seqno</a></div><div class="ttdeci">unsigned int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00338">res_rtp_asterisk.c:338</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_aedb3ea08a82c48e8817dd7458319d22f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#aedb3ea08a82c48e8817dd7458319d22f">ast_rtp_instance_get_channel_id</a></div><div class="ttdeci">const char * ast_rtp_instance_get_channel_id(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the unique ID of the channel that owns this RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00548">rtp_engine.c:548</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="vector_8h_html_af613aa5306ff5ad101734708861d634e"><div class="ttname"><a href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a></div><div class="ttdeci">#define AST_VECTOR_GET_ADDR(vec, idx)</div><div class="ttdoc">Get an address of element in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00670">vector.h:670</a></div></div>
<div class="ttc" id="vector_8h_html_a1885c25b9d767a53d1df9b641f53951a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a></div><div class="ttdeci">#define AST_VECTOR_ELEM_CLEANUP_NOOP(elem)</div><div class="ttdoc">Vector element cleanup that does nothing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00573">vector.h:573</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga0915be7e2d33217121465cfb689318fd"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a></div><div class="ttdeci">#define ast_debug_rtcp(sublevel,...)</div><div class="ttdoc">Log debug level RTCP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02873">rtp_engine.h:2873</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4a9c0900c44c60bd881c22ff57169a1a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4a9c0900c44c60bd881c22ff57169a1a">AST_RTP_RTCP_RTPFB</a></div><div class="ttdeci">#define AST_RTP_RTCP_RTPFB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00297">rtp_engine.h:297</a></div></div>
<div class="ttc" id="structast__rtp_html_afe92c8ff0d37afbf84f8715f4144ca27"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">ast_rtp::themssrc</a></div><div class="ttdeci">unsigned int themssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">res_rtp_asterisk.c:376</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ae8b37e5dfbe97a9b4273783530d53e2a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ae8b37e5dfbe97a9b4273783530d53e2a">AST_RTP_RTCP_FMT_TRANSPORT_WIDE_CC</a></div><div class="ttdeci">#define AST_RTP_RTCP_FMT_TRANSPORT_WIDE_CC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00311">rtp_engine.h:311</a></div></div>
<div class="ttc" id="structrtp__transport__wide__cc__packet__statistics_html_a2b078c65ed0f81356119070a02330f58"><div class="ttname"><a href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#a2b078c65ed0f81356119070a02330f58">rtp_transport_wide_cc_packet_statistics::received</a></div><div class="ttdeci">struct timeval received</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00340">res_rtp_asterisk.c:340</a></div></div>
<div class="ttc" id="vector_8h_html_a0e59aa540254f87575cb1d28821bbd1f"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0e59aa540254f87575cb1d28821bbd1f">AST_VECTOR_RESET</a></div><div class="ttdeci">#define AST_VECTOR_RESET(vec, cleanup)</div><div class="ttdoc">Reset vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00627">vector.h:627</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a735984d41155bc1032e09bece8f8d66d">ast_rtp_instance::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00193">rtp_engine.c:193</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3fa030a6094ca05ea43a3b49f14e5cc3"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3fa030a6094ca05ea43a3b49f14e5cc3">put_unaligned_time24</a></div><div class="ttdeci">static void put_unaligned_time24(void *p, uint32_t time_msw, uint32_t time_lsw)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04876">res_rtp_asterisk.c:4876</a></div></div>
<div class="ttc" id="structrtp__transport__wide__cc__packet__statistics_html_a1dfcb70b9229f2da17dd5922b87ecf2c"><div class="ttname"><a href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#a1dfcb70b9229f2da17dd5922b87ecf2c">rtp_transport_wide_cc_packet_statistics::delta</a></div><div class="ttdeci">int delta</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00342">res_rtp_asterisk.c:342</a></div></div>
<div class="ttc" id="time_8h_html_a14d1e085a2d8580052c28807e762bfad"><div class="ttname"><a href="../../de/df7/time_8h.html#a14d1e085a2d8580052c28807e762bfad">ast_tvdiff_us</a></div><div class="ttdeci">int64_t ast_tvdiff_us(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in microseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00078">time.h:78</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a849b3d418fbe0446b4e9289a9ef94397"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a849b3d418fbe0446b4e9289a9ef94397">rtcp_sendto</a></div><div class="ttdeci">static int rtcp_sendto(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int *ice)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03303">res_rtp_asterisk.c:3303</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a43ba6fd9ff27756fb87ea9999d565c80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43ba6fd9ff27756fb87ea9999d565c80">&#9670;&nbsp;</a></span>rtp_transport_wide_cc_feedback_status_append()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_transport_wide_cc_feedback_status_append </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>rtcpheader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>packet_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>status_vector_chunk_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>status_vector_chunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>run_length_chunk_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>run_length_chunk_status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06859">6859</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d1e/unaligned_8h_source.html#l00065">put_unaligned_uint16()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06830">rtp_transport_wide_cc_feedback_status_vector_append()</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06900">rtp_transport_wide_cc_feedback_produce()</a>.</p>
<div class="fragment"><div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;{</div><div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;   <span class="keywordflow">if</span> (*run_length_chunk_status != <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>) {</div><div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;      <span class="keywordflow">while</span> (*run_length_chunk_count &gt; 0 &amp;&amp; *run_length_chunk_count &lt; 8) {</div><div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;         <span class="comment">/* Realistically it only makes sense to use a run length chunk if there were 8 or more</span></div><div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;<span class="comment">          * consecutive packets of the same type, otherwise we could end up making the packet larger</span></div><div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;<span class="comment">          * if we have lots of small blocks of the same type. To help with this we backfill the status</span></div><div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;<span class="comment">          * vector (since it always represents 7 packets). Best case we end up with only that single</span></div><div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;<span class="comment">          * status vector and the rest are run length chunks.</span></div><div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#afc3b2672463424b91af89934466daef1">rtp_transport_wide_cc_feedback_status_vector_append</a>(rtcpheader, packet_len, status_vector_chunk_bits,</div><div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;            status_vector_chunk, *run_length_chunk_status);</div><div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;         *run_length_chunk_count -= 1;</div><div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;      }</div><div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;</div><div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;      <span class="keywordflow">if</span> (*run_length_chunk_count) {</div><div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;         <span class="comment">/* There is a run length chunk which needs to be written out */</span></div><div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;         <a class="code" href="../../d2/d1e/unaligned_8h.html#a31285bcf21169ef487fa4431931b38d2">put_unaligned_uint16</a>(rtcpheader + *packet_len, htons((0 &lt;&lt; 15) | (*run_length_chunk_status &lt;&lt; 13) | *run_length_chunk_count));</div><div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;         *packet_len += 2;</div><div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;      }</div><div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;</div><div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;      <span class="comment">/* In all cases the run length chunk has to be reset */</span></div><div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;      *run_length_chunk_count = 0;</div><div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;      *run_length_chunk_status = -1;</div><div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;</div><div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;      <span class="keywordflow">if</span> (*status_vector_chunk_bits == 14) {</div><div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;         <span class="comment">/* We aren&#39;t in the middle of a status vector so we can try for a run length chunk */</span></div><div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;         *run_length_chunk_status = <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;         *run_length_chunk_count = 1;</div><div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;         <span class="comment">/* We&#39;re doing a status vector so populate it accordingly */</span></div><div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;         <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#afc3b2672463424b91af89934466daef1">rtp_transport_wide_cc_feedback_status_vector_append</a>(rtcpheader, packet_len, status_vector_chunk_bits,</div><div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;            status_vector_chunk, <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>);</div><div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;      }</div><div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;      <span class="comment">/* This is easy, the run length chunk count can just get bumped up */</span></div><div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;      *run_length_chunk_count += 1;</div><div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;   }</div><div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_afc3b2672463424b91af89934466daef1"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#afc3b2672463424b91af89934466daef1">rtp_transport_wide_cc_feedback_status_vector_append</a></div><div class="ttdeci">static void rtp_transport_wide_cc_feedback_status_vector_append(unsigned char *rtcpheader, int *packet_len, int *status_vector_chunk_bits, uint16_t *status_vector_chunk, int status)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06830">res_rtp_asterisk.c:6830</a></div></div>
<div class="ttc" id="unaligned_8h_html_a31285bcf21169ef487fa4431931b38d2"><div class="ttname"><a href="../../d2/d1e/unaligned_8h.html#a31285bcf21169ef487fa4431931b38d2">put_unaligned_uint16</a></div><div class="ttdeci">static void put_unaligned_uint16(void *p, unsigned short datum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1e/unaligned_8h_source.html#l00065">unaligned.h:65</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afc3b2672463424b91af89934466daef1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc3b2672463424b91af89934466daef1">&#9670;&nbsp;</a></span>rtp_transport_wide_cc_feedback_status_vector_append()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_transport_wide_cc_feedback_status_vector_append </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>rtcpheader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>packet_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>status_vector_chunk_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>status_vector_chunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06830">6830</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d1e/unaligned_8h_source.html#l00065">put_unaligned_uint16()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06859">rtp_transport_wide_cc_feedback_status_append()</a>.</p>
<div class="fragment"><div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;{</div><div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160;   <span class="comment">/* Appending this status will use up 2 bits */</span></div><div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;   *status_vector_chunk_bits -= 2;</div><div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;</div><div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;   <span class="comment">/* We calculate which bits we want to update the status of. Since a status vector</span></div><div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;<span class="comment">    * is 16 bits we take away 2 (for the header), and then we take away any that have</span></div><div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;<span class="comment">    * already been used.</span></div><div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;   *status_vector_chunk |= (<a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a> &lt;&lt; (16 - 2 - (14 - *status_vector_chunk_bits)));</div><div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;</div><div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;   <span class="comment">/* If there are still bits available we can return early */</span></div><div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;   <span class="keywordflow">if</span> (*status_vector_chunk_bits) {</div><div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160;   }</div><div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;</div><div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160;   <span class="comment">/* Otherwise we have to place this chunk into the packet */</span></div><div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#a31285bcf21169ef487fa4431931b38d2">put_unaligned_uint16</a>(rtcpheader + *packet_len, htons(*status_vector_chunk));</div><div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;   *status_vector_chunk_bits = 14;</div><div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;</div><div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;   <span class="comment">/* The first bit being 1 indicates that this is a status vector chunk and the second</span></div><div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160;<span class="comment">    * bit being 1 indicates that we are using 2 bits to represent each status for a</span></div><div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;<span class="comment">    * packet.</span></div><div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;   *status_vector_chunk = (1 &lt;&lt; 15) | (1 &lt;&lt; 14);</div><div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;   *packet_len += 2;</div><div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;}</div><div class="ttc" id="unaligned_8h_html_a31285bcf21169ef487fa4431931b38d2"><div class="ttname"><a href="../../d2/d1e/unaligned_8h.html#a31285bcf21169ef487fa4431931b38d2">put_unaligned_uint16</a></div><div class="ttdeci">static void put_unaligned_uint16(void *p, unsigned short datum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1e/unaligned_8h_source.html#l00065">unaligned.h:65</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac5fc4402a4674c499f27f76d55ec2f83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5fc4402a4674c499f27f76d55ec2f83">&#9670;&nbsp;</a></span>rtp_transport_wide_cc_packet_statistics_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtp_transport_wide_cc_packet_statistics_cmp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html">rtp_transport_wide_cc_packet_statistics</a>&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html">rtp_transport_wide_cc_packet_statistics</a>&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06824">6824</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00338">rtp_transport_wide_cc_packet_statistics::seqno</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07087">rtp_instance_parse_transport_wide_cc()</a>.</p>
<div class="fragment"><div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;{</div><div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;   <span class="keywordflow">return</span> a.<a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#aac99560397aa1e3e12367419ed305d11">seqno</a> - b.<a class="code" href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#aac99560397aa1e3e12367419ed305d11">seqno</a>;</div><div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160;}</div><div class="ttc" id="structrtp__transport__wide__cc__packet__statistics_html_aac99560397aa1e3e12367419ed305d11"><div class="ttname"><a href="../../d4/d1a/structrtp__transport__wide__cc__packet__statistics.html#aac99560397aa1e3e12367419ed305d11">rtp_transport_wide_cc_packet_statistics::seqno</a></div><div class="ttdeci">unsigned int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00338">res_rtp_asterisk.c:338</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa46a219704b72f7e612092e541dd29ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa46a219704b72f7e612092e541dd29ce">&#9670;&nbsp;</a></span>rtp_unload_acl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_unload_acl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a> *&#160;</td>
          <td class="paramname"><em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/da4/structast__acl__list.html">ast_acl_list</a> **&#160;</td>
          <td class="paramname"><em>acl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03471">3471</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/db8/acl_8c_source.html#l00233">ast_free_acl_list()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00234">ast_rwlock_wrlock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09709">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;{</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(lock);</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;   *acl = <a class="code" href="../../d5/d59/acl_8h.html#a7fc796b79184fa0f4340037e5c1445c6">ast_free_acl_list</a>(*acl);</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(lock);</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;}</div><div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="acl_8h_html_a7fc796b79184fa0f4340037e5c1445c6"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a7fc796b79184fa0f4340037e5c1445c6">ast_free_acl_list</a></div><div class="ttdeci">struct ast_acl_list * ast_free_acl_list(struct ast_acl_list *acl)</div><div class="ttdoc">Free a list of ACLs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l00233">acl.c:233</a></div></div>
<div class="ttc" id="lock_8h_html_a045bd81ceab2de81e42af338ad7cf121"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a></div><div class="ttdeci">#define ast_rwlock_wrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00234">lock.h:234</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af468e412cbb41cc4b890cf12aebf02fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af468e412cbb41cc4b890cf12aebf02fe">&#9670;&nbsp;</a></span>rtp_write_rtcp_fir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_write_rtcp_fir </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>remote_address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05160">5160</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04579">ast_rtcp_calculate_sr_rr_statistics()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04699">ast_rtcp_generate_compound_prefix()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03474">ast_rtp_rtcp_report_alloc()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d2/d1e/unaligned_8h_source.html#l00058">put_unaligned_uint32()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00132">RTCP_PT_PSFB</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03303">rtcp_sendto()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">ast_rtp::themssrc</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">ast_rtp::themssrc_valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05289">ast_rtp_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;{</div><div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *rtcpheader;</div><div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> bdata[1024];</div><div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;   <span class="keywordtype">int</span> packet_len = 0;</div><div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;   <span class="keywordtype">int</span> fir_len = 20;</div><div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;   <span class="keywordtype">int</span> ice;</div><div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;   <span class="keywordtype">int</span> sr;</div><div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *, rtcp_report,</div><div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a199d704f3867124fe0f56f4c8856a0b4">ast_rtp_rtcp_report_alloc</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">themssrc_valid</a> ? 1 : 0),</div><div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;</div><div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;   <span class="keywordflow">if</span> (!rtp || !rtp-&gt;rtcp) {</div><div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;   }</div><div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;</div><div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;rtp-&gt;rtcp-&gt;them) || rtp-&gt;rtcp-&gt;schedid &lt; 0) {</div><div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;<span class="comment">       * RTCP was stopped.</span></div><div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;   }</div><div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;</div><div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;   <span class="keywordflow">if</span> (!rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">themssrc_valid</a>) {</div><div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;      <span class="comment">/* We don&#39;t know their SSRC value so we don&#39;t know who to update. */</span></div><div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;   }</div><div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;</div><div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;   <span class="comment">/* Prepare RTCP FIR (PT=206, FMT=4) */</span></div><div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;   rtp-&gt;rtcp-&gt;firseq++;</div><div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;   <span class="keywordflow">if</span>(rtp-&gt;rtcp-&gt;firseq == 256) {</div><div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;      rtp-&gt;rtcp-&gt;firseq = 0;</div><div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;   }</div><div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;</div><div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;   rtcpheader = bdata;</div><div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;</div><div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;   res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a6a3e89b50705b66f142eaaff7d3fe52d">ast_rtcp_generate_compound_prefix</a>(instance, rtcpheader, rtcp_report, &amp;sr);</div><div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;</div><div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;   <span class="keywordflow">if</span> (res == 0 || res == 1) {</div><div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;   }</div><div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;</div><div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;   packet_len += res;</div><div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;</div><div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + packet_len + 0, htonl((2 &lt;&lt; 30) | (4 &lt;&lt; 24) | (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a711189b19386915beec87d8edddb3464">RTCP_PT_PSFB</a> &lt;&lt; 16) | ((fir_len/4)-1)));</div><div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + packet_len + 4, htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>));</div><div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + packet_len + 8, htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">themssrc</a>));</div><div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + packet_len + 12, htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">themssrc</a>)); <span class="comment">/* FCI: SSRC */</span></div><div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + packet_len + 16, htonl(rtp-&gt;rtcp-&gt;firseq &lt;&lt; 24)); <span class="comment">/* FCI: Sequence number */</span></div><div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;   res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a849b3d418fbe0446b4e9289a9ef94397">rtcp_sendto</a>(instance, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)rtcpheader, packet_len + fir_len, 0, rtp-&gt;bundled ? remote_address : &amp;rtp-&gt;rtcp-&gt;them, &amp;ice);</div><div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;RTCP FIR transmission error: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac39a35490fcf802b678e67b448eb381c">ast_rtcp_calculate_sr_rr_statistics</a>(instance, rtcp_report, rtp-&gt;bundled ? *remote_address : rtp-&gt;rtcp-&gt;them, ice, sr);</div><div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;   }</div><div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;</div><div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;}</div><div class="ttc" id="structast__rtp__rtcp__report_html"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a></div><div class="ttdoc">An object that represents data sent during a SR/RR RTCP report. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00331">rtp_engine.h:331</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a6a3e89b50705b66f142eaaff7d3fe52d"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a6a3e89b50705b66f142eaaff7d3fe52d">ast_rtcp_generate_compound_prefix</a></div><div class="ttdeci">static int ast_rtcp_generate_compound_prefix(struct ast_rtp_instance *instance, unsigned char *rtcpheader, struct ast_rtp_rtcp_report *report, int *sr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04699">res_rtp_asterisk.c:4699</a></div></div>
<div class="ttc" id="unaligned_8h_html_ae0b7823a3fab76dbec84f308adeb7f5a"><div class="ttname"><a href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a></div><div class="ttdeci">static void put_unaligned_uint32(void *p, unsigned int datum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1e/unaligned_8h_source.html#l00058">unaligned.h:58</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structast__rtp_html_a7aaf7fb2b26e335304c8a89cc36aac00"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">ast_rtp::themssrc_valid</a></div><div class="ttdeci">unsigned int themssrc_valid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">res_rtp_asterisk.c:377</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a199d704f3867124fe0f56f4c8856a0b4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a199d704f3867124fe0f56f4c8856a0b4">ast_rtp_rtcp_report_alloc</a></div><div class="ttdeci">struct ast_rtp_rtcp_report * ast_rtp_rtcp_report_alloc(unsigned int report_blocks)</div><div class="ttdoc">Allocate an ao2 ref counted instance of ast_rtp_rtcp_report. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03474">rtp_engine.c:3474</a></div></div>
<div class="ttc" id="structast__rtp_html_afe92c8ff0d37afbf84f8715f4144ca27"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#afe92c8ff0d37afbf84f8715f4144ca27">ast_rtp::themssrc</a></div><div class="ttdeci">unsigned int themssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00376">res_rtp_asterisk.c:376</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac39a35490fcf802b678e67b448eb381c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac39a35490fcf802b678e67b448eb381c">ast_rtcp_calculate_sr_rr_statistics</a></div><div class="ttdeci">static int ast_rtcp_calculate_sr_rr_statistics(struct ast_rtp_instance *instance, struct ast_rtp_rtcp_report *rtcp_report, struct ast_sockaddr remote_address, int ice, int sr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04579">res_rtp_asterisk.c:4579</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a849b3d418fbe0446b4e9289a9ef94397"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a849b3d418fbe0446b4e9289a9ef94397">rtcp_sendto</a></div><div class="ttdeci">static int rtcp_sendto(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int *ice)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03303">res_rtp_asterisk.c:3303</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a711189b19386915beec87d8edddb3464"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a711189b19386915beec87d8edddb3464">RTCP_PT_PSFB</a></div><div class="ttdeci">#define RTCP_PT_PSFB</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00132">res_rtp_asterisk.c:132</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af265fda7047566e1da9fa1b391ec3c31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af265fda7047566e1da9fa1b391ec3c31">&#9670;&nbsp;</a></span>rtp_write_rtcp_psfb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_write_rtcp_psfb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>remote_address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05222">5222</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02873">ast_debug_rtcp</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04579">ast_rtcp_calculate_sr_rr_statistics()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04699">ast_rtcp_generate_compound_prefix()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00716">ast_rtp_instance_get_prop()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00131">AST_RTP_PROPERTY_REMB</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00309">AST_RTP_RTCP_FMT_REMB</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03474">ast_rtp_rtcp_report_alloc()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00351">ast_rtp_rtcp_feedback_remb::br_exp</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00352">ast_rtp_rtcp_feedback_remb::br_mantissa</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00359">ast_rtp_rtcp_feedback::fmt</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d2/d1e/unaligned_8h_source.html#l00058">put_unaligned_uint32()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00361">ast_rtp_rtcp_feedback::remb</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00132">RTCP_PT_PSFB</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03303">rtcp_sendto()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">ast_rtp::ssrc</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">ast_rtp::themssrc_valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05289">ast_rtp_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;{</div><div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/dd3/structast__rtp__rtcp__feedback.html">ast_rtp_rtcp_feedback</a> *feedback = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *rtcpheader;</div><div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> bdata[1024];</div><div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;   <span class="keywordtype">int</span> remb_len = 24;</div><div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;   <span class="keywordtype">int</span> ice;</div><div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;   <span class="keywordtype">int</span> sr = 0;</div><div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;   <span class="keywordtype">int</span> packet_len = 0;</div><div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *, rtcp_report,</div><div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a199d704f3867124fe0f56f4c8856a0b4">ast_rtp_rtcp_report_alloc</a>(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">themssrc_valid</a> ? 1 : 0),</div><div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;</div><div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;   <span class="keywordflow">if</span> (feedback-&gt;<a class="code" href="../../d7/dd3/structast__rtp__rtcp__feedback.html#aa9cb6ed3e21d64ad26c61da877136ae0">fmt</a> != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a92dbab4f62cc24fc05ac849a2b2b0e5c">AST_RTP_RTCP_FMT_REMB</a>) {</div><div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP provided feedback frame of format %d to write, but only REMB is supported\n&quot;</span>,</div><div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;         instance, feedback-&gt;<a class="code" href="../../d7/dd3/structast__rtp__rtcp__feedback.html#aa9cb6ed3e21d64ad26c61da877136ae0">fmt</a>);</div><div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;   }</div><div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;</div><div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;   <span class="keywordflow">if</span> (!rtp || !rtp-&gt;rtcp) {</div><div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;   }</div><div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;</div><div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;   <span class="comment">/* If REMB support is not enabled don&#39;t send this RTCP packet */</span></div><div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914caf7d73e777eb2a69c79032cce56a3ca3b">AST_RTP_PROPERTY_REMB</a>)) {</div><div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a>(1, <span class="stringliteral">&quot;(%p) RTCP provided feedback REMB report to write, but REMB support not enabled\n&quot;</span>,</div><div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;         instance);</div><div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;   }</div><div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;</div><div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;rtp-&gt;rtcp-&gt;them) || rtp-&gt;rtcp-&gt;schedid &lt; 0) {</div><div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;<span class="comment">       * RTCP was stopped.</span></div><div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;   }</div><div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;</div><div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;   rtcpheader = bdata;</div><div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;</div><div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;   res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a6a3e89b50705b66f142eaaff7d3fe52d">ast_rtcp_generate_compound_prefix</a>(instance, rtcpheader, rtcp_report, &amp;sr);</div><div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;</div><div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;   <span class="keywordflow">if</span> (res == 0 || res == 1) {</div><div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;   }</div><div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;</div><div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;   packet_len += res;</div><div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;</div><div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + packet_len + 0, htonl((2 &lt;&lt; 30) | (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a92dbab4f62cc24fc05ac849a2b2b0e5c">AST_RTP_RTCP_FMT_REMB</a> &lt;&lt; 24) | (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a711189b19386915beec87d8edddb3464">RTCP_PT_PSFB</a> &lt;&lt; 16) | ((remb_len/4)-1)));</div><div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + packet_len + 4, htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>));</div><div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + packet_len + 8, htonl(0)); <span class="comment">/* Per the draft, this should always be 0 */</span></div><div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + packet_len + 12, htonl((<span class="charliteral">&#39;R&#39;</span> &lt;&lt; 24) | (<span class="charliteral">&#39;E&#39;</span> &lt;&lt; 16) | (<span class="charliteral">&#39;M&#39;</span> &lt;&lt; 8) | (<span class="charliteral">&#39;B&#39;</span>))); <span class="comment">/* Unique identifier &#39;R&#39; &#39;E&#39; &#39;M&#39; &#39;B&#39; */</span></div><div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + packet_len + 16, htonl((1 &lt;&lt; 24) | (feedback-&gt;<a class="code" href="../../d7/dd3/structast__rtp__rtcp__feedback.html#af419ddac99d63d4e2117252750b4755b">remb</a>.<a class="code" href="../../d4/d88/structast__rtp__rtcp__feedback__remb.html#a8cea965b4bae760eebe286e96fc208e7">br_exp</a> &lt;&lt; 18) | (feedback-&gt;<a class="code" href="../../d7/dd3/structast__rtp__rtcp__feedback.html#af419ddac99d63d4e2117252750b4755b">remb</a>.<a class="code" href="../../d4/d88/structast__rtp__rtcp__feedback__remb.html#aaa1e9a8fad3f268711f2bf99c85f1367">br_mantissa</a>))); <span class="comment">/* Number of SSRCs / BR Exp / BR Mantissa */</span></div><div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;   <a class="code" href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a>(rtcpheader + packet_len + 20, htonl(rtp-&gt;<a class="code" href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>)); <span class="comment">/* The SSRC this feedback message applies to */</span></div><div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;   res = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a849b3d418fbe0446b4e9289a9ef94397">rtcp_sendto</a>(instance, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)rtcpheader, packet_len + remb_len, 0, rtp-&gt;bundled ? remote_address : &amp;rtp-&gt;rtcp-&gt;them, &amp;ice);</div><div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;RTCP PSFB transmission error: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ac39a35490fcf802b678e67b448eb381c">ast_rtcp_calculate_sr_rr_statistics</a>(instance, rtcp_report, rtp-&gt;bundled ? *remote_address : rtp-&gt;rtcp-&gt;them, ice, sr);</div><div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;   }</div><div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;</div><div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;}</div><div class="ttc" id="structast__rtp__rtcp__report_html"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a></div><div class="ttdoc">An object that represents data sent during a SR/RR RTCP report. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00331">rtp_engine.h:331</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a6a3e89b50705b66f142eaaff7d3fe52d"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a6a3e89b50705b66f142eaaff7d3fe52d">ast_rtcp_generate_compound_prefix</a></div><div class="ttdeci">static int ast_rtcp_generate_compound_prefix(struct ast_rtp_instance *instance, unsigned char *rtcpheader, struct ast_rtp_rtcp_report *report, int *sr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04699">res_rtp_asterisk.c:4699</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__feedback__remb_html_a8cea965b4bae760eebe286e96fc208e7"><div class="ttname"><a href="../../d4/d88/structast__rtp__rtcp__feedback__remb.html#a8cea965b4bae760eebe286e96fc208e7">ast_rtp_rtcp_feedback_remb::br_exp</a></div><div class="ttdeci">unsigned int br_exp</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00351">rtp_engine.h:351</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__feedback_html"><div class="ttname"><a href="../../d7/dd3/structast__rtp__rtcp__feedback.html">ast_rtp_rtcp_feedback</a></div><div class="ttdoc">An object that represents data received in a feedback report. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00358">rtp_engine.h:358</a></div></div>
<div class="ttc" id="unaligned_8h_html_ae0b7823a3fab76dbec84f308adeb7f5a"><div class="ttname"><a href="../../d2/d1e/unaligned_8h.html#ae0b7823a3fab76dbec84f308adeb7f5a">put_unaligned_uint32</a></div><div class="ttdeci">static void put_unaligned_uint32(void *p, unsigned int datum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1e/unaligned_8h_source.html#l00058">unaligned.h:58</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__feedback_html_aa9cb6ed3e21d64ad26c61da877136ae0"><div class="ttname"><a href="../../d7/dd3/structast__rtp__rtcp__feedback.html#aa9cb6ed3e21d64ad26c61da877136ae0">ast_rtp_rtcp_feedback::fmt</a></div><div class="ttdeci">unsigned int fmt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00359">rtp_engine.h:359</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__feedback_html_af419ddac99d63d4e2117252750b4755b"><div class="ttname"><a href="../../d7/dd3/structast__rtp__rtcp__feedback.html#af419ddac99d63d4e2117252750b4755b">ast_rtp_rtcp_feedback::remb</a></div><div class="ttdeci">struct ast_rtp_rtcp_feedback_remb remb</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00361">rtp_engine.h:361</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structast__rtp_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00372">res_rtp_asterisk.c:372</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga0915be7e2d33217121465cfb689318fd"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga0915be7e2d33217121465cfb689318fd">ast_debug_rtcp</a></div><div class="ttdeci">#define ast_debug_rtcp(sublevel,...)</div><div class="ttdoc">Log debug level RTCP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02873">rtp_engine.h:2873</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914caf7d73e777eb2a69c79032cce56a3ca3b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914caf7d73e777eb2a69c79032cce56a3ca3b">AST_RTP_PROPERTY_REMB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00131">rtp_engine.h:131</a></div></div>
<div class="ttc" id="structast__rtp_html_a7aaf7fb2b26e335304c8a89cc36aac00"><div class="ttname"><a href="../../dd/da7/structast__rtp.html#a7aaf7fb2b26e335304c8a89cc36aac00">ast_rtp::themssrc_valid</a></div><div class="ttdeci">unsigned int themssrc_valid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00377">res_rtp_asterisk.c:377</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a199d704f3867124fe0f56f4c8856a0b4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a199d704f3867124fe0f56f4c8856a0b4">ast_rtp_rtcp_report_alloc</a></div><div class="ttdeci">struct ast_rtp_rtcp_report * ast_rtp_rtcp_report_alloc(unsigned int report_blocks)</div><div class="ttdoc">Allocate an ao2 ref counted instance of ast_rtp_rtcp_report. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03474">rtp_engine.c:3474</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structast__rtp__rtcp__feedback__remb_html_aaa1e9a8fad3f268711f2bf99c85f1367"><div class="ttname"><a href="../../d4/d88/structast__rtp__rtcp__feedback__remb.html#aaa1e9a8fad3f268711f2bf99c85f1367">ast_rtp_rtcp_feedback_remb::br_mantissa</a></div><div class="ttdeci">unsigned int br_mantissa</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00352">rtp_engine.h:352</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ac39a35490fcf802b678e67b448eb381c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ac39a35490fcf802b678e67b448eb381c">ast_rtcp_calculate_sr_rr_statistics</a></div><div class="ttdeci">static int ast_rtcp_calculate_sr_rr_statistics(struct ast_rtp_instance *instance, struct ast_rtp_rtcp_report *rtcp_report, struct ast_sockaddr remote_address, int ice, int sr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04579">res_rtp_asterisk.c:4579</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2a2d35167e5880fdd5ec8d7df44f18b1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a></div><div class="ttdeci">int ast_rtp_instance_get_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property)</div><div class="ttdoc">Get the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00716">rtp_engine.c:716</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a849b3d418fbe0446b4e9289a9ef94397"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a849b3d418fbe0446b4e9289a9ef94397">rtcp_sendto</a></div><div class="ttdeci">static int rtcp_sendto(struct ast_rtp_instance *instance, void *buf, size_t size, int flags, struct ast_sockaddr *sa, int *ice)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03303">res_rtp_asterisk.c:3303</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a711189b19386915beec87d8edddb3464"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a711189b19386915beec87d8edddb3464">RTCP_PT_PSFB</a></div><div class="ttdeci">#define RTCP_PT_PSFB</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00132">res_rtp_asterisk.c:132</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a92dbab4f62cc24fc05ac849a2b2b0e5c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a92dbab4f62cc24fc05ac849a2b2b0e5c">AST_RTP_RTCP_FMT_REMB</a></div><div class="ttdeci">#define AST_RTP_RTCP_FMT_REMB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00309">rtp_engine.h:309</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a26068e77ac6f5763da15de75130f0ca7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26068e77ac6f5763da15de75130f0ca7">&#9670;&nbsp;</a></span>set_rtp_rtcp_schedid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_rtp_rtcp_schedid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02463">2463</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00563">ast_rtp_instance_get_data()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l01507">id</a>.</p>
<div class="fragment"><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;{</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *rtp = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(instance);</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;   <span class="keywordflow">if</span> (rtp &amp;&amp; rtp-&gt;rtcp) {</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;      rtp-&gt;rtcp-&gt;schedid = <a class="code" href="../../da/dfb/app__queue_8c.html#acd1f0e9b4730ec60f62cb0806cb06ef1">id</a>;</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;   }</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;}</div><div class="ttc" id="structast__rtp_html"><div class="ttname"><a href="../../dd/da7/structast__rtp.html">ast_rtp</a></div><div class="ttdoc">RTP session description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00367">res_rtp_asterisk.c:367</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="app__queue_8c_html_acd1f0e9b4730ec60f62cb0806cb06ef1"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#acd1f0e9b4730ec60f62cb0806cb06ef1">id</a></div><div class="ttdeci">enum queue_result id</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01507">app_queue.c:1507</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a43ed5507fb9a133cd9c31d302f6492a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43ed5507fb9a133cd9c31d302f6492a2">&#9670;&nbsp;</a></span>should_drop_packets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int should_drop_packets </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07583">7583</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07546">rtp_drop_packets_data::addr</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00388">ast_sockaddr_cmp()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00413">ast_sockaddr_cmp_addr()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00128">ast_tvcmp()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07551">drop_packets_data</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07553">drop_packets_data_update()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07542">rtp_drop_packets_data::interval</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07544">rtp_drop_packets_data::next</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07539">rtp_drop_packets_data::num_dropped</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07537">rtp_drop_packets_data::num_to_drop</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07548">rtp_drop_packets_data::port</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l07584"></a><span class="lineno"> 7584</span>&#160;{</div><div class="line"><a name="l07585"></a><span class="lineno"> 7585</span>&#160;   <span class="keyword">struct </span>timeval tv;</div><div class="line"><a name="l07586"></a><span class="lineno"> 7586</span>&#160;</div><div class="line"><a name="l07587"></a><span class="lineno"> 7587</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#aea3c75c96b342163a7543b70ba69cfc2">num_to_drop</a>) {</div><div class="line"><a name="l07588"></a><span class="lineno"> 7588</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07589"></a><span class="lineno"> 7589</span>&#160;   }</div><div class="line"><a name="l07590"></a><span class="lineno"> 7590</span>&#160;</div><div class="line"><a name="l07591"></a><span class="lineno"> 7591</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l07592"></a><span class="lineno"> 7592</span>&#160;<span class="comment">    * If an address has been specified then filter on it, and also the port if</span></div><div class="line"><a name="l07593"></a><span class="lineno"> 7593</span>&#160;<span class="comment">    * it too was included.</span></div><div class="line"><a name="l07594"></a><span class="lineno"> 7594</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07595"></a><span class="lineno"> 7595</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#a10838452c09fae7f0e3de86581d85379">addr</a>) &amp;&amp;</div><div class="line"><a name="l07596"></a><span class="lineno"> 7596</span>&#160;      (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#a938bdc6ae46c346147b6d4f67ad1e704">port</a> ?</div><div class="line"><a name="l07597"></a><span class="lineno"> 7597</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#a10838452c09fae7f0e3de86581d85379">addr</a>, addr) :</div><div class="line"><a name="l07598"></a><span class="lineno"> 7598</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#a5fb3221004de6004d4c1f04c816eaac8">ast_sockaddr_cmp_addr</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#a10838452c09fae7f0e3de86581d85379">addr</a>, addr)) != 0) {</div><div class="line"><a name="l07599"></a><span class="lineno"> 7599</span>&#160;      <span class="comment">/* Address and/or port does not match */</span></div><div class="line"><a name="l07600"></a><span class="lineno"> 7600</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07601"></a><span class="lineno"> 7601</span>&#160;   }</div><div class="line"><a name="l07602"></a><span class="lineno"> 7602</span>&#160;</div><div class="line"><a name="l07603"></a><span class="lineno"> 7603</span>&#160;   <span class="comment">/* Keep dropping packets until we&#39;ve reached the total to drop */</span></div><div class="line"><a name="l07604"></a><span class="lineno"> 7604</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#aada5fb2c6b982bd66e06bed27074312d">num_dropped</a> &lt; <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#aea3c75c96b342163a7543b70ba69cfc2">num_to_drop</a>) {</div><div class="line"><a name="l07605"></a><span class="lineno"> 7605</span>&#160;      ++<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#aada5fb2c6b982bd66e06bed27074312d">num_dropped</a>;</div><div class="line"><a name="l07606"></a><span class="lineno"> 7606</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l07607"></a><span class="lineno"> 7607</span>&#160;   }</div><div class="line"><a name="l07608"></a><span class="lineno"> 7608</span>&#160;</div><div class="line"><a name="l07609"></a><span class="lineno"> 7609</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l07610"></a><span class="lineno"> 7610</span>&#160;<span class="comment">    * Once the set number of packets has been dropped check to see if it&#39;s</span></div><div class="line"><a name="l07611"></a><span class="lineno"> 7611</span>&#160;<span class="comment">    * time to drop more.</span></div><div class="line"><a name="l07612"></a><span class="lineno"> 7612</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07613"></a><span class="lineno"> 7613</span>&#160;</div><div class="line"><a name="l07614"></a><span class="lineno"> 7614</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#a8fab7697ae649035214a377c3149d28a">interval</a>)) {</div><div class="line"><a name="l07615"></a><span class="lineno"> 7615</span>&#160;      <span class="comment">/* If no interval then drop specified number of packets and be done */</span></div><div class="line"><a name="l07616"></a><span class="lineno"> 7616</span>&#160;      <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#aea3c75c96b342163a7543b70ba69cfc2">num_to_drop</a> = 0;</div><div class="line"><a name="l07617"></a><span class="lineno"> 7617</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07618"></a><span class="lineno"> 7618</span>&#160;   }</div><div class="line"><a name="l07619"></a><span class="lineno"> 7619</span>&#160;</div><div class="line"><a name="l07620"></a><span class="lineno"> 7620</span>&#160;   tv = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l07621"></a><span class="lineno"> 7621</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a6daa33e2052acd094bb63e78aba29733">ast_tvcmp</a>(tv, <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a>.<a class="code" href="../../d1/d41/structrtp__drop__packets__data.html#ad570b730b5e8beb611d76668ddf4e9ef">next</a>) == -1) {</div><div class="line"><a name="l07622"></a><span class="lineno"> 7622</span>&#160;      <span class="comment">/* Still waiting for the next time interval to elapse */</span></div><div class="line"><a name="l07623"></a><span class="lineno"> 7623</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07624"></a><span class="lineno"> 7624</span>&#160;   }</div><div class="line"><a name="l07625"></a><span class="lineno"> 7625</span>&#160;</div><div class="line"><a name="l07626"></a><span class="lineno"> 7626</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l07627"></a><span class="lineno"> 7627</span>&#160;<span class="comment">    * The next time interval has elapsed so update the tracking structure</span></div><div class="line"><a name="l07628"></a><span class="lineno"> 7628</span>&#160;<span class="comment">    * in order to start dropping more packets, and figure out when the next</span></div><div class="line"><a name="l07629"></a><span class="lineno"> 7629</span>&#160;<span class="comment">    * time interval is.</span></div><div class="line"><a name="l07630"></a><span class="lineno"> 7630</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07631"></a><span class="lineno"> 7631</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a3fa482ae7eda83a3e17baa26c4db9445">drop_packets_data_update</a>(tv);</div><div class="line"><a name="l07632"></a><span class="lineno"> 7632</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l07633"></a><span class="lineno"> 7633</span>&#160;}</div><div class="ttc" id="structrtp__drop__packets__data_html_a938bdc6ae46c346147b6d4f67ad1e704"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#a938bdc6ae46c346147b6d4f67ad1e704">rtp_drop_packets_data::port</a></div><div class="ttdeci">unsigned int port</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07548">res_rtp_asterisk.c:7548</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_aea3c75c96b342163a7543b70ba69cfc2"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#aea3c75c96b342163a7543b70ba69cfc2">rtp_drop_packets_data::num_to_drop</a></div><div class="ttdeci">unsigned int num_to_drop</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07537">res_rtp_asterisk.c:7537</a></div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="netsock2_8h_html_abae1b903c8f5b7639235b579a267aaab"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a></div><div class="ttdeci">int ast_sockaddr_cmp(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00388">netsock2.c:388</a></div></div>
<div class="ttc" id="netsock2_8h_html_a5fb3221004de6004d4c1f04c816eaac8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a5fb3221004de6004d4c1f04c816eaac8">ast_sockaddr_cmp_addr</a></div><div class="ttdeci">int ast_sockaddr_cmp_addr(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares the addresses of two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00413">netsock2.c:413</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#a10838452c09fae7f0e3de86581d85379">rtp_drop_packets_data::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07546">res_rtp_asterisk.c:7546</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_ad570b730b5e8beb611d76668ddf4e9ef"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#ad570b730b5e8beb611d76668ddf4e9ef">rtp_drop_packets_data::next</a></div><div class="ttdeci">struct timeval next</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07544">res_rtp_asterisk.c:7544</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a3fa482ae7eda83a3e17baa26c4db9445"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a3fa482ae7eda83a3e17baa26c4db9445">drop_packets_data_update</a></div><div class="ttdeci">static void drop_packets_data_update(struct timeval tv)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07553">res_rtp_asterisk.c:7553</a></div></div>
<div class="ttc" id="time_8h_html_a6daa33e2052acd094bb63e78aba29733"><div class="ttname"><a href="../../de/df7/time_8h.html#a6daa33e2052acd094bb63e78aba29733">ast_tvcmp</a></div><div class="ttdeci">int ast_tvcmp(struct timeval _a, struct timeval _b)</div><div class="ttdoc">Compres two struct timeval instances returning -1, 0, 1 if the first arg is smaller, equal or greater to the second. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00128">time.h:128</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_aada5fb2c6b982bd66e06bed27074312d"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#aada5fb2c6b982bd66e06bed27074312d">rtp_drop_packets_data::num_dropped</a></div><div class="ttdeci">unsigned int num_dropped</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07539">res_rtp_asterisk.c:7539</a></div></div>
<div class="ttc" id="structrtp__drop__packets__data_html_a8fab7697ae649035214a377c3149d28a"><div class="ttname"><a href="../../d1/d41/structrtp__drop__packets__data.html#a8fab7697ae649035214a377c3149d28a">rtp_drop_packets_data::interval</a></div><div class="ttdeci">struct timeval interval</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07542">res_rtp_asterisk.c:7542</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_add0b2eb61bb2de637255dbac0520c955"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#add0b2eb61bb2de637255dbac0520c955">drop_packets_data</a></div><div class="ttdeci">static struct rtp_drop_packets_data drop_packets_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07551">res_rtp_asterisk.c:7551</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b801d4e79b211acfad64dbf20da9f72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b801d4e79b211acfad64dbf20da9f72">&#9670;&nbsp;</a></span>stun_address_is_blacklisted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stun_address_is_blacklisted </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03510">3510</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/db8/acl_8c_source.html#l00804">ast_apply_acl_nolog()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00233">ast_rwlock_rdlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../d5/d59/acl_8h_source.html#l00037">AST_SENSE_DENY</a>, and <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>.</p>
<div class="fragment"><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;{</div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = 0;</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;</div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a453b496a5a02d8741bf2e52675f13a39">stun_acl_lock</a>);</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;   result |= <a class="code" href="../../d5/d59/acl_8h.html#a8752b9c65a8a31102f7155f99451ca53">ast_apply_acl_nolog</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a49055c15c8722fe931745104670be0c5">stun_acl</a>, addr) == <a class="code" href="../../d5/d59/acl_8h.html#a764d04fe9485be95771e652dc2c87445abb486b5b819cf3b3951ce0a2e584f065">AST_SENSE_DENY</a>;</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a453b496a5a02d8741bf2e52675f13a39">stun_acl_lock</a>);</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;}</div><div class="ttc" id="lock_8h_html_a7330ac9d36b05bad68b188c2dcfa42d7"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a></div><div class="ttdeci">#define ast_rwlock_rdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00233">lock.h:233</a></div></div>
<div class="ttc" id="acl_8h_html_a8752b9c65a8a31102f7155f99451ca53"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a8752b9c65a8a31102f7155f99451ca53">ast_apply_acl_nolog</a></div><div class="ttdeci">enum ast_acl_sense ast_apply_acl_nolog(struct ast_acl_list *acl_list, const struct ast_sockaddr *addr)</div><div class="ttdoc">Apply a set of rules to a given IP address, don&amp;#39;t log failure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l00804">acl.c:804</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a49055c15c8722fe931745104670be0c5"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a49055c15c8722fe931745104670be0c5">stun_acl</a></div><div class="ttdeci">static struct ast_acl_list * stun_acl</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00229">res_rtp_asterisk.c:229</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="acl_8h_html_a764d04fe9485be95771e652dc2c87445abb486b5b819cf3b3951ce0a2e584f065"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a764d04fe9485be95771e652dc2c87445abb486b5b819cf3b3951ce0a2e584f065">AST_SENSE_DENY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d59/acl_8h_source.html#l00037">acl.h:37</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a453b496a5a02d8741bf2e52675f13a39"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a453b496a5a02d8741bf2e52675f13a39">stun_acl_lock</a></div><div class="ttdeci">static ast_rwlock_t stun_acl_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00230">res_rtp_asterisk.c:230</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa8322f30d6ca185866395af0577bf32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa8322f30d6ca185866395af0577bf32">&#9670;&nbsp;</a></span>timer_worker_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int timer_worker_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Worker thread for timerheap. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02727">2727</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00254">ast_rtp_ioqueue_thread::ioqueue</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00250">ast_rtp_ioqueue_thread::pool</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00239">timer_heap</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00245">timer_terminate</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09624">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;{</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;   pj_ioqueue_t *ioqueue;</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;   <span class="keywordflow">if</span> (pj_ioqueue_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, 1, &amp;ioqueue) != PJ_SUCCESS) {</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;   }</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a7fb15032ffb90f20278960e03525e479">timer_terminate</a>) {</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;      <span class="keyword">const</span> pj_time_val delay = {0, 10};</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;      pj_timer_heap_poll(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae9f993fcad1fd49cb50f4a541101ccb7">timer_heap</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;      pj_ioqueue_poll(ioqueue, &amp;delay);</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;   }</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a7fb15032ffb90f20278960e03525e479"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a7fb15032ffb90f20278960e03525e479">timer_terminate</a></div><div class="ttdeci">static int timer_terminate</div><div class="ttdoc">Used to tell the timer thread to terminate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00245">res_rtp_asterisk.c:245</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ae9f993fcad1fd49cb50f4a541101ccb7"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae9f993fcad1fd49cb50f4a541101ccb7">timer_heap</a></div><div class="ttdeci">static pj_timer_heap_t * timer_heap</div><div class="ttdoc">Global timer heap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00239">res_rtp_asterisk.c:239</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae07b5d23a23d4d09988c4a1c5d477d14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae07b5d23a23d4d09988c4a1c5d477d14">&#9670;&nbsp;</a></span>timeval2ntp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void timeval2ntp </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>tv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>msw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>lsw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04392">4392</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04491">ast_rtcp_generate_report()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05963">ast_rtp_rtcp_handle_nack()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">rtp_raw_write()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06900">rtp_transport_wide_cc_feedback_produce()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05768">update_rtt_stats()</a>.</p>
<div class="fragment"><div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;{</div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sec, usec, frac;</div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;   sec = tv.tv_sec + 2208988800u; <span class="comment">/* Sec between 1900 and 1970 */</span></div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;   usec = tv.tv_usec;</div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;<span class="comment">    * Convert usec to 0.32 bit fixed point without overflow.</span></div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;<span class="comment">    * = usec * 2^32 / 10^6</span></div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;<span class="comment">    * = usec * 2^32 / (2^6 * 5^6)</span></div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;<span class="comment">    * = usec * 2^26 / 5^6</span></div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;<span class="comment">    * The usec value needs 20 bits to represent 999999 usec.  So</span></div><div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;<span class="comment">    * splitting the 2^26 to get the most precision using 32 bit</span></div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;<span class="comment">    * values gives:</span></div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;<span class="comment">    * = ((usec * 2^12) / 5^6) * 2^14</span></div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;<span class="comment">    * Splitting the division into two stages preserves all the</span></div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;<span class="comment">    * available significant bits of usec over doing the division</span></div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;<span class="comment">    * all at once.</span></div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;<span class="comment">    * = ((((usec * 2^12) / 5^3) * 2^7) / 5^3) * 2^7</span></div><div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;   frac = ((((usec &lt;&lt; 12) / 125) &lt;&lt; 7) / 125) &lt;&lt; 7;</div><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;   *msw = sec;</div><div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;   *lsw = frac;</div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09709">9709</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00326">AST_MODPRI_CHANNEL_DEPEND</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00364">ast_rtp_engine_unregister()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../d8/d20/autoconfig_8h_source.html#l00629">HAVE_PJPROJECT</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00735">host_candidate_overrides_clear()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09624">load_module()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">pj_thread_register_check()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00741">reload()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09592">reload_module()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09599">rtp_terminate_pjproject()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03471">rtp_unload_acl()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01136">stasis_unsubscribe_and_join()</a>.</p>
<div class="fragment"><div class="line"><a name="l09710"></a><span class="lineno"> 9710</span>&#160;{</div><div class="line"><a name="l09711"></a><span class="lineno"> 9711</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#add142521845774a8b3cbf6ba2693aeff">ast_rtp_engine_unregister</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a44a4250e68a4aa76f545a8643afaf0fe">asterisk_rtp_engine</a>);</div><div class="line"><a name="l09712"></a><span class="lineno"> 9712</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa5f5020c8ed253374c8aead44db57c16">cli_rtp</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa5f5020c8ed253374c8aead44db57c16">cli_rtp</a>));</div><div class="line"><a name="l09713"></a><span class="lineno"> 9713</span>&#160;</div><div class="line"><a name="l09714"></a><span class="lineno"> 9714</span>&#160;<span class="preprocessor">#if defined(HAVE_OPENSSL) &amp;&amp; (OPENSSL_VERSION_NUMBER &gt;= 0x10001000L) &amp;&amp; !defined(OPENSSL_NO_SRTP) &amp;&amp; defined(HAVE_OPENSSL_BIO_METHOD)</span></div><div class="line"><a name="l09715"></a><span class="lineno"> 9715</span>&#160;   <span class="keywordflow">if</span> (dtls_bio_methods) {</div><div class="line"><a name="l09716"></a><span class="lineno"> 9716</span>&#160;      BIO_meth_free(dtls_bio_methods);</div><div class="line"><a name="l09717"></a><span class="lineno"> 9717</span>&#160;   }</div><div class="line"><a name="l09718"></a><span class="lineno"> 9718</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09719"></a><span class="lineno"> 9719</span>&#160;</div><div class="line"><a name="l09720"></a><span class="lineno"> 9720</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l09721"></a><span class="lineno"> 9721</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aef821ad4c8e25611b5fd4db4bf1bb60e">host_candidate_overrides_clear</a>();</div><div class="line"><a name="l09722"></a><span class="lineno"> 9722</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a>();</div><div class="line"><a name="l09723"></a><span class="lineno"> 9723</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#af8a0d1a6b0e61b0fd209699d8a718226">rtp_terminate_pjproject</a>();</div><div class="line"><a name="l09724"></a><span class="lineno"> 9724</span>&#160;</div><div class="line"><a name="l09725"></a><span class="lineno"> 9725</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a322eb26fcd507fe69297e038d584db02">acl_change_sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a322eb26fcd507fe69297e038d584db02">acl_change_sub</a>);</div><div class="line"><a name="l09726"></a><span class="lineno"> 9726</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa46a219704b72f7e612092e541dd29ce">rtp_unload_acl</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aab7301990e5a8cbb0455c7efc4596ac5">ice_acl_lock</a>, &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aab6e5d05eb162134d044fec583e951d1">ice_acl</a>);</div><div class="line"><a name="l09727"></a><span class="lineno"> 9727</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aa46a219704b72f7e612092e541dd29ce">rtp_unload_acl</a>(&amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a453b496a5a02d8741bf2e52675f13a39">stun_acl_lock</a>, &amp;<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a49055c15c8722fe931745104670be0c5">stun_acl</a>);</div><div class="line"><a name="l09728"></a><span class="lineno"> 9728</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09729"></a><span class="lineno"> 9729</span>&#160;</div><div class="line"><a name="l09730"></a><span class="lineno"> 9730</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l09731"></a><span class="lineno"> 9731</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a4884315209af5f6ecb90ba9ef0a70344"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a4884315209af5f6ecb90ba9ef0a70344">pj_thread_register_check</a></div><div class="ttdeci">static void pj_thread_register_check(void)</div><div class="ttdoc">Function used to check if the calling thread is registered with pjlib. If it is not it will be regist...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">res_rtp_asterisk.c:865</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_add142521845774a8b3cbf6ba2693aeff"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#add142521845774a8b3cbf6ba2693aeff">ast_rtp_engine_unregister</a></div><div class="ttdeci">int ast_rtp_engine_unregister(struct ast_rtp_engine *engine)</div><div class="ttdoc">Unregister an RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00364">rtp_engine.c:364</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a49055c15c8722fe931745104670be0c5"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a49055c15c8722fe931745104670be0c5">stun_acl</a></div><div class="ttdeci">static struct ast_acl_list * stun_acl</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00229">res_rtp_asterisk.c:229</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aab6e5d05eb162134d044fec583e951d1"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aab6e5d05eb162134d044fec583e951d1">ice_acl</a></div><div class="ttdeci">static struct ast_acl_list * ice_acl</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00225">res_rtp_asterisk.c:225</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_af8a0d1a6b0e61b0fd209699d8a718226"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#af8a0d1a6b0e61b0fd209699d8a718226">rtp_terminate_pjproject</a></div><div class="ttdeci">static void rtp_terminate_pjproject(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09599">res_rtp_asterisk.c:9599</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aef821ad4c8e25611b5fd4db4bf1bb60e"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aef821ad4c8e25611b5fd4db4bf1bb60e">host_candidate_overrides_clear</a></div><div class="ttdeci">static void host_candidate_overrides_clear(void)</div><div class="ttdoc">Helper function which clears the ICE host candidate mapping. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00735">res_rtp_asterisk.c:735</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a322eb26fcd507fe69297e038d584db02"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a322eb26fcd507fe69297e038d584db02">acl_change_sub</a></div><div class="ttdeci">static struct stasis_subscription * acl_change_sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00221">res_rtp_asterisk.c:221</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aab7301990e5a8cbb0455c7efc4596ac5"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aab7301990e5a8cbb0455c7efc4596ac5">ice_acl_lock</a></div><div class="ttdeci">static ast_rwlock_t ice_acl_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00226">res_rtp_asterisk.c:226</a></div></div>
<div class="ttc" id="stasis_8h_html_a221d05010106dcde0cc2e2b43c1a8b67"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe_and_join(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription, blocking until the last message is processed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01136">stasis.c:1136</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa5f5020c8ed253374c8aead44db57c16"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa5f5020c8ed253374c8aead44db57c16">cli_rtp</a></div><div class="ttdeci">static struct ast_cli_entry cli_rtp[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09336">res_rtp_asterisk.c:9336</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a44a4250e68a4aa76f545a8643afaf0fe"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a44a4250e68a4aa76f545a8643afaf0fe">asterisk_rtp_engine</a></div><div class="ttdeci">static struct ast_rtp_engine asterisk_rtp_engine</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02484">res_rtp_asterisk.c:2484</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a453b496a5a02d8741bf2e52675f13a39"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a453b496a5a02d8741bf2e52675f13a39">stun_acl_lock</a></div><div class="ttdeci">static ast_rwlock_t stun_acl_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00230">res_rtp_asterisk.c:230</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aa46a219704b72f7e612092e541dd29ce"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aa46a219704b72f7e612092e541dd29ce">rtp_unload_acl</a></div><div class="ttdeci">static void rtp_unload_acl(ast_rwlock_t *lock, struct ast_acl_list **acl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03471">res_rtp_asterisk.c:3471</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a42d4b1f8ff650d67378b345bb531ccac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42d4b1f8ff650d67378b345bb531ccac">&#9670;&nbsp;</a></span>update_address_with_ice_candidate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void update_address_with_ice_candidate </td>
          <td>(</td>
          <td class="paramtype">pj_ice_sess *&#160;</td>
          <td class="paramname"><em>ice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78">ast_rtp_ice_component_type</a>&#160;</td>
          <td class="paramname"><em>component</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>cand_address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function which updates an <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a> with the candidate used for the component. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00749">749</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02581">ast_rtp_ice_start_media()</a>.</p>
<div class="fragment"><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;{</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>[PJ_INET6_ADDRSTRLEN];</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   <span class="keywordflow">if</span> (component &lt; 1 || !ice-&gt;comp[component - 1].valid_check) {</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   }</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(cand_address,</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      pj_sockaddr_print(&amp;ice-&gt;comp[component - 1].valid_check-&gt;rcand-&gt;addr, address,</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;         <span class="keyword">sizeof</span>(address), 0), 0);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(cand_address,</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      pj_sockaddr_get_port(&amp;ice-&gt;comp[component - 1].valid_check-&gt;rcand-&gt;addr));</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_aad98818272870e12d48fe4347aaa46d0"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a></div><div class="ttdeci">int ast_sockaddr_parse(struct ast_sockaddr *addr, const char *str, int flags)</div><div class="ttdoc">Parse an IPv4 or IPv6 address string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00230">netsock2.c:230</a></div></div>
<div class="ttc" id="f2c_8h_html_a27c1bdb0cba23a9db2a51eed7b3b2ac1"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a></div><div class="ttdeci">char * address</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00059">f2c.h:59</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6daf71d49a86747ab43985cc2f51cc98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6daf71d49a86747ab43985cc2f51cc98">&#9670;&nbsp;</a></span>update_jitter_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void update_jitter_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>ia_jitter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05824">5824</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03332">calc_mean_and_standard_deviation()</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00868">if()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;{</div><div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;   <span class="keywordtype">double</span> reported_jitter;</div><div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;</div><div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;   rtp-&gt;rtcp-&gt;reported_jitter = ia_jitter;</div><div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;   reported_jitter = (double) rtp-&gt;rtcp-&gt;reported_jitter;</div><div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;   <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a> (rtp-&gt;rtcp-&gt;reported_jitter_count == 0) {</div><div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;      rtp-&gt;rtcp-&gt;reported_minjitter = reported_jitter;</div><div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;   }</div><div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;   <span class="keywordflow">if</span> (reported_jitter &lt; rtp-&gt;rtcp-&gt;reported_minjitter) {</div><div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;      rtp-&gt;rtcp-&gt;reported_minjitter = reported_jitter;</div><div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;   }</div><div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;   <span class="keywordflow">if</span> (reported_jitter &gt; rtp-&gt;rtcp-&gt;reported_maxjitter) {</div><div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;      rtp-&gt;rtcp-&gt;reported_maxjitter = reported_jitter;</div><div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;   }</div><div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;</div><div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a82df1dfe66fb8ab6832b5b8e9fa84d42">calc_mean_and_standard_deviation</a>(reported_jitter, &amp;rtp-&gt;rtcp-&gt;reported_normdev_jitter,</div><div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;      &amp;rtp-&gt;rtcp-&gt;reported_stdev_jitter, &amp;rtp-&gt;rtcp-&gt;reported_jitter_count);</div><div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;}</div><div class="ttc" id="ast__expr2f_8c_html_a33e91cd0cef6786e9e3a27ac67707207"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a></div><div class="ttdeci">if(!yyg-&gt;yy_init)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00868">ast_expr2f.c:868</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a82df1dfe66fb8ab6832b5b8e9fa84d42"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a82df1dfe66fb8ab6832b5b8e9fa84d42">calc_mean_and_standard_deviation</a></div><div class="ttdeci">static void calc_mean_and_standard_deviation(double new_sample, double *mean, double *std_dev, unsigned int *count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03332">res_rtp_asterisk.c:3332</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed901569931a704735fdc55dc50f442b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed901569931a704735fdc55dc50f442b">&#9670;&nbsp;</a></span>update_lost_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void update_lost_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>lost_packets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05848">5848</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03332">calc_mean_and_standard_deviation()</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00868">if()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;{</div><div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;   <span class="keywordtype">double</span> reported_lost;</div><div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;</div><div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;   rtp-&gt;rtcp-&gt;reported_lost = lost_packets;</div><div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;   reported_lost = (double)rtp-&gt;rtcp-&gt;reported_lost;</div><div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;   <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a> (rtp-&gt;rtcp-&gt;reported_lost_count == 0) {</div><div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;      rtp-&gt;rtcp-&gt;reported_minlost = reported_lost;</div><div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;   }</div><div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;   <span class="keywordflow">if</span> (reported_lost &lt; rtp-&gt;rtcp-&gt;reported_minlost) {</div><div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;      rtp-&gt;rtcp-&gt;reported_minlost = reported_lost;</div><div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;   }</div><div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;   <span class="keywordflow">if</span> (reported_lost &gt; rtp-&gt;rtcp-&gt;reported_maxlost) {</div><div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;      rtp-&gt;rtcp-&gt;reported_maxlost = reported_lost;</div><div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;   }</div><div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;</div><div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a82df1dfe66fb8ab6832b5b8e9fa84d42">calc_mean_and_standard_deviation</a>(reported_lost, &amp;rtp-&gt;rtcp-&gt;reported_normdev_lost,</div><div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;      &amp;rtp-&gt;rtcp-&gt;reported_stdev_lost, &amp;rtp-&gt;rtcp-&gt;reported_lost_count);</div><div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;}</div><div class="ttc" id="ast__expr2f_8c_html_a33e91cd0cef6786e9e3a27ac67707207"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a></div><div class="ttdeci">if(!yyg-&gt;yy_init)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00868">ast_expr2f.c:868</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a82df1dfe66fb8ab6832b5b8e9fa84d42"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a82df1dfe66fb8ab6832b5b8e9fa84d42">calc_mean_and_standard_deviation</a></div><div class="ttdeci">static void calc_mean_and_standard_deviation(double new_sample, double *mean, double *std_dev, unsigned int *count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03332">res_rtp_asterisk.c:3332</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8413c5149cc0d207ff76cdac0df1d9d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8413c5149cc0d207ff76cdac0df1d9d8">&#9670;&nbsp;</a></span>update_rtt_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int update_rtt_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/da7/structast__rtp.html">ast_rtp</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>lsr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dlsr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05768">5768</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03332">calc_mean_and_standard_deviation()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04392">timeval2ntp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>.</p>
<div class="fragment"><div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;{</div><div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;   <span class="keyword">struct </span>timeval now;</div><div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;   <span class="keyword">struct </span>timeval rtt_tv;</div><div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> msw;</div><div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lsw;</div><div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rtt_msw;</div><div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rtt_lsw;</div><div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lsr_a;</div><div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rtt;</div><div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;</div><div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;   gettimeofday(&amp;now, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ae07b5d23a23d4d09988c4a1c5d477d14">timeval2ntp</a>(now, &amp;msw, &amp;lsw);</div><div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;</div><div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;   lsr_a = ((msw &amp; 0x0000ffff) &lt;&lt; 16) | ((lsw &amp; 0xffff0000) &gt;&gt; 16);</div><div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;   rtt = lsr_a - lsr - dlsr;</div><div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;   rtt_msw = (rtt &amp; 0xffff0000) &gt;&gt; 16;</div><div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;   rtt_lsw = (rtt &amp; 0x0000ffff);</div><div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;   rtt_tv.tv_sec = rtt_msw;</div><div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;<span class="comment">    * Convert 16.16 fixed point rtt_lsw to usec without</span></div><div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;<span class="comment">    * overflow.</span></div><div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;<span class="comment">    * = rtt_lsw * 10^6 / 2^16</span></div><div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;<span class="comment">    * = rtt_lsw * (2^6 * 5^6) / 2^16</span></div><div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;<span class="comment">    * = rtt_lsw * 5^6 / 2^10</span></div><div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;<span class="comment">    * The rtt_lsw value is in 16.16 fixed point format and 5^6</span></div><div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;<span class="comment">    * requires 14 bits to represent.  We have enough space to</span></div><div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;<span class="comment">    * directly do the conversion because there is no integer</span></div><div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;<span class="comment">    * component in rtt_lsw.</span></div><div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;   rtt_tv.tv_usec = (rtt_lsw * 15625) &gt;&gt; 10;</div><div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;   rtp-&gt;rtcp-&gt;rtt = (double)rtt_tv.tv_sec + ((<span class="keywordtype">double</span>)rtt_tv.tv_usec / 1000000);</div><div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;   <span class="keywordflow">if</span> (lsr_a - dlsr &lt; lsr) {</div><div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;   }</div><div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;</div><div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;   rtp-&gt;rtcp-&gt;accumulated_transit += rtp-&gt;rtcp-&gt;rtt;</div><div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;rtcp-&gt;rtt_count == 0 || rtp-&gt;rtcp-&gt;minrtt &gt; rtp-&gt;rtcp-&gt;rtt) {</div><div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;      rtp-&gt;rtcp-&gt;minrtt = rtp-&gt;rtcp-&gt;rtt;</div><div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;   }</div><div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;rtcp-&gt;maxrtt &lt; rtp-&gt;rtcp-&gt;rtt) {</div><div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;      rtp-&gt;rtcp-&gt;maxrtt = rtp-&gt;rtcp-&gt;rtt;</div><div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;   }</div><div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;</div><div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;   <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a82df1dfe66fb8ab6832b5b8e9fa84d42">calc_mean_and_standard_deviation</a>(rtp-&gt;rtcp-&gt;rtt, &amp;rtp-&gt;rtcp-&gt;normdevrtt,</div><div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;      &amp;rtp-&gt;rtcp-&gt;stdevrtt, &amp;rtp-&gt;rtcp-&gt;rtt_count);</div><div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;</div><div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_ae07b5d23a23d4d09988c4a1c5d477d14"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ae07b5d23a23d4d09988c4a1c5d477d14">timeval2ntp</a></div><div class="ttdeci">static void timeval2ntp(struct timeval tv, unsigned int *msw, unsigned int *lsw)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04392">res_rtp_asterisk.c:4392</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a82df1dfe66fb8ab6832b5b8e9fa84d42"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a82df1dfe66fb8ab6832b5b8e9fa84d42">calc_mean_and_standard_deviation</a></div><div class="ttdeci">static void calc_mean_and_standard_deviation(double new_sample, double *mean, double *std_dev, unsigned int *count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03332">res_rtp_asterisk.c:3332</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aee504a29ee883de6e0ce2966da770566"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee504a29ee883de6e0ce2966da770566">&#9670;&nbsp;</a></span>use_random()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int use_random </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09207">9207</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09213">handle_cli_rtp_drop_incoming_packets()</a>.</p>
<div class="fragment"><div class="line"><a name="l09208"></a><span class="lineno"> 9208</span>&#160;{</div><div class="line"><a name="l09209"></a><span class="lineno"> 9209</span>&#160;   <span class="keywordflow">return</span> pos &gt;= index &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[index - 1]) &amp;&amp;</div><div class="line"><a name="l09210"></a><span class="lineno"> 9210</span>&#160;      !strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[index - 1], <span class="stringliteral">&quot;random&quot;</span>);</div><div class="line"><a name="l09211"></a><span class="lineno"> 9211</span>&#160;}</div><div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Asterisk <a class="el" href="../../d1/d94/sip_8h.html#ad5ec12ad08cacd2598d873052c72857a">RTP</a> Stack&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .<a class="el" href="../../dc/d6b/res__xmpp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> = <a class="el" href="../../d6/d80/test__res__prometheus_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a87717b8c3b913bbbb55297fc169086e0">AST_MODPRI_CHANNEL_DEPEND</a>, #ifdef 1 .requires = &quot;res_pjproject&quot;, #endif }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09742">9742</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="a322eb26fcd507fe69297e038d584db02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a322eb26fcd507fe69297e038d584db02">&#9670;&nbsp;</a></span>acl_change_sub</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a>* acl_change_sub = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00221">221</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09742">9742</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="a672515f1c9234da3fea2ee9eb38eee51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a672515f1c9234da3fea2ee9eb38eee51">&#9670;&nbsp;</a></span>ast_rtp_ice</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a> ast_rtp_ice</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01753">1753</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="ac0bfdc19ac1767b2a1f91b2933117370"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0bfdc19ac1767b2a1f91b2933117370">&#9670;&nbsp;</a></span>ast_rtp_ice_sess_cb</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pj_ice_sess_cb ast_rtp_ice_sess_cb</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02717">2717</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="aae2067eb81c35381a920185057614f31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae2067eb81c35381a920185057614f31">&#9670;&nbsp;</a></span>ast_rtp_test</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a> ast_rtp_test</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02472">2472</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="ad9c660bcc45ef01492a0442a3dbc6f1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9c660bcc45ef01492a0442a3dbc6f1d">&#9670;&nbsp;</a></span>ast_rtp_turn_rtcp_sock_cb</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pj_turn_sock_cb ast_rtp_turn_rtcp_sock_cb</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .on_rx_data = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a1efec75c83ae755c18e03d4d2ab53194">ast_rtp_on_turn_rx_rtcp_data</a>,</div><div class="line">   .on_state = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#ad5266b2beb9a54914609a5eceae3fb7d">ast_rtp_on_turn_rtcp_state</a>,</div><div class="line">}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a1efec75c83ae755c18e03d4d2ab53194"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a1efec75c83ae755c18e03d4d2ab53194">ast_rtp_on_turn_rx_rtcp_data</a></div><div class="ttdeci">static void ast_rtp_on_turn_rx_rtcp_data(pj_turn_sock *turn_sock, void *pkt, unsigned pkt_len, const pj_sockaddr_t *peer_addr, unsigned addr_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01388">res_rtp_asterisk.c:1388</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_ad5266b2beb9a54914609a5eceae3fb7d"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#ad5266b2beb9a54914609a5eceae3fb7d">ast_rtp_on_turn_rtcp_state</a></div><div class="ttdeci">static void ast_rtp_on_turn_rtcp_state(pj_turn_sock *turn_sock, pj_turn_state_t old_state, pj_turn_state_t new_state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01421">res_rtp_asterisk.c:1421</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01448">1448</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01577">ast_rtp_ice_turn_request()</a>.</p>

</div>
</div>
<a id="a8d2e62824f8d9acf79eae364ffa8f72f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d2e62824f8d9acf79eae364ffa8f72f">&#9670;&nbsp;</a></span>ast_rtp_turn_rtp_sock_cb</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pj_turn_sock_cb ast_rtp_turn_rtp_sock_cb</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .on_rx_data = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#aedc48ae04320ccc7f753027e4653b39a">ast_rtp_on_turn_rx_rtp_data</a>,</div><div class="line">   .on_state = <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a8d524e4dfca90561abb09f3d5f99e4c6">ast_rtp_on_turn_rtp_state</a>,</div><div class="line">}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a8d524e4dfca90561abb09f3d5f99e4c6"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a8d524e4dfca90561abb09f3d5f99e4c6">ast_rtp_on_turn_rtp_state</a></div><div class="ttdeci">static void ast_rtp_on_turn_rtp_state(pj_turn_sock *turn_sock, pj_turn_state_t old_state, pj_turn_state_t new_state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01355">res_rtp_asterisk.c:1355</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_aedc48ae04320ccc7f753027e4653b39a"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#aedc48ae04320ccc7f753027e4653b39a">ast_rtp_on_turn_rx_rtp_data</a></div><div class="ttdeci">static void ast_rtp_on_turn_rx_rtp_data(pj_turn_sock *turn_sock, void *pkt, unsigned pkt_len, const pj_sockaddr_t *peer_addr, unsigned addr_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01322">res_rtp_asterisk.c:1322</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01382">1382</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01577">ast_rtp_ice_turn_request()</a>.</p>

</div>
</div>
<a id="a44a4250e68a4aa76f545a8643afaf0fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44a4250e68a4aa76f545a8643afaf0fe">&#9670;&nbsp;</a></span>asterisk_rtp_engine</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/d14/structast__rtp__engine.html">ast_rtp_engine</a> asterisk_rtp_engine</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02484">2484</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="a12d9cba0dfd29f12cf2f87a4ab1252e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12d9cba0dfd29f12cf2f87a4ab1252e2">&#9670;&nbsp;</a></span>cachingpool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pj_caching_pool cachingpool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pool factory used by pjlib to allocate memory. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00233">233</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01577">ast_rtp_ice_turn_request()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03750">ice_create()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09624">load_module()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01512">rtp_ioqueue_thread_get_or_create()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09599">rtp_terminate_pjproject()</a>.</p>

</div>
</div>
<a id="aa5f5020c8ed253374c8aead44db57c16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5f5020c8ed253374c8aead44db57c16">&#9670;&nbsp;</a></span>cli_rtp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_rtp[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09336">9336</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="add0b2eb61bb2de637255dbac0520c955"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add0b2eb61bb2de637255dbac0520c955">&#9670;&nbsp;</a></span>drop_packets_data</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/d41/structrtp__drop__packets__data.html">rtp_drop_packets_data</a> drop_packets_data</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07551">7551</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07553">drop_packets_data_update()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09213">handle_cli_rtp_drop_incoming_packets()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07583">should_drop_packets()</a>.</p>

</div>
</div>
<a id="aead922624018c01780f0f060df89e6a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aead922624018c01780f0f060df89e6a7">&#9670;&nbsp;</a></span>dtmftimeout</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int dtmftimeout = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a3d5f788ed405ca3ab6a778892570b2a2">DEFAULT_DTMF_TIMEOUT</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00193">193</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09106">handle_cli_rtp_settings()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05506">process_dtmf_rfc2833()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a52af1a3effdd1dc6c012f8baf20c0071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52af1a3effdd1dc6c012f8baf20c0071">&#9670;&nbsp;</a></span>host_candidates</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/db0/structhost__candidates.html">host_candidates</a>   <a class="el" href="../../d7/db0/structhost__candidates.html">host_candidates</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aab6e5d05eb162134d044fec583e951d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab6e5d05eb162134d044fec583e951d1">&#9670;&nbsp;</a></span>ice_acl</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/da4/structast__acl__list.html">ast_acl_list</a>* ice_acl = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ACL for ICE addresses </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00225">225</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="aab7301990e5a8cbb0455c7efc4596ac5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab7301990e5a8cbb0455c7efc4596ac5">&#9670;&nbsp;</a></span>ice_acl_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a> ice_acl_lock = <a class="el" href="../../d4/dc5/extconf_8c.html#a3d58053904fa524e003b1a5ae7a5a8d6">AST_RWLOCK_INIT_VALUE</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00226">226</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="ab452a162adc04bec273fda937902e95e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab452a162adc04bec273fda937902e95e">&#9670;&nbsp;</a></span>icesupport</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int icesupport = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a1362d4944e44c2bb083c0d185b9685f6">DEFAULT_ICESUPPORT</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00214">214</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01734">ast_rtp_ice_change_components()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09106">handle_cli_rtp_settings()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">rtp_allocate_transport()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="abca34ec18925c5053c3c059b6338c003"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abca34ec18925c5053c3c059b6338c003">&#9670;&nbsp;</a></span>ioqueues</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/de0/structioqueues.html">ioqueues</a>   <a class="el" href="../../d2/de0/structioqueues.html">ioqueues</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a64079d5324b80886f3bafe6cfd8fa0b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64079d5324b80886f3bafe6cfd8fa0b4">&#9670;&nbsp;</a></span>learning_min_duration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int learning_min_duration = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af9e0d41ebd37d2b8e758b7fff48d31f0">DEFAULT_LEARNING_MIN_DURATION</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Lowest acceptable timeout between the first and the last sequential RTP frame. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00208">208</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03403">rtp_learning_rtp_seq_update()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a4ec95260935fbacc0443e815297e61bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ec95260935fbacc0443e815297e61bb">&#9670;&nbsp;</a></span>learning_min_sequential</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int learning_min_sequential = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a19b83f0b08541761e041bc81db287bce">DEFAULT_LEARNING_MIN_SEQUENTIAL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of sequential RTP frames needed from a single source during learning mode to accept new source. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00207">207</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09106">handle_cli_rtp_settings()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03403">rtp_learning_rtp_seq_update()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03386">rtp_learning_seq_init()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="ae3e4a18170e8b5a1f73042adc647455f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3e4a18170e8b5a1f73042adc647455f">&#9670;&nbsp;</a></span>lo6</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> lo6 = { .<a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = 0 }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00222">222</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="a885e6f9577102981b862e68b879057ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a885e6f9577102981b862e68b879057ce">&#9670;&nbsp;</a></span>pj_thread_storage</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> pj_thread_storage = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#acd1ff5e1228969321088d10842407b01">__init_pj_thread_storage</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00862">862</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00865">pj_thread_register_check()</a>.</p>

</div>
</div>
<a id="a2e57658a5d3ef6c4ef2774c9d5868e7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e57658a5d3ef6c4ef2774c9d5868e7c">&#9670;&nbsp;</a></span>pool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pj_pool_t* pool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global memory pool for configuration and timers. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">236</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dba/stringfields_8c_source.html#l00380">__ast_calloc_with_stringfields()</a>, <a class="el" href="../../d5/dba/stringfields_8c_source.html#l00261">__ast_string_field_release_active()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00491">activate_thread()</a>, <a class="el" href="../../d6/dd6/res__pjsip__header__funcs_8c_source.html#l00315">add_header()</a>, <a class="el" href="../../d5/dba/stringfields_8c_source.html#l00062">add_string_pool()</a>, <a class="el" href="../../d6/dd3/serializer_8c_source.html#l00076">ast_serializer_pool_create()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00288">AST_TEST_DEFINE()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02162">build_rlmi_body()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l00760">channel_read_pjsip()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04380">create_out_of_dialog_request()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>, <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00619">exten_state_publisher_cb()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02905">get_unused_callno()</a>, <a class="el" href="../../d6/dd6/res__pjsip__header__funcs_8c_source.html#l00196">incoming_request()</a>, <a class="el" href="../../d6/dd6/res__pjsip__header__funcs_8c_source.html#l00576">outgoing_request()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01121">parse_uri_cb()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00638">queued_emptied()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00838">queued_set_size()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00564">queued_task_pushed()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02982">replace_callno()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01332">serializer_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00814">set_size_data_alloc()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00935">sip_outbound_publisher_init()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l01603">sip_outbound_registration_regc_alloc()</a>, <a class="el" href="../../d4/d43/pjsip__resolver_8c_source.html#l00683">sip_replace_resolver()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01833">stasis_topic_pool_create()</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l01521">stringfield_handler_fn()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01750">subscription_persistence_load()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01684">subscription_persistence_recreate()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00466">task_pushed_data_alloc()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00214">thread_worker_pair_alloc()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00404">threadpool_alloc()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00386">threadpool_destructor()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00654">threadpool_tps_emptied()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00679">threadpool_tps_shutdown()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00610">threadpool_tps_task_pushed()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01744">topic_pool_dtor()</a>, <a class="el" href="../../d2/db8/res__pjsip__transport__websocket_8c_source.html#l00149">transport_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01093">worker_thread_alloc()</a>, and <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00745">zombify_threads()</a>.</p>

</div>
</div>
<a id="a0d5514f710438c5808ce30d0d35554c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d5514f710438c5808ce30d0d35554c2">&#9670;&nbsp;</a></span>res_srtp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d5d/structast__srtp__res.html">ast_srtp_res</a>* res_srtp</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00177">177</a> of file <a class="el" href="../../da/dbe/rtp__engine_8c_source.html">rtp_engine.c</a>.</p>

</div>
</div>
<a id="a566ad2621a8d1010836f3eaa2c1ddbe3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a566ad2621a8d1010836f3eaa2c1ddbe3">&#9670;&nbsp;</a></span>res_srtp_policy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d6/d13/structast__srtp__policy__res.html">ast_srtp_policy_res</a>* res_srtp_policy</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00178">178</a> of file <a class="el" href="../../da/dbe/rtp__engine_8c_source.html">rtp_engine.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02731">ast_rtp_engine_srtp_is_registered()</a>.</p>

</div>
</div>
<a id="a86444a258e6234bc5344daa32cbfdbdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86444a258e6234bc5344daa32cbfdbdd">&#9670;&nbsp;</a></span>rtcpdebugaddr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> rtcpdebugaddr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Debug RTCP packets to/from this host </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00200">200</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09145">handle_cli_rtcp_set_debug()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02762">rtcp_debug_test_addr()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09055">rtcp_do_debug_ip()</a>.</p>

</div>
</div>
<a id="a2f918344639d1c901edd21fe78342f1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f918344639d1c901edd21fe78342f1d">&#9670;&nbsp;</a></span>rtcpdebugport</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int rtcpdebugport</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Debug only RTCP packets from IP or IP+Port if port is &gt; 0 </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00202">202</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02762">rtcp_debug_test_addr()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09055">rtcp_do_debug_ip()</a>.</p>

</div>
</div>
<a id="a9426365d90a1b664b096a41d3a099a9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9426365d90a1b664b096a41d3a099a9f">&#9670;&nbsp;</a></span>rtcpinterval</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int rtcpinterval = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a3a8359edb63fbe2754be0314451ce8b3">RTCP_DEFAULT_INTERVALMS</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Time between rtcp reports in millisecs </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00198">198</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03323">ast_rtcp_calc_interval()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="af31fe34042d18a4597e04781f84f0e3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af31fe34042d18a4597e04781f84f0e3c">&#9670;&nbsp;</a></span>rtcpstats</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int rtcpstats</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Are we debugging RTCP? </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00197">197</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09178">handle_cli_rtcp_set_stats()</a>.</p>

</div>
</div>
<a id="a183791de441f6c5592785ed3f9043a50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a183791de441f6c5592785ed3f9043a50">&#9670;&nbsp;</a></span>rtpdebugaddr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> rtpdebugaddr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Debug packets to/from this host </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00199">199</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09072">handle_cli_rtp_set_debug()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">rtp_debug_test_addr()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09038">rtp_do_debug_ip()</a>.</p>

</div>
</div>
<a id="a057bbbbb7c8ac748932e093d251dc7bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a057bbbbb7c8ac748932e093d251dc7bf">&#9670;&nbsp;</a></span>rtpdebugport</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int rtpdebugport</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Debug only RTP packets from IP or IP+Port if port is &gt; 0 </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00201">201</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">rtp_debug_test_addr()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09038">rtp_do_debug_ip()</a>.</p>

</div>
</div>
<a id="a4b0895b04a97fb8d38e0f15dfed4c9e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b0895b04a97fb8d38e0f15dfed4c9e0">&#9670;&nbsp;</a></span>rtpend</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int rtpend = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a332be34df280794db6d6915c32ab842e">DEFAULT_RTP_END</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Last port for RTP sessions (set in rtp.conf) </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00196">196</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09106">handle_cli_rtp_settings()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">rtp_allocate_transport()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="aa3d9ba5adbb6566211600f0ab4a027c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3d9ba5adbb6566211600f0ab4a027c7">&#9670;&nbsp;</a></span>rtpstart</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int rtpstart = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aa01c54d6d9412e8278c7422dab8899e5">DEFAULT_RTP_START</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>First port for RTP sessions (set in rtp.conf) </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00195">195</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09106">handle_cli_rtp_settings()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">rtp_allocate_transport()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a62f7bf8eadfec58f81f33a8c90458f15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62f7bf8eadfec58f81f33a8c90458f15">&#9670;&nbsp;</a></span>srtp_replay_protection</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int srtp_replay_protection = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a73b8af2a30d6bdd4dc566f24ddb2f51f">DEFAULT_SRTP_REPLAY_PROTECTION</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00209">209</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07200">ast_rtp_interpret()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09106">handle_cli_rtp_settings()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a96336b3ac9e5b66f365f0ca5ba613995"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96336b3ac9e5b66f365f0ca5ba613995">&#9670;&nbsp;</a></span>strictrtp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int strictrtp = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#aeb729ec664cf95a04d65276f08a80b24">DEFAULT_STRICT_RTP</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Only accept RTP frames from a defined source. If we receive an indication of a changing source, enter learning mode. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00206">206</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02581">ast_rtp_ice_start_media()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08497">ast_rtp_remote_address_set()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09106">handle_cli_rtp_settings()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">rtp_allocate_transport()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03403">rtp_learning_rtp_seq_update()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a49055c15c8722fe931745104670be0c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49055c15c8722fe931745104670be0c5">&#9670;&nbsp;</a></span>stun_acl</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/da4/structast__acl__list.html">ast_acl_list</a>* stun_acl = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ACL for STUN requests </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00229">229</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a453b496a5a02d8741bf2e52675f13a39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a453b496a5a02d8741bf2e52675f13a39">&#9670;&nbsp;</a></span>stun_acl_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a> stun_acl_lock = <a class="el" href="../../d4/dc5/extconf_8c.html#a3d58053904fa524e003b1a5ae7a5a8d6">AST_RWLOCK_INIT_VALUE</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00230">230</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

</div>
</div>
<a id="aac9d720f1922d92f186b0df72b624ea0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac9d720f1922d92f186b0df72b624ea0">&#9670;&nbsp;</a></span>stun_software_attribute</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int stun_software_attribute = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af927b84002d0ac80345425c105ed0d10">DEFAULT_STUN_SOFTWARE_ATTRIBUTE</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00215">215</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01577">ast_rtp_ice_turn_request()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03750">ice_create()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a53f406ef990fb9279d21572104158ab2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53f406ef990fb9279d21572104158ab2">&#9670;&nbsp;</a></span>stunaddr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct sockaddr_in stunaddr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00216">216</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="ae9f993fcad1fd49cb50f4a541101ccb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9f993fcad1fd49cb50f4a541101ccb7">&#9670;&nbsp;</a></span>timer_heap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pj_timer_heap_t* timer_heap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global timer heap. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00239">239</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01031">ast_rtp_ice_start()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03750">ice_create()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09624">load_module()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02727">timer_worker_thread()</a>.</p>

</div>
</div>
<a id="a7fb15032ffb90f20278960e03525e479"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fb15032ffb90f20278960e03525e479">&#9670;&nbsp;</a></span>timer_terminate</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int timer_terminate</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used to tell the timer thread to terminate. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00245">245</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09599">rtp_terminate_pjproject()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02727">timer_worker_thread()</a>.</p>

</div>
</div>
<a id="af4ede498f08f6025306ce45fe163f298"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4ede498f08f6025306ce45fe163f298">&#9670;&nbsp;</a></span>timer_thread</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pj_thread_t* timer_thread</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Thread executing the timer heap. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00242">242</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09624">load_module()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09599">rtp_terminate_pjproject()</a>.</p>

</div>
</div>
<a id="a97d66f714d8a621c7e6deb9ca3ce407a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97d66f714d8a621c7e6deb9ca3ce407a">&#9670;&nbsp;</a></span>turnaddr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pj_str_t turnaddr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00217">217</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="ac2c7ecf8b1b5d36e9b8601c19aece7b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2c7ecf8b1b5d36e9b8601c19aece7b4">&#9670;&nbsp;</a></span>turnpassword</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pj_str_t turnpassword</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00220">220</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="ad251f81e8d409b245b9f2ce9993e1df7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad251f81e8d409b245b9f2ce9993e1df7">&#9670;&nbsp;</a></span>turnport</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int turnport = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#af54f297bc8f157b342b0fe94bbbbb899">DEFAULT_TURN_PORT</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00218">218</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
<a id="a54c70c91c4221587d7f59bf536539780"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54c70c91c4221587d7f59bf536539780">&#9670;&nbsp;</a></span>turnusername</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pj_str_t turnusername</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00219">219</a> of file <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html">res_rtp_asterisk.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:38 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
