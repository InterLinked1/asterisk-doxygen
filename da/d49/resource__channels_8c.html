<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: resource_channels.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li><li class="navelem"><a class="el" href="../../dir_56719ce594c15012aa0938d836a11a62.html">ari</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">resource_channels.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation for ARI stubs.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d4d/file_8h_source.html">asterisk/file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d56/bridge_8h_source.html">asterisk/bridge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d47/callerid_8h_source.html">asterisk/callerid.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d9c/stasis__app_8h_source.html">asterisk/stasis_app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d1e/stasis__app__playback_8h_source.html">asterisk/stasis_app_playback.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/dda/stasis__app__recording_8h_source.html">asterisk/stasis_app_recording.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d9b/stasis__app__snoop_8h_source.html">asterisk/stasis_app_snoop.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d4a/stasis__channels_8h_source.html">asterisk/stasis_channels.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/da3/causes_8h_source.html">asterisk/causes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d1c/format__cache_8h_source.html">asterisk/format_cache.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da6/core__local_8h_source.html">asterisk/core_local.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/dcf/dial_8h_source.html">asterisk/dial.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d93/max__forwards_8h_source.html">asterisk/max_forwards.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/dde/rtp__engine_8h_source.html">asterisk/rtp_engine.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d12/resource__channels_8h_source.html">resource_channels.h</a>&quot;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/df1/netsock2_8h_source.html">asterisk/netsock2.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for resource_channels.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d32/resource__channels_8c__incl.png" border="0" usemap="#resource__channels_8c" alt=""/></div>
<map name="resource__channels_8c" id="resource__channels_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="527,393,611,420"/>
<area shape="rect" id="node7" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="111,393,217,420"/>
<area shape="rect" id="node10" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="543,244,654,271"/>
<area shape="rect" id="node16" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1407,393,1534,420"/>
<area shape="rect" id="node27" href="../../d4/d56/bridge_8h.html" title="Bridging API. " alt="" coords="1176,87,1304,114"/>
<area shape="rect" id="node33" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr..." alt="" coords="2577,244,2711,271"/>
<area shape="rect" id="node34" href="../../d8/d9c/stasis__app_8h.html" title="Stasis Application API. See Stasis Application API for detailed documentation. " alt="" coords="598,169,754,196"/>
<area shape="rect" id="node35" href="../../d3/d1e/stasis__app__playback_8h.html" title="Stasis Application Playback API. See StasisApplication API&quot; for detailed documentation. " alt="" coords="1005,80,1149,121"/>
<area shape="rect" id="node36" href="../../d2/dda/stasis__app__recording_8h.html" title="Stasis Application Recording API. See StasisApplication API&quot; for detailed documentation. " alt="" coords="604,80,748,121"/>
<area shape="rect" id="node38" href="../../d7/d9b/stasis__app__snoop_8h.html" title="Stasis Application Snoop API. See StasisApplication API&quot; for detailed documentation. " alt="" coords="775,80,919,121"/>
<area shape="rect" id="node39" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="1555,244,1744,271"/>
<area shape="rect" id="node40" href="../../d4/da3/causes_8h.html" title="Internal Asterisk hangup causes. " alt="" coords="1656,87,1789,114"/>
<area shape="rect" id="node41" href="../../db/d1c/format__cache_8h.html" title="Media Format Cache API. " alt="" coords="1813,87,1989,114"/>
<area shape="rect" id="node42" href="../../d5/da6/core__local_8h.html" title="Local proxy channel special access. " alt="" coords="2013,87,2165,114"/>
<area shape="rect" id="node43" href="../../df/dcf/dial_8h.html" title="Dialing API. " alt="" coords="2190,87,2301,114"/>
<area shape="rect" id="node44" href="../../d3/d93/max__forwards_8h.html" title="asterisk/max_forwards.h" alt="" coords="2325,87,2502,114"/>
<area shape="rect" id="node45" href="../../d5/dde/rtp__engine_8h.html" title="Pluggable RTP Architecture. " alt="" coords="1802,244,1958,271"/>
<area shape="rect" id="node46" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="2249,319,2396,345"/>
<area shape="rect" id="node49" href="../../d0/d12/resource__channels_8h.html" title="Generated file &#45; declares stubs to be implemented in res/ari/resource_channels.c. ..." alt="" coords="2628,87,2783,114"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="415,468,569,495"/>
<area shape="rect" id="node4" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="753,468,890,495"/>
<area shape="rect" id="node6" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="594,468,729,495"/>
<area shape="rect" id="node11" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1300,319,1439,345"/>
<area shape="rect" id="node14" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="1808,468,1939,495"/>
<area shape="rect" id="node15" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="873,393,1020,420"/>
<area shape="rect" id="node18" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1189,543,1347,569"/>
<area shape="rect" id="node22" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="790,319,917,345"/>
<area shape="rect" id="node23" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="687,393,849,420"/>
<area shape="rect" id="node24" href="../../d6/dd7/presencestate_8h.html" title="Presence state management. " alt="" coords="217,319,397,345"/>
<area shape="rect" id="node25" href="../../d6/da0/hashtab_8h.html" title="Generic (perhaps overly so) hashtable implementation Hash Table support in Asterisk. " alt="" coords="421,319,561,345"/>
<area shape="rect" id="node26" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="255,468,390,495"/>
<area shape="rect" id="node12" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1045,393,1179,420"/>
<area shape="rect" id="node13" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1709,393,1835,420"/>
<area shape="rect" id="node17" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1309,468,1424,495"/>
<area shape="rect" id="node20" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="1911,393,2073,420"/>
<area shape="rect" id="node21" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1559,393,1684,420"/>
<area shape="rect" id="node19" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="1677,617,1803,644"/>
<area shape="rect" id="node28" href="../../dc/d7a/bridge__features_8h.html" title="Channel Bridging API. " alt="" coords="1275,244,1463,271"/>
<area shape="rect" id="node29" href="../../de/d41/bridge__channel_8h.html" title="asterisk/bridge_channel.h" alt="" coords="1294,169,1479,196"/>
<area shape="rect" id="node30" href="../../dd/dff/bridge__roles_8h.html" title="Channel Bridging Roles API. " alt="" coords="778,169,945,196"/>
<area shape="rect" id="node31" href="../../d3/d08/dsp_8h.html" title="Convenient Signal Processing routines. " alt="" coords="969,169,1079,196"/>
<area shape="rect" id="node32" href="../../dd/d1d/uuid_8h.html" title="Universally unique identifier support. " alt="" coords="1104,169,1219,196"/>
<area shape="rect" id="node37" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="1161,319,1273,345"/>
<area shape="rect" id="node47" href="../../de/d15/res__srtp_8h.html" title="SRTP resource. " alt="" coords="942,319,1082,345"/>
<area shape="rect" id="node48" href="../../d5/d1f/logger__category_8h.html" title="asterisk/logger_category.h" alt="" coords="1985,319,2175,345"/>
<area shape="rect" id="node50" href="../../d4/d59/ari_8h.html" title="Asterisk RESTful API hooks. " alt="" coords="2653,169,2757,196"/>
</map>
</div>
</div>
<p><a href="../../da/d49/resource__channels_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da0/structari__channel__thread__data.html">ari_channel_thread_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/structari__origination.html">ari_origination</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure used for origination.  <a href="../../dc/d0a/structari__origination.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5058ddcf172fc5b80c347b550e52f07f"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a5058ddcf172fc5b80c347b550e52f07f">ari_channel_thread</a> (void *data)</td></tr>
<tr class="memdesc:a5058ddcf172fc5b80c347b550e52f07f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread that owns stasis-created channel.  <a href="#a5058ddcf172fc5b80c347b550e52f07f">More...</a><br /></td></tr>
<tr class="separator:a5058ddcf172fc5b80c347b550e52f07f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adabbeff7b065e96d9fcbda18e9b767d6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#adabbeff7b065e96d9fcbda18e9b767d6">ari_channels_handle_originate_with_id</a> (const char *args_endpoint, const char *args_extension, const char *args_context, long args_priority, const char *args_label, const char *args_app, const char *args_app_args, const char *args_caller_id, int args_timeout, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *variables, const char *args_channel_id, const char *args_other_channel_id, const char *args_originator, const char *args_formats, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="separator:adabbeff7b065e96d9fcbda18e9b767d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cdd339bf3a0e57ea054c9ec104ab3f1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a8cdd339bf3a0e57ea054c9ec104ab3f1">ari_channels_handle_play</a> (const char *args_channel_id, const char **args_media, size_t args_media_count, const char *args_lang, int args_offsetms, int args_skipms, const char *args_playback_id, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="separator:a8cdd339bf3a0e57ea054c9ec104ab3f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a655d672545a5b964e9c29460f84087de"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a655d672545a5b964e9c29460f84087de">ari_channels_handle_snoop_channel</a> (const char *args_channel_id, const char *args_spy, const char *args_whisper, const char *args_app, const char *args_app_args, const char *args_snoop_id, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="separator:a655d672545a5b964e9c29460f84087de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef2fdd31656ca13eb0110765d08d58a9"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#aef2fdd31656ca13eb0110765d08d58a9">ari_originate_dial</a> (void *data)</td></tr>
<tr class="memdesc:aef2fdd31656ca13eb0110765d08d58a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread which dials and executes upon answer.  <a href="#aef2fdd31656ca13eb0110765d08d58a9">More...</a><br /></td></tr>
<tr class="separator:aef2fdd31656ca13eb0110765d08d58a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae241e0de2eb76668b2787082a8e4bfed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#ae241e0de2eb76668b2787082a8e4bfed">ast_ari_channels_answer</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d7/dab/structast__ari__channels__answer__args.html">ast_ari_channels_answer_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:ae241e0de2eb76668b2787082a8e4bfed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Answer a channel.  <a href="#ae241e0de2eb76668b2787082a8e4bfed">More...</a><br /></td></tr>
<tr class="separator:ae241e0de2eb76668b2787082a8e4bfed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a96dad5738a3ba68b791950c290489e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a2a96dad5738a3ba68b791950c290489e">ast_ari_channels_continue_in_dialplan</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html">ast_ari_channels_continue_in_dialplan_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a2a96dad5738a3ba68b791950c290489e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exit application; continue execution in the dialplan.  <a href="#a2a96dad5738a3ba68b791950c290489e">More...</a><br /></td></tr>
<tr class="separator:a2a96dad5738a3ba68b791950c290489e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f503526cff34c71a16e47d6d6970ec9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a5f503526cff34c71a16e47d6d6970ec9">ast_ari_channels_create</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../df/d7b/structast__ari__channels__create__args.html">ast_ari_channels_create_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a5f503526cff34c71a16e47d6d6970ec9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create channel.  <a href="#a5f503526cff34c71a16e47d6d6970ec9">More...</a><br /></td></tr>
<tr class="separator:a5f503526cff34c71a16e47d6d6970ec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57ed0fe9c2bb5594ae0aa2f4ae6c7925"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a57ed0fe9c2bb5594ae0aa2f4ae6c7925">ast_ari_channels_dial</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../dc/d0a/structast__ari__channels__dial__args.html">ast_ari_channels_dial_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a57ed0fe9c2bb5594ae0aa2f4ae6c7925"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dial a created channel.  <a href="#a57ed0fe9c2bb5594ae0aa2f4ae6c7925">More...</a><br /></td></tr>
<tr class="separator:a57ed0fe9c2bb5594ae0aa2f4ae6c7925"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a091a02f441a6bd33bf7e182eb4cf88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a8a091a02f441a6bd33bf7e182eb4cf88">ast_ari_channels_external_media</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d4/d79/structast__ari__channels__external__media__args.html">ast_ari_channels_external_media_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a8a091a02f441a6bd33bf7e182eb4cf88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start an External Media session.  <a href="#a8a091a02f441a6bd33bf7e182eb4cf88">More...</a><br /></td></tr>
<tr class="separator:a8a091a02f441a6bd33bf7e182eb4cf88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67d391d1a687554cadc6279d9681deff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a67d391d1a687554cadc6279d9681deff">ast_ari_channels_get</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../da/d43/structast__ari__channels__get__args.html">ast_ari_channels_get_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a67d391d1a687554cadc6279d9681deff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Channel details.  <a href="#a67d391d1a687554cadc6279d9681deff">More...</a><br /></td></tr>
<tr class="separator:a67d391d1a687554cadc6279d9681deff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7c6b49c77262a70632c57e2fd2f1d9c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#af7c6b49c77262a70632c57e2fd2f1d9c">ast_ari_channels_get_channel_var</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d3/d45/structast__ari__channels__get__channel__var__args.html">ast_ari_channels_get_channel_var_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:af7c6b49c77262a70632c57e2fd2f1d9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the value of a channel variable or function.  <a href="#af7c6b49c77262a70632c57e2fd2f1d9c">More...</a><br /></td></tr>
<tr class="separator:af7c6b49c77262a70632c57e2fd2f1d9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd2c4f6f8cf58d3a5915f228db163f9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#afd2c4f6f8cf58d3a5915f228db163f9f">ast_ari_channels_hangup</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d0/d4a/structast__ari__channels__hangup__args.html">ast_ari_channels_hangup_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:afd2c4f6f8cf58d3a5915f228db163f9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete (i.e. hangup) a channel.  <a href="#afd2c4f6f8cf58d3a5915f228db163f9f">More...</a><br /></td></tr>
<tr class="separator:afd2c4f6f8cf58d3a5915f228db163f9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad54807440a3081f8a6b4738b1e3bdae7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#ad54807440a3081f8a6b4738b1e3bdae7">ast_ari_channels_hold</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../de/d93/structast__ari__channels__hold__args.html">ast_ari_channels_hold_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:ad54807440a3081f8a6b4738b1e3bdae7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hold a channel.  <a href="#ad54807440a3081f8a6b4738b1e3bdae7">More...</a><br /></td></tr>
<tr class="separator:ad54807440a3081f8a6b4738b1e3bdae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63bcc604de596210352572bbd343cd07"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a63bcc604de596210352572bbd343cd07">ast_ari_channels_list</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../dd/d73/structast__ari__channels__list__args.html">ast_ari_channels_list_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a63bcc604de596210352572bbd343cd07"><td class="mdescLeft">&#160;</td><td class="mdescRight">List all active channels in Asterisk.  <a href="#a63bcc604de596210352572bbd343cd07">More...</a><br /></td></tr>
<tr class="separator:a63bcc604de596210352572bbd343cd07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ca676026e7e5be027877f6b66f7518d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a4ca676026e7e5be027877f6b66f7518d">ast_ari_channels_move</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d3/d9c/structast__ari__channels__move__args.html">ast_ari_channels_move_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a4ca676026e7e5be027877f6b66f7518d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the channel from one Stasis application to another.  <a href="#a4ca676026e7e5be027877f6b66f7518d">More...</a><br /></td></tr>
<tr class="separator:a4ca676026e7e5be027877f6b66f7518d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2035a897d37e8521128413c016af1f52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a2035a897d37e8521128413c016af1f52">ast_ari_channels_mute</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d6/d52/structast__ari__channels__mute__args.html">ast_ari_channels_mute_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a2035a897d37e8521128413c016af1f52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mute a channel.  <a href="#a2035a897d37e8521128413c016af1f52">More...</a><br /></td></tr>
<tr class="separator:a2035a897d37e8521128413c016af1f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadacf2de49d7e9ae8233cf8be2c872c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#aadacf2de49d7e9ae8233cf8be2c872c0">ast_ari_channels_originate</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d3/db9/structast__ari__channels__originate__args.html">ast_ari_channels_originate_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:aadacf2de49d7e9ae8233cf8be2c872c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new channel (originate).  <a href="#aadacf2de49d7e9ae8233cf8be2c872c0">More...</a><br /></td></tr>
<tr class="separator:aadacf2de49d7e9ae8233cf8be2c872c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcf5a51ee745cc08ee8c98e2b7785e73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#afcf5a51ee745cc08ee8c98e2b7785e73">ast_ari_channels_originate_with_id</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../df/daf/structast__ari__channels__originate__with__id__args.html">ast_ari_channels_originate_with_id_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:afcf5a51ee745cc08ee8c98e2b7785e73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new channel (originate with id).  <a href="#afcf5a51ee745cc08ee8c98e2b7785e73">More...</a><br /></td></tr>
<tr class="separator:afcf5a51ee745cc08ee8c98e2b7785e73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b9be2fa18cd942fc8c5a2e1e39b58be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a7b9be2fa18cd942fc8c5a2e1e39b58be">ast_ari_channels_play</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../da/d51/structast__ari__channels__play__args.html">ast_ari_channels_play_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a7b9be2fa18cd942fc8c5a2e1e39b58be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start playback of media.  <a href="#a7b9be2fa18cd942fc8c5a2e1e39b58be">More...</a><br /></td></tr>
<tr class="separator:a7b9be2fa18cd942fc8c5a2e1e39b58be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae34afc3a59bf4e44f369dcb3358f7217"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#ae34afc3a59bf4e44f369dcb3358f7217">ast_ari_channels_play_with_id</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../da/d8a/structast__ari__channels__play__with__id__args.html">ast_ari_channels_play_with_id_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:ae34afc3a59bf4e44f369dcb3358f7217"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start playback of media and specify the playbackId.  <a href="#ae34afc3a59bf4e44f369dcb3358f7217">More...</a><br /></td></tr>
<tr class="separator:ae34afc3a59bf4e44f369dcb3358f7217"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abde7fe420c8dbbe7c60d156f3b986e35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#abde7fe420c8dbbe7c60d156f3b986e35">ast_ari_channels_record</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../db/d9a/structast__ari__channels__record__args.html">ast_ari_channels_record_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:abde7fe420c8dbbe7c60d156f3b986e35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a recording.  <a href="#abde7fe420c8dbbe7c60d156f3b986e35">More...</a><br /></td></tr>
<tr class="separator:abde7fe420c8dbbe7c60d156f3b986e35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3e9c39760f9c9ae5a5fc3d9c4d9041e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#ab3e9c39760f9c9ae5a5fc3d9c4d9041e">ast_ari_channels_redirect</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d9/d7e/structast__ari__channels__redirect__args.html">ast_ari_channels_redirect_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:ab3e9c39760f9c9ae5a5fc3d9c4d9041e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Redirect the channel to a different location.  <a href="#ab3e9c39760f9c9ae5a5fc3d9c4d9041e">More...</a><br /></td></tr>
<tr class="separator:ab3e9c39760f9c9ae5a5fc3d9c4d9041e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b5e826b942b1a1ff8060d81251a24d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a7b5e826b942b1a1ff8060d81251a24d8">ast_ari_channels_ring</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../db/dcb/structast__ari__channels__ring__args.html">ast_ari_channels_ring_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a7b5e826b942b1a1ff8060d81251a24d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicate ringing to a channel.  <a href="#a7b5e826b942b1a1ff8060d81251a24d8">More...</a><br /></td></tr>
<tr class="separator:a7b5e826b942b1a1ff8060d81251a24d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9130974673a9376da2b6c97ba6519671"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a9130974673a9376da2b6c97ba6519671">ast_ari_channels_ring_stop</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../db/d8f/structast__ari__channels__ring__stop__args.html">ast_ari_channels_ring_stop_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a9130974673a9376da2b6c97ba6519671"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop ringing indication on a channel if locally generated.  <a href="#a9130974673a9376da2b6c97ba6519671">More...</a><br /></td></tr>
<tr class="separator:a9130974673a9376da2b6c97ba6519671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1b9ce4dd370e0a2f8404c730d5b229b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#af1b9ce4dd370e0a2f8404c730d5b229b">ast_ari_channels_rtpstatistics</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d3/d1e/structast__ari__channels__rtpstatistics__args.html">ast_ari_channels_rtpstatistics_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:af1b9ce4dd370e0a2f8404c730d5b229b"><td class="mdescLeft">&#160;</td><td class="mdescRight">RTP stats on a channel.  <a href="#af1b9ce4dd370e0a2f8404c730d5b229b">More...</a><br /></td></tr>
<tr class="separator:af1b9ce4dd370e0a2f8404c730d5b229b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d7aac99c9ff1eb710c08e0cb92925d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a4d7aac99c9ff1eb710c08e0cb92925d9">ast_ari_channels_send_dtmf</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../db/ddb/structast__ari__channels__send__dtmf__args.html">ast_ari_channels_send_dtmf_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a4d7aac99c9ff1eb710c08e0cb92925d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send provided DTMF to a given channel.  <a href="#a4d7aac99c9ff1eb710c08e0cb92925d9">More...</a><br /></td></tr>
<tr class="separator:a4d7aac99c9ff1eb710c08e0cb92925d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0e605f0adad4ccc68307360d5341703"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#ad0e605f0adad4ccc68307360d5341703">ast_ari_channels_set_channel_var</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../dc/d11/structast__ari__channels__set__channel__var__args.html">ast_ari_channels_set_channel_var_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:ad0e605f0adad4ccc68307360d5341703"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the value of a channel variable or function.  <a href="#ad0e605f0adad4ccc68307360d5341703">More...</a><br /></td></tr>
<tr class="separator:ad0e605f0adad4ccc68307360d5341703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f05a19a4fe88e1092da40aa63e7419c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a6f05a19a4fe88e1092da40aa63e7419c">ast_ari_channels_snoop_channel</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d0/dbd/structast__ari__channels__snoop__channel__args.html">ast_ari_channels_snoop_channel_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a6f05a19a4fe88e1092da40aa63e7419c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start snooping.  <a href="#a6f05a19a4fe88e1092da40aa63e7419c">More...</a><br /></td></tr>
<tr class="separator:a6f05a19a4fe88e1092da40aa63e7419c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2803870934fb15daac73e7a893429746"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a2803870934fb15daac73e7a893429746">ast_ari_channels_snoop_channel_with_id</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d2/d35/structast__ari__channels__snoop__channel__with__id__args.html">ast_ari_channels_snoop_channel_with_id_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a2803870934fb15daac73e7a893429746"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start snooping.  <a href="#a2803870934fb15daac73e7a893429746">More...</a><br /></td></tr>
<tr class="separator:a2803870934fb15daac73e7a893429746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bf6d78eb5f251bca4495b4b2f24a4d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a2bf6d78eb5f251bca4495b4b2f24a4d8">ast_ari_channels_start_moh</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../da/d5e/structast__ari__channels__start__moh__args.html">ast_ari_channels_start_moh_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a2bf6d78eb5f251bca4495b4b2f24a4d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Play music on hold to a channel.  <a href="#a2bf6d78eb5f251bca4495b4b2f24a4d8">More...</a><br /></td></tr>
<tr class="separator:a2bf6d78eb5f251bca4495b4b2f24a4d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c5a4f6f2a24dd28faba6da106ece533"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a9c5a4f6f2a24dd28faba6da106ece533">ast_ari_channels_start_silence</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d0/d8f/structast__ari__channels__start__silence__args.html">ast_ari_channels_start_silence_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a9c5a4f6f2a24dd28faba6da106ece533"><td class="mdescLeft">&#160;</td><td class="mdescRight">Play silence to a channel.  <a href="#a9c5a4f6f2a24dd28faba6da106ece533">More...</a><br /></td></tr>
<tr class="separator:a9c5a4f6f2a24dd28faba6da106ece533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c7c1882dd8f846387c888c1e0e01488"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a4c7c1882dd8f846387c888c1e0e01488">ast_ari_channels_stop_moh</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../db/d4f/structast__ari__channels__stop__moh__args.html">ast_ari_channels_stop_moh_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a4c7c1882dd8f846387c888c1e0e01488"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop playing music on hold to a channel.  <a href="#a4c7c1882dd8f846387c888c1e0e01488">More...</a><br /></td></tr>
<tr class="separator:a4c7c1882dd8f846387c888c1e0e01488"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7be486b7059728560767ab02d5f48d24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a7be486b7059728560767ab02d5f48d24">ast_ari_channels_stop_silence</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../db/d6d/structast__ari__channels__stop__silence__args.html">ast_ari_channels_stop_silence_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a7be486b7059728560767ab02d5f48d24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop playing silence to a channel.  <a href="#a7be486b7059728560767ab02d5f48d24">More...</a><br /></td></tr>
<tr class="separator:a7be486b7059728560767ab02d5f48d24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacc7d2140c3486c4450357c2e2ee8aae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#aacc7d2140c3486c4450357c2e2ee8aae">ast_ari_channels_unhold</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d3/def/structast__ari__channels__unhold__args.html">ast_ari_channels_unhold_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:aacc7d2140c3486c4450357c2e2ee8aae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a channel from hold.  <a href="#aacc7d2140c3486c4450357c2e2ee8aae">More...</a><br /></td></tr>
<tr class="separator:aacc7d2140c3486c4450357c2e2ee8aae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5027aca3be026ac1616a3db34673ccae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a5027aca3be026ac1616a3db34673ccae">ast_ari_channels_unmute</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d4/d62/structast__ari__channels__unmute__args.html">ast_ari_channels_unmute_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a5027aca3be026ac1616a3db34673ccae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unmute a channel.  <a href="#a5027aca3be026ac1616a3db34673ccae">More...</a><br /></td></tr>
<tr class="separator:a5027aca3be026ac1616a3db34673ccae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc1511336d756ef90e6413691dc9bbd9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#acc1511336d756ef90e6413691dc9bbd9">chan_data_destroy</a> (struct <a class="el" href="../../db/da0/structari__channel__thread__data.html">ari_channel_thread_data</a> *chan_data)</td></tr>
<tr class="separator:acc1511336d756ef90e6413691dc9bbd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a584f5ec1d637b285149ea0e2adda14"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a> (struct <a class="el" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *control, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a4a584f5ec1d637b285149ea0e2adda14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensure channel is in a state that allows operation to be performed.  <a href="#a4a584f5ec1d637b285149ea0e2adda14">More...</a><br /></td></tr>
<tr class="separator:a4a584f5ec1d637b285149ea0e2adda14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac739d5c5082c4bd26cb5032fbcb4ec5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#aac739d5c5082c4bd26cb5032fbcb4ec5">convert_reason_to_hangup_code</a> (const char *reason)</td></tr>
<tr class="memdesc:aac739d5c5082c4bd26cb5032fbcb4ec5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the corresponded hangup code of the given reason.  <a href="#aac739d5c5082c4bd26cb5032fbcb4ec5">More...</a><br /></td></tr>
<tr class="separator:aac739d5c5082c4bd26cb5032fbcb4ec5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9ffeec3f2fc137675ad6e02f3e1599d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#aa9ffeec3f2fc137675ad6e02f3e1599d">external_media_audiosocket_tcp</a> (struct <a class="el" href="../../d4/d79/structast__ari__channels__external__media__args.html">ast_ari_channels_external_media_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *variables, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="separator:aa9ffeec3f2fc137675ad6e02f3e1599d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adda4979bdaa42a510f1d0cdce1203335"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#adda4979bdaa42a510f1d0cdce1203335">external_media_rtp_udp</a> (struct <a class="el" href="../../d4/d79/structast__ari__channels__external__media__args.html">ast_ari_channels_external_media_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *variables, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="separator:adda4979bdaa42a510f1d0cdce1203335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa387156928d3e984b7baa570ca682f08"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a> (struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response, const char *channel_id)</td></tr>
<tr class="memdesc:aa387156928d3e984b7baa570ca682f08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the control object for a channel, filling the response with an error, if appropriate.  <a href="#aa387156928d3e984b7baa570ca682f08">More...</a><br /></td></tr>
<tr class="separator:aa387156928d3e984b7baa570ca682f08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61d455b941bd7ebf96bcbf5532fefe07"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a61d455b941bd7ebf96bcbf5532fefe07">json_to_ast_variables</a> (struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response, struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *json_variables, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> **variables)</td></tr>
<tr class="separator:a61d455b941bd7ebf96bcbf5532fefe07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b2777ad2a9db2b9c6ccf6dc154d4bda"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a0b2777ad2a9db2b9c6ccf6dc154d4bda">restore_dialstring</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="memdesc:a0b2777ad2a9db2b9c6ccf6dc154d4bda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the dialstring from the channel datastore.  <a href="#a0b2777ad2a9db2b9c6ccf6dc154d4bda">More...</a><br /></td></tr>
<tr class="separator:a0b2777ad2a9db2b9c6ccf6dc154d4bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b84e505ab86638f12468c497a390d64"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a1b84e505ab86638f12468c497a390d64">save_dialstring</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *dialstring)</td></tr>
<tr class="memdesc:a1b84e505ab86638f12468c497a390d64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save dialstring onto a channel datastore.  <a href="#a1b84e505ab86638f12468c497a390d64">More...</a><br /></td></tr>
<tr class="separator:a1b84e505ab86638f12468c497a390d64"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6f1baa247f4fa0cb280191a9607e4ab0"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d49/resource__channels_8c.html#a6f1baa247f4fa0cb280191a9607e4ab0">dialstring_info</a></td></tr>
<tr class="separator:a6f1baa247f4fa0cb280191a9607e4ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation for ARI stubs. </p>
<dl class="section author"><dt>Author</dt><dd>David M. Lee, II <a href="#" onclick="location.href='mai'+'lto:'+'dle'+'e@'+'dig'+'iu'+'m.c'+'om'; return false;">dlee@<span style="display: none;">.nosp@m.</span>digi<span style="display: none;">.nosp@m.</span>um.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a5058ddcf172fc5b80c347b550e52f07f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5058ddcf172fc5b80c347b550e52f07f">&#9670;&nbsp;</a></span>ari_channel_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* ari_channel_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Thread that owns stasis-created channel. </p>
<p>The channel enters into a Stasis application immediately upon creation. In this way, the channel can be manipulated by the Stasis application. Once the channel exits the Stasis application, it is hung up. </p>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01698">1698</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01680">ari_channel_thread_data::chan</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01684">chan_data_destroy()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d16/pbx__app_8c_source.html#l00471">pbx_exec()</a>, <a class="el" href="../../d2/db7/ael__main_8c_source.html#l00165">pbx_findapp()</a>, and <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01681">ari_channel_thread_data::stasis_stuff</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01778">ast_ari_channels_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;{</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/da0/structari__channel__thread__data.html">ari_channel_thread_data</a> *chan_data = data;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/da3/structast__app.html">ast_app</a> *<a class="code" href="../../d4/de3/structstasis__app.html">stasis_app</a>;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;   stasis_app = <a class="code" href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a>(<span class="stringliteral">&quot;Stasis&quot;</span>);</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;   <span class="keywordflow">if</span> (!stasis_app) {</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Stasis dialplan application is not registered&quot;</span>);</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      <a class="code" href="../../da/d49/resource__channels_8c.html#acc1511336d756ef90e6413691dc9bbd9">chan_data_destroy</a>(chan_data);</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;   }</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a>(chan_data-&gt;<a class="code" href="../../db/da0/structari__channel__thread__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, stasis_app, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(chan_data-&gt;<a class="code" href="../../db/da0/structari__channel__thread__data.html#a6027dcdb9ce70b0f1a8fa96f965e0f1d">stasis_stuff</a>));</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;   <a class="code" href="../../da/d49/resource__channels_8c.html#acc1511336d756ef90e6413691dc9bbd9">chan_data_destroy</a>(chan_data);</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;}</div><div class="ttc" id="pbx_8h_html_a6e3dbc57c03c23543354ef108c31fac8"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a></div><div class="ttdeci">int pbx_exec(struct ast_channel *c, struct ast_app *app, const char *data)</div><div class="ttdoc">Execute an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00471">pbx_app.c:471</a></div></div>
<div class="ttc" id="structari__channel__thread__data_html"><div class="ttname"><a href="../../db/da0/structari__channel__thread__data.html">ari_channel_thread_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01679">resource_channels.c:1679</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structstasis__app_html"><div class="ttname"><a href="../../d4/de3/structstasis__app.html">stasis_app</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00049">res/stasis/app.c:49</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structari__channel__thread__data_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../db/da0/structari__channel__thread__data.html#a84d1435c5b8d387806714ea7079304b7">ari_channel_thread_data::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01680">resource_channels.c:1680</a></div></div>
<div class="ttc" id="structari__channel__thread__data_html_a6027dcdb9ce70b0f1a8fa96f965e0f1d"><div class="ttname"><a href="../../db/da0/structari__channel__thread__data.html#a6027dcdb9ce70b0f1a8fa96f965e0f1d">ari_channel_thread_data::stasis_stuff</a></div><div class="ttdeci">struct ast_str * stasis_stuff</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01681">resource_channels.c:1681</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__app_html"><div class="ttname"><a href="../../d0/da3/structast__app.html">ast_app</a></div><div class="ttdoc">ast_app: A registered application </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00045">pbx_app.c:45</a></div></div>
<div class="ttc" id="resource__channels_8c_html_acc1511336d756ef90e6413691dc9bbd9"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#acc1511336d756ef90e6413691dc9bbd9">chan_data_destroy</a></div><div class="ttdeci">static void chan_data_destroy(struct ari_channel_thread_data *chan_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01684">resource_channels.c:1684</a></div></div>
<div class="ttc" id="pbx_8h_html_ad4a6912dcd2ad44a186d0a284afafc51"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a></div><div class="ttdeci">struct ast_app * pbx_findapp(const char *app)</div><div class="ttdoc">Look up an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ael__main_8c_source.html#l00165">ael_main.c:165</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adabbeff7b065e96d9fcbda18e9b767d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adabbeff7b065e96d9fcbda18e9b767d6">&#9670;&nbsp;</a></span>ari_channels_handle_originate_with_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a>* ari_channels_handle_originate_with_id </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_extension</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>args_priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_app_args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_caller_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>args_timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>variables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_channel_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_other_channel_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_originator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_formats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01063">1063</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01009">ari_origination::appdata</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01013">ari_originate_dial()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00298">ast_ari_response_alloc_failed()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00276">ast_ari_response_ok()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01008">ast_callerid_parse()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02992">ast_channel_cleanup</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00892">ast_channel_connected()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l11162">ast_channel_errno()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l05024">AST_CHANNEL_ERROR_ID_EXISTS</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01260">ast_channel_flags()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02970">ast_channel_ref</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08404">ast_channel_set_connected_line()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01255">ast_channel_snapshot_to_json()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d43/dial_8c_source.html#l00282">ast_dial_append()</a>, <a class="el" href="../../de/d43/dial_8c_source.html#l00225">ast_dial_create()</a>, <a class="el" href="../../de/d43/dial_8c_source.html#l01091">ast_dial_destroy()</a>, <a class="el" href="../../de/d43/dial_8c_source.html#l01282">ast_dial_get_channel()</a>, <a class="el" href="../../de/d43/dial_8c_source.html#l00433">ast_dial_prerun()</a>, <a class="el" href="../../de/d43/dial_8c_source.html#l01313">ast_dial_set_global_timeout()</a>, <a class="el" href="../../de/d43/dial_8c_source.html#l01298">ast_dial_set_user_data()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04184">ast_findlabel_extension()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01040">AST_FLAG_ORIGINATED</a>, <a class="el" href="../../db/d1c/format__cache_8h_source.html#l00286">ast_format_cache_get</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01003">ast_is_shrinkable_phonenumber()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l00276">ast_local_get_peer()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00290">AST_LOG_ERROR</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00148">AST_MAX_PUBLIC_UNIQUEID</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02045">ast_party_connected_line_set_init()</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00329">AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00563">ast_pthread_create_detached</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07434">ast_set_callerid()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08217">ast_set_variables()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00947">ast_shrink_phone_number()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00699">ast_str_size()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00219">ast_strip()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00165">cid_name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00164">cid_num</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01003">ari_origination::context</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01005">ari_origination::exten</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00459">ast_party_connected_line::id</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00341">ast_party_id::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00278">ast_party_name::presentation</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00296">ast_party_number::presentation</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01007">ari_origination::priority</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l01984">stasis_app_subscribe_channel()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00265">ast_party_name::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01089">thread</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00606">ast_assigned_ids::uniqueid</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00607">ast_assigned_ids::uniqueid2</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00280">ast_party_name::valid</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01433">ast_ari_channels_originate()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01394">ast_ari_channels_originate_with_id()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l02128">external_media_audiosocket_tcp()</a>, and <a class="el" href="../../da/d49/resource__channels_8c_source.html#l02084">external_media_rtp_udp()</a>.</p>
<div class="fragment"><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;{</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   <span class="keywordtype">char</span> *dialtech;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;   <span class="keywordtype">char</span> *dialdevice = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/db7/structast__dial.html">ast_dial</a> *dial;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;   <span class="keywordtype">char</span> *caller_id = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;   <span class="keywordtype">char</span> *stuff;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *other = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *, snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> assignedids = {</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      .<a class="code" href="../../da/de5/structast__assigned__ids.html#af8e97b5c2410839d9826f15f83ac4aa2">uniqueid</a> = args_channel_id,</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      .uniqueid2 = args_other_channel_id,</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   };</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d0a/structari__origination.html">ari_origination</a> *origination;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;   pthread_t <a class="code" href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *format_cap = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;   <span class="keywordflow">if</span> ((assignedids.<a class="code" href="../../da/de5/structast__assigned__ids.html#af8e97b5c2410839d9826f15f83ac4aa2">uniqueid</a> &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a0b4d23dfd94209395f4feceaa5911e0a">AST_MAX_PUBLIC_UNIQUEID</a> &lt; strlen(assignedids.<a class="code" href="../../da/de5/structast__assigned__ids.html#af8e97b5c2410839d9826f15f83ac4aa2">uniqueid</a>))</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      || (assignedids.<a class="code" href="../../da/de5/structast__assigned__ids.html#ad386d957fb41c92b9e929fbd2ac7a48c">uniqueid2</a> &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a0b4d23dfd94209395f4feceaa5911e0a">AST_MAX_PUBLIC_UNIQUEID</a> &lt; strlen(assignedids.<a class="code" href="../../da/de5/structast__assigned__ids.html#ad386d957fb41c92b9e929fbd2ac7a48c">uniqueid2</a>))) {</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;         <span class="stringliteral">&quot;Uniqueid length exceeds maximum of %d&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a0b4d23dfd94209395f4feceaa5911e0a">AST_MAX_PUBLIC_UNIQUEID</a>);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;   }</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args_endpoint)) {</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;         <span class="stringliteral">&quot;Endpoint must be specified&quot;</span>);</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;   }</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args_originator) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args_formats)) {</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;         <span class="stringliteral">&quot;Originator and formats can&#39;t both be specified&quot;</span>);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   dialtech = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(args_endpoint);</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;   <span class="keywordflow">if</span> ((stuff = strchr(dialtech, <span class="charliteral">&#39;/&#39;</span>))) {</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      *stuff++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      dialdevice = stuff;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;   }</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dialtech) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dialdevice)) {</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;         <span class="stringliteral">&quot;Invalid endpoint specified&quot;</span>);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;   }</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args_app)) {</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, appdata, <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(64), <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      <span class="keywordflow">if</span> (!appdata) {</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      }</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;appdata, 0, <span class="stringliteral">&quot;%s&quot;</span>, args_app);</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args_app_args)) {</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;appdata, 0, <span class="stringliteral">&quot;,%s&quot;</span>, args_app_args);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      origination = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*origination) + <a class="code" href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a>(appdata) + 1);</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      <span class="keywordflow">if</span> (!origination) {</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      }</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      strcpy(origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#a5f9a422914b8c4ba8180c3bc8e2489d7">appdata</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(appdata));</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args_extension)) {</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      origination = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*origination) + 1);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <span class="keywordflow">if</span> (!origination) {</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      }</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(args_context, <span class="stringliteral">&quot;default&quot;</span>), <span class="keyword">sizeof</span>(origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>));</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#a78d4847658b695383d849efd12399b38">exten</a>, args_extension, <span class="keyword">sizeof</span>(origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#a78d4847658b695383d849efd12399b38">exten</a>));</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args_label)) {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;         <span class="comment">/* A label was provided in the request, use that */</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;         <span class="keywordtype">int</span> ipri = 1;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;         <span class="keywordflow">if</span> (sscanf(args_label, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;ipri) != 1) {</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            ipri = <a class="code" href="../../db/de0/pbx_8h.html#a0be9518646cf9aca4878b313cc02e901">ast_findlabel_extension</a>(chan, origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#a78d4847658b695383d849efd12399b38">exten</a>, args_label, args_caller_id);</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            <span class="keywordflow">if</span> (ipri == -1) {</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a>, <span class="stringliteral">&quot;Requested label: %s can not be found in context: %s\n&quot;</span>, args_label, args_context);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;               <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 404, <span class="stringliteral">&quot;Not Found&quot;</span>, <span class="stringliteral">&quot;Requested label can not be found&quot;</span>);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;               <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;            }</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Numeric value provided for label, jumping to that priority\n&quot;</span>);</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;         }</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;         <span class="keywordflow">if</span> (ipri == 0) {</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid priority label &#39;%s&#39; specified for extension %s in context: %s\n&quot;</span>,</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                  args_label, args_extension, args_context);</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>, <span class="stringliteral">&quot;Requested priority is illegal&quot;</span>);</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;         }</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;         <span class="comment">/* Our priority was provided by a label */</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;         origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a> =  ipri;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;         <span class="comment">/* No label provided, use provided priority */</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;         origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a> = args_priority ? args_priority : 1;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      }</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#a5f9a422914b8c4ba8180c3bc8e2489d7">appdata</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;         <span class="stringliteral">&quot;Application or extension must be specified&quot;</span>);</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;   }</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;   dial = <a class="code" href="../../df/dcf/dial_8h.html#aff55dbc56bc54126828f78a47d1f2282">ast_dial_create</a>();</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;   <span class="keywordflow">if</span> (!dial) {</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(origination);</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;   }</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;   <a class="code" href="../../df/dcf/dial_8h.html#a39c6af74141cd4fca2ebc1ef37d4a16b">ast_dial_set_user_data</a>(dial, origination);</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/dcf/dial_8h.html#a2bd4d9ffd57e401b004cc131bd2ad497">ast_dial_append</a>(dial, dialtech, dialdevice, &amp;assignedids)) {</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;      <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(dial);</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(origination);</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;   }</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;   <span class="keywordflow">if</span> (args_timeout &gt; 0) {</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      <a class="code" href="../../df/dcf/dial_8h.html#a4d113a25d55a4ad9509fd954885f1dbc">ast_dial_set_global_timeout</a>(dial, args_timeout * 1000);</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (args_timeout == -1) {</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      <a class="code" href="../../df/dcf/dial_8h.html#a4d113a25d55a4ad9509fd954885f1dbc">ast_dial_set_global_timeout</a>(dial, -1);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <a class="code" href="../../df/dcf/dial_8h.html#a4d113a25d55a4ad9509fd954885f1dbc">ast_dial_set_global_timeout</a>(dial, 30000);</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;   }</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args_caller_id)) {</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      caller_id = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(args_caller_id);</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      <a class="code" href="../../de/d47/callerid_8h.html#a39e03ca4e8df3a1d2c75e888d76201df">ast_callerid_parse</a>(caller_id, &amp;cid_name, &amp;cid_num);</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/d47/callerid_8h.html#ae9c1fe6ac3c381fd57719a1a19182225">ast_is_shrinkable_phonenumber</a>(cid_num)) {</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;         <a class="code" href="../../de/d47/callerid_8h.html#a6a61669b28d0f994e44db5e3baab6ef2">ast_shrink_phone_number</a>(cid_num);</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      }</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;   }</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args_originator)) {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      other = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(args_originator);</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      <span class="keywordflow">if</span> (!other) {</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;            <span class="stringliteral">&quot;Provided originator channel was not found&quot;</span>);</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;         <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(dial);</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(origination);</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      }</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;   }</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args_formats)) {</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      <span class="keywordtype">char</span> *format_name;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <span class="keywordtype">char</span> *formats_copy = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(args_formats);</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      <span class="keywordflow">if</span> (!(format_cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>))) {</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;         <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(dial);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(origination);</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>(other);</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      }</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      <span class="keywordflow">while</span> ((format_name = <a class="code" href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a>(<a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;formats_copy, <span class="stringliteral">&quot;,&quot;</span>)))) {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *fmt = <a class="code" href="../../db/d1c/format__cache_8h.html#a729e49563608ebaed919c901257dc623">ast_format_cache_get</a>(format_name);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;         <span class="keywordflow">if</span> (!fmt || <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(format_cap, fmt, 0)) {</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            <span class="keywordflow">if</span> (!fmt) {</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;               <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                  response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                  <span class="stringliteral">&quot;Provided format (%s) was not found&quot;</span>, format_name);</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;               <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            }</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(dial);</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(origination);</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>(other);</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format_cap, -1);</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(fmt);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;         }</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fmt, -1);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      }</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;   }</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/dcf/dial_8h.html#a3cd0ba996525c0c0b9c88c743fe6c34d">ast_dial_prerun</a>(dial, other, format_cap)) {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a1284a91696129ddcb1bf805adf769e0e">ast_channel_errno</a>() == <a class="code" href="../../d5/d7b/channel_8h.html#a65123e0ee89c498bdade937bdfb66edea2ff910f90238d015ce4b2f43247f7bed">AST_CHANNEL_ERROR_ID_EXISTS</a>) {</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 409, <span class="stringliteral">&quot;Conflict&quot;</span>,</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;            <span class="stringliteral">&quot;Channel with given unique ID already exists&quot;</span>);</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(dial);</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(origination);</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>(other);</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;   }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>(other);</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(format_cap);</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;   chan = <a class="code" href="../../df/dcf/dial_8h.html#a45841b9bf18bd62ea3a58f5ecf8b5d4f">ast_dial_get_channel</a>(dial, 0);</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(dial);</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(origination);</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;   }</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cid_num) || !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cid_name)) {</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="comment">       * It seems strange to set the CallerID on an outgoing call leg</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="comment">       * to whom we are calling, but this function&#39;s callers are doing</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment">       * various Originate methods.  This call leg goes to the local</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment">       * user.  Once the called party answers, the dialplan needs to</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment">       * be able to access the CallerID from the CALLERID function as</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="comment">       * if the called party had placed this call.</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a88d833a56ea7de33e230281c5c12b75d">ast_set_callerid</a>(chan, cid_num, cid_name, cid_num);</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ade95e66d7c53181894de1d3569aee2b8">ast_party_connected_line_set_init</a>(&amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(chan));</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cid_num)) {</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;         <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id.number.valid = 1;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;         <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id.number.str = (<span class="keywordtype">char</span> *) cid_num;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;         <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id.number.presentation = <a class="code" href="../../de/d47/callerid_8h.html#af01ad9e215f9e9941b68f1ff1559d409">AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</a>;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      }</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cid_name)) {</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;         <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id.name.valid = 1;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;         <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id.name.str = (<span class="keywordtype">char</span> *) cid_name;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;         <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id.name.presentation = <a class="code" href="../../de/d47/callerid_8h.html#af01ad9e215f9e9941b68f1ff1559d409">AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</a>;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      }</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a388b1ab04ed52109917914ac73662d0a">ast_channel_set_connected_line</a>(chan, &amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;   }</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;   <span class="keywordflow">if</span> (variables) {</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a5b14bfe21364dd8f73d45f15cf313524">ast_set_variables</a>(chan, variables);</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   }</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ae9c1c04502304018b62d1e5383ccacb3">AST_FLAG_ORIGINATED</a>);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args_app)) {</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *local_peer;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <a class="code" href="../../d8/d9c/stasis__app_8h.html#a74298c6a966c1248dfc03869cd8b1089">stasis_app_subscribe_channel</a>(args_app, chan);</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;      <span class="comment">/* Subscribe to the Local channel peer also. */</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      local_peer = <a class="code" href="../../d5/da6/core__local_8h.html#a2b73f14ae5dc7e11bafc684936cf26d0">ast_local_get_peer</a>(chan);</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;      <span class="keywordflow">if</span> (local_peer) {</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;         <a class="code" href="../../d8/d9c/stasis__app_8h.html#a74298c6a966c1248dfc03869cd8b1089">stasis_app_subscribe_channel</a>(args_app, local_peer);</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(local_peer);</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      }</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;   }</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;   snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan));</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;   <span class="comment">/* Before starting the async dial bump the ref in case the dial quickly goes away and takes</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="comment">    * the reference with it</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(chan);</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a>(&amp;thread, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../da/d49/resource__channels_8c.html#aef2fdd31656ca13eb0110765d08d58a9">ari_originate_dial</a>, dial)) {</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(dial);</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(origination);</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a>(response, <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   }</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   <span class="keywordflow">return</span> chan;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;}</div><div class="ttc" id="app__meetme_8c_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01089">app_meetme.c:1089</a></div></div>
<div class="ttc" id="channel_8h_html_a88d833a56ea7de33e230281c5c12b75d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a88d833a56ea7de33e230281c5c12b75d">ast_set_callerid</a></div><div class="ttdeci">void ast_set_callerid(struct ast_channel *chan, const char *cid_num, const char *cid_name, const char *cid_ani)</div><div class="ttdoc">Set caller ID number, name and ANI and generate AMI event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07434">channel.c:7434</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="dial_8h_html_ab75c6f2fe91945cf61e7e91939618db2"><div class="ttname"><a href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a></div><div class="ttdeci">int ast_dial_destroy(struct ast_dial *dial)</div><div class="ttdoc">Destroys a dialing structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l01091">dial.c:1091</a></div></div>
<div class="ttc" id="structari__origination_html"><div class="ttname"><a href="../../dc/d0a/structari__origination.html">ari_origination</a></div><div class="ttdoc">Structure used for origination. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01001">resource_channels.c:1001</a></div></div>
<div class="ttc" id="structast__dial_html"><div class="ttname"><a href="../../db/db7/structast__dial.html">ast_dial</a></div><div class="ttdoc">Main dialing structure. Contains global options, channels being dialed, and more! ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l00048">dial.c:48</a></div></div>
<div class="ttc" id="utils_8h_html_a832647380b1f97e7ac1b4492f8816d46"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a></div><div class="ttdeci">#define ast_pthread_create_detached(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00563">utils.h:563</a></div></div>
<div class="ttc" id="dial_8h_html_a4d113a25d55a4ad9509fd954885f1dbc"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a4d113a25d55a4ad9509fd954885f1dbc">ast_dial_set_global_timeout</a></div><div class="ttdeci">void ast_dial_set_global_timeout(struct ast_dial *dial, int timeout)</div><div class="ttdoc">Set the maximum time (globally) allowed for trying to ring phones. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l01313">dial.c:1313</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="channel_8h_html_ade95e66d7c53181894de1d3569aee2b8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ade95e66d7c53181894de1d3569aee2b8">ast_party_connected_line_set_init</a></div><div class="ttdeci">void ast_party_connected_line_set_init(struct ast_party_connected_line *init, const struct ast_party_connected_line *guide)</div><div class="ttdoc">Initialize the given connected line structure using the given guide for a set update operation...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02045">channel.c:2045</a></div></div>
<div class="ttc" id="strings_8h_html_ae99d6f51ac4be6b72f8b63892cd949e1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a></div><div class="ttdeci">size_t ast_str_size(const struct ast_str *buf)</div><div class="ttdoc">Returns the current maximum length (without reallocation) of the current buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00699">strings.h:699</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="channel_8h_html_a5b14bfe21364dd8f73d45f15cf313524"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5b14bfe21364dd8f73d45f15cf313524">ast_set_variables</a></div><div class="ttdeci">void ast_set_variables(struct ast_channel *chan, struct ast_variable *vars)</div><div class="ttdoc">adds a list of channel variables to a channel </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08217">channel.c:8217</a></div></div>
<div class="ttc" id="structast__assigned__ids_html"><div class="ttname"><a href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a></div><div class="ttdoc">Structure to pass both assignedid values to channel drivers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00605">channel.h:605</a></div></div>
<div class="ttc" id="structari__origination_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../dc/d0a/structari__origination.html#acec9ce2df15222151ad66fcb1d74eb9f">ari_origination::priority</a></div><div class="ttdeci">int priority</div><div class="ttdoc">Dialplan priority. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01007">resource_channels.c:1007</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="structast__assigned__ids_html_af8e97b5c2410839d9826f15f83ac4aa2"><div class="ttname"><a href="../../da/de5/structast__assigned__ids.html#af8e97b5c2410839d9826f15f83ac4aa2">ast_assigned_ids::uniqueid</a></div><div class="ttdeci">const char * uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00606">channel.h:606</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="callerid_8h_html_ae9c1fe6ac3c381fd57719a1a19182225"><div class="ttname"><a href="../../de/d47/callerid_8h.html#ae9c1fe6ac3c381fd57719a1a19182225">ast_is_shrinkable_phonenumber</a></div><div class="ttdeci">int ast_is_shrinkable_phonenumber(const char *exten)</div><div class="ttdoc">Check if a string consists only of digits and + # ( ) - . (meaning it can be cleaned with ast_shrink_...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01003">callerid.c:1003</a></div></div>
<div class="ttc" id="callerid_8h_html_af01ad9e215f9e9941b68f1ff1559d409"><div class="ttname"><a href="../../de/d47/callerid_8h.html#af01ad9e215f9e9941b68f1ff1559d409">AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</a></div><div class="ttdeci">#define AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00329">callerid.h:329</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a29e973bd94bfbaf59d939bd1bc988c32"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a></div><div class="ttdeci">static char cid_num[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00164">chan_mgcp.c:164</a></div></div>
<div class="ttc" id="ari_8h_html_aa6503090da6366cef1eae5556e27b352"><div class="ttname"><a href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a></div><div class="ttdeci">void ast_ari_response_alloc_failed(struct ast_ari_response *response)</div><div class="ttdoc">Fill in response with a 500 message for allocation failures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00298">res_ari.c:298</a></div></div>
<div class="ttc" id="format__cache_8h_html_a729e49563608ebaed919c901257dc623"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a729e49563608ebaed919c901257dc623">ast_format_cache_get</a></div><div class="ttdeci">#define ast_format_cache_get(name)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d1c/format__cache_8h_source.html#l00286">format_cache.h:286</a></div></div>
<div class="ttc" id="channel_8h_html_a65123e0ee89c498bdade937bdfb66edea2ff910f90238d015ce4b2f43247f7bed"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a65123e0ee89c498bdade937bdfb66edea2ff910f90238d015ce4b2f43247f7bed">AST_CHANNEL_ERROR_ID_EXISTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l05024">channel.h:5024</a></div></div>
<div class="ttc" id="core__local_8h_html_a2b73f14ae5dc7e11bafc684936cf26d0"><div class="ttname"><a href="../../d5/da6/core__local_8h.html#a2b73f14ae5dc7e11bafc684936cf26d0">ast_local_get_peer</a></div><div class="ttdeci">struct ast_channel * ast_local_get_peer(struct ast_channel *ast)</div><div class="ttdoc">Get the other local channel in the pair. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00276">core_local.c:276</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="dial_8h_html_a39c6af74141cd4fca2ebc1ef37d4a16b"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a39c6af74141cd4fca2ebc1ef37d4a16b">ast_dial_set_user_data</a></div><div class="ttdeci">void ast_dial_set_user_data(struct ast_dial *dial, void *user_data)</div><div class="ttdoc">Set user data on a dial structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l01298">dial.c:1298</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structari__origination_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../dc/d0a/structari__origination.html#a78d4847658b695383d849efd12399b38">ari_origination::exten</a></div><div class="ttdeci">char exten[AST_MAX_EXTENSION]</div><div class="ttdoc">Dialplan extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01005">resource_channels.c:1005</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_a2fdd5bff193a29ec6c7278da2851ea56"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a></div><div class="ttdeci">#define AST_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00290">logger.h:290</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="channel_8h_html_a10f23f1907b804485f62973f66cd9aef"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a></div><div class="ttdeci">struct ast_party_connected_line * ast_channel_connected(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00892">channel_internal_api.c:892</a></div></div>
<div class="ttc" id="strings_8h_html_ac92713b8d07a45720b2664be70810e55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a></div><div class="ttdeci">char * ast_strip(char *s)</div><div class="ttdoc">Strip leading/trailing whitespace from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00219">strings.h:219</a></div></div>
<div class="ttc" id="ari_8h_html_a9111898e4037c6e06472038d67a78a2e"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a></div><div class="ttdeci">void ast_ari_response_ok(struct ast_ari_response *response, struct ast_json *message)</div><div class="ttdoc">Fill in an OK (200) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00276">res_ari.c:276</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="structari__origination_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../dc/d0a/structari__origination.html#ac25ea00ee3f082df06e0cf468cbde240">ari_origination::context</a></div><div class="ttdeci">char context[AST_MAX_CONTEXT]</div><div class="ttdoc">Dialplan context. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01003">resource_channels.c:1003</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="pbx_8h_html_a0be9518646cf9aca4878b313cc02e901"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a0be9518646cf9aca4878b313cc02e901">ast_findlabel_extension</a></div><div class="ttdeci">int ast_findlabel_extension(struct ast_channel *c, const char *context, const char *exten, const char *label, const char *callerid)</div><div class="ttdoc">Find the priority of an extension that has the specified label. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04184">pbx.c:4184</a></div></div>
<div class="ttc" id="structast__party__connected__line_html"><div class="ttname"><a href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a></div><div class="ttdoc">Connected Line/Party information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00457">channel.h:457</a></div></div>
<div class="ttc" id="dial_8h_html_a2bd4d9ffd57e401b004cc131bd2ad497"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2bd4d9ffd57e401b004cc131bd2ad497">ast_dial_append</a></div><div class="ttdeci">int ast_dial_append(struct ast_dial *dial, const char *tech, const char *device, const struct ast_assigned_ids *assignedids)</div><div class="ttdoc">Append a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l00282">dial.c:282</a></div></div>
<div class="ttc" id="structari__origination_html_a5f9a422914b8c4ba8180c3bc8e2489d7"><div class="ttname"><a href="../../dc/d0a/structari__origination.html#a5f9a422914b8c4ba8180c3bc8e2489d7">ari_origination::appdata</a></div><div class="ttdeci">char appdata[0]</div><div class="ttdoc">Application data to pass to Stasis application. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01009">resource_channels.c:1009</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="stasis__channels_8h_html_a7571e6d10d716525aaa64b1f6583979b"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_channel_snapshot_to_json(const struct ast_channel_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_channel_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01255">stasis_channels.c:1255</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="dial_8h_html_aff55dbc56bc54126828f78a47d1f2282"><div class="ttname"><a href="../../df/dcf/dial_8h.html#aff55dbc56bc54126828f78a47d1f2282">ast_dial_create</a></div><div class="ttdeci">struct ast_dial * ast_dial_create(void)</div><div class="ttdoc">New dialing structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l00225">dial.c:225</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="dial_8h_html_a45841b9bf18bd62ea3a58f5ecf8b5d4f"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a45841b9bf18bd62ea3a58f5ecf8b5d4f">ast_dial_get_channel</a></div><div class="ttdeci">struct ast_channel * ast_dial_get_channel(struct ast_dial *dial, int num)</div><div class="ttdoc">Get the dialing channel, if prerun has been executed. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l01282">dial.c:1282</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a74298c6a966c1248dfc03869cd8b1089"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a74298c6a966c1248dfc03869cd8b1089">stasis_app_subscribe_channel</a></div><div class="ttdeci">enum stasis_app_subscribe_res stasis_app_subscribe_channel(const char *app_name, struct ast_channel *chan)</div><div class="ttdoc">Directly subscribe an application to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l01984">res_stasis.c:1984</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ade5a89f9bee15a492c760ec1765a292d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a></div><div class="ttdeci">static char cid_name[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00165">chan_mgcp.c:165</a></div></div>
<div class="ttc" id="channel_8h_html_a0b4d23dfd94209395f4feceaa5911e0a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a0b4d23dfd94209395f4feceaa5911e0a">AST_MAX_PUBLIC_UNIQUEID</a></div><div class="ttdeci">#define AST_MAX_PUBLIC_UNIQUEID</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00148">channel.h:148</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aef2fdd31656ca13eb0110765d08d58a9"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aef2fdd31656ca13eb0110765d08d58a9">ari_originate_dial</a></div><div class="ttdeci">static void * ari_originate_dial(void *data)</div><div class="ttdoc">Thread which dials and executes upon answer. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01013">resource_channels.c:1013</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
<div class="ttc" id="channel_8h_html_a1284a91696129ddcb1bf805adf769e0e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1284a91696129ddcb1bf805adf769e0e">ast_channel_errno</a></div><div class="ttdeci">enum ast_channel_error ast_channel_errno(void)</div><div class="ttdoc">Get error code for latest channel operation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11162">channel.c:11162</a></div></div>
<div class="ttc" id="callerid_8h_html_a6a61669b28d0f994e44db5e3baab6ef2"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a6a61669b28d0f994e44db5e3baab6ef2">ast_shrink_phone_number</a></div><div class="ttdeci">void ast_shrink_phone_number(char *n)</div><div class="ttdoc">Shrink a phone number in place to just digits (more accurately it just removes ()&amp;#39;s, .&amp;#39;s, and -&amp;#39;s... </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00947">callerid.c:947</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5ae9c1c04502304018b62d1e5383ccacb3"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ae9c1c04502304018b62d1e5383ccacb3">AST_FLAG_ORIGINATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01040">channel.h:1040</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a414b69d7583bb4cfc6daf5276aac6d14"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a></div><div class="ttdeci">char connected</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00082">eagi_proxy.c:82</a></div></div>
<div class="ttc" id="structast__assigned__ids_html_ad386d957fb41c92b9e929fbd2ac7a48c"><div class="ttname"><a href="../../da/de5/structast__assigned__ids.html#ad386d957fb41c92b9e929fbd2ac7a48c">ast_assigned_ids::uniqueid2</a></div><div class="ttdeci">const char * uniqueid2</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00607">channel.h:607</a></div></div>
<div class="ttc" id="channel_8h_html_a388b1ab04ed52109917914ac73662d0a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a388b1ab04ed52109917914ac73662d0a">ast_channel_set_connected_line</a></div><div class="ttdeci">void ast_channel_set_connected_line(struct ast_channel *chan, const struct ast_party_connected_line *connected, const struct ast_set_party_connected_line *update)</div><div class="ttdoc">Set the connected line information in the Asterisk channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08404">channel.c:8404</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="callerid_8h_html_a39e03ca4e8df3a1d2c75e888d76201df"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a39e03ca4e8df3a1d2c75e888d76201df">ast_callerid_parse</a></div><div class="ttdeci">int ast_callerid_parse(char *instr, char **name, char **location)</div><div class="ttdoc">Destructively parse inbuf into name and location (or number) </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01008">callerid.c:1008</a></div></div>
<div class="ttc" id="dial_8h_html_a3cd0ba996525c0c0b9c88c743fe6c34d"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a3cd0ba996525c0c0b9c88c743fe6c34d">ast_dial_prerun</a></div><div class="ttdeci">int ast_dial_prerun(struct ast_dial *dial, struct ast_channel *chan, struct ast_format_cap *cap)</div><div class="ttdoc">Request all appended channels, but do not dial. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l00433">dial.c:433</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8cdd339bf3a0e57ea054c9ec104ab3f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cdd339bf3a0e57ea054c9ec104ab3f1">&#9670;&nbsp;</a></span>ari_channels_handle_play()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ari_channels_handle_play </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_channel_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>args_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>args_media_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>args_offsetms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>args_skipms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_playback_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00636">636</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00305">ast_ari_response_created()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00269">ast_asprintf</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">channel_state_invalid()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00117">language</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../de/de3/control_8c_source.html#l00860">stasis_app_control_get_snapshot()</a>, <a class="el" href="../../d7/de1/res__stasis__playback_8c_source.html#l00471">stasis_app_control_play_uri()</a>, <a class="el" href="../../d7/de1/res__stasis__playback_8c_source.html#l00543">stasis_app_playback_get_id()</a>, <a class="el" href="../../d7/de1/res__stasis__playback_8c_source.html#l00555">stasis_app_playback_to_json()</a>, and <a class="el" href="../../d3/d1e/stasis__app__playback_8h_source.html#l00076">STASIS_PLAYBACK_TARGET_CHANNEL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00718">ast_ari_channels_play()</a>, and <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00733">ast_ari_channels_play_with_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;{</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *, snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../de/dab/structstasis__app__playback.html">stasis_app_playback</a> *, playback, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, playback_url, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(response != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args_channel_id);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="comment">/* Response filled in by find_control */</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   }</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a>(control, response)) {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   }</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   snapshot = <a class="code" href="../../d8/d9c/stasis__app_8h.html#a2e17c5418a4753bb1229f031041a645c">stasis_app_control_get_snapshot</a>(control);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;         response, 404, <span class="stringliteral">&quot;Not Found&quot;</span>,</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;         <span class="stringliteral">&quot;Channel not found&quot;</span>);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   }</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   <span class="keywordflow">if</span> (args_skipms &lt; 0) {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;         <span class="stringliteral">&quot;skipms cannot be negative&quot;</span>);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   }</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   <span class="keywordflow">if</span> (args_offsetms &lt; 0) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;         <span class="stringliteral">&quot;offsetms cannot be negative&quot;</span>);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   }</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   language = <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(args_lang, snapshot-&gt;base-&gt;language);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   playback = <a class="code" href="../../d3/d1e/stasis__app__playback_8h.html#ad893b5975e16139b7c99527f78f24584">stasis_app_control_play_uri</a>(control, args_media, args_media_count, language,</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      args_channel_id, <a class="code" href="../../d3/d1e/stasis__app__playback_8h.html#a042f8aec8be0761c5ebc29940de91570adeed3829c6f1ae9605add987c662685c">STASIS_PLAYBACK_TARGET_CHANNEL</a>, args_skipms, args_offsetms, args_playback_id);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;   <span class="keywordflow">if</span> (!playback) {</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;         <span class="stringliteral">&quot;Failed to queue media for playback&quot;</span>);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   }</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(&amp;playback_url, <span class="stringliteral">&quot;/playbacks/%s&quot;</span>,</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;         <a class="code" href="../../d3/d1e/stasis__app__playback_8h.html#a4fbd4b95ffd11a40f0734601eb88b4a8">stasis_app_playback_get_id</a>(playback)) == -1) {</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      playback_url = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;         <span class="stringliteral">&quot;Out of memory&quot;</span>);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   }</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   json = <a class="code" href="../../d3/d1e/stasis__app__playback_8h.html#af7e06669e968c82d09a697689ba92062">stasis_app_playback_to_json</a>(playback);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   <span class="keywordflow">if</span> (!json) {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;         <span class="stringliteral">&quot;Out of memory&quot;</span>);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   }</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#a5270232ee10a8984c7717eacf2dd9d61">ast_ari_response_created</a>(response, playback_url, json);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;}</div><div class="ttc" id="ari_8h_html_a5270232ee10a8984c7717eacf2dd9d61"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a5270232ee10a8984c7717eacf2dd9d61">ast_ari_response_created</a></div><div class="ttdeci">void ast_ari_response_created(struct ast_ari_response *response, const char *url, struct ast_json *message)</div><div class="ttdoc">Fill in a Created (201) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00305">res_ari.c:305</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="stasis__app__playback_8h_html_af7e06669e968c82d09a697689ba92062"><div class="ttname"><a href="../../d3/d1e/stasis__app__playback_8h.html#af7e06669e968c82d09a697689ba92062">stasis_app_playback_to_json</a></div><div class="ttdeci">struct ast_json * stasis_app_playback_to_json(const struct stasis_app_playback *playback)</div><div class="ttdoc">Convert a playback to its JSON representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de1/res__stasis__playback_8c_source.html#l00555">res_stasis_playback.c:555</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
<div class="ttc" id="stasis__app__playback_8h_html_a4fbd4b95ffd11a40f0734601eb88b4a8"><div class="ttname"><a href="../../d3/d1e/stasis__app__playback_8h.html#a4fbd4b95ffd11a40f0734601eb88b4a8">stasis_app_playback_get_id</a></div><div class="ttdeci">const char * stasis_app_playback_get_id(struct stasis_app_playback *playback)</div><div class="ttdoc">Gets the unique id of a playback object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de1/res__stasis__playback_8c_source.html#l00543">res_stasis_playback.c:543</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_adf416dc058363e2fd5750c77e2d78bee"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a></div><div class="ttdeci">static char language[MAX_LANGUAGE]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00117">chan_alsa.c:117</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a2e17c5418a4753bb1229f031041a645c"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a2e17c5418a4753bb1229f031041a645c">stasis_app_control_get_snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * stasis_app_control_get_snapshot(const struct stasis_app_control *control)</div><div class="ttdoc">Returns the most recent snapshot for the associated channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00860">control.c:860</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a4a584f5ec1d637b285149ea0e2adda14"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a></div><div class="ttdeci">static int channel_state_invalid(struct stasis_app_control *control, struct ast_ari_response *response)</div><div class="ttdoc">Ensure channel is in a state that allows operation to be performed. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00108">resource_channels.c:108</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="stasis__app__playback_8h_html_a042f8aec8be0761c5ebc29940de91570adeed3829c6f1ae9605add987c662685c"><div class="ttname"><a href="../../d3/d1e/stasis__app__playback_8h.html#a042f8aec8be0761c5ebc29940de91570adeed3829c6f1ae9605add987c662685c">STASIS_PLAYBACK_TARGET_CHANNEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/stasis__app__playback_8h_source.html#l00076">stasis_app_playback.h:76</a></div></div>
<div class="ttc" id="stasis__app__playback_8h_html_ad893b5975e16139b7c99527f78f24584"><div class="ttname"><a href="../../d3/d1e/stasis__app__playback_8h.html#ad893b5975e16139b7c99527f78f24584">stasis_app_control_play_uri</a></div><div class="ttdeci">struct stasis_app_playback * stasis_app_control_play_uri(struct stasis_app_control *control, const char **media, size_t media_count, const char *language, const char *target_id, enum stasis_app_playback_target_type target_type, int skipms, long offsetms, const char *id)</div><div class="ttdoc">Play a file to the control&amp;#39;s channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de1/res__stasis__playback_8c_source.html#l00471">res_stasis_playback.c:471</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structstasis__app__playback_html"><div class="ttname"><a href="../../de/dab/structstasis__app__playback.html">stasis_app_playback</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de1/res__stasis__playback_8c_source.html#l00068">res_stasis_playback.c:68</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a655d672545a5b964e9c29460f84087de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a655d672545a5b964e9c29460f84087de">&#9670;&nbsp;</a></span>ari_channels_handle_snoop_channel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ari_channels_handle_snoop_channel </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_channel_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_spy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_whisper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_app_args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_snoop_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01572">1572</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00276">ast_ari_response_ok()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02992">ast_channel_cleanup</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01255">ast_channel_snapshot_to_json()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dd/da3/res__stasis__snoop_8c_source.html#l00309">stasis_app_control_snoop()</a>, <a class="el" href="../../d7/d9b/stasis__app__snoop_8h_source.html#l00042">STASIS_SNOOP_DIRECTION_BOTH</a>, <a class="el" href="../../d7/d9b/stasis__app__snoop_8h_source.html#l00040">STASIS_SNOOP_DIRECTION_IN</a>, <a class="el" href="../../d7/d9b/stasis__app__snoop_8h_source.html#l00036">STASIS_SNOOP_DIRECTION_NONE</a>, and <a class="el" href="../../d7/d9b/stasis__app__snoop_8h_source.html#l00038">STASIS_SNOOP_DIRECTION_OUT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01651">ast_ari_channels_snoop_channel()</a>, and <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01665">ast_ari_channels_snoop_channel_with_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;{</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849">stasis_app_snoop_direction</a> spy, whisper;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>);</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, snoop, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>);</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *, snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(response != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args_spy) || !strcmp(args_spy, <span class="stringliteral">&quot;none&quot;</span>)) {</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      spy = <a class="code" href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849a348256b6139a7ae39c0ea8993a578a4f">STASIS_SNOOP_DIRECTION_NONE</a>;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(args_spy, <span class="stringliteral">&quot;both&quot;</span>)) {</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;      spy = <a class="code" href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849a93e292cf595f437e926d8ef3ce8d1b6d">STASIS_SNOOP_DIRECTION_BOTH</a>;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(args_spy, <span class="stringliteral">&quot;out&quot;</span>)) {</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;      spy = <a class="code" href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849a322d3eda507ad6f055bcb32562d1a5b6">STASIS_SNOOP_DIRECTION_OUT</a>;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(args_spy, <span class="stringliteral">&quot;in&quot;</span>)) {</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;      spy = <a class="code" href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849a167d9fac15a022927c949dca249a0bad">STASIS_SNOOP_DIRECTION_IN</a>;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;         <span class="stringliteral">&quot;Invalid direction specified for spy&quot;</span>);</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;   }</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args_whisper) || !strcmp(args_whisper, <span class="stringliteral">&quot;none&quot;</span>)) {</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      whisper = <a class="code" href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849a348256b6139a7ae39c0ea8993a578a4f">STASIS_SNOOP_DIRECTION_NONE</a>;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(args_whisper, <span class="stringliteral">&quot;both&quot;</span>)) {</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      whisper = <a class="code" href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849a93e292cf595f437e926d8ef3ce8d1b6d">STASIS_SNOOP_DIRECTION_BOTH</a>;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(args_whisper, <span class="stringliteral">&quot;out&quot;</span>)) {</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      whisper = <a class="code" href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849a322d3eda507ad6f055bcb32562d1a5b6">STASIS_SNOOP_DIRECTION_OUT</a>;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(args_whisper, <span class="stringliteral">&quot;in&quot;</span>)) {</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      whisper = <a class="code" href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849a167d9fac15a022927c949dca249a0bad">STASIS_SNOOP_DIRECTION_IN</a>;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;         <span class="stringliteral">&quot;Invalid direction specified for whisper&quot;</span>);</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   }</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;   <span class="keywordflow">if</span> (spy == <a class="code" href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849a348256b6139a7ae39c0ea8993a578a4f">STASIS_SNOOP_DIRECTION_NONE</a> &amp;&amp; whisper == <a class="code" href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849a348256b6139a7ae39c0ea8993a578a4f">STASIS_SNOOP_DIRECTION_NONE</a>) {</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;         <span class="stringliteral">&quot;Direction must be specified for at least spy or whisper&quot;</span>);</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args_app)) {</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;         <span class="stringliteral">&quot;Application name is required&quot;</span>);</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;   }</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(args_channel_id);</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;   <span class="keywordflow">if</span> (chan == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;         response, 404, <span class="stringliteral">&quot;Channel Not Found&quot;</span>,</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;         <span class="stringliteral">&quot;Provided channel was not found&quot;</span>);</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;   }</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;   snoop = <a class="code" href="../../d7/d9b/stasis__app__snoop_8h.html#abe99c28a854f5be66baa6df2dfdc04c9">stasis_app_control_snoop</a>(chan, spy, whisper, args_app, args_app_args,</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      args_snoop_id);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;   <span class="keywordflow">if</span> (snoop == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal error&quot;</span>,</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;         <span class="stringliteral">&quot;Snoop channel could not be created&quot;</span>);</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;   }</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;   snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(snoop));</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a>(response, <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="stasis__app__snoop_8h_html_a919b44edb471d59dba36ac1f9ed20849"><div class="ttname"><a href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849">stasis_app_snoop_direction</a></div><div class="ttdeci">stasis_app_snoop_direction</div><div class="ttdoc">Directions for audio stream flow. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/stasis__app__snoop_8h_source.html#l00034">stasis_app_snoop.h:34</a></div></div>
<div class="ttc" id="stasis__app__snoop_8h_html_a919b44edb471d59dba36ac1f9ed20849a167d9fac15a022927c949dca249a0bad"><div class="ttname"><a href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849a167d9fac15a022927c949dca249a0bad">STASIS_SNOOP_DIRECTION_IN</a></div><div class="ttdoc">Audio stream in from the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/stasis__app__snoop_8h_source.html#l00040">stasis_app_snoop.h:40</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="stasis__app__snoop_8h_html_a919b44edb471d59dba36ac1f9ed20849a348256b6139a7ae39c0ea8993a578a4f"><div class="ttname"><a href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849a348256b6139a7ae39c0ea8993a578a4f">STASIS_SNOOP_DIRECTION_NONE</a></div><div class="ttdoc">No direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/stasis__app__snoop_8h_source.html#l00036">stasis_app_snoop.h:36</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="stasis__app__snoop_8h_html_a919b44edb471d59dba36ac1f9ed20849a93e292cf595f437e926d8ef3ce8d1b6d"><div class="ttname"><a href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849a93e292cf595f437e926d8ef3ce8d1b6d">STASIS_SNOOP_DIRECTION_BOTH</a></div><div class="ttdoc">Audio stream to AND from the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/stasis__app__snoop_8h_source.html#l00042">stasis_app_snoop.h:42</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="ari_8h_html_a9111898e4037c6e06472038d67a78a2e"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a></div><div class="ttdeci">void ast_ari_response_ok(struct ast_ari_response *response, struct ast_json *message)</div><div class="ttdoc">Fill in an OK (200) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00276">res_ari.c:276</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="stasis__app__snoop_8h_html_a919b44edb471d59dba36ac1f9ed20849a322d3eda507ad6f055bcb32562d1a5b6"><div class="ttname"><a href="../../d7/d9b/stasis__app__snoop_8h.html#a919b44edb471d59dba36ac1f9ed20849a322d3eda507ad6f055bcb32562d1a5b6">STASIS_SNOOP_DIRECTION_OUT</a></div><div class="ttdoc">Audio stream out to the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/stasis__app__snoop_8h_source.html#l00038">stasis_app_snoop.h:38</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="stasis__channels_8h_html_a7571e6d10d716525aaa64b1f6583979b"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_channel_snapshot_to_json(const struct ast_channel_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_channel_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01255">stasis_channels.c:1255</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis__app__snoop_8h_html_abe99c28a854f5be66baa6df2dfdc04c9"><div class="ttname"><a href="../../d7/d9b/stasis__app__snoop_8h.html#abe99c28a854f5be66baa6df2dfdc04c9">stasis_app_control_snoop</a></div><div class="ttdeci">struct ast_channel * stasis_app_control_snoop(struct ast_channel *chan, enum stasis_app_snoop_direction spy, enum stasis_app_snoop_direction whisper, const char *app, const char *app_args, const char *snoop_id)</div><div class="ttdoc">Create a snoop on the provided channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da3/res__stasis__snoop_8c_source.html#l00309">res_stasis_snoop.c:309</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aef2fdd31656ca13eb0110765d08d58a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef2fdd31656ca13eb0110765d08d58a9">&#9670;&nbsp;</a></span>ari_originate_dial()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* ari_originate_dial </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Thread which dials and executes upon answer. </p>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01013">1013</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/db6/app__mysql_8c_source.html#l00062">app</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01009">ari_origination::appdata</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00348">ast_channel_context_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00357">ast_channel_exten_set()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00448">ast_channel_priority_set()</a>, <a class="el" href="../../de/d43/dial_8c_source.html#l00981">ast_dial_answered()</a>, <a class="el" href="../../de/d43/dial_8c_source.html#l00993">ast_dial_answered_steal()</a>, <a class="el" href="../../de/d43/dial_8c_source.html#l01091">ast_dial_destroy()</a>, <a class="el" href="../../de/d43/dial_8c_source.html#l01303">ast_dial_get_user_data()</a>, <a class="el" href="../../df/dcf/dial_8h_source.html#l00061">AST_DIAL_RESULT_ANSWERED</a>, <a class="el" href="../../de/d43/dial_8c_source.html#l00939">ast_dial_run()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04759">ast_pbx_run()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01003">ari_origination::context</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01005">ari_origination::exten</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d16/pbx__app_8c_source.html#l00471">pbx_exec()</a>, <a class="el" href="../../d2/db7/ael__main_8c_source.html#l00165">pbx_findapp()</a>, and <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01007">ari_origination::priority</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01063">ari_channels_handle_originate_with_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;{</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/db7/structast__dial.html">ast_dial</a> *dial = data;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d0a/structari__origination.html">ari_origination</a> *origination = <a class="code" href="../../df/dcf/dial_8h.html#a2d195b4acdddf74f46bdc30c691cf3d3">ast_dial_get_user_data</a>(dial);</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847">ast_dial_result</a> res;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   res = <a class="code" href="../../df/dcf/dial_8h.html#a65e30d29847af5495afe1baed823957e">ast_dial_run</a>(dial, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   <span class="keywordflow">if</span> (res != <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a4a8c0d54e6071d1e9a36adae685406d3">AST_DIAL_RESULT_ANSWERED</a>) {</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   }</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#a5f9a422914b8c4ba8180c3bc8e2489d7">appdata</a>)) {</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/da3/structast__app.html">ast_app</a> *<a class="code" href="../../d0/db6/app__mysql_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a> = <a class="code" href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a>(<span class="stringliteral">&quot;Stasis&quot;</span>);</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      <span class="keywordflow">if</span> (app) {</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Launching Stasis(%s) on %s\n&quot;</span>, origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#a5f9a422914b8c4ba8180c3bc8e2489d7">appdata</a>,</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(<a class="code" href="../../df/dcf/dial_8h.html#a83d13a00643c2ad0149758507df60466">ast_dial_answered</a>(dial)));</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a>(<a class="code" href="../../df/dcf/dial_8h.html#a83d13a00643c2ad0149758507df60466">ast_dial_answered</a>(dial), app, origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#a5f9a422914b8c4ba8180c3bc8e2489d7">appdata</a>);</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No such application &#39;Stasis&#39;\n&quot;</span>);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      }</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *answered = <a class="code" href="../../df/dcf/dial_8h.html#a83d13a00643c2ad0149758507df60466">ast_dial_answered</a>(dial);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>)) {</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aca211972dac7b8f3f08a283bfe0aa8bf">ast_channel_context_set</a>(answered, origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      }</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#a78d4847658b695383d849efd12399b38">exten</a>)) {</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(answered, origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#a78d4847658b695383d849efd12399b38">exten</a>);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      }</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="keywordflow">if</span> (origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a> &gt; 0) {</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ae56cab679c0cda6436b930bc74297895">ast_channel_priority_set</a>(answered, origination-&gt;<a class="code" href="../../dc/d0a/structari__origination.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      }</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a44b6406c9220f7f2b610ac712369f405">ast_pbx_run</a>(answered)) {</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to start PBX on %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(answered));</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;         <span class="comment">/* PBX will have taken care of hanging up, so we steal the answered channel so dial doesn&#39;t do it */</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;         <a class="code" href="../../df/dcf/dial_8h.html#a390484ae7a65d0297177fc8223e6b083">ast_dial_answered_steal</a>(dial);</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      }</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;   <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(dial);</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(origination);</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="dial_8h_html_ab75c6f2fe91945cf61e7e91939618db2"><div class="ttname"><a href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a></div><div class="ttdeci">int ast_dial_destroy(struct ast_dial *dial)</div><div class="ttdoc">Destroys a dialing structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l01091">dial.c:1091</a></div></div>
<div class="ttc" id="structari__origination_html"><div class="ttname"><a href="../../dc/d0a/structari__origination.html">ari_origination</a></div><div class="ttdoc">Structure used for origination. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01001">resource_channels.c:1001</a></div></div>
<div class="ttc" id="dial_8h_html_a2d195b4acdddf74f46bdc30c691cf3d3"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2d195b4acdddf74f46bdc30c691cf3d3">ast_dial_get_user_data</a></div><div class="ttdeci">void * ast_dial_get_user_data(struct ast_dial *dial)</div><div class="ttdoc">Return the user data on a dial structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l01303">dial.c:1303</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e3dbc57c03c23543354ef108c31fac8"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a></div><div class="ttdeci">int pbx_exec(struct ast_channel *c, struct ast_app *app, const char *data)</div><div class="ttdoc">Execute an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00471">pbx_app.c:471</a></div></div>
<div class="ttc" id="structast__dial_html"><div class="ttname"><a href="../../db/db7/structast__dial.html">ast_dial</a></div><div class="ttdoc">Main dialing structure. Contains global options, channels being dialed, and more! ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l00048">dial.c:48</a></div></div>
<div class="ttc" id="dial_8h_html_a2054b1ddc7845e78286254b366a37847a4a8c0d54e6071d1e9a36adae685406d3"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a4a8c0d54e6071d1e9a36adae685406d3">AST_DIAL_RESULT_ANSWERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/dial_8h_source.html#l00061">dial.h:61</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structari__origination_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../dc/d0a/structari__origination.html#acec9ce2df15222151ad66fcb1d74eb9f">ari_origination::priority</a></div><div class="ttdeci">int priority</div><div class="ttdoc">Dialplan priority. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01007">resource_channels.c:1007</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structari__origination_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../dc/d0a/structari__origination.html#a78d4847658b695383d849efd12399b38">ari_origination::exten</a></div><div class="ttdeci">char exten[AST_MAX_EXTENSION]</div><div class="ttdoc">Dialplan extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01005">resource_channels.c:1005</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="dial_8h_html_a2054b1ddc7845e78286254b366a37847"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847">ast_dial_result</a></div><div class="ttdeci">ast_dial_result</div><div class="ttdoc">List of return codes for dial run API calls. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/dial_8h_source.html#l00054">dial.h:54</a></div></div>
<div class="ttc" id="structari__origination_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../dc/d0a/structari__origination.html#ac25ea00ee3f082df06e0cf468cbde240">ari_origination::context</a></div><div class="ttdeci">char context[AST_MAX_CONTEXT]</div><div class="ttdoc">Dialplan context. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01003">resource_channels.c:1003</a></div></div>
<div class="ttc" id="dial_8h_html_a65e30d29847af5495afe1baed823957e"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a65e30d29847af5495afe1baed823957e">ast_dial_run</a></div><div class="ttdeci">enum ast_dial_result ast_dial_run(struct ast_dial *dial, struct ast_channel *chan, int async)</div><div class="ttdoc">Execute dialing synchronously or asynchronously. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l00939">dial.c:939</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="dial_8h_html_a83d13a00643c2ad0149758507df60466"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a83d13a00643c2ad0149758507df60466">ast_dial_answered</a></div><div class="ttdeci">struct ast_channel * ast_dial_answered(struct ast_dial *dial)</div><div class="ttdoc">Return channel that answered. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l00981">dial.c:981</a></div></div>
<div class="ttc" id="structari__origination_html_a5f9a422914b8c4ba8180c3bc8e2489d7"><div class="ttname"><a href="../../dc/d0a/structari__origination.html#a5f9a422914b8c4ba8180c3bc8e2489d7">ari_origination::appdata</a></div><div class="ttdeci">char appdata[0]</div><div class="ttdoc">Application data to pass to Stasis application. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01009">resource_channels.c:1009</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="channel_8h_html_a018b7a29cef2d62074dc46e9aaad0d1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a></div><div class="ttdeci">void ast_channel_exten_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00357">channel_internal_api.c:357</a></div></div>
<div class="ttc" id="dial_8h_html_a390484ae7a65d0297177fc8223e6b083"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a390484ae7a65d0297177fc8223e6b083">ast_dial_answered_steal</a></div><div class="ttdeci">struct ast_channel * ast_dial_answered_steal(struct ast_dial *dial)</div><div class="ttdoc">Steal the channel that answered. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l00993">dial.c:993</a></div></div>
<div class="ttc" id="channel_8h_html_aca211972dac7b8f3f08a283bfe0aa8bf"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aca211972dac7b8f3f08a283bfe0aa8bf">ast_channel_context_set</a></div><div class="ttdeci">void ast_channel_context_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00348">channel_internal_api.c:348</a></div></div>
<div class="ttc" id="structast__app_html"><div class="ttname"><a href="../../d0/da3/structast__app.html">ast_app</a></div><div class="ttdoc">ast_app: A registered application </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00045">pbx_app.c:45</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="pbx_8h_html_a44b6406c9220f7f2b610ac712369f405"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a44b6406c9220f7f2b610ac712369f405">ast_pbx_run</a></div><div class="ttdeci">enum ast_pbx_result ast_pbx_run(struct ast_channel *c)</div><div class="ttdoc">Execute the PBX in the current thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04759">pbx.c:4759</a></div></div>
<div class="ttc" id="pbx_8h_html_ad4a6912dcd2ad44a186d0a284afafc51"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a></div><div class="ttdeci">struct ast_app * pbx_findapp(const char *app)</div><div class="ttdoc">Look up an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ael__main_8c_source.html#l00165">ael_main.c:165</a></div></div>
<div class="ttc" id="channel_8h_html_ae56cab679c0cda6436b930bc74297895"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae56cab679c0cda6436b930bc74297895">ast_channel_priority_set</a></div><div class="ttdeci">void ast_channel_priority_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00448">channel_internal_api.c:448</a></div></div>
<div class="ttc" id="app__mysql_8c_html_a1d9b1eccfc259a14525ce817482a3f88"><div class="ttname"><a href="../../d0/db6/app__mysql_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a></div><div class="ttdeci">static const char app[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db6/app__mysql_8c_source.html#l00062">app_mysql.c:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae241e0de2eb76668b2787082a8e4bfed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae241e0de2eb76668b2787082a8e4bfed">&#9670;&nbsp;</a></span>ast_ari_channels_answer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_answer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/dab/structast__ari__channels__answer__args.html">ast_ari_channels_answer_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Answer a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00338">338</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00325">ast_ari_channels_answer_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">channel_state_invalid()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d4/d26/res__stasis__answer_8c_source.html#l00044">stasis_app_control_answer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l00966">ast_ari_channels_answer_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;{</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../d7/dab/structast__ari__channels__answer__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   }</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a>(control, response)) {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9c/stasis__app_8h.html#affbf321a8a4ee3e7f55aacbc7aa6a152">stasis_app_control_answer</a>(control) != 0) {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;         <span class="stringliteral">&quot;Failed to answer channel&quot;</span>);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a4a584f5ec1d637b285149ea0e2adda14"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a></div><div class="ttdeci">static int channel_state_invalid(struct stasis_app_control *control, struct ast_ari_response *response)</div><div class="ttdoc">Ensure channel is in a state that allows operation to be performed. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00108">resource_channels.c:108</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis__app_8h_html_affbf321a8a4ee3e7f55aacbc7aa6a152"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#affbf321a8a4ee3e7f55aacbc7aa6a152">stasis_app_control_answer</a></div><div class="ttdeci">int stasis_app_control_answer(struct stasis_app_control *control)</div><div class="ttdoc">Answer the channel associated with this control. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d26/res__stasis__answer_8c_source.html#l00044">res_stasis_answer.c:44</a></div></div>
<div class="ttc" id="structast__ari__channels__answer__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d7/dab/structast__ari__channels__answer__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_answer_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00325">resource_channels.h:325</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2a96dad5738a3ba68b791950c290489e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a96dad5738a3ba68b791950c290489e">&#9670;&nbsp;</a></span>ast_ari_channels_continue_in_dialplan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_continue_in_dialplan </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html">ast_ari_channels_continue_in_dialplan_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exit application; continue execution in the dialplan. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00180">180</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00298">ast_ari_response_alloc_failed()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04184">ast_findlabel_extension()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00290">AST_LOG_ERROR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00239">ast_ari_channels_continue_in_dialplan_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">channel_state_invalid()</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00241">ast_ari_channels_continue_in_dialplan_args::context</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00118">exten</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00243">ast_ari_channels_continue_in_dialplan_args::extension</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00247">ast_ari_channels_continue_in_dialplan_args::label</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00245">ast_ari_channels_continue_in_dialplan_args::priority</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../de/de3/control_8c_source.html#l00389">stasis_app_control_continue()</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00860">stasis_app_control_get_snapshot()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l00713">ast_ari_channels_continue_in_dialplan_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;{</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *, snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   <span class="keywordtype">int</span> ipri;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(response != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a>(control, response)) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   snapshot = <a class="code" href="../../d8/d9c/stasis__app_8h.html#a2e17c5418a4753bb1229f031041a645c">stasis_app_control_get_snapshot</a>(control);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 404, <span class="stringliteral">&quot;Not Found&quot;</span>, <span class="stringliteral">&quot;Channel not found&quot;</span>);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#a94f090d1fb5c71712726fcdf025b9ace">context</a>)) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      context = snapshot-&gt;dialplan-&gt;context;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      exten = <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(args-&gt;<a class="code" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#a3a21b674a056eab8a11436300ae02d00">extension</a>, snapshot-&gt;dialplan-&gt;exten);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      context = args-&gt;<a class="code" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#a94f090d1fb5c71712726fcdf025b9ace">context</a>;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      exten = <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(args-&gt;<a class="code" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#a3a21b674a056eab8a11436300ae02d00">extension</a>, <span class="stringliteral">&quot;s&quot;</span>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#ab5fbdb5052858ca8d2538566229fbe64">label</a>)) {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="comment">/* A label was provided in the request, use that */</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="keywordflow">if</span> (sscanf(args-&gt;<a class="code" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#ab5fbdb5052858ca8d2538566229fbe64">label</a>, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;ipri) != 1) {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;         ipri = <a class="code" href="../../db/de0/pbx_8h.html#a0be9518646cf9aca4878b313cc02e901">ast_findlabel_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, context, exten, args-&gt;<a class="code" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#ab5fbdb5052858ca8d2538566229fbe64">label</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;         <span class="keywordflow">if</span> (ipri == -1) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a>, <span class="stringliteral">&quot;Requested label: %s can not be found in context: %s\n&quot;</span>, args-&gt;<a class="code" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#ab5fbdb5052858ca8d2538566229fbe64">label</a>, context);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 404, <span class="stringliteral">&quot;Not Found&quot;</span>, <span class="stringliteral">&quot;Requested label can not be found&quot;</span>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;         }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Numeric value provided for label, jumping to that priority\n&quot;</span>);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="keywordflow">if</span> (ipri == 0) {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid priority label &#39;%s&#39; specified for extension %s in context: %s\n&quot;</span>,</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;               args-&gt;<a class="code" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#ab5fbdb5052858ca8d2538566229fbe64">label</a>, exten, context);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>, <span class="stringliteral">&quot;Requested priority is illegal&quot;</span>);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (args-&gt;<a class="code" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="comment">/* No label provided, use provided priority */</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      ipri = args-&gt;<a class="code" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#a94f090d1fb5c71712726fcdf025b9ace">context</a>) &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#a3a21b674a056eab8a11436300ae02d00">extension</a>)) {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="comment">/* Special case. No exten, context, or priority provided, then move on to the next priority */</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      ipri = snapshot-&gt;dialplan-&gt;priority + 1;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      ipri = 1;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9c/stasis__app_8h.html#a44c0b1bbbf0189d3c6b076eccd0a6d8f">stasis_app_control_continue</a>(control, context, exten, ipri)) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structast__ari__channels__continue__in__dialplan__args_html_a3a21b674a056eab8a11436300ae02d00"><div class="ttname"><a href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#a3a21b674a056eab8a11436300ae02d00">ast_ari_channels_continue_in_dialplan_args::extension</a></div><div class="ttdeci">const char * extension</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00243">resource_channels.h:243</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a44c0b1bbbf0189d3c6b076eccd0a6d8f"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a44c0b1bbbf0189d3c6b076eccd0a6d8f">stasis_app_control_continue</a></div><div class="ttdeci">int stasis_app_control_continue(struct stasis_app_control *control, const char *context, const char *extension, int priority)</div><div class="ttdoc">Exit res_stasis and continue execution in the dialplan. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00389">control.c:389</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="ari_8h_html_aa6503090da6366cef1eae5556e27b352"><div class="ttname"><a href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a></div><div class="ttdeci">void ast_ari_response_alloc_failed(struct ast_ari_response *response)</div><div class="ttdoc">Fill in response with a 500 message for allocation failures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00298">res_ari.c:298</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_a2fdd5bff193a29ec6c7278da2851ea56"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a></div><div class="ttdeci">#define AST_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00290">logger.h:290</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__ari__channels__continue__in__dialplan__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_continue_in_dialplan_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00239">resource_channels.h:239</a></div></div>
<div class="ttc" id="structast__ari__channels__continue__in__dialplan__args_html_ab5fbdb5052858ca8d2538566229fbe64"><div class="ttname"><a href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#ab5fbdb5052858ca8d2538566229fbe64">ast_ari_channels_continue_in_dialplan_args::label</a></div><div class="ttdeci">const char * label</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00247">resource_channels.h:247</a></div></div>
<div class="ttc" id="pbx_8h_html_a0be9518646cf9aca4878b313cc02e901"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a0be9518646cf9aca4878b313cc02e901">ast_findlabel_extension</a></div><div class="ttdeci">int ast_findlabel_extension(struct ast_channel *c, const char *context, const char *exten, const char *label, const char *callerid)</div><div class="ttdoc">Find the priority of an extension that has the specified label. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04184">pbx.c:4184</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a2e17c5418a4753bb1229f031041a645c"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a2e17c5418a4753bb1229f031041a645c">stasis_app_control_get_snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * stasis_app_control_get_snapshot(const struct stasis_app_control *control)</div><div class="ttdoc">Returns the most recent snapshot for the associated channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00860">control.c:860</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a4a584f5ec1d637b285149ea0e2adda14"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a></div><div class="ttdeci">static int channel_state_invalid(struct stasis_app_control *control, struct ast_ari_response *response)</div><div class="ttdoc">Ensure channel is in a state that allows operation to be performed. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00108">resource_channels.c:108</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__ari__channels__continue__in__dialplan__args_html_a94f090d1fb5c71712726fcdf025b9ace"><div class="ttname"><a href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#a94f090d1fb5c71712726fcdf025b9ace">ast_ari_channels_continue_in_dialplan_args::context</a></div><div class="ttdeci">const char * context</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00241">resource_channels.h:241</a></div></div>
<div class="ttc" id="structast__ari__channels__continue__in__dialplan__args_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../d2/d3c/structast__ari__channels__continue__in__dialplan__args.html#acec9ce2df15222151ad66fcb1d74eb9f">ast_ari_channels_continue_in_dialplan_args::priority</a></div><div class="ttdeci">int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00245">resource_channels.h:245</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5f503526cff34c71a16e47d6d6970ec9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f503526cff34c71a16e47d6d6970ec9">&#9670;&nbsp;</a></span>ast_ari_channels_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7b/structast__ari__channels__create__args.html">ast_ari_channels_create_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01778">1778</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00110">ast_ari_channels_create_args::app</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00112">ast_ari_channels_create_args::app_args</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01698">ari_channel_thread()</a>, <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l00264">ast_ari_channels_create_parse_body()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00298">ast_ari_response_alloc_failed()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00276">ast_ari_response_ok()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02992">ast_channel_cleanup</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l11162">ast_channel_errno()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l05024">AST_CHANNEL_ERROR_ID_EXISTS</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00637">ast_channel_nativeformats()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01255">ast_channel_snapshot_to_json()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../db/d1c/format__cache_8h_source.html#l00286">ast_format_cache_get</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00216">ast_format_cap_append_by_type()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00397">ast_json_object_get()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00563">ast_pthread_create_detached</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l06444">ast_request()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08217">ast_set_variables()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00219">ast_strip()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01680">ari_channel_thread_data::chan</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01684">chan_data_destroy()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00114">ast_ari_channels_create_args::channel_id</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00108">ast_ari_channels_create_args::endpoint</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00120">ast_ari_channels_create_args::formats</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01373">json_to_ast_variables()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00118">ast_ari_channels_create_args::originator</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00116">ast_ari_channels_create_args::other_channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01732">save_dialstring()</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l01984">stasis_app_subscribe_channel()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01681">ari_channel_thread_data::stasis_stuff</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01089">thread</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00606">ast_assigned_ids::uniqueid</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00607">ast_assigned_ids::uniqueid2</a>, and <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00122">ast_ari_channels_create_args::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l00308">ast_ari_channels_create_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;{</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *variables = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> assignedids;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/da0/structari__channel__thread__data.html">ari_channel_thread_data</a> *chan_data;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *snapshot;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;   pthread_t <a class="code" href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;   <span class="keywordtype">char</span> *dialtech;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;   <span class="keywordtype">char</span> *dialdevice = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;   <span class="keywordtype">char</span> *stuff;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;   <span class="keywordtype">int</span> cause;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *request_cap;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *originator;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;   <span class="comment">/* Parse any query parameters out of the body parameter */</span></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;   <span class="keywordflow">if</span> (args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a74535fe04c54601eaf3275d87bff092d">variables</a>) {</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_variables;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      <a class="code" href="../../d0/d12/resource__channels_8h.html#a932ccd10ec24d1610d8a2f5470953ad1">ast_ari_channels_create_parse_body</a>(args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a74535fe04c54601eaf3275d87bff092d">variables</a>, args);</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      json_variables = <a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a74535fe04c54601eaf3275d87bff092d">variables</a>, <span class="stringliteral">&quot;variables&quot;</span>);</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      <span class="keywordflow">if</span> (json_variables</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;         &amp;&amp; <a class="code" href="../../da/d49/resource__channels_8c.html#a61d455b941bd7ebf96bcbf5532fefe07">json_to_ast_variables</a>(response, json_variables, &amp;variables)) {</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;      }</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;   }</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;   assignedids.uniqueid = args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;   assignedids.uniqueid2 = args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a7170b18fbb9119abc3e1eee92a4f38d2">other_channel_id</a>;</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a57da6faa586b1378963cbf17cc3e28a5">originator</a>) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a588c49399c260ee2575c2df33ede22f3">formats</a>)) {</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;         <span class="stringliteral">&quot;Originator and formats can&#39;t both be specified&quot;</span>);</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;   }</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#acf94d2c982235a175c6699a54ecfd121">endpoint</a>)) {</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;         <span class="stringliteral">&quot;Endpoint must be specified&quot;</span>);</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;   }</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;   chan_data = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*chan_data));</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;   <span class="keywordflow">if</span> (!chan_data) {</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;   }</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;   chan_data-&gt;<a class="code" href="../../db/da0/structari__channel__thread__data.html#a6027dcdb9ce70b0f1a8fa96f965e0f1d">stasis_stuff</a> = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(32);</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;   <span class="keywordflow">if</span> (!chan_data-&gt;<a class="code" href="../../db/da0/structari__channel__thread__data.html#a6027dcdb9ce70b0f1a8fa96f965e0f1d">stasis_stuff</a>) {</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;      <a class="code" href="../../da/d49/resource__channels_8c.html#acc1511336d756ef90e6413691dc9bbd9">chan_data_destroy</a>(chan_data);</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;   }</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;chan_data-&gt;<a class="code" href="../../db/da0/structari__channel__thread__data.html#a6027dcdb9ce70b0f1a8fa96f965e0f1d">stasis_stuff</a>, 0, <span class="stringliteral">&quot;%s&quot;</span>, args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">app</a>);</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a4e0ea3bb8683fc4aa2d462bd1c1f6343">app_args</a>)) {</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;chan_data-&gt;<a class="code" href="../../db/da0/structari__channel__thread__data.html#a6027dcdb9ce70b0f1a8fa96f965e0f1d">stasis_stuff</a>, 0, <span class="stringliteral">&quot;,%s&quot;</span>, args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a4e0ea3bb8683fc4aa2d462bd1c1f6343">app_args</a>);</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;   }</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;   dialtech = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#acf94d2c982235a175c6699a54ecfd121">endpoint</a>);</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;   <span class="keywordflow">if</span> ((stuff = strchr(dialtech, <span class="charliteral">&#39;/&#39;</span>))) {</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      *stuff++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;      dialdevice = stuff;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;   }</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dialtech) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dialdevice)) {</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;         <span class="stringliteral">&quot;Invalid endpoint specified&quot;</span>);</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;      <a class="code" href="../../da/d49/resource__channels_8c.html#acc1511336d756ef90e6413691dc9bbd9">chan_data_destroy</a>(chan_data);</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;   }</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;   originator = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a57da6faa586b1378963cbf17cc3e28a5">originator</a>);</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;   <span class="keywordflow">if</span> (originator) {</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;      request_cap = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(originator));</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">app</a>)) {</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;         <a class="code" href="../../d8/d9c/stasis__app_8h.html#a74298c6a966c1248dfc03869cd8b1089">stasis_app_subscribe_channel</a>(args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">app</a>, originator);</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;      }</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a588c49399c260ee2575c2df33ede22f3">formats</a>)) {</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;      <span class="keywordtype">char</span> *format_name;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      <span class="keywordtype">char</span> *formats_copy = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a588c49399c260ee2575c2df33ede22f3">formats</a>);</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;      <span class="keywordflow">if</span> (!(request_cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>))) {</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;         <a class="code" href="../../da/d49/resource__channels_8c.html#acc1511336d756ef90e6413691dc9bbd9">chan_data_destroy</a>(chan_data);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      }</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;      <span class="keywordflow">while</span> ((format_name = <a class="code" href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a>(<a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;formats_copy, <span class="stringliteral">&quot;,&quot;</span>)))) {</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *fmt = <a class="code" href="../../db/d1c/format__cache_8h.html#a729e49563608ebaed919c901257dc623">ast_format_cache_get</a>(format_name);</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;         <span class="keywordflow">if</span> (!fmt || <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(request_cap, fmt, 0)) {</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;            <span class="keywordflow">if</span> (!fmt) {</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;               <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;                  response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;                  <span class="stringliteral">&quot;Provided format (%s) was not found&quot;</span>, format_name);</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;               <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;            }</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(request_cap, -1);</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(fmt);</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;            <a class="code" href="../../da/d49/resource__channels_8c.html#acc1511336d756ef90e6413691dc9bbd9">chan_data_destroy</a>(chan_data);</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;         }</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fmt, -1);</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      }</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;      <span class="keywordflow">if</span> (!(request_cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>))) {</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;         <a class="code" href="../../da/d49/resource__channels_8c.html#acc1511336d756ef90e6413691dc9bbd9">chan_data_destroy</a>(chan_data);</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      }</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a0c30a7fc5698f5e075cfe620cddfc7f1">ast_format_cap_append_by_type</a>(request_cap, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>);</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;   }</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;   chan_data-&gt;<a class="code" href="../../db/da0/structari__channel__thread__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a>(dialtech, request_cap, &amp;assignedids, originator, dialdevice, &amp;cause);</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(request_cap);</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;   <span class="keywordflow">if</span> (!chan_data-&gt;<a class="code" href="../../db/da0/structari__channel__thread__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>) {</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a1284a91696129ddcb1bf805adf769e0e">ast_channel_errno</a>() == <a class="code" href="../../d5/d7b/channel_8h.html#a65123e0ee89c498bdade937bdfb66edea2ff910f90238d015ce4b2f43247f7bed">AST_CHANNEL_ERROR_ID_EXISTS</a>) {</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 409, <span class="stringliteral">&quot;Conflict&quot;</span>,</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;            <span class="stringliteral">&quot;Channel with given unique ID already exists&quot;</span>);</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      }</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>(originator);</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;      <a class="code" href="../../da/d49/resource__channels_8c.html#acc1511336d756ef90e6413691dc9bbd9">chan_data_destroy</a>(chan_data);</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;   }</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">app</a>)) {</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;      <a class="code" href="../../d8/d9c/stasis__app_8h.html#a74298c6a966c1248dfc03869cd8b1089">stasis_app_subscribe_channel</a>(args-&gt;<a class="code" href="../../df/d7b/structast__ari__channels__create__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">app</a>, chan_data-&gt;<a class="code" href="../../db/da0/structari__channel__thread__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;   }</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;   <span class="keywordflow">if</span> (variables) {</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a5b14bfe21364dd8f73d45f15cf313524">ast_set_variables</a>(chan_data-&gt;<a class="code" href="../../db/da0/structari__channel__thread__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, variables);</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;   }</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>(originator);</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a1b84e505ab86638f12468c497a390d64">save_dialstring</a>(chan_data-&gt;<a class="code" href="../../db/da0/structari__channel__thread__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, stuff)) {</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;      <a class="code" href="../../da/d49/resource__channels_8c.html#acc1511336d756ef90e6413691dc9bbd9">chan_data_destroy</a>(chan_data);</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;   }</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;   snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan_data-&gt;<a class="code" href="../../db/da0/structari__channel__thread__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a>(&amp;thread, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../da/d49/resource__channels_8c.html#a5058ddcf172fc5b80c347b550e52f07f">ari_channel_thread</a>, chan_data)) {</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      <a class="code" href="../../da/d49/resource__channels_8c.html#acc1511336d756ef90e6413691dc9bbd9">chan_data_destroy</a>(chan_data);</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a>(response, <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;   }</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;}</div><div class="ttc" id="app__meetme_8c_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01089">app_meetme.c:1089</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structast__ari__channels__create__args_html_a57da6faa586b1378963cbf17cc3e28a5"><div class="ttname"><a href="../../df/d7b/structast__ari__channels__create__args.html#a57da6faa586b1378963cbf17cc3e28a5">ast_ari_channels_create_args::originator</a></div><div class="ttdeci">const char * originator</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00118">resource_channels.h:118</a></div></div>
<div class="ttc" id="utils_8h_html_a832647380b1f97e7ac1b4492f8816d46"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a></div><div class="ttdeci">#define ast_pthread_create_detached(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00563">utils.h:563</a></div></div>
<div class="ttc" id="structari__channel__thread__data_html"><div class="ttname"><a href="../../db/da0/structari__channel__thread__data.html">ari_channel_thread_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01679">resource_channels.c:1679</a></div></div>
<div class="ttc" id="structast__ari__channels__create__args_html_a7170b18fbb9119abc3e1eee92a4f38d2"><div class="ttname"><a href="../../df/d7b/structast__ari__channels__create__args.html#a7170b18fbb9119abc3e1eee92a4f38d2">ast_ari_channels_create_args::other_channel_id</a></div><div class="ttdeci">const char * other_channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00116">resource_channels.h:116</a></div></div>
<div class="ttc" id="resource__channels_8h_html_a932ccd10ec24d1610d8a2f5470953ad1"><div class="ttname"><a href="../../d0/d12/resource__channels_8h.html#a932ccd10ec24d1610d8a2f5470953ad1">ast_ari_channels_create_parse_body</a></div><div class="ttdeci">int ast_ari_channels_create_parse_body(struct ast_json *body, struct ast_ari_channels_create_args *args)</div><div class="ttdoc">Body parsing function for /channels/create. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/daa/res__ari__channels_8c_source.html#l00264">res_ari_channels.c:264</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="channel_8h_html_a5b14bfe21364dd8f73d45f15cf313524"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5b14bfe21364dd8f73d45f15cf313524">ast_set_variables</a></div><div class="ttdeci">void ast_set_variables(struct ast_channel *chan, struct ast_variable *vars)</div><div class="ttdoc">adds a list of channel variables to a channel </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08217">channel.c:8217</a></div></div>
<div class="ttc" id="structast__assigned__ids_html"><div class="ttname"><a href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a></div><div class="ttdoc">Structure to pass both assignedid values to channel drivers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00605">channel.h:605</a></div></div>
<div class="ttc" id="structast__ari__channels__create__args_html_a588c49399c260ee2575c2df33ede22f3"><div class="ttname"><a href="../../df/d7b/structast__ari__channels__create__args.html#a588c49399c260ee2575c2df33ede22f3">ast_ari_channels_create_args::formats</a></div><div class="ttdeci">const char * formats</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00120">resource_channels.h:120</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a5058ddcf172fc5b80c347b550e52f07f"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a5058ddcf172fc5b80c347b550e52f07f">ari_channel_thread</a></div><div class="ttdeci">static void * ari_channel_thread(void *data)</div><div class="ttdoc">Thread that owns stasis-created channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01698">resource_channels.c:1698</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="format__cap_8h_html_a0c30a7fc5698f5e075cfe620cddfc7f1"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a0c30a7fc5698f5e075cfe620cddfc7f1">ast_format_cap_append_by_type</a></div><div class="ttdeci">int ast_format_cap_append_by_type(struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Add all codecs Asterisk knows about for a specific type to the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00216">format_cap.c:216</a></div></div>
<div class="ttc" id="structast__ari__channels__create__args_html_a74535fe04c54601eaf3275d87bff092d"><div class="ttname"><a href="../../df/d7b/structast__ari__channels__create__args.html#a74535fe04c54601eaf3275d87bff092d">ast_ari_channels_create_args::variables</a></div><div class="ttdeci">struct ast_json * variables</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00122">resource_channels.h:122</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="ari_8h_html_aa6503090da6366cef1eae5556e27b352"><div class="ttname"><a href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a></div><div class="ttdeci">void ast_ari_response_alloc_failed(struct ast_ari_response *response)</div><div class="ttdoc">Fill in response with a 500 message for allocation failures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00298">res_ari.c:298</a></div></div>
<div class="ttc" id="format__cache_8h_html_a729e49563608ebaed919c901257dc623"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a729e49563608ebaed919c901257dc623">ast_format_cache_get</a></div><div class="ttdeci">#define ast_format_cache_get(name)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d1c/format__cache_8h_source.html#l00286">format_cache.h:286</a></div></div>
<div class="ttc" id="channel_8h_html_a65123e0ee89c498bdade937bdfb66edea2ff910f90238d015ce4b2f43247f7bed"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a65123e0ee89c498bdade937bdfb66edea2ff910f90238d015ce4b2f43247f7bed">AST_CHANNEL_ERROR_ID_EXISTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l05024">channel.h:5024</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_a39fc055500e09810d0afd0bff87407c5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a></div><div class="ttdeci">struct ast_channel * ast_request(const char *type, struct ast_format_cap *request_cap, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *addr, int *cause)</div><div class="ttdoc">Requests a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06444">channel.c:6444</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a61d455b941bd7ebf96bcbf5532fefe07"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a61d455b941bd7ebf96bcbf5532fefe07">json_to_ast_variables</a></div><div class="ttdeci">static int json_to_ast_variables(struct ast_ari_response *response, struct ast_json *json_variables, struct ast_variable **variables)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01373">resource_channels.c:1373</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structast__ari__channels__create__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../df/d7b/structast__ari__channels__create__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_create_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00114">resource_channels.h:114</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a1b84e505ab86638f12468c497a390d64"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a1b84e505ab86638f12468c497a390d64">save_dialstring</a></div><div class="ttdeci">static int save_dialstring(struct ast_channel *chan, const char *dialstring)</div><div class="ttdoc">Save dialstring onto a channel datastore. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01732">resource_channels.c:1732</a></div></div>
<div class="ttc" id="structast__ari__channels__create__args_html_acf94d2c982235a175c6699a54ecfd121"><div class="ttname"><a href="../../df/d7b/structast__ari__channels__create__args.html#acf94d2c982235a175c6699a54ecfd121">ast_ari_channels_create_args::endpoint</a></div><div class="ttdeci">const char * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00108">resource_channels.h:108</a></div></div>
<div class="ttc" id="strings_8h_html_ac92713b8d07a45720b2664be70810e55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a></div><div class="ttdeci">char * ast_strip(char *s)</div><div class="ttdoc">Strip leading/trailing whitespace from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00219">strings.h:219</a></div></div>
<div class="ttc" id="ari_8h_html_a9111898e4037c6e06472038d67a78a2e"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a></div><div class="ttdeci">void ast_ari_response_ok(struct ast_ari_response *response, struct ast_json *message)</div><div class="ttdoc">Fill in an OK (200) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00276">res_ari.c:276</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structari__channel__thread__data_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../db/da0/structari__channel__thread__data.html#a84d1435c5b8d387806714ea7079304b7">ari_channel_thread_data::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01680">resource_channels.c:1680</a></div></div>
<div class="ttc" id="structari__channel__thread__data_html_a6027dcdb9ce70b0f1a8fa96f965e0f1d"><div class="ttname"><a href="../../db/da0/structari__channel__thread__data.html#a6027dcdb9ce70b0f1a8fa96f965e0f1d">ari_channel_thread_data::stasis_stuff</a></div><div class="ttdeci">struct ast_str * stasis_stuff</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01681">resource_channels.c:1681</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="stasis__channels_8h_html_a7571e6d10d716525aaa64b1f6583979b"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_channel_snapshot_to_json(const struct ast_channel_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_channel_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01255">stasis_channels.c:1255</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a74298c6a966c1248dfc03869cd8b1089"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a74298c6a966c1248dfc03869cd8b1089">stasis_app_subscribe_channel</a></div><div class="ttdeci">enum stasis_app_subscribe_res stasis_app_subscribe_channel(const char *app_name, struct ast_channel *chan)</div><div class="ttdoc">Directly subscribe an application to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l01984">res_stasis.c:1984</a></div></div>
<div class="ttc" id="structast__ari__channels__create__args_html_a4e0ea3bb8683fc4aa2d462bd1c1f6343"><div class="ttname"><a href="../../df/d7b/structast__ari__channels__create__args.html#a4e0ea3bb8683fc4aa2d462bd1c1f6343">ast_ari_channels_create_args::app_args</a></div><div class="ttdeci">const char * app_args</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00112">resource_channels.h:112</a></div></div>
<div class="ttc" id="channel_8h_html_a4a5bc2ea394aace55ea3809e53365ea9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a></div><div class="ttdeci">struct ast_format_cap * ast_channel_nativeformats(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00637">channel_internal_api.c:637</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="json_8h_html_a53707225c3bf831e263245c6e3800676"><div class="ttname"><a href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a></div><div class="ttdeci">struct ast_json * ast_json_object_get(struct ast_json *object, const char *key)</div><div class="ttdoc">Get a field from a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00397">json.c:397</a></div></div>
<div class="ttc" id="resource__channels_8c_html_acc1511336d756ef90e6413691dc9bbd9"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#acc1511336d756ef90e6413691dc9bbd9">chan_data_destroy</a></div><div class="ttdeci">static void chan_data_destroy(struct ari_channel_thread_data *chan_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01684">resource_channels.c:1684</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="channel_8h_html_a1284a91696129ddcb1bf805adf769e0e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1284a91696129ddcb1bf805adf769e0e">ast_channel_errno</a></div><div class="ttdeci">enum ast_channel_error ast_channel_errno(void)</div><div class="ttdoc">Get error code for latest channel operation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11162">channel.c:11162</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="structast__ari__channels__create__args_html_a83a793edb3d6a3a15f2a7fc99ffe8c90"><div class="ttname"><a href="../../df/d7b/structast__ari__channels__create__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">ast_ari_channels_create_args::app</a></div><div class="ttdeci">const char * app</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00110">resource_channels.h:110</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a57ed0fe9c2bb5594ae0aa2f4ae6c7925"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57ed0fe9c2bb5594ae0aa2f4ae6c7925">&#9670;&nbsp;</a></span>ast_ari_channels_dial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_dial </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/d0a/structast__ari__channels__dial__args.html">ast_ari_channels_dial_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dial a created channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01939">1939</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00298">ast_ari_response_alloc_failed()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00785">ast_channel_adsicpe_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02992">ast_channel_cleanup</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00892">ast_channel_connected()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02373">ast_channel_datastore_inherit()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00904">ast_channel_dialed()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l06866">ast_channel_inherit_variables()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02952">ast_channel_lock_both</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9b745a6d0e3d7af90d2708dca5b5e069">ast_channel_musicclass()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00908">ast_channel_redirecting()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l06526">ast_channel_req_accountcodes()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01479">AST_CHANNEL_REQUESTOR_BRIDGE_PEER</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01038">ast_channel_stage_snapshot()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01043">ast_channel_stage_snapshot_done()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00501">ast_channel_transfercapability()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00505">ast_channel_transfercapability_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08389">ast_connected_line_copy_from_caller()</a>, <a class="el" href="../../d7/ddd/max__forwards_8c_source.html#l00135">ast_max_forwards_decrement()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02135">ast_party_redirecting_copy()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00036">AST_STATE_DOWN</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00037">AST_STATE_RESERVED</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00793">ast_ari_channels_dial_args::caller</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00791">ast_ari_channels_dial_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01766">restore_dialstring()</a>, <a class="el" href="../../de/de3/control_8c_source.html#l01666">stasis_app_control_dial()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00795">ast_ari_channels_dial_args::timeout</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00398">ast_party_dialed::transit_network_select</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l02691">ast_ari_channels_dial_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;{</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, caller, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>);</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, callee, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>);</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;   <span class="keywordtype">char</span> *dialstring;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../dc/d0a/structast__ari__channels__dial__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;      <span class="comment">/* Response filled in by find_control */</span></div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;   }</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;   caller = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(args-&gt;<a class="code" href="../../dc/d0a/structast__ari__channels__dial__args.html#ae48c745f37ff39e1065fa47101e84741">caller</a>);</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;   callee = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(args-&gt;<a class="code" href="../../dc/d0a/structast__ari__channels__dial__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;   <span class="keywordflow">if</span> (!callee) {</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 404, <span class="stringliteral">&quot;Not Found&quot;</span>,</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;         <span class="stringliteral">&quot;Callee not found&quot;</span>);</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;   }</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(callee) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;      &amp;&amp; <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(callee) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a>) {</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 409, <span class="stringliteral">&quot;Conflict&quot;</span>,</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;         <span class="stringliteral">&quot;Channel is not in the &#39;Down&#39; state&quot;</span>);</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;   }</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;   <span class="comment">/* XXX This is straight up copied from main/dial.c. It&#39;s probably good</span></div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;<span class="comment">    * to separate this to some common method.</span></div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;   <span class="keywordflow">if</span> (caller) {</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(caller, callee);</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(callee);</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;   }</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;   dialstring = <a class="code" href="../../da/d49/resource__channels_8c.html#a0b2777ad2a9db2b9c6ccf6dc154d4bda">restore_dialstring</a>(callee);</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;   <span class="keywordflow">if</span> (!dialstring) {</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(callee);</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      <span class="keywordflow">if</span> (caller) {</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(caller);</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;      }</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 409, <span class="stringliteral">&quot;Conflict&quot;</span>,</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;         <span class="stringliteral">&quot;Dialing a channel not created by ARI&quot;</span>);</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;   }</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;   <span class="comment">/* Make a copy of the dialstring just in case some jerk tries to hang up the</span></div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;<span class="comment">    * channel before we can actually dial</span></div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;   dialstring = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(dialstring);</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf195fcf1686408b5e52ad76996653cea">ast_channel_stage_snapshot</a>(callee);</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;   <span class="keywordflow">if</span> (caller) {</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a892b6550a4f90b70ad92198c9d05cedc">ast_channel_inherit_variables</a>(caller, callee);</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6ce892974f59537bda03a71319b452e2">ast_channel_datastore_inherit</a>(caller, callee);</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;      <a class="code" href="../../d3/d93/max__forwards_8h.html#a63b977e0cb5f350171fed9dffd4fabe5">ast_max_forwards_decrement</a>(callee);</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;      <span class="comment">/* Copy over callerid information */</span></div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af6f0b2102f29f86914e10a7787f0d536">ast_party_redirecting_copy</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(callee), <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(caller));</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a>(callee)-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#af1107092b9e5d7570605297a465ec766">transit_network_select</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a>(caller)-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#af1107092b9e5d7570605297a465ec766">transit_network_select</a>;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#accf4e9753bd5d7316f4988e74486552b">ast_connected_line_copy_from_caller</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(callee), <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(caller));</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;      ast_channel_language_set(callee, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(caller));</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6f3f42365ac84d888b55e35e1309f067">ast_channel_req_accountcodes</a>(callee, caller, <a class="code" href="../../d5/d7b/channel_8h.html#a31a465197a7766c3d0bb9f65f0a4418fa0e613bbe5c524be8c225eff98782e3a8">AST_CHANNEL_REQUESTOR_BRIDGE_PEER</a>);</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a9b745a6d0e3d7af90d2708dca5b5e069">ast_channel_musicclass</a>(callee)))</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;         ast_channel_musicclass_set(callee, <a class="code" href="../../d5/d7b/channel_8h.html#a9b745a6d0e3d7af90d2708dca5b5e069">ast_channel_musicclass</a>(caller));</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aed40a28831fcb5791cd63c1b8761d659">ast_channel_adsicpe_set</a>(callee, <a class="code" href="../../d5/d7b/channel_8h.html#a828f537544a2ad2352c56c078390a0bd">ast_channel_adsicpe</a>(caller));</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae307ed78db92c08b0dd9c13a7724ae86">ast_channel_transfercapability_set</a>(callee, <a class="code" href="../../d5/d7b/channel_8h.html#a57b29a2e12f8d2695625942049f81a2c">ast_channel_transfercapability</a>(caller));</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(caller);</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;   }</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga920b9d3e484257c7e593452a8e36d8d4">ast_channel_stage_snapshot_done</a>(callee);</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(callee);</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9c/stasis__app_8h.html#ab947f73656a6630c01b18dc648e58f5d">stasis_app_control_dial</a>(control, dialstring, args-&gt;<a class="code" href="../../dc/d0a/structast__ari__channels__dial__args.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)) {</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;   }</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00036">channelstate.h:36</a></div></div>
<div class="ttc" id="channel_8h_html_a57b29a2e12f8d2695625942049f81a2c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a57b29a2e12f8d2695625942049f81a2c">ast_channel_transfercapability</a></div><div class="ttdeci">unsigned short ast_channel_transfercapability(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00501">channel_internal_api.c:501</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00037">channelstate.h:37</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="structast__ari__channels__dial__args_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../dc/d0a/structast__ari__channels__dial__args.html#a493b57f443cc38b3d3df9c1e584d9d82">ast_ari_channels_dial_args::timeout</a></div><div class="ttdeci">int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00795">resource_channels.h:795</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="ari_8h_html_aa6503090da6366cef1eae5556e27b352"><div class="ttname"><a href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a></div><div class="ttdeci">void ast_ari_response_alloc_failed(struct ast_ari_response *response)</div><div class="ttdoc">Fill in response with a 500 message for allocation failures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00298">res_ari.c:298</a></div></div>
<div class="ttc" id="channel_8h_html_a31a465197a7766c3d0bb9f65f0a4418fa0e613bbe5c524be8c225eff98782e3a8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a31a465197a7766c3d0bb9f65f0a4418fa0e613bbe5c524be8c225eff98782e3a8">AST_CHANNEL_REQUESTOR_BRIDGE_PEER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01479">channel.h:1479</a></div></div>
<div class="ttc" id="structast__ari__channels__dial__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../dc/d0a/structast__ari__channels__dial__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_dial_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00791">resource_channels.h:791</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a0b2777ad2a9db2b9c6ccf6dc154d4bda"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a0b2777ad2a9db2b9c6ccf6dc154d4bda">restore_dialstring</a></div><div class="ttdeci">static char * restore_dialstring(struct ast_channel *chan)</div><div class="ttdoc">Retrieve the dialstring from the channel datastore. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01766">resource_channels.c:1766</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_a6ce892974f59537bda03a71319b452e2"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6ce892974f59537bda03a71319b452e2">ast_channel_datastore_inherit</a></div><div class="ttdeci">int ast_channel_datastore_inherit(struct ast_channel *from, struct ast_channel *to)</div><div class="ttdoc">Inherit datastores from a parent to a child. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02373">channel.c:2373</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga920b9d3e484257c7e593452a8e36d8d4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga920b9d3e484257c7e593452a8e36d8d4">ast_channel_stage_snapshot_done</a></div><div class="ttdeci">void ast_channel_stage_snapshot_done(struct ast_channel *chan)</div><div class="ttdoc">Clear flag to indicate channel snapshot is being staged, and publish snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01043">stasis_channels.c:1043</a></div></div>
<div class="ttc" id="channel_8h_html_a10f23f1907b804485f62973f66cd9aef"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a></div><div class="ttdeci">struct ast_party_connected_line * ast_channel_connected(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00892">channel_internal_api.c:892</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="stasis__app_8h_html_ab947f73656a6630c01b18dc648e58f5d"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#ab947f73656a6630c01b18dc648e58f5d">stasis_app_control_dial</a></div><div class="ttdeci">int stasis_app_control_dial(struct stasis_app_control *control, const char *dialstring, unsigned int timeout)</div><div class="ttdoc">Dial a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l01666">control.c:1666</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="channel_8h_html_a6f3f42365ac84d888b55e35e1309f067"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6f3f42365ac84d888b55e35e1309f067">ast_channel_req_accountcodes</a></div><div class="ttdeci">void ast_channel_req_accountcodes(struct ast_channel *chan, const struct ast_channel *requestor, enum ast_channel_requestor_relationship relationship)</div><div class="ttdoc">Setup new channel accountcodes from the requestor channel after ast_request(). </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06526">channel.c:6526</a></div></div>
<div class="ttc" id="channel_8h_html_aed40a28831fcb5791cd63c1b8761d659"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aed40a28831fcb5791cd63c1b8761d659">ast_channel_adsicpe_set</a></div><div class="ttdeci">void ast_channel_adsicpe_set(struct ast_channel *chan, enum ast_channel_adsicpe value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00785">channel_internal_api.c:785</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf195fcf1686408b5e52ad76996653cea"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf195fcf1686408b5e52ad76996653cea">ast_channel_stage_snapshot</a></div><div class="ttdeci">void ast_channel_stage_snapshot(struct ast_channel *chan)</div><div class="ttdoc">Set flag to indicate channel snapshot is being staged. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01038">stasis_channels.c:1038</a></div></div>
<div class="ttc" id="channel_8h_html_a828f537544a2ad2352c56c078390a0bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a828f537544a2ad2352c56c078390a0bd">ast_channel_adsicpe</a></div><div class="ttdeci">ast_channel_adsicpe</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00869">channel.h:869</a></div></div>
<div class="ttc" id="channel_8h_html_a63732831df3e7a0999b0900ec85c626a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a></div><div class="ttdeci">struct ast_party_dialed * ast_channel_dialed(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00904">channel_internal_api.c:904</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a892b6550a4f90b70ad92198c9d05cedc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a892b6550a4f90b70ad92198c9d05cedc">ast_channel_inherit_variables</a></div><div class="ttdeci">void ast_channel_inherit_variables(const struct ast_channel *parent, struct ast_channel *child)</div><div class="ttdoc">Inherits channel variable from parent to child channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06866">channel.c:6866</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="channel_8h_html_ad2334e69c466aec25ba3cbba53b7201b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a></div><div class="ttdeci">struct ast_party_redirecting * ast_channel_redirecting(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00908">channel_internal_api.c:908</a></div></div>
<div class="ttc" id="channel_8h_html_a695e5b4fcf983db6451b583fbd647424"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a></div><div class="ttdeci">#define ast_channel_lock_both(chan1, chan2)</div><div class="ttdoc">Lock two channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02952">channel.h:2952</a></div></div>
<div class="ttc" id="structast__party__dialed_html_af1107092b9e5d7570605297a465ec766"><div class="ttname"><a href="../../d1/dd1/structast__party__dialed.html#af1107092b9e5d7570605297a465ec766">ast_party_dialed::transit_network_select</a></div><div class="ttdeci">int transit_network_select</div><div class="ttdoc">Transit Network Select. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00398">channel.h:398</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="max__forwards_8h_html_a63b977e0cb5f350171fed9dffd4fabe5"><div class="ttname"><a href="../../d3/d93/max__forwards_8h.html#a63b977e0cb5f350171fed9dffd4fabe5">ast_max_forwards_decrement</a></div><div class="ttdeci">int ast_max_forwards_decrement(struct ast_channel *chan)</div><div class="ttdoc">Decrement the max forwards count for a particular channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddd/max__forwards_8c_source.html#l00135">max_forwards.c:135</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_accf4e9753bd5d7316f4988e74486552b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#accf4e9753bd5d7316f4988e74486552b">ast_connected_line_copy_from_caller</a></div><div class="ttdeci">void ast_connected_line_copy_from_caller(struct ast_party_connected_line *dest, const struct ast_party_caller *src)</div><div class="ttdoc">Copy the caller information to the connected line information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08389">channel.c:8389</a></div></div>
<div class="ttc" id="channel_8h_html_ae307ed78db92c08b0dd9c13a7724ae86"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae307ed78db92c08b0dd9c13a7724ae86">ast_channel_transfercapability_set</a></div><div class="ttdeci">void ast_channel_transfercapability_set(struct ast_channel *chan, unsigned short value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00505">channel_internal_api.c:505</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structast__ari__channels__dial__args_html_ae48c745f37ff39e1065fa47101e84741"><div class="ttname"><a href="../../dc/d0a/structast__ari__channels__dial__args.html#ae48c745f37ff39e1065fa47101e84741">ast_ari_channels_dial_args::caller</a></div><div class="ttdeci">const char * caller</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00793">resource_channels.h:793</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="channel_8h_html_af6f0b2102f29f86914e10a7787f0d536"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af6f0b2102f29f86914e10a7787f0d536">ast_party_redirecting_copy</a></div><div class="ttdeci">void ast_party_redirecting_copy(struct ast_party_redirecting *dest, const struct ast_party_redirecting *src)</div><div class="ttdoc">Copy the source redirecting information to the destination redirecting. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02135">channel.c:2135</a></div></div>
<div class="ttc" id="channel_8h_html_a9b745a6d0e3d7af90d2708dca5b5e069"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9b745a6d0e3d7af90d2708dca5b5e069">ast_channel_musicclass</a></div><div class="ttdeci">const char * ast_channel_musicclass(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8a091a02f441a6bd33bf7e182eb4cf88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a091a02f441a6bd33bf7e182eb4cf88">&#9670;&nbsp;</a></span>ast_ari_channels_external_media()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_external_media </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d79/structast__ari__channels__external__media__args.html">ast_ari_channels_external_media_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start an External Media session. </p>
<p>Create a channel to an External Media source/sink.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l02176">2176</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00834">ast_ari_channels_external_media_args::app</a>, <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l02814">ast_ari_channels_external_media_parse_body()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00397">ast_json_object_get()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00164">ast_sockaddr_split_hostport()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00844">ast_ari_channels_external_media_args::connection_type</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00848">ast_ari_channels_external_media_args::direction</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00840">ast_ari_channels_external_media_args::encapsulation</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00838">ast_ari_channels_external_media_args::external_host</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l02128">external_media_audiosocket_tcp()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l02084">external_media_rtp_udp()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00846">ast_ari_channels_external_media_args::format</a>, <a class="el" href="../../d0/d8a/muted_8c_source.html#l00077">host</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01373">json_to_ast_variables()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01134">PARSE_PORT_REQUIRE</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00842">ast_ari_channels_external_media_args::transport</a>, and <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00836">ast_ari_channels_external_media_args::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l02866">ast_ari_channels_external_media_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;{</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *variables = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;   <span class="keywordtype">char</span> *external_host;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;   <span class="keywordtype">char</span> *port = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(response != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">app</a>)) {</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>, <span class="stringliteral">&quot;app cannot be empty&quot;</span>);</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;   }</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a6649fc2868238ab5d8001361c57bbfe4">external_host</a>)) {</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>, <span class="stringliteral">&quot;external_host cannot be empty&quot;</span>);</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;   }</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;   external_host = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a6649fc2868238ab5d8001361c57bbfe4">external_host</a>);</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#a774d22af00b04d5bc0c9e3456ac44ad2">ast_sockaddr_split_hostport</a>(external_host, &amp;host, &amp;port, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569faf8734b2de041808f7ad5ce81ce4fcbcb">PARSE_PORT_REQUIRE</a>)) {</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>, <span class="stringliteral">&quot;external_host must be &lt;host&gt;:&lt;port&gt;&quot;</span>);</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;   }</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a6bd2bb5fcc7628a640958994a22f997c">format</a>)) {</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>, <span class="stringliteral">&quot;format cannot be empty&quot;</span>);</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;   }</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a48bdf99b8c386af733c5f08f8092aea7">encapsulation</a>)) {</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a48bdf99b8c386af733c5f08f8092aea7">encapsulation</a> = <span class="stringliteral">&quot;rtp&quot;</span>;</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;   }</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a4601fd78d1de381f137672a9fe5128a8">transport</a>)) {</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a4601fd78d1de381f137672a9fe5128a8">transport</a> = <span class="stringliteral">&quot;udp&quot;</span>;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   }</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a0b1d1691d82994c5e3b3e09a8001a26b">connection_type</a>)) {</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a0b1d1691d82994c5e3b3e09a8001a26b">connection_type</a> = <span class="stringliteral">&quot;client&quot;</span>;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;   }</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#ae495ce4d65a6f5391715f97994829da1">direction</a>)) {</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;      args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#ae495ce4d65a6f5391715f97994829da1">direction</a> = <span class="stringliteral">&quot;both&quot;</span>;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;   }</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;   <span class="keywordflow">if</span> (args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a74535fe04c54601eaf3275d87bff092d">variables</a>) {</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_variables;</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;      <a class="code" href="../../d0/d12/resource__channels_8h.html#aaa36bef0017df6b7b6c0727322552fce">ast_ari_channels_external_media_parse_body</a>(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a74535fe04c54601eaf3275d87bff092d">variables</a>, args);</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;      json_variables = <a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a74535fe04c54601eaf3275d87bff092d">variables</a>, <span class="stringliteral">&quot;variables&quot;</span>);</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;      <span class="keywordflow">if</span> (json_variables</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;         &amp;&amp; <a class="code" href="../../da/d49/resource__channels_8c.html#a61d455b941bd7ebf96bcbf5532fefe07">json_to_ast_variables</a>(response, json_variables, &amp;variables)) {</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;      }</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;   }</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;   <span class="keywordflow">if</span> (strcasecmp(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a48bdf99b8c386af733c5f08f8092aea7">encapsulation</a>, <span class="stringliteral">&quot;rtp&quot;</span>) == 0 &amp;&amp; strcasecmp(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a4601fd78d1de381f137672a9fe5128a8">transport</a>, <span class="stringliteral">&quot;udp&quot;</span>) == 0) {</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;      <a class="code" href="../../da/d49/resource__channels_8c.html#adda4979bdaa42a510f1d0cdce1203335">external_media_rtp_udp</a>(args, variables, response);</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a48bdf99b8c386af733c5f08f8092aea7">encapsulation</a>, <span class="stringliteral">&quot;audiosocket&quot;</span>) == 0 &amp;&amp; strcasecmp(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a4601fd78d1de381f137672a9fe5128a8">transport</a>, <span class="stringliteral">&quot;tcp&quot;</span>) == 0) {</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;      <a class="code" href="../../da/d49/resource__channels_8c.html#aa9ffeec3f2fc137675ad6e02f3e1599d">external_media_audiosocket_tcp</a>(args, variables, response);</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;         response, 501, <span class="stringliteral">&quot;Not Implemented&quot;</span>,</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;         <span class="stringliteral">&quot;The encapsulation and/or transport is not supported&quot;</span>);</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;   }</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;}</div><div class="ttc" id="resource__channels_8h_html_aaa36bef0017df6b7b6c0727322552fce"><div class="ttname"><a href="../../d0/d12/resource__channels_8h.html#aaa36bef0017df6b7b6c0727322552fce">ast_ari_channels_external_media_parse_body</a></div><div class="ttdeci">int ast_ari_channels_external_media_parse_body(struct ast_json *body, struct ast_ari_channels_external_media_args *args)</div><div class="ttdoc">Body parsing function for /channels/externalMedia. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/daa/res__ari__channels_8c_source.html#l02814">res_ari_channels.c:2814</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a4601fd78d1de381f137672a9fe5128a8"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a4601fd78d1de381f137672a9fe5128a8">ast_ari_channels_external_media_args::transport</a></div><div class="ttdeci">const char * transport</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00842">resource_channels.h:842</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a48bdf99b8c386af733c5f08f8092aea7"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a48bdf99b8c386af733c5f08f8092aea7">ast_ari_channels_external_media_args::encapsulation</a></div><div class="ttdeci">const char * encapsulation</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00840">resource_channels.h:840</a></div></div>
<div class="ttc" id="resource__channels_8c_html_adda4979bdaa42a510f1d0cdce1203335"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#adda4979bdaa42a510f1d0cdce1203335">external_media_rtp_udp</a></div><div class="ttdeci">static void external_media_rtp_udp(struct ast_ari_channels_external_media_args *args, struct ast_variable *variables, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l02084">resource_channels.c:2084</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a0b1d1691d82994c5e3b3e09a8001a26b"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a0b1d1691d82994c5e3b3e09a8001a26b">ast_ari_channels_external_media_args::connection_type</a></div><div class="ttdeci">const char * connection_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00844">resource_channels.h:844</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a6bd2bb5fcc7628a640958994a22f997c"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a6bd2bb5fcc7628a640958994a22f997c">ast_ari_channels_external_media_args::format</a></div><div class="ttdeci">const char * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00846">resource_channels.h:846</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a74535fe04c54601eaf3275d87bff092d"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a74535fe04c54601eaf3275d87bff092d">ast_ari_channels_external_media_args::variables</a></div><div class="ttdeci">struct ast_json * variables</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00836">resource_channels.h:836</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a61d455b941bd7ebf96bcbf5532fefe07"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a61d455b941bd7ebf96bcbf5532fefe07">json_to_ast_variables</a></div><div class="ttdeci">static int json_to_ast_variables(struct ast_ari_response *response, struct ast_json *json_variables, struct ast_variable **variables)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01373">resource_channels.c:1373</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569faf8734b2de041808f7ad5ce81ce4fcbcb"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569faf8734b2de041808f7ad5ce81ce4fcbcb">PARSE_PORT_REQUIRE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01134">include/asterisk/config.h:1134</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_ae495ce4d65a6f5391715f97994829da1"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#ae495ce4d65a6f5391715f97994829da1">ast_ari_channels_external_media_args::direction</a></div><div class="ttdeci">const char * direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00848">resource_channels.h:848</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
<div class="ttc" id="netsock2_8h_html_a774d22af00b04d5bc0c9e3456ac44ad2"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a774d22af00b04d5bc0c9e3456ac44ad2">ast_sockaddr_split_hostport</a></div><div class="ttdeci">int ast_sockaddr_split_hostport(char *str, char **host, char **port, int flags)</div><div class="ttdoc">Splits a string into its host and port components. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00164">netsock2.c:164</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a6649fc2868238ab5d8001361c57bbfe4"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a6649fc2868238ab5d8001361c57bbfe4">ast_ari_channels_external_media_args::external_host</a></div><div class="ttdeci">const char * external_host</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00838">resource_channels.h:838</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a83a793edb3d6a3a15f2a7fc99ffe8c90"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">ast_ari_channels_external_media_args::app</a></div><div class="ttdeci">const char * app</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00834">resource_channels.h:834</a></div></div>
<div class="ttc" id="json_8h_html_a53707225c3bf831e263245c6e3800676"><div class="ttname"><a href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a></div><div class="ttdeci">struct ast_json * ast_json_object_get(struct ast_json *object, const char *key)</div><div class="ttdoc">Get a field from a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00397">json.c:397</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="resource__channels_8c_html_aa9ffeec3f2fc137675ad6e02f3e1599d"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa9ffeec3f2fc137675ad6e02f3e1599d">external_media_audiosocket_tcp</a></div><div class="ttdeci">static void external_media_audiosocket_tcp(struct ast_ari_channels_external_media_args *args, struct ast_variable *variables, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l02128">resource_channels.c:2128</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a67d391d1a687554cadc6279d9681deff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67d391d1a687554cadc6279d9681deff">&#9670;&nbsp;</a></span>ast_ari_channels_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d43/structast__ari__channels__get__args.html">ast_ari_channels_get_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Channel details. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00888">888</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00276">ast_ari_response_ok()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01255">ast_channel_snapshot_to_json()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00146">ast_ari_channels_get_args::channel_id</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l00385">ast_ari_channels_get_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;{</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *snapshot;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(args-&gt;<a class="code" href="../../da/d43/structast__ari__channels__get__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;         response, 404, <span class="stringliteral">&quot;Not Found&quot;</span>,</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;         <span class="stringliteral">&quot;Channel not found&quot;</span>);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   }</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a>(response,</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="structast__ari__channels__get__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../da/d43/structast__ari__channels__get__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_get_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00146">resource_channels.h:146</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="ari_8h_html_a9111898e4037c6e06472038d67a78a2e"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a></div><div class="ttdeci">void ast_ari_response_ok(struct ast_ari_response *response, struct ast_json *message)</div><div class="ttdoc">Fill in an OK (200) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00276">res_ari.c:276</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis__channels_8h_html_a7571e6d10d716525aaa64b1f6583979b"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_channel_snapshot_to_json(const struct ast_channel_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_channel_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01255">stasis_channels.c:1255</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af7c6b49c77262a70632c57e2fd2f1d9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7c6b49c77262a70632c57e2fd2f1d9c">&#9670;&nbsp;</a></span>ast_ari_channels_get_channel_var()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_get_channel_var </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/d45/structast__ari__channels__get__channel__var__args.html">ast_ari_channels_get_channel_var_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the value of a channel variable or function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01472">1472</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00298">ast_ari_response_alloc_failed()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00276">ast_ari_response_ok()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02992">ast_channel_cleanup</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../db/d70/pbx__functions_8c_source.html#l00642">ast_func_read2()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00067">ast_json_ref()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l00246">ast_str_retrieve_variable()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00665">ast_ari_channels_get_channel_var_args::channel_id</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>, and <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00667">ast_ari_channels_get_channel_var_args::variable</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l02298">ast_ari_channels_get_channel_var_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;{</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, json, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(32), <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, <a class="code" href="../../d4/d84/structchannel.html">channel</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>);</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(response != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>) {</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;   }</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d3/d45/structast__ari__channels__get__channel__var__args.html#a114813163ea6a5363599b256ec12be81">variable</a>)) {</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;         <span class="stringliteral">&quot;Variable name is required&quot;</span>);</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;   }</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d3/d45/structast__ari__channels__get__channel__var__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>)) {</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;         <span class="stringliteral">&quot;Channel ID is required&quot;</span>);</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   }</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   <a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(args-&gt;<a class="code" href="../../d3/d45/structast__ari__channels__get__channel__var__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d84/structchannel.html">channel</a>) {</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;         response, 404, <span class="stringliteral">&quot;Channel Not Found&quot;</span>,</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;         <span class="stringliteral">&quot;Provided channel was not found&quot;</span>);</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   }</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;   <span class="comment">/* You may be tempted to lock the channel you&#39;re about to read from. You</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;<span class="comment">    * would be wrong. Some dialplan functions put the channel into</span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="comment">    * autoservice, which deadlocks if the channel is already locked.</span></div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;<span class="comment">    * ast_str_retrieve_variable() does its own locking, and the dialplan</span></div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;<span class="comment">    * functions need to as well. We should be fine without the lock.</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;   <span class="keywordflow">if</span> (args-&gt;<a class="code" href="../../d3/d45/structast__ari__channels__get__channel__var__args.html#a114813163ea6a5363599b256ec12be81">variable</a>[strlen(args-&gt;<a class="code" href="../../d3/d45/structast__ari__channels__get__channel__var__args.html#a114813163ea6a5363599b256ec12be81">variable</a>) - 1] == <span class="charliteral">&#39;)&#39;</span>) {</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a9c74b2f5ba8be6e351d35c1b97803e1e">ast_func_read2</a>(<a class="code" href="../../d4/d84/structchannel.html">channel</a>, args-&gt;<a class="code" href="../../d3/d45/structast__ari__channels__get__channel__var__args.html#a114813163ea6a5363599b256ec12be81">variable</a>, &amp;<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, 0)) {</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;            response, 500, <span class="stringliteral">&quot;Error With Function&quot;</span>,</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;            <span class="stringliteral">&quot;Unable to read provided function&quot;</span>);</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      }</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#a2ddba5e9da6f9b512561b7fe4c15c5d2">ast_str_retrieve_variable</a>(&amp;<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, 0, <a class="code" href="../../d4/d84/structchannel.html">channel</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, args-&gt;<a class="code" href="../../d3/d45/structast__ari__channels__get__channel__var__args.html#a114813163ea6a5363599b256ec12be81">variable</a>)) {</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;            response, 404, <span class="stringliteral">&quot;Variable Not Found&quot;</span>,</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;            <span class="stringliteral">&quot;Provided variable was not found&quot;</span>);</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      }</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;   }</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;   <span class="keywordflow">if</span> (!(json = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s}&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>), <span class="stringliteral">&quot;&quot;</span>)))) {</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;   }</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a>(response, <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(json));</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="json_8h_html_a0ca956b7df20127f7e38993c3c06cb2c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a></div><div class="ttdeci">struct ast_json * ast_json_ref(struct ast_json *value)</div><div class="ttdoc">Increase refcount on value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00067">json.c:67</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="pbx_8h_html_a9c74b2f5ba8be6e351d35c1b97803e1e"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a9c74b2f5ba8be6e351d35c1b97803e1e">ast_func_read2</a></div><div class="ttdeci">int ast_func_read2(struct ast_channel *chan, const char *function, struct ast_str **str, ssize_t maxlen)</div><div class="ttdoc">executes a read operation on a function </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00642">pbx_functions.c:642</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__ari__channels__get__channel__var__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d3/d45/structast__ari__channels__get__channel__var__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_get_channel_var_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00665">resource_channels.h:665</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="ari_8h_html_aa6503090da6366cef1eae5556e27b352"><div class="ttname"><a href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a></div><div class="ttdeci">void ast_ari_response_alloc_failed(struct ast_ari_response *response)</div><div class="ttdoc">Fill in response with a 500 message for allocation failures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00298">res_ari.c:298</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__ari__channels__get__channel__var__args_html_a114813163ea6a5363599b256ec12be81"><div class="ttname"><a href="../../d3/d45/structast__ari__channels__get__channel__var__args.html#a114813163ea6a5363599b256ec12be81">ast_ari_channels_get_channel_var_args::variable</a></div><div class="ttdeci">const char * variable</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00667">resource_channels.h:667</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="ari_8h_html_a9111898e4037c6e06472038d67a78a2e"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a></div><div class="ttdeci">void ast_ari_response_ok(struct ast_ari_response *response, struct ast_json *message)</div><div class="ttdoc">Fill in an OK (200) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00276">res_ari.c:276</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="pbx_8h_html_a2ddba5e9da6f9b512561b7fe4c15c5d2"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a2ddba5e9da6f9b512561b7fe4c15c5d2">ast_str_retrieve_variable</a></div><div class="ttdeci">const char * ast_str_retrieve_variable(struct ast_str **buf, ssize_t maxlen, struct ast_channel *chan, struct varshead *headp, const char *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l00246">pbx_variables.c:246</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afd2c4f6f8cf58d3a5915f228db163f9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd2c4f6f8cf58d3a5915f228db163f9f">&#9670;&nbsp;</a></span>ast_ari_channels_hangup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_hangup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d4a/structast__ari__channels__hangup__args.html">ast_ari_channels_hangup_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete (i.e. hangup) a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00907">907</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00150">AST_CAUSE_NORMAL</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00431">ast_channel_hangupcause_set()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02476">ast_softhangup()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01149">AST_SOFTHANGUP_EXPLICIT</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00211">ast_ari_channels_hangup_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00053">convert_reason_to_hangup_code()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00215">ast_ari_channels_hangup_args::reason</a>, and <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00213">ast_ari_channels_hangup_args::reason_code</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l00616">ast_ari_channels_hangup_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;{</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   <span class="keywordtype">int</span> cause;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(args-&gt;<a class="code" href="../../d0/d4a/structast__ari__channels__hangup__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;   <span class="keywordflow">if</span> (chan == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;         response, 404, <span class="stringliteral">&quot;Not Found&quot;</span>,</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;         <span class="stringliteral">&quot;Channel not found&quot;</span>);</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;   }</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d0/d4a/structast__ari__channels__hangup__args.html#a4df95772ac39ca7dd724fbc77a3676ff">reason</a>) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d0/d4a/structast__ari__channels__hangup__args.html#a422c46710034af1e1c61c132913b37ac">reason_code</a>)) {</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;         <span class="stringliteral">&quot;The reason and reason_code can&#39;t both be specified&quot;</span>);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;   }</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d0/d4a/structast__ari__channels__hangup__args.html#a422c46710034af1e1c61c132913b37ac">reason_code</a>)) {</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <span class="comment">/* reason_code allows any hangup code */</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <span class="keywordflow">if</span> (sscanf(args-&gt;<a class="code" href="../../d0/d4a/structast__ari__channels__hangup__args.html#a422c46710034af1e1c61c132913b37ac">reason_code</a>, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;cause) != 1) {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            response, 400, <span class="stringliteral">&quot;Invalid Reason Code&quot;</span>,</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            <span class="stringliteral">&quot;Invalid reason for hangup reason code provided&quot;</span>);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      }</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d0/d4a/structast__ari__channels__hangup__args.html#a4df95772ac39ca7dd724fbc77a3676ff">reason</a>)) {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <span class="comment">/* reason allows only listed hangup reason */</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      cause = <a class="code" href="../../da/d49/resource__channels_8c.html#aac739d5c5082c4bd26cb5032fbcb4ec5">convert_reason_to_hangup_code</a>(args-&gt;<a class="code" href="../../d0/d4a/structast__ari__channels__hangup__args.html#a4df95772ac39ca7dd724fbc77a3676ff">reason</a>);</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <span class="keywordflow">if</span> (cause == -1) {</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;            response, 400, <span class="stringliteral">&quot;Invalid Reason&quot;</span>,</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            <span class="stringliteral">&quot;Invalid reason for hangup reason provided&quot;</span>);</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      }</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="comment">/* not specified. set default hangup */</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      cause = <a class="code" href="../../d4/da3/causes_8h.html#a7858ab2ba4858d98e29f0ea54980313c">AST_CAUSE_NORMAL</a>;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   }</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(chan, cause);</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee">AST_SOFTHANGUP_EXPLICIT</a>);</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ae6b4b7ba458e88fdbb2df9f39d935337"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a></div><div class="ttdeci">void ast_channel_hangupcause_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00431">channel_internal_api.c:431</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee">AST_SOFTHANGUP_EXPLICIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01149">channel.h:1149</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aac739d5c5082c4bd26cb5032fbcb4ec5"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aac739d5c5082c4bd26cb5032fbcb4ec5">convert_reason_to_hangup_code</a></div><div class="ttdeci">static int convert_reason_to_hangup_code(const char *reason)</div><div class="ttdoc">Return the corresponded hangup code of the given reason. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00053">resource_channels.c:53</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__ari__channels__hangup__args_html_a422c46710034af1e1c61c132913b37ac"><div class="ttname"><a href="../../d0/d4a/structast__ari__channels__hangup__args.html#a422c46710034af1e1c61c132913b37ac">ast_ari_channels_hangup_args::reason_code</a></div><div class="ttdeci">const char * reason_code</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00213">resource_channels.h:213</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__ari__channels__hangup__args_html_a4df95772ac39ca7dd724fbc77a3676ff"><div class="ttname"><a href="../../d0/d4a/structast__ari__channels__hangup__args.html#a4df95772ac39ca7dd724fbc77a3676ff">ast_ari_channels_hangup_args::reason</a></div><div class="ttdeci">const char * reason</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00215">resource_channels.h:215</a></div></div>
<div class="ttc" id="channel_8h_html_ac2d6607253f7e8b272d4e845474eaa9b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a></div><div class="ttdeci">int ast_softhangup(struct ast_channel *chan, int reason)</div><div class="ttdoc">Softly hangup up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02476">channel.c:2476</a></div></div>
<div class="ttc" id="causes_8h_html_a7858ab2ba4858d98e29f0ea54980313c"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a7858ab2ba4858d98e29f0ea54980313c">AST_CAUSE_NORMAL</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00150">causes.h:150</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="structast__ari__channels__hangup__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d0/d4a/structast__ari__channels__hangup__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_hangup_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00211">resource_channels.h:211</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad54807440a3081f8a6b4738b1e3bdae7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad54807440a3081f8a6b4738b1e3bdae7">&#9670;&nbsp;</a></span>ast_ari_channels_hold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_hold </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../de/d93/structast__ari__channels__hold__args.html">ast_ari_channels_hold_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hold a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00514">514</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00450">ast_ari_channels_hold_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">channel_state_invalid()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00748">stasis_app_control_hold()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l01424">ast_ari_channels_hold_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;{</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../de/d93/structast__ari__channels__hold__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="comment">/* Response filled in by find_control */</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;   }</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a>(control, response)) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;   }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#a9bb10fa5db167b16a211526e13673edf">stasis_app_control_hold</a>(control);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;}</div><div class="ttc" id="stasis__app_8h_html_a9bb10fa5db167b16a211526e13673edf"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a9bb10fa5db167b16a211526e13673edf">stasis_app_control_hold</a></div><div class="ttdeci">void stasis_app_control_hold(struct stasis_app_control *control)</div><div class="ttdoc">Place the channel associated with the control on hold. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00748">control.c:748</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__ari__channels__hold__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../de/d93/structast__ari__channels__hold__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_hold_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00450">resource_channels.h:450</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a4a584f5ec1d637b285149ea0e2adda14"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a></div><div class="ttdeci">static int channel_state_invalid(struct stasis_app_control *control, struct ast_ari_response *response)</div><div class="ttdoc">Ensure channel is in a state that allows operation to be performed. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00108">resource_channels.c:108</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a63bcc604de596210352572bbd343cd07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63bcc604de596210352572bbd343cd07">&#9670;&nbsp;</a></span>ast_ari_channels_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d73/structast__ari__channels__list__args.html">ast_ari_channels_list_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List all active channels in Asterisk. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00956">956</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00298">ast_ari_response_alloc_failed()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00276">ast_ari_response_ok()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00123">ast_channel_cache_all()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01255">ast_channel_snapshot_to_json()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00368">ast_json_array_append()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00352">ast_json_array_create()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00067">ast_json_ref()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00221">stasis_message_sanitizer::channel_snapshot</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l02264">stasis_app_get_sanitizer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l00064">ast_ari_channels_list_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;{</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *, snapshots, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, json, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;   <span class="keywordtype">void</span> *obj;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *sanitize = <a class="code" href="../../d8/d9c/stasis__app_8h.html#a75e0d54649ef61d0ac78c70bf9ff58ec">stasis_app_get_sanitizer</a>();</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;   snapshots = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga22135951096d748d6ff98ed45cb25639">ast_channel_cache_all</a>();</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   json = <a class="code" href="../../d4/d05/json_8h.html#a48d874eed79fb2bbeb0557440e33ae67">ast_json_array_create</a>();</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;   <span class="keywordflow">if</span> (!json) {</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   }</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(snapshots, 0);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;   <span class="keywordflow">while</span> ((obj = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *snapshot = obj;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      <span class="keywordtype">int</span> r;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      <span class="keywordflow">if</span> (sanitize &amp;&amp; sanitize-&gt;<a class="code" href="../../d4/d45/structstasis__message__sanitizer.html#a9590911c3a9b5d5f6207be2753d9b3c3">channel_snapshot</a></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;         &amp;&amp; sanitize-&gt;<a class="code" href="../../d4/d45/structstasis__message__sanitizer.html#a9590911c3a9b5d5f6207be2753d9b3c3">channel_snapshot</a>(snapshot)) {</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      }</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      r = <a class="code" href="../../d4/d05/json_8h.html#a3d675e52f866630a6a03302df2712b8d">ast_json_array_append</a>(</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;         json, <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <span class="keywordflow">if</span> (r != 0) {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      }</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a>(response, <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(json));</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;}</div><div class="ttc" id="json_8h_html_a0ca956b7df20127f7e38993c3c06cb2c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a></div><div class="ttdeci">struct ast_json * ast_json_ref(struct ast_json *value)</div><div class="ttdoc">Increase refcount on value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00067">json.c:67</a></div></div>
<div class="ttc" id="structstasis__message__sanitizer_html_a9590911c3a9b5d5f6207be2753d9b3c3"><div class="ttname"><a href="../../d4/d45/structstasis__message__sanitizer.html#a9590911c3a9b5d5f6207be2753d9b3c3">stasis_message_sanitizer::channel_snapshot</a></div><div class="ttdeci">int(* channel_snapshot)(const struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Callback which determines whether a channel should be sanitized from a message based on the channel&amp;#39;s...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00221">stasis.h:221</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="ari_8h_html_aa6503090da6366cef1eae5556e27b352"><div class="ttname"><a href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a></div><div class="ttdeci">void ast_ari_response_alloc_failed(struct ast_ari_response *response)</div><div class="ttdoc">Fill in response with a 500 message for allocation failures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00298">res_ari.c:298</a></div></div>
<div class="ttc" id="structstasis__message__sanitizer_html"><div class="ttname"><a href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a></div><div class="ttdoc">Structure containing callbacks for Stasis message sanitization. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00200">stasis.h:200</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="ari_8h_html_a9111898e4037c6e06472038d67a78a2e"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a></div><div class="ttdeci">void ast_ari_response_ok(struct ast_ari_response *response, struct ast_json *message)</div><div class="ttdoc">Fill in an OK (200) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00276">res_ari.c:276</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga22135951096d748d6ff98ed45cb25639"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga22135951096d748d6ff98ed45cb25639">ast_channel_cache_all</a></div><div class="ttdeci">struct ao2_container * ast_channel_cache_all(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00123">stasis_channels.c:123</a></div></div>
<div class="ttc" id="json_8h_html_a48d874eed79fb2bbeb0557440e33ae67"><div class="ttname"><a href="../../d4/d05/json_8h.html#a48d874eed79fb2bbeb0557440e33ae67">ast_json_array_create</a></div><div class="ttdeci">struct ast_json * ast_json_array_create(void)</div><div class="ttdoc">Create a empty JSON array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00352">json.c:352</a></div></div>
<div class="ttc" id="json_8h_html_a3d675e52f866630a6a03302df2712b8d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a3d675e52f866630a6a03302df2712b8d">ast_json_array_append</a></div><div class="ttdeci">int ast_json_array_append(struct ast_json *array, struct ast_json *value)</div><div class="ttdoc">Append to an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00368">json.c:368</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a75e0d54649ef61d0ac78c70bf9ff58ec"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a75e0d54649ef61d0ac78c70bf9ff58ec">stasis_app_get_sanitizer</a></div><div class="ttdeci">struct stasis_message_sanitizer * stasis_app_get_sanitizer(void)</div><div class="ttdoc">Get the Stasis message sanitizer for app_stasis applications. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l02264">res_stasis.c:2264</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="stasis__channels_8h_html_a7571e6d10d716525aaa64b1f6583979b"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_channel_snapshot_to_json(const struct ast_channel_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_channel_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01255">stasis_channels.c:1255</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ca676026e7e5be027877f6b66f7518d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ca676026e7e5be027877f6b66f7518d">&#9670;&nbsp;</a></span>ast_ari_channels_move()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_move </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/d9c/structast__ari__channels__move__args.html">ast_ari_channels_move_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move the channel from one Stasis application to another. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00256">256</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00273">ast_ari_channels_move_args::app</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00275">ast_ari_channels_move_args::app_args</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00271">ast_ari_channels_move_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00451">stasis_app_control_move()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l00809">ast_ari_channels_move_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;{</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../d3/d9c/structast__ari__channels__move__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   <span class="keywordflow">if</span> (!control) {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9c/stasis__app_8h.html#a5df0352d477bb7ff14767cf9d4cd301f">stasis_app_control_move</a>(control, args-&gt;<a class="code" href="../../d3/d9c/structast__ari__channels__move__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">app</a>, args-&gt;<a class="code" href="../../d3/d9c/structast__ari__channels__move__args.html#a4e0ea3bb8683fc4aa2d462bd1c1f6343">app_args</a>)) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;         <span class="stringliteral">&quot;Failed to switch Stasis applications&quot;</span>);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div><div class="ttc" id="structast__ari__channels__move__args_html_a4e0ea3bb8683fc4aa2d462bd1c1f6343"><div class="ttname"><a href="../../d3/d9c/structast__ari__channels__move__args.html#a4e0ea3bb8683fc4aa2d462bd1c1f6343">ast_ari_channels_move_args::app_args</a></div><div class="ttdeci">const char * app_args</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00275">resource_channels.h:275</a></div></div>
<div class="ttc" id="structast__ari__channels__move__args_html_a83a793edb3d6a3a15f2a7fc99ffe8c90"><div class="ttname"><a href="../../d3/d9c/structast__ari__channels__move__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">ast_ari_channels_move_args::app</a></div><div class="ttdeci">const char * app</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00273">resource_channels.h:273</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__ari__channels__move__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d3/d9c/structast__ari__channels__move__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_move_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00271">resource_channels.h:271</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a5df0352d477bb7ff14767cf9d4cd301f"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a5df0352d477bb7ff14767cf9d4cd301f">stasis_app_control_move</a></div><div class="ttdeci">int stasis_app_control_move(struct stasis_app_control *control, const char *app_name, const char *app_args)</div><div class="ttdoc">Exit res_stasis and move to another Stasis application. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00451">control.c:451</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2035a897d37e8521128413c016af1f52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2035a897d37e8521128413c016af1f52">&#9670;&nbsp;</a></span>ast_ari_channels_mute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_mute </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/d52/structast__ari__channels__mute__args.html">ast_ari_channels_mute_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mute a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00403">403</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04937">AST_MUTE_DIRECTION_READ</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04938">AST_MUTE_DIRECTION_WRITE</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00398">ast_ari_channels_mute_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">channel_state_invalid()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00400">ast_ari_channels_mute_args::direction</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00631">stasis_app_control_mute()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l01271">ast_ari_channels_mute_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;{</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> = 0;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">ast_frame_type</a> frametype = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../d6/d52/structast__ari__channels__mute__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a>(control, response)) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   }</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d6/d52/structast__ari__channels__mute__args.html#ae495ce4d65a6f5391715f97994829da1">direction</a>)) {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;         <span class="stringliteral">&quot;Direction is required&quot;</span>);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <span class="keywordflow">if</span> (!strcmp(args-&gt;<a class="code" href="../../d6/d52/structast__ari__channels__mute__args.html#ae495ce4d65a6f5391715f97994829da1">direction</a>, <span class="stringliteral">&quot;in&quot;</span>)) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      direction = <a class="code" href="../../d5/d7b/channel_8h.html#a74da52aac47a277801349e8577978a83">AST_MUTE_DIRECTION_READ</a>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(args-&gt;<a class="code" href="../../d6/d52/structast__ari__channels__mute__args.html#ae495ce4d65a6f5391715f97994829da1">direction</a>, <span class="stringliteral">&quot;out&quot;</span>)) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      direction = <a class="code" href="../../d5/d7b/channel_8h.html#ace039a8191c129d7e16589790868210e">AST_MUTE_DIRECTION_WRITE</a>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(args-&gt;<a class="code" href="../../d6/d52/structast__ari__channels__mute__args.html#ae495ce4d65a6f5391715f97994829da1">direction</a>, <span class="stringliteral">&quot;both&quot;</span>)) {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      direction = <a class="code" href="../../d5/d7b/channel_8h.html#a74da52aac47a277801349e8577978a83">AST_MUTE_DIRECTION_READ</a> | <a class="code" href="../../d5/d7b/channel_8h.html#ace039a8191c129d7e16589790868210e">AST_MUTE_DIRECTION_WRITE</a>;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;         <span class="stringliteral">&quot;Invalid direction specified&quot;</span>);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   }</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#a66191b73a286eb254c6d8ce1ad0f6483">stasis_app_control_mute</a>(control, direction, frametype);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div><div class="ttc" id="structast__ari__channels__mute__args_html_ae495ce4d65a6f5391715f97994829da1"><div class="ttname"><a href="../../d6/d52/structast__ari__channels__mute__args.html#ae495ce4d65a6f5391715f97994829da1">ast_ari_channels_mute_args::direction</a></div><div class="ttdeci">const char * direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00400">resource_channels.h:400</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a66191b73a286eb254c6d8ce1ad0f6483"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a66191b73a286eb254c6d8ce1ad0f6483">stasis_app_control_mute</a></div><div class="ttdeci">int stasis_app_control_mute(struct stasis_app_control *control, unsigned int direction, enum ast_frame_type frametype)</div><div class="ttdoc">Mute the channel associated with this control. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00631">control.c:631</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="channel_8h_html_ace039a8191c129d7e16589790868210e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ace039a8191c129d7e16589790868210e">AST_MUTE_DIRECTION_WRITE</a></div><div class="ttdeci">#define AST_MUTE_DIRECTION_WRITE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04938">channel.h:4938</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_a74da52aac47a277801349e8577978a83"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a74da52aac47a277801349e8577978a83">AST_MUTE_DIRECTION_READ</a></div><div class="ttdeci">#define AST_MUTE_DIRECTION_READ</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04937">channel.h:4937</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">ast_frame_type</a></div><div class="ttdeci">ast_frame_type</div><div class="ttdoc">Frame types. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00097">include/asterisk/frame.h:97</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a4a584f5ec1d637b285149ea0e2adda14"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a></div><div class="ttdeci">static int channel_state_invalid(struct stasis_app_control *control, struct ast_ari_response *response)</div><div class="ttdoc">Ensure channel is in a state that allows operation to be performed. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00108">resource_channels.c:108</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="structast__ari__channels__mute__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d6/d52/structast__ari__channels__mute__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_mute_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00398">resource_channels.h:398</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="func__frame__drop_8c_html_a99f26e6ee9fcd62f75203b5402df8098"><div class="ttname"><a href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8b/func__frame__drop_8c_source.html#l00137">func_frame_drop.c:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aadacf2de49d7e9ae8233cf8be2c872c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadacf2de49d7e9ae8233cf8be2c872c0">&#9670;&nbsp;</a></span>ast_ari_channels_originate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_originate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db9/structast__ari__channels__originate__args.html">ast_ari_channels_originate_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new channel (originate). </p>
<p>The new channel is created immediately and a snapshot of it returned. If a Stasis application is provided it will be automatically subscribed to the originated channel for further events and updates.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01433">1433</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00066">ast_ari_channels_originate_args::app</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00068">ast_ari_channels_originate_args::app_args</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01063">ari_channels_handle_originate_with_id()</a>, <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l00107">ast_ari_channels_originate_parse_body()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02992">ast_channel_cleanup</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00397">ast_json_object_get()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00070">ast_ari_channels_originate_args::caller_id</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00076">ast_ari_channels_originate_args::channel_id</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00060">ast_ari_channels_originate_args::context</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00056">ast_ari_channels_originate_args::endpoint</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00058">ast_ari_channels_originate_args::extension</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00082">ast_ari_channels_originate_args::formats</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01373">json_to_ast_variables()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00064">ast_ari_channels_originate_args::label</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00080">ast_ari_channels_originate_args::originator</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00078">ast_ari_channels_originate_args::other_channel_id</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00062">ast_ari_channels_originate_args::priority</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00072">ast_ari_channels_originate_args::timeout</a>, and <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00074">ast_ari_channels_originate_args::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l00175">ast_ari_channels_originate_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;{</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *variables = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;   <span class="comment">/* Parse any query parameters out of the body parameter */</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;   <span class="keywordflow">if</span> (args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#a74535fe04c54601eaf3275d87bff092d">variables</a>) {</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_variables;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      <a class="code" href="../../d0/d12/resource__channels_8h.html#af3a255ab71afe91aba894d47f7b8a01a">ast_ari_channels_originate_parse_body</a>(args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#a74535fe04c54601eaf3275d87bff092d">variables</a>, args);</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;      json_variables = <a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#a74535fe04c54601eaf3275d87bff092d">variables</a>, <span class="stringliteral">&quot;variables&quot;</span>);</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      <span class="keywordflow">if</span> (json_variables</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;         &amp;&amp; <a class="code" href="../../da/d49/resource__channels_8c.html#a61d455b941bd7ebf96bcbf5532fefe07">json_to_ast_variables</a>(response, json_variables, &amp;variables)) {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;   }</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;   chan = <a class="code" href="../../da/d49/resource__channels_8c.html#adabbeff7b065e96d9fcbda18e9b767d6">ari_channels_handle_originate_with_id</a>(</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#acf94d2c982235a175c6699a54ecfd121">endpoint</a>,</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;      args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#a3a21b674a056eab8a11436300ae02d00">extension</a>,</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#a94f090d1fb5c71712726fcdf025b9ace">context</a>,</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#aad670431504a2c228eaa1eaac6bc5f5b">priority</a>,</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;      args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#ab5fbdb5052858ca8d2538566229fbe64">label</a>,</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">app</a>,</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#a4e0ea3bb8683fc4aa2d462bd1c1f6343">app_args</a>,</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#a67ab06a8fcf6296a45e55add76dce43c">caller_id</a>,</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>,</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      variables,</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;      args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>,</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#a7170b18fbb9119abc3e1eee92a4f38d2">other_channel_id</a>,</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;      args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#a57da6faa586b1378963cbf17cc3e28a5">originator</a>,</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      args-&gt;<a class="code" href="../../d3/db9/structast__ari__channels__originate__args.html#a588c49399c260ee2575c2df33ede22f3">formats</a>,</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      response);</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>(chan);</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(variables);</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__args_html_a74535fe04c54601eaf3275d87bff092d"><div class="ttname"><a href="../../d3/db9/structast__ari__channels__originate__args.html#a74535fe04c54601eaf3275d87bff092d">ast_ari_channels_originate_args::variables</a></div><div class="ttdeci">struct ast_json * variables</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00074">resource_channels.h:74</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__args_html_a4e0ea3bb8683fc4aa2d462bd1c1f6343"><div class="ttname"><a href="../../d3/db9/structast__ari__channels__originate__args.html#a4e0ea3bb8683fc4aa2d462bd1c1f6343">ast_ari_channels_originate_args::app_args</a></div><div class="ttdeci">const char * app_args</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00068">resource_channels.h:68</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__args_html_aad670431504a2c228eaa1eaac6bc5f5b"><div class="ttname"><a href="../../d3/db9/structast__ari__channels__originate__args.html#aad670431504a2c228eaa1eaac6bc5f5b">ast_ari_channels_originate_args::priority</a></div><div class="ttdeci">long priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00062">resource_channels.h:62</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__args_html_a67ab06a8fcf6296a45e55add76dce43c"><div class="ttname"><a href="../../d3/db9/structast__ari__channels__originate__args.html#a67ab06a8fcf6296a45e55add76dce43c">ast_ari_channels_originate_args::caller_id</a></div><div class="ttdeci">const char * caller_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00070">resource_channels.h:70</a></div></div>
<div class="ttc" id="resource__channels_8c_html_adabbeff7b065e96d9fcbda18e9b767d6"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#adabbeff7b065e96d9fcbda18e9b767d6">ari_channels_handle_originate_with_id</a></div><div class="ttdeci">static struct ast_channel * ari_channels_handle_originate_with_id(const char *args_endpoint, const char *args_extension, const char *args_context, long args_priority, const char *args_label, const char *args_app, const char *args_app_args, const char *args_caller_id, int args_timeout, struct ast_variable *variables, const char *args_channel_id, const char *args_other_channel_id, const char *args_originator, const char *args_formats, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01063">resource_channels.c:1063</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__args_html_a7170b18fbb9119abc3e1eee92a4f38d2"><div class="ttname"><a href="../../d3/db9/structast__ari__channels__originate__args.html#a7170b18fbb9119abc3e1eee92a4f38d2">ast_ari_channels_originate_args::other_channel_id</a></div><div class="ttdeci">const char * other_channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00078">resource_channels.h:78</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a61d455b941bd7ebf96bcbf5532fefe07"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a61d455b941bd7ebf96bcbf5532fefe07">json_to_ast_variables</a></div><div class="ttdeci">static int json_to_ast_variables(struct ast_ari_response *response, struct ast_json *json_variables, struct ast_variable **variables)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01373">resource_channels.c:1373</a></div></div>
<div class="ttc" id="resource__channels_8h_html_af3a255ab71afe91aba894d47f7b8a01a"><div class="ttname"><a href="../../d0/d12/resource__channels_8h.html#af3a255ab71afe91aba894d47f7b8a01a">ast_ari_channels_originate_parse_body</a></div><div class="ttdeci">int ast_ari_channels_originate_parse_body(struct ast_json *body, struct ast_ari_channels_originate_args *args)</div><div class="ttdoc">Body parsing function for /channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/daa/res__ari__channels_8c_source.html#l00107">res_ari_channels.c:107</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__args_html_ab5fbdb5052858ca8d2538566229fbe64"><div class="ttname"><a href="../../d3/db9/structast__ari__channels__originate__args.html#ab5fbdb5052858ca8d2538566229fbe64">ast_ari_channels_originate_args::label</a></div><div class="ttdeci">const char * label</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00064">resource_channels.h:64</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__args_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d3/db9/structast__ari__channels__originate__args.html#a493b57f443cc38b3d3df9c1e584d9d82">ast_ari_channels_originate_args::timeout</a></div><div class="ttdeci">int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00072">resource_channels.h:72</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__args_html_a588c49399c260ee2575c2df33ede22f3"><div class="ttname"><a href="../../d3/db9/structast__ari__channels__originate__args.html#a588c49399c260ee2575c2df33ede22f3">ast_ari_channels_originate_args::formats</a></div><div class="ttdeci">const char * formats</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00082">resource_channels.h:82</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__args_html_a57da6faa586b1378963cbf17cc3e28a5"><div class="ttname"><a href="../../d3/db9/structast__ari__channels__originate__args.html#a57da6faa586b1378963cbf17cc3e28a5">ast_ari_channels_originate_args::originator</a></div><div class="ttdeci">const char * originator</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00080">resource_channels.h:80</a></div></div>
<div class="ttc" id="json_8h_html_a53707225c3bf831e263245c6e3800676"><div class="ttname"><a href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a></div><div class="ttdeci">struct ast_json * ast_json_object_get(struct ast_json *object, const char *key)</div><div class="ttdoc">Get a field from a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00397">json.c:397</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__args_html_acf94d2c982235a175c6699a54ecfd121"><div class="ttname"><a href="../../d3/db9/structast__ari__channels__originate__args.html#acf94d2c982235a175c6699a54ecfd121">ast_ari_channels_originate_args::endpoint</a></div><div class="ttdeci">const char * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00056">resource_channels.h:56</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__args_html_a94f090d1fb5c71712726fcdf025b9ace"><div class="ttname"><a href="../../d3/db9/structast__ari__channels__originate__args.html#a94f090d1fb5c71712726fcdf025b9ace">ast_ari_channels_originate_args::context</a></div><div class="ttdeci">const char * context</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00060">resource_channels.h:60</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structast__ari__channels__originate__args_html_a3a21b674a056eab8a11436300ae02d00"><div class="ttname"><a href="../../d3/db9/structast__ari__channels__originate__args.html#a3a21b674a056eab8a11436300ae02d00">ast_ari_channels_originate_args::extension</a></div><div class="ttdeci">const char * extension</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00058">resource_channels.h:58</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__args_html_a83a793edb3d6a3a15f2a7fc99ffe8c90"><div class="ttname"><a href="../../d3/db9/structast__ari__channels__originate__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">ast_ari_channels_originate_args::app</a></div><div class="ttdeci">const char * app</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00066">resource_channels.h:66</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d3/db9/structast__ari__channels__originate__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_originate_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00076">resource_channels.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afcf5a51ee745cc08ee8c98e2b7785e73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcf5a51ee745cc08ee8c98e2b7785e73">&#9670;&nbsp;</a></span>ast_ari_channels_originate_with_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_originate_with_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/daf/structast__ari__channels__originate__with__id__args.html">ast_ari_channels_originate_with_id_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new channel (originate with id). </p>
<p>The new channel is created immediately and a snapshot of it returned. If a Stasis application is provided it will be automatically subscribed to the originated channel for further events and updates.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01394">1394</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00171">ast_ari_channels_originate_with_id_args::app</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00173">ast_ari_channels_originate_with_id_args::app_args</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01063">ari_channels_handle_originate_with_id()</a>, <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l00436">ast_ari_channels_originate_with_id_parse_body()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02992">ast_channel_cleanup</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00397">ast_json_object_get()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00175">ast_ari_channels_originate_with_id_args::caller_id</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00159">ast_ari_channels_originate_with_id_args::channel_id</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00165">ast_ari_channels_originate_with_id_args::context</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00161">ast_ari_channels_originate_with_id_args::endpoint</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00163">ast_ari_channels_originate_with_id_args::extension</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00185">ast_ari_channels_originate_with_id_args::formats</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01373">json_to_ast_variables()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00169">ast_ari_channels_originate_with_id_args::label</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00183">ast_ari_channels_originate_with_id_args::originator</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00181">ast_ari_channels_originate_with_id_args::other_channel_id</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00167">ast_ari_channels_originate_with_id_args::priority</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00177">ast_ari_channels_originate_with_id_args::timeout</a>, and <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00179">ast_ari_channels_originate_with_id_args::variables</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l00500">ast_ari_channels_originate_with_id_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;{</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *variables = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;   <span class="comment">/* Parse any query parameters out of the body parameter */</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;   <span class="keywordflow">if</span> (args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a74535fe04c54601eaf3275d87bff092d">variables</a>) {</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_variables;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      <a class="code" href="../../d0/d12/resource__channels_8h.html#a8296f07e89dc8be477c45b892e86f7ee">ast_ari_channels_originate_with_id_parse_body</a>(args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a74535fe04c54601eaf3275d87bff092d">variables</a>, args);</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;      json_variables = <a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a74535fe04c54601eaf3275d87bff092d">variables</a>, <span class="stringliteral">&quot;variables&quot;</span>);</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      <span class="keywordflow">if</span> (json_variables</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;         &amp;&amp; <a class="code" href="../../da/d49/resource__channels_8c.html#a61d455b941bd7ebf96bcbf5532fefe07">json_to_ast_variables</a>(response, json_variables, &amp;variables)) {</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      }</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;   }</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   chan = <a class="code" href="../../da/d49/resource__channels_8c.html#adabbeff7b065e96d9fcbda18e9b767d6">ari_channels_handle_originate_with_id</a>(</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#acf94d2c982235a175c6699a54ecfd121">endpoint</a>,</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a3a21b674a056eab8a11436300ae02d00">extension</a>,</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a94f090d1fb5c71712726fcdf025b9ace">context</a>,</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#aad670431504a2c228eaa1eaac6bc5f5b">priority</a>,</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;      args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#ab5fbdb5052858ca8d2538566229fbe64">label</a>,</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">app</a>,</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a4e0ea3bb8683fc4aa2d462bd1c1f6343">app_args</a>,</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a67ab06a8fcf6296a45e55add76dce43c">caller_id</a>,</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>,</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      variables,</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>,</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a7170b18fbb9119abc3e1eee92a4f38d2">other_channel_id</a>,</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a57da6faa586b1378963cbf17cc3e28a5">originator</a>,</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      args-&gt;<a class="code" href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a588c49399c260ee2575c2df33ede22f3">formats</a>,</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      response);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>(chan);</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(variables);</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;}</div><div class="ttc" id="structast__ari__channels__originate__with__id__args_html_aad670431504a2c228eaa1eaac6bc5f5b"><div class="ttname"><a href="../../df/daf/structast__ari__channels__originate__with__id__args.html#aad670431504a2c228eaa1eaac6bc5f5b">ast_ari_channels_originate_with_id_args::priority</a></div><div class="ttdeci">long priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00167">resource_channels.h:167</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__with__id__args_html_a57da6faa586b1378963cbf17cc3e28a5"><div class="ttname"><a href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a57da6faa586b1378963cbf17cc3e28a5">ast_ari_channels_originate_with_id_args::originator</a></div><div class="ttdeci">const char * originator</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00183">resource_channels.h:183</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__with__id__args_html_acf94d2c982235a175c6699a54ecfd121"><div class="ttname"><a href="../../df/daf/structast__ari__channels__originate__with__id__args.html#acf94d2c982235a175c6699a54ecfd121">ast_ari_channels_originate_with_id_args::endpoint</a></div><div class="ttdeci">const char * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00161">resource_channels.h:161</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__with__id__args_html_a94f090d1fb5c71712726fcdf025b9ace"><div class="ttname"><a href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a94f090d1fb5c71712726fcdf025b9ace">ast_ari_channels_originate_with_id_args::context</a></div><div class="ttdeci">const char * context</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00165">resource_channels.h:165</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__with__id__args_html_a67ab06a8fcf6296a45e55add76dce43c"><div class="ttname"><a href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a67ab06a8fcf6296a45e55add76dce43c">ast_ari_channels_originate_with_id_args::caller_id</a></div><div class="ttdeci">const char * caller_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00175">resource_channels.h:175</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__with__id__args_html_a4e0ea3bb8683fc4aa2d462bd1c1f6343"><div class="ttname"><a href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a4e0ea3bb8683fc4aa2d462bd1c1f6343">ast_ari_channels_originate_with_id_args::app_args</a></div><div class="ttdeci">const char * app_args</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00173">resource_channels.h:173</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__with__id__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_originate_with_id_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00159">resource_channels.h:159</a></div></div>
<div class="ttc" id="resource__channels_8c_html_adabbeff7b065e96d9fcbda18e9b767d6"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#adabbeff7b065e96d9fcbda18e9b767d6">ari_channels_handle_originate_with_id</a></div><div class="ttdeci">static struct ast_channel * ari_channels_handle_originate_with_id(const char *args_endpoint, const char *args_extension, const char *args_context, long args_priority, const char *args_label, const char *args_app, const char *args_app_args, const char *args_caller_id, int args_timeout, struct ast_variable *variables, const char *args_channel_id, const char *args_other_channel_id, const char *args_originator, const char *args_formats, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01063">resource_channels.c:1063</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__with__id__args_html_a83a793edb3d6a3a15f2a7fc99ffe8c90"><div class="ttname"><a href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">ast_ari_channels_originate_with_id_args::app</a></div><div class="ttdeci">const char * app</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00171">resource_channels.h:171</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a61d455b941bd7ebf96bcbf5532fefe07"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a61d455b941bd7ebf96bcbf5532fefe07">json_to_ast_variables</a></div><div class="ttdeci">static int json_to_ast_variables(struct ast_ari_response *response, struct ast_json *json_variables, struct ast_variable **variables)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01373">resource_channels.c:1373</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__with__id__args_html_a7170b18fbb9119abc3e1eee92a4f38d2"><div class="ttname"><a href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a7170b18fbb9119abc3e1eee92a4f38d2">ast_ari_channels_originate_with_id_args::other_channel_id</a></div><div class="ttdeci">const char * other_channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00181">resource_channels.h:181</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__with__id__args_html_ab5fbdb5052858ca8d2538566229fbe64"><div class="ttname"><a href="../../df/daf/structast__ari__channels__originate__with__id__args.html#ab5fbdb5052858ca8d2538566229fbe64">ast_ari_channels_originate_with_id_args::label</a></div><div class="ttdeci">const char * label</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00169">resource_channels.h:169</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="resource__channels_8h_html_a8296f07e89dc8be477c45b892e86f7ee"><div class="ttname"><a href="../../d0/d12/resource__channels_8h.html#a8296f07e89dc8be477c45b892e86f7ee">ast_ari_channels_originate_with_id_parse_body</a></div><div class="ttdeci">int ast_ari_channels_originate_with_id_parse_body(struct ast_json *body, struct ast_ari_channels_originate_with_id_args *args)</div><div class="ttdoc">Body parsing function for /channels/{channelId}. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/daa/res__ari__channels_8c_source.html#l00436">res_ari_channels.c:436</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__with__id__args_html_a74535fe04c54601eaf3275d87bff092d"><div class="ttname"><a href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a74535fe04c54601eaf3275d87bff092d">ast_ari_channels_originate_with_id_args::variables</a></div><div class="ttdeci">struct ast_json * variables</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00179">resource_channels.h:179</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__with__id__args_html_a588c49399c260ee2575c2df33ede22f3"><div class="ttname"><a href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a588c49399c260ee2575c2df33ede22f3">ast_ari_channels_originate_with_id_args::formats</a></div><div class="ttdeci">const char * formats</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00185">resource_channels.h:185</a></div></div>
<div class="ttc" id="json_8h_html_a53707225c3bf831e263245c6e3800676"><div class="ttname"><a href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a></div><div class="ttdeci">struct ast_json * ast_json_object_get(struct ast_json *object, const char *key)</div><div class="ttdoc">Get a field from a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00397">json.c:397</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structast__ari__channels__originate__with__id__args_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a493b57f443cc38b3d3df9c1e584d9d82">ast_ari_channels_originate_with_id_args::timeout</a></div><div class="ttdeci">int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00177">resource_channels.h:177</a></div></div>
<div class="ttc" id="structast__ari__channels__originate__with__id__args_html_a3a21b674a056eab8a11436300ae02d00"><div class="ttname"><a href="../../df/daf/structast__ari__channels__originate__with__id__args.html#a3a21b674a056eab8a11436300ae02d00">ast_ari_channels_originate_with_id_args::extension</a></div><div class="ttdeci">const char * extension</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00163">resource_channels.h:163</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7b9be2fa18cd942fc8c5a2e1e39b58be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b9be2fa18cd942fc8c5a2e1e39b58be">&#9670;&nbsp;</a></span>ast_ari_channels_play()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_play </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d51/structast__ari__channels__play__args.html">ast_ari_channels_play_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start playback of media. </p>
<p>The media URI may be any of a number of URI's. Currently sound:, recording:, number:, digits:, characters:, and tone: URI's are supported. This operation creates a playback resource that can be used to control the playback of media (pause, rewind, fast forward, etc.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00718">718</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00636">ari_channels_handle_play()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00545">ast_ari_channels_play_args::channel_id</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00553">ast_ari_channels_play_args::lang</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00547">ast_ari_channels_play_args::media</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00549">ast_ari_channels_play_args::media_count</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00555">ast_ari_channels_play_args::offsetms</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00559">ast_ari_channels_play_args::playback_id</a>, and <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00557">ast_ari_channels_play_args::skipms</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l01861">ast_ari_channels_play_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;{</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <a class="code" href="../../da/d49/resource__channels_8c.html#a8cdd339bf3a0e57ea054c9ec104ab3f1">ari_channels_handle_play</a>(</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      args-&gt;<a class="code" href="../../da/d51/structast__ari__channels__play__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>,</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      args-&gt;<a class="code" href="../../da/d51/structast__ari__channels__play__args.html#a401808a2973fe8335a4c395f98c71b86">media</a>,</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      args-&gt;<a class="code" href="../../da/d51/structast__ari__channels__play__args.html#acbf535d1fb30faf073f1f78ef2e2ab09">media_count</a>,</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      args-&gt;<a class="code" href="../../da/d51/structast__ari__channels__play__args.html#a7d86234830aaf21f69a934efbd929242">lang</a>,</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      args-&gt;<a class="code" href="../../da/d51/structast__ari__channels__play__args.html#af80292482ac9cfe528fe0698bf9e2eb2">offsetms</a>,</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      args-&gt;<a class="code" href="../../da/d51/structast__ari__channels__play__args.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>,</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      args-&gt;<a class="code" href="../../da/d51/structast__ari__channels__play__args.html#ad9fac90fec3e638398eab17e35ba966d">playback_id</a>,</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      response);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;}</div><div class="ttc" id="structast__ari__channels__play__args_html_acbf535d1fb30faf073f1f78ef2e2ab09"><div class="ttname"><a href="../../da/d51/structast__ari__channels__play__args.html#acbf535d1fb30faf073f1f78ef2e2ab09">ast_ari_channels_play_args::media_count</a></div><div class="ttdeci">size_t media_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00549">resource_channels.h:549</a></div></div>
<div class="ttc" id="structast__ari__channels__play__args_html_a401808a2973fe8335a4c395f98c71b86"><div class="ttname"><a href="../../da/d51/structast__ari__channels__play__args.html#a401808a2973fe8335a4c395f98c71b86">ast_ari_channels_play_args::media</a></div><div class="ttdeci">const char ** media</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00547">resource_channels.h:547</a></div></div>
<div class="ttc" id="structast__ari__channels__play__args_html_a7d86234830aaf21f69a934efbd929242"><div class="ttname"><a href="../../da/d51/structast__ari__channels__play__args.html#a7d86234830aaf21f69a934efbd929242">ast_ari_channels_play_args::lang</a></div><div class="ttdeci">const char * lang</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00553">resource_channels.h:553</a></div></div>
<div class="ttc" id="structast__ari__channels__play__args_html_af80292482ac9cfe528fe0698bf9e2eb2"><div class="ttname"><a href="../../da/d51/structast__ari__channels__play__args.html#af80292482ac9cfe528fe0698bf9e2eb2">ast_ari_channels_play_args::offsetms</a></div><div class="ttdeci">int offsetms</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00555">resource_channels.h:555</a></div></div>
<div class="ttc" id="structast__ari__channels__play__args_html_a1df943a05a384a407a19cf8831b2d237"><div class="ttname"><a href="../../da/d51/structast__ari__channels__play__args.html#a1df943a05a384a407a19cf8831b2d237">ast_ari_channels_play_args::skipms</a></div><div class="ttdeci">int skipms</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00557">resource_channels.h:557</a></div></div>
<div class="ttc" id="structast__ari__channels__play__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../da/d51/structast__ari__channels__play__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_play_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00545">resource_channels.h:545</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a8cdd339bf3a0e57ea054c9ec104ab3f1"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a8cdd339bf3a0e57ea054c9ec104ab3f1">ari_channels_handle_play</a></div><div class="ttdeci">static void ari_channels_handle_play(const char *args_channel_id, const char **args_media, size_t args_media_count, const char *args_lang, int args_offsetms, int args_skipms, const char *args_playback_id, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00636">resource_channels.c:636</a></div></div>
<div class="ttc" id="structast__ari__channels__play__args_html_ad9fac90fec3e638398eab17e35ba966d"><div class="ttname"><a href="../../da/d51/structast__ari__channels__play__args.html#ad9fac90fec3e638398eab17e35ba966d">ast_ari_channels_play_args::playback_id</a></div><div class="ttdeci">const char * playback_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00559">resource_channels.h:559</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae34afc3a59bf4e44f369dcb3358f7217"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae34afc3a59bf4e44f369dcb3358f7217">&#9670;&nbsp;</a></span>ast_ari_channels_play_with_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_play_with_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d8a/structast__ari__channels__play__with__id__args.html">ast_ari_channels_play_with_id_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start playback of media and specify the playbackId. </p>
<p>The media URI may be any of a number of URI's. Currently sound:, recording:, number:, digits:, characters:, and tone: URI's are supported. This operation creates a playback resource that can be used to control the playback of media (pause, rewind, fast forward, etc.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00733">733</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00636">ari_channels_handle_play()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00585">ast_ari_channels_play_with_id_args::channel_id</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00595">ast_ari_channels_play_with_id_args::lang</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00589">ast_ari_channels_play_with_id_args::media</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00591">ast_ari_channels_play_with_id_args::media_count</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00597">ast_ari_channels_play_with_id_args::offsetms</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00587">ast_ari_channels_play_with_id_args::playback_id</a>, and <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00599">ast_ari_channels_play_with_id_args::skipms</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l02035">ast_ari_channels_play_with_id_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;{</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <a class="code" href="../../da/d49/resource__channels_8c.html#a8cdd339bf3a0e57ea054c9ec104ab3f1">ari_channels_handle_play</a>(</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      args-&gt;<a class="code" href="../../da/d8a/structast__ari__channels__play__with__id__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>,</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      args-&gt;<a class="code" href="../../da/d8a/structast__ari__channels__play__with__id__args.html#a401808a2973fe8335a4c395f98c71b86">media</a>,</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      args-&gt;<a class="code" href="../../da/d8a/structast__ari__channels__play__with__id__args.html#acbf535d1fb30faf073f1f78ef2e2ab09">media_count</a>,</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      args-&gt;<a class="code" href="../../da/d8a/structast__ari__channels__play__with__id__args.html#a7d86234830aaf21f69a934efbd929242">lang</a>,</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      args-&gt;<a class="code" href="../../da/d8a/structast__ari__channels__play__with__id__args.html#af80292482ac9cfe528fe0698bf9e2eb2">offsetms</a>,</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      args-&gt;<a class="code" href="../../da/d8a/structast__ari__channels__play__with__id__args.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>,</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      args-&gt;<a class="code" href="../../da/d8a/structast__ari__channels__play__with__id__args.html#ad9fac90fec3e638398eab17e35ba966d">playback_id</a>,</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      response);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;}</div><div class="ttc" id="structast__ari__channels__play__with__id__args_html_a1df943a05a384a407a19cf8831b2d237"><div class="ttname"><a href="../../da/d8a/structast__ari__channels__play__with__id__args.html#a1df943a05a384a407a19cf8831b2d237">ast_ari_channels_play_with_id_args::skipms</a></div><div class="ttdeci">int skipms</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00599">resource_channels.h:599</a></div></div>
<div class="ttc" id="structast__ari__channels__play__with__id__args_html_acbf535d1fb30faf073f1f78ef2e2ab09"><div class="ttname"><a href="../../da/d8a/structast__ari__channels__play__with__id__args.html#acbf535d1fb30faf073f1f78ef2e2ab09">ast_ari_channels_play_with_id_args::media_count</a></div><div class="ttdeci">size_t media_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00591">resource_channels.h:591</a></div></div>
<div class="ttc" id="structast__ari__channels__play__with__id__args_html_a401808a2973fe8335a4c395f98c71b86"><div class="ttname"><a href="../../da/d8a/structast__ari__channels__play__with__id__args.html#a401808a2973fe8335a4c395f98c71b86">ast_ari_channels_play_with_id_args::media</a></div><div class="ttdeci">const char ** media</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00589">resource_channels.h:589</a></div></div>
<div class="ttc" id="structast__ari__channels__play__with__id__args_html_a7d86234830aaf21f69a934efbd929242"><div class="ttname"><a href="../../da/d8a/structast__ari__channels__play__with__id__args.html#a7d86234830aaf21f69a934efbd929242">ast_ari_channels_play_with_id_args::lang</a></div><div class="ttdeci">const char * lang</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00595">resource_channels.h:595</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a8cdd339bf3a0e57ea054c9ec104ab3f1"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a8cdd339bf3a0e57ea054c9ec104ab3f1">ari_channels_handle_play</a></div><div class="ttdeci">static void ari_channels_handle_play(const char *args_channel_id, const char **args_media, size_t args_media_count, const char *args_lang, int args_offsetms, int args_skipms, const char *args_playback_id, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00636">resource_channels.c:636</a></div></div>
<div class="ttc" id="structast__ari__channels__play__with__id__args_html_af80292482ac9cfe528fe0698bf9e2eb2"><div class="ttname"><a href="../../da/d8a/structast__ari__channels__play__with__id__args.html#af80292482ac9cfe528fe0698bf9e2eb2">ast_ari_channels_play_with_id_args::offsetms</a></div><div class="ttdeci">int offsetms</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00597">resource_channels.h:597</a></div></div>
<div class="ttc" id="structast__ari__channels__play__with__id__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../da/d8a/structast__ari__channels__play__with__id__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_play_with_id_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00585">resource_channels.h:585</a></div></div>
<div class="ttc" id="structast__ari__channels__play__with__id__args_html_ad9fac90fec3e638398eab17e35ba966d"><div class="ttname"><a href="../../da/d8a/structast__ari__channels__play__with__id__args.html#ad9fac90fec3e638398eab17e35ba966d">ast_ari_channels_play_with_id_args::playback_id</a></div><div class="ttdeci">const char * playback_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00587">resource_channels.h:587</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abde7fe420c8dbbe7c60d156f3b986e35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abde7fe420c8dbbe7c60d156f3b986e35">&#9670;&nbsp;</a></span>ast_ari_channels_record()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_record </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d9a/structast__ari__channels__record__args.html">ast_ari_channels_record_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a recording. </p>
<p>Record audio from a channel. Note that this will not capture audio sent to the channel. The bridge itself has a record feature if that's what you want.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00748">748</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00305">ast_ari_response_created()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00269">ast_asprintf</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01938">ast_get_format_for_file_ext()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01074">AST_RECORD_IF_EXISTS_ERROR</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00550">ast_string_field_build</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00577">ast_uri_encode()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00573">ast_uri_http</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00637">ast_ari_channels_record_args::beep</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00625">ast_ari_channels_record_args::channel_id</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00629">ast_ari_channels_record_args::format</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00635">ast_ari_channels_record_args::if_exists</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00631">ast_ari_channels_record_args::max_duration_seconds</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00633">ast_ari_channels_record_args::max_silence_seconds</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00627">ast_ari_channels_record_args::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">options</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d8/d4c/res__stasis__recording_8c_source.html#l00370">stasis_app_control_record()</a>, <a class="el" href="../../d8/d4c/res__stasis__recording_8c_source.html#l00194">stasis_app_recording_if_exists_parse()</a>, <a class="el" href="../../d8/d4c/res__stasis__recording_8c_source.html#l00151">stasis_app_recording_options_create()</a>, <a class="el" href="../../d2/dda/stasis__app__recording_8h_source.html#l00172">STASIS_APP_RECORDING_TERMINATE_INVALID</a>, <a class="el" href="../../d8/d4c/res__stasis__recording_8c_source.html#l00169">stasis_app_recording_termination_parse()</a>, <a class="el" href="../../d8/d4c/res__stasis__recording_8c_source.html#l00478">stasis_app_recording_to_json()</a>, and <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00639">ast_ari_channels_record_args::terminate_on</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l02196">ast_ari_channels_record_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;{</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/d5e/structstasis__app__recording.html">stasis_app_recording</a> *, recording, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, recording_url, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/dba/structstasis__app__recording__options.html">stasis_app_recording_options</a> *, <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, uri_encoded_name, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   <span class="keywordtype">size_t</span> uri_name_maxlen;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(response != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <span class="keywordflow">if</span> (args-&gt;<a class="code" href="../../db/d9a/structast__ari__channels__record__args.html#a2905291106ca33c80e595233525899e0">max_duration_seconds</a> &lt; 0) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;         <span class="stringliteral">&quot;max_duration_seconds cannot be negative&quot;</span>);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <span class="keywordflow">if</span> (args-&gt;<a class="code" href="../../db/d9a/structast__ari__channels__record__args.html#aa0c1e600b53dd4f48dd371964f8a7361">max_silence_seconds</a> &lt; 0) {</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;         <span class="stringliteral">&quot;max_silence_seconds cannot be negative&quot;</span>);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   }</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../db/d9a/structast__ari__channels__record__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      <span class="comment">/* Response filled in by find_control */</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   }</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = <a class="code" href="../../d2/dda/stasis__app__recording_8h.html#a7e584de6354b58e0ab9f75796715aca2">stasis_app_recording_options_create</a>(args-&gt;<a class="code" href="../../db/d9a/structast__ari__channels__record__args.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, args-&gt;<a class="code" href="../../db/d9a/structast__ari__channels__record__args.html#a6bd2bb5fcc7628a640958994a22f997c">format</a>);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;         <span class="stringliteral">&quot;Out of memory&quot;</span>);</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   }</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a>(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>, target, <span class="stringliteral">&quot;channel:%s&quot;</span>, args-&gt;<a class="code" href="../../db/d9a/structast__ari__channels__record__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;max_silence_seconds = args-&gt;<a class="code" href="../../db/d9a/structast__ari__channels__record__args.html#aa0c1e600b53dd4f48dd371964f8a7361">max_silence_seconds</a>;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;max_duration_seconds = args-&gt;<a class="code" href="../../db/d9a/structast__ari__channels__record__args.html#a2905291106ca33c80e595233525899e0">max_duration_seconds</a>;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;terminate_on =</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <a class="code" href="../../d2/dda/stasis__app__recording_8h.html#ab65b6686f17aa43e154b56bc8be1ff38">stasis_app_recording_termination_parse</a>(args-&gt;<a class="code" href="../../db/d9a/structast__ari__channels__record__args.html#aa3e310c39f669355ace9a3c9d935a0ad">terminate_on</a>);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;if_exists =</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      <a class="code" href="../../d2/dda/stasis__app__recording_8h.html#a9afe9d42ab4828144104dc7d062f6e9a">stasis_app_recording_if_exists_parse</a>(args-&gt;<a class="code" href="../../db/d9a/structast__ari__channels__record__args.html#ab0ea5e6a5ef3db8a5f75140c3a3c324c">if_exists</a>);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;beep = args-&gt;<a class="code" href="../../db/d9a/structast__ari__channels__record__args.html#a82d4653c798868779eda7d5ac6b77112">beep</a>;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;terminate_on == <a class="code" href="../../d2/dda/stasis__app__recording_8h.html#aaf132da3309ffcfb82c55db0b5e3a92f">STASIS_APP_RECORDING_TERMINATE_INVALID</a>) {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;         <span class="stringliteral">&quot;terminateOn invalid&quot;</span>);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;if_exists == <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236dadba683b279266f012721bd3839da240d">AST_RECORD_IF_EXISTS_ERROR</a>) {</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;         <span class="stringliteral">&quot;ifExists invalid&quot;</span>);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   }</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a45a9a43d68a284ce9d8467ec9400660c">ast_get_format_for_file_ext</a>(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;format)) {</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;         response, 422, <span class="stringliteral">&quot;Unprocessable Entity&quot;</span>,</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;         <span class="stringliteral">&quot;specified format is unknown on this system&quot;</span>);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   }</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;   recording = <a class="code" href="../../d2/dda/stasis__app__recording_8h.html#ab9542f9fc14449db54ebd8e8f8abc61a">stasis_app_control_record</a>(control, <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   <span class="keywordflow">if</span> (recording == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      <span class="keywordflow">switch</span>(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>) {</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <span class="keywordflow">case</span> EINVAL:</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;         <span class="comment">/* While the arguments are invalid, we should have</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment">          * caught them prior to calling record.</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <span class="stringliteral">&quot;Error parsing request&quot;</span>);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      <span class="keywordflow">case</span> EEXIST:</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 409, <span class="stringliteral">&quot;Conflict&quot;</span>,</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            <span class="stringliteral">&quot;Recording &#39;%s&#39; already exists and can not be overwritten&quot;</span>,</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            args-&gt;<a class="code" href="../../db/d9a/structast__ari__channels__record__args.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="keywordflow">case</span> ENOMEM:</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="stringliteral">&quot;Out of memory&quot;</span>);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="keywordflow">case</span> EPERM:</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            <span class="stringliteral">&quot;Recording name invalid&quot;</span>);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;            <span class="stringliteral">&quot;Unrecognized recording error: %s\n&quot;</span>,</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;            response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <span class="stringliteral">&quot;Internal Server Error&quot;</span>);</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      }</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   }</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   uri_name_maxlen = strlen(args-&gt;<a class="code" href="../../db/d9a/structast__ari__channels__record__args.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>) * 3;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   uri_encoded_name = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(uri_name_maxlen);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   <span class="keywordflow">if</span> (!uri_encoded_name) {</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;         <span class="stringliteral">&quot;Out of memory&quot;</span>);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;   }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a6c73f6351bc9ca577360cf4af2231c3d">ast_uri_encode</a>(args-&gt;<a class="code" href="../../db/d9a/structast__ari__channels__record__args.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, uri_encoded_name, uri_name_maxlen,</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7f200bdbb0ccc080852f2279a1d470dc">ast_uri_http</a>);</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(&amp;recording_url, <span class="stringliteral">&quot;/recordings/live/%s&quot;</span>,</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;         uri_encoded_name) == -1) {</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      recording_url = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;         <span class="stringliteral">&quot;Out of memory&quot;</span>);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   }</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   json = <a class="code" href="../../d2/dda/stasis__app__recording_8h.html#ab282a883c01fbaf2a215c998428aecec">stasis_app_recording_to_json</a>(recording);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;   <span class="keywordflow">if</span> (!json) {</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;         <span class="stringliteral">&quot;Out of memory&quot;</span>);</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#a5270232ee10a8984c7717eacf2dd9d61">ast_ari_response_created</a>(response, recording_url, json);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;}</div><div class="ttc" id="structast__ari__channels__record__args_html_a6bd2bb5fcc7628a640958994a22f997c"><div class="ttname"><a href="../../db/d9a/structast__ari__channels__record__args.html#a6bd2bb5fcc7628a640958994a22f997c">ast_ari_channels_record_args::format</a></div><div class="ttdeci">const char * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00629">resource_channels.h:629</a></div></div>
<div class="ttc" id="ari_8h_html_a5270232ee10a8984c7717eacf2dd9d61"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a5270232ee10a8984c7717eacf2dd9d61">ast_ari_response_created</a></div><div class="ttdeci">void ast_ari_response_created(struct ast_ari_response *response, const char *url, struct ast_json *message)</div><div class="ttdoc">Fill in a Created (201) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00305">res_ari.c:305</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__ari__channels__record__args_html_ab0ea5e6a5ef3db8a5f75140c3a3c324c"><div class="ttname"><a href="../../db/d9a/structast__ari__channels__record__args.html#ab0ea5e6a5ef3db8a5f75140c3a3c324c">ast_ari_channels_record_args::if_exists</a></div><div class="ttdeci">const char * if_exists</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00635">resource_channels.h:635</a></div></div>
<div class="ttc" id="utils_8h_html_a6c73f6351bc9ca577360cf4af2231c3d"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a6c73f6351bc9ca577360cf4af2231c3d">ast_uri_encode</a></div><div class="ttdeci">char * ast_uri_encode(const char *string, char *outbuf, int buflen, struct ast_flags spec)</div><div class="ttdoc">Turn text string to URI-encoded XX version. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00577">main/utils.c:577</a></div></div>
<div class="ttc" id="structast__ari__channels__record__args_html_a2905291106ca33c80e595233525899e0"><div class="ttname"><a href="../../db/d9a/structast__ari__channels__record__args.html#a2905291106ca33c80e595233525899e0">ast_ari_channels_record_args::max_duration_seconds</a></div><div class="ttdeci">int max_duration_seconds</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00631">resource_channels.h:631</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="stasis__app__recording_8h_html_ab65b6686f17aa43e154b56bc8be1ff38"><div class="ttname"><a href="../../d2/dda/stasis__app__recording_8h.html#ab65b6686f17aa43e154b56bc8be1ff38">stasis_app_recording_termination_parse</a></div><div class="ttdeci">char stasis_app_recording_termination_parse(const char *str)</div><div class="ttdoc">Parse a string into the recording termination enum. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4c/res__stasis__recording_8c_source.html#l00169">res_stasis_recording.c:169</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__ari__channels__record__args_html_a82d4653c798868779eda7d5ac6b77112"><div class="ttname"><a href="../../db/d9a/structast__ari__channels__record__args.html#a82d4653c798868779eda7d5ac6b77112">ast_ari_channels_record_args::beep</a></div><div class="ttdeci">int beep</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00637">resource_channels.h:637</a></div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
<div class="ttc" id="stasis__app__recording_8h_html_ab282a883c01fbaf2a215c998428aecec"><div class="ttname"><a href="../../d2/dda/stasis__app__recording_8h.html#ab282a883c01fbaf2a215c998428aecec">stasis_app_recording_to_json</a></div><div class="ttdeci">struct ast_json * stasis_app_recording_to_json(const struct stasis_app_recording *recording)</div><div class="ttdoc">Construct a JSON model of a recording. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4c/res__stasis__recording_8c_source.html#l00478">res_stasis_recording.c:478</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="stasis__app__recording_8h_html_aaf132da3309ffcfb82c55db0b5e3a92f"><div class="ttname"><a href="../../d2/dda/stasis__app__recording_8h.html#aaf132da3309ffcfb82c55db0b5e3a92f">STASIS_APP_RECORDING_TERMINATE_INVALID</a></div><div class="ttdeci">#define STASIS_APP_RECORDING_TERMINATE_INVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dda/stasis__app__recording_8h_source.html#l00172">stasis_app_recording.h:172</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="stasis__app__recording_8h_html_a9afe9d42ab4828144104dc7d062f6e9a"><div class="ttname"><a href="../../d2/dda/stasis__app__recording_8h.html#a9afe9d42ab4828144104dc7d062f6e9a">stasis_app_recording_if_exists_parse</a></div><div class="ttdeci">enum ast_record_if_exists stasis_app_recording_if_exists_parse(const char *str)</div><div class="ttdoc">Parse a string into the if_exists enum. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4c/res__stasis__recording_8c_source.html#l00194">res_stasis_recording.c:194</a></div></div>
<div class="ttc" id="structast__ari__channels__record__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../db/d9a/structast__ari__channels__record__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_record_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00625">resource_channels.h:625</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structstasis__app__recording_html"><div class="ttname"><a href="../../dc/d5e/structstasis__app__recording.html">stasis_app_recording</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4c/res__stasis__recording_8c_source.html#l00053">res_stasis_recording.c:53</a></div></div>
<div class="ttc" id="structstasis__app__recording__options_html"><div class="ttname"><a href="../../d0/dba/structstasis__app__recording__options.html">stasis_app_recording_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dda/stasis__app__recording_8h_source.html#l00176">stasis_app_recording.h:176</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="stasis__app__recording_8h_html_a7e584de6354b58e0ab9f75796715aca2"><div class="ttname"><a href="../../d2/dda/stasis__app__recording_8h.html#a7e584de6354b58e0ab9f75796715aca2">stasis_app_recording_options_create</a></div><div class="ttdeci">struct stasis_app_recording_options * stasis_app_recording_options_create(const char *name, const char *format)</div><div class="ttdoc">Allocate a recording options object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4c/res__stasis__recording_8c_source.html#l00151">res_stasis_recording.c:151</a></div></div>
<div class="ttc" id="file_8h_html_a45a9a43d68a284ce9d8467ec9400660c"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a45a9a43d68a284ce9d8467ec9400660c">ast_get_format_for_file_ext</a></div><div class="ttdeci">struct ast_format * ast_get_format_for_file_ext(const char *file_ext)</div><div class="ttdoc">Get the ast_format associated with the given file extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01938">file.c:1938</a></div></div>
<div class="ttc" id="stringfields_8h_html_a8b9f4347fc72720cc5cead952b54abe9"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a></div><div class="ttdeci">#define ast_string_field_build(x, field, fmt, args...)</div><div class="ttdoc">Set a field to a complex (built) value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00550">stringfields.h:550</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="utils_8h_html_a7f200bdbb0ccc080852f2279a1d470dc"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7f200bdbb0ccc080852f2279a1d470dc">ast_uri_http</a></div><div class="ttdeci">const struct ast_flags ast_uri_http</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00573">main/utils.c:573</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac665722c9bfe6d9b506df95184aa236dadba683b279266f012721bd3839da240d"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236dadba683b279266f012721bd3839da240d">AST_RECORD_IF_EXISTS_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01074">include/asterisk/app.h:1074</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="structast__ari__channels__record__args_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../db/d9a/structast__ari__channels__record__args.html#a8f8f80d37794cde9472343e4487ba3eb">ast_ari_channels_record_args::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00627">resource_channels.h:627</a></div></div>
<div class="ttc" id="stasis__app__recording_8h_html_ab9542f9fc14449db54ebd8e8f8abc61a"><div class="ttname"><a href="../../d2/dda/stasis__app__recording_8h.html#ab9542f9fc14449db54ebd8e8f8abc61a">stasis_app_control_record</a></div><div class="ttdeci">struct stasis_app_recording * stasis_app_control_record(struct stasis_app_control *control, struct stasis_app_recording_options *options)</div><div class="ttdoc">Record media from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4c/res__stasis__recording_8c_source.html#l00370">res_stasis_recording.c:370</a></div></div>
<div class="ttc" id="structast__ari__channels__record__args_html_aa0c1e600b53dd4f48dd371964f8a7361"><div class="ttname"><a href="../../db/d9a/structast__ari__channels__record__args.html#aa0c1e600b53dd4f48dd371964f8a7361">ast_ari_channels_record_args::max_silence_seconds</a></div><div class="ttdeci">int max_silence_seconds</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00633">resource_channels.h:633</a></div></div>
<div class="ttc" id="structast__ari__channels__record__args_html_aa3e310c39f669355ace9a3c9d935a0ad"><div class="ttname"><a href="../../db/d9a/structast__ari__channels__record__args.html#aa3e310c39f669355ace9a3c9d935a0ad">ast_ari_channels_record_args::terminate_on</a></div><div class="ttdeci">const char * terminate_on</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00639">resource_channels.h:639</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab3e9c39760f9c9ae5a5fc3d9c4d9041e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3e9c39760f9c9ae5a5fc3d9c4d9041e">&#9670;&nbsp;</a></span>ast_ari_channels_redirect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_redirect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d7e/structast__ari__channels__redirect__args.html">ast_ari_channels_redirect_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Redirect the channel to a different location. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00276">276</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00299">ast_ari_channels_redirect_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">channel_state_invalid()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00301">ast_ari_channels_redirect_args::endpoint</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00500">stasis_app_control_redirect()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l00894">ast_ari_channels_redirect_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;{</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *, chan_snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   <span class="keywordtype">char</span> *tech;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   <span class="keywordtype">char</span> *resource;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   <span class="keywordtype">int</span> tech_len;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../d9/d7e/structast__ari__channels__redirect__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <span class="keywordflow">if</span> (!control) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a>(control, response)) {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d9/d7e/structast__ari__channels__redirect__args.html#acf94d2c982235a175c6699a54ecfd121">endpoint</a>)) {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Not Found&quot;</span>,</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;         <span class="stringliteral">&quot;Required parameter &#39;endpoint&#39; not provided.&quot;</span>);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   tech = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(args-&gt;<a class="code" href="../../d9/d7e/structast__ari__channels__redirect__args.html#acf94d2c982235a175c6699a54ecfd121">endpoint</a>);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <span class="keywordflow">if</span> (!(resource = strchr(tech, <span class="charliteral">&#39;/&#39;</span>)) || !(tech_len = resource - tech)) {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 422, <span class="stringliteral">&quot;Unprocessable Entity&quot;</span>,</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;         <span class="stringliteral">&quot;Endpoint parameter &#39;%s&#39; does not contain tech/resource&quot;</span>, args-&gt;<a class="code" href="../../d9/d7e/structast__ari__channels__redirect__args.html#acf94d2c982235a175c6699a54ecfd121">endpoint</a>);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   }</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   *resource++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(resource)) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 422, <span class="stringliteral">&quot;Unprocessable Entity&quot;</span>,</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;         <span class="stringliteral">&quot;No resource provided in endpoint parameter &#39;%s&#39;&quot;</span>, args-&gt;<a class="code" href="../../d9/d7e/structast__ari__channels__redirect__args.html#acf94d2c982235a175c6699a54ecfd121">endpoint</a>);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   chan_snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(args-&gt;<a class="code" href="../../d9/d7e/structast__ari__channels__redirect__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <span class="keywordflow">if</span> (!chan_snapshot) {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;         <span class="stringliteral">&quot;Unable to find channel snapshot for &#39;%s&#39;&quot;</span>, args-&gt;<a class="code" href="../../d9/d7e/structast__ari__channels__redirect__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keywordflow">if</span> (strncasecmp(chan_snapshot-&gt;base-&gt;type, tech, tech_len)) {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 422, <span class="stringliteral">&quot;Unprocessable Entity&quot;</span>,</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;         <span class="stringliteral">&quot;Endpoint technology &#39;%s&#39; does not match channel technology &#39;%s&#39;&quot;</span>,</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;         tech, chan_snapshot-&gt;base-&gt;type);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9c/stasis__app_8h.html#a5a22aa0f953281ff836d394667b9bd24">stasis_app_control_redirect</a>(control, resource)) {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;         <span class="stringliteral">&quot;Failed to redirect channel&quot;</span>);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__ari__channels__redirect__args_html_acf94d2c982235a175c6699a54ecfd121"><div class="ttname"><a href="../../d9/d7e/structast__ari__channels__redirect__args.html#acf94d2c982235a175c6699a54ecfd121">ast_ari_channels_redirect_args::endpoint</a></div><div class="ttdeci">const char * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00301">resource_channels.h:301</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a5a22aa0f953281ff836d394667b9bd24"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a5a22aa0f953281ff836d394667b9bd24">stasis_app_control_redirect</a></div><div class="ttdeci">int stasis_app_control_redirect(struct stasis_app_control *control, const char *endpoint)</div><div class="ttdoc">Redirect a channel in res_stasis to a particular endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00500">control.c:500</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a4a584f5ec1d637b285149ea0e2adda14"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a></div><div class="ttdeci">static int channel_state_invalid(struct stasis_app_control *control, struct ast_ari_response *response)</div><div class="ttdoc">Ensure channel is in a state that allows operation to be performed. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00108">resource_channels.c:108</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="structast__ari__channels__redirect__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d9/d7e/structast__ari__channels__redirect__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_redirect_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00299">resource_channels.h:299</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7b5e826b942b1a1ff8060d81251a24d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b5e826b942b1a1ff8060d81251a24d8">&#9670;&nbsp;</a></span>ast_ari_channels_ring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_ring </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/dcb/structast__ari__channels__ring__args.html">ast_ari_channels_ring_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicate ringing to a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00363">363</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00338">ast_ari_channels_ring_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">channel_state_invalid()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00592">stasis_app_control_ring()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l01026">ast_ari_channels_ring_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;{</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../db/dcb/structast__ari__channels__ring__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a>(control, response)) {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#af9717bc28b2e5847e2d227c27bfe9116">stasis_app_control_ring</a>(control);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="stasis__app_8h_html_af9717bc28b2e5847e2d227c27bfe9116"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#af9717bc28b2e5847e2d227c27bfe9116">stasis_app_control_ring</a></div><div class="ttdeci">int stasis_app_control_ring(struct stasis_app_control *control)</div><div class="ttdoc">Indicate ringing to the channel associated with this control. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00592">control.c:592</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a4a584f5ec1d637b285149ea0e2adda14"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a></div><div class="ttdeci">static int channel_state_invalid(struct stasis_app_control *control, struct ast_ari_response *response)</div><div class="ttdoc">Ensure channel is in a state that allows operation to be performed. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00108">resource_channels.c:108</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="structast__ari__channels__ring__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../db/dcb/structast__ari__channels__ring__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_ring_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00338">resource_channels.h:338</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9130974673a9376da2b6c97ba6519671"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9130974673a9376da2b6c97ba6519671">&#9670;&nbsp;</a></span>ast_ari_channels_ring_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_ring_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d8f/structast__ari__channels__ring__stop__args.html">ast_ari_channels_ring_stop_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop ringing indication on a channel if locally generated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00383">383</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00351">ast_ari_channels_ring_stop_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">channel_state_invalid()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00607">stasis_app_control_ring_stop()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l01086">ast_ari_channels_ring_stop_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;{</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../db/d8f/structast__ari__channels__ring__stop__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;   }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a>(control, response)) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#ab53d6f93bf8ba651ab404eaf855d4027">stasis_app_control_ring_stop</a>(control);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;}</div><div class="ttc" id="stasis__app_8h_html_ab53d6f93bf8ba651ab404eaf855d4027"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#ab53d6f93bf8ba651ab404eaf855d4027">stasis_app_control_ring_stop</a></div><div class="ttdeci">int stasis_app_control_ring_stop(struct stasis_app_control *control)</div><div class="ttdoc">Stop locally generated ringing on the channel associated with this control. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00607">control.c:607</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__ari__channels__ring__stop__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../db/d8f/structast__ari__channels__ring__stop__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_ring_stop_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00351">resource_channels.h:351</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a4a584f5ec1d637b285149ea0e2adda14"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a></div><div class="ttdeci">static int channel_state_invalid(struct stasis_app_control *control, struct ast_ari_response *response)</div><div class="ttdoc">Ensure channel is in a state that allows operation to be performed. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00108">resource_channels.c:108</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af1b9ce4dd370e0a2f8404c730d5b229b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1b9ce4dd370e0a2f8404c730d5b229b">&#9670;&nbsp;</a></span>ast_ari_channels_rtpstatistics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_rtpstatistics </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/d1e/structast__ari__channels__rtpstatistics__args.html">ast_ari_channels_rtpstatistics_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RTP stats on a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l02028">2028</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00276">ast_ari_response_ok()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02992">ast_channel_cleanup</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00769">ast_channel_tech()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02206">ast_rtp_instance_get_glue()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l04019">ast_rtp_instance_get_stats_all_json()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00819">ast_ari_channels_rtpstatistics_args::channel_id</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00729">ast_rtp_glue::get_rtp_info</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00630">ast_channel_tech::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l02763">ast_ari_channels_rtpstatistics_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;{</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>);</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *, rtp, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *j_res;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> *tech;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a> *glue;</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(args-&gt;<a class="code" href="../../d3/d1e/structast__ari__channels__rtpstatistics__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 404, <span class="stringliteral">&quot;Not Found&quot;</span>,</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;         <span class="stringliteral">&quot;Channel not found&quot;</span>);</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;   }</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;   tech = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan);</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;   <span class="keywordflow">if</span> (!tech) {</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 404, <span class="stringliteral">&quot;Not Found&quot;</span>,</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;         <span class="stringliteral">&quot;Channel&#39;s tech not found&quot;</span>);</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;   }</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;   glue = <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad8bdc0c51b9a04967d2b507e64d64d5b">ast_rtp_instance_get_glue</a>(tech-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">type</a>);</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;   <span class="keywordflow">if</span> (!glue) {</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 403, <span class="stringliteral">&quot;Forbidden&quot;</span>,</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;         <span class="stringliteral">&quot;Unsupported channel type&quot;</span>);</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;   }</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;   glue-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a42454110450e5a6883707f9b4b685e8f">get_rtp_info</a>(chan, &amp;rtp);</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;   <span class="keywordflow">if</span> (!rtp) {</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 404, <span class="stringliteral">&quot;Not Found&quot;</span>,</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;         <span class="stringliteral">&quot;RTP info not found&quot;</span>);</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;   }</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;   j_res = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gac8dcaac6d227860b04c66fc22462789a">ast_rtp_instance_get_stats_all_json</a>(rtp);</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;   <span class="keywordflow">if</span> (!j_res) {</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 404, <span class="stringliteral">&quot;Not Found&quot;</span>,</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;         <span class="stringliteral">&quot;Statistics not found&quot;</span>);</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;   }</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a>(response, j_res);</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a8ff938fb2f815be425fd2859a21e6d61"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">ast_channel_tech::type</a></div><div class="ttdeci">const char *const type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00630">channel.h:630</a></div></div>
<div class="ttc" id="structast__ari__channels__rtpstatistics__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d3/d1e/structast__ari__channels__rtpstatistics__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_rtpstatistics_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00819">resource_channels.h:819</a></div></div>
<div class="ttc" id="structast__rtp__glue_html"><div class="ttname"><a href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00720">rtp_engine.h:720</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__rtp__glue_html_a42454110450e5a6883707f9b4b685e8f"><div class="ttname"><a href="../../d8/dc9/structast__rtp__glue.html#a42454110450e5a6883707f9b4b685e8f">ast_rtp_glue::get_rtp_info</a></div><div class="ttdeci">enum ast_rtp_glue_result(* get_rtp_info)(struct ast_channel *chan, struct ast_rtp_instance **instance)</div><div class="ttdoc">Callback for retrieving the RTP instance carrying audio. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00729">rtp_engine.h:729</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="ari_8h_html_a9111898e4037c6e06472038d67a78a2e"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a></div><div class="ttdeci">void ast_ari_response_ok(struct ast_ari_response *response, struct ast_json *message)</div><div class="ttdoc">Fill in an OK (200) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00276">res_ari.c:276</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="structast__channel__tech_html"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a></div><div class="ttdoc">Structure to describe a channel &quot;technology&quot;, ie a channel driver See for examples: ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00629">channel.h:629</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="rtp__engine_8h_html_ad8bdc0c51b9a04967d2b507e64d64d5b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ad8bdc0c51b9a04967d2b507e64d64d5b">ast_rtp_instance_get_glue</a></div><div class="ttdeci">struct ast_rtp_glue * ast_rtp_instance_get_glue(const char *type)</div><div class="ttdoc">Get the RTP glue that binds a channel to the RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02206">rtp_engine.c:2206</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="channel_8h_html_af5dee96d4dcc88a95fce391c22d4d21f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a></div><div class="ttdeci">const struct ast_channel_tech * ast_channel_tech(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00769">channel_internal_api.c:769</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gac8dcaac6d227860b04c66fc22462789a"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gac8dcaac6d227860b04c66fc22462789a">ast_rtp_instance_get_stats_all_json</a></div><div class="ttdeci">struct ast_json * ast_rtp_instance_get_stats_all_json(struct ast_rtp_instance *instance)</div><div class="ttdoc">Retrieve statistics about an RTP instance in json format. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l04019">rtp_engine.c:4019</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d7aac99c9ff1eb710c08e0cb92925d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d7aac99c9ff1eb710c08e0cb92925d9">&#9670;&nbsp;</a></span>ast_ari_channels_send_dtmf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_send_dtmf </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/ddb/structast__ari__channels__send__dtmf__args.html">ast_ari_channels_send_dtmf_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send provided DTMF to a given channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00487">487</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00374">ast_ari_channels_send_dtmf_args::after</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00368">ast_ari_channels_send_dtmf_args::before</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00370">ast_ari_channels_send_dtmf_args::between</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00364">ast_ari_channels_send_dtmf_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">channel_state_invalid()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00366">ast_ari_channels_send_dtmf_args::dtmf</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00372">ast_ari_channels_send_dtmf_args::duration</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00565">stasis_app_control_dtmf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l01175">ast_ari_channels_send_dtmf_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;{</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../db/ddb/structast__ari__channels__send__dtmf__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   }</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a>(control, response)) {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   }</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../db/ddb/structast__ari__channels__send__dtmf__args.html#a76ea3f653e83f5ceb2aba94e678c6f82">dtmf</a>)) {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;         <span class="stringliteral">&quot;DTMF is required&quot;</span>);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#a7c019f054eb3780d13f1e691864cca44">stasis_app_control_dtmf</a>(control, args-&gt;<a class="code" href="../../db/ddb/structast__ari__channels__send__dtmf__args.html#a76ea3f653e83f5ceb2aba94e678c6f82">dtmf</a>, args-&gt;<a class="code" href="../../db/ddb/structast__ari__channels__send__dtmf__args.html#a98f0e62710c1bdbf9a7b509ba35ca006">before</a>, args-&gt;<a class="code" href="../../db/ddb/structast__ari__channels__send__dtmf__args.html#a166d33fd5261da92d3135d77a32ab8bf">between</a>, args-&gt;<a class="code" href="../../db/ddb/structast__ari__channels__send__dtmf__args.html#ac6e4b2a3cf932b33832d4e4e4e7cd0de">duration</a>, args-&gt;<a class="code" href="../../db/ddb/structast__ari__channels__send__dtmf__args.html#a8553ad04554ace7efc8813bb2ffe5862">after</a>);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div><div class="ttc" id="structast__ari__channels__send__dtmf__args_html_a76ea3f653e83f5ceb2aba94e678c6f82"><div class="ttname"><a href="../../db/ddb/structast__ari__channels__send__dtmf__args.html#a76ea3f653e83f5ceb2aba94e678c6f82">ast_ari_channels_send_dtmf_args::dtmf</a></div><div class="ttdeci">const char * dtmf</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00366">resource_channels.h:366</a></div></div>
<div class="ttc" id="structast__ari__channels__send__dtmf__args_html_a166d33fd5261da92d3135d77a32ab8bf"><div class="ttname"><a href="../../db/ddb/structast__ari__channels__send__dtmf__args.html#a166d33fd5261da92d3135d77a32ab8bf">ast_ari_channels_send_dtmf_args::between</a></div><div class="ttdeci">int between</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00370">resource_channels.h:370</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a7c019f054eb3780d13f1e691864cca44"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a7c019f054eb3780d13f1e691864cca44">stasis_app_control_dtmf</a></div><div class="ttdeci">int stasis_app_control_dtmf(struct stasis_app_control *control, const char *dtmf, int before, int between, unsigned int duration, int after)</div><div class="ttdoc">Send DTMF to the channel associated with this control. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00565">control.c:565</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__ari__channels__send__dtmf__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../db/ddb/structast__ari__channels__send__dtmf__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_send_dtmf_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00364">resource_channels.h:364</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a4a584f5ec1d637b285149ea0e2adda14"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a></div><div class="ttdeci">static int channel_state_invalid(struct stasis_app_control *control, struct ast_ari_response *response)</div><div class="ttdoc">Ensure channel is in a state that allows operation to be performed. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00108">resource_channels.c:108</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__ari__channels__send__dtmf__args_html_ac6e4b2a3cf932b33832d4e4e4e7cd0de"><div class="ttname"><a href="../../db/ddb/structast__ari__channels__send__dtmf__args.html#ac6e4b2a3cf932b33832d4e4e4e7cd0de">ast_ari_channels_send_dtmf_args::duration</a></div><div class="ttdeci">int duration</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00372">resource_channels.h:372</a></div></div>
<div class="ttc" id="structast__ari__channels__send__dtmf__args_html_a98f0e62710c1bdbf9a7b509ba35ca006"><div class="ttname"><a href="../../db/ddb/structast__ari__channels__send__dtmf__args.html#a98f0e62710c1bdbf9a7b509ba35ca006">ast_ari_channels_send_dtmf_args::before</a></div><div class="ttdeci">int before</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00368">resource_channels.h:368</a></div></div>
<div class="ttc" id="structast__ari__channels__send__dtmf__args_html_a8553ad04554ace7efc8813bb2ffe5862"><div class="ttname"><a href="../../db/ddb/structast__ari__channels__send__dtmf__args.html#a8553ad04554ace7efc8813bb2ffe5862">ast_ari_channels_send_dtmf_args::after</a></div><div class="ttdeci">int after</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00374">resource_channels.h:374</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad0e605f0adad4ccc68307360d5341703"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0e605f0adad4ccc68307360d5341703">&#9670;&nbsp;</a></span>ast_ari_channels_set_channel_var()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_set_channel_var </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/d11/structast__ari__channels__set__channel__var__args.html">ast_ari_channels_set_channel_var_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the value of a channel variable or function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01541">1541</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00691">ast_ari_channels_set_channel_var_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/de3/control_8c_source.html#l00711">stasis_app_control_set_channel_var()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00695">ast_ari_channels_set_channel_var_args::value</a>, and <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00693">ast_ari_channels_set_channel_var_args::variable</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l02385">ast_ari_channels_set_channel_var_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;{</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(response != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../dc/d11/structast__ari__channels__set__channel__var__args.html#a114813163ea6a5363599b256ec12be81">variable</a>)) {</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;         <span class="stringliteral">&quot;Variable name is required&quot;</span>);</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;   }</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../dc/d11/structast__ari__channels__set__channel__var__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      <span class="comment">/* response filled in by find_control */</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;   }</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9c/stasis__app_8h.html#aeb085c198d616b3317f7327fd7e5fc7b">stasis_app_control_set_channel_var</a>(control, args-&gt;<a class="code" href="../../dc/d11/structast__ari__channels__set__channel__var__args.html#a114813163ea6a5363599b256ec12be81">variable</a>, args-&gt;<a class="code" href="../../dc/d11/structast__ari__channels__set__channel__var__args.html#a8556878012feffc9e0beb86cd78f424d">value</a>)) {</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;         <span class="stringliteral">&quot;Failed to execute function&quot;</span>);</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;   }</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__ari__channels__set__channel__var__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../dc/d11/structast__ari__channels__set__channel__var__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_set_channel_var_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00691">resource_channels.h:691</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__ari__channels__set__channel__var__args_html_a114813163ea6a5363599b256ec12be81"><div class="ttname"><a href="../../dc/d11/structast__ari__channels__set__channel__var__args.html#a114813163ea6a5363599b256ec12be81">ast_ari_channels_set_channel_var_args::variable</a></div><div class="ttdeci">const char * variable</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00693">resource_channels.h:693</a></div></div>
<div class="ttc" id="structast__ari__channels__set__channel__var__args_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dc/d11/structast__ari__channels__set__channel__var__args.html#a8556878012feffc9e0beb86cd78f424d">ast_ari_channels_set_channel_var_args::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00695">resource_channels.h:695</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis__app_8h_html_aeb085c198d616b3317f7327fd7e5fc7b"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#aeb085c198d616b3317f7327fd7e5fc7b">stasis_app_control_set_channel_var</a></div><div class="ttdeci">int stasis_app_control_set_channel_var(struct stasis_app_control *control, const char *variable, const char *value)</div><div class="ttdoc">Set a variable on the channel associated with this control to value. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00711">control.c:711</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6f05a19a4fe88e1092da40aa63e7419c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f05a19a4fe88e1092da40aa63e7419c">&#9670;&nbsp;</a></span>ast_ari_channels_snoop_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_snoop_channel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/dbd/structast__ari__channels__snoop__channel__args.html">ast_ari_channels_snoop_channel_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start snooping. </p>
<p>Snoop (spy/whisper) on a specific channel.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01651">1651</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00725">ast_ari_channels_snoop_channel_args::app</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00727">ast_ari_channels_snoop_channel_args::app_args</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01572">ari_channels_handle_snoop_channel()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00719">ast_ari_channels_snoop_channel_args::channel_id</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00729">ast_ari_channels_snoop_channel_args::snoop_id</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00721">ast_ari_channels_snoop_channel_args::spy</a>, and <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00723">ast_ari_channels_snoop_channel_args::whisper</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l02487">ast_ari_channels_snoop_channel_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;{</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;   <a class="code" href="../../da/d49/resource__channels_8c.html#a655d672545a5b964e9c29460f84087de">ari_channels_handle_snoop_channel</a>(</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      args-&gt;<a class="code" href="../../d0/dbd/structast__ari__channels__snoop__channel__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>,</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;      args-&gt;<a class="code" href="../../d0/dbd/structast__ari__channels__snoop__channel__args.html#a391923ef14ced1ce26110cf292883fc3">spy</a>,</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;      args-&gt;<a class="code" href="../../d0/dbd/structast__ari__channels__snoop__channel__args.html#af9faf4d0cb56c5cb15ab295bc52165e4">whisper</a>,</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;      args-&gt;<a class="code" href="../../d0/dbd/structast__ari__channels__snoop__channel__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">app</a>,</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;      args-&gt;<a class="code" href="../../d0/dbd/structast__ari__channels__snoop__channel__args.html#a4e0ea3bb8683fc4aa2d462bd1c1f6343">app_args</a>,</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      args-&gt;<a class="code" href="../../d0/dbd/structast__ari__channels__snoop__channel__args.html#a212715594f1af2c62aafe7d4ad0be5f1">snoop_id</a>,</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      response);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;}</div><div class="ttc" id="structast__ari__channels__snoop__channel__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d0/dbd/structast__ari__channels__snoop__channel__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_snoop_channel_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00719">resource_channels.h:719</a></div></div>
<div class="ttc" id="structast__ari__channels__snoop__channel__args_html_a4e0ea3bb8683fc4aa2d462bd1c1f6343"><div class="ttname"><a href="../../d0/dbd/structast__ari__channels__snoop__channel__args.html#a4e0ea3bb8683fc4aa2d462bd1c1f6343">ast_ari_channels_snoop_channel_args::app_args</a></div><div class="ttdeci">const char * app_args</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00727">resource_channels.h:727</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a655d672545a5b964e9c29460f84087de"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a655d672545a5b964e9c29460f84087de">ari_channels_handle_snoop_channel</a></div><div class="ttdeci">static void ari_channels_handle_snoop_channel(const char *args_channel_id, const char *args_spy, const char *args_whisper, const char *args_app, const char *args_app_args, const char *args_snoop_id, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01572">resource_channels.c:1572</a></div></div>
<div class="ttc" id="structast__ari__channels__snoop__channel__args_html_a83a793edb3d6a3a15f2a7fc99ffe8c90"><div class="ttname"><a href="../../d0/dbd/structast__ari__channels__snoop__channel__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">ast_ari_channels_snoop_channel_args::app</a></div><div class="ttdeci">const char * app</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00725">resource_channels.h:725</a></div></div>
<div class="ttc" id="structast__ari__channels__snoop__channel__args_html_a212715594f1af2c62aafe7d4ad0be5f1"><div class="ttname"><a href="../../d0/dbd/structast__ari__channels__snoop__channel__args.html#a212715594f1af2c62aafe7d4ad0be5f1">ast_ari_channels_snoop_channel_args::snoop_id</a></div><div class="ttdeci">const char * snoop_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00729">resource_channels.h:729</a></div></div>
<div class="ttc" id="structast__ari__channels__snoop__channel__args_html_af9faf4d0cb56c5cb15ab295bc52165e4"><div class="ttname"><a href="../../d0/dbd/structast__ari__channels__snoop__channel__args.html#af9faf4d0cb56c5cb15ab295bc52165e4">ast_ari_channels_snoop_channel_args::whisper</a></div><div class="ttdeci">const char * whisper</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00723">resource_channels.h:723</a></div></div>
<div class="ttc" id="structast__ari__channels__snoop__channel__args_html_a391923ef14ced1ce26110cf292883fc3"><div class="ttname"><a href="../../d0/dbd/structast__ari__channels__snoop__channel__args.html#a391923ef14ced1ce26110cf292883fc3">ast_ari_channels_snoop_channel_args::spy</a></div><div class="ttdeci">const char * spy</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00721">resource_channels.h:721</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2803870934fb15daac73e7a893429746"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2803870934fb15daac73e7a893429746">&#9670;&nbsp;</a></span>ast_ari_channels_snoop_channel_with_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_snoop_channel_with_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/d35/structast__ari__channels__snoop__channel__with__id__args.html">ast_ari_channels_snoop_channel_with_id_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start snooping. </p>
<p>Snoop (spy/whisper) on a specific channel.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01665">1665</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00763">ast_ari_channels_snoop_channel_with_id_args::app</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00765">ast_ari_channels_snoop_channel_with_id_args::app_args</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01572">ari_channels_handle_snoop_channel()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00755">ast_ari_channels_snoop_channel_with_id_args::channel_id</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00757">ast_ari_channels_snoop_channel_with_id_args::snoop_id</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00759">ast_ari_channels_snoop_channel_with_id_args::spy</a>, and <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00761">ast_ari_channels_snoop_channel_with_id_args::whisper</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l02593">ast_ari_channels_snoop_channel_with_id_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;{</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;   <a class="code" href="../../da/d49/resource__channels_8c.html#a655d672545a5b964e9c29460f84087de">ari_channels_handle_snoop_channel</a>(</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;      args-&gt;<a class="code" href="../../d2/d35/structast__ari__channels__snoop__channel__with__id__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>,</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      args-&gt;<a class="code" href="../../d2/d35/structast__ari__channels__snoop__channel__with__id__args.html#a391923ef14ced1ce26110cf292883fc3">spy</a>,</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      args-&gt;<a class="code" href="../../d2/d35/structast__ari__channels__snoop__channel__with__id__args.html#af9faf4d0cb56c5cb15ab295bc52165e4">whisper</a>,</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      args-&gt;<a class="code" href="../../d2/d35/structast__ari__channels__snoop__channel__with__id__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">app</a>,</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;      args-&gt;<a class="code" href="../../d2/d35/structast__ari__channels__snoop__channel__with__id__args.html#a4e0ea3bb8683fc4aa2d462bd1c1f6343">app_args</a>,</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      args-&gt;<a class="code" href="../../d2/d35/structast__ari__channels__snoop__channel__with__id__args.html#a212715594f1af2c62aafe7d4ad0be5f1">snoop_id</a>,</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;      response);</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;}</div><div class="ttc" id="structast__ari__channels__snoop__channel__with__id__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d2/d35/structast__ari__channels__snoop__channel__with__id__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_snoop_channel_with_id_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00755">resource_channels.h:755</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a655d672545a5b964e9c29460f84087de"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a655d672545a5b964e9c29460f84087de">ari_channels_handle_snoop_channel</a></div><div class="ttdeci">static void ari_channels_handle_snoop_channel(const char *args_channel_id, const char *args_spy, const char *args_whisper, const char *args_app, const char *args_app_args, const char *args_snoop_id, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01572">resource_channels.c:1572</a></div></div>
<div class="ttc" id="structast__ari__channels__snoop__channel__with__id__args_html_af9faf4d0cb56c5cb15ab295bc52165e4"><div class="ttname"><a href="../../d2/d35/structast__ari__channels__snoop__channel__with__id__args.html#af9faf4d0cb56c5cb15ab295bc52165e4">ast_ari_channels_snoop_channel_with_id_args::whisper</a></div><div class="ttdeci">const char * whisper</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00761">resource_channels.h:761</a></div></div>
<div class="ttc" id="structast__ari__channels__snoop__channel__with__id__args_html_a212715594f1af2c62aafe7d4ad0be5f1"><div class="ttname"><a href="../../d2/d35/structast__ari__channels__snoop__channel__with__id__args.html#a212715594f1af2c62aafe7d4ad0be5f1">ast_ari_channels_snoop_channel_with_id_args::snoop_id</a></div><div class="ttdeci">const char * snoop_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00757">resource_channels.h:757</a></div></div>
<div class="ttc" id="structast__ari__channels__snoop__channel__with__id__args_html_a4e0ea3bb8683fc4aa2d462bd1c1f6343"><div class="ttname"><a href="../../d2/d35/structast__ari__channels__snoop__channel__with__id__args.html#a4e0ea3bb8683fc4aa2d462bd1c1f6343">ast_ari_channels_snoop_channel_with_id_args::app_args</a></div><div class="ttdeci">const char * app_args</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00765">resource_channels.h:765</a></div></div>
<div class="ttc" id="structast__ari__channels__snoop__channel__with__id__args_html_a83a793edb3d6a3a15f2a7fc99ffe8c90"><div class="ttname"><a href="../../d2/d35/structast__ari__channels__snoop__channel__with__id__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">ast_ari_channels_snoop_channel_with_id_args::app</a></div><div class="ttdeci">const char * app</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00763">resource_channels.h:763</a></div></div>
<div class="ttc" id="structast__ari__channels__snoop__channel__with__id__args_html_a391923ef14ced1ce26110cf292883fc3"><div class="ttname"><a href="../../d2/d35/structast__ari__channels__snoop__channel__with__id__args.html#a391923ef14ced1ce26110cf292883fc3">ast_ari_channels_snoop_channel_with_id_args::spy</a></div><div class="ttdeci">const char * spy</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00759">resource_channels.h:759</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2bf6d78eb5f251bca4495b4b2f24a4d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bf6d78eb5f251bca4495b4b2f24a4d8">&#9670;&nbsp;</a></span>ast_ari_channels_start_moh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_start_moh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d5e/structast__ari__channels__start__moh__args.html">ast_ari_channels_start_moh_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Play music on hold to a channel. </p>
<p>Using media operations such as /play on a channel playing MOH in this manner will suspend MOH without resuming automatically. If continuing music on hold is desired, the stasis application must reinitiate music on hold.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00556">556</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00476">ast_ari_channels_start_moh_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">channel_state_invalid()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00478">ast_ari_channels_start_moh_args::moh_class</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00780">stasis_app_control_moh_start()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l01557">ast_ari_channels_start_moh_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;{</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../da/d5e/structast__ari__channels__start__moh__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="comment">/* Response filled in by find_control */</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a>(control, response)) {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#a11f12c113afa7b94a2ddf80d6d543b23">stasis_app_control_moh_start</a>(control, args-&gt;<a class="code" href="../../da/d5e/structast__ari__channels__start__moh__args.html#a1aeb479358786529a135e404de8fa504">moh_class</a>);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__ari__channels__start__moh__args_html_a1aeb479358786529a135e404de8fa504"><div class="ttname"><a href="../../da/d5e/structast__ari__channels__start__moh__args.html#a1aeb479358786529a135e404de8fa504">ast_ari_channels_start_moh_args::moh_class</a></div><div class="ttdeci">const char * moh_class</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00478">resource_channels.h:478</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a4a584f5ec1d637b285149ea0e2adda14"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a></div><div class="ttdeci">static int channel_state_invalid(struct stasis_app_control *control, struct ast_ari_response *response)</div><div class="ttdoc">Ensure channel is in a state that allows operation to be performed. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00108">resource_channels.c:108</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__ari__channels__start__moh__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../da/d5e/structast__ari__channels__start__moh__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_start_moh_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00476">resource_channels.h:476</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a11f12c113afa7b94a2ddf80d6d543b23"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a11f12c113afa7b94a2ddf80d6d543b23">stasis_app_control_moh_start</a></div><div class="ttdeci">void stasis_app_control_moh_start(struct stasis_app_control *control, const char *moh_class)</div><div class="ttdoc">Play music on hold to a channel (does not affect hold status) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00780">control.c:780</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c5a4f6f2a24dd28faba6da106ece533"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c5a4f6f2a24dd28faba6da106ece533">&#9670;&nbsp;</a></span>ast_ari_channels_start_silence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_start_silence </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d8f/structast__ari__channels__start__silence__args.html">ast_ari_channels_start_silence_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Play silence to a channel. </p>
<p>Using media operations such as /play on a channel playing silence in this manner will suspend silence without resuming automatically.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00596">596</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00517">ast_ari_channels_start_silence_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">channel_state_invalid()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00832">stasis_app_control_silence_start()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l01687">ast_ari_channels_start_silence_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;{</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../d0/d8f/structast__ari__channels__start__silence__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <span class="comment">/* Response filled in by find_control */</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   }</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a>(control, response)) {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   }</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#a3b8ee9ca3a0ed85ce482681b0e6d9b45">stasis_app_control_silence_start</a>(control);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__ari__channels__start__silence__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d0/d8f/structast__ari__channels__start__silence__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_start_silence_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00517">resource_channels.h:517</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a4a584f5ec1d637b285149ea0e2adda14"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a></div><div class="ttdeci">static int channel_state_invalid(struct stasis_app_control *control, struct ast_ari_response *response)</div><div class="ttdoc">Ensure channel is in a state that allows operation to be performed. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00108">resource_channels.c:108</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a3b8ee9ca3a0ed85ce482681b0e6d9b45"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a3b8ee9ca3a0ed85ce482681b0e6d9b45">stasis_app_control_silence_start</a></div><div class="ttdeci">void stasis_app_control_silence_start(struct stasis_app_control *control)</div><div class="ttdoc">Start playing silence to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00832">control.c:832</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4c7c1882dd8f846387c888c1e0e01488"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c7c1882dd8f846387c888c1e0e01488">&#9670;&nbsp;</a></span>ast_ari_channels_stop_moh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_stop_moh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d4f/structast__ari__channels__stop__moh__args.html">ast_ari_channels_stop_moh_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop playing music on hold to a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00576">576</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00504">ast_ari_channels_stop_moh_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">channel_state_invalid()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00798">stasis_app_control_moh_stop()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l01627">ast_ari_channels_stop_moh_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;{</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../db/d4f/structast__ari__channels__stop__moh__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="comment">/* Response filled in by find_control */</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a>(control, response)) {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;   }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#a5d561aa1d3d4550d16717af2e9ff6c19">stasis_app_control_moh_stop</a>(control);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__ari__channels__stop__moh__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../db/d4f/structast__ari__channels__stop__moh__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_stop_moh_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00504">resource_channels.h:504</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a4a584f5ec1d637b285149ea0e2adda14"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a></div><div class="ttdeci">static int channel_state_invalid(struct stasis_app_control *control, struct ast_ari_response *response)</div><div class="ttdoc">Ensure channel is in a state that allows operation to be performed. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00108">resource_channels.c:108</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a5d561aa1d3d4550d16717af2e9ff6c19"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a5d561aa1d3d4550d16717af2e9ff6c19">stasis_app_control_moh_stop</a></div><div class="ttdeci">void stasis_app_control_moh_stop(struct stasis_app_control *control)</div><div class="ttdoc">Stop playing music on hold to a channel (does not affect hold status) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00798">control.c:798</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7be486b7059728560767ab02d5f48d24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7be486b7059728560767ab02d5f48d24">&#9670;&nbsp;</a></span>ast_ari_channels_stop_silence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_stop_silence </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d6d/structast__ari__channels__stop__silence__args.html">ast_ari_channels_stop_silence_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop playing silence to a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00616">616</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00532">ast_ari_channels_stop_silence_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">channel_state_invalid()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00855">stasis_app_control_silence_stop()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l01747">ast_ari_channels_stop_silence_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;{</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../db/d6d/structast__ari__channels__stop__silence__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="comment">/* Response filled in by find_control */</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a>(control, response)) {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   }</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#a3c7239c782e4db64d0e0ddcbcd4283cd">stasis_app_control_silence_stop</a>(control);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;}</div><div class="ttc" id="stasis__app_8h_html_a3c7239c782e4db64d0e0ddcbcd4283cd"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a3c7239c782e4db64d0e0ddcbcd4283cd">stasis_app_control_silence_stop</a></div><div class="ttdeci">void stasis_app_control_silence_stop(struct stasis_app_control *control)</div><div class="ttdoc">Stop playing silence to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00855">control.c:855</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a4a584f5ec1d637b285149ea0e2adda14"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a></div><div class="ttdeci">static int channel_state_invalid(struct stasis_app_control *control, struct ast_ari_response *response)</div><div class="ttdoc">Ensure channel is in a state that allows operation to be performed. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00108">resource_channels.c:108</a></div></div>
<div class="ttc" id="structast__ari__channels__stop__silence__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../db/d6d/structast__ari__channels__stop__silence__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_stop_silence_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00532">resource_channels.h:532</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aacc7d2140c3486c4450357c2e2ee8aae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacc7d2140c3486c4450357c2e2ee8aae">&#9670;&nbsp;</a></span>ast_ari_channels_unhold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_unhold </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/def/structast__ari__channels__unhold__args.html">ast_ari_channels_unhold_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a channel from hold. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00535">535</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00463">ast_ari_channels_unhold_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">channel_state_invalid()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00761">stasis_app_control_unhold()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l01484">ast_ari_channels_unhold_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;{</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../d3/def/structast__ari__channels__unhold__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <span class="comment">/* Response filled in by find_control */</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a>(control, response)) {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   }</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#a2719b9cb8ef3ef44ad550fc3818d7264">stasis_app_control_unhold</a>(control);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;}</div><div class="ttc" id="structast__ari__channels__unhold__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d3/def/structast__ari__channels__unhold__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_unhold_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00463">resource_channels.h:463</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a4a584f5ec1d637b285149ea0e2adda14"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a></div><div class="ttdeci">static int channel_state_invalid(struct stasis_app_control *control, struct ast_ari_response *response)</div><div class="ttdoc">Ensure channel is in a state that allows operation to be performed. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00108">resource_channels.c:108</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a2719b9cb8ef3ef44ad550fc3818d7264"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a2719b9cb8ef3ef44ad550fc3818d7264">stasis_app_control_unhold</a></div><div class="ttdeci">void stasis_app_control_unhold(struct stasis_app_control *control)</div><div class="ttdoc">Remove the channel associated with the control from hold. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00761">control.c:761</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5027aca3be026ac1616a3db34673ccae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5027aca3be026ac1616a3db34673ccae">&#9670;&nbsp;</a></span>ast_ari_channels_unmute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_channels_unmute </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d62/structast__ari__channels__unmute__args.html">ast_ari_channels_unmute_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unmute a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00445">445</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04937">AST_MUTE_DIRECTION_READ</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04938">AST_MUTE_DIRECTION_WRITE</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00424">ast_ari_channels_unmute_args::channel_id</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">channel_state_invalid()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00426">ast_ari_channels_unmute_args::direction</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">find_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00659">stasis_app_control_unmute()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l01354">ast_ari_channels_unmute_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;{</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> = 0;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">ast_frame_type</a> frametype = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   control = <a class="code" href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a>(response, args-&gt;<a class="code" href="../../d4/d62/structast__ari__channels__unmute__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a>(control, response)) {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d4/d62/structast__ari__channels__unmute__args.html#ae495ce4d65a6f5391715f97994829da1">direction</a>)) {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;         <span class="stringliteral">&quot;Direction is required&quot;</span>);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keywordflow">if</span> (!strcmp(args-&gt;<a class="code" href="../../d4/d62/structast__ari__channels__unmute__args.html#ae495ce4d65a6f5391715f97994829da1">direction</a>, <span class="stringliteral">&quot;in&quot;</span>)) {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      direction = <a class="code" href="../../d5/d7b/channel_8h.html#a74da52aac47a277801349e8577978a83">AST_MUTE_DIRECTION_READ</a>;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(args-&gt;<a class="code" href="../../d4/d62/structast__ari__channels__unmute__args.html#ae495ce4d65a6f5391715f97994829da1">direction</a>, <span class="stringliteral">&quot;out&quot;</span>)) {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      direction = <a class="code" href="../../d5/d7b/channel_8h.html#ace039a8191c129d7e16589790868210e">AST_MUTE_DIRECTION_WRITE</a>;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(args-&gt;<a class="code" href="../../d4/d62/structast__ari__channels__unmute__args.html#ae495ce4d65a6f5391715f97994829da1">direction</a>, <span class="stringliteral">&quot;both&quot;</span>)) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      direction = <a class="code" href="../../d5/d7b/channel_8h.html#a74da52aac47a277801349e8577978a83">AST_MUTE_DIRECTION_READ</a> | <a class="code" href="../../d5/d7b/channel_8h.html#ace039a8191c129d7e16589790868210e">AST_MUTE_DIRECTION_WRITE</a>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;         <span class="stringliteral">&quot;Invalid direction specified&quot;</span>);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#a221cfaccbc5c213fa0e56aacdc611669">stasis_app_control_unmute</a>(control, direction, frametype);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;}</div><div class="ttc" id="structast__ari__channels__unmute__args_html_ae495ce4d65a6f5391715f97994829da1"><div class="ttname"><a href="../../d4/d62/structast__ari__channels__unmute__args.html#ae495ce4d65a6f5391715f97994829da1">ast_ari_channels_unmute_args::direction</a></div><div class="ttdeci">const char * direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00426">resource_channels.h:426</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a221cfaccbc5c213fa0e56aacdc611669"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a221cfaccbc5c213fa0e56aacdc611669">stasis_app_control_unmute</a></div><div class="ttdeci">int stasis_app_control_unmute(struct stasis_app_control *control, unsigned int direction, enum ast_frame_type frametype)</div><div class="ttdoc">Unmute the channel associated with this control. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00659">control.c:659</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="channel_8h_html_ace039a8191c129d7e16589790868210e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ace039a8191c129d7e16589790868210e">AST_MUTE_DIRECTION_WRITE</a></div><div class="ttdeci">#define AST_MUTE_DIRECTION_WRITE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04938">channel.h:4938</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_a74da52aac47a277801349e8577978a83"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a74da52aac47a277801349e8577978a83">AST_MUTE_DIRECTION_READ</a></div><div class="ttdeci">#define AST_MUTE_DIRECTION_READ</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04937">channel.h:4937</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">ast_frame_type</a></div><div class="ttdeci">ast_frame_type</div><div class="ttdoc">Frame types. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00097">include/asterisk/frame.h:97</a></div></div>
<div class="ttc" id="structast__ari__channels__unmute__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d4/d62/structast__ari__channels__unmute__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_unmute_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00424">resource_channels.h:424</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a4a584f5ec1d637b285149ea0e2adda14"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a4a584f5ec1d637b285149ea0e2adda14">channel_state_invalid</a></div><div class="ttdeci">static int channel_state_invalid(struct stasis_app_control *control, struct ast_ari_response *response)</div><div class="ttdoc">Ensure channel is in a state that allows operation to be performed. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00108">resource_channels.c:108</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="resource__channels_8c_html_aa387156928d3e984b7baa570ca682f08"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#aa387156928d3e984b7baa570ca682f08">find_control</a></div><div class="ttdeci">static struct stasis_app_control * find_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l00152">resource_channels.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="func__frame__drop_8c_html_a99f26e6ee9fcd62f75203b5402df8098"><div class="ttname"><a href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8b/func__frame__drop_8c_source.html#l00137">func_frame_drop.c:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acc1511336d756ef90e6413691dc9bbd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc1511336d756ef90e6413691dc9bbd9">&#9670;&nbsp;</a></span>chan_data_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chan_data_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/da0/structari__channel__thread__data.html">ari_channel_thread_data</a> *&#160;</td>
          <td class="paramname"><em>chan_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01684">1684</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01680">ari_channel_thread_data::chan</a>, and <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01681">ari_channel_thread_data::stasis_stuff</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01698">ari_channel_thread()</a>, and <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01778">ast_ari_channels_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;{</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(chan_data-&gt;<a class="code" href="../../db/da0/structari__channel__thread__data.html#a6027dcdb9ce70b0f1a8fa96f965e0f1d">stasis_stuff</a>);</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(chan_data-&gt;<a class="code" href="../../db/da0/structari__channel__thread__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(chan_data);</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;}</div><div class="ttc" id="structari__channel__thread__data_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../db/da0/structari__channel__thread__data.html#a84d1435c5b8d387806714ea7079304b7">ari_channel_thread_data::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01680">resource_channels.c:1680</a></div></div>
<div class="ttc" id="structari__channel__thread__data_html_a6027dcdb9ce70b0f1a8fa96f965e0f1d"><div class="ttname"><a href="../../db/da0/structari__channel__thread__data.html#a6027dcdb9ce70b0f1a8fa96f965e0f1d">ari_channel_thread_data::stasis_stuff</a></div><div class="ttdeci">struct ast_str * stasis_stuff</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01681">resource_channels.c:1681</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a584f5ec1d637b285149ea0e2adda14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a584f5ec1d637b285149ea0e2adda14">&#9670;&nbsp;</a></span>channel_state_invalid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int channel_state_invalid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *&#160;</td>
          <td class="paramname"><em>control</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Ensure channel is in a state that allows operation to be performed. </p>
<p>Since Asterisk 14, it has been possible for down channels, as well as unanswered outbound channels to enter Stasis. While some operations are fine to perform on such channels, operations that</p>
<ul>
<li>Attempt to manipulate channel state</li>
<li>Attempt to play media</li>
<li>Attempt to control the channel's location in the dialplan</li>
</ul>
<p>are invalid. This function can be used to determine if the channel is in an appropriate state.</p>
<dl class="section note"><dt>Note</dt><dd>When this function returns an error, the HTTP response is taken care of.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">control</td><td>The app control </td></tr>
    <tr><td class="paramname">response</td><td>Response to fill in if there is an error</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Channel is in a valid state. Continue on! </td></tr>
    <tr><td class="paramname">non-zero</td><td>Channel is in an invalid state. Bail! </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00108">108</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00036">AST_STATE_DOWN</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00037">AST_STATE_RESERVED</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00041">AST_STATE_RINGING</a>, <a class="el" href="../../de/de3/control_8c_source.html#l00860">stasis_app_control_get_snapshot()</a>, and <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00153">ast_channel_snapshot::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00636">ari_channels_handle_play()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00338">ast_ari_channels_answer()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00180">ast_ari_channels_continue_in_dialplan()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00514">ast_ari_channels_hold()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00403">ast_ari_channels_mute()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00276">ast_ari_channels_redirect()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00363">ast_ari_channels_ring()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00383">ast_ari_channels_ring_stop()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00487">ast_ari_channels_send_dtmf()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00556">ast_ari_channels_start_moh()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00596">ast_ari_channels_start_silence()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00576">ast_ari_channels_stop_moh()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00616">ast_ari_channels_stop_silence()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00535">ast_ari_channels_unhold()</a>, and <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00445">ast_ari_channels_unmute()</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *snapshot;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   snapshot = <a class="code" href="../../d8/d9c/stasis__app_8h.html#a2e17c5418a4753bb1229f031041a645c">stasis_app_control_get_snapshot</a>(control);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;   <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 404, <span class="stringliteral">&quot;Not Found&quot;</span>, <span class="stringliteral">&quot;Channel not found&quot;</span>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   <span class="comment">/* These channel states apply only to outbound channels:</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">    * - Down: Channel has been created, and nothing else has been done</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">    * - Reserved: For a PRI, an underlying B-channel is reserved,</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">    *   but the channel is not yet dialed</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">    * - Ringing: The channel has been dialed.</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">    * This does not affect inbound channels. Inbound channels, when they</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">    * enter the dialplan, are in the &quot;Ring&quot; state. If they have already</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">    * been answered, then they are in the &quot;Up&quot; state.</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   <span class="keywordflow">if</span> (snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">state</a> == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      || snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">state</a> == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      || snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">state</a> == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a>) {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 412, <span class="stringliteral">&quot;Precondition Failed&quot;</span>,</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;         <span class="stringliteral">&quot;Channel in invalid state&quot;</span>);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div><div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00036">channelstate.h:36</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00037">channelstate.h:37</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a2e17c5418a4753bb1229f031041a645c"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a2e17c5418a4753bb1229f031041a645c">stasis_app_control_get_snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * stasis_app_control_get_snapshot(const struct stasis_app_control *control)</div><div class="ttdoc">Returns the most recent snapshot for the associated channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00860">control.c:860</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00041">channelstate.h:41</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab772a54f7effa7ab06616e36ae30988a"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">ast_channel_snapshot::state</a></div><div class="ttdeci">enum ast_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00153">stasis_channels.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aac739d5c5082c4bd26cb5032fbcb4ec5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac739d5c5082c4bd26cb5032fbcb4ec5">&#9670;&nbsp;</a></span>convert_reason_to_hangup_code()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int convert_reason_to_hangup_code </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>reason</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the corresponded hangup code of the given reason. </p>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00053">53</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/da3/causes_8h_source.html#l00113">AST_CAUSE_ANSWERED_ELSEWHERE</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00129">AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00148">AST_CAUSE_BUSY</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00110">AST_CAUSE_CALL_REJECTED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00152">AST_CAUSE_CONGESTION</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00149">AST_CAUSE_FAILURE</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00145">AST_CAUSE_INTERWORKING</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00115">AST_CAUSE_INVALID_NUMBER_FORMAT</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00107">AST_CAUSE_NO_USER_RESPONSE</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00151">AST_CAUSE_NOANSWER</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00150">AST_CAUSE_NORMAL</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00118">AST_CAUSE_NORMAL_UNSPECIFIED</a>, and <a class="el" href="../../d4/da3/causes_8h_source.html#l00097">AST_CAUSE_UNALLOCATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00907">ast_ari_channels_hangup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;{</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;   <span class="keywordflow">if</span> (!strcmp(reason, <span class="stringliteral">&quot;normal&quot;</span>)) {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a7858ab2ba4858d98e29f0ea54980313c">AST_CAUSE_NORMAL</a>;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(reason, <span class="stringliteral">&quot;busy&quot;</span>)) {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#ae009c193522491f7de7ea28b23f20868">AST_CAUSE_BUSY</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(reason, <span class="stringliteral">&quot;congestion&quot;</span>)) {</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a0a35518d7b448a53da368cf57f354fba">AST_CAUSE_CONGESTION</a>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(reason, <span class="stringliteral">&quot;no_answer&quot;</span>)) {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#ac00a04f4e8f0b1967f94dcd5959e428e">AST_CAUSE_NOANSWER</a>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(reason, <span class="stringliteral">&quot;timeout&quot;</span>)) {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a5310fd2a65b78fb6840b0e3e883a2470">AST_CAUSE_NO_USER_RESPONSE</a>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(reason, <span class="stringliteral">&quot;rejected&quot;</span>)) {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a9900b24b261c275bb54631f16d4d38cc">AST_CAUSE_CALL_REJECTED</a>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(reason, <span class="stringliteral">&quot;unallocated&quot;</span>)) {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(reason, <span class="stringliteral">&quot;normal_unspecified&quot;</span>)) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#aadcc0ede679137ef3a3ed4472b974ee8">AST_CAUSE_NORMAL_UNSPECIFIED</a>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(reason, <span class="stringliteral">&quot;number_incomplete&quot;</span>)) {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a29549b982646ee60f116fc4f55c711e5">AST_CAUSE_INVALID_NUMBER_FORMAT</a>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(reason, <span class="stringliteral">&quot;codec_mismatch&quot;</span>)) {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a208e4fc34932b91fc9e90d9008329e87">AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</a>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(reason, <span class="stringliteral">&quot;interworking&quot;</span>)) {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(reason, <span class="stringliteral">&quot;failure&quot;</span>)) {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a45c0c189b93333bad969b8f371d8442d">AST_CAUSE_FAILURE</a>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(reason, <span class="stringliteral">&quot;answered_elsewhere&quot;</span>)) {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#aa71419a0c598e31312477c5a644e7440">AST_CAUSE_ANSWERED_ELSEWHERE</a>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   }</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div><div class="ttc" id="causes_8h_html_a131d8780af378d0c4ef5075949902785"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a></div><div class="ttdeci">#define AST_CAUSE_UNALLOCATED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00097">causes.h:97</a></div></div>
<div class="ttc" id="causes_8h_html_a5310fd2a65b78fb6840b0e3e883a2470"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a5310fd2a65b78fb6840b0e3e883a2470">AST_CAUSE_NO_USER_RESPONSE</a></div><div class="ttdeci">#define AST_CAUSE_NO_USER_RESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00107">causes.h:107</a></div></div>
<div class="ttc" id="causes_8h_html_a29549b982646ee60f116fc4f55c711e5"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a29549b982646ee60f116fc4f55c711e5">AST_CAUSE_INVALID_NUMBER_FORMAT</a></div><div class="ttdeci">#define AST_CAUSE_INVALID_NUMBER_FORMAT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00115">causes.h:115</a></div></div>
<div class="ttc" id="causes_8h_html_aa71419a0c598e31312477c5a644e7440"><div class="ttname"><a href="../../d4/da3/causes_8h.html#aa71419a0c598e31312477c5a644e7440">AST_CAUSE_ANSWERED_ELSEWHERE</a></div><div class="ttdeci">#define AST_CAUSE_ANSWERED_ELSEWHERE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00113">causes.h:113</a></div></div>
<div class="ttc" id="causes_8h_html_ac00a04f4e8f0b1967f94dcd5959e428e"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ac00a04f4e8f0b1967f94dcd5959e428e">AST_CAUSE_NOANSWER</a></div><div class="ttdeci">#define AST_CAUSE_NOANSWER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00151">causes.h:151</a></div></div>
<div class="ttc" id="causes_8h_html_a7858ab2ba4858d98e29f0ea54980313c"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a7858ab2ba4858d98e29f0ea54980313c">AST_CAUSE_NORMAL</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00150">causes.h:150</a></div></div>
<div class="ttc" id="causes_8h_html_a45c0c189b93333bad969b8f371d8442d"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a45c0c189b93333bad969b8f371d8442d">AST_CAUSE_FAILURE</a></div><div class="ttdeci">#define AST_CAUSE_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00149">causes.h:149</a></div></div>
<div class="ttc" id="causes_8h_html_aadcc0ede679137ef3a3ed4472b974ee8"><div class="ttname"><a href="../../d4/da3/causes_8h.html#aadcc0ede679137ef3a3ed4472b974ee8">AST_CAUSE_NORMAL_UNSPECIFIED</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00118">causes.h:118</a></div></div>
<div class="ttc" id="causes_8h_html_a13666e22c99b4ccda92e6e1431368474"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a></div><div class="ttdeci">#define AST_CAUSE_INTERWORKING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00145">causes.h:145</a></div></div>
<div class="ttc" id="causes_8h_html_ae009c193522491f7de7ea28b23f20868"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ae009c193522491f7de7ea28b23f20868">AST_CAUSE_BUSY</a></div><div class="ttdeci">#define AST_CAUSE_BUSY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00148">causes.h:148</a></div></div>
<div class="ttc" id="causes_8h_html_a9900b24b261c275bb54631f16d4d38cc"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a9900b24b261c275bb54631f16d4d38cc">AST_CAUSE_CALL_REJECTED</a></div><div class="ttdeci">#define AST_CAUSE_CALL_REJECTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00110">causes.h:110</a></div></div>
<div class="ttc" id="causes_8h_html_a208e4fc34932b91fc9e90d9008329e87"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a208e4fc34932b91fc9e90d9008329e87">AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</a></div><div class="ttdeci">#define AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00129">causes.h:129</a></div></div>
<div class="ttc" id="causes_8h_html_a0a35518d7b448a53da368cf57f354fba"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a0a35518d7b448a53da368cf57f354fba">AST_CAUSE_CONGESTION</a></div><div class="ttdeci">#define AST_CAUSE_CONGESTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00152">causes.h:152</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa9ffeec3f2fc137675ad6e02f3e1599d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9ffeec3f2fc137675ad6e02f3e1599d">&#9670;&nbsp;</a></span>external_media_audiosocket_tcp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void external_media_audiosocket_tcp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d79/structast__ari__channels__external__media__args.html">ast_ari_channels_external_media_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>variables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l02128">2128</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00834">ast_ari_channels_external_media_args::app</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01063">ari_channels_handle_originate_with_id()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00932">ast_channel_varshead()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00843">ast_json_channel_vars()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00404">ast_json_object_set()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00832">ast_ari_channels_external_media_args::channel_id</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00850">ast_ari_channels_external_media_args::data</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00838">ast_ari_channels_external_media_args::external_host</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00846">ast_ari_channels_external_media_args::format</a>, <a class="el" href="../../d4/d59/ari_8h_source.html#l00093">ast_ari_response::message</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l02176">ast_ari_channels_external_media()</a>.</p>
<div class="fragment"><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;{</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;   <span class="keywordtype">size_t</span> endpoint_len;</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;   <span class="keywordtype">char</span> *endpoint;</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *vars;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;   endpoint_len = strlen(<span class="stringliteral">&quot;AudioSocket/&quot;</span>) + strlen(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a6649fc2868238ab5d8001361c57bbfe4">external_host</a>) + 1 + strlen(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>) + 1;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;   endpoint = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(endpoint_len);</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;   <span class="comment">/* The UUID is stored in the arbitrary data field */</span></div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;   snprintf(endpoint, endpoint_len, <span class="stringliteral">&quot;AudioSocket/%s/%s&quot;</span>, args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a6649fc2868238ab5d8001361c57bbfe4">external_host</a>, args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>);</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;   chan = <a class="code" href="../../da/d49/resource__channels_8c.html#adabbeff7b065e96d9fcbda18e9b767d6">ari_channels_handle_originate_with_id</a>(</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;      endpoint,</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      0,</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;      args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">app</a>,</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;      0,</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;      variables,</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;      args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>,</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;      args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a6bd2bb5fcc7628a640958994a22f997c">format</a>,</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      response);</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(variables);</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;   }</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;   vars = <a class="code" href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a>(chan);</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;   <span class="keywordflow">if</span> (vars &amp;&amp; !<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(vars)) {</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(response-&gt;<a class="code" href="../../dd/d52/structast__ari__response.html#a663c6c3c5ec964a0f09426ddf7aa037b">message</a>, <span class="stringliteral">&quot;channelvars&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a24ac40f69237964485b0efb1d28fd0cc">ast_json_channel_vars</a>(vars));</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;   }</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a6bd2bb5fcc7628a640958994a22f997c"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a6bd2bb5fcc7628a640958994a22f997c">ast_ari_channels_external_media_args::format</a></div><div class="ttdeci">const char * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00846">resource_channels.h:846</a></div></div>
<div class="ttc" id="resource__channels_8c_html_adabbeff7b065e96d9fcbda18e9b767d6"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#adabbeff7b065e96d9fcbda18e9b767d6">ari_channels_handle_originate_with_id</a></div><div class="ttdeci">static struct ast_channel * ari_channels_handle_originate_with_id(const char *args_endpoint, const char *args_extension, const char *args_context, long args_priority, const char *args_label, const char *args_app, const char *args_app_args, const char *args_caller_id, int args_timeout, struct ast_variable *variables, const char *args_channel_id, const char *args_other_channel_id, const char *args_originator, const char *args_formats, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01063">resource_channels.c:1063</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="channel_8h_html_add6255866ea1651a90cf70d963c4920a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a></div><div class="ttdeci">struct varshead * ast_channel_varshead(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00932">channel_internal_api.c:932</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_external_media_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00832">resource_channels.h:832</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a8f64897c7ccc5c13f276d1d07c4e7095">ast_ari_channels_external_media_args::data</a></div><div class="ttdeci">const char * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00850">resource_channels.h:850</a></div></div>
<div class="ttc" id="json_8h_html_abc8b563c172cfaffa2b555195990f729"><div class="ttname"><a href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a></div><div class="ttdeci">int ast_json_object_set(struct ast_json *object, const char *key, struct ast_json *value)</div><div class="ttdoc">Set a field in a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00404">json.c:404</a></div></div>
<div class="ttc" id="json_8h_html_a24ac40f69237964485b0efb1d28fd0cc"><div class="ttname"><a href="../../d4/d05/json_8h.html#a24ac40f69237964485b0efb1d28fd0cc">ast_json_channel_vars</a></div><div class="ttdeci">struct ast_json * ast_json_channel_vars(struct varshead *channelvars)</div><div class="ttdoc">Construct a JSON object from a ast_var_t list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00843">json.c:843</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="structvarshead_html"><div class="ttname"><a href="../../dd/de6/structvarshead.html">varshead</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00034">chanvars.h:34</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a6649fc2868238ab5d8001361c57bbfe4"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a6649fc2868238ab5d8001361c57bbfe4">ast_ari_channels_external_media_args::external_host</a></div><div class="ttdeci">const char * external_host</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00838">resource_channels.h:838</a></div></div>
<div class="ttc" id="structast__ari__response_html_a663c6c3c5ec964a0f09426ddf7aa037b"><div class="ttname"><a href="../../dd/d52/structast__ari__response.html#a663c6c3c5ec964a0f09426ddf7aa037b">ast_ari_response::message</a></div><div class="ttdeci">struct ast_json * message</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d59/ari_8h_source.html#l00093">ari.h:93</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a83a793edb3d6a3a15f2a7fc99ffe8c90"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">ast_ari_channels_external_media_args::app</a></div><div class="ttdeci">const char * app</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00834">resource_channels.h:834</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adda4979bdaa42a510f1d0cdce1203335"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adda4979bdaa42a510f1d0cdce1203335">&#9670;&nbsp;</a></span>external_media_rtp_udp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void external_media_rtp_udp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d79/structast__ari__channels__external__media__args.html">ast_ari_channels_external_media_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>variables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l02084">2084</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00834">ast_ari_channels_external_media_args::app</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01063">ari_channels_handle_originate_with_id()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00932">ast_channel_varshead()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00843">ast_json_channel_vars()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00404">ast_json_object_set()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00832">ast_ari_channels_external_media_args::channel_id</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00838">ast_ari_channels_external_media_args::external_host</a>, <a class="el" href="../../d0/d12/resource__channels_8h_source.html#l00846">ast_ari_channels_external_media_args::format</a>, <a class="el" href="../../d4/d59/ari_8h_source.html#l00093">ast_ari_response::message</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l02176">ast_ari_channels_external_media()</a>.</p>
<div class="fragment"><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;{</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;   <span class="keywordtype">size_t</span> endpoint_len;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;   <span class="keywordtype">char</span> *endpoint;</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *vars;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;   endpoint_len = strlen(<span class="stringliteral">&quot;UnicastRTP/&quot;</span>) + strlen(args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a6649fc2868238ab5d8001361c57bbfe4">external_host</a>) + 1;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;   endpoint = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(endpoint_len);</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;   snprintf(endpoint, endpoint_len, <span class="stringliteral">&quot;UnicastRTP/%s&quot;</span>, args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a6649fc2868238ab5d8001361c57bbfe4">external_host</a>);</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;   chan = <a class="code" href="../../da/d49/resource__channels_8c.html#adabbeff7b065e96d9fcbda18e9b767d6">ari_channels_handle_originate_with_id</a>(</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;      endpoint,</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      0,</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">app</a>,</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;      0,</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;      variables,</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>,</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;      args-&gt;<a class="code" href="../../d4/d79/structast__ari__channels__external__media__args.html#a6bd2bb5fcc7628a640958994a22f997c">format</a>,</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      response);</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(variables);</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;   }</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;   vars = <a class="code" href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a>(chan);</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;   <span class="keywordflow">if</span> (vars &amp;&amp; !<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(vars)) {</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(response-&gt;<a class="code" href="../../dd/d52/structast__ari__response.html#a663c6c3c5ec964a0f09426ddf7aa037b">message</a>, <span class="stringliteral">&quot;channelvars&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a24ac40f69237964485b0efb1d28fd0cc">ast_json_channel_vars</a>(vars));</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;   }</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a6bd2bb5fcc7628a640958994a22f997c"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a6bd2bb5fcc7628a640958994a22f997c">ast_ari_channels_external_media_args::format</a></div><div class="ttdeci">const char * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00846">resource_channels.h:846</a></div></div>
<div class="ttc" id="resource__channels_8c_html_adabbeff7b065e96d9fcbda18e9b767d6"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#adabbeff7b065e96d9fcbda18e9b767d6">ari_channels_handle_originate_with_id</a></div><div class="ttdeci">static struct ast_channel * ari_channels_handle_originate_with_id(const char *args_endpoint, const char *args_extension, const char *args_context, long args_priority, const char *args_label, const char *args_app, const char *args_app_args, const char *args_caller_id, int args_timeout, struct ast_variable *variables, const char *args_channel_id, const char *args_other_channel_id, const char *args_originator, const char *args_formats, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01063">resource_channels.c:1063</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="channel_8h_html_add6255866ea1651a90cf70d963c4920a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a></div><div class="ttdeci">struct varshead * ast_channel_varshead(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00932">channel_internal_api.c:932</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_channels_external_media_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00832">resource_channels.h:832</a></div></div>
<div class="ttc" id="json_8h_html_abc8b563c172cfaffa2b555195990f729"><div class="ttname"><a href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a></div><div class="ttdeci">int ast_json_object_set(struct ast_json *object, const char *key, struct ast_json *value)</div><div class="ttdoc">Set a field in a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00404">json.c:404</a></div></div>
<div class="ttc" id="json_8h_html_a24ac40f69237964485b0efb1d28fd0cc"><div class="ttname"><a href="../../d4/d05/json_8h.html#a24ac40f69237964485b0efb1d28fd0cc">ast_json_channel_vars</a></div><div class="ttdeci">struct ast_json * ast_json_channel_vars(struct varshead *channelvars)</div><div class="ttdoc">Construct a JSON object from a ast_var_t list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00843">json.c:843</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="structvarshead_html"><div class="ttname"><a href="../../dd/de6/structvarshead.html">varshead</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00034">chanvars.h:34</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a6649fc2868238ab5d8001361c57bbfe4"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a6649fc2868238ab5d8001361c57bbfe4">ast_ari_channels_external_media_args::external_host</a></div><div class="ttdeci">const char * external_host</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00838">resource_channels.h:838</a></div></div>
<div class="ttc" id="structast__ari__response_html_a663c6c3c5ec964a0f09426ddf7aa037b"><div class="ttname"><a href="../../dd/d52/structast__ari__response.html#a663c6c3c5ec964a0f09426ddf7aa037b">ast_ari_response::message</a></div><div class="ttdeci">struct ast_json * message</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d59/ari_8h_source.html#l00093">ari.h:93</a></div></div>
<div class="ttc" id="structast__ari__channels__external__media__args_html_a83a793edb3d6a3a15f2a7fc99ffe8c90"><div class="ttname"><a href="../../d4/d79/structast__ari__channels__external__media__args.html#a83a793edb3d6a3a15f2a7fc99ffe8c90">ast_ari_channels_external_media_args::app</a></div><div class="ttdeci">const char * app</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d12/resource__channels_8h_source.html#l00834">resource_channels.h:834</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa387156928d3e984b7baa570ca682f08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa387156928d3e984b7baa570ca682f08">&#9670;&nbsp;</a></span>find_control()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a>* find_control </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds the control object for a channel, filling the response with an error, if appropriate. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>Response to fill with an error if control is not found. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">channel_id</td><td>ID of the channel to lookup. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Channel control object. </dd>
<dd>
<code>NULL</code> if control object does not exist. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00152">152</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00349">stasis_app_control_find_by_channel_id()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00636">ari_channels_handle_play()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00338">ast_ari_channels_answer()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00180">ast_ari_channels_continue_in_dialplan()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01939">ast_ari_channels_dial()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00514">ast_ari_channels_hold()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00256">ast_ari_channels_move()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00403">ast_ari_channels_mute()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00748">ast_ari_channels_record()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00276">ast_ari_channels_redirect()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00363">ast_ari_channels_ring()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00383">ast_ari_channels_ring_stop()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00487">ast_ari_channels_send_dtmf()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01541">ast_ari_channels_set_channel_var()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00556">ast_ari_channels_start_moh()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00596">ast_ari_channels_start_silence()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00576">ast_ari_channels_stop_moh()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00616">ast_ari_channels_stop_silence()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00535">ast_ari_channels_unhold()</a>, and <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00445">ast_ari_channels_unmute()</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;{</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(response != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   control = <a class="code" href="../../d8/d9c/stasis__app_8h.html#abd4e1e822068e3e8dffa74bcbd8235f9">stasis_app_control_find_by_channel_id</a>(channel_id);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="comment">/* Distinguish between 404 and 409 errors */</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(channel_id);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">if</span> (chan == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 404, <span class="stringliteral">&quot;Not Found&quot;</span>,</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;               <span class="stringliteral">&quot;Channel not found&quot;</span>);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      }</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 409, <span class="stringliteral">&quot;Conflict&quot;</span>,</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="stringliteral">&quot;Channel not in Stasis application&quot;</span>);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(control, +1);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   <span class="keywordflow">return</span> control;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="stasis__app_8h_html_abd4e1e822068e3e8dffa74bcbd8235f9"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#abd4e1e822068e3e8dffa74bcbd8235f9">stasis_app_control_find_by_channel_id</a></div><div class="ttdeci">struct stasis_app_control * stasis_app_control_find_by_channel_id(const char *channel_id)</div><div class="ttdoc">Returns the handler for the channel with the given id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l00349">res_stasis.c:349</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a61d455b941bd7ebf96bcbf5532fefe07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61d455b941bd7ebf96bcbf5532fefe07">&#9670;&nbsp;</a></span>json_to_ast_variables()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int json_to_ast_variables </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td>
          <td class="paramname"><em>json_variables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> **&#160;</td>
          <td class="paramname"><em>variables</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01373">1373</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00298">ast_ari_response_alloc_failed()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00797">ast_json_to_ast_variables()</a>, <a class="el" href="../../d4/d05/json_8h_source.html#l01058">AST_JSON_TO_AST_VARS_CODE_INVALID_TYPE</a>, <a class="el" href="../../d4/d05/json_8h_source.html#l01060">AST_JSON_TO_AST_VARS_CODE_OOM</a>, <a class="el" href="../../d4/d05/json_8h_source.html#l01053">AST_JSON_TO_AST_VARS_CODE_SUCCESS</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00290">AST_LOG_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01778">ast_ari_channels_create()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l02176">ast_ari_channels_external_media()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01433">ast_ari_channels_originate()</a>, and <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01394">ast_ari_channels_originate_with_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;{</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d4/d05/json_8h.html#ac80ceaebad81ab2311bdf1f892cb0e91">ast_json_to_ast_vars_code</a> res;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;   res = <a class="code" href="../../d4/d05/json_8h.html#acf18f2800cf2e2ad2c950551c764e952">ast_json_to_ast_variables</a>(json_variables, variables);</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   <span class="keywordflow">switch</span> (res) {</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d05/json_8h.html#ac80ceaebad81ab2311bdf1f892cb0e91ab0242d4602ed455481c47e6dabed7cad">AST_JSON_TO_AST_VARS_CODE_SUCCESS</a>:</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d05/json_8h.html#ac80ceaebad81ab2311bdf1f892cb0e91a5277ae653888a7336ad45526dfb20731">AST_JSON_TO_AST_VARS_CODE_INVALID_TYPE</a>:</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;         <span class="stringliteral">&quot;Only string values in the &#39;variables&#39; object allowed&quot;</span>);</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d05/json_8h.html#ac80ceaebad81ab2311bdf1f892cb0e91ad738fa2b5635f8f20fc521389cdced82">AST_JSON_TO_AST_VARS_CODE_OOM</a>:</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;   }</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to convert &#39;variables&#39; in JSON body to channel variables\n&quot;</span>);</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;}</div><div class="ttc" id="ari_8h_html_aa6503090da6366cef1eae5556e27b352"><div class="ttname"><a href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a></div><div class="ttdeci">void ast_ari_response_alloc_failed(struct ast_ari_response *response)</div><div class="ttdoc">Fill in response with a 500 message for allocation failures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00298">res_ari.c:298</a></div></div>
<div class="ttc" id="json_8h_html_ac80ceaebad81ab2311bdf1f892cb0e91a5277ae653888a7336ad45526dfb20731"><div class="ttname"><a href="../../d4/d05/json_8h.html#ac80ceaebad81ab2311bdf1f892cb0e91a5277ae653888a7336ad45526dfb20731">AST_JSON_TO_AST_VARS_CODE_INVALID_TYPE</a></div><div class="ttdoc">Conversion failed because invalid value type supplied. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l01058">json.h:1058</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_a2fdd5bff193a29ec6c7278da2851ea56"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a></div><div class="ttdeci">#define AST_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00290">logger.h:290</a></div></div>
<div class="ttc" id="json_8h_html_ac80ceaebad81ab2311bdf1f892cb0e91ab0242d4602ed455481c47e6dabed7cad"><div class="ttname"><a href="../../d4/d05/json_8h.html#ac80ceaebad81ab2311bdf1f892cb0e91ab0242d4602ed455481c47e6dabed7cad">AST_JSON_TO_AST_VARS_CODE_SUCCESS</a></div><div class="ttdoc">Conversion successful. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l01053">json.h:1053</a></div></div>
<div class="ttc" id="json_8h_html_acf18f2800cf2e2ad2c950551c764e952"><div class="ttname"><a href="../../d4/d05/json_8h.html#acf18f2800cf2e2ad2c950551c764e952">ast_json_to_ast_variables</a></div><div class="ttdeci">enum ast_json_to_ast_vars_code ast_json_to_ast_variables(struct ast_json *json_variables, struct ast_variable **variables)</div><div class="ttdoc">Convert a ast_json list of key/value pair tuples into a ast_variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00797">json.c:797</a></div></div>
<div class="ttc" id="json_8h_html_ac80ceaebad81ab2311bdf1f892cb0e91ad738fa2b5635f8f20fc521389cdced82"><div class="ttname"><a href="../../d4/d05/json_8h.html#ac80ceaebad81ab2311bdf1f892cb0e91ad738fa2b5635f8f20fc521389cdced82">AST_JSON_TO_AST_VARS_CODE_OOM</a></div><div class="ttdoc">Conversion failed because of allocation failure. (Out Of Memory) </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l01060">json.h:1060</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="json_8h_html_ac80ceaebad81ab2311bdf1f892cb0e91"><div class="ttname"><a href="../../d4/d05/json_8h.html#ac80ceaebad81ab2311bdf1f892cb0e91">ast_json_to_ast_vars_code</a></div><div class="ttdeci">ast_json_to_ast_vars_code</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l01051">json.h:1051</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0b2777ad2a9db2b9c6ccf6dc154d4bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b2777ad2a9db2b9c6ccf6dc154d4bda">&#9670;&nbsp;</a></span>restore_dialstring()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* restore_dialstring </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the dialstring from the channel datastore. </p>
<dl class="section pre"><dt>Precondition</dt><dd>chan is locked </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel that was previously created in ARI </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failed to find datastore </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The dialstring </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01766">1766</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l02404">ast_channel_datastore_find()</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00070">ast_datastore::data</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01939">ast_ari_channels_dial()</a>.</p>
<div class="fragment"><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;{</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;   datastore = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;<a class="code" href="../../da/d49/resource__channels_8c.html#a6f1baa247f4fa0cb280191a9607e4ab0">dialstring_info</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;   <span class="keywordflow">if</span> (!datastore) {</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;   }</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;   <span class="keywordflow">return</span> datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;}</div><div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="channel_8h_html_aad1e09cd7c79237d05cffb45d6cdfd7c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a></div><div class="ttdeci">struct ast_datastore * ast_channel_datastore_find(struct ast_channel *chan, const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Find a datastore on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02404">channel.c:2404</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a6f1baa247f4fa0cb280191a9607e4ab0"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a6f1baa247f4fa0cb280191a9607e4ab0">dialstring_info</a></div><div class="ttdeci">struct ast_datastore_info dialstring_info</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01717">resource_channels.c:1717</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b84e505ab86638f12468c497a390d64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b84e505ab86638f12468c497a390d64">&#9670;&nbsp;</a></span>save_dialstring()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int save_dialstring </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dialstring</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save dialstring onto a channel datastore. </p>
<p>This will later be retrieved when it comes time to actually dial the channel</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>The channel on which to save the dialstring </td></tr>
    <tr><td class="paramname">dialstring</td><td>The dialstring to save </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>SUCCESS!  -1 Failure :( </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01732">1732</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l02390">ast_channel_datastore_add()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00089">ast_datastore_alloc</a>, <a class="el" href="../../d7/d7a/datastore_8c_source.html#l00068">ast_datastore_free()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00070">ast_datastore::data</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01778">ast_ari_channels_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;{</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;   datastore = <a class="code" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a>(&amp;<a class="code" href="../../da/d49/resource__channels_8c.html#a6f1baa247f4fa0cb280191a9607e4ab0">dialstring_info</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;   <span class="keywordflow">if</span> (!datastore) {</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   }</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(dialstring);</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;   <span class="keywordflow">if</span> (!datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>) {</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(datastore);</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;   }</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a>(chan, datastore)) {</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(datastore);</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;   }</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="resource__channels_8c_html_a6f1baa247f4fa0cb280191a9607e4ab0"><div class="ttname"><a href="../../da/d49/resource__channels_8c.html#a6f1baa247f4fa0cb280191a9607e4ab0">dialstring_info</a></div><div class="ttdeci">struct ast_datastore_info dialstring_info</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d49/resource__channels_8c_source.html#l01717">resource_channels.c:1717</a></div></div>
<div class="ttc" id="datastore_8h_html_aee27286888b30c6448a9bce928040a14"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a></div><div class="ttdeci">int ast_datastore_free(struct ast_datastore *datastore)</div><div class="ttdoc">Free a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00068">datastore.c:68</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
<div class="ttc" id="datastore_8h_html_a666afb07fd77d50782cc10f83e029159"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a></div><div class="ttdeci">#define ast_datastore_alloc(info, uid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00089">datastore.h:89</a></div></div>
<div class="ttc" id="channel_8h_html_a1ed3e98d33d5587948a0e2ef67a81f52"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a></div><div class="ttdeci">int ast_channel_datastore_add(struct ast_channel *chan, struct ast_datastore *datastore)</div><div class="ttdoc">Add a datastore to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02390">channel.c:2390</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a6f1baa247f4fa0cb280191a9607e4ab0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f1baa247f4fa0cb280191a9607e4ab0">&#9670;&nbsp;</a></span>dialstring_info</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> dialstring_info</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .type = <span class="stringliteral">&quot;ARI Dialstring&quot;</span>,</div><div class="line">   .destroy = <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>,</div><div class="line">}</div><div class="ttc" id="astmm_8h_html_ad42ab843b767e8b57162c10a158b75c3"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a></div><div class="ttdeci">void ast_free_ptr(void *ptr)</div><div class="ttdoc">free() wrapper </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01771">astmm.c:1771</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01717">1717</a> of file <a class="el" href="../../da/d49/resource__channels_8c_source.html">resource_channels.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:42 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
