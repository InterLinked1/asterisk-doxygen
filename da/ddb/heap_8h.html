<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: heap.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">heap.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Max Heap data structure.  
<a href="#details">More...</a></p>
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/de5/heap_8h__dep__incl.png" border="0" usemap="#heap_8hdep" alt=""/></div>
<map name="heap_8hdep" id="heap_8hdep">
<area shape="rect" id="node2" href="../../d0/d95/bridge_8c.html" title="Bridging API. " alt="" coords="5,87,79,114"/>
<area shape="rect" id="node3" href="../../d3/d32/bridge__channel_8c.html" title="Bridging Channel API. " alt="" coords="103,87,234,114"/>
<area shape="rect" id="node4" href="../../d2/d29/heap_8c.html" title="Max Heap data structure. " alt="" coords="259,87,324,114"/>
<area shape="rect" id="node5" href="../../db/dbe/sched_8c.html" title="Scheduler Routines (from cheops&#45;NG) " alt="" coords="348,87,419,114"/>
<area shape="rect" id="node6" href="../../d3/d62/timing_8c.html" title="Timing source management. " alt="" coords="443,87,516,114"/>
<area shape="rect" id="node7" href="../../d7/d30/res__sorcery__memory__cache_8c.html" title="Sorcery Memory Cache Object Wizard. " alt="" coords="541,80,698,121"/>
<area shape="rect" id="node8" href="../../d3/d2b/test__heap_8c.html" title="Heap data structure test module. " alt="" coords="723,87,820,114"/>
</map>
</div>
</div>
<p><a href="../../da/ddb/heap_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a42b42e04887dbc86276e590141147f63"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#a42b42e04887dbc86276e590141147f63">ast_heap_create</a>(init_height,  cmp_fn,  index_offset)&#160;&#160;&#160;<a class="el" href="../../d2/d29/heap_8c.html#a91c732ae0964da15f302b56bfe1ce828">_ast_heap_create</a>(init_height, cmp_fn, index_offset, __FILE__, __LINE__, __PRETTY_FUNCTION__)</td></tr>
<tr class="separator:a42b42e04887dbc86276e590141147f63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad181f4df20e6039b37e1b8d128884a81"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#ad181f4df20e6039b37e1b8d128884a81">ast_heap_push</a>(h,  elm)&#160;&#160;&#160;<a class="el" href="../../d2/d29/heap_8c.html#ae9f7cce6a38c06261a19daf96495ff61">_ast_heap_push</a>(h, elm, __FILE__, __LINE__, __PRETTY_FUNCTION__)</td></tr>
<tr class="separator:ad181f4df20e6039b37e1b8d128884a81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa917a69fe7f03085dfef14b0af804eff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#aa917a69fe7f03085dfef14b0af804eff">ast_heap_rdlock</a>(h)&#160;&#160;&#160;<a class="el" href="../../d2/d29/heap_8c.html#aa613294279cd991c2b17ffe37cee3008">__ast_heap_rdlock</a>(h, __FILE__, __PRETTY_FUNCTION__, __LINE__)</td></tr>
<tr class="separator:aa917a69fe7f03085dfef14b0af804eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44306afd9b32c0eedae9b559f13a2c5b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#a44306afd9b32c0eedae9b559f13a2c5b">ast_heap_unlock</a>(h)&#160;&#160;&#160;<a class="el" href="../../d2/d29/heap_8c.html#ab836515b9b55d4c0517865fa8abfae8f">__ast_heap_unlock</a>(h, __FILE__, __PRETTY_FUNCTION__, __LINE__)</td></tr>
<tr class="separator:a44306afd9b32c0eedae9b559f13a2c5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae31f8aaa8d4c6caf049e3965ec8b576a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#ae31f8aaa8d4c6caf049e3965ec8b576a">ast_heap_wrlock</a>(h)&#160;&#160;&#160;<a class="el" href="../../d2/d29/heap_8c.html#acd954ea59392177dd48626056ea6e9c3">__ast_heap_wrlock</a>(h, __FILE__, __PRETTY_FUNCTION__, __LINE__)</td></tr>
<tr class="separator:ae31f8aaa8d4c6caf049e3965ec8b576a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a338c8d5237a3d4acd615ece6d71a37c1"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#a338c8d5237a3d4acd615ece6d71a37c1">ast_heap_cmp_fn</a>) (void *elm1, void *elm2)</td></tr>
<tr class="memdesc:a338c8d5237a3d4acd615ece6d71a37c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function type for comparing nodes in a heap.  <a href="#a338c8d5237a3d4acd615ece6d71a37c1">More...</a><br /></td></tr>
<tr class="separator:a338c8d5237a3d4acd615ece6d71a37c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa613294279cd991c2b17ffe37cee3008"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#aa613294279cd991c2b17ffe37cee3008">__ast_heap_rdlock</a> (struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *h, const char *file, const char *func, int line)</td></tr>
<tr class="memdesc:aa613294279cd991c2b17ffe37cee3008"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read-Lock a heap.  <a href="#aa613294279cd991c2b17ffe37cee3008">More...</a><br /></td></tr>
<tr class="separator:aa613294279cd991c2b17ffe37cee3008"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab836515b9b55d4c0517865fa8abfae8f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#ab836515b9b55d4c0517865fa8abfae8f">__ast_heap_unlock</a> (struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *h, const char *file, const char *func, int line)</td></tr>
<tr class="memdesc:ab836515b9b55d4c0517865fa8abfae8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock a heap.  <a href="#ab836515b9b55d4c0517865fa8abfae8f">More...</a><br /></td></tr>
<tr class="separator:ab836515b9b55d4c0517865fa8abfae8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd954ea59392177dd48626056ea6e9c3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#acd954ea59392177dd48626056ea6e9c3">__ast_heap_wrlock</a> (struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *h, const char *file, const char *func, int line)</td></tr>
<tr class="memdesc:acd954ea59392177dd48626056ea6e9c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write-Lock a heap.  <a href="#acd954ea59392177dd48626056ea6e9c3">More...</a><br /></td></tr>
<tr class="separator:acd954ea59392177dd48626056ea6e9c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91c732ae0964da15f302b56bfe1ce828"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#a91c732ae0964da15f302b56bfe1ce828">_ast_heap_create</a> (unsigned int init_height, <a class="el" href="../../da/ddb/heap_8h.html#a338c8d5237a3d4acd615ece6d71a37c1">ast_heap_cmp_fn</a> cmp_fn, ssize_t index_offset, const char *file, int lineno, const char *func)</td></tr>
<tr class="memdesc:a91c732ae0964da15f302b56bfe1ce828"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a max heap.  <a href="#a91c732ae0964da15f302b56bfe1ce828">More...</a><br /></td></tr>
<tr class="separator:a91c732ae0964da15f302b56bfe1ce828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9f7cce6a38c06261a19daf96495ff61"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#ae9f7cce6a38c06261a19daf96495ff61">_ast_heap_push</a> (struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *h, void *elm, const char *file, int lineno, const char *func)</td></tr>
<tr class="memdesc:ae9f7cce6a38c06261a19daf96495ff61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push an element on to a heap.  <a href="#ae9f7cce6a38c06261a19daf96495ff61">More...</a><br /></td></tr>
<tr class="separator:ae9f7cce6a38c06261a19daf96495ff61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66d0a4a9d9e08e704abc44c856407bb8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#a66d0a4a9d9e08e704abc44c856407bb8">ast_heap_destroy</a> (struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *h)</td></tr>
<tr class="memdesc:a66d0a4a9d9e08e704abc44c856407bb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a max heap.  <a href="#a66d0a4a9d9e08e704abc44c856407bb8">More...</a><br /></td></tr>
<tr class="separator:a66d0a4a9d9e08e704abc44c856407bb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa326b988236a0841d41cf2af8ec9b7e"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#aaa326b988236a0841d41cf2af8ec9b7e">ast_heap_peek</a> (struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *h, unsigned int index)</td></tr>
<tr class="memdesc:aaa326b988236a0841d41cf2af8ec9b7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Peek at an element on a heap.  <a href="#aaa326b988236a0841d41cf2af8ec9b7e">More...</a><br /></td></tr>
<tr class="separator:aaa326b988236a0841d41cf2af8ec9b7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad56625488a481df852f0b13d58b15a93"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#ad56625488a481df852f0b13d58b15a93">ast_heap_pop</a> (struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *h)</td></tr>
<tr class="memdesc:ad56625488a481df852f0b13d58b15a93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pop the max element off of the heap.  <a href="#ad56625488a481df852f0b13d58b15a93">More...</a><br /></td></tr>
<tr class="separator:ad56625488a481df852f0b13d58b15a93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac68d03b30bb0adc489ccd67a11873b59"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#ac68d03b30bb0adc489ccd67a11873b59">ast_heap_remove</a> (struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *h, void *elm)</td></tr>
<tr class="memdesc:ac68d03b30bb0adc489ccd67a11873b59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a specific element from a heap.  <a href="#ac68d03b30bb0adc489ccd67a11873b59">More...</a><br /></td></tr>
<tr class="separator:ac68d03b30bb0adc489ccd67a11873b59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb3efaa08e2b1e9423bbbd5e3d9d2acc"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#abb3efaa08e2b1e9423bbbd5e3d9d2acc">ast_heap_size</a> (struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *h)</td></tr>
<tr class="memdesc:abb3efaa08e2b1e9423bbbd5e3d9d2acc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current size of a heap.  <a href="#abb3efaa08e2b1e9423bbbd5e3d9d2acc">More...</a><br /></td></tr>
<tr class="separator:abb3efaa08e2b1e9423bbbd5e3d9d2acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d46015f282b349a9b3d0560b5bc07c3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddb/heap_8h.html#a0d46015f282b349a9b3d0560b5bc07c3">ast_heap_verify</a> (struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *h)</td></tr>
<tr class="memdesc:a0d46015f282b349a9b3d0560b5bc07c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify that a heap has been properly constructed.  <a href="#a0d46015f282b349a9b3d0560b5bc07c3">More...</a><br /></td></tr>
<tr class="separator:a0d46015f282b349a9b3d0560b5bc07c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Max Heap data structure. </p>
<dl class="section author"><dt>Author</dt><dd>Russell Bryant <a href="#" onclick="location.href='mai'+'lto:'+'rus'+'se'+'ll@'+'di'+'giu'+'m.'+'com'; return false;">russe<span style="display: none;">.nosp@m.</span>ll@d<span style="display: none;">.nosp@m.</span>igium<span style="display: none;">.nosp@m.</span>.com</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../da/ddb/heap_8h_source.html">heap.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a42b42e04887dbc86276e590141147f63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42b42e04887dbc86276e590141147f63">&#9670;&nbsp;</a></span>ast_heap_create</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ast_heap_create</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">init_height, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cmp_fn, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">index_offset&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../d2/d29/heap_8c.html#a91c732ae0964da15f302b56bfe1ce828">_ast_heap_create</a>(init_height, cmp_fn, index_offset, __FILE__, __LINE__, __PRETTY_FUNCTION__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/ddb/heap_8h_source.html#l00102">102</a> of file <a class="el" href="../../da/ddb/heap_8h_source.html">heap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l03687">ast_bridge_features_init()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00236">ast_sched_context_create()</a>, <a class="el" href="../../d3/d2b/test__heap_8c_source.html#l00057">AST_TEST_DEFINE()</a>, <a class="el" href="../../d3/d62/timing_8c_source.html#l00289">ast_timing_init()</a>, and <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l01508">sorcery_memory_cache_open()</a>.</p>

</div>
</div>
<a id="ad181f4df20e6039b37e1b8d128884a81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad181f4df20e6039b37e1b8d128884a81">&#9670;&nbsp;</a></span>ast_heap_push</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ast_heap_push</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">h, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">elm&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../d2/d29/heap_8c.html#ae9f7cce6a38c06261a19daf96495ff61">_ast_heap_push</a>(h, elm, __FILE__, __LINE__, __PRETTY_FUNCTION__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/ddb/heap_8h_source.html#l00126">126</a> of file <a class="el" href="../../da/ddb/heap_8h_source.html">heap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d62/timing_8c_source.html#l00073">_ast_register_timing_interface()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l00728">add_to_cache()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03382">ast_bridge_interval_hook()</a>, <a class="el" href="../../d3/d2b/test__heap_8c_source.html#l00057">AST_TEST_DEFINE()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01570">bridge_channel_handle_interval()</a>, and <a class="el" href="../../db/dbe/sched_8c_source.html#l00458">schedule()</a>.</p>

</div>
</div>
<a id="aa917a69fe7f03085dfef14b0af804eff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa917a69fe7f03085dfef14b0af804eff">&#9670;&nbsp;</a></span>ast_heap_rdlock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ast_heap_rdlock</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">h</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../d2/d29/heap_8c.html#aa613294279cd991c2b17ffe37cee3008">__ast_heap_rdlock</a>(h, __FILE__, __PRETTY_FUNCTION__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/ddb/heap_8h_source.html#l00247">247</a> of file <a class="el" href="../../da/ddb/heap_8h_source.html">heap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d62/timing_8c_source.html#l00122">ast_timer_open()</a>.</p>

</div>
</div>
<a id="a44306afd9b32c0eedae9b559f13a2c5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44306afd9b32c0eedae9b559f13a2c5b">&#9670;&nbsp;</a></span>ast_heap_unlock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ast_heap_unlock</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">h</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../d2/d29/heap_8c.html#ab836515b9b55d4c0517865fa8abfae8f">__ast_heap_unlock</a>(h, __FILE__, __PRETTY_FUNCTION__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/ddb/heap_8h_source.html#l00248">248</a> of file <a class="el" href="../../da/ddb/heap_8h_source.html">heap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d62/timing_8c_source.html#l00073">_ast_register_timing_interface()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03662">ast_bridge_features_merge()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03382">ast_bridge_interval_hook()</a>, <a class="el" href="../../d3/d62/timing_8c_source.html#l00122">ast_timer_open()</a>, <a class="el" href="../../d3/d62/timing_8c_source.html#l00104">ast_unregister_timing_interface()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01570">bridge_channel_handle_interval()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02720">bridge_channel_next_interval()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l03546">hooks_remove_heap()</a>.</p>

</div>
</div>
<a id="ae31f8aaa8d4c6caf049e3965ec8b576a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae31f8aaa8d4c6caf049e3965ec8b576a">&#9670;&nbsp;</a></span>ast_heap_wrlock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ast_heap_wrlock</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">h</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../d2/d29/heap_8c.html#acd954ea59392177dd48626056ea6e9c3">__ast_heap_wrlock</a>(h, __FILE__, __PRETTY_FUNCTION__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/ddb/heap_8h_source.html#l00246">246</a> of file <a class="el" href="../../da/ddb/heap_8h_source.html">heap.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d62/timing_8c_source.html#l00073">_ast_register_timing_interface()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03662">ast_bridge_features_merge()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03382">ast_bridge_interval_hook()</a>, <a class="el" href="../../d3/d62/timing_8c_source.html#l00104">ast_unregister_timing_interface()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01570">bridge_channel_handle_interval()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02720">bridge_channel_next_interval()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l03546">hooks_remove_heap()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a338c8d5237a3d4acd615ece6d71a37c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a338c8d5237a3d4acd615ece6d71a37c1">&#9670;&nbsp;</a></span>ast_heap_cmp_fn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* ast_heap_cmp_fn) (void *elm1, void *elm2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function type for comparing nodes in a heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elm1</td><td>the first element </td></tr>
    <tr><td class="paramname">elm2</td><td>the second element</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">negative</td><td>if elm1 &lt; elm2 </td></tr>
    <tr><td class="paramname">0</td><td>if elm1 == elm2 </td></tr>
    <tr><td class="paramname">positive</td><td>if elm1 &gt; elm2</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This implementation is of a max heap. However, if a min heap is desired, simply swap the return values of this function.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/ddb/heap_8h_source.html#l00055">55</a> of file <a class="el" href="../../da/ddb/heap_8h_source.html">heap.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa613294279cd991c2b17ffe37cee3008"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa613294279cd991c2b17ffe37cee3008">&#9670;&nbsp;</a></span>__ast_heap_rdlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __ast_heap_rdlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read-Lock a heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>the heap </td></tr>
    <tr><td class="paramname">file,func,line</td><td>A lock is provided for convenience. It can be assumed that none of the <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> API calls are thread safe. This lock does not have to be used if another one is already available to protect the heap.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>see the documentation for pthread_rwlock_rdlock() </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d29/heap_8c_source.html#l00286">286</a> of file <a class="el" href="../../d2/d29/heap_8c_source.html">heap.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dae/lock_8c_source.html#l00819">__ast_rwlock_rdlock()</a>, and <a class="el" href="../../d2/d29/heap_8c_source.html#l00037">ast_heap::lock</a>.</p>
<div class="fragment"><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;{</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d42/lock_8h.html#ae87e990b4cfc230ffefc852c017b6f7e">__ast_rwlock_rdlock</a>(<a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, line, func, &amp;h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#ace4e0066a5b24f84b90536e9906619f6">lock</a>, <span class="stringliteral">&quot;&amp;h-&gt;lock&quot;</span>);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="lock_8h_html_ae87e990b4cfc230ffefc852c017b6f7e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae87e990b4cfc230ffefc852c017b6f7e">__ast_rwlock_rdlock</a></div><div class="ttdeci">int __ast_rwlock_rdlock(const char *filename, int lineno, const char *func, ast_rwlock_t *t, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dae/lock_8c_source.html#l00819">lock.c:819</a></div></div>
<div class="ttc" id="structast__heap_html_ace4e0066a5b24f84b90536e9906619f6"><div class="ttname"><a href="../../dc/dec/structast__heap.html#ace4e0066a5b24f84b90536e9906619f6">ast_heap::lock</a></div><div class="ttdeci">ast_rwlock_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00037">heap.c:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab836515b9b55d4c0517865fa8abfae8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab836515b9b55d4c0517865fa8abfae8f">&#9670;&nbsp;</a></span>__ast_heap_unlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __ast_heap_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlock a heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>the heap </td></tr>
    <tr><td class="paramname">file,func,line</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>see the documentation for pthread_rwlock_unlock() </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d29/heap_8c_source.html#l00291">291</a> of file <a class="el" href="../../d2/d29/heap_8c_source.html">heap.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dae/lock_8c_source.html#l00748">__ast_rwlock_unlock()</a>, and <a class="el" href="../../d2/d29/heap_8c_source.html#l00037">ast_heap::lock</a>.</p>
<div class="fragment"><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d42/lock_8h.html#a48b1e73b21f6fe3ae7492d052e13c919">__ast_rwlock_unlock</a>(<a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, line, func, &amp;h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#ace4e0066a5b24f84b90536e9906619f6">lock</a>, <span class="stringliteral">&quot;&amp;h-&gt;lock&quot;</span>);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="structast__heap_html_ace4e0066a5b24f84b90536e9906619f6"><div class="ttname"><a href="../../dc/dec/structast__heap.html#ace4e0066a5b24f84b90536e9906619f6">ast_heap::lock</a></div><div class="ttdeci">ast_rwlock_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00037">heap.c:37</a></div></div>
<div class="ttc" id="lock_8h_html_a48b1e73b21f6fe3ae7492d052e13c919"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a48b1e73b21f6fe3ae7492d052e13c919">__ast_rwlock_unlock</a></div><div class="ttdeci">int __ast_rwlock_unlock(const char *filename, int lineno, const char *func, ast_rwlock_t *t, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dae/lock_8c_source.html#l00748">lock.c:748</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd954ea59392177dd48626056ea6e9c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd954ea59392177dd48626056ea6e9c3">&#9670;&nbsp;</a></span>__ast_heap_wrlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __ast_heap_wrlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write-Lock a heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>the heap </td></tr>
    <tr><td class="paramname">file,func,line</td><td>A lock is provided for convenience. It can be assumed that none of the <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> API calls are thread safe. This lock does not have to be used if another one is already available to protect the heap.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>see the documentation for pthread_rwlock_wrlock() </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d29/heap_8c_source.html#l00281">281</a> of file <a class="el" href="../../d2/d29/heap_8c_source.html">heap.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dae/lock_8c_source.html#l00917">__ast_rwlock_wrlock()</a>, and <a class="el" href="../../d2/d29/heap_8c_source.html#l00037">ast_heap::lock</a>.</p>
<div class="fragment"><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d42/lock_8h.html#a1e62da21a5d9e4b7f448aa44438b9fee">__ast_rwlock_wrlock</a>(<a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, line, func, &amp;h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#ace4e0066a5b24f84b90536e9906619f6">lock</a>, <span class="stringliteral">&quot;&amp;h-&gt;lock&quot;</span>);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="structast__heap_html_ace4e0066a5b24f84b90536e9906619f6"><div class="ttname"><a href="../../dc/dec/structast__heap.html#ace4e0066a5b24f84b90536e9906619f6">ast_heap::lock</a></div><div class="ttdeci">ast_rwlock_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00037">heap.c:37</a></div></div>
<div class="ttc" id="lock_8h_html_a1e62da21a5d9e4b7f448aa44438b9fee"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1e62da21a5d9e4b7f448aa44438b9fee">__ast_rwlock_wrlock</a></div><div class="ttdeci">int __ast_rwlock_wrlock(const char *filename, int lineno, const char *func, ast_rwlock_t *t, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dae/lock_8c_source.html#l00917">lock.c:917</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a91c732ae0964da15f302b56bfe1ce828"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91c732ae0964da15f302b56bfe1ce828">&#9670;&nbsp;</a></span>_ast_heap_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a>* _ast_heap_create </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>init_height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/ddb/heap_8h.html#a338c8d5237a3d4acd615ece6d71a37c1">ast_heap_cmp_fn</a>&#160;</td>
          <td class="paramname"><em>cmp_fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t&#160;</td>
          <td class="paramname"><em>index_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lineno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a max heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">init_height</td><td>The initial height of the heap to allocate space for. To start out, there will be room for (2 ^ init_height) - 1 entries. However, the heap will grow as needed. </td></tr>
    <tr><td class="paramname">cmp_fn</td><td>The function that should be used to compare elements in the heap. </td></tr>
    <tr><td class="paramname">index_offset</td><td>This parameter is optional, but must be provided to be able to use <a class="el" href="../../da/ddb/heap_8h.html#ac68d03b30bb0adc489ccd67a11873b59" title="Remove a specific element from a heap. ">ast_heap_remove()</a>. This is the number of bytes into the element where an ssize_t has been made available for the heap's internal use. The heap will use this field to keep track of the element's current position in the heap. The offsetof() macro is useful for providing a proper value for this argument. If <a class="el" href="../../da/ddb/heap_8h.html#ac68d03b30bb0adc489ccd67a11873b59" title="Remove a specific element from a heap. ">ast_heap_remove()</a> will not be used, then a negative value can be provided to indicate that no field for an offset has been allocated.</td></tr>
  </table>
  </dd>
</dl>
<p>Example Usage:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>myobj {</div><div class="line">   <span class="keywordtype">int</span> foo;</div><div class="line">   <span class="keywordtype">int</span> <a class="code" href="../../da/d03/test__ari_8c.html#a94b51dd33bae021eca5f2ab74a0dc2a8">bar</a>;</div><div class="line">   <span class="keywordtype">char</span> stuff[8];</div><div class="line">   <span class="keywordtype">char</span> things[8];</div><div class="line">   ssize_t __heap_index;</div><div class="line">};</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">static <span class="keywordtype">int</span> myobj_cmp(<span class="keywordtype">void</span> *obj1, <span class="keywordtype">void</span> *obj2);</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">struct <a class="code" href="../../dc/dec/structast__heap.html">ast_heap</a> *h;</div><div class="line"></div><div class="line">h = <a class="code" href="../../da/ddb/heap_8h.html#a42b42e04887dbc86276e590141147f63">ast_heap_create</a>(8, myobj_cmp, offsetof(<span class="keyword">struct</span> myobj, __heap_index));</div></div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd>An instance of a max heap </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d29/heap_8c_source.html#l00112">112</a> of file <a class="el" href="../../d2/d29/heap_8c_source.html">heap.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/db0/astmm_8c_source.html#l01635">__ast_calloc()</a>, <a class="el" href="../../d9/db0/astmm_8c_source.html#l01660">__ast_malloc()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00222">ast_rwlock_init</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00041">ast_heap::avail_len</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00038">ast_heap::cmp_fn</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00042">ast_heap::heap</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00039">ast_heap::index_offset</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00037">ast_heap::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dec/structast__heap.html">ast_heap</a> *h;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/dec/structast__heap.html#ad4e0020882fab5f0738eee8559ae138e">cmp_fn</a>) {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;A comparison function must be provided\n&quot;</span>);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   <span class="keywordflow">if</span> (!init_height) {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      init_height = 8;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   h = <a class="code" href="../../d8/d8a/astmm_8h.html#aacec2637e88f8663d609047874c6661b">__ast_calloc</a>(1, <span class="keyword">sizeof</span>(*h), <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, lineno, func);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   <span class="keywordflow">if</span> (!h) {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   }</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#ad4e0020882fab5f0738eee8559ae138e">cmp_fn</a> = <a class="code" href="../../dc/dec/structast__heap.html#ad4e0020882fab5f0738eee8559ae138e">cmp_fn</a>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#a343df1831d4c9543871a5bc4320a3d18">index_offset</a> = <a class="code" href="../../dc/dec/structast__heap.html#a343df1831d4c9543871a5bc4320a3d18">index_offset</a>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#ac426c291ec04f174c48a6065c0bbfb1f">avail_len</a> = (1 &lt;&lt; init_height) - 1;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#a58a9e32eac038c7231ab379249122f64">heap</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#a23de3e26f727701bbd3d350e43547071">__ast_malloc</a>(h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#ac426c291ec04f174c48a6065c0bbfb1f">avail_len</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">void</span> *), <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, lineno, func);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#a58a9e32eac038c7231ab379249122f64">heap</a>) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(h);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a9b07039db138693d1ebe02c3e99ddcab">ast_rwlock_init</a>(&amp;h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#ace4e0066a5b24f84b90536e9906619f6">lock</a>);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   <span class="keywordflow">return</span> h;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div><div class="ttc" id="structast__heap_html_ad4e0020882fab5f0738eee8559ae138e"><div class="ttname"><a href="../../dc/dec/structast__heap.html#ad4e0020882fab5f0738eee8559ae138e">ast_heap::cmp_fn</a></div><div class="ttdeci">ast_heap_cmp_fn cmp_fn</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00038">heap.c:38</a></div></div>
<div class="ttc" id="astmm_8h_html_aacec2637e88f8663d609047874c6661b"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#aacec2637e88f8663d609047874c6661b">__ast_calloc</a></div><div class="ttdeci">void * __ast_calloc(size_t nmemb, size_t size, const char *file, int lineno, const char *func) attribute_malloc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01635">astmm.c:1635</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="structast__heap_html"><div class="ttname"><a href="../../dc/dec/structast__heap.html">ast_heap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00036">heap.c:36</a></div></div>
<div class="ttc" id="structast__heap_html_ace4e0066a5b24f84b90536e9906619f6"><div class="ttname"><a href="../../dc/dec/structast__heap.html#ace4e0066a5b24f84b90536e9906619f6">ast_heap::lock</a></div><div class="ttdeci">ast_rwlock_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00037">heap.c:37</a></div></div>
<div class="ttc" id="structast__heap_html_ac426c291ec04f174c48a6065c0bbfb1f"><div class="ttname"><a href="../../dc/dec/structast__heap.html#ac426c291ec04f174c48a6065c0bbfb1f">ast_heap::avail_len</a></div><div class="ttdeci">size_t avail_len</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00041">heap.c:41</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__heap_html_a58a9e32eac038c7231ab379249122f64"><div class="ttname"><a href="../../dc/dec/structast__heap.html#a58a9e32eac038c7231ab379249122f64">ast_heap::heap</a></div><div class="ttdeci">void ** heap</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00042">heap.c:42</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="lock_8h_html_a9b07039db138693d1ebe02c3e99ddcab"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a9b07039db138693d1ebe02c3e99ddcab">ast_rwlock_init</a></div><div class="ttdeci">#define ast_rwlock_init(rwlock)</div><div class="ttdoc">wrapper for rwlock with tracking enabled </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00222">lock.h:222</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__heap_html_a343df1831d4c9543871a5bc4320a3d18"><div class="ttname"><a href="../../dc/dec/structast__heap.html#a343df1831d4c9543871a5bc4320a3d18">ast_heap::index_offset</a></div><div class="ttdeci">ssize_t index_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00039">heap.c:39</a></div></div>
<div class="ttc" id="astmm_8h_html_a23de3e26f727701bbd3d350e43547071"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a23de3e26f727701bbd3d350e43547071">__ast_malloc</a></div><div class="ttdeci">void * __ast_malloc(size_t size, const char *file, int lineno, const char *func) attribute_malloc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01660">astmm.c:1660</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae9f7cce6a38c06261a19daf96495ff61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9f7cce6a38c06261a19daf96495ff61">&#9670;&nbsp;</a></span>_ast_heap_push()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int _ast_heap_push </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>elm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lineno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Push an element on to a heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>the heap being added to </td></tr>
    <tr><td class="paramname">elm</td><td>the element being put on the heap</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">non-zero</td><td>failure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d29/heap_8c_source.html#l00222">222</a> of file <a class="el" href="../../d2/d29/heap_8c_source.html">heap.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d29/heap_8c_source.html#l00041">ast_heap::avail_len</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00212">bubble_up()</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00040">ast_heap::cur_len</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00161">grow_heap()</a>, and <a class="el" href="../../d2/d29/heap_8c_source.html#l00078">heap_set()</a>.</p>
<div class="fragment"><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;{</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <span class="keywordflow">if</span> (h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#a80fdf040f74e47fedc72cda33b40f13b">cur_len</a> == h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#ac426c291ec04f174c48a6065c0bbfb1f">avail_len</a> &amp;&amp; <a class="code" href="../../d2/d29/heap_8c.html#a45f5fa0485ddc52aea9f44a814a69bf8">grow_heap</a>(h, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, lineno, func)) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <a class="code" href="../../d2/d29/heap_8c.html#a0909ef13c9def687699d49e82bb90337">heap_set</a>(h, ++(h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#a80fdf040f74e47fedc72cda33b40f13b">cur_len</a>), elm);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   <a class="code" href="../../d2/d29/heap_8c.html#a28337a1790e4ddaaa482e93c05febaf2">bubble_up</a>(h, h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#a80fdf040f74e47fedc72cda33b40f13b">cur_len</a>);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="structast__heap_html_ac426c291ec04f174c48a6065c0bbfb1f"><div class="ttname"><a href="../../dc/dec/structast__heap.html#ac426c291ec04f174c48a6065c0bbfb1f">ast_heap::avail_len</a></div><div class="ttdeci">size_t avail_len</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00041">heap.c:41</a></div></div>
<div class="ttc" id="heap_8c_html_a45f5fa0485ddc52aea9f44a814a69bf8"><div class="ttname"><a href="../../d2/d29/heap_8c.html#a45f5fa0485ddc52aea9f44a814a69bf8">grow_heap</a></div><div class="ttdeci">static int grow_heap(struct ast_heap *h, const char *file, int lineno, const char *func)</div><div class="ttdoc">Add a row of additional storage for the heap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00161">heap.c:161</a></div></div>
<div class="ttc" id="structast__heap_html_a80fdf040f74e47fedc72cda33b40f13b"><div class="ttname"><a href="../../dc/dec/structast__heap.html#a80fdf040f74e47fedc72cda33b40f13b">ast_heap::cur_len</a></div><div class="ttdeci">size_t cur_len</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00040">heap.c:40</a></div></div>
<div class="ttc" id="heap_8c_html_a28337a1790e4ddaaa482e93c05febaf2"><div class="ttname"><a href="../../d2/d29/heap_8c.html#a28337a1790e4ddaaa482e93c05febaf2">bubble_up</a></div><div class="ttdeci">static int bubble_up(struct ast_heap *h, int i)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00212">heap.c:212</a></div></div>
<div class="ttc" id="heap_8c_html_a0909ef13c9def687699d49e82bb90337"><div class="ttname"><a href="../../d2/d29/heap_8c.html#a0909ef13c9def687699d49e82bb90337">heap_set</a></div><div class="ttdeci">static void heap_set(struct ast_heap *h, int i, void *elm)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00078">heap.c:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a66d0a4a9d9e08e704abc44c856407bb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66d0a4a9d9e08e704abc44c856407bb8">&#9670;&nbsp;</a></span>ast_heap_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a>* ast_heap_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy a max heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>the heap to destroy</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL for convenience </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d29/heap_8c_source.html#l00146">146</a> of file <a class="el" href="../../d2/d29/heap_8c_source.html">heap.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00231">ast_rwlock_destroy</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00042">ast_heap::heap</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00037">ast_heap::lock</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l03720">ast_bridge_features_cleanup()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00269">ast_sched_context_destroy()</a>, <a class="el" href="../../d3/d2b/test__heap_8c_source.html#l00057">AST_TEST_DEFINE()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l00422">sorcery_memory_cache_destructor()</a>, and <a class="el" href="../../d3/d62/timing_8c_source.html#l00281">timing_shutdown()</a>.</p>
<div class="fragment"><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;{</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#a58a9e32eac038c7231ab379249122f64">heap</a>);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#a58a9e32eac038c7231ab379249122f64">heap</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab1d35b9611e8b5143ec695ead1b5d8d1">ast_rwlock_destroy</a>(&amp;h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#ace4e0066a5b24f84b90536e9906619f6">lock</a>);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(h);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;}</div><div class="ttc" id="lock_8h_html_ab1d35b9611e8b5143ec695ead1b5d8d1"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab1d35b9611e8b5143ec695ead1b5d8d1">ast_rwlock_destroy</a></div><div class="ttdeci">#define ast_rwlock_destroy(rwlock)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00231">lock.h:231</a></div></div>
<div class="ttc" id="structast__heap_html_ace4e0066a5b24f84b90536e9906619f6"><div class="ttname"><a href="../../dc/dec/structast__heap.html#ace4e0066a5b24f84b90536e9906619f6">ast_heap::lock</a></div><div class="ttdeci">ast_rwlock_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00037">heap.c:37</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__heap_html_a58a9e32eac038c7231ab379249122f64"><div class="ttname"><a href="../../dc/dec/structast__heap.html#a58a9e32eac038c7231ab379249122f64">ast_heap::heap</a></div><div class="ttdeci">void ** heap</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00042">heap.c:42</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa326b988236a0841d41cf2af8ec9b7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa326b988236a0841d41cf2af8ec9b7e">&#9670;&nbsp;</a></span>ast_heap_peek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ast_heap_peek </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Peek at an element on a heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>the heap </td></tr>
    <tr><td class="paramname">index</td><td>index of the element to return. The first element is at index 1, and the last element is at the index == the size of the heap.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an element at the specified index on the heap. This element will <b>not</b> be removed before being returned.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If this function is being used in combination with <a class="el" href="../../da/ddb/heap_8h.html#abb3efaa08e2b1e9423bbbd5e3d9d2acc" title="Get the current size of a heap. ">ast_heap_size()</a> for purposes of traversing the heap, the heap must be locked for the entire duration of the traversal.</dd></dl>
<p>Example code for a traversal: </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code" href="../../dc/dec/structast__heap.html">ast_heap</a> *h;</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">size_t size, i;</div><div class="line"><span class="keywordtype">void</span> *cur_obj;</div><div class="line"></div><div class="line"><a class="code" href="../../da/ddb/heap_8h.html#aa917a69fe7f03085dfef14b0af804eff">ast_heap_rdlock</a>(h);</div><div class="line"></div><div class="line">size = <a class="code" href="../../da/ddb/heap_8h.html#abb3efaa08e2b1e9423bbbd5e3d9d2acc">ast_heap_size</a>(h);</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (i = 1; i &lt;= size &amp;&amp; (cur_obj = <a class="code" href="../../da/ddb/heap_8h.html#aaa326b988236a0841d41cf2af8ec9b7e">ast_heap_peek</a>(h, i)); i++) {</div><div class="line">    ... Do stuff with cur_obj ...</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="../../da/ddb/heap_8h.html#a44306afd9b32c0eedae9b559f13a2c5b">ast_heap_unlock</a>(h);</div></div><!-- fragment --> <dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d29/heap_8c_source.html#l00267">267</a> of file <a class="el" href="../../d2/d29/heap_8c_source.html">heap.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d29/heap_8c_source.html#l00040">ast_heap::cur_len</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00060">heap_get()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l00728">add_to_cache()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03662">ast_bridge_features_merge()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00407">ast_sched_clean_by_callback()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00712">ast_sched_dump()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00674">ast_sched_report()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00755">ast_sched_runq()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00431">ast_sched_wait()</a>, <a class="el" href="../../d3/d62/timing_8c_source.html#l00122">ast_timer_open()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01570">bridge_channel_handle_interval()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02720">bridge_channel_next_interval()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l00498">expire_objects_from_cache()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03546">hooks_remove_heap()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l01191">memory_cache_stale_check()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l00465">remove_from_cache()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00570">sched_find()</a>, and <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l00648">schedule_cache_expiration()</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;{</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#a80fdf040f74e47fedc72cda33b40f13b">cur_len</a> || !index || index &gt; h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#a80fdf040f74e47fedc72cda33b40f13b">cur_len</a>) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/d29/heap_8c.html#a750aea78f06637acdd54368ac351d25d">heap_get</a>(h, index);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div><div class="ttc" id="heap_8c_html_a750aea78f06637acdd54368ac351d25d"><div class="ttname"><a href="../../d2/d29/heap_8c.html#a750aea78f06637acdd54368ac351d25d">heap_get</a></div><div class="ttdeci">static void * heap_get(struct ast_heap *h, int i)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00060">heap.c:60</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__heap_html_a80fdf040f74e47fedc72cda33b40f13b"><div class="ttname"><a href="../../dc/dec/structast__heap.html#a80fdf040f74e47fedc72cda33b40f13b">ast_heap::cur_len</a></div><div class="ttdeci">size_t cur_len</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00040">heap.c:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad56625488a481df852f0b13d58b15a93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad56625488a481df852f0b13d58b15a93">&#9670;&nbsp;</a></span>ast_heap_pop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ast_heap_pop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pop the max element off of the heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>the heap</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>this will return the element on the top of the heap, which has the largest value according to the element comparison function that was provided when the heap was created. The element will be removed before being returned. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d29/heap_8c_source.html#l00262">262</a> of file <a class="el" href="../../d2/d29/heap_8c_source.html">heap.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d29/heap_8c_source.html#l00235">_ast_heap_remove()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l03720">ast_bridge_features_cleanup()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00269">ast_sched_context_destroy()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00755">ast_sched_runq()</a>, <a class="el" href="../../d3/d2b/test__heap_8c_source.html#l00057">AST_TEST_DEFINE()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l00554">remove_all_from_cache()</a>, and <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l00695">remove_oldest_from_cache()</a>.</p>
<div class="fragment"><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;{</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/d29/heap_8c.html#afb88fdb31b92d8132e3f37813250612d">_ast_heap_remove</a>(h, 1);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div><div class="ttc" id="heap_8c_html_afb88fdb31b92d8132e3f37813250612d"><div class="ttname"><a href="../../d2/d29/heap_8c.html#afb88fdb31b92d8132e3f37813250612d">_ast_heap_remove</a></div><div class="ttdeci">static void * _ast_heap_remove(struct ast_heap *h, unsigned int index)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00235">heap.c:235</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac68d03b30bb0adc489ccd67a11873b59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac68d03b30bb0adc489ccd67a11873b59">&#9670;&nbsp;</a></span>ast_heap_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ast_heap_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>elm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a specific element from a heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>the heap to remove from </td></tr>
    <tr><td class="paramname">elm</td><td>the element to remove</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>elm, if the removal was successful, or NULL if it failed</dd></dl>
<dl class="section note"><dt>Note</dt><dd>the index_offset parameter to <a class="el" href="../../da/ddb/heap_8h.html#a42b42e04887dbc86276e590141147f63">ast_heap_create()</a> is required to be able to use this function. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d29/heap_8c_source.html#l00251">251</a> of file <a class="el" href="../../d2/d29/heap_8c_source.html">heap.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d29/heap_8c_source.html#l00235">_ast_heap_remove()</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00065">get_index()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/dbe/sched_8c_source.html#l00407">ast_sched_clean_by_callback()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00610">ast_sched_del()</a>, <a class="el" href="../../d3/d2b/test__heap_8c_source.html#l00192">AST_TEST_DEFINE()</a>, <a class="el" href="../../d3/d62/timing_8c_source.html#l00104">ast_unregister_timing_interface()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01570">bridge_channel_handle_interval()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03546">hooks_remove_heap()</a>, and <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l00465">remove_from_cache()</a>.</p>
<div class="fragment"><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;{</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   ssize_t i = <a class="code" href="../../d2/d29/heap_8c.html#a5590485773cb3d3213bedc1d39201c50">get_index</a>(h, elm);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   <span class="keywordflow">if</span> (i == -1) {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/d29/heap_8c.html#afb88fdb31b92d8132e3f37813250612d">_ast_heap_remove</a>(h, i);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div><div class="ttc" id="heap_8c_html_a5590485773cb3d3213bedc1d39201c50"><div class="ttname"><a href="../../d2/d29/heap_8c.html#a5590485773cb3d3213bedc1d39201c50">get_index</a></div><div class="ttdeci">static ssize_t get_index(struct ast_heap *h, void *elm)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00065">heap.c:65</a></div></div>
<div class="ttc" id="heap_8c_html_afb88fdb31b92d8132e3f37813250612d"><div class="ttname"><a href="../../d2/d29/heap_8c.html#afb88fdb31b92d8132e3f37813250612d">_ast_heap_remove</a></div><div class="ttdeci">static void * _ast_heap_remove(struct ast_heap *h, unsigned int index)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00235">heap.c:235</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abb3efaa08e2b1e9423bbbd5e3d9d2acc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb3efaa08e2b1e9423bbbd5e3d9d2acc">&#9670;&nbsp;</a></span>ast_heap_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t ast_heap_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current size of a heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>the heap</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of elements currently in the heap </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d29/heap_8c_source.html#l00276">276</a> of file <a class="el" href="../../d2/d29/heap_8c_source.html">heap.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d29/heap_8c_source.html#l00040">ast_heap::cur_len</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/dbe/sched_8c_source.html#l00712">ast_sched_dump()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00674">ast_sched_report()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03546">hooks_remove_heap()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00570">sched_find()</a>, and <a class="el" href="../../db/dbe/sched_8c_source.html#l00458">schedule()</a>.</p>
<div class="fragment"><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   <span class="keywordflow">return</span> h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#a80fdf040f74e47fedc72cda33b40f13b">cur_len</a>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div><div class="ttc" id="structast__heap_html_a80fdf040f74e47fedc72cda33b40f13b"><div class="ttname"><a href="../../dc/dec/structast__heap.html#a80fdf040f74e47fedc72cda33b40f13b">ast_heap::cur_len</a></div><div class="ttdeci">size_t cur_len</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00040">heap.c:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0d46015f282b349a9b3d0560b5bc07c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d46015f282b349a9b3d0560b5bc07c3">&#9670;&nbsp;</a></span>ast_heap_verify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_heap_verify </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/dec/structast__heap.html">ast_heap</a> *&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verify that a heap has been properly constructed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>a heap</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">non-zero</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function is mostly for debugging purposes. It traverses an existing heap and verifies that every node is properly placed relative to its children. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d29/heap_8c_source.html#l00088">88</a> of file <a class="el" href="../../d2/d29/heap_8c_source.html">heap.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d29/heap_8c_source.html#l00038">ast_heap::cmp_fn</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00040">ast_heap::cur_len</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00060">heap_get()</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00045">left_node()</a>, and <a class="el" href="../../d2/d29/heap_8c_source.html#l00050">right_node()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d2b/test__heap_8c_source.html#l00117">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;   <span class="keywordflow">for</span> (i = 1; i &lt;= (h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#a80fdf040f74e47fedc72cda33b40f13b">cur_len</a> / 2); i++) {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keywordtype">int</span> l = <a class="code" href="../../d2/d29/heap_8c.html#a82847ffec208b4ed490b40e30b139fe6">left_node</a>(i);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <span class="keywordtype">int</span> r = <a class="code" href="../../d2/d29/heap_8c.html#ac8e0bba7e2f40ea2771f593447eba705">right_node</a>(i);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="keywordflow">if</span> (l &lt;= h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#a80fdf040f74e47fedc72cda33b40f13b">cur_len</a>) {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;         <span class="keywordflow">if</span> (h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#ad4e0020882fab5f0738eee8559ae138e">cmp_fn</a>(<a class="code" href="../../d2/d29/heap_8c.html#a750aea78f06637acdd54368ac351d25d">heap_get</a>(h, i), <a class="code" href="../../d2/d29/heap_8c.html#a750aea78f06637acdd54368ac351d25d">heap_get</a>(h, l)) &lt; 0) {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;         }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="keywordflow">if</span> (r &lt;= h-&gt;cur_len) {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;         <span class="keywordflow">if</span> (h-&gt;<a class="code" href="../../dc/dec/structast__heap.html#ad4e0020882fab5f0738eee8559ae138e">cmp_fn</a>(<a class="code" href="../../d2/d29/heap_8c.html#a750aea78f06637acdd54368ac351d25d">heap_get</a>(h, i), <a class="code" href="../../d2/d29/heap_8c.html#a750aea78f06637acdd54368ac351d25d">heap_get</a>(h, r)) &lt; 0) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;         }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;   }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div><div class="ttc" id="structast__heap_html_ad4e0020882fab5f0738eee8559ae138e"><div class="ttname"><a href="../../dc/dec/structast__heap.html#ad4e0020882fab5f0738eee8559ae138e">ast_heap::cmp_fn</a></div><div class="ttdeci">ast_heap_cmp_fn cmp_fn</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00038">heap.c:38</a></div></div>
<div class="ttc" id="heap_8c_html_a750aea78f06637acdd54368ac351d25d"><div class="ttname"><a href="../../d2/d29/heap_8c.html#a750aea78f06637acdd54368ac351d25d">heap_get</a></div><div class="ttdeci">static void * heap_get(struct ast_heap *h, int i)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00060">heap.c:60</a></div></div>
<div class="ttc" id="structast__heap_html_a80fdf040f74e47fedc72cda33b40f13b"><div class="ttname"><a href="../../dc/dec/structast__heap.html#a80fdf040f74e47fedc72cda33b40f13b">ast_heap::cur_len</a></div><div class="ttdeci">size_t cur_len</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00040">heap.c:40</a></div></div>
<div class="ttc" id="heap_8c_html_ac8e0bba7e2f40ea2771f593447eba705"><div class="ttname"><a href="../../d2/d29/heap_8c.html#ac8e0bba7e2f40ea2771f593447eba705">right_node</a></div><div class="ttdeci">static int right_node(int i)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00050">heap.c:50</a></div></div>
<div class="ttc" id="heap_8c_html_a82847ffec208b4ed490b40e30b139fe6"><div class="ttname"><a href="../../d2/d29/heap_8c.html#a82847ffec208b4ed490b40e30b139fe6">left_node</a></div><div class="ttdeci">static int left_node(int i)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00045">heap.c:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:59 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
