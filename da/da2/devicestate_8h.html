<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: devicestate.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">devicestate.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Device state management.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d9/d95/channelstate_8h_source.html">asterisk/channelstate.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for devicestate.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d8b/devicestate_8h__incl.png" border="0" usemap="#devicestate_8h" alt=""/></div>
<map name="devicestate_8h" id="devicestate_8h">
<area shape="rect" id="node2" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="682,80,853,107"/>
<area shape="rect" id="node12" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1498,80,1613,107"/>
<area shape="rect" id="node3" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="55,229,139,256"/>
<area shape="rect" id="node4" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="417,453,572,480"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="1308,304,1446,331"/>
<area shape="rect" id="node11" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="23,304,158,331"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1194,379,1336,405"/>
<area shape="rect" id="node13" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="708,155,846,181"/>
<area shape="rect" id="node23" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1452,379,1515,405"/>
<area shape="rect" id="node26" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1727,304,1840,331"/>
<area shape="rect" id="node31" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1539,379,1666,405"/>
<area shape="rect" id="node32" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="1344,155,1490,181"/>
<area shape="rect" id="node34" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="2114,155,2272,181"/>
<area shape="rect" id="node36" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1673,155,1804,181"/>
<area shape="rect" id="node25" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="2201,453,2348,480"/>
<area shape="rect" id="node30" href="../../d3/dda/backtrace_8h.html" title="Asterisk backtrace generation. " alt="" coords="2035,379,2186,405"/>
<area shape="rect" id="node35" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="2130,229,2256,256"/>
<area shape="rect" id="node38" href="../../dc/d7d/threadstorage_8h.html" title="Definitions to aid in the use of thread local storage. " alt="" coords="1926,229,2105,256"/>
<area shape="rect" id="node39" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1767,229,1902,256"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/da5/devicestate_8h__dep__incl.png" border="0" usemap="#devicestate_8hdep" alt=""/></div>
<map name="devicestate_8hdep" id="devicestate_8hdep">
<area shape="rect" id="node2" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="1280,80,1342,107"/>
<area shape="rect" id="node5" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="2890,229,2948,256"/>
<area shape="rect" id="node6" href="../../d3/d51/chan__mobile_8c.html" title="Bluetooth Mobile Device channel driver. " alt="" coords="886,304,1000,331"/>
<area shape="rect" id="node16" href="../../d2/d43/app__chanisavail_8c.html" title="Check if Channel is Available. " alt="" coords="605,304,740,331"/>
<area shape="rect" id="node21" href="../../da/dfb/app__queue_8c.html" title="True call queues with optional send URL on answer. " alt="" coords="1726,379,1830,405"/>
<area shape="rect" id="node25" href="../../df/d44/app__meetme_8c.html" title="Meet me conference bridge and Shared Line Appearances. " alt="" coords="45,304,164,331"/>
<area shape="rect" id="node26" href="../../d3/da4/app__page_8c.html" title="page() &#45; Paging application " alt="" coords="188,304,284,331"/>
<area shape="rect" id="node27" href="../../d1/d97/chan__dahdi_8c.html" title="DAHDI for Pseudo TDM. " alt="" coords="308,304,415,331"/>
<area shape="rect" id="node28" href="../../d5/dff/chan__iax2_8c.html" title="Implementation of Inter&#45;Asterisk eXchange Version 2 as specified in RFC 5456. " alt="" coords="764,304,861,331"/>
<area shape="rect" id="node29" href="../../d0/dd6/chan__mgcp_8c.html" title="Implementation of Media Gateway Control Protocol. " alt="" coords="1024,304,1131,331"/>
<area shape="rect" id="node30" href="../../d5/dfe/chan__sip_8c.html" title="Implementation of Session Initiation Protocol. " alt="" coords="440,304,529,331"/>
<area shape="rect" id="node31" href="../../d0/d80/chan__skinny_8c.html" title="Implementation of the Skinny protocol. " alt="" coords="5030,304,5139,331"/>
<area shape="rect" id="node33" href="../../d7/d0b/func__devstate_8c.html" title="Manually controlled blinky lights. " alt="" coords="5163,304,5286,331"/>
<area shape="rect" id="node34" href="../../df/d81/func__extstate_8c.html" title="Get the state of a hinted extension for dialplan control. " alt="" coords="3976,304,4096,331"/>
<area shape="rect" id="node35" href="../../d5/d03/asterisk_8c.html" title="Top level source file for Asterisk &#45; the Open Source PBX. Implementation of PBX core functions and CL..." alt="" coords="4120,304,4203,331"/>
<area shape="rect" id="node36" href="../../d3/d5a/ccss_8c.html" title="Call Completion Supplementary Services implementation. " alt="" coords="1450,304,1511,331"/>
<area shape="rect" id="node37" href="../../d4/d28/channel_8c.html" title="Channel Management. " alt="" coords="4227,304,4310,331"/>
<area shape="rect" id="node38" href="../../de/d47/core__local_8c.html" title="Local proxy channel driver. " alt="" coords="4334,304,4432,331"/>
<area shape="rect" id="node39" href="../../d1/d80/devicestate_8c.html" title="Device state management. " alt="" coords="4456,304,4563,331"/>
<area shape="rect" id="node40" href="../../d5/d92/features_8c.html" title="Routines implementing call features as call pickup, parking and transfer. " alt="" coords="4588,304,4674,331"/>
<area shape="rect" id="node41" href="../../db/d94/pbx_8c.html" title="Core PBX routines. " alt="" coords="4699,304,4755,331"/>
<area shape="rect" id="node42" href="../../d7/dc3/res__calendar_8c.html" title="Calendaring API. " alt="" coords="4779,304,4894,331"/>
<area shape="rect" id="node43" href="../../d6/dd1/test__devicestate_8c.html" title="Device State Test Module. " alt="" coords="5310,304,5448,331"/>
<area shape="rect" id="node44" href="../../de/dcc/conf2ael_8c.html" title="conf2ael.c" alt="" coords="4918,304,5005,331"/>
<area shape="rect" id="node46" href="../../d2/d2d/conf__state__empty_8c.html" title="Confbridge state handling for the EMPTY state. " alt="" coords="5142,80,5288,107"/>
<area shape="rect" id="node47" href="../../de/d5d/parking__devicestate_8c.html" title="Call Parking Device State Management. " alt="" coords="5313,80,5474,107"/>
<area shape="rect" id="node48" href="../../d1/da4/res__corosync_8c.html" title="res_corosync.c" alt="" coords="5499,80,5616,107"/>
<area shape="rect" id="node49" href="../../df/d1d/res__manager__devicestate_8c.html" title="res_manager_devicestate.c" alt="" coords="5640,80,5838,107"/>
<area shape="rect" id="node50" href="../../d2/dd0/res__mwi__devstate_8c.html" title="res_mwi_devstate.c" alt="" coords="5862,80,6010,107"/>
<area shape="rect" id="node3" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="2680,155,2764,181"/>
<area shape="rect" id="node24" href="../../d9/d12/app__dial_8c.html" title="dial() &amp; retrydial() &#45; Trivial application to dial a channel and send an URL on answer ..." alt="" coords="1338,304,1425,331"/>
<area shape="rect" id="node32" href="../../d9/d97/func__callcompletion_8c.html" title="Call Completion Supplementary Services implementation. " alt="" coords="1156,304,1314,331"/>
<area shape="rect" id="node45" href="../../d7/d6c/sig__pri_8h.html" title="Interface header for PRI signaling module. " alt="" coords="980,229,1055,256"/>
<area shape="rect" id="node4" href="../../d0/db6/app__mysql_8c.html" title="MYSQL dialplan application. " alt="" coords="3798,304,3901,331"/>
<area shape="rect" id="node7" href="../../d3/d45/chan__ooh323_8h.html" title="chan_ooh323.h" alt="" coords="1535,304,1655,331"/>
<area shape="rect" id="node8" href="../../db/d62/app__adsiprog_8c.html" title="Program Asterisk ADSI Scripts into phone. " alt="" coords="1680,304,1798,331"/>
<area shape="rect" id="node9" href="../../de/d11/app__agent__pool_8c.html" title="Call center agent pool. " alt="" coords="1822,304,1957,331"/>
<area shape="rect" id="node10" href="../../dc/d5c/app__alarmreceiver_8c.html" title="Central Station Alarm receiver for Ademco Contact ID. " alt="" coords="1981,304,2132,331"/>
<area shape="rect" id="node11" href="../../d2/d48/app__amd_8c.html" title="Answering machine detection. " alt="" coords="2156,304,2250,331"/>
<area shape="rect" id="node12" href="../../d0/df4/app__attended__transfer_8c.html" title="Attended transfer by caller channel. " alt="" coords="2274,304,2452,331"/>
<area shape="rect" id="node13" href="../../d6/d0f/app__authenticate_8c.html" title="Execute arbitrary authenticate commands. " alt="" coords="2477,304,2622,331"/>
<area shape="rect" id="node14" href="../../d7/d7c/app__blind__transfer_8c.html" title="Blind transfer by caller channel. " alt="" coords="2646,304,2797,331"/>
<area shape="rect" id="node15" href="../../dc/d22/app__bridgewait_8c.html" title="Application to place the channel into a holding Bridge. " alt="" coords="2821,304,2950,331"/>
<area shape="rect" id="node17" href="../../d7/d1b/app__channelredirect_8c.html" title="ChannelRedirect application. " alt="" coords="3226,304,3388,331"/>
<area shape="rect" id="node18" href="../../dc/d04/app__chanspy_8c.html" title="ChanSpy: Listen in on any channel. " alt="" coords="3412,304,3527,331"/>
<area shape="rect" id="node19" href="../../d0/dcf/app__confbridge_8c.html" title="Conference Bridge application. " alt="" coords="3123,379,3254,405"/>
<area shape="rect" id="node20" href="../../dc/d4e/stasis__bridges_8h.html" title="stasis_bridges.h" alt="" coords="3026,304,3151,331"/>
<area shape="rect" id="node22" href="../../d3/d3a/app__dahdiras_8c.html" title="Execute an ISDN RAS. " alt="" coords="3552,304,3670,331"/>
<area shape="rect" id="node23" href="../../dc/dc4/app__db_8c.html" title="Database access functions. " alt="" coords="3694,304,3774,331"/>
</map>
</div>
</div>
<p><a href="../../da/da2/devicestate_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d92/structast__device__state__message.html">ast_device_state_message</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The structure that contains device state.  <a href="../../db/d92/structast__device__state__message.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7f/structast__devstate__aggregate.html">ast_devstate_aggregate</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">You shouldn't care about the contents of this struct.  <a href="../../d6/d7f/structast__devstate__aggregate.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a053976b96658a083e1c4171276b6fc1c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#a053976b96658a083e1c4171276b6fc1c">ast_publish_device_state</a>(device,  <a class="el" href="../../d4/d88/structstate.html">state</a>,  cachable)&#160;&#160;&#160;<a class="el" href="../../d1/d80/devicestate_8c.html#afe9dc809c9ea4d32dfb4abd5fd92dfb2">ast_publish_device_state_full</a>(device, <a class="el" href="../../d4/d88/structstate.html">state</a>, cachable, &amp;<a class="el" href="../../de/dc5/options_8c.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>)</td></tr>
<tr class="memdesc:a053976b96658a083e1c4171276b6fc1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a device state update.  <a href="#a053976b96658a083e1c4171276b6fc1c">More...</a><br /></td></tr>
<tr class="separator:a053976b96658a083e1c4171276b6fc1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aecf37644e65dac9938be469856e07ed7"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#aecf37644e65dac9938be469856e07ed7">ast_devstate_prov_cb_type</a>) (const char *data)</td></tr>
<tr class="memdesc:aecf37644e65dac9938be469856e07ed7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Devicestate provider call back.  <a href="#aecf37644e65dac9938be469856e07ed7">More...</a><br /></td></tr>
<tr class="separator:aecf37644e65dac9938be469856e07ed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:af72f8a5c0601e4c1f8a852749cd44eee"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> { <br />
&#160;&#160;<a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>, 
<a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>, 
<a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>, 
<a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>, 
<br />
&#160;&#160;<a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>, 
<a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a>, 
<a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a>, 
<a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a>, 
<br />
&#160;&#160;<a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a>, 
<a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7">AST_DEVICE_TOTAL</a>
<br />
 }<tr class="memdesc:af72f8a5c0601e4c1f8a852749cd44eee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Device States.  <a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:af72f8a5c0601e4c1f8a852749cd44eee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26cbac580d3e86b529f90058f6e91ac7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7">ast_devstate_cache</a> { <a class="el" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a>, 
<a class="el" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>
 }<tr class="memdesc:a26cbac580d3e86b529f90058f6e91ac7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Device State Cachability.  <a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a26cbac580d3e86b529f90058f6e91ac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4691aa279b25aa0cb167a75bc4caa76c"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#a4691aa279b25aa0cb167a75bc4caa76c">ast_device_state</a> (const char *device)</td></tr>
<tr class="memdesc:a4691aa279b25aa0cb167a75bc4caa76c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asks a channel for device state.  <a href="#a4691aa279b25aa0cb167a75bc4caa76c">More...</a><br /></td></tr>
<tr class="separator:a4691aa279b25aa0cb167a75bc4caa76c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52892d3b3fec63dbcf67954d8c3589d5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dd/d25/structstasis__cache.html">stasis_cache</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#a52892d3b3fec63dbcf67954d8c3589d5">ast_device_state_cache</a> (void)</td></tr>
<tr class="memdesc:a52892d3b3fec63dbcf67954d8c3589d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Backend cache for <a class="el" href="../../da/da2/devicestate_8h.html#afa165c527c9181e88620823d0e0f68a1" title="Get the Stasis caching topic for device state messages. ">ast_device_state_topic_cached()</a>  <a href="#a52892d3b3fec63dbcf67954d8c3589d5">More...</a><br /></td></tr>
<tr class="separator:a52892d3b3fec63dbcf67954d8c3589d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac94ca2b82d62f44e03dc2937c9c061d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#ac94ca2b82d62f44e03dc2937c9c061d4">ast_device_state_clear_cache</a> (const char *device)</td></tr>
<tr class="memdesc:ac94ca2b82d62f44e03dc2937c9c061d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the device from the stasis cache.  <a href="#ac94ca2b82d62f44e03dc2937c9c061d4">More...</a><br /></td></tr>
<tr class="separator:ac94ca2b82d62f44e03dc2937c9c061d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9459272db1c8c968ed1aff1387f0f9fd"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a> (void)</td></tr>
<tr class="memdesc:a9459272db1c8c968ed1aff1387f0f9fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Stasis message type for device state messages.  <a href="#a9459272db1c8c968ed1aff1387f0f9fd">More...</a><br /></td></tr>
<tr class="separator:a9459272db1c8c968ed1aff1387f0f9fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85810de734ea25b982144651195bbebb"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#a85810de734ea25b982144651195bbebb">ast_device_state_topic</a> (const char *device)</td></tr>
<tr class="memdesc:a85810de734ea25b982144651195bbebb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Stasis topic for device state messages for a specific device.  <a href="#a85810de734ea25b982144651195bbebb">More...</a><br /></td></tr>
<tr class="separator:a85810de734ea25b982144651195bbebb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fa7376e8e627cf5a512209005692013"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#a9fa7376e8e627cf5a512209005692013">ast_device_state_topic_all</a> (void)</td></tr>
<tr class="memdesc:a9fa7376e8e627cf5a512209005692013"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Stasis topic for device state messages.  <a href="#a9fa7376e8e627cf5a512209005692013">More...</a><br /></td></tr>
<tr class="separator:a9fa7376e8e627cf5a512209005692013"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa165c527c9181e88620823d0e0f68a1"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#afa165c527c9181e88620823d0e0f68a1">ast_device_state_topic_cached</a> (void)</td></tr>
<tr class="memdesc:afa165c527c9181e88620823d0e0f68a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Stasis caching topic for device state messages.  <a href="#afa165c527c9181e88620823d0e0f68a1">More...</a><br /></td></tr>
<tr class="separator:afa165c527c9181e88620823d0e0f68a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3a57910a6eb04d12d793fe3df796b8e"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#ac3a57910a6eb04d12d793fe3df796b8e">ast_devstate2str</a> (enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> devstate) <a class="el" href="../../d4/dd1/compiler_8h.html#a74d759b292a027618339fab3574b9175">attribute_pure</a></td></tr>
<tr class="memdesc:ac3a57910a6eb04d12d793fe3df796b8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert device state to text string for output.  <a href="#ac3a57910a6eb04d12d793fe3df796b8e">More...</a><br /></td></tr>
<tr class="separator:ac3a57910a6eb04d12d793fe3df796b8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45534707838d05125f409430b371854a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#a45534707838d05125f409430b371854a">ast_devstate_aggregate_add</a> (struct <a class="el" href="../../d6/d7f/structast__devstate__aggregate.html">ast_devstate_aggregate</a> *agg, enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> <a class="el" href="../../d4/d88/structstate.html">state</a>)</td></tr>
<tr class="memdesc:a45534707838d05125f409430b371854a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a device state to the aggregate device state.  <a href="#a45534707838d05125f409430b371854a">More...</a><br /></td></tr>
<tr class="separator:a45534707838d05125f409430b371854a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65ebe8f28497b09769ab9edeb4eb9b86"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#a65ebe8f28497b09769ab9edeb4eb9b86">ast_devstate_aggregate_init</a> (struct <a class="el" href="../../d6/d7f/structast__devstate__aggregate.html">ast_devstate_aggregate</a> *agg)</td></tr>
<tr class="memdesc:a65ebe8f28497b09769ab9edeb4eb9b86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize aggregate device state.  <a href="#a65ebe8f28497b09769ab9edeb4eb9b86">More...</a><br /></td></tr>
<tr class="separator:a65ebe8f28497b09769ab9edeb4eb9b86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a852d7e936d4385c3bb903812de5d6403"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#a852d7e936d4385c3bb903812de5d6403">ast_devstate_aggregate_result</a> (struct <a class="el" href="../../d6/d7f/structast__devstate__aggregate.html">ast_devstate_aggregate</a> *agg)</td></tr>
<tr class="memdesc:a852d7e936d4385c3bb903812de5d6403"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the aggregate device state result.  <a href="#a852d7e936d4385c3bb903812de5d6403">More...</a><br /></td></tr>
<tr class="separator:a852d7e936d4385c3bb903812de5d6403"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62a8e6bc4b82dd797e505688f9f29bff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a> (enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> <a class="el" href="../../d4/d88/structstate.html">state</a>, enum <a class="el" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7">ast_devstate_cache</a> cachable, const char *fmt,...)</td></tr>
<tr class="memdesc:a62a8e6bc4b82dd797e505688f9f29bff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells Asterisk the State for Device is changed.  <a href="#a62a8e6bc4b82dd797e505688f9f29bff">More...</a><br /></td></tr>
<tr class="separator:a62a8e6bc4b82dd797e505688f9f29bff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb74555f2a796e00cd26bd866c52e7b6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a> (enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> <a class="el" href="../../d4/d88/structstate.html">state</a>, enum <a class="el" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7">ast_devstate_cache</a> cachable, const char *device)</td></tr>
<tr class="memdesc:acb74555f2a796e00cd26bd866c52e7b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells Asterisk the State for Device is changed.  <a href="#acb74555f2a796e00cd26bd866c52e7b6">More...</a><br /></td></tr>
<tr class="separator:acb74555f2a796e00cd26bd866c52e7b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae832fcc32c88962e73025ffeafe2961e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a> (const char *label, <a class="el" href="../../da/da2/devicestate_8h.html#aecf37644e65dac9938be469856e07ed7">ast_devstate_prov_cb_type</a> callback)</td></tr>
<tr class="memdesc:ae832fcc32c88962e73025ffeafe2961e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add device state provider.  <a href="#ae832fcc32c88962e73025ffeafe2961e">More...</a><br /></td></tr>
<tr class="separator:ae832fcc32c88962e73025ffeafe2961e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ab579ae15aaca64a904c3c41d8b8b01"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a> (const char *label)</td></tr>
<tr class="memdesc:a1ab579ae15aaca64a904c3c41d8b8b01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove device state provider.  <a href="#a1ab579ae15aaca64a904c3c41d8b8b01">More...</a><br /></td></tr>
<tr class="separator:a1ab579ae15aaca64a904c3c41d8b8b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6190de57ac370315e51f2c46724d5b10"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a> (enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> devstate) <a class="el" href="../../d4/dd1/compiler_8h.html#a74d759b292a027618339fab3574b9175">attribute_pure</a></td></tr>
<tr class="memdesc:a6190de57ac370315e51f2c46724d5b10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert device state to text string that is easier to parse.  <a href="#a6190de57ac370315e51f2c46724d5b10">More...</a><br /></td></tr>
<tr class="separator:a6190de57ac370315e51f2c46724d5b10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae148e0b95218b57b0348ab53f2f82657"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a> (const char *<a class="el" href="../../d5/d85/structval.html">val</a>)</td></tr>
<tr class="memdesc:ae148e0b95218b57b0348ab53f2f82657"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert device state from text to integer value.  <a href="#ae148e0b95218b57b0348ab53f2f82657">More...</a><br /></td></tr>
<tr class="separator:ae148e0b95218b57b0348ab53f2f82657"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9da9a09e65a9332176a523407ccac611"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#a9da9a09e65a9332176a523407ccac611">ast_parse_device_state</a> (const char *device)</td></tr>
<tr class="memdesc:a9da9a09e65a9332176a523407ccac611"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search the Channels by Name.  <a href="#a9da9a09e65a9332176a523407ccac611">More...</a><br /></td></tr>
<tr class="separator:a9da9a09e65a9332176a523407ccac611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe9dc809c9ea4d32dfb4abd5fd92dfb2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#afe9dc809c9ea4d32dfb4abd5fd92dfb2">ast_publish_device_state_full</a> (const char *device, enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> <a class="el" href="../../d4/d88/structstate.html">state</a>, enum <a class="el" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7">ast_devstate_cache</a> cachable, struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *eid)</td></tr>
<tr class="memdesc:afe9dc809c9ea4d32dfb4abd5fd92dfb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a device state update with EID.  <a href="#afe9dc809c9ea4d32dfb4abd5fd92dfb2">More...</a><br /></td></tr>
<tr class="separator:afe9dc809c9ea4d32dfb4abd5fd92dfb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e0c5acc035f43741343b8ed2fcb14ea"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a> (enum <a class="el" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a> chanstate)</td></tr>
<tr class="memdesc:a8e0c5acc035f43741343b8ed2fcb14ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert channel state to devicestate.  <a href="#a8e0c5acc035f43741343b8ed2fcb14ea">More...</a><br /></td></tr>
<tr class="separator:a8e0c5acc035f43741343b8ed2fcb14ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa45f4804461e848d1d2acdba9bfba9d2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da2/devicestate_8h.html#aa45f4804461e848d1d2acdba9bfba9d2">devstate_init</a> (void)</td></tr>
<tr class="memdesc:aa45f4804461e848d1d2acdba9bfba9d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the device state core.  <a href="#aa45f4804461e848d1d2acdba9bfba9d2">More...</a><br /></td></tr>
<tr class="separator:aa45f4804461e848d1d2acdba9bfba9d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Device state management. </p>
<p>To subscribe to device state changes, use the stasis_subscribe method. For an example, see apps/app_queue.c.</p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000059">Todo:</a></b></dt><dd>Currently, when the state of a device changes, the device state provider calls one of the functions defined here to queue an object to say that the state of a device has changed. However, this does not include the new state. Another thread processes these device state change objects and calls the device state provider's callback to figure out what the new state is. It would make a lot more sense for the new state to be included in the original function call that says the state of a device has changed. However, it will take a lot of work to change this.</dd></dl>
<ul>
<li>See <a class="el" href="../../db/d16/AstExtState.html">Extension and device states in Asterisk</a> </li>
</ul>

<p class="definition">Definition in file <a class="el" href="../../da/da2/devicestate_8h_source.html">devicestate.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a053976b96658a083e1c4171276b6fc1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a053976b96658a083e1c4171276b6fc1c">&#9670;&nbsp;</a></span>ast_publish_device_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ast_publish_device_state</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">device, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d4/d88/structstate.html">state</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cachable&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../d1/d80/devicestate_8c.html#afe9dc809c9ea4d32dfb4abd5fd92dfb2">ast_publish_device_state_full</a>(device, <a class="el" href="../../d4/d88/structstate.html">state</a>, cachable, &amp;<a class="el" href="../../de/dc5/options_8c.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a device state update. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">device</td><td>The device name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>The state of the device </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cachable</td><td>Whether the device state can be cached </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/da2/devicestate_8h_source.html#l00323">323</a> of file <a class="el" href="../../da/da2/devicestate_8h_source.html">devicestate.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00471">ast_devstate_changed_literal()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00511">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00460">do_state_change()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="aecf37644e65dac9938be469856e07ed7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecf37644e65dac9938be469856e07ed7">&#9670;&nbsp;</a></span>ast_devstate_prov_cb_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>(* ast_devstate_prov_cb_type) (const char *data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Devicestate provider call back. </p>

<p class="definition">Definition at line <a class="el" href="../../da/da2/devicestate_8h_source.html#l00074">74</a> of file <a class="el" href="../../da/da2/devicestate_8h_source.html">devicestate.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="af72f8a5c0601e4c1f8a852749cd44eee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af72f8a5c0601e4c1f8a852749cd44eee">&#9670;&nbsp;</a></span>ast_device_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Device States. </p>
<dl class="section note"><dt>Note</dt><dd>The order of these states may not change because they are included in Asterisk events which may be transmitted across the network to other servers. </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"></a>AST_DEVICE_UNKNOWN&#160;</td><td class="fielddoc"><p>Device is valid but channel didn't know state </p>
</td></tr>
<tr><td class="fieldname"><a id="af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2"></a>AST_DEVICE_NOT_INUSE&#160;</td><td class="fielddoc"><p>Device is not used </p>
</td></tr>
<tr><td class="fieldname"><a id="af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190"></a>AST_DEVICE_INUSE&#160;</td><td class="fielddoc"><p>Device is in use </p>
</td></tr>
<tr><td class="fieldname"><a id="af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f"></a>AST_DEVICE_BUSY&#160;</td><td class="fielddoc"><p>Device is busy </p>
</td></tr>
<tr><td class="fieldname"><a id="af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94"></a>AST_DEVICE_INVALID&#160;</td><td class="fielddoc"><p>Device is invalid </p>
</td></tr>
<tr><td class="fieldname"><a id="af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549"></a>AST_DEVICE_UNAVAILABLE&#160;</td><td class="fielddoc"><p>Device is unavailable </p>
</td></tr>
<tr><td class="fieldname"><a id="af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46"></a>AST_DEVICE_RINGING&#160;</td><td class="fielddoc"><p>Device is ringing </p>
</td></tr>
<tr><td class="fieldname"><a id="af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d"></a>AST_DEVICE_RINGINUSE&#160;</td><td class="fielddoc"><p>Device is ringing <em>and</em> in use </p>
</td></tr>
<tr><td class="fieldname"><a id="af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1"></a>AST_DEVICE_ONHOLD&#160;</td><td class="fielddoc"><p>Device is on hold </p>
</td></tr>
<tr><td class="fieldname"><a id="af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7"></a>AST_DEVICE_TOTAL&#160;</td><td class="fielddoc"><p>Total num of device states, used for testing </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../da/da2/devicestate_8h_source.html#l00052">52</a> of file <a class="el" href="../../da/da2/devicestate_8h_source.html">devicestate.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                      {</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>,      <span class="comment">/*!&lt; Device is valid but channel didn&#39;t know state */</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>,    <span class="comment">/*!&lt; Device is not used */</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>,        <span class="comment">/*!&lt; Device is in use */</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>,         <span class="comment">/*!&lt; Device is busy */</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>,      <span class="comment">/*!&lt; Device is invalid */</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a>,  <span class="comment">/*!&lt; Device is unavailable */</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a>,      <span class="comment">/*!&lt; Device is ringing */</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a>,    <span class="comment">/*!&lt; Device is ringing *and* in use */</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a>,       <span class="comment">/*!&lt; Device is on hold */</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7">AST_DEVICE_TOTAL</a>,        <span class="comment">/*!&lt; Total num of device states, used for testing */</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;};</div><div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00061">devicestate.h:61</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00058">devicestate.h:58</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7">AST_DEVICE_TOTAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00062">devicestate.h:62</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00060">devicestate.h:60</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00054">devicestate.h:54</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00056">devicestate.h:56</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00055">devicestate.h:55</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00059">devicestate.h:59</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00057">devicestate.h:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a26cbac580d3e86b529f90058f6e91ac7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26cbac580d3e86b529f90058f6e91ac7">&#9670;&nbsp;</a></span>ast_devstate_cache</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7">ast_devstate_cache</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Device State Cachability. </p>
<dl class="section note"><dt>Note</dt><dd>This is used to define the cachability of a device state when set. </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1"></a>AST_DEVSTATE_NOT_CACHABLE&#160;</td><td class="fielddoc"><p>This device state is not cachable </p>
</td></tr>
<tr><td class="fieldname"><a id="a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779"></a>AST_DEVSTATE_CACHABLE&#160;</td><td class="fielddoc"><p>This device state is cachable </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../da/da2/devicestate_8h_source.html#l00068">68</a> of file <a class="el" href="../../da/da2/devicestate_8h_source.html">devicestate.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                        {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a>,  <span class="comment">/*!&lt; This device state is not cachable */</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>,      <span class="comment">/*!&lt; This device state is cachable */</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;};</div><div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00070">devicestate.h:70</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00069">devicestate.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4691aa279b25aa0cb167a75bc4caa76c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4691aa279b25aa0cb167a75bc4caa76c">&#9670;&nbsp;</a></span>ast_device_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Asks a channel for device state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>like a dial string</td></tr>
  </table>
  </dd>
</dl>
<p>Asks a channel for device state, data is normally a number from a dial string used by the low level module Tries the channel device state callback if not supported search in the active channels list for the device.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">an</td><td>AST_DEVICE_??? state </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00382">382</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00328">_ast_device_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;{</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <span class="comment">/* This function is called from elsewhere in the code to find out the</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">    * current state of a device.  Check the cache, first. */</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/d80/devicestate_8c.html#ad30dfe7cd43ef4cd64feed84656a856c">_ast_device_state</a>(device, 1);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;}</div><div class="ttc" id="devicestate_8c_html_ad30dfe7cd43ef4cd64feed84656a856c"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#ad30dfe7cd43ef4cd64feed84656a856c">_ast_device_state</a></div><div class="ttdeci">static enum ast_device_state _ast_device_state(const char *device, int check_cache)</div><div class="ttdoc">Check device state through channel specific function or generic function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00328">devicestate.c:328</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a52892d3b3fec63dbcf67954d8c3589d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52892d3b3fec63dbcf67954d8c3589d5">&#9670;&nbsp;</a></span>ast_device_state_cache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d25/structstasis__cache.html">stasis_cache</a>* ast_device_state_cache </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Backend cache for <a class="el" href="../../da/da2/devicestate_8h.html#afa165c527c9181e88620823d0e0f68a1" title="Get the Stasis caching topic for device state messages. ">ast_device_state_topic_cached()</a> </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Cache</td><td>of <a class="el" href="../../db/d92/structast__device__state__message.html">ast_device_state_message</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00673">673</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00220">device_state_cache</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d1d/res__manager__devicestate_8c_source.html#l00073">action_devicestatelist()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00688">ast_device_state_clear_cache()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00511">AST_TEST_DEFINE()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00559">asterisk_publication_devicestate_refresh()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00322">asterisk_start_devicestate_publishing()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00498">cache_cleanup()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00309">devstate_cached()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01588">xmpp_init_event_distribution()</a>.</p>
<div class="fragment"><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;{</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/d80/devicestate_8c.html#ad3f093f6fa21490372bf323834d2985d">device_state_cache</a>;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;}</div><div class="ttc" id="devicestate_8c_html_ad3f093f6fa21490372bf323834d2985d"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#ad3f093f6fa21490372bf323834d2985d">device_state_cache</a></div><div class="ttdeci">static struct stasis_cache * device_state_cache</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00220">devicestate.c:220</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac94ca2b82d62f44e03dc2937c9c061d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac94ca2b82d62f44e03dc2937c9c061d4">&#9670;&nbsp;</a></span>ast_device_state_clear_cache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_device_state_clear_cache </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the device from the stasis cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">The</td><td>device to clear </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if successful </td></tr>
    <tr><td class="paramname">-1</td><td>nothing to clear </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00688">688</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00673">ast_device_state_cache()</a>, <a class="el" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00683">ast_device_state_topic()</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00093">ast_eid_default</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00778">stasis_cache_clear_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00659">stasis_cache_get_by_eid()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00244">stasis_app_device_state_delete()</a>.</p>
<div class="fragment"><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;{</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *cached_msg;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   cached_msg = <a class="code" href="../../dd/d79/stasis_8h.html#a1d22721748b1bfd63ab13d92f19dfd02">stasis_cache_get_by_eid</a>(<a class="code" href="../../d1/d80/devicestate_8c.html#a52892d3b3fec63dbcf67954d8c3589d5">ast_device_state_cache</a>(),</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a>(), device, &amp;<a class="code" href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <span class="keywordflow">if</span> (!cached_msg) {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <span class="comment">/* nothing to clear */</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a169e12055004ecf0ecc355b3e3e1f218">stasis_cache_clear_create</a>(cached_msg);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   <span class="keywordflow">if</span> (msg) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../d1/d80/devicestate_8c.html#a85810de734ea25b982144651195bbebb">ast_device_state_topic</a>(device), msg);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   }</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cached_msg);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;}</div><div class="ttc" id="devicestate_8c_html_a52892d3b3fec63dbcf67954d8c3589d5"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#a52892d3b3fec63dbcf67954d8c3589d5">ast_device_state_cache</a></div><div class="ttdeci">struct stasis_cache * ast_device_state_cache(void)</div><div class="ttdoc">Backend cache for ast_device_state_topic_cached() </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00673">devicestate.c:673</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="stasis_8h_html_a169e12055004ecf0ecc355b3e3e1f218"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a169e12055004ecf0ecc355b3e3e1f218">stasis_cache_clear_create</a></div><div class="ttdeci">struct stasis_message * stasis_cache_clear_create(struct stasis_message *message)</div><div class="ttdoc">A message which instructs the caching topic to remove an entry from its cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00778">stasis_cache.c:778</a></div></div>
<div class="ttc" id="stasis_8h_html_a1d22721748b1bfd63ab13d92f19dfd02"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a1d22721748b1bfd63ab13d92f19dfd02">stasis_cache_get_by_eid</a></div><div class="ttdeci">struct stasis_message * stasis_cache_get_by_eid(struct stasis_cache *cache, struct stasis_message_type *type, const char *id, const struct ast_eid *eid)</div><div class="ttdoc">Retrieve an item from the cache for a specific entity. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00659">stasis_cache.c:659</a></div></div>
<div class="ttc" id="devicestate_8h_html_a9459272db1c8c968ed1aff1387f0f9fd"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a></div><div class="ttdeci">struct stasis_message_type * ast_device_state_message_type(void)</div><div class="ttdoc">Get the Stasis message type for device state messages. </div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="utils_8h_html_ad5db11fa27352e2b9a3c669adc76955f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a></div><div class="ttdeci">struct ast_eid ast_eid_default</div><div class="ttdoc">Global EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00093">options.c:93</a></div></div>
<div class="ttc" id="devicestate_8c_html_a85810de734ea25b982144651195bbebb"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#a85810de734ea25b982144651195bbebb">ast_device_state_topic</a></div><div class="ttdeci">struct stasis_topic * ast_device_state_topic(const char *device)</div><div class="ttdoc">Get the Stasis topic for device state messages for a specific device. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00683">devicestate.c:683</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9459272db1c8c968ed1aff1387f0f9fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9459272db1c8c968ed1aff1387f0f9fd">&#9670;&nbsp;</a></span>ast_device_state_message_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a>* ast_device_state_message_type </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the Stasis message type for device state messages. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>message type for device state messages </td></tr>
    <tr><td class="paramname">NULL</td><td>if it has not been allocated </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="reference">Referenced by <a class="el" href="../../df/d1d/res__manager__devicestate_8c_source.html#l00073">action_devicestatelist()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00688">ast_device_state_clear_cache()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00709">ast_publish_device_state_full()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00511">AST_TEST_DEFINE()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00173">asterisk_publisher_devstate_cb()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00322">asterisk_start_devicestate_publishing()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l02791">cc_generic_agent_start_monitoring()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l01409">create_new_generic_list()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00818">device_state_aggregate_calc()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l02503">device_state_cb()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00761">device_state_get_id()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00309">devstate_cached()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00583">devstate_change_cb()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00881">devstate_cleanup()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00898">devstate_init()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l02761">generic_agent_devstate_cb()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l01484">generic_monitor_devstate_cb()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l11324">load_module()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08460">load_pbx()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00360">subscribe_device_state()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01588">xmpp_init_event_distribution()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01364">xmpp_pubsub_devstate_cb()</a>.</p>

</div>
</div>
<a id="a85810de734ea25b982144651195bbebb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85810de734ea25b982144651195bbebb">&#9670;&nbsp;</a></span>ast_device_state_topic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* ast_device_state_topic </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the Stasis topic for device state messages for a specific device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uniqueid</td><td>The device for which to get the topic </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>topic structure for MWI messages for a given device </td></tr>
    <tr><td class="paramname">NULL</td><td>if it failed to be found or allocated </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00683">683</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/df4/stasis_8c_source.html#l01884">stasis_topic_pool_get_topic()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00688">ast_device_state_clear_cache()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00709">ast_publish_device_state_full()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l02791">cc_generic_agent_start_monitoring()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l01409">create_new_generic_list()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00787">device_state_aggregate_publish()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00479">remove_device_states_cb()</a>, and <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00360">subscribe_device_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;{</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d79/stasis_8h.html#a1ee1df597af46f3b489cce002b604a89">stasis_topic_pool_get_topic</a>(<a class="code" href="../../d1/d80/devicestate_8c.html#aa7c2b13aecabfb60752e99fcd5b9e930">device_state_topic_pool</a>, device);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;}</div><div class="ttc" id="stasis_8h_html_a1ee1df597af46f3b489cce002b604a89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a1ee1df597af46f3b489cce002b604a89">stasis_topic_pool_get_topic</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_pool_get_topic(struct stasis_topic_pool *pool, const char *topic_name)</div><div class="ttdoc">Find or create a topic in the pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01884">stasis.c:1884</a></div></div>
<div class="ttc" id="devicestate_8c_html_aa7c2b13aecabfb60752e99fcd5b9e930"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#aa7c2b13aecabfb60752e99fcd5b9e930">device_state_topic_pool</a></div><div class="ttdeci">static struct stasis_topic_pool * device_state_topic_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00222">devicestate.c:222</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9fa7376e8e627cf5a512209005692013"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fa7376e8e627cf5a512209005692013">&#9670;&nbsp;</a></span>ast_device_state_topic_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* ast_device_state_topic_all </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the Stasis topic for device state messages. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>topic for device state messages </td></tr>
    <tr><td class="paramname">NULL</td><td>if it has not been allocated </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00668">668</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00219">device_state_topic_all</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00709">ast_publish_device_state_full()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00666">AST_TEST_DEFINE()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00322">asterisk_start_devicestate_publishing()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00898">devstate_init()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l11324">load_module()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08460">load_pbx()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04074">publish_hint_change()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l03924">publish_hint_remove()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00360">subscribe_device_state()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01588">xmpp_init_event_distribution()</a>.</p>
<div class="fragment"><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;{</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/d80/devicestate_8c.html#aad1bf7e58406794fd0cc74737a34bd0a">device_state_topic_all</a>;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;}</div><div class="ttc" id="devicestate_8c_html_aad1bf7e58406794fd0cc74737a34bd0a"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#aad1bf7e58406794fd0cc74737a34bd0a">device_state_topic_all</a></div><div class="ttdeci">static struct stasis_topic * device_state_topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00219">devicestate.c:219</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afa165c527c9181e88620823d0e0f68a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa165c527c9181e88620823d0e0f68a1">&#9670;&nbsp;</a></span>ast_device_state_topic_cached()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* ast_device_state_topic_cached </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the Stasis caching topic for device state messages. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>caching topic for device state messages </td></tr>
    <tr><td class="paramname">NULL</td><td>if it has not been allocated </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00678">678</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00085">stasis_caching_get_topic()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00511">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;{</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d79/stasis_8h.html#a60b3b41b59f3894b40f5630524347d62">stasis_caching_get_topic</a>(<a class="code" href="../../d1/d80/devicestate_8c.html#a91145945c245d72d0747d56e92383845">device_state_topic_cached</a>);</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;}</div><div class="ttc" id="devicestate_8c_html_a91145945c245d72d0747d56e92383845"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#a91145945c245d72d0747d56e92383845">device_state_topic_cached</a></div><div class="ttdeci">static struct stasis_caching_topic * device_state_topic_cached</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00221">devicestate.c:221</a></div></div>
<div class="ttc" id="stasis_8h_html_a60b3b41b59f3894b40f5630524347d62"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a60b3b41b59f3894b40f5630524347d62">stasis_caching_get_topic</a></div><div class="ttdeci">struct stasis_topic * stasis_caching_get_topic(struct stasis_caching_topic *caching_topic)</div><div class="ttdoc">Returns the topic of cached events from a caching topics. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00085">stasis_cache.c:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3a57910a6eb04d12d793fe3df796b8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3a57910a6eb04d12d793fe3df796b8e">&#9670;&nbsp;</a></span>ast_devstate2str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_devstate2str </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td>
          <td class="paramname"><em>devstate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert device state to text string for output. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">devstate</td><td>Current device state</td></tr>
  </table>
  </dd>
</dl>
<p>Convert device state to text string for output. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00237">237</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00161">devstatestring</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01507">ast_sip_get_device_state()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00312">AST_TEST_DEFINE()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l00641">ccss_notify_device_state_change()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l02503">device_state_cb()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00460">do_state_change()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l02627">extension_state_cb()</a>, <a class="el" href="../../d3/da4/app__page_8c_source.html#l00250">page_exec()</a>, <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00108">parking_notify_metermaids()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l09654">print_queue()</a>.</p>
<div class="fragment"><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;{</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/d80/devicestate_8c.html#a5cf47a38ea7984ff6effa641c411266b">devstatestring</a>[devstate][0];</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div><div class="ttc" id="devicestate_8c_html_a5cf47a38ea7984ff6effa641c411266b"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#a5cf47a38ea7984ff6effa641c411266b">devstatestring</a></div><div class="ttdeci">static const char *const devstatestring[][2]</div><div class="ttdoc">Device state strings for printing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00161">devicestate.c:161</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a45534707838d05125f409430b371854a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45534707838d05125f409430b371854a">&#9670;&nbsp;</a></span>ast_devstate_aggregate_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_devstate_aggregate_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d7f/structast__devstate__aggregate.html">ast_devstate_aggregate</a> *&#160;</td>
          <td class="paramname"><em>agg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a device state to the aggregate device state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">agg</td><td>the state object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>the state to add</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00636">636</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/da2/devicestate_8h_source.html#l00056">AST_DEVICE_BUSY</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00055">AST_DEVICE_INUSE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00061">AST_DEVICE_ONHOLD</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00059">AST_DEVICE_RINGING</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00060">AST_DEVICE_RINGINUSE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00232">ast_devstate_aggregate::inuse</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00231">ast_devstate_aggregate::ringing</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00233">ast_devstate_aggregate::state</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d94/pbx_8c_source.html#l03081">ast_extension_state3()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00312">AST_TEST_DEFINE()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01174">chan_pjsip_devicestate()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00818">device_state_aggregate_calc()</a>, and <a class="el" href="../../db/d94/pbx_8c_source.html#l06076">handle_show_device2extenstate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;{</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> state_order[] = {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      1, <span class="comment">/* AST_DEVICE_UNKNOWN */</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      3, <span class="comment">/* AST_DEVICE_NOT_INUSE */</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      6, <span class="comment">/* AST_DEVICE_INUSE */</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      7, <span class="comment">/* AST_DEVICE_BUSY */</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      0, <span class="comment">/* AST_DEVICE_INVALID */</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      2, <span class="comment">/* AST_DEVICE_UNAVAILABLE */</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      5, <span class="comment">/* AST_DEVICE_RINGING */</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      8, <span class="comment">/* AST_DEVICE_RINGINUSE */</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      4, <span class="comment">/* AST_DEVICE_ONHOLD */</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   };</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d88/structstate.html">state</a> == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a>) {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      agg-&gt;<a class="code" href="../../d6/d7f/structast__devstate__aggregate.html#a3fe491731e2347ad2ac0484da6710d3d">ringing</a> = 1;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d88/structstate.html">state</a> == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a> || <a class="code" href="../../d4/d88/structstate.html">state</a> == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a> || <a class="code" href="../../d4/d88/structstate.html">state</a> == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>) {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      agg-&gt;<a class="code" href="../../d6/d7f/structast__devstate__aggregate.html#a26d429b73a1efc8baa56293012f63bda">inuse</a> = 1;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   }</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   <span class="keywordflow">if</span> (agg-&gt;<a class="code" href="../../d6/d7f/structast__devstate__aggregate.html#a3fe491731e2347ad2ac0484da6710d3d">ringing</a> &amp;&amp; agg-&gt;<a class="code" href="../../d6/d7f/structast__devstate__aggregate.html#a26d429b73a1efc8baa56293012f63bda">inuse</a>) {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      agg-&gt;<a class="code" href="../../d6/d7f/structast__devstate__aggregate.html#a1acd064aff48cf4d5eafec1030f8429d">state</a> = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a>;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (state_order[<a class="code" href="../../d4/d88/structstate.html">state</a>] &gt; state_order[agg-&gt;<a class="code" href="../../d6/d7f/structast__devstate__aggregate.html#a1acd064aff48cf4d5eafec1030f8429d">state</a>]) {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      agg-&gt;<a class="code" href="../../d6/d7f/structast__devstate__aggregate.html#a1acd064aff48cf4d5eafec1030f8429d">state</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   }</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00061">devicestate.h:61</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eee"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a></div><div class="ttdeci">ast_device_state</div><div class="ttdoc">Device States. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00052">devicestate.h:52</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00060">devicestate.h:60</a></div></div>
<div class="ttc" id="structast__devstate__aggregate_html_a3fe491731e2347ad2ac0484da6710d3d"><div class="ttname"><a href="../../d6/d7f/structast__devstate__aggregate.html#a3fe491731e2347ad2ac0484da6710d3d">ast_devstate_aggregate::ringing</a></div><div class="ttdeci">unsigned int ringing</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00231">devicestate.h:231</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00056">devicestate.h:56</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00055">devicestate.h:55</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00059">devicestate.h:59</a></div></div>
<div class="ttc" id="structast__devstate__aggregate_html_a1acd064aff48cf4d5eafec1030f8429d"><div class="ttname"><a href="../../d6/d7f/structast__devstate__aggregate.html#a1acd064aff48cf4d5eafec1030f8429d">ast_devstate_aggregate::state</a></div><div class="ttdeci">enum ast_device_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00233">devicestate.h:233</a></div></div>
<div class="ttc" id="structast__devstate__aggregate_html_a26d429b73a1efc8baa56293012f63bda"><div class="ttname"><a href="../../d6/d7f/structast__devstate__aggregate.html#a26d429b73a1efc8baa56293012f63bda">ast_devstate_aggregate::inuse</a></div><div class="ttdeci">unsigned int inuse</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00232">devicestate.h:232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a65ebe8f28497b09769ab9edeb4eb9b86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65ebe8f28497b09769ab9edeb4eb9b86">&#9670;&nbsp;</a></span>ast_devstate_aggregate_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_devstate_aggregate_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d7f/structast__devstate__aggregate.html">ast_devstate_aggregate</a> *&#160;</td>
          <td class="paramname"><em>agg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize aggregate device state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">agg</td><td>the state object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00630">630</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/da2/devicestate_8h_source.html#l00057">AST_DEVICE_INVALID</a>, and <a class="el" href="../../da/da2/devicestate_8h_source.html#l00233">ast_devstate_aggregate::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d94/pbx_8c_source.html#l03081">ast_extension_state3()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00312">AST_TEST_DEFINE()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01174">chan_pjsip_devicestate()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00818">device_state_aggregate_calc()</a>, and <a class="el" href="../../db/d94/pbx_8c_source.html#l06076">handle_show_device2extenstate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;{</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   memset(agg, 0, <span class="keyword">sizeof</span>(*agg));</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   agg-&gt;<a class="code" href="../../d6/d7f/structast__devstate__aggregate.html#a1acd064aff48cf4d5eafec1030f8429d">state</a> = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;}</div><div class="ttc" id="structast__devstate__aggregate_html_a1acd064aff48cf4d5eafec1030f8429d"><div class="ttname"><a href="../../d6/d7f/structast__devstate__aggregate.html#a1acd064aff48cf4d5eafec1030f8429d">ast_devstate_aggregate::state</a></div><div class="ttdeci">enum ast_device_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00233">devicestate.h:233</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00057">devicestate.h:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a852d7e936d4385c3bb903812de5d6403"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a852d7e936d4385c3bb903812de5d6403">&#9670;&nbsp;</a></span>ast_devstate_aggregate_result()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> ast_devstate_aggregate_result </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d7f/structast__devstate__aggregate.html">ast_devstate_aggregate</a> *&#160;</td>
          <td class="paramname"><em>agg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the aggregate device state result. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">agg</td><td>the state object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the aggregate device state after adding some number of device states. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00663">663</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/da2/devicestate_8h_source.html#l00233">ast_devstate_aggregate::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d94/pbx_8c_source.html#l03081">ast_extension_state3()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00312">AST_TEST_DEFINE()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01174">chan_pjsip_devicestate()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00818">device_state_aggregate_calc()</a>, and <a class="el" href="../../db/d94/pbx_8c_source.html#l06076">handle_show_device2extenstate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;{</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   <span class="keywordflow">return</span> agg-&gt;<a class="code" href="../../d6/d7f/structast__devstate__aggregate.html#a1acd064aff48cf4d5eafec1030f8429d">state</a>;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div><div class="ttc" id="structast__devstate__aggregate_html_a1acd064aff48cf4d5eafec1030f8429d"><div class="ttname"><a href="../../d6/d7f/structast__devstate__aggregate.html#a1acd064aff48cf4d5eafec1030f8429d">ast_devstate_aggregate::state</a></div><div class="ttdeci">enum ast_device_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00233">devicestate.h:233</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a62a8e6bc4b82dd797e505688f9f29bff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62a8e6bc4b82dd797e505688f9f29bff">&#9670;&nbsp;</a></span>ast_devstate_changed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_devstate_changed </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7">ast_devstate_cache</a>&#160;</td>
          <td class="paramname"><em>cachable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tells Asterisk the State for Device is changed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>the new state of the device </td></tr>
    <tr><td class="paramname">cachable</td><td>whether this device state is cachable </td></tr>
    <tr><td class="paramname">fmt</td><td>device name like a dial string with format parameters</td></tr>
  </table>
  </dd>
</dl>
<p>The new state of the device will be sent off to any subscribers of device states. It will also be stored in the internal event cache.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00510">510</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00471">ast_devstate_changed_literal()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00135">AST_MAX_EXTENSION</a>, and <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l08898">__expire_registry()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12317">__iax2_poke_noanswer()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l07377">add_to_queue()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00756">agent_devstate_changed()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01329">ast_sip_persistent_endpoint_update_state()</a>, <a class="el" href="../../d7/dc3/res__calendar_8c_source.html#l00892">calendar_devstate_change()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l00641">ccss_notify_device_state_change()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01612">chan_pjsip_indicate()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01457">conf_handle_first_join()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../d7/dc3/res__calendar_8c_source.html#l00626">destroy_event()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l02503">device_state_cb()</a>, <a class="el" href="../../d7/d0b/func__devstate_8c_source.html#l00109">devstate_write()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l16646">expire_register()</a>, <a class="el" href="../../d7/d0b/func__devstate_8c_source.html#l00238">handle_cli_devstate_change()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l06546">handle_offhook_message()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l06609">handle_onhook_message()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l24006">handle_response_invite()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l24962">handle_response_peerpoke()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l06974">handle_soft_key_event_message()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l06316">handle_stimulus_message()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l02769">init_queue()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l03832">join_queue()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l04151">leave_queue()</a>, <a class="el" href="../../d7/d0b/func__devstate_8c_source.html#l00329">load_module()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l03360">member_add_to_queue()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l03376">member_remove_from_queue()</a>, <a class="el" href="../../d2/dd0/res__mwi__devstate_8c_source.html#l00033">mwi_update_cb()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l02700">my_on_hook()</a>, <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00108">parking_notify_metermaids()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00275">populate_cache()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l08948">reg_source_db()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l08189">register_verify()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l07324">remove_from_queue()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l03392">rt_handle_member_record()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l07483">set_queue_member_pause()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l17511">sip_peer_hold()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30523">sip_poke_noanswer()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l02258">skinny_register()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l07466">skinny_session_cleanup()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l06029">sla_change_trunk_state()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l06559">sla_handle_hold_event()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l07006">sla_station_exec()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l10083">socket_process_helper()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00244">stasis_app_device_state_delete()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00211">stasis_app_device_state_update()</a>, <a class="el" href="../../d2/d2d/conf__state__empty_8c_source.html#l00081">transition_to_empty()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l06844">update_call_counter()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03254">update_devstate()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l09002">update_registry()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l03266">xmpp_pak_presence()</a>.</p>
<div class="fragment"><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;{</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[<a class="code" href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a>];</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   va_list ap;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   va_start(ap, fmt);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   vsnprintf(buf, <span class="keyword">sizeof</span>(buf), fmt, ap);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   va_end(ap);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/d80/devicestate_8c.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../d4/d88/structstate.html">state</a>, cachable, buf);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="devicestate_8c_html_acb74555f2a796e00cd26bd866c52e7b6"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a></div><div class="ttdeci">int ast_devstate_changed_literal(enum ast_device_state state, enum ast_devstate_cache cachable, const char *device)</div><div class="ttdoc">Tells Asterisk the State for Device is changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00471">devicestate.c:471</a></div></div>
<div class="ttc" id="channel_8h_html_af4e59494f74ad9e0c50170d9e276ad31"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a></div><div class="ttdeci">#define AST_MAX_EXTENSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00135">channel.h:135</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acb74555f2a796e00cd26bd866c52e7b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb74555f2a796e00cd26bd866c52e7b6">&#9670;&nbsp;</a></span>ast_devstate_changed_literal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_devstate_changed_literal </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7">ast_devstate_cache</a>&#160;</td>
          <td class="paramname"><em>cachable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>device</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tells Asterisk the State for Device is changed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>the new state of the device </td></tr>
    <tr><td class="paramname">cachable</td><td>whether this device state is cachable </td></tr>
    <tr><td class="paramname">device</td><td>device name like a dial string with format parameters</td></tr>
  </table>
  </dd>
</dl>
<p>The new state of the device will be sent off to any subscribers of device states. It will also be stored in the internal event cache.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00471">471</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00053">AST_DEVICE_UNKNOWN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00323">ast_publish_device_state</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00202">state_change::cachable</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00214">change_pending</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00211">change_thread</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00203">state_change::device</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00460">do_state_change()</a>, and <a class="el" href="../../d9/d66/structstate__change.html#a205b8d03cf91d12f4f24ea061d282553">state_change::list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l02192">ast_channel_destructor()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00510">ast_devstate_changed()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07486">ast_setstate()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00666">AST_TEST_DEFINE()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01612">chan_pjsip_indicate()</a>, and <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l09153">dahdi_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;{</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d66/structstate__change.html">state_change</a> *change;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">    * If we know the state change (how nice of the caller of this function!)</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">    * then we can just generate a device state event.</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">    * Otherwise, we do the following:</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">    *   - Queue an event up to another thread that the state has changed</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">    *   - In the processing thread, it calls the callback provided by the</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">    *     device state provider (which may or may not be a channel driver)</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">    *     to determine the state.</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">    *   - If the device state provider does not know the state, or this is</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">    *     for a channel and the channel driver does not implement a device</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">    *     state callback, then we will look through the channel list to</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">    *     see if we can determine a state based on active calls.</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">    *   - Once a state has been determined, a device state event is generated.</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d88/structstate.html">state</a> != <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>) {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#a053976b96658a083e1c4171276b6fc1c">ast_publish_device_state</a>(<a class="code" href="../../d9/d66/structstate__change.html#ad4a4f6bb9638907e0d14b2d8b05c86a0">device</a>, <a class="code" href="../../d4/d88/structstate.html">state</a>, <a class="code" href="../../d9/d66/structstate__change.html#ac2f672c1450e8212e5462a749d393b0b">cachable</a>);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d80/devicestate_8c.html#a767b566dd113e1ee0de1634e07c5618d">change_thread</a> == <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a> || !(change = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*change) + strlen(<a class="code" href="../../d9/d66/structstate__change.html#ad4a4f6bb9638907e0d14b2d8b05c86a0">device</a>)))) {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="comment">/* we could not allocate a change struct, or */</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="comment">/* there is no background thread, so process the change now */</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <a class="code" href="../../d1/d80/devicestate_8c.html#ad3167fb04ecd9d917a4a64efe7a98b3b">do_state_change</a>(<a class="code" href="../../d9/d66/structstate__change.html#ad4a4f6bb9638907e0d14b2d8b05c86a0">device</a>, <a class="code" href="../../d9/d66/structstate__change.html#ac2f672c1450e8212e5462a749d393b0b">cachable</a>);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="comment">/* queue the change */</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      strcpy(change-&gt;<a class="code" href="../../d9/d66/structstate__change.html#ad4a4f6bb9638907e0d14b2d8b05c86a0">device</a>, <a class="code" href="../../d9/d66/structstate__change.html#ad4a4f6bb9638907e0d14b2d8b05c86a0">device</a>);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      change-&gt;<a class="code" href="../../d9/d66/structstate__change.html#ac2f672c1450e8212e5462a749d393b0b">cachable</a> = <a class="code" href="../../d9/d66/structstate__change.html#ac2f672c1450e8212e5462a749d393b0b">cachable</a>;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d4/d96/structstate__changes.html">state_changes</a>);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d4/d96/structstate__changes.html">state_changes</a>, change, <a class="code" href="../../d9/d66/structstate__change.html#a205b8d03cf91d12f4f24ea061d282553">list</a>);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;<a class="code" href="../../d1/d80/devicestate_8c.html#aa33e22b03fb6e00eb7f27a34f0e630f1">change_pending</a>);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d4/d96/structstate__changes.html">state_changes</a>);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="devicestate_8c_html_ad3167fb04ecd9d917a4a64efe7a98b3b"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#ad3167fb04ecd9d917a4a64efe7a98b3b">do_state_change</a></div><div class="ttdeci">static void do_state_change(const char *device, enum ast_devstate_cache cachable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00460">devicestate.c:460</a></div></div>
<div class="ttc" id="structstate__change_html"><div class="ttname"><a href="../../d9/d66/structstate__change.html">state_change</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00200">devicestate.c:200</a></div></div>
<div class="ttc" id="structstate__change_html_a205b8d03cf91d12f4f24ea061d282553"><div class="ttname"><a href="../../d9/d66/structstate__change.html#a205b8d03cf91d12f4f24ea061d282553">state_change::list</a></div><div class="ttdeci">struct state_change::@380 list</div></div>
<div class="ttc" id="structstate__change_html_ac2f672c1450e8212e5462a749d393b0b"><div class="ttname"><a href="../../d9/d66/structstate__change.html#ac2f672c1450e8212e5462a749d393b0b">state_change::cachable</a></div><div class="ttdeci">enum ast_devstate_cache cachable</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00202">devicestate.c:202</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="devicestate_8c_html_a767b566dd113e1ee0de1634e07c5618d"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#a767b566dd113e1ee0de1634e07c5618d">change_thread</a></div><div class="ttdeci">static pthread_t change_thread</div><div class="ttdoc">The device state change notification thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00211">devicestate.c:211</a></div></div>
<div class="ttc" id="structstate__change_html_ad4a4f6bb9638907e0d14b2d8b05c86a0"><div class="ttname"><a href="../../d9/d66/structstate__change.html#ad4a4f6bb9638907e0d14b2d8b05c86a0">state_change::device</a></div><div class="ttdeci">char device[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00203">devicestate.c:203</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="devicestate_8c_html_aa33e22b03fb6e00eb7f27a34f0e630f1"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#aa33e22b03fb6e00eb7f27a34f0e630f1">change_pending</a></div><div class="ttdeci">static ast_cond_t change_pending</div><div class="ttdoc">Flag for the queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00214">devicestate.c:214</a></div></div>
<div class="ttc" id="structstate__changes_html"><div class="ttname"><a href="../../d4/d96/structstate__changes.html">state_changes</a></div><div class="ttdoc">The state change queue. State changes are queued for processing by a separate thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00208">devicestate.c:208</a></div></div>
<div class="ttc" id="devicestate_8h_html_a053976b96658a083e1c4171276b6fc1c"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a053976b96658a083e1c4171276b6fc1c">ast_publish_device_state</a></div><div class="ttdeci">#define ast_publish_device_state(device, state, cachable)</div><div class="ttdoc">Publish a device state update. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00323">devicestate.h:323</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae832fcc32c88962e73025ffeafe2961e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae832fcc32c88962e73025ffeafe2961e">&#9670;&nbsp;</a></span>ast_devstate_prov_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_devstate_prov_add </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/da2/devicestate_8h.html#aecf37644e65dac9938be469856e07ed7">ast_devstate_prov_cb_type</a>&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add device state provider. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">label</td><td>to use in hint, like label:object </td></tr>
    <tr><td class="paramname">callback</td><td>Callback</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00391">391</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00717">AST_RWLIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00193">devstate_prov::callback</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00192">devstate_prov::label</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00622">AST_TEST_DEFINE()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02656">load_module()</a>, and <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00121">load_parking_devstate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;{</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d04/structdevstate__prov.html">devstate_prov</a> *devcb;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d04/structdevstate__prov.html">devstate_prov</a> *devprov;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d04/structdevstate__prov.html#a255429574a13fcf8e3deacdc16211d00">callback</a> || !(devprov = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*devprov))))</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   devprov-&gt;<a class="code" href="../../dc/d04/structdevstate__prov.html#a255429574a13fcf8e3deacdc16211d00">callback</a> = <a class="code" href="../../dc/d04/structdevstate__prov.html#a255429574a13fcf8e3deacdc16211d00">callback</a>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(devprov-&gt;<a class="code" href="../../dc/d04/structdevstate__prov.html#a48e23fa2154347c433b24e799187ee4f">label</a>, <a class="code" href="../../dc/d04/structdevstate__prov.html#a48e23fa2154347c433b24e799187ee4f">label</a>, <span class="keyword">sizeof</span>(devprov-&gt;<a class="code" href="../../dc/d04/structdevstate__prov.html#a48e23fa2154347c433b24e799187ee4f">label</a>));</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d5/d11/structdevstate__provs.html">devstate_provs</a>);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d11/structdevstate__provs.html">devstate_provs</a>, devcb, list) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(devcb-&gt;<a class="code" href="../../dc/d04/structdevstate__prov.html#a48e23fa2154347c433b24e799187ee4f">label</a>, <a class="code" href="../../dc/d04/structdevstate__prov.html#a48e23fa2154347c433b24e799187ee4f">label</a>)) {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Device state provider &#39;%s&#39; already registered\n&quot;</span>, <a class="code" href="../../dc/d04/structdevstate__prov.html#a48e23fa2154347c433b24e799187ee4f">label</a>);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(devprov);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d11/structdevstate__provs.html">devstate_provs</a>);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d5/d11/structdevstate__provs.html">devstate_provs</a>, devprov, list);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d11/structdevstate__provs.html">devstate_provs</a>);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;}</div><div class="ttc" id="structdevstate__provs_html"><div class="ttname"><a href="../../d5/d11/structdevstate__provs.html">devstate_provs</a></div><div class="ttdoc">A list of providers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00198">devicestate.c:198</a></div></div>
<div class="ttc" id="structdevstate__prov_html"><div class="ttname"><a href="../../dc/d04/structdevstate__prov.html">devstate_prov</a></div><div class="ttdoc">A device state provider (not a channel) </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00191">devicestate.c:191</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structdevstate__prov_html_a255429574a13fcf8e3deacdc16211d00"><div class="ttname"><a href="../../dc/d04/structdevstate__prov.html#a255429574a13fcf8e3deacdc16211d00">devstate_prov::callback</a></div><div class="ttdeci">ast_devstate_prov_cb_type callback</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00193">devicestate.c:193</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aacc5f6b7c25e361d11d40137fd55a8e8"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00717">linkedlists.h:717</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structdevstate__prov_html_a48e23fa2154347c433b24e799187ee4f"><div class="ttname"><a href="../../dc/d04/structdevstate__prov.html#a48e23fa2154347c433b24e799187ee4f">devstate_prov::label</a></div><div class="ttdeci">char label[40]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00192">devicestate.c:192</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1ab579ae15aaca64a904c3c41d8b8b01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ab579ae15aaca64a904c3c41d8b8b01">&#9670;&nbsp;</a></span>ast_devstate_prov_del()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_devstate_prov_del </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>label</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove device state provider. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">label</td><td>to use in hint, like label:object</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>on failure </td></tr>
    <tr><td class="paramname">0</td><td>on success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00418">418</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, and <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00192">devstate_prov::label</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00622">AST_TEST_DEFINE()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00456">load_module()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02624">unload_module()</a>, and <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00116">unload_parking_devstate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;{</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d04/structdevstate__prov.html">devstate_prov</a> *devcb;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d5/d11/structdevstate__provs.html">devstate_provs</a>);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d5/d11/structdevstate__provs.html">devstate_provs</a>, devcb, list) {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(devcb-&gt;<a class="code" href="../../dc/d04/structdevstate__prov.html#a48e23fa2154347c433b24e799187ee4f">label</a>, <a class="code" href="../../dc/d04/structdevstate__prov.html#a48e23fa2154347c433b24e799187ee4f">label</a>)) {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(list);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(devcb);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;         res = 0;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      }</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d11/structdevstate__provs.html">devstate_provs</a>);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div><div class="ttc" id="structdevstate__provs_html"><div class="ttname"><a href="../../d5/d11/structdevstate__provs.html">devstate_provs</a></div><div class="ttdoc">A list of providers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00198">devicestate.c:198</a></div></div>
<div class="ttc" id="structdevstate__prov_html"><div class="ttname"><a href="../../dc/d04/structdevstate__prov.html">devstate_prov</a></div><div class="ttdoc">A device state provider (not a channel) </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00191">devicestate.c:191</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structdevstate__prov_html_a48e23fa2154347c433b24e799187ee4f"><div class="ttname"><a href="../../dc/d04/structdevstate__prov.html#a48e23fa2154347c433b24e799187ee4f">devstate_prov::label</a></div><div class="ttdeci">char label[40]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00192">devicestate.c:192</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6190de57ac370315e51f2c46724d5b10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6190de57ac370315e51f2c46724d5b10">&#9670;&nbsp;</a></span>ast_devstate_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_devstate_str </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td>
          <td class="paramname"><em>devstate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert device state to text string that is easier to parse. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">devstate</td><td>Current device state </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00255">255</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00161">devstatestring</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02426">agent_handle_show_specific()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02327">agent_show_requested()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00788">AST_TEST_DEFINE()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00173">asterisk_publisher_devstate_cb()</a>, <a class="el" href="../../d7/d0b/func__devstate_8c_source.html#l00102">devstate_read()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00938">devstate_to_ami()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l06076">handle_show_device2extenstate()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00160">stasis_app_device_state_to_json()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01364">xmpp_pubsub_devstate_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;{</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/d80/devicestate_8c.html#a5cf47a38ea7984ff6effa641c411266b">devstatestring</a>[<a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>][1];</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="devicestate_8c_html_a5cf47a38ea7984ff6effa641c411266b"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#a5cf47a38ea7984ff6effa641c411266b">devstatestring</a></div><div class="ttdeci">static const char *const devstatestring[][2]</div><div class="ttdoc">Device state strings for printing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00161">devicestate.c:161</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae148e0b95218b57b0348ab53f2f82657"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae148e0b95218b57b0348ab53f2f82657">&#9670;&nbsp;</a></span>ast_devstate_val()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> ast_devstate_val </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert device state from text to integer value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">val</td><td>The text representing the device state. Valid values are anything that comes after AST_DEVICE_ in one of the defined values.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The AST_DEVICE_ integer value </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00260">260</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/da2/devicestate_8h_source.html#l00056">AST_DEVICE_BUSY</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00055">AST_DEVICE_INUSE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00057">AST_DEVICE_INVALID</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00054">AST_DEVICE_NOT_INUSE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00061">AST_DEVICE_ONHOLD</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00059">AST_DEVICE_RINGING</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00060">AST_DEVICE_RINGINUSE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00058">AST_DEVICE_UNAVAILABLE</a>, and <a class="el" href="../../da/da2/devicestate_8h_source.html#l00053">AST_DEVICE_UNKNOWN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00788">AST_TEST_DEFINE()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00492">asterisk_publication_devicestate()</a>, <a class="el" href="../../d7/d0b/func__devstate_8c_source.html#l00184">custom_devstate_callback()</a>, <a class="el" href="../../d7/d0b/func__devstate_8c_source.html#l00109">devstate_write()</a>, <a class="el" href="../../d7/d0b/func__devstate_8c_source.html#l00238">handle_cli_devstate_change()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l04412">initialize_cc_devstate_map_helper()</a>, <a class="el" href="../../d7/d0b/func__devstate_8c_source.html#l00329">load_module()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00275">populate_cache()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00211">stasis_app_device_state_update()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00292">stasis_device_state_cb()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01461">xmpp_pubsub_handle_event()</a>.</p>
<div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/d85/structval.html">val</a>, <span class="stringliteral">&quot;NOT_INUSE&quot;</span>))</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/d85/structval.html">val</a>, <span class="stringliteral">&quot;INUSE&quot;</span>))</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/d85/structval.html">val</a>, <span class="stringliteral">&quot;BUSY&quot;</span>))</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/d85/structval.html">val</a>, <span class="stringliteral">&quot;INVALID&quot;</span>))</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/d85/structval.html">val</a>, <span class="stringliteral">&quot;UNAVAILABLE&quot;</span>))</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a>;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/d85/structval.html">val</a>, <span class="stringliteral">&quot;RINGING&quot;</span>))</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a>;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/d85/structval.html">val</a>, <span class="stringliteral">&quot;RINGINUSE&quot;</span>))</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/d85/structval.html">val</a>, <span class="stringliteral">&quot;ONHOLD&quot;</span>))</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div><div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00061">devicestate.h:61</a></div></div>
<div class="ttc" id="structval_html"><div class="ttname"><a href="../../d5/d85/structval.html">val</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l00325">ast_expr2.c:325</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00058">devicestate.h:58</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00060">devicestate.h:60</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00054">devicestate.h:54</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00056">devicestate.h:56</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00055">devicestate.h:55</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00059">devicestate.h:59</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00057">devicestate.h:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9da9a09e65a9332176a523407ccac611"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9da9a09e65a9332176a523407ccac611">&#9670;&nbsp;</a></span>ast_parse_device_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> ast_parse_device_state </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Search the Channels by Name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>like a dial string</td></tr>
  </table>
  </dd>
</dl>
<p>Search the Device in active channels by compare the channel name against the device name. Compared are only the first chars to the first '-' char.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">AST_DEVICE_UNKNOWN</td><td>if no channel found </td></tr>
    <tr><td class="paramname">AST_DEVICE_INUSE</td><td>if a channel is found</td></tr>
  </table>
  </dd>
</dl>
<p>Search the Channels by Name.</p>
<dl class="section note"><dt>Note</dt><dd>find channels with the device's name in it This function is only used for channels that does not implement devicestate natively </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00287">287</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l01434">ast_channel_get_by_name_prefix()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00485">ast_channel_hold_state()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00172">AST_CHANNEL_NAME</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">AST_CONTROL_HOLD</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00061">AST_DEVICE_ONHOLD</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00053">AST_DEVICE_UNKNOWN</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00242">ast_state_chan2dev()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00175">chan2dev::chan</a>, and <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02315">match()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00328">_ast_device_state()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00871">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d2/d43/app__chanisavail_8c_source.html#l00102">chanavail_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;{</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a>[<a class="code" href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a>];</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> res;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   snprintf(match, <span class="keyword">sizeof</span>(match), <span class="stringliteral">&quot;%s-&quot;</span>, device);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="keywordflow">if</span> (!(chan = <a class="code" href="../../d5/d7b/channel_8h.html#a71d89dbc5107b1f851dcbf1686a0d9d9">ast_channel_get_by_name_prefix</a>(match, strlen(match)))) {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ac13c3b096520bacd17e9c023280e580f">ast_channel_hold_state</a>(chan) == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      res = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      res = <a class="code" href="../../d1/d80/devicestate_8c.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a>(<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan));</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}</div><div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">include/asterisk/frame.h:293</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00061">devicestate.h:61</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eee"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a></div><div class="ttdeci">ast_device_state</div><div class="ttdoc">Device States. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00052">devicestate.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_ac13c3b096520bacd17e9c023280e580f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac13c3b096520bacd17e9c023280e580f">ast_channel_hold_state</a></div><div class="ttdeci">int ast_channel_hold_state(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00485">channel_internal_api.c:485</a></div></div>
<div class="ttc" id="devicestate_8c_html_a8e0c5acc035f43741343b8ed2fcb14ea"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a></div><div class="ttdeci">enum ast_device_state ast_state_chan2dev(enum ast_channel_state chanstate)</div><div class="ttdoc">Convert channel state to devicestate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00242">devicestate.c:242</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a7dd0190efe1c61151a9dbab078bdb263"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a></div><div class="ttdeci">static int match(struct ast_sockaddr *addr, unsigned short callno, unsigned short dcallno, const struct chan_iax2_pvt *cur, int check_dcallno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l02315">chan_iax2.c:2315</a></div></div>
<div class="ttc" id="channel_8h_html_a71d89dbc5107b1f851dcbf1686a0d9d9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a71d89dbc5107b1f851dcbf1686a0d9d9">ast_channel_get_by_name_prefix</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name_prefix(const char *name, size_t name_len)</div><div class="ttdoc">Find a channel by a name prefix. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01434">channel.c:1434</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="channel_8h_html_ab57c278099ea5f8d7cedbb41eba58b56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a></div><div class="ttdeci">#define AST_CHANNEL_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00172">channel.h:172</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afe9dc809c9ea4d32dfb4abd5fd92dfb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe9dc809c9ea4d32dfb4abd5fd92dfb2">&#9670;&nbsp;</a></span>ast_publish_device_state_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_publish_device_state_full </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7">ast_devstate_cache</a>&#160;</td>
          <td class="paramname"><em>cachable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *&#160;</td>
          <td class="paramname"><em>eid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a device state update with EID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">device</td><td>The device name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>The state of the device </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cachable</td><td>Whether the device state can be cached </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">eid</td><td>The EID of the server that originally published the message </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00709">709</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00683">ast_device_state_topic()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00668">ast_device_state_topic_all()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00547">device_state_alloc()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00140">stasis_message_create_full()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01927">stasis_topic_pool_topic_exists()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00511">AST_TEST_DEFINE()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00492">asterisk_publication_devicestate()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00583">devstate_change_cb()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00432">publish_device_state_to_stasis()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01461">xmpp_pubsub_handle_event()</a>.</p>
<div class="fragment"><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;{</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d92/structast__device__state__message.html">ast_device_state_message</a> *, device_state, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, <a class="code" href="../../d8/d9e/structmessage.html">message</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(device));</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a>()) {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   }</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   device_state = <a class="code" href="../../d1/d80/devicestate_8c.html#a2b0efab87180b8c293e5fd31b8fbaec1">device_state_alloc</a>(device, <a class="code" href="../../d4/d88/structstate.html">state</a>, cachable, eid);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   <span class="keywordflow">if</span> (!device_state) {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <a class="code" href="../../d8/d9e/structmessage.html">message</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a08010732dcea60e116e54fca0133d582">stasis_message_create_full</a>(<a class="code" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a>(), device_state,</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      eid);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9e/structmessage.html">message</a>) {</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   }</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <span class="comment">/* When a device state is to be cached it is likely that something</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">    * external will either be monitoring it or will want to pull the</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">    * information from the cache, so we always publish to the device</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">    * specific topic. Cachable updates traditionally come from such things</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">    * as a SIP or PJSIP device.</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">    * When a device state is not to be cached we only publish to its</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">    * specific topic if something has already created the topic. Publishing</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">    * to its topic otherwise would create the topic, which may not be</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">    * necessary as it could be an ephemeral device. Uncachable updates</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">    * traditionally come from such things as Local channels.</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   <span class="keywordflow">if</span> (cachable || <a class="code" href="../../dd/d79/stasis_8h.html#a947db1503987a5c215dbc7240800a13d">stasis_topic_pool_topic_exists</a>(<a class="code" href="../../d1/d80/devicestate_8c.html#aa7c2b13aecabfb60752e99fcd5b9e930">device_state_topic_pool</a>, device)) {</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      topic = <a class="code" href="../../d1/d80/devicestate_8c.html#a85810de734ea25b982144651195bbebb">ast_device_state_topic</a>(device);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      topic = <a class="code" href="../../d1/d80/devicestate_8c.html#a9fa7376e8e627cf5a512209005692013">ast_device_state_topic_all</a>();</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   }</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;   <span class="keywordflow">if</span> (!topic) {</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   }</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, <a class="code" href="../../d8/d9e/structmessage.html">message</a>);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;}</div><div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="devicestate_8c_html_aa7c2b13aecabfb60752e99fcd5b9e930"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#aa7c2b13aecabfb60752e99fcd5b9e930">device_state_topic_pool</a></div><div class="ttdeci">static struct stasis_topic_pool * device_state_topic_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00222">devicestate.c:222</a></div></div>
<div class="ttc" id="devicestate_8h_html_a9459272db1c8c968ed1aff1387f0f9fd"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a></div><div class="ttdeci">struct stasis_message_type * ast_device_state_message_type(void)</div><div class="ttdoc">Get the Stasis message type for device state messages. </div></div>
<div class="ttc" id="devicestate_8c_html_a9fa7376e8e627cf5a512209005692013"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#a9fa7376e8e627cf5a512209005692013">ast_device_state_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_device_state_topic_all(void)</div><div class="ttdoc">Get the Stasis topic for device state messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00668">devicestate.c:668</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="stasis_8h_html_a947db1503987a5c215dbc7240800a13d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a947db1503987a5c215dbc7240800a13d">stasis_topic_pool_topic_exists</a></div><div class="ttdeci">int stasis_topic_pool_topic_exists(const struct stasis_topic_pool *pool, const char *topic_name)</div><div class="ttdoc">Check if a topic exists in a pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01927">stasis.c:1927</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="devicestate_8c_html_a2b0efab87180b8c293e5fd31b8fbaec1"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#a2b0efab87180b8c293e5fd31b8fbaec1">device_state_alloc</a></div><div class="ttdeci">static struct ast_device_state_message * device_state_alloc(const char *device, enum ast_device_state state, enum ast_devstate_cache cachable, const struct ast_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00547">devicestate.c:547</a></div></div>
<div class="ttc" id="devicestate_8c_html_a85810de734ea25b982144651195bbebb"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#a85810de734ea25b982144651195bbebb">ast_device_state_topic</a></div><div class="ttdeci">struct stasis_topic * ast_device_state_topic(const char *device)</div><div class="ttdoc">Get the Stasis topic for device state messages for a specific device. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00683">devicestate.c:683</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__device__state__message_html"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html">ast_device_state_message</a></div><div class="ttdoc">The structure that contains device state. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00240">devicestate.h:240</a></div></div>
<div class="ttc" id="stasis_8h_html_a08010732dcea60e116e54fca0133d582"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a08010732dcea60e116e54fca0133d582">stasis_message_create_full</a></div><div class="ttdeci">struct stasis_message * stasis_message_create_full(struct stasis_message_type *type, void *data, const struct ast_eid *eid)</div><div class="ttdoc">Create a new message for an entity. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00140">stasis_message.c:140</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8e0c5acc035f43741343b8ed2fcb14ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e0c5acc035f43741343b8ed2fcb14ea">&#9670;&nbsp;</a></span>ast_state_chan2dev()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> ast_state_chan2dev </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>&#160;</td>
          <td class="paramname"><em>chanstate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert channel state to devicestate. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chanstate</td><td>Current channel state </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00242">242</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00053">AST_DEVICE_UNKNOWN</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00175">chan2dev::chan</a>, and <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00176">chan2dev::dev</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00287">ast_parse_device_state()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00788">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01174">chan_pjsip_devicestate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   chanstate &amp;= 0xFFFF;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d5/d3c/structchan2dev.html">chan2dev</a>); i++) {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d3c/structchan2dev.html">chan2dev</a>[i].chan == chanstate) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d5/d3c/structchan2dev.html">chan2dev</a>[i].<a class="code" href="../../d5/d3c/structchan2dev.html#a08551d203da323363be57ed1f699016f">dev</a>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;}</div><div class="ttc" id="structchan2dev_html_a08551d203da323363be57ed1f699016f"><div class="ttname"><a href="../../d5/d3c/structchan2dev.html#a08551d203da323363be57ed1f699016f">chan2dev::dev</a></div><div class="ttdeci">enum ast_device_state dev</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00176">devicestate.c:176</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="structchan2dev_html"><div class="ttname"><a href="../../d5/d3c/structchan2dev.html">chan2dev</a></div><div class="ttdoc">Mapping for channel states to device states. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00174">devicestate.c:174</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa45f4804461e848d1d2acdba9bfba9d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa45f4804461e848d1d2acdba9bfba9d2">&#9670;&nbsp;</a></span>devstate_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int devstate_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the device state core. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00898">898</a> of file <a class="el" href="../../d1/d80/devicestate_8c_source.html">devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00668">ast_device_state_topic_all()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00019">ast_register_cleanup()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00818">device_state_aggregate_calc()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00787">device_state_aggregate_publish()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00761">device_state_get_id()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00583">devstate_change_cb()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00881">devstate_cleanup()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00334">stasis_cache_create_full()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00090">stasis_caching_accept_message_type()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00109">stasis_caching_set_filter()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_caching_topic_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01501">STASIS_MESSAGE_TYPE_INIT</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01025">stasis_subscription_accept_message_type()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00300">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01079">stasis_subscription_set_filter()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01833">stasis_topic_pool_create()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d03/asterisk_8c_source.html#l03947">asterisk_daemon()</a>.</p>
<div class="fragment"><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;{</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../d1/d80/devicestate_8c.html#a77383d2a7043a29a56bbf3f23027ff1f">devstate_cleanup</a>);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a>) != 0) {</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   }</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;   <a class="code" href="../../d1/d80/devicestate_8c.html#aad1bf7e58406794fd0cc74737a34bd0a">device_state_topic_all</a> = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;devicestate:all&quot;</span>);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d80/devicestate_8c.html#aad1bf7e58406794fd0cc74737a34bd0a">device_state_topic_all</a>) {</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;   }</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   <a class="code" href="../../d1/d80/devicestate_8c.html#aa7c2b13aecabfb60752e99fcd5b9e930">device_state_topic_pool</a> = <a class="code" href="../../dd/d79/stasis_8h.html#aeb9a69946c2be89329630328f125330d">stasis_topic_pool_create</a>(<a class="code" href="../../d1/d80/devicestate_8c.html#a9fa7376e8e627cf5a512209005692013">ast_device_state_topic_all</a>());</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d80/devicestate_8c.html#aa7c2b13aecabfb60752e99fcd5b9e930">device_state_topic_pool</a>) {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   }</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;   <a class="code" href="../../d1/d80/devicestate_8c.html#ad3f093f6fa21490372bf323834d2985d">device_state_cache</a> = <a class="code" href="../../dd/d79/stasis_8h.html#adb417e66895425f128678fe3ed589010">stasis_cache_create_full</a>(<a class="code" href="../../d1/d80/devicestate_8c.html#a28956d4f11f23c35b3302c18d8fd74c7">device_state_get_id</a>,</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <a class="code" href="../../d1/d80/devicestate_8c.html#abd8876513f22c9e96fbb32739743e563">device_state_aggregate_calc</a>, <a class="code" href="../../d1/d80/devicestate_8c.html#ab31e59fff65e7284b07ae4933883e992">device_state_aggregate_publish</a>);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d80/devicestate_8c.html#ad3f093f6fa21490372bf323834d2985d">device_state_cache</a>) {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;   }</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;   <a class="code" href="../../d1/d80/devicestate_8c.html#a91145945c245d72d0747d56e92383845">device_state_topic_cached</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a4290101180caea800a0461017a167120">stasis_caching_topic_create</a>(<a class="code" href="../../d1/d80/devicestate_8c.html#a9fa7376e8e627cf5a512209005692013">ast_device_state_topic_all</a>(),</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <a class="code" href="../../d1/d80/devicestate_8c.html#ad3f093f6fa21490372bf323834d2985d">device_state_cache</a>);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d80/devicestate_8c.html#a91145945c245d72d0747d56e92383845">device_state_topic_cached</a>) {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;   }</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#afd235b443f5fffb17c7bc98b6d48ddd2">stasis_caching_accept_message_type</a>(<a class="code" href="../../d1/d80/devicestate_8c.html#a91145945c245d72d0747d56e92383845">device_state_topic_cached</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a>());</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a5db3f77a72f6a07c86a00f638daff07a">stasis_caching_set_filter</a>(<a class="code" href="../../d1/d80/devicestate_8c.html#a91145945c245d72d0747d56e92383845">device_state_topic_cached</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;   <a class="code" href="../../d1/d80/devicestate_8c.html#ab9d4bb8b94150a312087983adabfb516">devstate_message_sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../d1/d80/devicestate_8c.html#a9fa7376e8e627cf5a512209005692013">ast_device_state_topic_all</a>(),</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <a class="code" href="../../d1/d80/devicestate_8c.html#a13088bdc584d7d3831d537a5d05fb297">devstate_change_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d80/devicestate_8c.html#ab9d4bb8b94150a312087983adabfb516">devstate_message_sub</a>) {</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create subscription creating uncached device state aggregate events.\n&quot;</span>);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;   }</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a>(<a class="code" href="../../d1/d80/devicestate_8c.html#ab9d4bb8b94150a312087983adabfb516">devstate_message_sub</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a>());</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a52b5393bef89d7781c0d039d6489de23">stasis_subscription_set_filter</a>(<a class="code" href="../../d1/d80/devicestate_8c.html#ab9d4bb8b94150a312087983adabfb516">devstate_message_sub</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;}</div><div class="ttc" id="devicestate_8c_html_abd8876513f22c9e96fbb32739743e563"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#abd8876513f22c9e96fbb32739743e563">device_state_aggregate_calc</a></div><div class="ttdeci">static struct stasis_message * device_state_aggregate_calc(struct stasis_cache_entry *entry, struct stasis_message *new_snapshot)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00818">devicestate.c:818</a></div></div>
<div class="ttc" id="devicestate_8c_html_aad1bf7e58406794fd0cc74737a34bd0a"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#aad1bf7e58406794fd0cc74737a34bd0a">device_state_topic_all</a></div><div class="ttdeci">static struct stasis_topic * device_state_topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00219">devicestate.c:219</a></div></div>
<div class="ttc" id="stasis_8h_html_afd235b443f5fffb17c7bc98b6d48ddd2"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#afd235b443f5fffb17c7bc98b6d48ddd2">stasis_caching_accept_message_type</a></div><div class="ttdeci">int stasis_caching_accept_message_type(struct stasis_caching_topic *caching_topic, struct stasis_message_type *type)</div><div class="ttdoc">Indicate to a caching topic that we are interested in a message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00090">stasis_cache.c:90</a></div></div>
<div class="ttc" id="devicestate_8c_html_a13088bdc584d7d3831d537a5d05fb297"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#a13088bdc584d7d3831d537a5d05fb297">devstate_change_cb</a></div><div class="ttdeci">static void devstate_change_cb(void *data, struct stasis_subscription *sub, struct stasis_message *msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00583">devicestate.c:583</a></div></div>
<div class="ttc" id="stasis_8h_html_a70cd046d8e3fd50de5c51aecb2830d2a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_INIT(name)</div><div class="ttdoc">Boiler-plate messaging macro for initializing message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01501">stasis.h:1501</a></div></div>
<div class="ttc" id="devicestate_8c_html_a77383d2a7043a29a56bbf3f23027ff1f"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#a77383d2a7043a29a56bbf3f23027ff1f">devstate_cleanup</a></div><div class="ttdeci">static void devstate_cleanup(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00881">devicestate.c:881</a></div></div>
<div class="ttc" id="stasis_8h_html_a4290101180caea800a0461017a167120"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a4290101180caea800a0461017a167120">stasis_caching_topic_create</a></div><div class="ttdeci">struct stasis_caching_topic * stasis_caching_topic_create(struct stasis_topic *original_topic, struct stasis_cache *cache)</div><div class="ttdoc">Create a topic which monitors and caches messages from another topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_cache.c:948</a></div></div>
<div class="ttc" id="stasis_8h_html_a52b5393bef89d7781c0d039d6489de23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a52b5393bef89d7781c0d039d6489de23">stasis_subscription_set_filter</a></div><div class="ttdeci">int stasis_subscription_set_filter(struct stasis_subscription *subscription, enum stasis_subscription_message_filter filter)</div><div class="ttdoc">Set the message type filtering level on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01079">stasis.c:1079</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="devicestate_8c_html_a91145945c245d72d0747d56e92383845"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#a91145945c245d72d0747d56e92383845">device_state_topic_cached</a></div><div class="ttdeci">static struct stasis_caching_topic * device_state_topic_cached</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00221">devicestate.c:221</a></div></div>
<div class="ttc" id="devicestate_8c_html_a28956d4f11f23c35b3302c18d8fd74c7"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#a28956d4f11f23c35b3302c18d8fd74c7">device_state_get_id</a></div><div class="ttdeci">static const char * device_state_get_id(struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00761">devicestate.c:761</a></div></div>
<div class="ttc" id="stasis_8h_html_aeb9a69946c2be89329630328f125330d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aeb9a69946c2be89329630328f125330d">stasis_topic_pool_create</a></div><div class="ttdeci">struct stasis_topic_pool * stasis_topic_pool_create(struct stasis_topic *pooled_topic)</div><div class="ttdoc">Create a topic pool that routes messages from dynamically generated topics to the given topic...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01833">stasis.c:1833</a></div></div>
<div class="ttc" id="devicestate_8c_html_aa7c2b13aecabfb60752e99fcd5b9e930"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#aa7c2b13aecabfb60752e99fcd5b9e930">device_state_topic_pool</a></div><div class="ttdeci">static struct stasis_topic_pool * device_state_topic_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00222">devicestate.c:222</a></div></div>
<div class="ttc" id="devicestate_8h_html_a9459272db1c8c968ed1aff1387f0f9fd"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a></div><div class="ttdeci">struct stasis_message_type * ast_device_state_message_type(void)</div><div class="ttdoc">Get the Stasis message type for device state messages. </div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="devicestate_8c_html_a9fa7376e8e627cf5a512209005692013"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#a9fa7376e8e627cf5a512209005692013">ast_device_state_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_device_state_topic_all(void)</div><div class="ttdoc">Get the Stasis topic for device state messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00668">devicestate.c:668</a></div></div>
<div class="ttc" id="asterisk_8h_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00019">clicompat.c:19</a></div></div>
<div class="ttc" id="devicestate_8c_html_ad3f093f6fa21490372bf323834d2985d"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#ad3f093f6fa21490372bf323834d2985d">device_state_cache</a></div><div class="ttdeci">static struct stasis_cache * device_state_cache</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00220">devicestate.c:220</a></div></div>
<div class="ttc" id="devicestate_8c_html_ab31e59fff65e7284b07ae4933883e992"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#ab31e59fff65e7284b07ae4933883e992">device_state_aggregate_publish</a></div><div class="ttdeci">static void device_state_aggregate_publish(struct stasis_topic *cache_topic, struct stasis_message *aggregate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00787">devicestate.c:787</a></div></div>
<div class="ttc" id="stasis_8h_html_adb417e66895425f128678fe3ed589010"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#adb417e66895425f128678fe3ed589010">stasis_cache_create_full</a></div><div class="ttdeci">struct stasis_cache * stasis_cache_create_full(snapshot_get_id id_fn, cache_aggregate_calc_fn aggregate_calc_fn, cache_aggregate_publish_fn aggregate_publish_fn)</div><div class="ttdoc">Create a cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00334">stasis_cache.c:334</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="stasis_8h_html_a5db3f77a72f6a07c86a00f638daff07a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5db3f77a72f6a07c86a00f638daff07a">stasis_caching_set_filter</a></div><div class="ttdeci">int stasis_caching_set_filter(struct stasis_caching_topic *caching_topic, enum stasis_subscription_message_filter filter)</div><div class="ttdoc">Set the message type filtering level on a cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00109">stasis_cache.c:109</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="devicestate_8c_html_ab9d4bb8b94150a312087983adabfb516"><div class="ttname"><a href="../../d1/d80/devicestate_8c.html#ab9d4bb8b94150a312087983adabfb516">devstate_message_sub</a></div><div class="ttdeci">struct stasis_subscription * devstate_message_sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00217">devicestate.c:217</a></div></div>
<div class="ttc" id="stasis_8h_html_a4f248ee5f4791f05d0af8768aaab282b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a></div><div class="ttdeci">int stasis_subscription_accept_message_type(struct stasis_subscription *subscription, const struct stasis_message_type *type)</div><div class="ttdoc">Indicate to a subscription that we are interested in a message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01025">stasis.c:1025</a></div></div>
<div class="ttc" id="stasis_8h_html_a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00300">stasis.h:300</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:46 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
