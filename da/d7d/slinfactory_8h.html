<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: slinfactory.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">slinfactory.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A machine to gather up arbitrary frames and convert them to raw slinear on demand.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d0/d0a/format_8h_source.html">asterisk/format.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for slinfactory.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d09/slinfactory_8h__incl.png" border="0" usemap="#slinfactory_8h" alt=""/></div>
<map name="slinfactory_8h" id="slinfactory_8h">
<area shape="rect" id="node2" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="5,80,136,107"/>
<area shape="rect" id="node3" href="../../d1/d16/codec_8h.html" title="Codec API. " alt="" coords="7,155,134,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/db5/slinfactory_8h__dep__incl.png" border="0" usemap="#slinfactory_8hdep" alt=""/></div>
<map name="slinfactory_8hdep" id="slinfactory_8hdep">
<area shape="rect" id="node2" href="../../d0/d79/audiohook_8h.html" title="Audiohooks Architecture. " alt="" coords="1309,80,1409,107"/>
<area shape="rect" id="node15" href="../../d9/d4f/audiohook_8c.html" title="Audiohooks Architecture. " alt="" coords="2279,155,2378,181"/>
<area shape="rect" id="node16" href="../../d4/d28/channel_8c.html" title="Channel Management. " alt="" coords="2402,155,2485,181"/>
<area shape="rect" id="node20" href="../../d8/df0/bridge__softmix__internal_8h.html" title="Multi&#45;party software based channel mixing (header) " alt="" coords="2481,80,2664,107"/>
<area shape="rect" id="node23" href="../../df/dcf/slinfactory_8c.html" title="A machine to gather up arbitrary frames and convert them to raw slinear on demand. " alt="" coords="2689,80,2785,107"/>
<area shape="rect" id="node3" href="../../dc/d04/app__chanspy_8c.html" title="ChanSpy: Listen in on any channel. " alt="" coords="447,155,562,181"/>
<area shape="rect" id="node4" href="../../d0/dcf/app__confbridge_8c.html" title="Conference Bridge application. " alt="" coords="586,155,717,181"/>
<area shape="rect" id="node5" href="../../de/dcd/app__jack_8c.html" title="Jack Application. " alt="" coords="741,155,831,181"/>
<area shape="rect" id="node6" href="../../d8/d93/app__mixmonitor_8c.html" title="MixMonitor() &#45; Record a call and mix the audio during the recording. " alt="" coords="855,155,991,181"/>
<area shape="rect" id="node7" href="../../d9/d4a/app__tonedetect_8c.html" title="Tone detection module. " alt="" coords="1016,155,1151,181"/>
<area shape="rect" id="node8" href="../../d9/d45/bridge__builtin__features_8c.html" title="Built in bridging features. " alt="" coords="1175,155,1354,181"/>
<area shape="rect" id="node9" href="../../dc/dcf/func__periodic__hook_8c.html" title="Periodic dialplan hooks. " alt="" coords="1378,155,1533,181"/>
<area shape="rect" id="node10" href="../../d3/d24/func__pitchshift_8c.html" title="Pitch Shift Audio Effect. " alt="" coords="1557,155,1682,181"/>
<area shape="rect" id="node11" href="../../d2/d94/func__scramble_8c.html" title="Frequency inverter. " alt="" coords="1707,155,1833,181"/>
<area shape="rect" id="node12" href="../../da/d22/func__speex_8c.html" title="Noise reduction and automatic gain control (AGC) " alt="" coords="1857,155,1963,181"/>
<area shape="rect" id="node13" href="../../d4/df5/func__talkdetect_8c.html" title="Function that raises events when talking is detected on a channel. " alt="" coords="1986,155,2117,181"/>
<area shape="rect" id="node14" href="../../db/d57/func__volume_8c.html" title="Technology independent volume control. " alt="" coords="2141,155,2255,181"/>
<area shape="rect" id="node17" href="../../d5/d92/features_8c.html" title="Routines implementing call features as call pickup, parking and transfer. " alt="" coords="5,155,92,181"/>
<area shape="rect" id="node18" href="../../db/d8e/res__mutestream_8c.html" title="MUTESTREAM audiohooks. " alt="" coords="116,155,256,181"/>
<area shape="rect" id="node19" href="../../dd/da3/res__stasis__snoop_8c.html" title="Stasis application snoop control support. " alt="" coords="280,155,423,181"/>
<area shape="rect" id="node21" href="../../db/dba/bridge__softmix__binaural_8c.html" title="Multi&#45;party software based binaural mixing. " alt="" coords="2660,155,2845,181"/>
<area shape="rect" id="node22" href="../../db/d4e/bridge__softmix_8c.html" title="Multi&#45;party software based channel mixing. " alt="" coords="2509,155,2636,181"/>
</map>
</div>
</div>
<p><a href="../../da/d7d/slinfactory_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a156e0707db1580839637c64332098bee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/slinfactory_8h.html#a156e0707db1580839637c64332098bee">AST_SLINFACTORY_MAX_HOLD</a>&#160;&#160;&#160;1280</td></tr>
<tr class="separator:a156e0707db1580839637c64332098bee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6c48d283b3d2bce6af0a09c3b8b7fd0e"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/slinfactory_8h.html#a6c48d283b3d2bce6af0a09c3b8b7fd0e">ast_slinfactory_available</a> (const struct <a class="el" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *sf)</td></tr>
<tr class="memdesc:a6c48d283b3d2bce6af0a09c3b8b7fd0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve number of samples currently in a slinfactory.  <a href="#a6c48d283b3d2bce6af0a09c3b8b7fd0e">More...</a><br /></td></tr>
<tr class="separator:a6c48d283b3d2bce6af0a09c3b8b7fd0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5361491bac02fb60732df5671879652"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/slinfactory_8h.html#ab5361491bac02fb60732df5671879652">ast_slinfactory_destroy</a> (struct <a class="el" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *sf)</td></tr>
<tr class="memdesc:ab5361491bac02fb60732df5671879652"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the contents of a slinfactory.  <a href="#ab5361491bac02fb60732df5671879652">More...</a><br /></td></tr>
<tr class="separator:ab5361491bac02fb60732df5671879652"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83e5056051013853a0d80fc5862a9fe8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/slinfactory_8h.html#a83e5056051013853a0d80fc5862a9fe8">ast_slinfactory_feed</a> (struct <a class="el" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *sf, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</td></tr>
<tr class="memdesc:a83e5056051013853a0d80fc5862a9fe8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Feed audio into a slinfactory.  <a href="#a83e5056051013853a0d80fc5862a9fe8">More...</a><br /></td></tr>
<tr class="separator:a83e5056051013853a0d80fc5862a9fe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a808da481a1c8673571179c51a97fb009"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/slinfactory_8h.html#a808da481a1c8673571179c51a97fb009">ast_slinfactory_flush</a> (struct <a class="el" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *sf)</td></tr>
<tr class="memdesc:a808da481a1c8673571179c51a97fb009"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush the contents of a slinfactory.  <a href="#a808da481a1c8673571179c51a97fb009">More...</a><br /></td></tr>
<tr class="separator:a808da481a1c8673571179c51a97fb009"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a213f392fc2df73230ec61af35072c1b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/slinfactory_8h.html#a213f392fc2df73230ec61af35072c1b2">ast_slinfactory_init</a> (struct <a class="el" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *sf)</td></tr>
<tr class="memdesc:a213f392fc2df73230ec61af35072c1b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a slinfactory.  <a href="#a213f392fc2df73230ec61af35072c1b2">More...</a><br /></td></tr>
<tr class="separator:a213f392fc2df73230ec61af35072c1b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ede1b7f136cbbeb81a9a895ff1503d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/slinfactory_8h.html#a2ede1b7f136cbbeb81a9a895ff1503d4">ast_slinfactory_init_with_format</a> (struct <a class="el" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *sf, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *slin_out)</td></tr>
<tr class="memdesc:a2ede1b7f136cbbeb81a9a895ff1503d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a slinfactory.  <a href="#a2ede1b7f136cbbeb81a9a895ff1503d4">More...</a><br /></td></tr>
<tr class="separator:a2ede1b7f136cbbeb81a9a895ff1503d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75052c0e654e356675b26afbebe93097"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/slinfactory_8h.html#a75052c0e654e356675b26afbebe93097">ast_slinfactory_read</a> (struct <a class="el" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *sf, short *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t samples)</td></tr>
<tr class="memdesc:a75052c0e654e356675b26afbebe93097"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read samples from a slinfactory.  <a href="#a75052c0e654e356675b26afbebe93097">More...</a><br /></td></tr>
<tr class="separator:a75052c0e654e356675b26afbebe93097"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A machine to gather up arbitrary frames and convert them to raw slinear on demand. </p>

<p class="definition">Definition in file <a class="el" href="../../da/d7d/slinfactory_8h_source.html">slinfactory.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a156e0707db1580839637c64332098bee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a156e0707db1580839637c64332098bee">&#9670;&nbsp;</a></span>AST_SLINFACTORY_MAX_HOLD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_SLINFACTORY_MAX_HOLD&#160;&#160;&#160;1280</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00033">33</a> of file <a class="el" href="../../da/d7d/slinfactory_8h_source.html">slinfactory.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00145">ast_slinfactory_read()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a6c48d283b3d2bce6af0a09c3b8b7fd0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c48d283b3d2bce6af0a09c3b8b7fd0e">&#9670;&nbsp;</a></span>ast_slinfactory_available()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ast_slinfactory_available </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *&#160;</td>
          <td class="paramname"><em>sf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve number of samples currently in a slinfactory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sf</td><td>The slinfactory to peek into</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of samples in slinfactory </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00199">199</a> of file <a class="el" href="../../df/dcf/slinfactory_8c_source.html">slinfactory.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00041">ast_slinfactory::size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00170">ast_audiohook_write_frame()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00955">audio_audiohook_write_list()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00253">audiohook_read_frame_both()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00219">audiohook_read_frame_single()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00942">softmix_bridge_write_voice()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00184">softmix_process_read_audio()</a>.</p>
<div class="fragment"><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;{</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   <span class="keywordflow">return</span> sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#aac913b3a1f6ef005d66bf7a84428773e">size</a>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div><div class="ttc" id="structast__slinfactory_html_aac913b3a1f6ef005d66bf7a84428773e"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#aac913b3a1f6ef005d66bf7a84428773e">ast_slinfactory::size</a></div><div class="ttdeci">unsigned int size</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00041">slinfactory.h:41</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5361491bac02fb60732df5671879652"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5361491bac02fb60732df5671879652">&#9670;&nbsp;</a></span>ast_slinfactory_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_slinfactory_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *&#160;</td>
          <td class="paramname"><em>sf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy the contents of a slinfactory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sf</td><td>The slinfactory that is no longer needed</td></tr>
  </table>
  </dd>
</dl>
<p>This function will free any memory allocated for the contents of the slinfactory. It does not free the slinfactory itself. If the sf is malloc'd, then it must be explicitly free'd after calling this function.</p>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00058">58</a> of file <a class="el" href="../../df/dcf/slinfactory_8c_source.html">slinfactory.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00475">ast_translator_free_path()</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00042">ast_slinfactory::format</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00043">ast_slinfactory::output_format</a>, and <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00037">ast_slinfactory::trans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00133">ast_audiohook_destroy()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00070">audiohook_set_internal_rate()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00303">set_softmix_bridge_data()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00817">softmix_bridge_leave()</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;   <span class="keywordflow">if</span> (sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a>) {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a>);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;   }</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;   <span class="keywordflow">while</span> ((f = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;sf-&gt;queue, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>))) {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   }</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#a87fdca689d5bd38a5de3da5ab8d0736f">output_format</a>);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;   sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#a87fdca689d5bd38a5de3da5ab8d0736f">output_format</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__slinfactory_html_ad98134a98f3e3e3b5611a5fd2117e8e4"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">ast_slinfactory::trans</a></div><div class="ttdeci">struct ast_trans_pvt * trans</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00037">slinfactory.h:37</a></div></div>
<div class="ttc" id="structast__slinfactory_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#ab425a484a0916077c5a30d9d7b229b44">ast_slinfactory::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00042">slinfactory.h:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="translate_8h_html_a8f767bf5c2095f182e7cbaa73e391207"><div class="ttname"><a href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a></div><div class="ttdeci">void ast_translator_free_path(struct ast_trans_pvt *tr)</div><div class="ttdoc">Frees a translator path Frees the given translator path structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00475">translate.c:475</a></div></div>
<div class="ttc" id="structast__slinfactory_html_a87fdca689d5bd38a5de3da5ab8d0736f"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#a87fdca689d5bd38a5de3da5ab8d0736f">ast_slinfactory::output_format</a></div><div class="ttdeci">struct ast_format * output_format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00043">slinfactory.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a83e5056051013853a0d80fc5862a9fe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83e5056051013853a0d80fc5862a9fe8">&#9670;&nbsp;</a></span>ast_slinfactory_feed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_slinfactory_feed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *&#160;</td>
          <td class="paramname"><em>sf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Feed audio into a slinfactory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sf</td><td>The slinfactory to feed into </td></tr>
    <tr><td class="paramname">f</td><td>Frame containing audio to feed in</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of frames currently in factory </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00077">77</a> of file <a class="el" href="../../df/dcf/slinfactory_8c_source.html">slinfactory.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00517">ao2_replace</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00201">ast_format_cmp()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00329">ast_format_get_codec_id()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">ast_frdup</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00577">ast_frisolate</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00438">AST_LIST_NEXT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00565">ast_translate()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00485">ast_translator_build_path()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00475">ast_translator_free_path()</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00042">ast_slinfactory::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00043">ast_slinfactory::output_format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00041">ast_slinfactory::size</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, and <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00037">ast_slinfactory::trans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00170">ast_audiohook_write_frame()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00942">softmix_bridge_write_voice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;{</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *begin_frame = f, *duped_frame = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *frame_ptr;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x = 0;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;   <span class="comment">/* In some cases, we can be passed a frame which has no data in it, but</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">    * which has a positive number of samples defined. Once such situation is</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">    * when a jitter buffer is in use and the jitter buffer interpolates a frame.</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">    * The frame it produces has data set to NULL, datalen set to 0, and samples</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">    * set to either 160 or 240.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;   <span class="keywordflow">if</span> (!f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>) {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;   }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#a87fdca689d5bd38a5de3da5ab8d0736f">output_format</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keywordflow">if</span> (sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a> &amp;&amp; (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>)) {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;         <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a>);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;         sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="keywordflow">if</span> (!sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a>) {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;         <span class="keywordflow">if</span> (!(sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a> = <a class="code" href="../../db/d39/translate_8h.html#a08790d6e05056f38fe9194134332cfef">ast_translator_build_path</a>(sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#a87fdca689d5bd38a5de3da5ab8d0736f">output_format</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>))) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot build a path from %s (%u)to %s (%u)\n&quot;</span>,</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;               <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>),</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;               <a class="code" href="../../d0/d0a/format_8h.html#a22b99f6d58d54938ec6753f3865f0005">ast_format_get_codec_id</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>),</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;               <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#a87fdca689d5bd38a5de3da5ab8d0736f">output_format</a>),</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;               <a class="code" href="../../d0/d0a/format_8h.html#a22b99f6d58d54938ec6753f3865f0005">ast_format_get_codec_id</a>(sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#a87fdca689d5bd38a5de3da5ab8d0736f">output_format</a>));</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;         }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordflow">if</span> (!(begin_frame = <a class="code" href="../../db/d39/translate_8h.html#ab09d3ccb95d1f828d2871530226f9456">ast_translate</a>(sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a>, f, 0))) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      }</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keywordflow">if</span> (!(duped_frame = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a>(begin_frame))) {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="keywordflow">if</span> (duped_frame != begin_frame) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(begin_frame);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keywordflow">if</span> (sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a>) {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;         <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a>);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;         sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">if</span> (!(duped_frame = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(f)))</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;sf-&gt;queue, frame_ptr, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      x++;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   <span class="comment">/* if the frame was translated, the translator may have returned multiple</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">      frames, so process each of them</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   <span class="keywordflow">for</span> (begin_frame = duped_frame; begin_frame; begin_frame = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(begin_frame, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)) {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;sf-&gt;queue, begin_frame, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#aac913b3a1f6ef005d66bf7a84428773e">size</a> += begin_frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <span class="keywordflow">return</span> x;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div><div class="ttc" id="include_2asterisk_2frame_8h_html_a417ee8a61074ec7570971202908e2c4f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a></div><div class="ttdeci">#define ast_frdup(fr)</div><div class="ttdoc">Copies a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">include/asterisk/frame.h:585</a></div></div>
<div class="ttc" id="structast__slinfactory_html_aac913b3a1f6ef005d66bf7a84428773e"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#aac913b3a1f6ef005d66bf7a84428773e">ast_slinfactory::size</a></div><div class="ttdeci">unsigned int size</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00041">slinfactory.h:41</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ae234825bcb65b88c0554b995ff1b8ba6"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a></div><div class="ttdeci">#define AST_LIST_NEXT(elm, field)</div><div class="ttdoc">Returns the next entry in the list after the given entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00438">linkedlists.h:438</a></div></div>
<div class="ttc" id="translate_8h_html_ab09d3ccb95d1f828d2871530226f9456"><div class="ttname"><a href="../../db/d39/translate_8h.html#ab09d3ccb95d1f828d2871530226f9456">ast_translate</a></div><div class="ttdeci">struct ast_frame * ast_translate(struct ast_trans_pvt *tr, struct ast_frame *f, int consume)</div><div class="ttdoc">translates one or more frames Apply an input frame into the translator and receive zero or one output...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00565">translate.c:565</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__slinfactory_html_ad98134a98f3e3e3b5611a5fd2117e8e4"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">ast_slinfactory::trans</a></div><div class="ttdeci">struct ast_trans_pvt * trans</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00037">slinfactory.h:37</a></div></div>
<div class="ttc" id="structast__slinfactory_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#ab425a484a0916077c5a30d9d7b229b44">ast_slinfactory::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00042">slinfactory.h:42</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="translate_8h_html_a08790d6e05056f38fe9194134332cfef"><div class="ttname"><a href="../../db/d39/translate_8h.html#a08790d6e05056f38fe9194134332cfef">ast_translator_build_path</a></div><div class="ttdeci">struct ast_trans_pvt * ast_translator_build_path(struct ast_format *dest, struct ast_format *source)</div><div class="ttdoc">Builds a translator path Build a path (possibly NULL) from source to dest. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00485">translate.c:485</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a314496ce1d74ed7fdb9c5319c5e2e953"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a></div><div class="ttdeci">#define ast_frisolate(fr)</div><div class="ttdoc">Makes a frame independent of any static storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00577">include/asterisk/frame.h:577</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa81c8462bd0574f4f9e09e71f2772f44"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a></div><div class="ttdeci">#define ao2_replace(dst, src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00517">astobj2.h:517</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="format_8h_html_a22b99f6d58d54938ec6753f3865f0005"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a22b99f6d58d54938ec6753f3865f0005">ast_format_get_codec_id</a></div><div class="ttdeci">unsigned int ast_format_get_codec_id(const struct ast_format *format)</div><div class="ttdoc">Get the codec identifier associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00329">format.c:329</a></div></div>
<div class="ttc" id="translate_8h_html_a8f767bf5c2095f182e7cbaa73e391207"><div class="ttname"><a href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a></div><div class="ttdeci">void ast_translator_free_path(struct ast_trans_pvt *tr)</div><div class="ttdoc">Frees a translator path Frees the given translator path structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00475">translate.c:475</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
<div class="ttc" id="structast__slinfactory_html_a87fdca689d5bd38a5de3da5ab8d0736f"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#a87fdca689d5bd38a5de3da5ab8d0736f">ast_slinfactory::output_format</a></div><div class="ttdeci">struct ast_format * output_format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00043">slinfactory.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a808da481a1c8673571179c51a97fb009"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a808da481a1c8673571179c51a97fb009">&#9670;&nbsp;</a></span>ast_slinfactory_flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_slinfactory_flush </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *&#160;</td>
          <td class="paramname"><em>sf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flush the contents of a slinfactory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sf</td><td>The slinfactory to flush</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00204">204</a> of file <a class="el" href="../../df/dcf/slinfactory_8c_source.html">slinfactory.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00475">ast_translator_free_path()</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00038">ast_slinfactory::hold</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00040">ast_slinfactory::holdlen</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00039">ast_slinfactory::offset</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00041">ast_slinfactory::size</a>, and <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00037">ast_slinfactory::trans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00170">ast_audiohook_write_frame()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01042">clear_talking()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00942">softmix_bridge_write_voice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   <span class="keywordflow">if</span> (sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a>) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a>);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   <span class="keywordflow">while</span> ((fr = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;sf-&gt;queue, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)))</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(fr);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#aac913b3a1f6ef005d66bf7a84428773e">size</a> = sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">holdlen</a> = 0;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#a3e02381adcf575c98eaecd9b7b486a2e">offset</a> = sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#adbc873a076c71ebf9935148849ebf62a">hold</a>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="ttc" id="structast__slinfactory_html_ac21e94e113ef23637f956a359a7b5473"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">ast_slinfactory::holdlen</a></div><div class="ttdeci">size_t holdlen</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00040">slinfactory.h:40</a></div></div>
<div class="ttc" id="structast__slinfactory_html_aac913b3a1f6ef005d66bf7a84428773e"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#aac913b3a1f6ef005d66bf7a84428773e">ast_slinfactory::size</a></div><div class="ttdeci">unsigned int size</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00041">slinfactory.h:41</a></div></div>
<div class="ttc" id="structast__slinfactory_html_adbc873a076c71ebf9935148849ebf62a"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#adbc873a076c71ebf9935148849ebf62a">ast_slinfactory::hold</a></div><div class="ttdeci">short hold[AST_SLINFACTORY_MAX_HOLD]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00038">slinfactory.h:38</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__slinfactory_html_ad98134a98f3e3e3b5611a5fd2117e8e4"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#ad98134a98f3e3e3b5611a5fd2117e8e4">ast_slinfactory::trans</a></div><div class="ttdeci">struct ast_trans_pvt * trans</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00037">slinfactory.h:37</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="structast__slinfactory_html_a3e02381adcf575c98eaecd9b7b486a2e"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#a3e02381adcf575c98eaecd9b7b486a2e">ast_slinfactory::offset</a></div><div class="ttdeci">short * offset</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00039">slinfactory.h:39</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="translate_8h_html_a8f767bf5c2095f182e7cbaa73e391207"><div class="ttname"><a href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a></div><div class="ttdeci">void ast_translator_free_path(struct ast_trans_pvt *tr)</div><div class="ttdoc">Frees a translator path Frees the given translator path structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00475">translate.c:475</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a213f392fc2df73230ec61af35072c1b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a213f392fc2df73230ec61af35072c1b2">&#9670;&nbsp;</a></span>ast_slinfactory_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_slinfactory_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *&#160;</td>
          <td class="paramname"><em>sf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a slinfactory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sf</td><td>The slinfactory to initialize</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00039">39</a> of file <a class="el" href="../../df/dcf/slinfactory_8c_source.html">slinfactory.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00038">ast_slinfactory::hold</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00039">ast_slinfactory::offset</a>, and <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00043">ast_slinfactory::output_format</a>.</p>
<div class="fragment"><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;{</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;   memset(sf, 0, <span class="keyword">sizeof</span>(*sf));</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;   sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#a3e02381adcf575c98eaecd9b7b486a2e">offset</a> = sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#adbc873a076c71ebf9935148849ebf62a">hold</a>;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;   sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#a87fdca689d5bd38a5de3da5ab8d0736f">output_format</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;}</div><div class="ttc" id="structast__slinfactory_html_adbc873a076c71ebf9935148849ebf62a"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#adbc873a076c71ebf9935148849ebf62a">ast_slinfactory::hold</a></div><div class="ttdeci">short hold[AST_SLINFACTORY_MAX_HOLD]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00038">slinfactory.h:38</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structast__slinfactory_html_a3e02381adcf575c98eaecd9b7b486a2e"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#a3e02381adcf575c98eaecd9b7b486a2e">ast_slinfactory::offset</a></div><div class="ttdeci">short * offset</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00039">slinfactory.h:39</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="structast__slinfactory_html_a87fdca689d5bd38a5de3da5ab8d0736f"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#a87fdca689d5bd38a5de3da5ab8d0736f">ast_slinfactory::output_format</a></div><div class="ttdeci">struct ast_format * output_format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00043">slinfactory.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2ede1b7f136cbbeb81a9a895ff1503d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ede1b7f136cbbeb81a9a895ff1503d4">&#9670;&nbsp;</a></span>ast_slinfactory_init_with_format()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_slinfactory_init_with_format </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *&#160;</td>
          <td class="paramname"><em>sf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>slin_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a slinfactory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sf</td><td>The slinfactory to initialize </td></tr>
    <tr><td class="paramname">slin_out</td><td>the slinear output format desired.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00046">46</a> of file <a class="el" href="../../df/dcf/slinfactory_8c_source.html">slinfactory.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00542">ast_format_cache_is_slinear()</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00038">ast_slinfactory::hold</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00039">ast_slinfactory::offset</a>, and <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00043">ast_slinfactory::output_format</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00070">audiohook_set_internal_rate()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00303">set_softmix_bridge_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;{</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;   memset(sf, 0, <span class="keyword">sizeof</span>(*sf));</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;   sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#a3e02381adcf575c98eaecd9b7b486a2e">offset</a> = sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#adbc873a076c71ebf9935148849ebf62a">hold</a>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/d1c/format__cache_8h.html#a309515067d94f11b99659093c5beefee">ast_format_cache_is_slinear</a>(slin_out)) {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;   }</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;   sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#a87fdca689d5bd38a5de3da5ab8d0736f">output_format</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(slin_out);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div><div class="ttc" id="structast__slinfactory_html_adbc873a076c71ebf9935148849ebf62a"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#adbc873a076c71ebf9935148849ebf62a">ast_slinfactory::hold</a></div><div class="ttdeci">short hold[AST_SLINFACTORY_MAX_HOLD]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00038">slinfactory.h:38</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="format__cache_8h_html_a309515067d94f11b99659093c5beefee"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a309515067d94f11b99659093c5beefee">ast_format_cache_is_slinear</a></div><div class="ttdeci">int ast_format_cache_is_slinear(struct ast_format *format)</div><div class="ttdoc">Determines if a format is one of the cached slin formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00542">format_cache.c:542</a></div></div>
<div class="ttc" id="structast__slinfactory_html_a3e02381adcf575c98eaecd9b7b486a2e"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#a3e02381adcf575c98eaecd9b7b486a2e">ast_slinfactory::offset</a></div><div class="ttdeci">short * offset</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00039">slinfactory.h:39</a></div></div>
<div class="ttc" id="structast__slinfactory_html_a87fdca689d5bd38a5de3da5ab8d0736f"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#a87fdca689d5bd38a5de3da5ab8d0736f">ast_slinfactory::output_format</a></div><div class="ttdeci">struct ast_format * output_format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00043">slinfactory.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a75052c0e654e356675b26afbebe93097"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75052c0e654e356675b26afbebe93097">&#9670;&nbsp;</a></span>ast_slinfactory_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_slinfactory_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *&#160;</td>
          <td class="paramname"><em>sf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>samples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read samples from a slinfactory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sf</td><td>The slinfactory to read from </td></tr>
    <tr><td class="paramname">buf</td><td>Buffer to put samples into </td></tr>
    <tr><td class="paramname">samples</td><td>Number of samples wanted</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of samples read </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00145">145</a> of file <a class="el" href="../../df/dcf/slinfactory_8c_source.html">slinfactory.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00033">AST_SLINFACTORY_MAX_HOLD</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00038">ast_slinfactory::hold</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00040">ast_slinfactory::holdlen</a>, <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00039">ast_slinfactory::offset</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">ast_frame::offset</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, and <a class="el" href="../../da/d7d/slinfactory_8h_source.html#l00041">ast_slinfactory::size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00955">audio_audiohook_write_list()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00253">audiohook_read_frame_both()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00219">audiohook_read_frame_single()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00184">softmix_process_read_audio()</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame_ptr;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sofar = 0, ineed, remain;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   <span class="keywordtype">short</span> *frame_data, *<a class="code" href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   <span class="keywordflow">while</span> (sofar &lt; <a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>) {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      ineed = <a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> - sofar;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">if</span> (sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">holdlen</a>) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;         <span class="keywordflow">if</span> (sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">holdlen</a> &lt;= ineed) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            memcpy(offset, sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#a3e02381adcf575c98eaecd9b7b486a2e">offset</a>, sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">holdlen</a> * <span class="keyword">sizeof</span>(*offset));</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            sofar += sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">holdlen</a>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            offset += sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">holdlen</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">holdlen</a> = 0;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#a3e02381adcf575c98eaecd9b7b486a2e">offset</a> = sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#adbc873a076c71ebf9935148849ebf62a">hold</a>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            remain = sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">holdlen</a> - ineed;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            memcpy(offset, sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#a3e02381adcf575c98eaecd9b7b486a2e">offset</a>, ineed * <span class="keyword">sizeof</span>(*offset));</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            sofar += ineed;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#a3e02381adcf575c98eaecd9b7b486a2e">offset</a> += ineed;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">holdlen</a> = remain;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;         }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      }</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">if</span> ((frame_ptr = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;sf-&gt;queue, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>))) {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;         frame_data = frame_ptr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;         <span class="keywordflow">if</span> (frame_ptr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> &lt;= ineed) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            memcpy(offset, frame_data, frame_ptr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> * <span class="keyword">sizeof</span>(*offset));</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            sofar += frame_ptr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            offset += frame_ptr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            remain = frame_ptr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> - ineed;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            memcpy(offset, frame_data, ineed * <span class="keyword">sizeof</span>(*offset));</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            sofar += ineed;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            frame_data += ineed;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="keywordflow">if</span> (remain &gt; (<a class="code" href="../../da/d7d/slinfactory_8h.html#a156e0707db1580839637c64332098bee">AST_SLINFACTORY_MAX_HOLD</a> - sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">holdlen</a>)) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;               remain = <a class="code" href="../../da/d7d/slinfactory_8h.html#a156e0707db1580839637c64332098bee">AST_SLINFACTORY_MAX_HOLD</a> - sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">holdlen</a>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            memcpy(sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#adbc873a076c71ebf9935148849ebf62a">hold</a>, frame_data, remain * <span class="keyword">sizeof</span>(*offset));</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">holdlen</a> = remain;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;         }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(frame_ptr);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   sf-&gt;<a class="code" href="../../d8/dc7/structast__slinfactory.html#aac913b3a1f6ef005d66bf7a84428773e">size</a> -= sofar;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   <span class="keywordflow">return</span> sofar;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div><div class="ttc" id="structast__slinfactory_html_ac21e94e113ef23637f956a359a7b5473"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#ac21e94e113ef23637f956a359a7b5473">ast_slinfactory::holdlen</a></div><div class="ttdeci">size_t holdlen</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00040">slinfactory.h:40</a></div></div>
<div class="ttc" id="structast__slinfactory_html_aac913b3a1f6ef005d66bf7a84428773e"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#aac913b3a1f6ef005d66bf7a84428773e">ast_slinfactory::size</a></div><div class="ttdeci">unsigned int size</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00041">slinfactory.h:41</a></div></div>
<div class="ttc" id="structast__frame_html_aed7ea92f45bd273dde380a45ddced592"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">ast_frame::offset</a></div><div class="ttdeci">int offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">include/asterisk/frame.h:179</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structast__slinfactory_html_adbc873a076c71ebf9935148849ebf62a"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#adbc873a076c71ebf9935148849ebf62a">ast_slinfactory::hold</a></div><div class="ttdeci">short hold[AST_SLINFACTORY_MAX_HOLD]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00038">slinfactory.h:38</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="structast__slinfactory_html_a3e02381adcf575c98eaecd9b7b486a2e"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html#a3e02381adcf575c98eaecd9b7b486a2e">ast_slinfactory::offset</a></div><div class="ttdeci">short * offset</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00039">slinfactory.h:39</a></div></div>
<div class="ttc" id="slinfactory_8h_html_a156e0707db1580839637c64332098bee"><div class="ttname"><a href="../../da/d7d/slinfactory_8h.html#a156e0707db1580839637c64332098bee">AST_SLINFACTORY_MAX_HOLD</a></div><div class="ttdeci">#define AST_SLINFACTORY_MAX_HOLD</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00033">slinfactory.h:33</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:47 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
