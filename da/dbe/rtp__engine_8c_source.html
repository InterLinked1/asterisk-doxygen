<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: rtp_engine.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">rtp_engine.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../da/dbe/rtp__engine_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Asterisk -- An open source telephony toolkit.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 1999 - 2008, Digium, Inc.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Joshua Colp &lt;jcolp@digium.com&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * See http://www.asterisk.org for more information about</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * the Asterisk project. Please do not directly contact</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * any of the maintainers of this project for assistance;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * the project provides a web site, mailing lists and IRC</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * channels for your use.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * This program is free software, distributed under the terms of</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * at the top of the source tree.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/*! \file</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * \brief Pluggable RTP Architecture</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * \author Joshua Colp &lt;jcolp@digium.com&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/*** MODULEINFO</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">   &lt;support_level&gt;core&lt;/support_level&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">***/</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/*** DOCUMENTATION</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">   &lt;managerEvent language=&quot;en_US&quot; name=&quot;RTCPSent&quot;&gt;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">      &lt;managerEventInstance class=&quot;EVENT_FLAG_REPORTING&quot;&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">         &lt;synopsis&gt;Raised when an RTCP packet is sent.&lt;/synopsis&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">         &lt;syntax&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">            &lt;channel_snapshot/&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">            &lt;parameter name=&quot;SSRC&quot;&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">               &lt;para&gt;The SSRC identifier for our stream&lt;/para&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">            &lt;parameter name=&quot;PT&quot;&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">               &lt;para&gt;The type of packet for this RTCP report.&lt;/para&gt;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">               &lt;enumlist&gt;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">                  &lt;enum name=&quot;200(SR)&quot;/&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">                  &lt;enum name=&quot;201(RR)&quot;/&gt;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">               &lt;/enumlist&gt;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">            &lt;parameter name=&quot;To&quot;&gt;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">               &lt;para&gt;The address the report is sent to.&lt;/para&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">            &lt;parameter name=&quot;ReportCount&quot;&gt;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">               &lt;para&gt;The number of reports that were sent.&lt;/para&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">               &lt;para&gt;The report count determines the number of ReportX headers in</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">               the message. The X for each set of report headers will range from 0 to</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">               &lt;literal&gt;ReportCount - 1&lt;/literal&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">            &lt;parameter name=&quot;SentNTP&quot; required=&quot;false&quot;&gt;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">               &lt;para&gt;The time the sender generated the report. Only valid when</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">               PT is &lt;literal&gt;200(SR)&lt;/literal&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">            &lt;parameter name=&quot;SentRTP&quot; required=&quot;false&quot;&gt;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">               &lt;para&gt;The sender&#39;s last RTP timestamp. Only valid when PT is</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">               &lt;literal&gt;200(SR)&lt;/literal&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">            &lt;parameter name=&quot;SentPackets&quot; required=&quot;false&quot;&gt;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">               &lt;para&gt;The number of packets the sender has sent. Only valid when PT</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">               is &lt;literal&gt;200(SR)&lt;/literal&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">            &lt;parameter name=&quot;SentOctets&quot; required=&quot;false&quot;&gt;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">               &lt;para&gt;The number of bytes the sender has sent. Only valid when PT is</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">               &lt;literal&gt;200(SR)&lt;/literal&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">            &lt;parameter name=&quot;ReportXSourceSSRC&quot;&gt;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">               &lt;para&gt;The SSRC for the source of this report block.&lt;/para&gt;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">            &lt;parameter name=&quot;ReportXFractionLost&quot;&gt;</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">               &lt;para&gt;The fraction of RTP data packets from &lt;literal&gt;ReportXSourceSSRC&lt;/literal&gt;</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">               lost since the previous SR or RR report was sent.&lt;/para&gt;</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">            &lt;parameter name=&quot;ReportXCumulativeLost&quot;&gt;</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">               &lt;para&gt;The total number of RTP data packets from &lt;literal&gt;ReportXSourceSSRC&lt;/literal&gt;</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">               lost since the beginning of reception.&lt;/para&gt;</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">            &lt;parameter name=&quot;ReportXHighestSequence&quot;&gt;</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">               &lt;para&gt;The highest sequence number received in an RTP data packet from</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">               &lt;literal&gt;ReportXSourceSSRC&lt;/literal&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">            &lt;parameter name=&quot;ReportXSequenceNumberCycles&quot;&gt;</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">               &lt;para&gt;The number of sequence number cycles seen for the RTP data</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">               received from &lt;literal&gt;ReportXSourceSSRC&lt;/literal&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">            &lt;parameter name=&quot;ReportXIAJitter&quot;&gt;</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">               &lt;para&gt;An estimate of the statistical variance of the RTP data packet</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">               interarrival time, measured in timestamp units.&lt;/para&gt;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">            &lt;parameter name=&quot;ReportXLSR&quot;&gt;</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">               &lt;para&gt;The last SR timestamp received from &lt;literal&gt;ReportXSourceSSRC&lt;/literal&gt;.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">               If no SR has been received from &lt;literal&gt;ReportXSourceSSRC&lt;/literal&gt;,</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">               then 0.&lt;/para&gt;</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">            &lt;parameter name=&quot;ReportXDLSR&quot;&gt;</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">               &lt;para&gt;The delay, expressed in units of 1/65536 seconds, between</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">               receiving the last SR packet from &lt;literal&gt;ReportXSourceSSRC&lt;/literal&gt;</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">               and sending this report.&lt;/para&gt;</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">         &lt;/syntax&gt;</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">         &lt;see-also&gt;</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">            &lt;ref type=&quot;managerEvent&quot;&gt;RTCPReceived&lt;/ref&gt;</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">         &lt;/see-also&gt;</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">      &lt;/managerEventInstance&gt;</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">   &lt;/managerEvent&gt;</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">   &lt;managerEvent language=&quot;en_US&quot; name=&quot;RTCPReceived&quot;&gt;</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">      &lt;managerEventInstance class=&quot;EVENT_FLAG_REPORTING&quot;&gt;</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">         &lt;synopsis&gt;Raised when an RTCP packet is received.&lt;/synopsis&gt;</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">         &lt;syntax&gt;</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">            &lt;channel_snapshot/&gt;</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">            &lt;parameter name=&quot;SSRC&quot;&gt;</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">               &lt;para&gt;The SSRC identifier for the remote system&lt;/para&gt;</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/managerEvent[@name=&#39;RTCPSent&#39;]/managerEventInstance/syntax/parameter[@name=&#39;PT&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">            &lt;parameter name=&quot;From&quot;&gt;</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">               &lt;para&gt;The address the report was received from.&lt;/para&gt;</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">            &lt;parameter name=&quot;RTT&quot;&gt;</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">               &lt;para&gt;Calculated Round-Trip Time in seconds&lt;/para&gt;</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">            &lt;parameter name=&quot;ReportCount&quot;&gt;</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">               &lt;para&gt;The number of reports that were received.&lt;/para&gt;</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">               &lt;para&gt;The report count determines the number of ReportX headers in</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">               the message. The X for each set of report headers will range from 0 to</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">               &lt;literal&gt;ReportCount - 1&lt;/literal&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/managerEvent[@name=&#39;RTCPSent&#39;]/managerEventInstance/syntax/parameter[@name=&#39;SentNTP&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/managerEvent[@name=&#39;RTCPSent&#39;]/managerEventInstance/syntax/parameter[@name=&#39;SentRTP&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/managerEvent[@name=&#39;RTCPSent&#39;]/managerEventInstance/syntax/parameter[@name=&#39;SentPackets&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/managerEvent[@name=&#39;RTCPSent&#39;]/managerEventInstance/syntax/parameter[@name=&#39;SentOctets&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/managerEvent[@name=&#39;RTCPSent&#39;]/managerEventInstance/syntax/parameter[contains(@name, &#39;ReportX&#39;)])&quot; /&gt;</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">         &lt;/syntax&gt;</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">         &lt;see-also&gt;</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">            &lt;ref type=&quot;managerEvent&quot;&gt;RTCPSent&lt;/ref&gt;</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">         &lt;/see-also&gt;</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">      &lt;/managerEventInstance&gt;</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">   &lt;/managerEvent&gt;</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/db2/asterisk_8h.html">asterisk.h</a>&quot;</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span>                       <span class="comment">/* for sqrt, MAX */</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d7/d00/sched_8h.html">sched.h</a>&gt;</span>                      <span class="comment">/* for sched_yield */</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span>                   <span class="comment">/* for timeval */</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../de/df7/time_8h.html">time.h</a>&gt;</span>                       <span class="comment">/* for time_t */</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d78/__private_8h.html">asterisk/_private.h</a>&quot;</span>          <span class="comment">/* for ast_rtp_engine_init prototype */</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/da5/astobj2_8h.html">asterisk/astobj2.h</a>&quot;</span>           <span class="comment">/* for ao2_cleanup, ao2_ref, etc */</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d7b/channel_8h.html">asterisk/channel.h</a>&quot;</span>           <span class="comment">/* for ast_channel_name, etc */</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d16/codec_8h.html">asterisk/codec.h</a>&quot;</span>             <span class="comment">/* for ast_codec_media_type2str, etc */</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d0a/format_8h.html">asterisk/format.h</a>&quot;</span>            <span class="comment">/* for ast_format_cmp, etc */</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d1c/format__cache_8h.html">asterisk/format_cache.h</a>&quot;</span>      <span class="comment">/* for ast_format_adpcm, etc */</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d3c/format__cap_8h.html">asterisk/format_cap.h</a>&quot;</span>        <span class="comment">/* for ast_format_cap_alloc, etc */</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d05/json_8h.html">asterisk/json.h</a>&quot;</span>              <span class="comment">/* for ast_json_ref, etc */</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d90/linkedlists_8h.html">asterisk/linkedlists.h</a>&quot;</span>       <span class="comment">/* for ast_rtp_engine::&lt;anonymous&gt;, etc */</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d42/lock_8h.html">asterisk/lock.h</a>&quot;</span>              <span class="comment">/* for ast_rwlock_unlock, etc */</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d8c/logger_8h.html">asterisk/logger.h</a>&quot;</span>            <span class="comment">/* for ast_log, ast_debug, etc */</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d45/manager_8h.html">asterisk/manager.h</a>&quot;</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d16/module_8h.html">asterisk/module.h</a>&quot;</span>            <span class="comment">/* for ast_module_unref, etc */</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/df1/netsock2_8h.html">asterisk/netsock2.h</a>&quot;</span>          <span class="comment">/* for ast_sockaddr_copy, etc */</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d5b/options_8h.html">asterisk/options.h</a>&quot;</span>           <span class="comment">/* for ast_option_rtpptdynamic */</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/de0/pbx_8h.html">asterisk/pbx.h</a>&quot;</span>               <span class="comment">/* for pbx_builtin_setvar_helper */</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d15/res__srtp_8h.html">asterisk/res_srtp.h</a>&quot;</span>          <span class="comment">/* for ast_srtp_res */</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/dde/rtp__engine_8h.html">asterisk/rtp_engine.h</a>&quot;</span>        <span class="comment">/* for ast_rtp_codecs, etc */</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d79/stasis_8h.html">asterisk/stasis.h</a>&quot;</span>            <span class="comment">/* for stasis_message_data, etc */</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d4a/stasis__channels_8h.html">asterisk/stasis_channels.h</a>&quot;</span>   <span class="comment">/* for ast_channel_stage_snapshot, etc */</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d90/strings_8h.html">asterisk/strings.h</a>&quot;</span>           <span class="comment">/* for ast_str_append, etc */</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/df7/time_8h.html">asterisk/time.h</a>&quot;</span>              <span class="comment">/* for ast_tvdiff_ms, ast_tvnow */</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d39/translate_8h.html">asterisk/translate.h</a>&quot;</span>         <span class="comment">/* for ast_translate_available_formats */</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d60/utils_8h.html">asterisk/utils.h</a>&quot;</span>             <span class="comment">/* for ast_free, ast_strdup, etc */</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d68/vector_8h.html">asterisk/vector.h</a>&quot;</span>            <span class="comment">/* for AST_VECTOR_GET, etc */</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="../../d9/d21/res__rtp__asterisk_8c.html#a0d5514f710438c5808ce30d0d35554c2">  177</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d0/d5d/structast__srtp__res.html">ast_srtp_res</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a0d5514f710438c5808ce30d0d35554c2">res_srtp</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="../../d9/d21/res__rtp__asterisk_8c.html#a566ad2621a8d1010836f3eaa2c1ddbe3">  178</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d6/d13/structast__srtp__policy__res.html">ast_srtp_policy_res</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a566ad2621a8d1010836f3eaa2c1ddbe3">res_srtp_policy</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">/*! Structure that contains extmap negotiation information */</span></div><div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="../../d4/dec/structrtp__extmap.html">  181</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/dec/structrtp__extmap.html">rtp_extmap</a> {<span class="comment"></span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">   /*! The RTP extension */</span></div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="../../d4/dec/structrtp__extmap.html#a1ac00de8d6d1907b657473b294e1c973">  183</a></span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ff">ast_rtp_extension</a> <a class="code" href="../../d4/dec/structrtp__extmap.html#a1ac00de8d6d1907b657473b294e1c973">extension</a>;<span class="comment"></span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">   /*! The current negotiated direction */</span></div><div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="../../d4/dec/structrtp__extmap.html#a4bb2bd134a0e0119df9ff9d62dcc3df2">  185</a></span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0">ast_rtp_extension_direction</a> <a class="code" href="../../d4/dec/structrtp__extmap.html#a4bb2bd134a0e0119df9ff9d62dcc3df2">direction</a>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;};</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">/*! Structure that represents an RTP session (instance) */</span></div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html">  189</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> {<span class="comment"></span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">   /*! Engine that is handling this RTP instance */</span></div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">  191</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d14/structast__rtp__engine.html">ast_rtp_engine</a> *<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>;<span class="comment"></span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">   /*! Data unique to the RTP engine */</span></div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#a735984d41155bc1032e09bece8f8d66d">  193</a></span>&#160;   <span class="keywordtype">void</span> *<a class="code" href="../../df/d7a/structast__rtp__instance.html#a735984d41155bc1032e09bece8f8d66d">data</a>;<span class="comment"></span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">   /*! RTP properties that have been set and their value */</span></div><div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#a280c99fea26b9f464272844eb0310713">  195</a></span>&#160;   <span class="keywordtype">int</span> properties[<a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca433053a4f148421548e609f8415c327e">AST_RTP_PROPERTY_MAX</a>];<span class="comment"></span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">   /*! Address that we are expecting RTP to come in to */</span></div><div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#a6652499b3aff8f317d4c6d1a36c6c740">  197</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> local_address;<span class="comment"></span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">   /*! The original source address */</span></div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#a5ce1d82b3b4353dc9df8d473b1c8da67">  199</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> requested_target_address;<span class="comment"></span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">   /*! Address that we are sending RTP to */</span></div><div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#a3b68fb69b6b56f6b33adf672a770341d">  201</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> incoming_source_address;<span class="comment"></span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">   /*! Instance that we are bridged to if doing remote or local bridging */</span></div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#a71b52e664623eb3a1f882d995dd2b499">  203</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *<a class="code" href="../../df/d7a/structast__rtp__instance.html#a71b52e664623eb3a1f882d995dd2b499">bridged</a>;<span class="comment"></span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">   /*! Payload and packetization information */</span></div><div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#a07d5509bbac8167e94ad8790e3fe87a4">  205</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> <a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>;<span class="comment"></span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">   /*! RTP timeout time (negative or zero means disabled, negative value means temporarily disabled) */</span></div><div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#a493b57f443cc38b3d3df9c1e584d9d82">  207</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;<span class="comment"></span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">   /*! RTP timeout when on hold (negative or zero means disabled, negative value means temporarily disabled). */</span></div><div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#a0cd9148a53de0315aa839694cea4938e">  209</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html#a0cd9148a53de0315aa839694cea4938e">holdtimeout</a>;<span class="comment"></span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">   /*! RTP keepalive interval */</span></div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#ae314c4b48027be9feab52906b6313b73">  211</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html#ae314c4b48027be9feab52906b6313b73">keepalive</a>;<span class="comment"></span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">   /*! Glue currently in use */</span></div><div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#a4c5d2e9054e218b8316ecb1dc686a3d8">  213</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a> *<a class="code" href="../../df/d7a/structast__rtp__instance.html#a4c5d2e9054e218b8316ecb1dc686a3d8">glue</a>;<span class="comment"></span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">   /*! SRTP info associated with the instance */</span></div><div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#aa0390ab4031deb2ac5b219d2547beb47">  215</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d11/structast__srtp.html">ast_srtp</a> *<a class="code" href="../../df/d7a/structast__rtp__instance.html#aa0390ab4031deb2ac5b219d2547beb47">srtp</a>;<span class="comment"></span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">   /*! SRTP info dedicated for RTCP associated with the instance */</span></div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#a109bb69fd01ee2a9cf4d1583d61b4a1e">  217</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d11/structast__srtp.html">ast_srtp</a> *<a class="code" href="../../df/d7a/structast__rtp__instance.html#a109bb69fd01ee2a9cf4d1583d61b4a1e">rtcp_srtp</a>;<span class="comment"></span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">   /*! Channel unique ID */</span></div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#a9fa64ce3bfd68a0990442e530f0e76df">  219</a></span>&#160;   <span class="keywordtype">char</span> channel_uniqueid[<a class="code" href="../../d5/d7b/channel_8h.html#abbf9887dd9233fb9b93cf5d9fa5de57f">AST_MAX_UNIQUEID</a>];<span class="comment"></span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">   /*! Time of last packet sent */</span></div><div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#a731f60e2595beaace09fef194e1f616a">  221</a></span>&#160;   time_t <a class="code" href="../../df/d7a/structast__rtp__instance.html#a731f60e2595beaace09fef194e1f616a">last_tx</a>;<span class="comment"></span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">   /*! Time of last packet received */</span></div><div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="../../df/d7a/structast__rtp__instance.html#a443d37645d5df53ac34413e5a0e52d55">  223</a></span>&#160;   time_t <a class="code" href="../../df/d7a/structast__rtp__instance.html#a443d37645d5df53ac34413e5a0e52d55">last_rx</a>;<span class="comment"></span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">   /*! Enabled RTP extensions */</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#aecf5cf511c06438b264c501224d13d89">AST_VECTOR</a>(, <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0">ast_rtp_extension_direction</a>) extmap_enabled;<span class="comment"></span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">   /*! Negotiated RTP extensions (using index based on extension) */</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#aecf5cf511c06438b264c501224d13d89">AST_VECTOR</a>(, <span class="keywordtype">int</span>) extmap_negotiated;<span class="comment"></span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">   /*! Negotiated RTP extensions (using index based on unique id) */</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#aecf5cf511c06438b264c501224d13d89">AST_VECTOR</a>(, <span class="keyword">struct</span> <a class="code" href="../../d4/dec/structrtp__extmap.html">rtp_extmap</a>) extmap_unique_ids;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;};</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment"> * \brief URIs for known RTP extensions</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#adbd6ed7f5741adbf3d0f899426772a44">  235</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#adbd6ed7f5741adbf3d0f899426772a44">rtp_extension_uris</a>[<a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa11c950ae0dff572356c026d645fef183">AST_RTP_EXTENSION_MAX</a>] = {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   [<a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffade0794251a0a4f3bfb157bb67e120290">AST_RTP_EXTENSION_UNSUPPORTED</a>]     = <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   [<a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa2244dfdd646dfd5287d1029c44d1f3f5">AST_RTP_EXTENSION_ABS_SEND_TIME</a>]   = <span class="stringliteral">&quot;http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time&quot;</span>,</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   [<a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa163f70dc8ad29138217161bca3ac9b90">AST_RTP_EXTENSION_TRANSPORT_WIDE_CC</a>]  = <span class="stringliteral">&quot;http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01&quot;</span>,</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;};</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">/*! List of RTP engines that are currently registered */</span></div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="../../d2/d7a/structengines.html#ace4e0066a5b24f84b90536e9906619f6">  242</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../df/d90/linkedlists_8h.html#a39918fd433ac42184b152c86016ef139">AST_RWLIST_HEAD_STATIC</a>(<a class="code" href="../../d2/d7a/structengines.html">engines</a>, <a class="code" href="../../d2/d14/structast__rtp__engine.html">ast_rtp_engine</a>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">/*! List of RTP glues */</span></div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="../../da/dd0/structglues.html#ace4e0066a5b24f84b90536e9906619f6">  245</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../df/d90/linkedlists_8h.html#a39918fd433ac42184b152c86016ef139">AST_RWLIST_HEAD_STATIC</a>(<a class="code" href="../../da/dd0/structglues.html">glues</a>, <a class="code" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a>);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a49b629817fb663cd16c8d0cde37a1457">  247</a></span>&#160;<span class="preprocessor">#define MAX_RTP_MIME_TYPES 128</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">/*! The following array defines the MIME Media type (and subtype) for each</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">   of our codecs, or RTP-specific data type. */</span></div><div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="../../d8/d0d/structast__rtp__mime__type.html">  251</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d8/d0d/structast__rtp__mime__type.html">ast_rtp_mime_type</a> {<span class="comment"></span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">   /*! \brief A mapping object between the Asterisk codec and this RTP payload */</span></div><div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="../../d8/d0d/structast__rtp__mime__type.html#ac9b3af8d8bb662272a6684754f6e9622">  253</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> payload_type;<span class="comment"></span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">   /*! \brief The media type */</span></div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="../../d8/d0d/structast__rtp__mime__type.html#a4fbccdeeb518e61f3b37a89484f8c347">  255</a></span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>[16];<span class="comment"></span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">   /*! \brief The format type */</span></div><div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="../../d8/d0d/structast__rtp__mime__type.html#a3ec6ee65afc37dae29a21bec31958574">  257</a></span>&#160;   <span class="keywordtype">char</span> subtype[64];<span class="comment"></span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">   /*! \brief Expected sample rate of the /c subtype */</span></div><div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="../../d8/d0d/structast__rtp__mime__type.html#a1c086f81c095b0efd7a87ee29fc5ba7e">  259</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;} <a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[128]; <span class="comment">/* This will Likely not need to grow any time soon. */</span></div><div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#affbc766683c7cb1e334faf62a0e4b0a3">  261</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../dc/d9e/structast__rwlock__info.html">ast_rwlock_t</a> <a class="code" href="../../da/dbe/rtp__engine_8c.html#affbc766683c7cb1e334faf62a0e4b0a3">mime_types_lock</a>;</div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a80375839a4de919dd2024ee65251ad0d">  262</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a80375839a4de919dd2024ee65251ad0d">mime_types_len</a> = 0;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment"> * \brief Mapping between Asterisk codecs and rtp payload types</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment"> * Static (i.e., well-known) RTP payload types for our &quot;AST_FORMAT...&quot;s:</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment"> * also, our own choices for dynamic payload types.  This is our master</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment"> * table for transmission</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"> * See http://www.iana.org/assignments/rtp-parameters for a list of</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment"> * assigned values</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a2f646e49dad8b7c0b6082ecaa2f2ff74">  274</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a2f646e49dad8b7c0b6082ecaa2f2ff74">static_RTP_PT</a>[<a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a>];</div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a688d8ec2e1a3c71d1ef9c75d1bd6e903">  275</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../dc/d9e/structast__rwlock__info.html">ast_rwlock_t</a> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a688d8ec2e1a3c71d1ef9c75d1bd6e903">static_RTP_PT_lock</a>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">/*! \brief \ref stasis topic for RTP related messages */</span></div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a48d78c6056c1d46bd4b8630fdcd9ba2f">  278</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a48d78c6056c1d46bd4b8630fdcd9ba2f">rtp_topic</a>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"> * \brief Set given json object into target with name</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"> * \param target Target json.</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"> * \param name key of given object.</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"> * \param obj Json value will be set.</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">  288</a></span>&#160;<span class="preprocessor">#define SET_AST_JSON_OBJ(target, name, obj) ({              \</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="preprocessor">   struct ast_json *j_tmp = obj;                \</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="preprocessor">   if (j_tmp) {                  \</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="preprocessor">      ast_json_object_set(target, name, j_tmp);                \</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="preprocessor">   }                 \</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor">})</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment"> * \brief Destructor for \c ast_rtp_payload_type</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a141c6bb2b98de4217df072f88be322b5">  299</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a141c6bb2b98de4217df072f88be322b5">rtp_payload_type_dtor</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;{</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a> = obj;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(payload-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a6401bb61dcc6b76101f99f0127b28a5c">  306</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a6401bb61dcc6b76101f99f0127b28a5c">rtp_payload_type_alloc</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>,</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>, <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a>, <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a9acb7c8900a0a4dc89f77ed353034b86">primary_mapping</a>)</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;{</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keyword">sizeof</span>(*type), <a class="code" href="../../da/dbe/rtp__engine_8c.html#a141c6bb2b98de4217df072f88be322b5">rtp_payload_type_dtor</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="keywordflow">if</span> (!type) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(format);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a> = type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a> = <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a> = <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a9acb7c8900a0a4dc89f77ed353034b86">primary_mapping</a> = <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a9acb7c8900a0a4dc89f77ed353034b86">primary_mapping</a>;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a6f3297fdc6574d935732ec0608b40ef6">  325</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a6f3297fdc6574d935732ec0608b40ef6">ast_rtp_engine_alloc_payload_type</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;{</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a6401bb61dcc6b76101f99f0127b28a5c">rtp_payload_type_alloc</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, 0, 0);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ab410f7a395286cc30ff0f339747eb6ff">  330</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab410f7a395286cc30ff0f339747eb6ff">ast_rtp_engine_register2</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d14/structast__rtp__engine.html">ast_rtp_engine</a> *engine, <span class="keyword">struct</span> <a class="code" href="../../d9/df5/structast__module.html">ast_module</a> *module)</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;{</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d14/structast__rtp__engine.html">ast_rtp_engine</a> *current_engine;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="comment">/* Perform a sanity check on the engine structure to make sure it has the basics */</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>) || !engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a88369d2301a12e90f67652a9d579929a">new</a> || !engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a61afdd249d4047c3f3c5e282258da706">destroy</a> || !engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a24adb9b390491d8faf485ed22ed09646">write</a> || !engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ab579676bdd804847f84450704683249d">read</a>) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;RTP Engine &#39;%s&#39; failed sanity check so it was not registered.\n&quot;</span>, !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>) ? engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> : <span class="stringliteral">&quot;Unknown&quot;</span>);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <span class="comment">/* Link owner module to the RTP engine for reference counting purposes */</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a782aff512368932b8d71b3633f88cb04">mod</a> = module;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d2/d7a/structengines.html">engines</a>);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <span class="comment">/* Ensure that no two modules with the same name are registered at the same time */</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d2/d7a/structengines.html">engines</a>, current_engine, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">if</span> (!strcmp(current_engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;An RTP engine with the name &#39;%s&#39; has already been registered.\n&quot;</span>, engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/d7a/structengines.html">engines</a>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="comment">/* The engine survived our critique. Off to the list it goes to be used */</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d2/d7a/structengines.html">engines</a>, engine, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/d7a/structengines.html">engines</a>);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Registered RTP engine &#39;%s&#39;\n&quot;</span>, engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#add142521845774a8b3cbf6ba2693aeff">  364</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#add142521845774a8b3cbf6ba2693aeff">ast_rtp_engine_unregister</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d14/structast__rtp__engine.html">ast_rtp_engine</a> *engine)</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;{</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d14/structast__rtp__engine.html">ast_rtp_engine</a> *current_engine = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d2/d7a/structengines.html">engines</a>);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <span class="keywordflow">if</span> ((current_engine = <a class="code" href="../../df/d90/linkedlists_8h.html#a6091f0518f8b6f443fd9f5150f3ac407">AST_RWLIST_REMOVE</a>(&amp;<a class="code" href="../../d2/d7a/structengines.html">engines</a>, engine, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Unregistered RTP engine &#39;%s&#39;\n&quot;</span>, engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/d7a/structengines.html">engines</a>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <span class="keywordflow">return</span> current_engine ? 0 : -1;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;}</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a897e8395e19af29b1835e7e01d75b580">  379</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a897e8395e19af29b1835e7e01d75b580">ast_rtp_glue_register2</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a> *glue, <span class="keyword">struct</span> <a class="code" href="../../d9/df5/structast__module.html">ast_module</a> *module)</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;{</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a> *current_glue = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(glue-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>)) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   glue-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a782aff512368932b8d71b3633f88cb04">mod</a> = module;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../da/dd0/structglues.html">glues</a>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../da/dd0/structglues.html">glues</a>, current_glue, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(current_glue-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>, glue-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>)) {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;RTP glue with the name &#39;%s&#39; has already been registered.\n&quot;</span>, glue-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../da/dd0/structglues.html">glues</a>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../da/dd0/structglues.html">glues</a>, glue, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../da/dd0/structglues.html">glues</a>);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Registered RTP glue &#39;%s&#39;\n&quot;</span>, glue-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;}</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#afe951ef8ac0fe6aae0db42ce12bb3791">  408</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#afe951ef8ac0fe6aae0db42ce12bb3791">ast_rtp_glue_unregister</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a> *glue)</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;{</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a> *current_glue = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../da/dd0/structglues.html">glues</a>);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <span class="keywordflow">if</span> ((current_glue = <a class="code" href="../../df/d90/linkedlists_8h.html#a6091f0518f8b6f443fd9f5150f3ac407">AST_RWLIST_REMOVE</a>(&amp;<a class="code" href="../../da/dd0/structglues.html">glues</a>, glue, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Unregistered RTP glue &#39;%s&#39;\n&quot;</span>, glue-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   }</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../da/dd0/structglues.html">glues</a>);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <span class="keywordflow">return</span> current_glue ? 0 : -1;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#af52b0487a5d5d25cf8d6e73e4abc78b7">  423</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#af52b0487a5d5d25cf8d6e73e4abc78b7">instance_destructor</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance = obj;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <span class="comment">/* Pass us off to the engine to destroy */</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a735984d41155bc1032e09bece8f8d66d">data</a>) {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">       * Lock in case the RTP engine has other threads that</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">       * need synchronization with the destruction.</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a61afdd249d4047c3f3c5e282258da706">destroy</a>(instance);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#aa0390ab4031deb2ac5b219d2547beb47">srtp</a>) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      res_srtp-&gt;<a class="code" href="../../d0/d5d/structast__srtp__res.html#a069353980fa26064fef7beec6a27a50b">destroy</a>(instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#aa0390ab4031deb2ac5b219d2547beb47">srtp</a>);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a109bb69fd01ee2a9cf4d1583d61b4a1e">rtcp_srtp</a>) {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      res_srtp-&gt;<a class="code" href="../../d0/d5d/structast__srtp__res.html#a069353980fa26064fef7beec6a27a50b">destroy</a>(instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a109bb69fd01ee2a9cf4d1583d61b4a1e">rtcp_srtp</a>);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a0afb91e7a58d2fbac8e5febe0f94069b">ast_rtp_codecs_payloads_destroy</a>(&amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a07d5509bbac8167e94ad8790e3fe87a4">codecs</a>);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;instance-&gt;extmap_enabled);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;instance-&gt;extmap_negotiated);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;instance-&gt;extmap_unique_ids);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   <span class="comment">/* Drop our engine reference */</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a>(instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a782aff512368932b8d71b3633f88cb04">mod</a>);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Destroyed RTP instance &#39;%p&#39;\n&quot;</span>, instance);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a0bfe6336fe7deb78148a84aef2732c7a">  458</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a0bfe6336fe7deb78148a84aef2732c7a">ast_rtp_instance_destroy</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;{</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(instance);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;}</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a012b2ab9fad02a5fbf9e457a69020ade">  465</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a012b2ab9fad02a5fbf9e457a69020ade">ast_rtp_instance_new</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *engine_name,</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keyword">struct</span> <a class="code" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a> *<a class="code" href="../../d0/da0/structsched.html">sched</a>, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sa,</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordtype">void</span> *<a class="code" href="../../df/d7a/structast__rtp__instance.html#a735984d41155bc1032e09bece8f8d66d">data</a>)</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;{</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> address = {{0,}};</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d14/structast__rtp__engine.html">ast_rtp_engine</a> *engine = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/df5/structast__module.html">ast_module</a> *mod_ref;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d2/d7a/structengines.html">engines</a>);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   <span class="comment">/* If an engine name was specified try to use it or otherwise use the first one registered */</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(engine_name)) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d2/d7a/structengines.html">engines</a>, engine, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;         <span class="keywordflow">if</span> (!strcmp(engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, engine_name)) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;         }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      engine = <a class="code" href="../../df/d90/linkedlists_8h.html#a64835fe6d570951b2a0404799c3d116f">AST_RWLIST_FIRST</a>(&amp;<a class="code" href="../../d2/d7a/structengines.html">engines</a>);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;   }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   <span class="comment">/* If no engine was actually found bail out now */</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   <span class="keywordflow">if</span> (!engine) {</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No RTP engine was found. Do you have one loaded?\n&quot;</span>);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/d7a/structengines.html">engines</a>);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <span class="comment">/* Bump up the reference count before we return so the module can not be unloaded */</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   mod_ref = <a class="code" href="../../d5/d16/module_8h.html#ad2dd3dce05926913c40b883cc7cff0a8">ast_module_running_ref</a>(engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a782aff512368932b8d71b3633f88cb04">mod</a>);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/d7a/structengines.html">engines</a>);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   <span class="keywordflow">if</span> (!mod_ref) {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="comment">/* BUGBUG: improve handling of this situation. */</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   }</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   <span class="comment">/* Allocate a new RTP instance */</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   <span class="keywordflow">if</span> (!(instance = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*instance), <a class="code" href="../../da/dbe/rtp__engine_8c.html#af52b0487a5d5d25cf8d6e73e4abc78b7">instance_destructor</a>))) {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <a class="code" href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a>(engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a782aff512368932b8d71b3633f88cb04">mod</a>);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a> = engine;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>, sa);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;address, sa);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/dbe/rtp__engine_8c.html#a9fa9778383fb8fefa620b9db4da22268">ast_rtp_codecs_payloads_initialize</a>(&amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a07d5509bbac8167e94ad8790e3fe87a4">codecs</a>)) {</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(instance, -1);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   }</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="comment">/* Initialize RTP extension support */</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;instance-&gt;extmap_enabled, 0) ||</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;instance-&gt;extmap_negotiated, 0) ||</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;instance-&gt;extmap_unique_ids, 0)) {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(instance, -1);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;   }</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Using engine &#39;%s&#39; for RTP instance &#39;%p&#39;\n&quot;</span>, engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, instance);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">    * And pass it off to the engine to setup</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">    * Lock in case the RTP engine has other threads that</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">    * need synchronization with the construction.</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a88369d2301a12e90f67652a9d579929a">new</a>(instance, sched, &amp;address, data)) {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Engine &#39;%s&#39; failed to setup RTP instance &#39;%p&#39;\n&quot;</span>, engine-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, instance);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(instance, -1);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;RTP instance &#39;%p&#39; is setup and ready to go\n&quot;</span>, instance);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   <span class="keywordflow">return</span> instance;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#aedb3ea08a82c48e8817dd7458319d22f">  548</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#aedb3ea08a82c48e8817dd7458319d22f">ast_rtp_instance_get_channel_id</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;{</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <span class="keywordflow">return</span> instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a9fa64ce3bfd68a0990442e530f0e76df">channel_uniqueid</a>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;}</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ab88c871dd5c164b7a0a6af5e7e12d16f">  553</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab88c871dd5c164b7a0a6af5e7e12d16f">ast_rtp_instance_set_channel_id</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">const</span> <span class="keywordtype">char</span> *uniqueid)</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;{</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a9fa64ce3bfd68a0990442e530f0e76df">channel_uniqueid</a>, uniqueid, <span class="keyword">sizeof</span>(instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a9fa64ce3bfd68a0990442e530f0e76df">channel_uniqueid</a>));</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;}</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a6b8c5b512d000914dd61cb7d7660837f">  558</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a6b8c5b512d000914dd61cb7d7660837f">ast_rtp_instance_set_data</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">void</span> *data)</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;{</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a735984d41155bc1032e09bece8f8d66d">data</a> = data;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;}</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#af4d3ce6982c29d0241c811f4de4f51c8">  563</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;{</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   <span class="keywordflow">return</span> instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;}</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a87cb097a21ab7712c27aa9e3b3a1ef69">  568</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a87cb097a21ab7712c27aa9e3b3a1ef69">ast_rtp_instance_write</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;{</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a24adb9b390491d8faf485ed22ed09646">write</a>(instance, frame);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;}</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a8e272a4ee35206ff8c4c0384b9e3f592">  578</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a8e272a4ee35206ff8c4c0384b9e3f592">ast_rtp_instance_read</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> rtcp)</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;{</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   frame = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ab579676bdd804847f84450704683249d">read</a>(instance, rtcp);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <span class="keywordflow">return</span> frame;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;}</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a852b2b1d8dbc848c5c27bd37f33e13e0">  588</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a852b2b1d8dbc848c5c27bd37f33e13e0">ast_rtp_instance_set_local_address</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>)</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;{</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>, address);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;}</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#aea2fa83e8348c478fcb44abfb3812b6c">  597</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#aea2fa83e8348c478fcb44abfb3812b6c">rtp_instance_set_incoming_source_address_nolock</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>)</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;{</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a3b68fb69b6b56f6b33adf672a770341d">incoming_source_address</a>, address);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#aa2bc973b458a176425cec2c60a2c0e79">remote_address_set</a>) {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#aa2bc973b458a176425cec2c60a2c0e79">remote_address_set</a>(instance, &amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a3b68fb69b6b56f6b33adf672a770341d">incoming_source_address</a>);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;}</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#abf8f7e808be60b78811d0435b6af4d42">  606</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#abf8f7e808be60b78811d0435b6af4d42">ast_rtp_instance_set_incoming_source_address</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>)</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;{</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aea2fa83e8348c478fcb44abfb3812b6c">rtp_instance_set_incoming_source_address_nolock</a>(instance, address);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;}</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a2d86b8c1a98801a092a3bbb72519cd37">  616</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a2d86b8c1a98801a092a3bbb72519cd37">ast_rtp_instance_set_requested_target_address</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                    <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>)</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;{</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a5ce1d82b3b4353dc9df8d473b1c8da67">requested_target_address</a>, address);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aea2fa83e8348c478fcb44abfb3812b6c">rtp_instance_set_incoming_source_address_nolock</a>(instance, address);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;}</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a1d4b04f67f8597dca5139a54483954f3">  629</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a1d4b04f67f8597dca5139a54483954f3">ast_rtp_instance_get_and_cmp_local_address</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="keyword">struct</span> <a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>)</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;{</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(address, &amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>) != 0) {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(address, &amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   }</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;}</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a80baeff1bd121c3168ede2a955e9b3a2">  643</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a80baeff1bd121c3168ede2a955e9b3a2">ast_rtp_instance_get_local_address</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="keyword">struct</span> <a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>)</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;{</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(address, &amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;}</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div><div class="line"><a name="l00651"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a3b5d807d68699a4f03505327f9ddcdc1">  651</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a3b5d807d68699a4f03505327f9ddcdc1">ast_rtp_instance_get_and_cmp_requested_target_address</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="keyword">struct</span> <a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>)</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;{</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(address, &amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a5ce1d82b3b4353dc9df8d473b1c8da67">requested_target_address</a>) != 0) {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(address, &amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a5ce1d82b3b4353dc9df8d473b1c8da67">requested_target_address</a>);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   }</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;}</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a09feabe6b52ba3f674fc0cfed7062a85">  665</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a09feabe6b52ba3f674fc0cfed7062a85">ast_rtp_instance_get_incoming_source_address</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                    <span class="keyword">struct</span> <a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>)</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;{</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(address, &amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a3b68fb69b6b56f6b33adf672a770341d">incoming_source_address</a>);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;}</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ab035447ec9d2b67c82ab84a0d4215935">  673</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab035447ec9d2b67c82ab84a0d4215935">ast_rtp_instance_get_requested_target_address</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                     <span class="keyword">struct</span> <a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>)</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;{</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(address, &amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a5ce1d82b3b4353dc9df8d473b1c8da67">requested_target_address</a>);</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;}</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a7dbc5b0f6d95748fb627dbdf063bb451">  681</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a7dbc5b0f6d95748fb627dbdf063bb451">ast_rtp_instance_set_extended_prop</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> property, <span class="keywordtype">void</span> *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>)</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;{</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#af397c6999030588cb522be44806d8f6c">extended_prop_set</a>) {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#af397c6999030588cb522be44806d8f6c">extended_prop_set</a>(instance, property, value);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   }</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;}</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a7fc557455b1c2ded912d80e3b1871a8a">  690</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a7fc557455b1c2ded912d80e3b1871a8a">ast_rtp_instance_get_extended_prop</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> property)</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;{</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   <span class="keywordtype">void</span> *prop;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a1373cdafc3d959ac6d73933f14ae6e7c">extended_prop_get</a>) {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      prop = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a1373cdafc3d959ac6d73933f14ae6e7c">extended_prop_get</a>(instance, property);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      prop = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   }</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <span class="keywordflow">return</span> prop;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a77f59605d15d7dfc53e0df12352b8235">  705</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914c">ast_rtp_property</a> property, <span class="keywordtype">int</span> <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>)</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;{</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a280c99fea26b9f464272844eb0310713">properties</a>[property] = <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a8f77bb51957abfc5f13bdedaa8c77950">prop_set</a>) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a8f77bb51957abfc5f13bdedaa8c77950">prop_set</a>(instance, property, value);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;}</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a2a2d35167e5880fdd5ec8d7df44f18b1">  716</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914c">ast_rtp_property</a> property)</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;{</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <span class="keywordtype">int</span> prop;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   prop = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a280c99fea26b9f464272844eb0310713">properties</a>[property];</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <span class="keywordflow">return</span> prop;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;}</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a0376aa2503a185437fab8cb0b7d674fb">  727</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;{</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   <span class="keywordflow">return</span> &amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a07d5509bbac8167e94ad8790e3fe87a4">codecs</a>;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;}</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a4f5e657ab906e7d719343f42346c731a">  732</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a4f5e657ab906e7d719343f42346c731a">ast_rtp_instance_extmap_enable</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ff">ast_rtp_extension</a> <a class="code" href="../../d0/d5a/structextension.html">extension</a>,</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0">ast_rtp_extension_direction</a> <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>)</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;{</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/dec/structrtp__extmap.html">rtp_extmap</a> extmap = {</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      .<a class="code" href="../../d4/dec/structrtp__extmap.html#a1ac00de8d6d1907b657473b294e1c973">extension</a> = <a class="code" href="../../d4/dec/structrtp__extmap.html#a1ac00de8d6d1907b657473b294e1c973">extension</a>,</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      .direction = <a class="code" href="../../d4/dec/structrtp__extmap.html#a4bb2bd134a0e0119df9ff9d62dcc3df2">direction</a>,</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   };</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   <span class="keywordflow">if</span> (!instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#af3276071050dad21d94b629e60b37460">extension_enable</a> || !instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#af3276071050dad21d94b629e60b37460">extension_enable</a>(instance, extension)) {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   }</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   <span class="comment">/* We store enabled extensions separately so we can easily do negotiation */</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;instance-&gt;extmap_enabled, extension, direction)) {</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   }</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;   <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &lt;= 0) {</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="comment">/* We find a free unique identifier for this extension by just appending it to the</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">       * vector of unique ids. The size of the vector will become its unique identifier.</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">       * As well when we are asking for information on the extensions it will be returned,</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">       * allowing it to be added to the SDP offer.</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;instance-&gt;extmap_unique_ids, extmap)) {</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;instance-&gt;extmap_enabled, extension, <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7">AST_RTP_EXTENSION_DIRECTION_NONE</a>);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      }</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="keywordtype">id</span> = <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;instance-&gt;extmap_unique_ids);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="comment">/* Otherwise we put it precisely where they want it */</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;instance-&gt;extmap_unique_ids, <span class="keywordtype">id</span> - 1, extmap)) {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;instance-&gt;extmap_enabled, extension, <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7">AST_RTP_EXTENSION_DIRECTION_NONE</a>);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      }</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   }</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   <span class="comment">/* Now that we have an id add the extension to here */</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;instance-&gt;extmap_negotiated, extension, <span class="keywordtype">id</span>)) {</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      extmap.<a class="code" href="../../d4/dec/structrtp__extmap.html#a1ac00de8d6d1907b657473b294e1c973">extension</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffade0794251a0a4f3bfb157bb67e120290">AST_RTP_EXTENSION_UNSUPPORTED</a>;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      extmap.<a class="code" href="../../d4/dec/structrtp__extmap.html#a4bb2bd134a0e0119df9ff9d62dcc3df2">direction</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7">AST_RTP_EXTENSION_DIRECTION_NONE</a>;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;instance-&gt;extmap_enabled, extension, <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7">AST_RTP_EXTENSION_DIRECTION_NONE</a>);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;instance-&gt;extmap_unique_ids, <span class="keywordtype">id</span> - 1, extmap);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   }</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;}</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">/*! \brief Helper function which negotiates two RTP extension directions to get our current direction */</span></div><div class="line"><a name="l00790"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a4ec2aff820c7f69ef0f436c58105bd16">  790</a></span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0">ast_rtp_extension_direction</a> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a4ec2aff820c7f69ef0f436c58105bd16">rtp_extmap_negotiate_direction</a>(<span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0">ast_rtp_extension_direction</a> ours,</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0">ast_rtp_extension_direction</a> theirs)</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;{</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   <span class="keywordflow">if</span> (theirs == <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7">AST_RTP_EXTENSION_DIRECTION_NONE</a> || ours == <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7">AST_RTP_EXTENSION_DIRECTION_NONE</a>) {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <span class="comment">/* This should not occur but if it does tolerate either side not having this extension</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">       * in use.</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7">AST_RTP_EXTENSION_DIRECTION_NONE</a>;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theirs == <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a7eec86ca7aa6358db7f1f47ab1fe8ed1">AST_RTP_EXTENSION_DIRECTION_INACTIVE</a>) {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="comment">/* Inactive is always inactive on our side */</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a7eec86ca7aa6358db7f1f47ab1fe8ed1">AST_RTP_EXTENSION_DIRECTION_INACTIVE</a>;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theirs == <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a0d60b69da92022238da4440d7acdebb3">AST_RTP_EXTENSION_DIRECTION_SENDRECV</a>) {</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <span class="keywordflow">return</span> ours;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theirs == <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0af5077f2f205afd10463fa2f98a3a8c96">AST_RTP_EXTENSION_DIRECTION_SENDONLY</a>) {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="comment">/* If they are send only then we become recvonly if we are configured as sendrecv or recvonly */</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="keywordflow">if</span> (ours == <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a0d60b69da92022238da4440d7acdebb3">AST_RTP_EXTENSION_DIRECTION_SENDRECV</a> || ours == <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a85f05e5bc6cc29f9c2a1b12113280a52">AST_RTP_EXTENSION_DIRECTION_RECVONLY</a>) {</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a85f05e5bc6cc29f9c2a1b12113280a52">AST_RTP_EXTENSION_DIRECTION_RECVONLY</a>;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      }</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theirs == <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a85f05e5bc6cc29f9c2a1b12113280a52">AST_RTP_EXTENSION_DIRECTION_RECVONLY</a>) {</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <span class="comment">/* If they are recv only then we become sendonly if we are configured as sendrecv or sendonly */</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <span class="keywordflow">if</span> (ours == <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a0d60b69da92022238da4440d7acdebb3">AST_RTP_EXTENSION_DIRECTION_SENDRECV</a> || ours == <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0af5077f2f205afd10463fa2f98a3a8c96">AST_RTP_EXTENSION_DIRECTION_SENDONLY</a>) {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0af5077f2f205afd10463fa2f98a3a8c96">AST_RTP_EXTENSION_DIRECTION_SENDONLY</a>;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      }</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   }</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7">AST_RTP_EXTENSION_DIRECTION_NONE</a>;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;}</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#adef7f9e182a2d5e45a570f990c7dc92f">  818</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#adef7f9e182a2d5e45a570f990c7dc92f">ast_rtp_instance_extmap_negotiate</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0">ast_rtp_extension_direction</a> <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>,</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *uri, <span class="keyword">const</span> <span class="keywordtype">char</span> *attributes)</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;{</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;   <span class="comment">/* &#39;attributes&#39; is currently unused but exists in the API to ensure it does not need to be altered</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">    * in the future in case we need to use it.</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ff">ast_rtp_extension</a> <a class="code" href="../../d0/d5a/structextension.html">extension</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffade0794251a0a4f3bfb157bb67e120290">AST_RTP_EXTENSION_UNSUPPORTED</a>;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   <span class="comment">/* Per the RFC the identifier has to be 1 or above */</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &lt; 1) {</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   }</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <span class="comment">/* Convert the provided URI to the internal representation */</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../da/dbe/rtp__engine_8c.html#adbd6ed7f5741adbf3d0f899426772a44">rtp_extension_uris</a>); ++idx) {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../da/dbe/rtp__engine_8c.html#adbd6ed7f5741adbf3d0f899426772a44">rtp_extension_uris</a>[idx], uri)) {</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;         extension = idx;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      }</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;   }</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   <span class="comment">/* We only accept the extension if it is enabled */</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   <span class="keywordflow">if</span> (extension &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;instance-&gt;extmap_enabled) &amp;&amp;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;instance-&gt;extmap_enabled, extension) != <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7">AST_RTP_EXTENSION_DIRECTION_NONE</a>) {</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/dec/structrtp__extmap.html">rtp_extmap</a> extmap = {</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;         .<a class="code" href="../../d4/dec/structrtp__extmap.html#a1ac00de8d6d1907b657473b294e1c973">extension</a> = <a class="code" href="../../d4/dec/structrtp__extmap.html#a1ac00de8d6d1907b657473b294e1c973">extension</a>,</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;         .direction = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a4ec2aff820c7f69ef0f436c58105bd16">rtp_extmap_negotiate_direction</a>(<a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;instance-&gt;extmap_enabled, extension), direction),</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      };</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <span class="comment">/* If the direction negotiation failed then don&#39;t accept or use this extension */</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      <span class="keywordflow">if</span> (extmap.<a class="code" href="../../d4/dec/structrtp__extmap.html#a4bb2bd134a0e0119df9ff9d62dcc3df2">direction</a> != <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7">AST_RTP_EXTENSION_DIRECTION_NONE</a>) {</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;         <span class="keywordflow">if</span> (extension != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffade0794251a0a4f3bfb157bb67e120290">AST_RTP_EXTENSION_UNSUPPORTED</a>) {</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;instance-&gt;extmap_negotiated, extension, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;         }</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;instance-&gt;extmap_unique_ids, <span class="keywordtype">id</span> - 1, extmap);</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      }</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;}</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ae5fe3bd0559594353c0e168863d7b5a3">  862</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ae5fe3bd0559594353c0e168863d7b5a3">ast_rtp_instance_extmap_clear</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;{</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/dec/structrtp__extmap.html">rtp_extmap</a> extmap_none = {</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      .<a class="code" href="../../d4/dec/structrtp__extmap.html#a1ac00de8d6d1907b657473b294e1c973">extension</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffade0794251a0a4f3bfb157bb67e120290">AST_RTP_EXTENSION_UNSUPPORTED</a>,</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      .direction = <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7">AST_RTP_EXTENSION_DIRECTION_NONE</a>,</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;   };</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;   <span class="comment">/* Clear both the known unique ids and the negotiated extensions as we are about to have</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">    * new results set on us.</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;instance-&gt;extmap_unique_ids); ++idx) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;instance-&gt;extmap_unique_ids, idx, extmap_none);</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   }</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;instance-&gt;extmap_negotiated); ++idx) {</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;instance-&gt;extmap_negotiated, idx, -1);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   }</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;}</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ad0e27894cc1156205f52b3692096c14d">  886</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ad0e27894cc1156205f52b3692096c14d">ast_rtp_instance_extmap_get_id</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ff">ast_rtp_extension</a> <a class="code" href="../../d0/d5a/structextension.html">extension</a>)</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;{</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;   <span class="keywordtype">int</span> <span class="keywordtype">id</span> = -1;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;   <span class="keywordflow">if</span> (extension &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;instance-&gt;extmap_negotiated)) {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="keywordtype">id</span> = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;instance-&gt;extmap_negotiated, extension);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   }</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/dfb/app__queue_8c.html#acd1f0e9b4730ec60f62cb0806cb06ef1">id</a>;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;}</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a4d873b83b2c0e1d305d4620c9f0d13b4">  899</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a4d873b83b2c0e1d305d4620c9f0d13b4">ast_rtp_instance_extmap_count</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;{</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;   <span class="keywordtype">size_t</span> count;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   count = <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;instance-&gt;extmap_unique_ids);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;   <span class="keywordflow">return</span> count;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;}</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00910"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a86b7a0938f30bf5f9cafa79984a9e776">  910</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ff">ast_rtp_extension</a> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a86b7a0938f30bf5f9cafa79984a9e776">ast_rtp_instance_extmap_get_extension</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> <span class="keywordtype">id</span>)</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;{</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ff">ast_rtp_extension</a> <a class="code" href="../../d0/d5a/structextension.html">extension</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffade0794251a0a4f3bfb157bb67e120290">AST_RTP_EXTENSION_UNSUPPORTED</a>;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;   <span class="comment">/* The local unique identifier starts at &#39;1&#39; so the highest unique identifier</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">    * can be the actual size of the vector. We compensate (as it is 0 index based)</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">    * by dropping it down to 1 to get the correct information.</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;   <span class="keywordflow">if</span> (0 &lt; <span class="keywordtype">id</span> &amp;&amp; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;instance-&gt;extmap_unique_ids)) {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/dec/structrtp__extmap.html">rtp_extmap</a> *extmap = <a class="code" href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a>(&amp;instance-&gt;extmap_unique_ids, <span class="keywordtype">id</span> - 1);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      extension = extmap-&gt;<a class="code" href="../../d4/dec/structrtp__extmap.html#a1ac00de8d6d1907b657473b294e1c973">extension</a>;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;   }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/dec/structrtp__extmap.html#a1ac00de8d6d1907b657473b294e1c973">extension</a>;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;}</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#afa4a9048a49a94118a0857361fe868ee">  930</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0">ast_rtp_extension_direction</a> <a class="code" href="../../da/dbe/rtp__engine_8c.html#afa4a9048a49a94118a0857361fe868ee">ast_rtp_instance_extmap_get_direction</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> <span class="keywordtype">id</span>)</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;{</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0">ast_rtp_extension_direction</a> <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7">AST_RTP_EXTENSION_DIRECTION_NONE</a>;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   <span class="keywordflow">if</span> (0 &lt; <span class="keywordtype">id</span> &amp;&amp; <span class="keywordtype">id</span> &lt;= <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;instance-&gt;extmap_unique_ids)) {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/dec/structrtp__extmap.html">rtp_extmap</a> *extmap = <a class="code" href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a>(&amp;instance-&gt;extmap_unique_ids, <span class="keywordtype">id</span> - 1);</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      direction = extmap-&gt;<a class="code" href="../../d4/dec/structrtp__extmap.html#a4bb2bd134a0e0119df9ff9d62dcc3df2">direction</a>;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;   }</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/dec/structrtp__extmap.html#a4bb2bd134a0e0119df9ff9d62dcc3df2">direction</a>;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;}</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a26abbab4982b7d787e236f3a3a4e3b94">  946</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a26abbab4982b7d787e236f3a3a4e3b94">ast_rtp_instance_extmap_get_uri</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> <span class="keywordtype">id</span>)</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;{</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ff">ast_rtp_extension</a> <a class="code" href="../../d0/d5a/structextension.html">extension</a> = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a86b7a0938f30bf5f9cafa79984a9e776">ast_rtp_instance_extmap_get_extension</a>(instance, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   <span class="keywordflow">if</span> (extension == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffade0794251a0a4f3bfb157bb67e120290">AST_RTP_EXTENSION_UNSUPPORTED</a> ||</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)extension &gt;= <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../da/dbe/rtp__engine_8c.html#adbd6ed7f5741adbf3d0f899426772a44">rtp_extension_uris</a>)) {</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;   }</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#adbd6ed7f5741adbf3d0f899426772a44">rtp_extension_uris</a>[<a class="code" href="../../d4/dec/structrtp__extmap.html#a1ac00de8d6d1907b657473b294e1c973">extension</a>];</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;}</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a9fa9778383fb8fefa620b9db4da22268">  958</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a9fa9778383fb8fefa620b9db4da22268">ast_rtp_codecs_payloads_initialize</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>)</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;{</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#acfbb968d548bd319b981702f31aa89cc">framing</a> = 0;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a9b07039db138693d1ebe02c3e99ddcab">ast_rwlock_init</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   res = <a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;codecs-&gt;payload_mapping_rx, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a>);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;   res |= <a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;codecs-&gt;payload_mapping_tx, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a>);</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;codecs-&gt;payload_mapping_rx);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;codecs-&gt;payload_mapping_tx);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;   }</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;}</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div><div class="line"><a name="l00974"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a0afb91e7a58d2fbac8e5febe0f94069b">  974</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a0afb91e7a58d2fbac8e5febe0f94069b">ast_rtp_codecs_payloads_destroy</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>)</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;{</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_rx); ++idx) {</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_rx, idx);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#abd9eeaf9633f630d7588f6a7de7b9fbe">ao2_t_cleanup</a>(type, <span class="stringliteral">&quot;destroying ast_rtp_codec rx mapping&quot;</span>);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   }</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;codecs-&gt;payload_mapping_rx);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_tx); ++idx) {</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_tx, idx);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#abd9eeaf9633f630d7588f6a7de7b9fbe">ao2_t_cleanup</a>(type, <span class="stringliteral">&quot;destroying ast_rtp_codec tx mapping&quot;</span>);</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   }</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;codecs-&gt;payload_mapping_tx);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab1d35b9611e8b5143ec695ead1b5d8d1">ast_rwlock_destroy</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;}</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div><div class="line"><a name="l00994"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a9416cd4c3b100e3c60792a37072fa061">  994</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a9416cd4c3b100e3c60792a37072fa061">ast_rtp_codecs_payloads_clear</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;{</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a0afb91e7a58d2fbac8e5febe0f94069b">ast_rtp_codecs_payloads_destroy</a>(codecs);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a9fa9778383fb8fefa620b9db4da22268">ast_rtp_codecs_payloads_initialize</a>(codecs);</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;   <span class="keywordflow">if</span> (instance &amp;&amp; instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a> &amp;&amp; instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4de9fa1bec1d70595a4b04cb2e13dec1">payload_set</a>) {</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a>; i++) {</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;         instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4de9fa1bec1d70595a4b04cb2e13dec1">payload_set</a>(instance, i, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      }</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;   }</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;}</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment"> * \brief Clear the rx primary mapping flag on all other matching mappings.</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment"> * \since 14.0.0</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="comment"> * \param codecs Codecs that need rx clearing.</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment"> * \param to_match Payload type object to compare against.</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment"> * \note It is assumed that codecs is write locked before calling.</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01022"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#aab37acf3b984e60f234d540adfef877f"> 1022</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#aab37acf3b984e60f234d540adfef877f">payload_mapping_rx_clear_primary</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keyword">struct</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *to_match)</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;{</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *current;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d3/d63/namespace10aedae86a32__add__outgoing__enum__va.html#a42c0f9e518790273ec193fa1b227fea7">new_type</a>;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;   <span class="keyword">struct </span>timeval now;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;   <span class="keywordflow">if</span> (!to_match-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a9acb7c8900a0a4dc89f77ed353034b86">primary_mapping</a>) {</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;   }</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;   now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_rx); ++idx) {</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      current = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_rx, idx);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <span class="keywordflow">if</span> (!current || current == to_match || !current-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a9acb7c8900a0a4dc89f77ed353034b86">primary_mapping</a>) {</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      }</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <span class="keywordflow">if</span> (current-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a> &amp;&amp; to_match-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>) {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(current-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, to_match-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;         }</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!current-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a> &amp;&amp; !to_match-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>) {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;         <span class="keywordflow">if</span> (current-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a> != to_match-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a>) {</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;         }</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      }</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="comment">/* Replace current with non-primary marked version */</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      new_type = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a6f3297fdc6574d935732ec0608b40ef6">ast_rtp_engine_alloc_payload_type</a>();</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="keywordflow">if</span> (!new_type) {</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      }</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      *new_type = *current;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a9acb7c8900a0a4dc89f77ed353034b86">primary_mapping</a> = 0;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ad4668d3f601a8a621df3c3a195296cdd">when_retired</a> = now;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;codecs-&gt;payload_mapping_rx, idx, new_type);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(current, -1);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   }</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;}</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment"> * \brief Put the new_type into the rx payload type mapping.</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment"> * \since 14.0.0</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment"> * \param codecs Codecs structure to put new_type into</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment"> * \param payload type position to replace.</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment"> * \param new_type RTP payload mapping object to store.</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment"> * \note It is assumed that codecs is write locked before calling.</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01079"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ab4e151b8ad1b6073128471f3e65671b3"> 1079</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab4e151b8ad1b6073128471f3e65671b3">rtp_codecs_payload_replace_rx</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keywordtype">int</span> payload, <span class="keyword">struct</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d3/d63/namespace10aedae86a32__add__outgoing__enum__va.html#a42c0f9e518790273ec193fa1b227fea7">new_type</a>)</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;{</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(new_type, +1);</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;   <span class="keywordflow">if</span> (payload &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_rx)) {</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#abd9eeaf9633f630d7588f6a7de7b9fbe">ao2_t_cleanup</a>(<a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_rx, payload),</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;         <span class="stringliteral">&quot;cleaning up rx mapping vector element about to be replaced&quot;</span>);</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;   }</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;codecs-&gt;payload_mapping_rx, payload, new_type)) {</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(new_type, -1);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   }</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aab37acf3b984e60f234d540adfef877f">payload_mapping_rx_clear_primary</a>(codecs, new_type);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;}</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment"> * \brief Copy the rx payload type mapping to the destination.</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment"> * \since 14.0.0</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment"> * \param src The source codecs structure</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment"> * \param dest The destination codecs structure that the values from src will be copied to</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="comment"> * \param instance Optionally the instance that the dst codecs structure belongs to</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="comment"> * \note It is assumed that src is at least read locked before calling.</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment"> * \note It is assumed that dest is write locked before calling.</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01108"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a787b4f1be4b07fb171fdce9e9c54a420"> 1108</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a787b4f1be4b07fb171fdce9e9c54a420">rtp_codecs_payloads_copy_rx</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *src, <span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *dest, <span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;{</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;src-&gt;payload_mapping_rx); ++idx) {</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;src-&gt;payload_mapping_rx, idx);</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <span class="keywordflow">if</span> (!type) {</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      }</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Copying rx payload mapping %d (%p) from %p to %p\n&quot;</span>,</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;         idx, type, src, dest);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab4e151b8ad1b6073128471f3e65671b3">rtp_codecs_payload_replace_rx</a>(dest, idx, type);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <span class="keywordflow">if</span> (instance &amp;&amp; instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a> &amp;&amp; instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4de9fa1bec1d70595a4b04cb2e13dec1">payload_set</a>) {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;         instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4de9fa1bec1d70595a4b04cb2e13dec1">payload_set</a>(instance, idx, type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>, type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a>);</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      }</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;   }</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;}</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment"> * \brief Determine if a type of payload is already present in mappings.</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment"> * \since 14.0.0</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment"> * \param codecs Codecs to be checked for mappings.</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment"> * \param to_match Payload type object to compare against.</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment"> * \note It is assumed that codecs is write locked before calling.</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="comment"> * \retval 0 not found</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment"> * \retval 1 found</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01144"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#af7e8539422966e6361e123389cc9f31c"> 1144</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#af7e8539422966e6361e123389cc9f31c">payload_mapping_tx_is_present</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *to_match)</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;{</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *current;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_tx); ++idx) {</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      current = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_tx, idx);</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      <span class="keywordflow">if</span> (!current) {</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      }</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <span class="keywordflow">if</span> (current == to_match) {</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;         <span class="comment">/* The exact object is already in the mapping. */</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      }</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      <span class="keywordflow">if</span> (current-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a> &amp;&amp; to_match-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>) {</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a22b99f6d58d54938ec6753f3865f0005">ast_format_get_codec_id</a>(current-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) != <a class="code" href="../../d0/d0a/format_8h.html#a22b99f6d58d54938ec6753f3865f0005">ast_format_get_codec_id</a>(to_match-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>)) {</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (current-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a> == to_match-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>) {</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;         }</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!current-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a> &amp;&amp; !to_match-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>) {</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;         <span class="keywordflow">if</span> (current-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a> != to_match-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a>) {</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;         }</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      }</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;   }</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;}</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment"> * \brief Copy the tx payload type mapping to the destination.</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment"> * \since 14.0.0</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment"> * \param src The source codecs structure</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment"> * \param dest The destination codecs structure that the values from src will be copied to</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="comment"> * \param instance Optionally the instance that the dst codecs structure belongs to</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment"> * \note It is assumed that src is at least read locked before calling.</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment"> * \note It is assumed that dest is write locked before calling.</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01193"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a74e6eaa4ef93061c27d5fd9ae9991466"> 1193</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a74e6eaa4ef93061c27d5fd9ae9991466">rtp_codecs_payloads_copy_tx</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *src, <span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *dest, <span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;{</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;src-&gt;payload_mapping_tx); ++idx) {</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;src-&gt;payload_mapping_tx, idx);</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <span class="keywordflow">if</span> (!type) {</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      }</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Copying tx payload mapping %d (%p) from %p to %p\n&quot;</span>,</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;         idx, type, src, dest);</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(type, +1);</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      <span class="keywordflow">if</span> (idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;dest-&gt;payload_mapping_tx)) {</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#abd9eeaf9633f630d7588f6a7de7b9fbe">ao2_t_cleanup</a>(<a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;dest-&gt;payload_mapping_tx, idx),</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;            <span class="stringliteral">&quot;cleaning up tx mapping vector element about to be replaced&quot;</span>);</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      }</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;dest-&gt;payload_mapping_tx, idx, type)) {</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(type, -1);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      }</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      <span class="keywordflow">if</span> (instance &amp;&amp; instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a> &amp;&amp; instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4de9fa1bec1d70595a4b04cb2e13dec1">payload_set</a>) {</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;         instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4de9fa1bec1d70595a4b04cb2e13dec1">payload_set</a>(instance, idx, type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>, type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a>);</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      }</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;   }</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;}</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div><div class="line"><a name="l01224"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a4443e413dd03c219fb34bb17cc674cf5"> 1224</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a4443e413dd03c219fb34bb17cc674cf5">ast_rtp_codecs_payloads_copy</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *src, <span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *dest, <span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;{</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;dest-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;   <span class="comment">/* Deadlock avoidance because of held write lock. */</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../dd/d42/lock_8h.html#af65c888941c741acb2e2078d5d078c49">ast_rwlock_tryrdlock</a>(&amp;src-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>)) {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;dest-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      sched_yield();</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;dest-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;   }</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="comment">    * This represents a completely new mapping of what the remote party is</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="comment">    * expecting for payloads, so we clear out the entire tx payload mapping</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="comment">    * vector and replace it.</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;dest-&gt;payload_mapping_tx); ++idx) {</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;dest-&gt;payload_mapping_tx, idx);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#abd9eeaf9633f630d7588f6a7de7b9fbe">ao2_t_cleanup</a>(type, <span class="stringliteral">&quot;destroying ast_rtp_codec tx mapping&quot;</span>);</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;dest-&gt;payload_mapping_tx, idx, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;   }</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a787b4f1be4b07fb171fdce9e9c54a420">rtp_codecs_payloads_copy_rx</a>(src, dest, instance);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a74e6eaa4ef93061c27d5fd9ae9991466">rtp_codecs_payloads_copy_tx</a>(src, dest, instance);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;   dest-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#acfbb968d548bd319b981702f31aa89cc">framing</a> = src-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#acfbb968d548bd319b981702f31aa89cc">framing</a>;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;src-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;dest-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;}</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;</div><div class="line"><a name="l01257"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#afb3071f0aa39f4fccc54894395f73a62"> 1257</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#afb3071f0aa39f4fccc54894395f73a62">ast_rtp_codecs_payloads_xover</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *src, <span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *dest, <span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;{</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;dest-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;   <span class="keywordflow">if</span> (src != dest) {</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <span class="comment">/* Deadlock avoidance because of held write lock. */</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../dd/d42/lock_8h.html#af65c888941c741acb2e2078d5d078c49">ast_rwlock_tryrdlock</a>(&amp;src-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>)) {</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;dest-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;         sched_yield();</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;dest-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      }</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;   }</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;   <span class="comment">/* Crossover copy payload type tx mapping to rx mapping. */</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;src-&gt;payload_mapping_tx); ++idx) {</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;src-&gt;payload_mapping_tx, idx);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="keywordflow">if</span> (!type) {</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      }</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <span class="comment">/* All tx mapping elements should have the primary flag set. */</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a9acb7c8900a0a4dc89f77ed353034b86">primary_mapping</a>);</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Crossover copying tx to rx payload mapping %d (%p) from %p to %p\n&quot;</span>,</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;         idx, type, src, dest);</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab4e151b8ad1b6073128471f3e65671b3">rtp_codecs_payload_replace_rx</a>(dest, idx, type);</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      <span class="keywordflow">if</span> (instance &amp;&amp; instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a> &amp;&amp; instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4de9fa1bec1d70595a4b04cb2e13dec1">payload_set</a>) {</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;         instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4de9fa1bec1d70595a4b04cb2e13dec1">payload_set</a>(instance, idx, type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>, type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a>);</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      }</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;   }</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;   dest-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#acfbb968d548bd319b981702f31aa89cc">framing</a> = src-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#acfbb968d548bd319b981702f31aa89cc">framing</a>;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;   <span class="keywordflow">if</span> (src != dest) {</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;src-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;   }</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;dest-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;}</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;</div><div class="line"><a name="l01301"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a729a53f6bd23a458daf9e8f13e69e6a0"> 1301</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a729a53f6bd23a458daf9e8f13e69e6a0">ast_rtp_codecs_payloads_set_m_type</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>)</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;{</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d3/d63/namespace10aedae86a32__add__outgoing__enum__va.html#a42c0f9e518790273ec193fa1b227fea7">new_type</a>;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;   <span class="keywordflow">if</span> (payload &lt; 0 || payload &gt;= <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a> || payload &gt; <a class="code" href="../../d5/dde/rtp__engine_8h.html#aaa3062109825b3dff6b02505d4e44a38">AST_RTP_PT_LAST_STATIC</a>) {</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;   }</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;   new_type = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(static_RTP_PT[payload]);</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;   <span class="keywordflow">if</span> (!new_type) {</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Don&#39;t have a default tx payload type %d format for m type on %p\n&quot;</span>,</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;         payload, codecs);</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   }</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Setting tx payload type %d based on m type on %p\n&quot;</span>,</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      payload, codecs);</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../da/dbe/rtp__engine_8c.html#af7e8539422966e6361e123389cc9f31c">payload_mapping_tx_is_present</a>(codecs, new_type)) {</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      <span class="keywordflow">if</span> (payload &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_tx)) {</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#abd9eeaf9633f630d7588f6a7de7b9fbe">ao2_t_cleanup</a>(<a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_tx, payload),</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;            <span class="stringliteral">&quot;cleaning up replaced tx payload type&quot;</span>);</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      }</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;codecs-&gt;payload_mapping_tx, payload, new_type)) {</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(new_type, -1);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instance &amp;&amp; instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a> &amp;&amp; instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4de9fa1bec1d70595a4b04cb2e13dec1">payload_set</a>) {</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;         instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4de9fa1bec1d70595a4b04cb2e13dec1">payload_set</a>(instance, payload, new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>, new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a>);</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      }</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(new_type, -1);</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;   }</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;}</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;</div><div class="line"><a name="l01343"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#acec3992982f194e41ab6a2e4c218af83"> 1343</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#acec3992982f194e41ab6a2e4c218af83">ast_rtp_codecs_payloads_set_rtpmap_type_rate</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> pt,</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;             <span class="keywordtype">char</span> *mimetype, <span class="keywordtype">char</span> *mimesubtype,</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;             <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6">ast_rtp_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>,</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sample_rate)</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;{</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;   <span class="keywordtype">int</span> found = 0;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;   <span class="keywordflow">if</span> (pt &lt; 0 || pt &gt;= <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a>) {</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      <span class="keywordflow">return</span> -1; <span class="comment">/* bogus payload type */</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;   }</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;mime_types_lock);</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../da/dbe/rtp__engine_8c.html#a80375839a4de919dd2024ee65251ad0d">mime_types_len</a>; ++idx) {</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d8/d0d/structast__rtp__mime__type.html">ast_rtp_mime_type</a> *t = &amp;<a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[idx];</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d3/d63/namespace10aedae86a32__add__outgoing__enum__va.html#a42c0f9e518790273ec193fa1b227fea7">new_type</a>;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(mimesubtype, t-&gt;<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#a3ec6ee65afc37dae29a21bec31958574">subtype</a>)) {</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      }</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(mimetype, t-&gt;<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#a4fbccdeeb518e61f3b37a89484f8c347">type</a>)) {</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      }</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;      <span class="comment">/* if both sample rates have been supplied, and they don&#39;t match,</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment">       * then this not a match; if one has not been supplied, then the</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">       * rates are not compared */</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      <span class="keywordflow">if</span> (sample_rate &amp;&amp; t-&gt;<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a> &amp;&amp;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;          (sample_rate != t-&gt;<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>)) {</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      }</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      found = 1;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      new_type = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a6f3297fdc6574d935732ec0608b40ef6">ast_rtp_engine_alloc_payload_type</a>();</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <span class="keywordflow">if</span> (!new_type) {</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      }</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a> = t-&gt;<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#ac9b3af8d8bb662272a6684754f6e9622">payload_type</a>.<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a> = t-&gt;<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#ac9b3af8d8bb662272a6684754f6e9622">payload_type</a>.<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a>;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a> = pt;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a9acb7c8900a0a4dc89f77ed353034b86">primary_mapping</a> = 1;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;      <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#ac9b3af8d8bb662272a6684754f6e9622">payload_type</a>.<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;         &amp;&amp; <a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(t-&gt;<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#ac9b3af8d8bb662272a6684754f6e9622">payload_type</a>.<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a563a4f351a86128f8a40757c9456ec4e">ast_format_g726</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;         &amp;&amp; (options &amp; <a class="code" href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6ad570d49420fe15c4660793d1fc2f0fc8">AST_RTP_OPT_G726_NONSTANDARD</a>)) {</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;         new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../db/d1c/format__cache_8h.html#ad230bc99f5cd46e56e97d32941ba5b23">ast_format_g726_aal2</a>;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;         new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = t-&gt;<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#ac9b3af8d8bb662272a6684754f6e9622">payload_type</a>.<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      }</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      <span class="keywordflow">if</span> (new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) {</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;         <span class="comment">/* SDP parsing automatically increases the reference count */</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;         new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../d0/d0a/format_8h.html#a2b07dbbe75e39d505a64e019352f067c">ast_format_parse_sdp_fmtp</a>(new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      }</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../da/dbe/rtp__engine_8c.html#af7e8539422966e6361e123389cc9f31c">payload_mapping_tx_is_present</a>(codecs, new_type)) {</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;         <span class="keywordflow">if</span> (pt &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_tx)) {</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#abd9eeaf9633f630d7588f6a7de7b9fbe">ao2_t_cleanup</a>(<a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_tx, pt),</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;               <span class="stringliteral">&quot;cleaning up replaced tx payload type&quot;</span>);</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;         }</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;codecs-&gt;payload_mapping_tx, pt, new_type)) {</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(new_type, -1);</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instance &amp;&amp; instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a> &amp;&amp; instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4de9fa1bec1d70595a4b04cb2e13dec1">payload_set</a>) {</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;            instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4de9fa1bec1d70595a4b04cb2e13dec1">payload_set</a>(instance, pt, new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>, new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a>);</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;         }</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(new_type, -1);</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      }</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;   }</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;mime_types_lock);</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;   <span class="keywordflow">return</span> (found ? 0 : -2);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;}</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div><div class="line"><a name="l01428"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ab5350656de626a43127eb607e58bdfa3"> 1428</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab5350656de626a43127eb607e58bdfa3">ast_rtp_codecs_payloads_set_rtpmap_type</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>, <span class="keywordtype">char</span> *mimetype, <span class="keywordtype">char</span> *mimesubtype, <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6">ast_rtp_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>)</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;{</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#acec3992982f194e41ab6a2e4c218af83">ast_rtp_codecs_payloads_set_rtpmap_type_rate</a>(codecs, instance, payload, mimetype, mimesubtype, options, 0);</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;}</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div><div class="line"><a name="l01433"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a9109d5d56fd169b19d0c3760a6faa37a"> 1433</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a9109d5d56fd169b19d0c3760a6faa37a">ast_rtp_codecs_payloads_unset</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>)</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;{</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;   <span class="keywordflow">if</span> (payload &lt; 0 || payload &gt;= <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a>) {</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;   }</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Unsetting payload %d on %p\n&quot;</span>, payload, codecs);</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;   <span class="keywordflow">if</span> (payload &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_tx)) {</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_tx, payload);</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(type);</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;codecs-&gt;payload_mapping_tx, payload, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;   }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;   <span class="keywordflow">if</span> (instance &amp;&amp; instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a> &amp;&amp; instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4de9fa1bec1d70595a4b04cb2e13dec1">payload_set</a>) {</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4de9fa1bec1d70595a4b04cb2e13dec1">payload_set</a>(instance, payload, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;   }</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;}</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;</div><div class="line"><a name="l01460"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a576dcfebba6ad2a0d3bf3a97119cd953"> 1460</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a576dcfebba6ad2a0d3bf3a97119cd953">ast_rtp_codecs_get_stream_type</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>)</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;{</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> stream_type = <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;   <span class="keywordflow">for</span> (payload = 0; payload &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_rx); ++<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>) {</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_rx, payload);</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      <span class="keywordflow">if</span> (type &amp;&amp; type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>) {</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;         stream_type = <a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;      }</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;   }</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;   <span class="keywordflow">return</span> stream_type;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;}</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div><div class="line"><a name="l01479"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#abcc5bda5d149e63f9e2ab630b26fd66c"> 1479</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#abcc5bda5d149e63f9e2ab630b26fd66c">ast_rtp_codecs_get_payload</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>)</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;{</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;   <span class="keywordflow">if</span> (payload &lt; 0 || payload &gt;= <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a>) {</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;   }</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   <span class="keywordflow">if</span> (payload &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_rx)) {</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_rx, payload);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(type);</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;   }</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;   <span class="keywordflow">if</span> (!type &amp;&amp; payload &lt;= <a class="code" href="../../d5/dde/rtp__engine_8h.html#aaa3062109825b3dff6b02505d4e44a38">AST_RTP_PT_LAST_STATIC</a>) {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      type = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(static_RTP_PT[payload]);</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;   }</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;}</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;</div><div class="line"><a name="l01503"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ac16c0d5f1f3b455a2232f62ce4e2f5f5"> 1503</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ac16c0d5f1f3b455a2232f62ce4e2f5f5">ast_rtp_codecs_payload_replace_format</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>, <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>)</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;{</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;   <span class="keywordflow">if</span> (payload &lt; 0 || payload &gt;= <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a> || !format) {</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;   }</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;   type = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a6f3297fdc6574d935732ec0608b40ef6">ast_rtp_engine_alloc_payload_type</a>();</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;   <span class="keywordflow">if</span> (!type) {</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;   }</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, +1);</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;   type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;   type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a> = 1;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;   type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a> = <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;   type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a9acb7c8900a0a4dc89f77ed353034b86">primary_mapping</a> = 1;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../da/dbe/rtp__engine_8c.html#af7e8539422966e6361e123389cc9f31c">payload_mapping_tx_is_present</a>(codecs, type)) {</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      <span class="keywordflow">if</span> (payload &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_tx)) {</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_tx, payload));</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      }</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;codecs-&gt;payload_mapping_tx, payload, type)) {</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(type, -1);</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      }</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(type, -1);</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;   }</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;}</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div><div class="line"><a name="l01537"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a6d9606ad3b3ed04e6e98df5fcb4409f1"> 1537</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a6d9606ad3b3ed04e6e98df5fcb4409f1">ast_rtp_codecs_get_payload_format</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keywordtype">int</span> payload)</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;{</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;   <span class="keywordflow">if</span> (payload &lt; 0 || payload &gt;= <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a>) {</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;   }</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;   <span class="keywordflow">if</span> (payload &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_tx)) {</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;      type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_tx, payload);</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;      <span class="keywordflow">if</span> (type &amp;&amp; type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>) {</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;         format = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      }</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;   }</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;}</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;</div><div class="line"><a name="l01558"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a6f85ba232050ff932d804b62e6e848cd"> 1558</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a6f85ba232050ff932d804b62e6e848cd">ast_rtp_codecs_set_framing</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> framing)</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;{</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;   <span class="keywordflow">if</span> (!framing) {</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;   }</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;   codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#acfbb968d548bd319b981702f31aa89cc">framing</a> = framing;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;}</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div><div class="line"><a name="l01569"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#aef5d988932736b654957f46ff4360889"> 1569</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#aef5d988932736b654957f46ff4360889">ast_rtp_codecs_get_framing</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>)</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;{</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> framing;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;   framing = codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#acfbb968d548bd319b981702f31aa89cc">framing</a>;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;   <span class="keywordflow">return</span> framing;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;}</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;</div><div class="line"><a name="l01580"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a5f8da197d19dc5ecd5457eed351f3311"> 1580</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5f8da197d19dc5ecd5457eed351f3311">ast_rtp_codecs_payload_formats</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *astformats, <span class="keywordtype">int</span> *nonastformats)</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;{</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a>(astformats, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;   *nonastformats = 0;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_tx); ++idx) {</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;      type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_tx, idx);</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;      <span class="keywordflow">if</span> (!type) {</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;      }</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;      <span class="keywordflow">if</span> (type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>) {</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(astformats, type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, 0);</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;         *nonastformats |= type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a>;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      }</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;   }</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;   <span class="keywordflow">if</span> (codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#acfbb968d548bd319b981702f31aa89cc">framing</a>) {</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#ad938aaf8c3c616b854d44f8bfa3bab1d">ast_format_cap_set_framing</a>(astformats, codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#acfbb968d548bd319b981702f31aa89cc">framing</a>);</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;   }</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;}</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;<span class="comment"> * \brief Find the static payload type mapping for the format.</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;<span class="comment"> * \since 14.0.0</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="comment"> * \param asterisk_format Non-zero if the given Asterisk format is present</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="comment"> * \param format Asterisk format to look for</span></div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="comment"> * \param code The non-Asterisk format code to look for</span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;<span class="comment"> * \note It is assumed that static_RTP_PT_lock is at least read locked before calling.</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;<span class="comment"> * \retval Numerical payload type</span></div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;<span class="comment"> * \retval -1 if not found.</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01624"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ac17174557c55d1ff7b5d08b06395241f"> 1624</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ac17174557c55d1ff7b5d08b06395241f">find_static_payload_type</a>(<span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, <span class="keywordtype">int</span> code)</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;{</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a> = -1;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;   <span class="keywordflow">if</span> (!asterisk_format) {</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a>; ++idx) {</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;         <span class="keywordflow">if</span> (static_RTP_PT[idx]</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;            &amp;&amp; !static_RTP_PT[idx]-&gt;asterisk_format</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;            &amp;&amp; static_RTP_PT[idx]-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a> == code) {</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;            payload = idx;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;         }</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      }</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (format) {</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a>; ++idx) {</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;         <span class="keywordflow">if</span> (static_RTP_PT[idx]</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;            &amp;&amp; static_RTP_PT[idx]-&gt;asterisk_format</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;            &amp;&amp; <a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(format, static_RTP_PT[idx]-&gt;format)</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;               != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;            payload = idx;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;         }</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;      }</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;   }</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;}</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="comment"> * \brief Find the first unused payload type in a given range</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment"> * \param codecs The codec structure to look in</span></div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="comment"> * \param start Starting index</span></div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;<span class="comment"> * \param end Ending index</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="comment"> * \param ignore Skip these payloads types</span></div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="comment"> * \note The static_RTP_PT_lock object must be locked before calling</span></div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment"> * \retval Numerical payload type</span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment"> * \retval -1 if not found.</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01667"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#aabc9d2a90ef7a2f9e71928d8afeaf696"> 1667</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabc9d2a90ef7a2f9e71928d8afeaf696">find_unused_payload_in_range</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>,</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;      <span class="keywordtype">int</span> start, <span class="keywordtype">int</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>, <span class="keyword">struct</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#a1229bdedff51a0fc453b7c482cd8dd49">ignore</a>[])</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;{</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;   <span class="keywordflow">for</span> (x = start; x &lt; <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>; ++x) {</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      <span class="keywordflow">if</span> (ignore[x]) {</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!codecs || x &gt;= <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_rx)) {</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;         <span class="keywordflow">return</span> x;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      }</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_rx, x);</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      <span class="keywordflow">if</span> (!type) {</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;         <span class="keywordflow">return</span> x;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      }</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;   }</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;}</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;<span class="comment"> * \brief Find an unused payload type</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;<span class="comment"> * \param codecs Codecs structure to look in</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="comment"> * \note Both static_RTP_PT_lock and codecs (if given) must be at least</span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;<span class="comment"> *       read locked before calling.</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;<span class="comment"> * \retval Numerical payload type</span></div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;<span class="comment"> * \retval -1 if not found.</span></div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01701"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ae1e679c32bea7207cd56f3b5bb0ed20d"> 1701</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ae1e679c32bea7207cd56f3b5bb0ed20d">find_unused_payload</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>)</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;{</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;   <span class="comment">/* find next available dynamic payload slot */</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;   res = <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabc9d2a90ef7a2f9e71928d8afeaf696">find_unused_payload_in_range</a>(</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;      codecs, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a93f4ec51ddb2654b816f260287c6182c">AST_RTP_PT_FIRST_DYNAMIC</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a>, static_RTP_PT);</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;   <span class="keywordflow">if</span> (res != -1) {</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;   }</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd6/group__main__options.html#ga2834e29d260312cf03f1e463a112631b">ast_option_rtpusedynamic</a>) {</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;<span class="comment">       * We&#39;re using default values for some dynamic types. So if an unused</span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="comment">       * slot was not found try again, but this time ignore the default</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="comment">       * values declared for dynamic types (except for 101 and 121) .</span></div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#a1229bdedff51a0fc453b7c482cd8dd49">ignore</a>[<a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a>] = {0};</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;      ignore[101] = static_RTP_PT[101];</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      ignore[121] = static_RTP_PT[121];</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      res = <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabc9d2a90ef7a2f9e71928d8afeaf696">find_unused_payload_in_range</a>(</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;         codecs, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a93f4ec51ddb2654b816f260287c6182c">AST_RTP_PT_FIRST_DYNAMIC</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a>, ignore);</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      <span class="keywordflow">if</span> (res != -1) {</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;         <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;      }</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;   }</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;   <span class="comment">/* http://www.iana.org/assignments/rtp-parameters</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="comment">    * RFC 3551, Section 3: &quot;[...] applications which need to define more</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="comment">    * than 32 dynamic payload types MAY bind codes below 96, in which case</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="comment">    * it is RECOMMENDED that unassigned payload type numbers be used</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="comment">    * first&quot;. Updated by RFC 5761, Section 4: &quot;[...] values in the range</span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;<span class="comment">    * 64-95 MUST NOT be used [to avoid conflicts with RTCP]&quot;. Summaries:</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<span class="comment">    * https://tools.ietf.org/html/draft-roach-mmusic-unified-plan#section-3.2.1.2</span></div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;<span class="comment">    * https://tools.ietf.org/html/draft-wu-avtcore-dynamic-pt-usage#section-3</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   res = <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabc9d2a90ef7a2f9e71928d8afeaf696">find_unused_payload_in_range</a>(</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      codecs, <a class="code" href="../../d5/d60/utils_8h.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(<a class="code" href="../../d6/dd6/group__main__options.html#gaa241e9e2481830111df49cf5addaab99">ast_option_rtpptdynamic</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#aaa3062109825b3dff6b02505d4e44a38">AST_RTP_PT_LAST_STATIC</a> + 1),</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0aec28074ae9e42a635acf7995b14793">AST_RTP_PT_LAST_REASSIGN</a>, static_RTP_PT);</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;   <span class="keywordflow">if</span> (res != -1) {</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;   }</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;   <span class="comment">/* Yet, reusing mappings below AST_RTP_PT_LAST_STATIC (35) is not supported</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;<span class="comment">    * in Asterisk because when Compact Headers are activated, no rtpmap is</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;<span class="comment">    * send for those below 35. If you want to use 35 and below</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;<span class="comment">    * A) do not use Compact Headers,</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;<span class="comment">    * B) remove that code in chan_sip/res_pjsip, or</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;<span class="comment">    * C) add a flag that this RTP Payload Type got reassigned dynamically</span></div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;<span class="comment">    *    and requires a rtpmap even with Compact Headers enabled.</span></div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;   res = <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabc9d2a90ef7a2f9e71928d8afeaf696">find_unused_payload_in_range</a>(</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      codecs, <a class="code" href="../../d5/d60/utils_8h.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(<a class="code" href="../../d6/dd6/group__main__options.html#gaa241e9e2481830111df49cf5addaab99">ast_option_rtpptdynamic</a>, 20),</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#aaa3062109825b3dff6b02505d4e44a38">AST_RTP_PT_LAST_STATIC</a> + 1, static_RTP_PT);</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;   <span class="keywordflow">if</span> (res != -1) {</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;   }</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabc9d2a90ef7a2f9e71928d8afeaf696">find_unused_payload_in_range</a>(</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;      codecs, <a class="code" href="../../d5/d60/utils_8h.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(<a class="code" href="../../d6/dd6/group__main__options.html#gaa241e9e2481830111df49cf5addaab99">ast_option_rtpptdynamic</a>, 0),</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      20, static_RTP_PT);</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;}</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;<span class="comment"> * \brief Find the oldest non-primary dynamic rx payload type.</span></div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="comment"> * \since 14.0.0</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;<span class="comment"> * \param codecs Codecs structure to look in</span></div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;<span class="comment"> * \note It is assumed that codecs is at least read locked before calling.</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;<span class="comment"> * \retval Numerical payload type</span></div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;<span class="comment"> * \retval -1 if not found.</span></div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01778"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a7531caca0d99015491d75d8556807aab"> 1778</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a7531caca0d99015491d75d8556807aab">rtp_codecs_find_non_primary_dynamic_rx</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>)</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;{</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;   <span class="keyword">struct </span>timeval oldest;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;   <span class="keywordtype">int</span> payload = -1;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;   idx = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a93f4ec51ddb2654b816f260287c6182c">AST_RTP_PT_FIRST_DYNAMIC</a>;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;   <span class="keywordflow">for</span> (; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_rx); ++idx) {</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_rx, idx);</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      <span class="keywordflow">if</span> (type</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;         &amp;&amp; !type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a9acb7c8900a0a4dc89f77ed353034b86">primary_mapping</a></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;         &amp;&amp; (payload == -1</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            || <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ad4668d3f601a8a621df3c3a195296cdd">when_retired</a>, oldest) &lt; 0)) {</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;         oldest = type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ad4668d3f601a8a621df3c3a195296cdd">when_retired</a>;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;         payload = idx;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      }</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;   }</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;   <span class="keywordflow">return</span> payload;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;}</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="comment"> * \brief Assign a payload type for the rx mapping.</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;<span class="comment"> * \since 14.0.0</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="comment"> * \param codecs Codecs structure to look in</span></div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;<span class="comment"> * \param asterisk_format Non-zero if the given Asterisk format is present</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="comment"> * \param format Asterisk format to look for</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;<span class="comment"> * \param code The format to look for</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;<span class="comment"> * \param explicit Require the provided code to be explicitly used</span></div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;<span class="comment"> * \note It is assumed that static_RTP_PT_lock is at least read locked before calling.</span></div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;<span class="comment"> * \retval Numerical payload type</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;<span class="comment"> * \retval -1 if could not assign.</span></div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01815"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a65c51eab105ec6198ced0142947bc94d"> 1815</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a65c51eab105ec6198ced0142947bc94d">rtp_codecs_assign_payload_code_rx</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keywordtype">int</span> asterisk_format, <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, <span class="keywordtype">int</span> code, <span class="keywordtype">int</span> <span class="keyword">explicit</span>)</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;{</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;   <span class="keywordtype">int</span> payload = code;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d3/d63/namespace10aedae86a32__add__outgoing__enum__va.html#a42c0f9e518790273ec193fa1b227fea7">new_type</a>;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;   <span class="keywordflow">if</span> (!<span class="keyword">explicit</span>) {</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      payload = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ac17174557c55d1ff7b5d08b06395241f">find_static_payload_type</a>(asterisk_format, format, code);</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      <span class="keywordflow">if</span> (payload &lt; 0 &amp;&amp; (!asterisk_format || !<a class="code" href="../../d6/dd6/group__main__options.html#ga2834e29d260312cf03f1e463a112631b">ast_option_rtpusedynamic</a>)) {</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      }</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;   }</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;   new_type = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a6401bb61dcc6b76101f99f0127b28a5c">rtp_payload_type_alloc</a>(format, payload, code, 1);</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;   <span class="keywordflow">if</span> (!new_type) {</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;   }</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;   <span class="keywordflow">if</span> (payload &gt; -1 &amp;&amp; (payload &lt; <a class="code" href="../../d5/dde/rtp__engine_8h.html#a93f4ec51ddb2654b816f260287c6182c">AST_RTP_PT_FIRST_DYNAMIC</a></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;      || <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_rx) &lt;= payload</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;      || !<a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_rx, payload))) {</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="comment">       * The payload type is a static assignment</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<span class="comment">       * or our default dynamic position is available.</span></div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab4e151b8ad1b6073128471f3e65671b3">rtp_codecs_payload_replace_rx</a>(codecs, payload, new_type);</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<span class="keyword">explicit</span> &amp;&amp; (-1 &lt; (payload = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ae1e679c32bea7207cd56f3b5bb0ed20d">find_unused_payload</a>(codecs))</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      || -1 &lt; (payload = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a7531caca0d99015491d75d8556807aab">rtp_codecs_find_non_primary_dynamic_rx</a>(codecs)))) {</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;<span class="comment">       * We found the first available empty dynamic position</span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;<span class="comment">       * or we found a mapping that should no longer be</span></div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;<span class="comment">       * actively used.</span></div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      new_type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a> = <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;      <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab4e151b8ad1b6073128471f3e65671b3">rtp_codecs_payload_replace_rx</a>(codecs, payload, new_type);</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">explicit</span>) {</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;<span class="comment">      * They explicitly requested this payload number be used but it couldn&#39;t be</span></div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;<span class="comment">      */</span></div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      payload = -1;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;<span class="comment">       * There are no empty or non-primary dynamic positions</span></div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;<span class="comment">       * left.  Sadness.</span></div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;<span class="comment">       * I don&#39;t think this is really possible.</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No dynamic RTP payload type values available &quot;</span></div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;         <span class="stringliteral">&quot;for %s - %d!\n&quot;</span>, format ? <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(format) : <span class="stringliteral">&quot;&quot;</span>, code);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;   }</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(new_type, -1);</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;}</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;</div><div class="line"><a name="l01873"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#af77702faece7e8cc93042e21eb2ed05c"> 1873</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#af77702faece7e8cc93042e21eb2ed05c">ast_rtp_codecs_payload_code</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>, <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, <span class="keywordtype">int</span> code)</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;{</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a> = -1;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;   <span class="keywordflow">if</span> (!asterisk_format) {</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_rx); ++idx) {</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;         type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_rx, idx);</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;         <span class="keywordflow">if</span> (!type) {</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;         }</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;         <span class="keywordflow">if</span> (!type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;            &amp;&amp; type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a9acb7c8900a0a4dc89f77ed353034b86">primary_mapping</a></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;            &amp;&amp; type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a> == code) {</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;            payload = idx;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;         }</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      }</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (format) {</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;      <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_rx); ++idx) {</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;         type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_rx, idx);</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;         <span class="keywordflow">if</span> (!type) {</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;         }</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;         <span class="keywordflow">if</span> (type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a></div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;            &amp;&amp; type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a9acb7c8900a0a4dc89f77ed353034b86">primary_mapping</a></div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;            &amp;&amp; <a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(format, type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;            payload = idx;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;         }</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;      }</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;   }</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;   <span class="keywordflow">if</span> (payload &lt; 0) {</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      payload = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a65c51eab105ec6198ced0142947bc94d">rtp_codecs_assign_payload_code_rx</a>(codecs, asterisk_format, format,</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;         code, 0);</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;   }</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;}</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;</div><div class="line"><a name="l01923"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a0d1b6644a258c74b557e5227f07ff4f6"> 1923</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a0d1b6644a258c74b557e5227f07ff4f6">ast_rtp_codecs_payload_set_rx</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keywordtype">int</span> code, <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>)</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;{</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a65c51eab105ec6198ced0142947bc94d">rtp_codecs_assign_payload_code_rx</a>(codecs, 1, format, code, 1);</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;}</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;</div><div class="line"><a name="l01928"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a8631c44e7160622bcbdc6aea8b449e5f"> 1928</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a8631c44e7160622bcbdc6aea8b449e5f">ast_rtp_codecs_payload_code_tx</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, <span class="keywordtype">int</span> code)</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;{</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a> = -1;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;   <span class="keywordflow">if</span> (!asterisk_format) {</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;      <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_tx); ++idx) {</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;         type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_tx, idx);</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;         <span class="keywordflow">if</span> (!type) {</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;         }</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;         <span class="keywordflow">if</span> (!type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;            &amp;&amp; type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a> == code) {</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;            payload = idx;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;         }</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;      }</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (format) {</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_tx); ++idx) {</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;         type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_tx, idx);</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;         <span class="keywordflow">if</span> (!type) {</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;         }</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;         <span class="keywordflow">if</span> (type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;            &amp;&amp; <a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(format, type-&gt;<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;            payload = idx;</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;         }</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;      }</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;   }</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;   <span class="keywordflow">if</span> (payload &lt; 0) {</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;      payload = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ac17174557c55d1ff7b5d08b06395241f">find_static_payload_type</a>(asterisk_format, format, code);</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;   }</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;}</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;</div><div class="line"><a name="l01975"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a7a339b51a851d9fa454e48a38f69d9d7"> 1975</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a7a339b51a851d9fa454e48a38f69d9d7">ast_rtp_codecs_find_payload_code</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>)</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;{</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;   <span class="keywordflow">if</span> (payload &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;codecs-&gt;payload_mapping_tx)) {</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      type = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;codecs-&gt;payload_mapping_tx, payload);</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      <span class="keywordflow">if</span> (type) {</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;         res = <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      }</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;   }</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;codecs-&gt;<a class="code" href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">codecs_lock</a>);</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;}</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;</div><div class="line"><a name="l01992"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ad47d1bd43ea874c9dc5564d85588a99a"> 1992</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>,</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, <span class="keywordtype">int</span> code, <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6">ast_rtp_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>)</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;{</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *res = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;mime_types_lock);</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../da/dbe/rtp__engine_8c.html#a80375839a4de919dd2024ee65251ad0d">mime_types_len</a>; i++) {</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[i].payload_type.asterisk_format &amp;&amp; asterisk_format &amp;&amp; format &amp;&amp;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;         (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(format, <a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[i].payload_type.format) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>)) {</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;         <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(format, <a class="code" href="../../db/d1c/format__cache_8h.html#ad230bc99f5cd46e56e97d32941ba5b23">ast_format_g726_aal2</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) &amp;&amp;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;               (options &amp; <a class="code" href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6ad570d49420fe15c4660793d1fc2f0fc8">AST_RTP_OPT_G726_NONSTANDARD</a>)) {</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;            res = <span class="stringliteral">&quot;G726-32&quot;</span>;</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;            res = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[i].<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#a3ec6ee65afc37dae29a21bec31958574">subtype</a>;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;         }</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[i].payload_type.asterisk_format &amp;&amp; !asterisk_format &amp;&amp;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;         <a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[i].<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#ac9b3af8d8bb662272a6684754f6e9622">payload_type</a>.<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a> == code) {</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;         res = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[i].<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#a3ec6ee65afc37dae29a21bec31958574">subtype</a>;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;      }</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;   }</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;mime_types_lock);</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;}</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;</div><div class="line"><a name="l02022"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a039329c34af438a54c6c4f3ee8abe0f5"> 2022</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a039329c34af438a54c6c4f3ee8abe0f5">ast_rtp_lookup_sample_rate2</a>(<span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>,</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, <span class="keywordtype">int</span> code)</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;{</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;mime_types_lock);</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../da/dbe/rtp__engine_8c.html#a80375839a4de919dd2024ee65251ad0d">mime_types_len</a>; ++i) {</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[i].payload_type.asterisk_format &amp;&amp; asterisk_format &amp;&amp; format &amp;&amp;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;         (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(format, <a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[i].payload_type.format) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>)) {</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;         res = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[i].<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>;</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[i].payload_type.asterisk_format &amp;&amp; !asterisk_format &amp;&amp;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;         <a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[i].<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#ac9b3af8d8bb662272a6684754f6e9622">payload_type</a>.<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a> == code) {</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;         res = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[i].<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>;</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      }</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;   }</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;mime_types_lock);</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;}</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;</div><div class="line"><a name="l02045"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a040862f38bfbc80a11a220a3acc4c9d5"> 2045</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a040862f38bfbc80a11a220a3acc4c9d5">ast_rtp_lookup_mime_multiple2</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *ast_format_capability, <span class="keywordtype">int</span> rtp_capability, <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a>, <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6">ast_rtp_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>)</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;{</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;   <span class="keywordtype">int</span> found = 0;</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;   <span class="keywordflow">if</span> (!buf) {</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;   }</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;   <span class="keywordflow">if</span> (asterisk_format) {</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;      <span class="keywordtype">int</span> x;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *tmp_fmt;</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(ast_format_capability); x++) {</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;         tmp_fmt = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(ast_format_capability, x);</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;         name = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a>(asterisk_format, tmp_fmt, 0, options);</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(tmp_fmt, -1);</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot;%s|&quot;</span>, name);</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;         found = 1;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;      }</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;      <span class="keywordtype">int</span> x;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot;0x%x (&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) rtp_capability);</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;      <span class="keywordflow">for</span> (x = 1; x &lt;= <a class="code" href="../../d5/dde/rtp__engine_8h.html#ae89f572a6b37614f05f4e210afcffa8c">AST_RTP_MAX</a>; x &lt;&lt;= 1) {</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;         <span class="keywordflow">if</span> (rtp_capability &amp; x) {</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;            name = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a>(asterisk_format, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, x, options);</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot;%s|&quot;</span>, name);</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;            found = 1;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;         }</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;      }</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;   }</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot;%s&quot;</span>, found ? <span class="stringliteral">&quot;)&quot;</span> : <span class="stringliteral">&quot;nothing)&quot;</span>);</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf);</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;}</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;</div><div class="line"><a name="l02081"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a60d6422d11e8d18f20596a91988d9275"> 2081</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a60d6422d11e8d18f20596a91988d9275">ast_rtp_instance_dtmf_begin</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;{</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ab640b169de1a9a47a400837e5e6294be">dtmf_begin</a>) {</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;      res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ab640b169de1a9a47a400837e5e6294be">dtmf_begin</a>(instance, digit);</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      res = -1;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;   }</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;}</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;</div><div class="line"><a name="l02095"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ad01e15ecfeaebeaf55cf0c984ee9ff2f"> 2095</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ad01e15ecfeaebeaf55cf0c984ee9ff2f">ast_rtp_instance_dtmf_end</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;{</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a48500e6c95b738b6d442251aad1760d0">dtmf_end</a>) {</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a48500e6c95b738b6d442251aad1760d0">dtmf_end</a>(instance, digit);</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      res = -1;</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;   }</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;}</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;</div><div class="line"><a name="l02109"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a80e371ebfcc32d8af17f6312ebe72567"> 2109</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a80e371ebfcc32d8af17f6312ebe72567">ast_rtp_instance_dtmf_end_with_duration</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> duration)</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;{</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a96b200c1eb9c9203c9db9c790cd043a7">dtmf_end_with_duration</a>) {</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;      res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a96b200c1eb9c9203c9db9c790cd043a7">dtmf_end_with_duration</a>(instance, digit, duration);</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      res = -1;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;   }</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;}</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;</div><div class="line"><a name="l02123"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a3514f29b438a855f44f440c7cb8d2800"> 2123</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a3514f29b438a855f44f440c7cb8d2800">ast_rtp_instance_dtmf_mode_set</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6ee">ast_rtp_dtmf_mode</a> dtmf_mode)</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;{</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a6be325a64ef4f7a8b326a7d1feb41806">dtmf_mode_set</a>) {</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;      res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a6be325a64ef4f7a8b326a7d1feb41806">dtmf_mode_set</a>(instance, dtmf_mode);</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;      res = -1;</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;   }</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;}</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;</div><div class="line"><a name="l02137"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a0cff5eb6a29ecb54fe5589a48556bfac"> 2137</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6ee">ast_rtp_dtmf_mode</a> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a0cff5eb6a29ecb54fe5589a48556bfac">ast_rtp_instance_dtmf_mode_get</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;{</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a439500472bab4c52aae4ad0b60e16d72">dtmf_mode_get</a>) {</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;      res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a439500472bab4c52aae4ad0b60e16d72">dtmf_mode_get</a>(instance);</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      res = 0;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;   }</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;}</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;</div><div class="line"><a name="l02151"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#aef4f32cf0fa56818892f9eca7a2a8896"> 2151</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#aef4f32cf0fa56818892f9eca7a2a8896">ast_rtp_instance_update_source</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;{</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#aaffcecf59a46cd57d40b6306d40a74fa">update_source</a>) {</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;      instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#aaffcecf59a46cd57d40b6306d40a74fa">update_source</a>(instance);</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;   }</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;}</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;</div><div class="line"><a name="l02160"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#adcb4a92a7c8fd3bcde19ecc417a3e8a3"> 2160</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#adcb4a92a7c8fd3bcde19ecc417a3e8a3">ast_rtp_instance_change_source</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;{</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a48426638ead592908e3ac2ce173fd02d">change_source</a>) {</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;      instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a48426638ead592908e3ac2ce173fd02d">change_source</a>(instance);</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;   }</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;}</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;</div><div class="line"><a name="l02169"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ab71294e675bc01eb29e9fd13b3839759"> 2169</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab71294e675bc01eb29e9fd13b3839759">ast_rtp_instance_set_qos</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> <a class="code" href="../../d5/dff/chan__iax2_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>, <span class="keywordtype">int</span> <a class="code" href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>)</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;{</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a27e0280249323e0da56892bd8d4c0a15">qos</a>) {</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;      res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a27e0280249323e0da56892bd8d4c0a15">qos</a>(instance, tos, cos, desc);</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;      res = -1;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;   }</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;}</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;</div><div class="line"><a name="l02183"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a3978338bfe35df207f003782e428fb0c"> 2183</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a3978338bfe35df207f003782e428fb0c">ast_rtp_instance_stop</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;{</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a3a02b2ea9f0ccfd0d46e4547f3b8fa30">stop</a>) {</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a3a02b2ea9f0ccfd0d46e4547f3b8fa30">stop</a>(instance);</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;   }</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;}</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;</div><div class="line"><a name="l02192"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#aee3ef7f9e53a34e743c3a95c9ca95fb4"> 2192</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#aee3ef7f9e53a34e743c3a95c9ca95fb4">ast_rtp_instance_fd</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> rtcp)</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;{</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a64d1d6751fc14c6f34d5a9b90a424916">fd</a>) {</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;      res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a64d1d6751fc14c6f34d5a9b90a424916">fd</a>(instance, rtcp);</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;      res = -1;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;   }</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;}</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;</div><div class="line"><a name="l02206"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ad8bdc0c51b9a04967d2b507e64d64d5b"> 2206</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#ad8bdc0c51b9a04967d2b507e64d64d5b">ast_rtp_instance_get_glue</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>)</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;{</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a> *glue = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../da/dd0/structglues.html">glues</a>);</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../da/dd0/structglues.html">glues</a>, glue, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(glue-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>, type)) {</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      }</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;   }</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../da/dd0/structglues.html">glues</a>);</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;   <span class="keywordflow">return</span> glue;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;}</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;<span class="comment"> * \brief Conditionally unref an rtp instance</span></div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02226"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#aafd2280a256174629b2fe05b4ffaaab1"> 2226</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#aafd2280a256174629b2fe05b4ffaaab1">unref_instance_cond</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> **instance)</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;{</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;   <span class="keywordflow">if</span> (*instance) {</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(*instance, -1);</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;      *instance = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;   }</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;}</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;</div><div class="line"><a name="l02234"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a71281cffb0ab0658839b8da1296d06b6"> 2234</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a71281cffb0ab0658839b8da1296d06b6">ast_rtp_instance_get_bridged</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;{</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *<a class="code" href="../../df/d7a/structast__rtp__instance.html#a71b52e664623eb3a1f882d995dd2b499">bridged</a>;</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;   bridged = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a71b52e664623eb3a1f882d995dd2b499">bridged</a>;</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html#a71b52e664623eb3a1f882d995dd2b499">bridged</a>;</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;}</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;</div><div class="line"><a name="l02244"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#afcde4e4b65201b3a7b5ee9c84bd1043c"> 2244</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#afcde4e4b65201b3a7b5ee9c84bd1043c">ast_rtp_instance_set_bridged</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *<a class="code" href="../../df/d7a/structast__rtp__instance.html#a71b52e664623eb3a1f882d995dd2b499">bridged</a>)</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;{</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a71b52e664623eb3a1f882d995dd2b499">bridged</a> = <a class="code" href="../../df/d7a/structast__rtp__instance.html#a71b52e664623eb3a1f882d995dd2b499">bridged</a>;</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;}</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;</div><div class="line"><a name="l02251"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a1dd08b3c373d60d9eb21ac6994f3e81d"> 2251</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a1dd08b3c373d60d9eb21ac6994f3e81d">ast_rtp_instance_early_bridge_make_compatible</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *c_dst, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *c_src)</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;{</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance_dst = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *instance_src = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      *vinstance_dst = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *vinstance_src = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      *tinstance_dst = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *tinstance_src = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a> *glue_dst, *glue_src;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054c">ast_rtp_glue_result</a> audio_glue_dst_res = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>, video_glue_dst_res = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054c">ast_rtp_glue_result</a> audio_glue_src_res = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>, video_glue_src_res = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap_dst = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap_src = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;   <span class="comment">/* Lock both channels so we can look for the glue that binds them together */</span></div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(c_dst, c_src);</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;   <span class="keywordflow">if</span> (!cap_src || !cap_dst) {</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;   }</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;   <span class="comment">/* Grab glue that binds each channel to something using the RTP engine */</span></div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;   <span class="keywordflow">if</span> (!(glue_dst = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ad8bdc0c51b9a04967d2b507e64d64d5b">ast_rtp_instance_get_glue</a>(<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(c_dst)-&gt;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>)) || !(glue_src = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ad8bdc0c51b9a04967d2b507e64d64d5b">ast_rtp_instance_get_glue</a>(<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(c_src)-&gt;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>))) {</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Can&#39;t find native functions for channel &#39;%s&#39;\n&quot;</span>, glue_dst ? <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c_src) : <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c_dst));</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;   }</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;   audio_glue_dst_res = glue_dst-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a42454110450e5a6883707f9b4b685e8f">get_rtp_info</a>(c_dst, &amp;instance_dst);</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;   video_glue_dst_res = glue_dst-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#afc66a77fb119541a45aebe90c46db8a7">get_vrtp_info</a> ? glue_dst-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#afc66a77fb119541a45aebe90c46db8a7">get_vrtp_info</a>(c_dst, &amp;vinstance_dst) : <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;   audio_glue_src_res = glue_src-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a42454110450e5a6883707f9b4b685e8f">get_rtp_info</a>(c_src, &amp;instance_src);</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;   video_glue_src_res = glue_src-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#afc66a77fb119541a45aebe90c46db8a7">get_vrtp_info</a> ? glue_src-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#afc66a77fb119541a45aebe90c46db8a7">get_vrtp_info</a>(c_src, &amp;vinstance_src) : <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;   <span class="comment">/* If we are carrying video, and both sides are not going to remotely bridge... fail the native bridge */</span></div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;   <span class="keywordflow">if</span> (video_glue_dst_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a> &amp;&amp; (audio_glue_dst_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a> || video_glue_dst_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a>)) {</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;      audio_glue_dst_res = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;   }</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;   <span class="keywordflow">if</span> (video_glue_src_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a> &amp;&amp; (audio_glue_src_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a> || video_glue_src_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a>)) {</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      audio_glue_src_res = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;   }</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;   <span class="keywordflow">if</span> (audio_glue_dst_res == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a> &amp;&amp; (video_glue_dst_res == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a> || video_glue_dst_res == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a>) &amp;&amp; glue_dst-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a446e18924acc8aa16863aac05266866d">get_codec</a>) {</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;      glue_dst-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a446e18924acc8aa16863aac05266866d">get_codec</a>(c_dst, cap_dst);</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;   }</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;   <span class="keywordflow">if</span> (audio_glue_src_res == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a> &amp;&amp; (video_glue_src_res == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a> || video_glue_src_res == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a>) &amp;&amp; glue_src-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a446e18924acc8aa16863aac05266866d">get_codec</a>) {</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;      glue_src-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a446e18924acc8aa16863aac05266866d">get_codec</a>(c_src, cap_src);</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;   }</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;   <span class="comment">/* If any sort of bridge is forbidden just completely bail out and go back to generic bridging */</span></div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;   <span class="keywordflow">if</span> (audio_glue_dst_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a> || audio_glue_src_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a>) {</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;   }</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;   <span class="comment">/* Make sure we have matching codecs */</span></div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d3c/format__cap_8h.html#a9c9b87b5062c057862aa7d4237db2780">ast_format_cap_iscompatible</a>(cap_dst, cap_src)) {</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;   }</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#afb3071f0aa39f4fccc54894395f73a62">ast_rtp_codecs_payloads_xover</a>(&amp;instance_src-&gt;codecs, &amp;instance_dst-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a07d5509bbac8167e94ad8790e3fe87a4">codecs</a>, instance_dst);</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;   <span class="keywordflow">if</span> (vinstance_dst &amp;&amp; vinstance_src) {</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;      <a class="code" href="../../da/dbe/rtp__engine_8c.html#afb3071f0aa39f4fccc54894395f73a62">ast_rtp_codecs_payloads_xover</a>(&amp;vinstance_src-&gt;codecs, &amp;vinstance_dst-&gt;codecs, vinstance_dst);</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;   }</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;   <span class="keywordflow">if</span> (tinstance_dst &amp;&amp; tinstance_src) {</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;      <a class="code" href="../../da/dbe/rtp__engine_8c.html#afb3071f0aa39f4fccc54894395f73a62">ast_rtp_codecs_payloads_xover</a>(&amp;tinstance_src-&gt;codecs, &amp;tinstance_dst-&gt;codecs, tinstance_dst);</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;   }</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;   <span class="keywordflow">if</span> (glue_dst-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a6ee109780d8fa72a8b5e87471330d053">update_peer</a>(c_dst, instance_src, vinstance_src, tinstance_src, cap_src, 0)) {</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Channel &#39;%s&#39; failed to setup early bridge to &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c_dst), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c_src));</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Seeded SDP of &#39;%s&#39; with that of &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c_dst), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c_src));</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;   }</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>:</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(c_dst);</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(c_src);</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cap_dst);</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cap_src);</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aafd2280a256174629b2fe05b4ffaaab1">unref_instance_cond</a>(&amp;instance_dst);</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aafd2280a256174629b2fe05b4ffaaab1">unref_instance_cond</a>(&amp;instance_src);</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aafd2280a256174629b2fe05b4ffaaab1">unref_instance_cond</a>(&amp;vinstance_dst);</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aafd2280a256174629b2fe05b4ffaaab1">unref_instance_cond</a>(&amp;vinstance_src);</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aafd2280a256174629b2fe05b4ffaaab1">unref_instance_cond</a>(&amp;tinstance_dst);</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aafd2280a256174629b2fe05b4ffaaab1">unref_instance_cond</a>(&amp;tinstance_src);</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;}</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;</div><div class="line"><a name="l02337"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a530c895cce74a3483ff97c538c598f8d"> 2337</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a530c895cce74a3483ff97c538c598f8d">ast_rtp_instance_early_bridge</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *c0, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *c1)</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;{</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance0 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *instance1 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;         *vinstance0 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *vinstance1 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;         *tinstance0 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *tinstance1 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a> *glue0, *glue1;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054c">ast_rtp_glue_result</a> audio_glue0_res = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>, video_glue0_res = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054c">ast_rtp_glue_result</a> audio_glue1_res = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>, video_glue1_res = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap0 = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap1 = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;   <span class="comment">/* If there is no second channel just immediately bail out, we are of no use in that scenario */</span></div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;   <span class="keywordflow">if</span> (!c1 || !cap1 || !cap0) {</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cap0);</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cap1);</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;   }</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;   <span class="comment">/* Lock both channels so we can look for the glue that binds them together */</span></div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(c0, c1);</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;   <span class="comment">/* Grab glue that binds each channel to something using the RTP engine */</span></div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;   <span class="keywordflow">if</span> (!(glue0 = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ad8bdc0c51b9a04967d2b507e64d64d5b">ast_rtp_instance_get_glue</a>(<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(c0)-&gt;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>)) || !(glue1 = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ad8bdc0c51b9a04967d2b507e64d64d5b">ast_rtp_instance_get_glue</a>(<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(c1)-&gt;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>))) {</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Can&#39;t find native functions for channel &#39;%s&#39;\n&quot;</span>, glue0 ? <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c1) : <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c0));</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;   }</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;   audio_glue0_res = glue0-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a42454110450e5a6883707f9b4b685e8f">get_rtp_info</a>(c0, &amp;instance0);</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;   video_glue0_res = glue0-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#afc66a77fb119541a45aebe90c46db8a7">get_vrtp_info</a> ? glue0-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#afc66a77fb119541a45aebe90c46db8a7">get_vrtp_info</a>(c0, &amp;vinstance0) : <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;   audio_glue1_res = glue1-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a42454110450e5a6883707f9b4b685e8f">get_rtp_info</a>(c1, &amp;instance1);</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;   video_glue1_res = glue1-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#afc66a77fb119541a45aebe90c46db8a7">get_vrtp_info</a> ? glue1-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#afc66a77fb119541a45aebe90c46db8a7">get_vrtp_info</a>(c1, &amp;vinstance1) : <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;   <span class="comment">/* If we are carrying video, and both sides are not going to remotely bridge... fail the native bridge */</span></div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;   <span class="keywordflow">if</span> (video_glue0_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a> &amp;&amp; (audio_glue0_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a> || video_glue0_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a>)) {</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;      audio_glue0_res = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;   }</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;   <span class="keywordflow">if</span> (video_glue1_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a> &amp;&amp; (audio_glue1_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a> || video_glue1_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a>)) {</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;      audio_glue1_res = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;   }</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;   <span class="keywordflow">if</span> (audio_glue0_res == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a> &amp;&amp; (video_glue0_res == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a> || video_glue0_res == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a>) &amp;&amp; glue0-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a446e18924acc8aa16863aac05266866d">get_codec</a>) {</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;      glue0-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a446e18924acc8aa16863aac05266866d">get_codec</a>(c0, cap0);</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;   }</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;   <span class="keywordflow">if</span> (audio_glue1_res == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a> &amp;&amp; (video_glue1_res == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a> || video_glue1_res == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a>) &amp;&amp; glue1-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a446e18924acc8aa16863aac05266866d">get_codec</a>) {</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;      glue1-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a446e18924acc8aa16863aac05266866d">get_codec</a>(c1, cap1);</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;   }</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;   <span class="comment">/* If any sort of bridge is forbidden just completely bail out and go back to generic bridging */</span></div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;   <span class="keywordflow">if</span> (audio_glue0_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a> || audio_glue1_res != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a>) {</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;   }</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;   <span class="comment">/* Make sure we have matching codecs */</span></div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d3c/format__cap_8h.html#a9c9b87b5062c057862aa7d4237db2780">ast_format_cap_iscompatible</a>(cap0, cap1)) {</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;   }</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;   <span class="comment">/* Bridge media early */</span></div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;   <span class="keywordflow">if</span> (glue0-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a6ee109780d8fa72a8b5e87471330d053">update_peer</a>(c0, instance1, vinstance1, tinstance1, cap1, 0)) {</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Channel &#39;%s&#39; failed to setup early bridge to &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c0), c1 ? <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c1) : <span class="stringliteral">&quot;&lt;unspecified&gt;&quot;</span>);</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;   }</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>:</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(c0);</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(c1);</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cap0);</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cap1);</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aafd2280a256174629b2fe05b4ffaaab1">unref_instance_cond</a>(&amp;instance0);</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aafd2280a256174629b2fe05b4ffaaab1">unref_instance_cond</a>(&amp;instance1);</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aafd2280a256174629b2fe05b4ffaaab1">unref_instance_cond</a>(&amp;vinstance0);</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aafd2280a256174629b2fe05b4ffaaab1">unref_instance_cond</a>(&amp;vinstance1);</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aafd2280a256174629b2fe05b4ffaaab1">unref_instance_cond</a>(&amp;tinstance0);</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aafd2280a256174629b2fe05b4ffaaab1">unref_instance_cond</a>(&amp;tinstance1);</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Setting early bridge SDP of &#39;%s&#39; with that of &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c0), c1 ? <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c1) : <span class="stringliteral">&quot;&lt;unspecified&gt;&quot;</span>);</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;}</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;</div><div class="line"><a name="l02418"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a7782ac7af5755719f6ca7a7aefc75aff"> 2418</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a7782ac7af5755719f6ca7a7aefc75aff">ast_rtp_red_init</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> buffer_time, <span class="keywordtype">int</span> *payloads, <span class="keywordtype">int</span> generations)</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;{</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a8cb076cdab76522d134ecba81a93e87b">red_init</a>) {</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a8cb076cdab76522d134ecba81a93e87b">red_init</a>(instance, buffer_time, payloads, generations);</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;      res = -1;</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;   }</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;}</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;</div><div class="line"><a name="l02432"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#af283fac38e91cd5d6026beb0d9e663d8"> 2432</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#af283fac38e91cd5d6026beb0d9e663d8">ast_rtp_red_buffer</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;{</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a7a2750b1709636223469c884ded2e7bb">red_buffer</a>) {</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;      res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a7a2750b1709636223469c884ded2e7bb">red_buffer</a>(instance, frame);</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;      res = -1;</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;   }</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;}</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;</div><div class="line"><a name="l02446"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a82a029e03affad8a6e1b322c0b9fe2c3"> 2446</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a82a029e03affad8a6e1b322c0b9fe2c3">ast_rtp_instance_get_stats</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">struct</span> <a class="code" href="../../d0/db0/structast__rtp__instance__stats.html">ast_rtp_instance_stats</a> *stats, <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378f">ast_rtp_instance_stat</a> stat)</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;{</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a152867fd9e330f1549a15f4fdd8b7021">get_stat</a>) {</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;      res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a152867fd9e330f1549a15f4fdd8b7021">get_stat</a>(instance, stats, stat);</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;      res = -1;</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;   }</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;}</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;</div><div class="line"><a name="l02460"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ab3bd1884eee257b35930744a65e07dc1"> 2460</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#ab3bd1884eee257b35930744a65e07dc1">ast_rtp_instance_get_quality</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43">ast_rtp_instance_stat_field</a> field, <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="keywordtype">size_t</span> size)</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;{</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/db0/structast__rtp__instance__stats.html">ast_rtp_instance_stats</a> stats = { 0, };</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378f">ast_rtp_instance_stat</a> stat;</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;   <span class="comment">/* Determine what statistics we will need to retrieve based on field passed in */</span></div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;   <span class="keywordflow">if</span> (field == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43ac2a4497481a850d7d1bc566e1c774a0b">AST_RTP_INSTANCE_STAT_FIELD_QUALITY</a>) {</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;      stat = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faf8772548ca3d011625888eb38c4511e4">AST_RTP_INSTANCE_STAT_ALL</a>;</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43ad68f17a95942c9072c417911f797fb1f">AST_RTP_INSTANCE_STAT_FIELD_QUALITY_JITTER</a>) {</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;      stat = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268">AST_RTP_INSTANCE_STAT_COMBINED_JITTER</a>;</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43a1b7906e2aaf6e7955fee6933da7a0e5b">AST_RTP_INSTANCE_STAT_FIELD_QUALITY_LOSS</a>) {</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;      stat = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518">AST_RTP_INSTANCE_STAT_COMBINED_LOSS</a>;</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43aaa0e3bc6b178504c7980664b84f80fc8">AST_RTP_INSTANCE_STAT_FIELD_QUALITY_RTT</a>) {</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;      stat = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fae61702d25f656069ccc9ba288b3b4dc7">AST_RTP_INSTANCE_STAT_COMBINED_RTT</a>;</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;   }</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;   <span class="comment">/* Attempt to actually retrieve the statistics we need to generate the quality string */</span></div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/dbe/rtp__engine_8c.html#a82a029e03affad8a6e1b322c0b9fe2c3">ast_rtp_instance_get_stats</a>(instance, &amp;stats, stat)) {</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;   }</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;   <span class="comment">/* Now actually fill the buffer with the good information */</span></div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;   <span class="keywordflow">if</span> (field == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43ac2a4497481a850d7d1bc566e1c774a0b">AST_RTP_INSTANCE_STAT_FIELD_QUALITY</a>) {</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;      snprintf(buf, size, <span class="stringliteral">&quot;ssrc=%u;themssrc=%u;lp=%u;rxjitter=%f;rxcount=%u;txjitter=%f;txcount=%u;rlp=%u;rtt=%f&quot;</span>,</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;          stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a345269c0d57add15c919b781d140e011">local_ssrc</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a052c95f741f3e25e6ab9217a01affb53">remote_ssrc</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a754403af0ba6403237fadb9b6294ca5f">rxploss</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a80552fd3f7f852d51e944dc4105da800">rxjitter</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a066dafb1cdc02b25e6c2329ef7e7a810">rxcount</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aadfdc9692fcc3eb56f7c94f089db163b">txjitter</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a887918839240a36d118b4e1cb46a4de9">txcount</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a934ff2437b6705676a1f8fb9223e8e9b">txploss</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#abc953dca5930a67736d6cd8f72353794">rtt</a>);</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43ad68f17a95942c9072c417911f797fb1f">AST_RTP_INSTANCE_STAT_FIELD_QUALITY_JITTER</a>) {</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;      snprintf(buf, size, <span class="stringliteral">&quot;minrxjitter=%f;maxrxjitter=%f;avgrxjitter=%f;stdevrxjitter=%f;reported_minjitter=%f;reported_maxjitter=%f;reported_avgjitter=%f;reported_stdevjitter=%f;&quot;</span>,</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;          stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a7f3a0b0d420584f13574e0741c4f96ab">local_minjitter</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#adbaefd95043efe7b49f3190ffeff40fb">local_maxjitter</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a3f7aced2b7c50be99b2b27c36f1c3557">local_normdevjitter</a>, sqrt(stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#ac0a16b9afb840b589358fec8953ba092">local_stdevjitter</a>), stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a21f3d3372a6100f94cc23e62886131ba">remote_minjitter</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aad58a04a0dc44700d786791b27fc40b6">remote_maxjitter</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#ad742aaf83d710b381c462677919a8617">remote_normdevjitter</a>, sqrt(stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aff4ec25e589bed0b47f2fa58e9b020f2">remote_stdevjitter</a>));</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43a1b7906e2aaf6e7955fee6933da7a0e5b">AST_RTP_INSTANCE_STAT_FIELD_QUALITY_LOSS</a>) {</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;      snprintf(buf, size, <span class="stringliteral">&quot;minrxlost=%f;maxrxlost=%f;avgrxlost=%f;stdevrxlost=%f;reported_minlost=%f;reported_maxlost=%f;reported_avglost=%f;reported_stdevlost=%f;&quot;</span>,</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;          stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a2c14b23dc2a76aa9ae9a9de210527eb4">local_minrxploss</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a6c8b04702bbcf8c030d6c16e27e7bd1c">local_maxrxploss</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a63bee783a421d71165058889b433a9ab">local_normdevrxploss</a>, sqrt(stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a9dc97ff0394d0d099c6291451e07ea73">local_stdevrxploss</a>), stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a3a851bbeea9961c987cbc8d3d3a365bd">remote_minrxploss</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aa102598d55cb66a61cece8e3033e5352">remote_maxrxploss</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a8f7c0fb630cef59062f987730a17df71">remote_normdevrxploss</a>, sqrt(stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a21f14570a0860de7863be4f0f16e8e4b">remote_stdevrxploss</a>));</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43aaa0e3bc6b178504c7980664b84f80fc8">AST_RTP_INSTANCE_STAT_FIELD_QUALITY_RTT</a>) {</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;      snprintf(buf, size, <span class="stringliteral">&quot;minrtt=%f;maxrtt=%f;avgrtt=%f;stdevrtt=%f;&quot;</span>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aa5e4ba49724f6bb86be553f4c823b510">minrtt</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#ad9e0112e5a3834937c4f84604c175ba6">maxrtt</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a41960a911bf90300e198a29deac4a02f">normdevrtt</a>, stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a484c5279646a0804e4beba6b3f0828c9">stdevrtt</a>);</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;   }</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;}</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;</div><div class="line"><a name="l02500"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a0261ca520593a7aa95eefcbeb884e31e"> 2500</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a0261ca520593a7aa95eefcbeb884e31e">ast_rtp_instance_set_stats_vars</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;{</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;   <span class="keywordtype">char</span> quality_buf[<a class="code" href="../../d5/d7b/channel_8h.html#ada78f1b5f7ec61480c433280f4dfd0a4">AST_MAX_USER_FIELD</a>];</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dc/d23/codec__speex_8c.html#acac7df77df55f2a1bfd8d8d18340b773">quality</a>;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *bridge;</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;   bridge = <a class="code" href="../../d5/d7b/channel_8h.html#af9e27ecd92ff5aa897c9e058dfbd6510">ast_channel_bridge_peer</a>(chan);</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;   <span class="keywordflow">if</span> (bridge) {</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(chan, bridge);</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf195fcf1686408b5e52ad76996653cea">ast_channel_stage_snapshot</a>(bridge);</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;   }</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf195fcf1686408b5e52ad76996653cea">ast_channel_stage_snapshot</a>(chan);</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;   quality = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab3bd1884eee257b35930744a65e07dc1">ast_rtp_instance_get_quality</a>(instance, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43ac2a4497481a850d7d1bc566e1c774a0b">AST_RTP_INSTANCE_STAT_FIELD_QUALITY</a>,</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      quality_buf, <span class="keyword">sizeof</span>(quality_buf));</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;   <span class="keywordflow">if</span> (quality) {</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;RTPAUDIOQOS&quot;</span>, quality);</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;      <span class="keywordflow">if</span> (bridge) {</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge, <span class="stringliteral">&quot;RTPAUDIOQOSBRIDGED&quot;</span>, quality);</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;      }</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;   }</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;   quality = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab3bd1884eee257b35930744a65e07dc1">ast_rtp_instance_get_quality</a>(instance,</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43ad68f17a95942c9072c417911f797fb1f">AST_RTP_INSTANCE_STAT_FIELD_QUALITY_JITTER</a>, quality_buf, <span class="keyword">sizeof</span>(quality_buf));</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;   <span class="keywordflow">if</span> (quality) {</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;RTPAUDIOQOSJITTER&quot;</span>, quality);</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;      <span class="keywordflow">if</span> (bridge) {</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge, <span class="stringliteral">&quot;RTPAUDIOQOSJITTERBRIDGED&quot;</span>, quality);</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;      }</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;   }</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;   quality = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab3bd1884eee257b35930744a65e07dc1">ast_rtp_instance_get_quality</a>(instance,</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43a1b7906e2aaf6e7955fee6933da7a0e5b">AST_RTP_INSTANCE_STAT_FIELD_QUALITY_LOSS</a>, quality_buf, <span class="keyword">sizeof</span>(quality_buf));</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;   <span class="keywordflow">if</span> (quality) {</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;RTPAUDIOQOSLOSS&quot;</span>, quality);</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;      <span class="keywordflow">if</span> (bridge) {</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge, <span class="stringliteral">&quot;RTPAUDIOQOSLOSSBRIDGED&quot;</span>, quality);</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;      }</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;   }</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;   quality = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab3bd1884eee257b35930744a65e07dc1">ast_rtp_instance_get_quality</a>(instance,</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43aaa0e3bc6b178504c7980664b84f80fc8">AST_RTP_INSTANCE_STAT_FIELD_QUALITY_RTT</a>, quality_buf, <span class="keyword">sizeof</span>(quality_buf));</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;   <span class="keywordflow">if</span> (quality) {</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;RTPAUDIOQOSRTT&quot;</span>, quality);</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;      <span class="keywordflow">if</span> (bridge) {</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge, <span class="stringliteral">&quot;RTPAUDIOQOSRTTBRIDGED&quot;</span>, quality);</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;      }</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;   }</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga920b9d3e484257c7e593452a8e36d8d4">ast_channel_stage_snapshot_done</a>(chan);</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;   <span class="keywordflow">if</span> (bridge) {</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga920b9d3e484257c7e593452a8e36d8d4">ast_channel_stage_snapshot_done</a>(bridge);</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge);</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(bridge);</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;   }</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;}</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;</div><div class="line"><a name="l02560"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ae9b93a22194a526e21db5dc4f5d82805"> 2560</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ae9b93a22194a526e21db5dc4f5d82805">ast_rtp_instance_set_read_format</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>)</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;{</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a856782043343a9201074dd948a9d312a">set_read_format</a>) {</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;      res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a856782043343a9201074dd948a9d312a">set_read_format</a>(instance, format);</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;      res = -1;</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;   }</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;}</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;</div><div class="line"><a name="l02574"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a6b9c2dec2e2bd09deca930909063c8d3"> 2574</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a6b9c2dec2e2bd09deca930909063c8d3">ast_rtp_instance_set_write_format</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>)</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;{</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a856782043343a9201074dd948a9d312a">set_read_format</a>) {</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;      res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#aa2724cd47193da754cd0ce97c5252477">set_write_format</a>(instance, format);</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      res = -1;</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;   }</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;}</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;<span class="comment">/* XXX Nothing calls this */</span></div><div class="line"><a name="l02589"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a7ba836e259b39135c3630e314eaec806"> 2589</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a7ba836e259b39135c3630e314eaec806">ast_rtp_instance_make_compatible</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer)</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;{</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a> *glue;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *peer_instance = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;   <span class="keywordflow">if</span> (!instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a74f89f9e4447405765ee376e5cd3056d">make_compatible</a>) {</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;   }</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(peer);</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;   <span class="keywordflow">if</span> (!(glue = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ad8bdc0c51b9a04967d2b507e64d64d5b">ast_rtp_instance_get_glue</a>(<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(peer)-&gt;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>))) {</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(peer);</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;   }</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;   glue-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a42454110450e5a6883707f9b4b685e8f">get_rtp_info</a>(peer, &amp;peer_instance);</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;   <span class="keywordflow">if</span> (!peer_instance) {</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to get_rtp_info for peer type %s\n&quot;</span>, glue-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>);</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(peer);</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;   }</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;   <span class="keywordflow">if</span> (peer_instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a> != instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>) {</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Peer engine mismatch for type %s\n&quot;</span>, glue-&gt;<a class="code" href="../../d8/dc9/structast__rtp__glue.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>);</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(peer);</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(peer_instance, -1);</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;   }</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;<span class="comment">    * XXX Good thing nothing calls this function because we would need</span></div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;<span class="comment">    * deadlock avoidance to get the two instance locks.</span></div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;   res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a74f89f9e4447405765ee376e5cd3056d">make_compatible</a>(chan, instance, peer, peer_instance);</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(peer);</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(peer_instance, -1);</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;   peer_instance = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;}</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;</div><div class="line"><a name="l02633"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#abfe1a23abb6f048f5931e977134df78f"> 2633</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#abfe1a23abb6f048f5931e977134df78f">ast_rtp_instance_available_formats</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *to_endpoint, <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *to_asterisk, <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>)</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;{</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#aac72c5caaa8c6efc53aa5800e5825785">available_formats</a>) {</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;      instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#aac72c5caaa8c6efc53aa5800e5825785">available_formats</a>(instance, to_endpoint, to_asterisk, result);</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(result)) {</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;      }</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;   }</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;   <a class="code" href="../../db/d39/translate_8h.html#a57042913ae83bc388ddd52d820277aa3">ast_translate_available_formats</a>(to_endpoint, to_asterisk, result);</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;}</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;</div><div class="line"><a name="l02647"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#aaef523c36ea1af726854776ee8f2ba51"> 2647</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#aaef523c36ea1af726854776ee8f2ba51">ast_rtp_instance_activate</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;{</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4476b1a5eb13c5d9a359aac69d44e49f">activate</a>) {</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;      res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a4476b1a5eb13c5d9a359aac69d44e49f">activate</a>(instance);</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;      res = 0;</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;   }</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;}</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;</div><div class="line"><a name="l02661"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a6c465b81bc33aa9018af0f972d31b243"> 2661</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a6c465b81bc33aa9018af0f972d31b243">ast_rtp_instance_stun_request</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;               <span class="keyword">struct</span> <a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *suggestion,</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;               <span class="keyword">const</span> <span class="keywordtype">char</span> *username)</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;{</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ab1dad022a5ddda6f009706c2f796458e">stun_request</a>) {</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;      instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ab1dad022a5ddda6f009706c2f796458e">stun_request</a>(instance, suggestion, username);</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;   }</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;}</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;</div><div class="line"><a name="l02670"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#afd73a14bf491aea2a0fdc2613ff21300"> 2670</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#afd73a14bf491aea2a0fdc2613ff21300">ast_rtp_instance_set_timeout</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;{</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;}</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;</div><div class="line"><a name="l02675"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a782cd4a09fbd09a2360143902434dff8"> 2675</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a782cd4a09fbd09a2360143902434dff8">ast_rtp_instance_set_hold_timeout</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;{</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a0cd9148a53de0315aa839694cea4938e">holdtimeout</a> = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;}</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;</div><div class="line"><a name="l02680"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a498e57c534834bb98b09614a139a4283"> 2680</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a498e57c534834bb98b09614a139a4283">ast_rtp_instance_set_keepalive</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> interval)</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;{</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#ae314c4b48027be9feab52906b6313b73">keepalive</a> = interval;</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;}</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;</div><div class="line"><a name="l02685"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a600efcadee5b02fc1715ea10e7bc30e0"> 2685</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a600efcadee5b02fc1715ea10e7bc30e0">ast_rtp_instance_get_timeout</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;{</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;   <span class="keywordflow">return</span> instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;}</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;</div><div class="line"><a name="l02690"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a95cc8ce9e12bd692ef68c40e2a93857c"> 2690</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a95cc8ce9e12bd692ef68c40e2a93857c">ast_rtp_instance_get_hold_timeout</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;{</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;   <span class="keywordflow">return</span> instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a0cd9148a53de0315aa839694cea4938e">holdtimeout</a>;</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;}</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;</div><div class="line"><a name="l02695"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a57ccbb57bb92003f4944587b3b51f71f"> 2695</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a57ccbb57bb92003f4944587b3b51f71f">ast_rtp_instance_get_keepalive</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;{</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;   <span class="keywordflow">return</span> instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#ae314c4b48027be9feab52906b6313b73">keepalive</a>;</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;}</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;</div><div class="line"><a name="l02700"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a0102aea603f46707ed8895975372dd3a"> 2700</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d2/d14/structast__rtp__engine.html">ast_rtp_engine</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a0102aea603f46707ed8895975372dd3a">ast_rtp_instance_get_engine</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;{</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;   <span class="keywordflow">return</span> instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>;</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;}</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;</div><div class="line"><a name="l02705"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a34eee98bc78af7a79bdc3150ad770091"> 2705</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a34eee98bc78af7a79bdc3150ad770091">ast_rtp_instance_get_active_glue</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;{</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;   <span class="keywordflow">return</span> instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a4c5d2e9054e218b8316ecb1dc686a3d8">glue</a>;</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;}</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;</div><div class="line"><a name="l02710"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a2d639001d5f55f96e7795bf3dd7bd6bc"> 2710</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a2d639001d5f55f96e7795bf3dd7bd6bc">ast_rtp_engine_register_srtp</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d5d/structast__srtp__res.html">ast_srtp_res</a> *<a class="code" href="../../d8/dd4/res__srtp_8c.html#a923397ffbd17f98cf3c9717a0d13e353">srtp_res</a>, <span class="keyword">struct</span> <a class="code" href="../../d6/d13/structast__srtp__policy__res.html">ast_srtp_policy_res</a> *<a class="code" href="../../d8/dd4/res__srtp_8c.html#adae622a01b8004d643b26e73a7859c8f">policy_res</a>)</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;{</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;   <span class="keywordflow">if</span> (res_srtp || res_srtp_policy) {</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;   }</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;   <span class="keywordflow">if</span> (!srtp_res || !policy_res) {</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;   }</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;   res_srtp = <a class="code" href="../../d8/dd4/res__srtp_8c.html#a923397ffbd17f98cf3c9717a0d13e353">srtp_res</a>;</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;   res_srtp_policy = <a class="code" href="../../d8/dd4/res__srtp_8c.html#adae622a01b8004d643b26e73a7859c8f">policy_res</a>;</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;}</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;</div><div class="line"><a name="l02725"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a406ed314072b3029782f172649b88e48"> 2725</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a406ed314072b3029782f172649b88e48">ast_rtp_engine_unregister_srtp</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;{</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;   res_srtp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;   res_srtp_policy = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;}</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;</div><div class="line"><a name="l02731"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a2ef79ef84e3dcb1e1378ddef1a1e07b9"> 2731</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a2ef79ef84e3dcb1e1378ddef1a1e07b9">ast_rtp_engine_srtp_is_registered</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;{</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;   <span class="keywordflow">return</span> res_srtp &amp;&amp; <a class="code" href="../../da/dbe/rtp__engine_8c.html#a566ad2621a8d1010836f3eaa2c1ddbe3">res_srtp_policy</a>;</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;}</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;</div><div class="line"><a name="l02736"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#af63b14f966292c58be12163e0df79924"> 2736</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#af63b14f966292c58be12163e0df79924">ast_rtp_instance_add_srtp_policy</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">struct</span> <a class="code" href="../../d4/d86/structast__srtp__policy.html">ast_srtp_policy</a> *remote_policy, <span class="keyword">struct</span> <a class="code" href="../../d4/d86/structast__srtp__policy.html">ast_srtp_policy</a> *local_policy, <span class="keywordtype">int</span> rtcp)</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;{</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d11/structast__srtp.html">ast_srtp</a> **srtp;</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;   <span class="keywordflow">if</span> (!res_srtp) {</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;   }</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;   srtp = rtcp ? &amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a109bb69fd01ee2a9cf4d1583d61b4a1e">rtcp_srtp</a> : &amp;instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#aa0390ab4031deb2ac5b219d2547beb47">srtp</a>;</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;   <span class="keywordflow">if</span> (!*srtp) {</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;      res = res_srtp-&gt;<a class="code" href="../../d0/d5d/structast__srtp__res.html#ac87bc654e623df7d5d480bf845470242">create</a>(srtp, instance, remote_policy);</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (remote_policy) {</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;      res = res_srtp-&gt;<a class="code" href="../../d0/d5d/structast__srtp__res.html#ab935dd91b95bb6948a32a90641a195eb">replace</a>(srtp, instance, remote_policy);</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;   }</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;      res = res_srtp-&gt;<a class="code" href="../../d0/d5d/structast__srtp__res.html#abaa265c86af3e81d7c78ebe92b188120">add_stream</a>(*srtp, local_policy);</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;   }</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;}</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;</div><div class="line"><a name="l02763"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a622089f7b296c002cc855d73172e9da4"> 2763</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/d11/structast__srtp.html">ast_srtp</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a622089f7b296c002cc855d73172e9da4">ast_rtp_instance_get_srtp</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> rtcp)</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;{</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;   <span class="keywordflow">if</span> (rtcp &amp;&amp; instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a109bb69fd01ee2a9cf4d1583d61b4a1e">rtcp_srtp</a>) {</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;      <span class="keywordflow">return</span> instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a109bb69fd01ee2a9cf4d1583d61b4a1e">rtcp_srtp</a>;</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;      <span class="keywordflow">return</span> instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#aa0390ab4031deb2ac5b219d2547beb47">srtp</a>;</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;   }</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;}</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;</div><div class="line"><a name="l02772"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a91283fc41fa9f913318befed94156e06"> 2772</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a91283fc41fa9f913318befed94156e06">ast_rtp_instance_sendcng</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> level)</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;{</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#aad7ddc8882996620f023913474ed2ef7">sendcng</a>) {</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;      res = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#aad7ddc8882996620f023913474ed2ef7">sendcng</a>(instance, level);</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;      res = -1;</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;   }</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;}</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;</div><div class="line"><a name="l02786"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a68d817b226cf59582ded11a88a4c2753"> 2786</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a68d817b226cf59582ded11a88a4c2753">rtp_ice_wrap_set_authentication</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">const</span> <span class="keywordtype">char</span> *ufrag, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>)</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;{</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ac893b0c6eaa1db883bb28dada51a9f8f">ice</a>-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a5d941ba857d4b650b574bb71c10633e3">set_authentication</a>(instance, ufrag, password);</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;}</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;</div><div class="line"><a name="l02793"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a2f2313188a4ac6b917040f2589723c95"> 2793</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a2f2313188a4ac6b917040f2589723c95">rtp_ice_wrap_add_remote_candidate</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a> *candidate)</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;{</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ac893b0c6eaa1db883bb28dada51a9f8f">ice</a>-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a90085feb745721b26596e6142738bc1e">add_remote_candidate</a>(instance, candidate);</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;}</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;</div><div class="line"><a name="l02800"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a42770fbfa361fd2b293397cdb436c508"> 2800</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a42770fbfa361fd2b293397cdb436c508">rtp_ice_wrap_start</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;{</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ac893b0c6eaa1db883bb28dada51a9f8f">ice</a>-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a615d95dd4609b2cfa36d6de12c548d7f">start</a>(instance);</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;}</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;</div><div class="line"><a name="l02807"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a2e124ac4d0f75405353087b1067594a1"> 2807</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a2e124ac4d0f75405353087b1067594a1">rtp_ice_wrap_stop</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;{</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ac893b0c6eaa1db883bb28dada51a9f8f">ice</a>-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a3a02b2ea9f0ccfd0d46e4547f3b8fa30">stop</a>(instance);</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;}</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;</div><div class="line"><a name="l02814"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a5628e2f9c84877e23e8ef7da744567be"> 2814</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a5628e2f9c84877e23e8ef7da744567be">rtp_ice_wrap_get_ufrag</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;{</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ufrag;</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;   ufrag = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ac893b0c6eaa1db883bb28dada51a9f8f">ice</a>-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a689bd82c4ef41ba9dd5ef55bf3039ed9">get_ufrag</a>(instance);</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;   <span class="keywordflow">return</span> ufrag;</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;}</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;</div><div class="line"><a name="l02824"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a4af76bf8343e7b7e286ca092fbd814cc"> 2824</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a4af76bf8343e7b7e286ca092fbd814cc">rtp_ice_wrap_get_password</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;{</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>;</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;   password = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ac893b0c6eaa1db883bb28dada51a9f8f">ice</a>-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a4a374edd699692e9e9467962c0dab680">get_password</a>(instance);</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>;</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;}</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;</div><div class="line"><a name="l02834"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a8a2de2643d83af810ca5781ec1840003"> 2834</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a8a2de2643d83af810ca5781ec1840003">rtp_ice_wrap_get_local_candidates</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;{</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *local_candidates;</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;   local_candidates = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ac893b0c6eaa1db883bb28dada51a9f8f">ice</a>-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a2a6d7aa36b2926258868ecd1971e1123">get_local_candidates</a>(instance);</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;   <span class="keywordflow">return</span> local_candidates;</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;}</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;</div><div class="line"><a name="l02844"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a3bd9bbc5899ee94231766743b3c4ae29"> 2844</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a3bd9bbc5899ee94231766743b3c4ae29">rtp_ice_wrap_ice_lite</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;{</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ac893b0c6eaa1db883bb28dada51a9f8f">ice</a>-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a182bf62ba81b9aa1ef9b30468b54e8fb">ice_lite</a>(instance);</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;}</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;</div><div class="line"><a name="l02851"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a3fec7bdf564d43850ae605139032f892"> 2851</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a3fec7bdf564d43850ae605139032f892">rtp_ice_wrap_set_role</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fb">ast_rtp_ice_role</a> role)</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;{</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ac893b0c6eaa1db883bb28dada51a9f8f">ice</a>-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#af58e44433a3cc62c2051f3aa29415295">set_role</a>(instance, role);</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;}</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;</div><div class="line"><a name="l02859"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a13410845c195aa1581b6ec6afd0526df"> 2859</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a13410845c195aa1581b6ec6afd0526df">rtp_ice_wrap_turn_request</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78">ast_rtp_ice_component_type</a> component, <span class="keyword">enum</span> <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3">ast_transport</a> transport,</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *server, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> port, <span class="keyword">const</span> <span class="keywordtype">char</span> *username, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>)</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;{</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ac893b0c6eaa1db883bb28dada51a9f8f">ice</a>-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a7ee8b2d2fb5919d30d35d1339010f641">turn_request</a>(instance, component, transport, server, port,</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;      username, password);</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;}</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;</div><div class="line"><a name="l02869"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a5e1a8da7b40642861f636a3e2664fa71"> 2869</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5e1a8da7b40642861f636a3e2664fa71">rtp_ice_wrap_change_components</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;   <span class="keywordtype">int</span> num_components)</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;{</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ac893b0c6eaa1db883bb28dada51a9f8f">ice</a>-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a5c8a10cb1bfc8b9fc882eac1cb03adb9">change_components</a>(instance, num_components);</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;}</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;</div><div class="line"><a name="l02877"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a1e3114fe121ef4be68e383f0dd6d21cd"> 2877</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a1e3114fe121ef4be68e383f0dd6d21cd">rtp_ice_wrappers</a> = {</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;   .<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a5d941ba857d4b650b574bb71c10633e3">set_authentication</a> = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a68d817b226cf59582ded11a88a4c2753">rtp_ice_wrap_set_authentication</a>,</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;   .add_remote_candidate = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a2f2313188a4ac6b917040f2589723c95">rtp_ice_wrap_add_remote_candidate</a>,</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;   .start = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a42770fbfa361fd2b293397cdb436c508">rtp_ice_wrap_start</a>,</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;   .stop = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a2e124ac4d0f75405353087b1067594a1">rtp_ice_wrap_stop</a>,</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;   .get_ufrag = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5628e2f9c84877e23e8ef7da744567be">rtp_ice_wrap_get_ufrag</a>,</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;   .get_password = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a4af76bf8343e7b7e286ca092fbd814cc">rtp_ice_wrap_get_password</a>,</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;   .get_local_candidates = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a8a2de2643d83af810ca5781ec1840003">rtp_ice_wrap_get_local_candidates</a>,</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;   .ice_lite = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a3bd9bbc5899ee94231766743b3c4ae29">rtp_ice_wrap_ice_lite</a>,</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;   .set_role = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a3fec7bdf564d43850ae605139032f892">rtp_ice_wrap_set_role</a>,</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;   .turn_request = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a13410845c195aa1581b6ec6afd0526df">rtp_ice_wrap_turn_request</a>,</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;   .change_components = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5e1a8da7b40642861f636a3e2664fa71">rtp_ice_wrap_change_components</a>,</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;};</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;</div><div class="line"><a name="l02891"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a26e4699e53a894379aef105cdc12498e"> 2891</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a26e4699e53a894379aef105cdc12498e">ast_rtp_instance_get_ice</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;{</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ac893b0c6eaa1db883bb28dada51a9f8f">ice</a>) {</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../da/dbe/rtp__engine_8c.html#a1e3114fe121ef4be68e383f0dd6d21cd">rtp_ice_wrappers</a>;</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;   }</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;   <span class="comment">/* ICE not available */</span></div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;}</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l02901"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a368880aa0afe3ee532508eff1ba26882"> 2901</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;{</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;   <span class="keywordflow">return</span> instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a5b1915b54f90c3a385c106f88019ca71">test</a>;</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;}</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;</div><div class="line"><a name="l02907"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ae206fac1b9f2678cdab6e439db07db71"> 2907</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ae206fac1b9f2678cdab6e439db07db71">rtp_dtls_wrap_set_configuration</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html">ast_rtp_dtls_cfg</a> *dtls_cfg)</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;{</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;   <span class="keywordtype">int</span> set_configuration;</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;   set_configuration = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#accba1c88c182c7b7dcb117b1b8768de2">dtls</a>-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#a0bfcc94658a3213a7e7295e87b72618a">set_configuration</a>(instance, dtls_cfg);</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;   <span class="keywordflow">return</span> set_configuration;</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;}</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;</div><div class="line"><a name="l02918"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a6a8f09db111d67acd12a3db783b71e85"> 2918</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a6a8f09db111d67acd12a3db783b71e85">rtp_dtls_wrap_active</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;{</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;   <span class="keywordtype">int</span> active;</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;   active = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#accba1c88c182c7b7dcb117b1b8768de2">dtls</a>-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#a19836f7d104212817c8d14ecf74add44">active</a>(instance);</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;   <span class="keywordflow">return</span> active;</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;}</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;</div><div class="line"><a name="l02928"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a62db59fc4bbbc0dc2d2db79a25c784d9"> 2928</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a62db59fc4bbbc0dc2d2db79a25c784d9">rtp_dtls_wrap_stop</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;{</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#accba1c88c182c7b7dcb117b1b8768de2">dtls</a>-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#a3a02b2ea9f0ccfd0d46e4547f3b8fa30">stop</a>(instance);</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;}</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;</div><div class="line"><a name="l02935"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a70f89f44b68f2e3a34c2acf3cde93a95"> 2935</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a70f89f44b68f2e3a34c2acf3cde93a95">rtp_dtls_wrap_reset</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;{</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#accba1c88c182c7b7dcb117b1b8768de2">dtls</a>-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#a5fdb99ab3638c0edd7f6cb268f4c4598">reset</a>(instance);</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;}</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;</div><div class="line"><a name="l02942"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a0c77f37b19c6629477ed0ce38296365a"> 2942</a></span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9626fb58facd7ece2578af893daf998f">ast_rtp_dtls_connection</a> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a0c77f37b19c6629477ed0ce38296365a">rtp_dtls_wrap_get_connection</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;{</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9626fb58facd7ece2578af893daf998f">ast_rtp_dtls_connection</a> get_connection;</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;   get_connection = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#accba1c88c182c7b7dcb117b1b8768de2">dtls</a>-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#afb4676cce2045d03ebb5d2fb1cc71a54">get_connection</a>(instance);</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;   <span class="keywordflow">return</span> get_connection;</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;}</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;</div><div class="line"><a name="l02952"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a5dfbf8015bcb4758806ff3e946dbd767"> 2952</a></span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4">ast_rtp_dtls_setup</a> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5dfbf8015bcb4758806ff3e946dbd767">rtp_dtls_wrap_get_setup</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;{</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4">ast_rtp_dtls_setup</a> get_setup;</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;   get_setup = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#accba1c88c182c7b7dcb117b1b8768de2">dtls</a>-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#a2a5215b1fcb01ef1069f91d9f42778b8">get_setup</a>(instance);</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;   <span class="keywordflow">return</span> get_setup;</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;}</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;</div><div class="line"><a name="l02962"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a6d0f93bb52716a7f972f80391ef7bf96"> 2962</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a6d0f93bb52716a7f972f80391ef7bf96">rtp_dtls_wrap_set_setup</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4">ast_rtp_dtls_setup</a> setup)</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;{</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#accba1c88c182c7b7dcb117b1b8768de2">dtls</a>-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#afd17d491c79ff44d0a69a2df395d8869">set_setup</a>(instance, setup);</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;}</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;</div><div class="line"><a name="l02970"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a5e502ec5d4e1d3856c7d6f1a16388418"> 2970</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5e502ec5d4e1d3856c7d6f1a16388418">rtp_dtls_wrap_set_fingerprint</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance,</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6b">ast_rtp_dtls_hash</a> hash, <span class="keyword">const</span> <span class="keywordtype">char</span> *fingerprint)</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;{</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;   instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#accba1c88c182c7b7dcb117b1b8768de2">dtls</a>-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#ae5103bd2c18ffc657bebc3ac9f1d6a90">set_fingerprint</a>(instance, hash, fingerprint);</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;}</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;</div><div class="line"><a name="l02978"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ab7623ee9480eaf77b953b8d327eb9bc6"> 2978</a></span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6b">ast_rtp_dtls_hash</a> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab7623ee9480eaf77b953b8d327eb9bc6">rtp_dtls_wrap_get_fingerprint_hash</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;{</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6b">ast_rtp_dtls_hash</a> get_fingerprint_hash;</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;   get_fingerprint_hash = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#accba1c88c182c7b7dcb117b1b8768de2">dtls</a>-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#a507f0958e1bb4b847a4b9384e296c912">get_fingerprint_hash</a>(instance);</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;   <span class="keywordflow">return</span> get_fingerprint_hash;</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;}</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;</div><div class="line"><a name="l02988"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ada0c634309987937570c4015e8228cb0"> 2988</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#ada0c634309987937570c4015e8228cb0">rtp_dtls_wrap_get_fingerprint</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;{</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *get_fingerprint;</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;   get_fingerprint = instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#accba1c88c182c7b7dcb117b1b8768de2">dtls</a>-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#a59c186dfc495dd5f0b16f8df944a0a3b">get_fingerprint</a>(instance);</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;   <span class="keywordflow">return</span> get_fingerprint;</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;}</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;</div><div class="line"><a name="l02998"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a8dd95cac01521e8f57c36a24930fc025"> 2998</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html">ast_rtp_engine_dtls</a> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a8dd95cac01521e8f57c36a24930fc025">rtp_dtls_wrappers</a> = {</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;   .<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#a0bfcc94658a3213a7e7295e87b72618a">set_configuration</a> = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ae206fac1b9f2678cdab6e439db07db71">rtp_dtls_wrap_set_configuration</a>,</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;   .active = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a6a8f09db111d67acd12a3db783b71e85">rtp_dtls_wrap_active</a>,</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;   .stop = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a62db59fc4bbbc0dc2d2db79a25c784d9">rtp_dtls_wrap_stop</a>,</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;   .reset = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a70f89f44b68f2e3a34c2acf3cde93a95">rtp_dtls_wrap_reset</a>,</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;   .get_connection = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a0c77f37b19c6629477ed0ce38296365a">rtp_dtls_wrap_get_connection</a>,</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;   .get_setup = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5dfbf8015bcb4758806ff3e946dbd767">rtp_dtls_wrap_get_setup</a>,</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;   .set_setup = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a6d0f93bb52716a7f972f80391ef7bf96">rtp_dtls_wrap_set_setup</a>,</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;   .set_fingerprint = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5e502ec5d4e1d3856c7d6f1a16388418">rtp_dtls_wrap_set_fingerprint</a>,</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;   .get_fingerprint_hash = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab7623ee9480eaf77b953b8d327eb9bc6">rtp_dtls_wrap_get_fingerprint_hash</a>,</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;   .get_fingerprint = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ada0c634309987937570c4015e8228cb0">rtp_dtls_wrap_get_fingerprint</a>,</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;};</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;</div><div class="line"><a name="l03011"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#abdcd28daa60406785f9f34af59a9951e"> 3011</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html">ast_rtp_engine_dtls</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#abdcd28daa60406785f9f34af59a9951e">ast_rtp_instance_get_dtls</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;{</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;   <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#accba1c88c182c7b7dcb117b1b8768de2">dtls</a>) {</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../da/dbe/rtp__engine_8c.html#a8dd95cac01521e8f57c36a24930fc025">rtp_dtls_wrappers</a>;</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;   }</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;   <span class="comment">/* DTLS not available */</span></div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;}</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;</div><div class="line"><a name="l03020"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#aa4a007f1e87a4af7c5edf93d11738e06"> 3020</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#aa4a007f1e87a4af7c5edf93d11738e06">ast_rtp_dtls_cfg_parse</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html">ast_rtp_dtls_cfg</a> *dtls_cfg, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>)</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;{</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(name, <span class="stringliteral">&quot;dtlsenable&quot;</span>)) {</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;      dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a63be54a0beac1f5717217e1d9e629c71">enabled</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(value) ? 1 : 0;</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(name, <span class="stringliteral">&quot;dtlsverify&quot;</span>)) {</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(value, <span class="stringliteral">&quot;yes&quot;</span>)) {</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;         dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a1554c0cf3ee13f4628dc8725897de877">verify</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4e13c63955f3824b62d1d11a1f6b56f4a8124b25aa9a78a69d2d61b57c212baa3">AST_RTP_DTLS_VERIFY_FINGERPRINT</a> | <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4e13c63955f3824b62d1d11a1f6b56f4aec5333d6a6da67cd5117484b74e32764">AST_RTP_DTLS_VERIFY_CERTIFICATE</a>;</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(value, <span class="stringliteral">&quot;fingerprint&quot;</span>)) {</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;         dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a1554c0cf3ee13f4628dc8725897de877">verify</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4e13c63955f3824b62d1d11a1f6b56f4a8124b25aa9a78a69d2d61b57c212baa3">AST_RTP_DTLS_VERIFY_FINGERPRINT</a>;</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(value, <span class="stringliteral">&quot;certificate&quot;</span>)) {</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;         dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a1554c0cf3ee13f4628dc8725897de877">verify</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4e13c63955f3824b62d1d11a1f6b56f4aec5333d6a6da67cd5117484b74e32764">AST_RTP_DTLS_VERIFY_CERTIFICATE</a>;</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(value, <span class="stringliteral">&quot;no&quot;</span>)) {</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;         dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a1554c0cf3ee13f4628dc8725897de877">verify</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4e13c63955f3824b62d1d11a1f6b56f4a06e3f71fe447754972e5bd7376a88eac">AST_RTP_DTLS_VERIFY_NONE</a>;</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;      }</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(name, <span class="stringliteral">&quot;dtlsrekey&quot;</span>)) {</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;      <span class="keywordflow">if</span> (sscanf(value, <span class="stringliteral">&quot;%30u&quot;</span>, &amp;dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a173bd4ad2c830cbaa689bc4fb759ff0c">rekey</a>) != 1) {</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;      }</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(name, <span class="stringliteral">&quot;dtlsautogeneratecert&quot;</span>)) {</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;      dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a82439f35f3dc722e1229ddb5cf0af0b3">ephemeral_cert</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(value) ? 1 : 0;</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(name, <span class="stringliteral">&quot;dtlscertfile&quot;</span>)) {</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(value) &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a34ed7a76195d923c099606f796294a3b">ast_file_is_readable</a>(value)) {</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s file %s does not exist or is not readable\n&quot;</span>, name, value);</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;      }</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a333dffcec025fcdbee0676476f401685">certfile</a>);</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;      dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a333dffcec025fcdbee0676476f401685">certfile</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(value);</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(name, <span class="stringliteral">&quot;dtlsprivatekey&quot;</span>)) {</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(value) &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a34ed7a76195d923c099606f796294a3b">ast_file_is_readable</a>(value)) {</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s file %s does not exist or is not readable\n&quot;</span>, name, value);</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;      }</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a6005f11af6a60f4169876fcd075595ca">pvtfile</a>);</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;      dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a6005f11af6a60f4169876fcd075595ca">pvtfile</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(value);</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(name, <span class="stringliteral">&quot;dtlscipher&quot;</span>)) {</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a3d12e13733aa5172b5cb091fbf8ea478">cipher</a>);</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;      dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a3d12e13733aa5172b5cb091fbf8ea478">cipher</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(value);</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(name, <span class="stringliteral">&quot;dtlscafile&quot;</span>)) {</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(value) &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a34ed7a76195d923c099606f796294a3b">ast_file_is_readable</a>(value)) {</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s file %s does not exist or is not readable\n&quot;</span>, name, value);</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;      }</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a9ff8d56644bac1d41f8039f2fde5acf2">cafile</a>);</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;      dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a9ff8d56644bac1d41f8039f2fde5acf2">cafile</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(value);</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(name, <span class="stringliteral">&quot;dtlscapath&quot;</span>) || !strcasecmp(name, <span class="stringliteral">&quot;dtlscadir&quot;</span>)) {</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(value) &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a34ed7a76195d923c099606f796294a3b">ast_file_is_readable</a>(value)) {</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s file %s does not exist or is not readable\n&quot;</span>, name, value);</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;      }</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a8331a8443119478cd6b1daeb707a94dc">capath</a>);</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;      dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a8331a8443119478cd6b1daeb707a94dc">capath</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(value);</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(name, <span class="stringliteral">&quot;dtlssetup&quot;</span>)) {</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(value, <span class="stringliteral">&quot;active&quot;</span>)) {</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;         dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a075239f44062ff847b685bc030c60258">default_setup</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4ad01759e580ed1c40971709048d40e6f4">AST_RTP_DTLS_SETUP_ACTIVE</a>;</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(value, <span class="stringliteral">&quot;passive&quot;</span>)) {</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;         dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a075239f44062ff847b685bc030c60258">default_setup</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a14e80b1c389413cadf12354d06121ab2">AST_RTP_DTLS_SETUP_PASSIVE</a>;</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(value, <span class="stringliteral">&quot;actpass&quot;</span>)) {</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;         dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a075239f44062ff847b685bc030c60258">default_setup</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a666bf79c451f17b96da27e2fc2c2827c">AST_RTP_DTLS_SETUP_ACTPASS</a>;</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;      }</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(name, <span class="stringliteral">&quot;dtlsfingerprint&quot;</span>)) {</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(value, <span class="stringliteral">&quot;sha-256&quot;</span>)) {</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;         dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a32990be2947ceb7f92525d570f497706">hash</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6ba886ad8bf6124c2be38ee1b4268951d86">AST_RTP_DTLS_HASH_SHA256</a>;</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(value, <span class="stringliteral">&quot;sha-1&quot;</span>)) {</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;         dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a32990be2947ceb7f92525d570f497706">hash</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6ba23d971ca86d4499d5bd2b83195ff7fd6">AST_RTP_DTLS_HASH_SHA1</a>;</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;      }</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;   }</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;}</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;</div><div class="line"><a name="l03094"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ad3d775f5165f2f79207f111a03250a2f"> 3094</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ad3d775f5165f2f79207f111a03250a2f">ast_rtp_dtls_cfg_validate</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html">ast_rtp_dtls_cfg</a> *dtls_cfg)</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;{</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;   <span class="keywordflow">if</span> (dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a82439f35f3dc722e1229ddb5cf0af0b3">ephemeral_cert</a>) {</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a333dffcec025fcdbee0676476f401685">certfile</a>)) {</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;You cannot request automatically generated certificates&quot;</span></div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;            <span class="stringliteral">&quot; (dtls_auto_generate_cert) and also specify a certificate file&quot;</span></div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;            <span class="stringliteral">&quot; (dtls_cert_file) at the same time\n&quot;</span>);</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a6005f11af6a60f4169876fcd075595ca">pvtfile</a>)</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;              || !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a9ff8d56644bac1d41f8039f2fde5acf2">cafile</a>)</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;              || !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a8331a8443119478cd6b1daeb707a94dc">capath</a>)) {</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;dtls_pvt_file, dtls_cafile, and dtls_ca_path are&quot;</span></div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;            <span class="stringliteral">&quot; ignored when dtls_auto_generate_cert is enabled\n&quot;</span>);</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;      }</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;   }</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;}</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;</div><div class="line"><a name="l03113"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#abb22fd2a7290821ed320b3e60d075f21"> 3113</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#abb22fd2a7290821ed320b3e60d075f21">ast_rtp_dtls_cfg_copy</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html">ast_rtp_dtls_cfg</a> *src_cfg, <span class="keyword">struct</span> <a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html">ast_rtp_dtls_cfg</a> *dst_cfg)</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;{</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a3ad3e690e524b5871f9b99d12098799f">ast_rtp_dtls_cfg_free</a>(dst_cfg);         <span class="comment">/* Prevent a double-call leaking memory via ast_strdup */</span></div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;   dst_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a63be54a0beac1f5717217e1d9e629c71">enabled</a> = src_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a63be54a0beac1f5717217e1d9e629c71">enabled</a>;</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;   dst_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a1554c0cf3ee13f4628dc8725897de877">verify</a> = src_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a1554c0cf3ee13f4628dc8725897de877">verify</a>;</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;   dst_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a173bd4ad2c830cbaa689bc4fb759ff0c">rekey</a> = src_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a173bd4ad2c830cbaa689bc4fb759ff0c">rekey</a>;</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;   dst_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#abeb4b6b327b56a622037c2fae63adeab">suite</a> = src_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#abeb4b6b327b56a622037c2fae63adeab">suite</a>;</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;   dst_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a32990be2947ceb7f92525d570f497706">hash</a> = src_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a32990be2947ceb7f92525d570f497706">hash</a>;</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;   dst_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a82439f35f3dc722e1229ddb5cf0af0b3">ephemeral_cert</a> = src_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a82439f35f3dc722e1229ddb5cf0af0b3">ephemeral_cert</a>;</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;   dst_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a333dffcec025fcdbee0676476f401685">certfile</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a333dffcec025fcdbee0676476f401685">certfile</a>);</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;   dst_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a6005f11af6a60f4169876fcd075595ca">pvtfile</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a6005f11af6a60f4169876fcd075595ca">pvtfile</a>);</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;   dst_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a3d12e13733aa5172b5cb091fbf8ea478">cipher</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a3d12e13733aa5172b5cb091fbf8ea478">cipher</a>);</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;   dst_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a9ff8d56644bac1d41f8039f2fde5acf2">cafile</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a9ff8d56644bac1d41f8039f2fde5acf2">cafile</a>);</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;   dst_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a8331a8443119478cd6b1daeb707a94dc">capath</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a8331a8443119478cd6b1daeb707a94dc">capath</a>);</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;   dst_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a075239f44062ff847b685bc030c60258">default_setup</a> = src_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a075239f44062ff847b685bc030c60258">default_setup</a>;</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;}</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;</div><div class="line"><a name="l03131"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a3ad3e690e524b5871f9b99d12098799f"> 3131</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a3ad3e690e524b5871f9b99d12098799f">ast_rtp_dtls_cfg_free</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html">ast_rtp_dtls_cfg</a> *dtls_cfg)</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;{</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a333dffcec025fcdbee0676476f401685">certfile</a>);</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;   dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a333dffcec025fcdbee0676476f401685">certfile</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a6005f11af6a60f4169876fcd075595ca">pvtfile</a>);</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;   dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a6005f11af6a60f4169876fcd075595ca">pvtfile</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a3d12e13733aa5172b5cb091fbf8ea478">cipher</a>);</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;   dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a3d12e13733aa5172b5cb091fbf8ea478">cipher</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a9ff8d56644bac1d41f8039f2fde5acf2">cafile</a>);</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;   dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a9ff8d56644bac1d41f8039f2fde5acf2">cafile</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a8331a8443119478cd6b1daeb707a94dc">capath</a>);</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;   dtls_cfg-&gt;<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a8331a8443119478cd6b1daeb707a94dc">capath</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;}</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;<span class="comment">/*! \internal</span></div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;<span class="comment"> * \brief Small helper routine that cleans up entry i in</span></div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;<span class="comment"> * \c ast_rtp_mime_types.</span></div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03149"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a93f8936a4d9cc6a544de8bba9ed60c97"> 3149</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a93f8936a4d9cc6a544de8bba9ed60c97">rtp_engine_mime_type_cleanup</a>(<span class="keywordtype">int</span> i)</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;{</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[i].payload_type.format);</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;   memset(&amp;<a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[i], 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d0d/structast__rtp__mime__type.html">ast_rtp_mime_type</a>));</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;}</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;</div><div class="line"><a name="l03155"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9"> 3155</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, <span class="keywordtype">int</span> rtp_code, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *subtype, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sample_rate)</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;{</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;mime_types_lock);</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;   x = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a80375839a4de919dd2024ee65251ad0d">mime_types_len</a>;</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>) &lt;= x) {</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;mime_types_lock);</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;   }</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;   <span class="comment">/* Make sure any previous value in ast_rtp_mime_types is cleaned up */</span></div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;   memset(&amp;<a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[x], 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d0d/structast__rtp__mime__type.html">ast_rtp_mime_type</a>));</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;   <span class="keywordflow">if</span> (format) {</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;      <a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[x].<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#ac9b3af8d8bb662272a6684754f6e9622">payload_type</a>.<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">asterisk_format</a> = 1;</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;      <a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[x].<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#ac9b3af8d8bb662272a6684754f6e9622">payload_type</a>.<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(format);</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;      <a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[x].<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#ac9b3af8d8bb662272a6684754f6e9622">payload_type</a>.<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">rtp_code</a> = rtp_code;</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;   }</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[x].type, type, <span class="keyword">sizeof</span>(<a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[x].type));</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[x].subtype, subtype, <span class="keyword">sizeof</span>(<a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[x].subtype));</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[x].<a class="code" href="../../d8/d0d/structast__rtp__mime__type.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a> = sample_rate;</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a80375839a4de919dd2024ee65251ad0d">mime_types_len</a>++;</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;mime_types_lock);</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;}</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;</div><div class="line"><a name="l03183"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f"> 3183</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(<span class="keywordtype">int</span> payload, <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, <span class="keywordtype">int</span> rtp_code)</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;{</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;<span class="comment">    * ARRAY_LEN&#39;s result is cast to an int so &#39;map&#39; is not autocast to a size_t,</span></div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;<span class="comment">    * which if negative would cause an assertion.</span></div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(payload &lt; (<span class="keywordtype">int</span>)<a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(static_RTP_PT));</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd6/group__main__options.html#ga2834e29d260312cf03f1e463a112631b">ast_option_rtpusedynamic</a> &amp;&amp; payload &lt; 0) {</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;<span class="comment">       * We&#39;re going to build dynamic payloads dynamically. An RTP code is</span></div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;<span class="comment">       * required otherwise one will be dynamically allocated per instance.</span></div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;   }</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;<span class="comment">    * Either the given payload is truly a static type, or Asterisk is</span></div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;<span class="comment">    * globally storing the dynamic payloads in the static_RTP_PT object.</span></div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;   <span class="keywordflow">if</span> (payload &lt; 0) {</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;<span class="comment">       * This is a dynamic payload that will be stored globally,</span></div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;<span class="comment">       * so find the next available empty slot.</span></div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;      payload = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ae1e679c32bea7207cd56f3b5bb0ed20d">find_unused_payload</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;      <span class="keywordflow">if</span> (payload &lt; 0) {</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No dynamic RTP payload type values available &quot;</span></div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;            <span class="stringliteral">&quot;for %s - %d!\n&quot;</span>, format ? <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(format) : <span class="stringliteral">&quot;&quot;</span>, rtp_code);</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;      }</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;   }</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;   type = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a6401bb61dcc6b76101f99f0127b28a5c">rtp_payload_type_alloc</a>(format, payload, rtp_code, 1);</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;   <span class="keywordflow">if</span> (type) {</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(static_RTP_PT[payload]);</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;      static_RTP_PT[<a class="code" href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">payload</a>] = <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;   }</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;}</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;</div><div class="line"><a name="l03229"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ae220d79c908ae7f462a6fb57365afc89"> 3229</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ae220d79c908ae7f462a6fb57365afc89">ast_rtp_engine_load_format</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>)</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;{</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;   <span class="keywordtype">char</span> *codec_name = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d0/d0a/format_8h.html#ad6d7ad5ecec9ae8635d1a1c2de0505bd">ast_format_get_codec_name</a>(format));</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;   codec_name = <a class="code" href="../../d6/d90/strings_8h.html#ae07f46b125b1fc1520b076ff8b8c4ad8">ast_str_to_upper</a>(codec_name);</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(format,</div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;      0,</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;      <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(format)),</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;      codec_name,</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;      <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(format));</div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(-1, format, 0);</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;}</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;</div><div class="line"><a name="l03245"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#aaae1b48769d1b65fdf03ba4d6b86bb78"> 3245</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#aaae1b48769d1b65fdf03ba4d6b86bb78">ast_rtp_engine_unload_format</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>)</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;{</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;   <span class="keywordtype">int</span> y = 0;</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;   <span class="comment">/* remove everything pertaining to this format id from the lists */</span></div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a>; x++) {</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;      <span class="keywordflow">if</span> (static_RTP_PT[x]</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;         &amp;&amp; <a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(static_RTP_PT[x]-&gt;format, format) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(static_RTP_PT[x], -1);</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;         static_RTP_PT[x] = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;      }</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;   }</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;mime_types_lock);</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;   <span class="comment">/* rebuild the list skipping the items matching this id */</span></div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../da/dbe/rtp__engine_8c.html#a80375839a4de919dd2024ee65251ad0d">mime_types_len</a>; x++) {</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(<a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[x].payload_type.format, format) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;         <a class="code" href="../../da/dbe/rtp__engine_8c.html#a93f8936a4d9cc6a544de8bba9ed60c97">rtp_engine_mime_type_cleanup</a>(x);</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;      }</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;      <span class="keywordflow">if</span> (x != y) {</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;         <a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[y] = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[x];</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;      }</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;      y++;</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;   }</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;   mime_types_len = y;</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;mime_types_lock);</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;}</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;<span class="comment"> * \brief \ref stasis message payload for RTCP messages</span></div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03282"></a><span class="lineno"><a class="line" href="../../d4/de4/structrtcp__message__payload.html"> 3282</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/de4/structrtcp__message__payload.html">rtcp_message_payload</a> {</div><div class="line"><a name="l03283"></a><span class="lineno"><a class="line" href="../../d4/de4/structrtcp__message__payload.html#a36584c0251e54a7af4892d63f7a28c77"> 3283</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>;  <span class="comment">/*&lt; The channel snapshot, if available */</span></div><div class="line"><a name="l03284"></a><span class="lineno"><a class="line" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721"> 3284</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>;     <span class="comment">/*&lt; The RTCP report */</span></div><div class="line"><a name="l03285"></a><span class="lineno"><a class="line" href="../../d4/de4/structrtcp__message__payload.html#ad2b8e22df32b99651f727cd9a8dcb9f3"> 3285</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *<a class="code" href="../../d4/de4/structrtcp__message__payload.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>;                  <span class="comment">/*&lt; Extra JSON data to publish */</span></div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;};</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;</div><div class="line"><a name="l03288"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a3b0f72469b7dba2f2c7b83b1c7fce4a7"> 3288</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a3b0f72469b7dba2f2c7b83b1c7fce4a7">rtcp_message_payload_dtor</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;{</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/de4/structrtcp__message__payload.html">rtcp_message_payload</a> *payload = obj;</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>);</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>);</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>);</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;}</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;</div><div class="line"><a name="l03297"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ac3c5f764f4d55ef737a57f7e924a1ce6"> 3297</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#ac3c5f764f4d55ef737a57f7e924a1ce6">rtcp_report_to_ami</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg)</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;{</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/de4/structrtcp__message__payload.html">rtcp_message_payload</a> *payload = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, channel_string, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, packet_string, <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(512), <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ssrc = payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>;</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> = payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a4bfea42429249a1f65204f0c0f34704a">type</a>;</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> report_count = payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a59687b6ec866bfca8d8c1d6ab1bef7ad">reception_report_count</a>;</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;   <span class="keywordflow">if</span> (!packet_string) {</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;   }</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;   <span class="keywordflow">if</span> (payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;      channel_string = <a class="code" href="../../db/d45/manager_8h.html#a777cde87d12b331902f862ec44641688">ast_manager_build_channel_state_string</a>(payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>);</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;      <span class="keywordflow">if</span> (!channel_string) {</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;      }</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;   }</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;   <span class="keywordflow">if</span> (payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>) {</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;      <span class="comment">/* Optional data */</span></div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *to = <a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>, <span class="stringliteral">&quot;to&quot;</span>);</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *from = <a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>, <span class="stringliteral">&quot;from&quot;</span>);</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *rtt = <a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>, <span class="stringliteral">&quot;rtt&quot;</span>);</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;      <span class="keywordflow">if</span> (to) {</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;packet_string, 0, <span class="stringliteral">&quot;To: %s\r\n&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a>(to));</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;      }</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;      <span class="keywordflow">if</span> (from) {</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;packet_string, 0, <span class="stringliteral">&quot;From: %s\r\n&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a>(from));</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;      }</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;      <span class="keywordflow">if</span> (rtt) {</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;packet_string, 0, <span class="stringliteral">&quot;RTT: %4.4f\r\n&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#afe370c61fc9aae489b7d4c8c9f6968d8">ast_json_real_get</a>(rtt));</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;      }</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;   }</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;packet_string, 0, <span class="stringliteral">&quot;SSRC: 0x%.8x\r\n&quot;</span>, ssrc);</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;packet_string, 0, <span class="stringliteral">&quot;PT: %u(%s)\r\n&quot;</span>, type, type== <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3fa0ae6b0bf0bc054292890cfa0499e8">AST_RTP_RTCP_SR</a> ? <span class="stringliteral">&quot;SR&quot;</span> : <span class="stringliteral">&quot;RR&quot;</span>);</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;packet_string, 0, <span class="stringliteral">&quot;ReportCount: %u\r\n&quot;</span>, report_count);</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;   <span class="keywordflow">if</span> (type == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3fa0ae6b0bf0bc054292890cfa0499e8">AST_RTP_RTCP_SR</a>) {</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;packet_string, 0, <span class="stringliteral">&quot;SentNTP: %lu.%06lu\r\n&quot;</span>,</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;         (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a69751ecaf659f4f16438fae21fd57d14">ntp_timestamp</a>.tv_sec,</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;         (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a69751ecaf659f4f16438fae21fd57d14">ntp_timestamp</a>.tv_usec);</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;packet_string, 0, <span class="stringliteral">&quot;SentRTP: %u\r\n&quot;</span>,</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;            payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a5afa69ff9e5e7692c4db609cb4884c53">rtp_timestamp</a>);</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;packet_string, 0, <span class="stringliteral">&quot;SentPackets: %u\r\n&quot;</span>,</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;            payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#af0a068e62b23d45baeffebf5250afd21">packet_count</a>);</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;packet_string, 0, <span class="stringliteral">&quot;SentOctets: %u\r\n&quot;</span>,</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;            payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a8ef9a039e87881c3b009cd250f583a96">octet_count</a>);</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;   }</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; report_count; i++) {</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, report_string, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;      <span class="keywordflow">if</span> (!payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]) {</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;      }</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;      report_string = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(256);</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;      <span class="keywordflow">if</span> (!report_string) {</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;      }</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;report_string, 0, <span class="stringliteral">&quot;Report%dSourceSSRC: 0x%.8x\r\n&quot;</span>,</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;            i, payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a6f505be1e80abef8c8dc43dd435dee82">source_ssrc</a>);</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;report_string, 0, <span class="stringliteral">&quot;Report%dFractionLost: %d\r\n&quot;</span>,</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;            i, payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">lost_count</a>.<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a4783eb307c55bda4f55f933f8ebf9661">fraction</a>);</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;report_string, 0, <span class="stringliteral">&quot;Report%dCumulativeLost: %u\r\n&quot;</span>,</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;            i, payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">lost_count</a>.<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac0456a5c8a8a190b04a9eb241b9faf9a">packets</a>);</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;report_string, 0, <span class="stringliteral">&quot;Report%dHighestSequence: %u\r\n&quot;</span>,</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;            i, payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a0517365083db736945b1d8a8d5b14781">highest_seq_no</a> &amp; 0xffff);</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;report_string, 0, <span class="stringliteral">&quot;Report%dSequenceNumberCycles: %u\r\n&quot;</span>,</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;            i, payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a0517365083db736945b1d8a8d5b14781">highest_seq_no</a> &gt;&gt; 16);</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;report_string, 0, <span class="stringliteral">&quot;Report%dIAJitter: %u\r\n&quot;</span>,</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;            i, payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a799d79c026de98946ba12101f2b32919">ia_jitter</a>);</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;report_string, 0, <span class="stringliteral">&quot;Report%dLSR: %u\r\n&quot;</span>,</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;            i, payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">lsr</a>);</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;report_string, 0, <span class="stringliteral">&quot;Report%dDLSR: %4.4f\r\n&quot;</span>,</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;            i, ((<span class="keywordtype">double</span>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">dlsr</a>) / 65536);</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;packet_string, 0, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(report_string));</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;   }</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a3ace32eaf9a3fc2f7d15121c64bf8ecd">ast_manager_event_blob_create</a>(<a class="code" href="../../db/d45/manager_8h.html#a0b1b4140c2836696a6950e92ab48a580">EVENT_FLAG_REPORTING</a>,</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(msg) == <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68594e604220e38eb6593972ef9a4da3">ast_rtp_rtcp_received_type</a>() ? <span class="stringliteral">&quot;RTCPReceived&quot;</span> : <span class="stringliteral">&quot;RTCPSent&quot;</span>,</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;      <span class="stringliteral">&quot;%s%s&quot;</span>,</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aec1b0a2c5fdd41672184aecbb7ee4e3c">AS_OR</a>(channel_string, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(packet_string));</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;}</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;</div><div class="line"><a name="l03387"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#af2249bb26050979217a8946885b57508"> 3387</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#af2249bb26050979217a8946885b57508">rtcp_report_to_json</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg,</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *sanitize)</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;{</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/de4/structrtcp__message__payload.html">rtcp_message_payload</a> *payload = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_rtcp_report = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_rtcp_report_blocks;</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_rtcp_sender_info = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_channel = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;   json_rtcp_report_blocks = <a class="code" href="../../d4/d05/json_8h.html#a48d874eed79fb2bbeb0557440e33ae67">ast_json_array_create</a>();</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;   <span class="keywordflow">if</span> (!json_rtcp_report_blocks) {</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;   }</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a59687b6ec866bfca8d8c1d6ab1bef7ad">reception_report_count</a> &amp;&amp; payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]; i++) {</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_report_block;</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;      <span class="keywordtype">char</span> str_lsr[32];</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;      snprintf(str_lsr, <span class="keyword">sizeof</span>(str_lsr), <span class="stringliteral">&quot;%u&quot;</span>, payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">lsr</a>);</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;      json_report_block = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: I, s: I, s: I, s: I, s: I, s: s, s: I}&quot;</span>,</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;         <span class="stringliteral">&quot;source_ssrc&quot;</span>, (<a class="code" href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a6f505be1e80abef8c8dc43dd435dee82">source_ssrc</a>,</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;         <span class="stringliteral">&quot;fraction_lost&quot;</span>, (<a class="code" href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">lost_count</a>.<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a4783eb307c55bda4f55f933f8ebf9661">fraction</a>,</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;         <span class="stringliteral">&quot;packets_lost&quot;</span>, (<a class="code" href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">lost_count</a>.<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#ac0456a5c8a8a190b04a9eb241b9faf9a">packets</a>,</div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;         <span class="stringliteral">&quot;highest_seq_no&quot;</span>, (<a class="code" href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a0517365083db736945b1d8a8d5b14781">highest_seq_no</a>,</div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;         <span class="stringliteral">&quot;ia_jitter&quot;</span>, (<a class="code" href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a799d79c026de98946ba12101f2b32919">ia_jitter</a>,</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;         <span class="stringliteral">&quot;lsr&quot;</span>, str_lsr,</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;         <span class="stringliteral">&quot;dlsr&quot;</span>, (<a class="code" href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]-&gt;<a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">dlsr</a>);</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;      <span class="keywordflow">if</span> (!json_report_block</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;         || <a class="code" href="../../d4/d05/json_8h.html#a3d675e52f866630a6a03302df2712b8d">ast_json_array_append</a>(json_rtcp_report_blocks, json_report_block)) {</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_rtcp_report_blocks);</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;      }</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;   }</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;   <span class="keywordflow">if</span> (payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a4bfea42429249a1f65204f0c0f34704a">type</a> == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3fa0ae6b0bf0bc054292890cfa0499e8">AST_RTP_RTCP_SR</a>) {</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;      <span class="keywordtype">char</span> sec[32];</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;      <span class="keywordtype">char</span> usec[32];</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;      snprintf(sec, <span class="keyword">sizeof</span>(sec), <span class="stringliteral">&quot;%lu&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a69751ecaf659f4f16438fae21fd57d14">ntp_timestamp</a>.tv_sec);</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;      snprintf(usec, <span class="keyword">sizeof</span>(usec), <span class="stringliteral">&quot;%lu&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a69751ecaf659f4f16438fae21fd57d14">ntp_timestamp</a>.tv_usec);</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;      json_rtcp_sender_info = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: s, s: I, s: I, s: I}&quot;</span>,</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;         <span class="stringliteral">&quot;ntp_timestamp_sec&quot;</span>, sec,</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;         <span class="stringliteral">&quot;ntp_timestamp_usec&quot;</span>, usec,</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;         <span class="stringliteral">&quot;rtp_timestamp&quot;</span>, (<a class="code" href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a5afa69ff9e5e7692c4db609cb4884c53">rtp_timestamp</a>,</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;         <span class="stringliteral">&quot;packets&quot;</span>, (<a class="code" href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#af0a068e62b23d45baeffebf5250afd21">packet_count</a>,</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;         <span class="stringliteral">&quot;octets&quot;</span>, (<a class="code" href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">sender_information</a>.<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a8ef9a039e87881c3b009cd250f583a96">octet_count</a>);</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;      <span class="keywordflow">if</span> (!json_rtcp_sender_info) {</div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_rtcp_report_blocks);</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;      }</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;   }</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;   json_rtcp_report = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: I, s: I, s: i, s: o, s: o}&quot;</span>,</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;      <span class="stringliteral">&quot;ssrc&quot;</span>, (<a class="code" href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a9e10385ac55d32d10ef322d1a08a699d">ssrc</a>,</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;      <span class="stringliteral">&quot;type&quot;</span>, (<a class="code" href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a>)payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a4bfea42429249a1f65204f0c0f34704a">type</a>,</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;      <span class="stringliteral">&quot;report_count&quot;</span>, payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">report</a>-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a59687b6ec866bfca8d8c1d6ab1bef7ad">reception_report_count</a>,</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;      <span class="stringliteral">&quot;sender_information&quot;</span>, json_rtcp_sender_info ?: <a class="code" href="../../d4/d05/json_8h.html#a8055cb3a9f4d7d5842826e6157ae00db">ast_json_null</a>(),</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;      <span class="stringliteral">&quot;report_blocks&quot;</span>, json_rtcp_report_blocks);</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;   <span class="keywordflow">if</span> (!json_rtcp_report) {</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;   }</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;   <span class="keywordflow">if</span> (payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;      json_channel = <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>, sanitize);</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;      <span class="keywordflow">if</span> (!json_channel) {</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_rtcp_report);</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;      }</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;   }</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: o?, s: o, s: O?}&quot;</span>,</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;      <span class="stringliteral">&quot;channel&quot;</span>, json_channel,</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;      <span class="stringliteral">&quot;rtcp_report&quot;</span>, json_rtcp_report,</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;      <span class="stringliteral">&quot;blob&quot;</span>, payload-&gt;<a class="code" href="../../d4/de4/structrtcp__message__payload.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>);</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;}</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;</div><div class="line"><a name="l03464"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a8ec033f1e295b12840594307870ba29f"> 3464</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a8ec033f1e295b12840594307870ba29f">rtp_rtcp_report_dtor</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;{</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *rtcp_report = obj;</div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a59687b6ec866bfca8d8c1d6ab1bef7ad">reception_report_count</a>; i++) {</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(rtcp_report-&gt;<a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">report_block</a>[i]);</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;   }</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;}</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;</div><div class="line"><a name="l03474"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a199d704f3867124fe0f56f4c8856a0b4"> 3474</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a199d704f3867124fe0f56f4c8856a0b4">ast_rtp_rtcp_report_alloc</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> report_blocks)</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;{</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *rtcp_report;</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;   <span class="comment">/* Size of object is sizeof the report + the number of report_blocks * sizeof pointer */</span></div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;   rtcp_report = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>((<span class="keyword">sizeof</span>(*rtcp_report) + report_blocks * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../db/d08/structast__rtp__rtcp__report__block.html">ast_rtp_rtcp_report_block</a> *)),</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;      <a class="code" href="../../da/dbe/rtp__engine_8c.html#a8ec033f1e295b12840594307870ba29f">rtp_rtcp_report_dtor</a>);</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;   <span class="keywordflow">return</span> rtcp_report;</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;}</div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;</div><div class="line"><a name="l03485"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a452d6ad1556ab4006b41ddec84ecac29"> 3485</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a452d6ad1556ab4006b41ddec84ecac29">ast_rtp_publish_rtcp_message</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp,</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;      <span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *message_type,</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;      <span class="keyword">struct</span> <a class="code" href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a> *report,</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;      <span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *blob)</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;{</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/de4/structrtcp__message__payload.html">rtcp_message_payload</a> *, payload, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, <a class="code" href="../../d8/d9e/structmessage.html">message</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;   <span class="keywordflow">if</span> (!message_type) {</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;   }</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;   payload = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*payload), <a class="code" href="../../da/dbe/rtp__engine_8c.html#a3b0f72469b7dba2f2c7b83b1c7fce4a7">rtcp_message_payload_dtor</a>);</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;   <span class="keywordflow">if</span> (!payload || !report) {</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;   }</div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(rtp-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a9fa64ce3bfd68a0990442e530f0e76df">channel_uniqueid</a>)) {</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;      payload-&gt;snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(rtp-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a9fa64ce3bfd68a0990442e530f0e76df">channel_uniqueid</a>);</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;   }</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;   <span class="keywordflow">if</span> (blob) {</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;      payload-&gt;blob = blob;</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(blob);</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;   }</div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(report, +1);</div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;   payload-&gt;report = report;</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;</div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;   <a class="code" href="../../d8/d9e/structmessage.html">message</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(message_type, payload);</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9e/structmessage.html">message</a>) {</div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;   }</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gae7636be9781a3bd85e52ba016e8c432f">ast_rtp_topic</a>(), <a class="code" href="../../d8/d9e/structmessage.html">message</a>);</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;}</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;<span class="comment"> * @{ \brief Define RTCP/RTP message types.</span></div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;<a class="code" href="../../da/dbe/rtp__engine_8c.html#ae7a61504de5dc81c90a4ce6842da8b32">STASIS_MESSAGE_TYPE_DEFN</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gac1f320e2641058809ef5f0a0e830daf5">ast_rtp_rtcp_sent_type</a>,</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;      .<a class="code" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a> = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ac3c5f764f4d55ef737a57f7e924a1ce6">rtcp_report_to_ami</a>,</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;      .to_json = <a class="code" href="../../da/dbe/rtp__engine_8c.html#af2249bb26050979217a8946885b57508">rtcp_report_to_json</a>,);</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;<a class="code" href="../../da/dbe/rtp__engine_8c.html#ae7a61504de5dc81c90a4ce6842da8b32">STASIS_MESSAGE_TYPE_DEFN</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68594e604220e38eb6593972ef9a4da3">ast_rtp_rtcp_received_type</a>,</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;      .<a class="code" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a> = <a class="code" href="../../da/dbe/rtp__engine_8c.html#ac3c5f764f4d55ef737a57f7e924a1ce6">rtcp_report_to_ami</a>,</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;      .to_json = <a class="code" href="../../da/dbe/rtp__engine_8c.html#af2249bb26050979217a8946885b57508">rtcp_report_to_json</a>,);<span class="comment"></span></div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;<span class="comment">/*! @} */</span></div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;</div><div class="line"><a name="l03531"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#gae7636be9781a3bd85e52ba016e8c432f"> 3531</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gae7636be9781a3bd85e52ba016e8c432f">ast_rtp_topic</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;{</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a48d78c6056c1d46bd4b8630fdcd9ba2f">rtp_topic</a>;</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;}</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;</div><div class="line"><a name="l03536"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a8f48f5dcf1c94c6fe194d1c6c8d5e153"> 3536</a></span>&#160;<span class="keyword">static</span> uintmax_t <a class="code" href="../../da/dbe/rtp__engine_8c.html#a8f48f5dcf1c94c6fe194d1c6c8d5e153">debug_category_rtp_id</a>;</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;</div><div class="line"><a name="l03538"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#ga42aa0e60fa1c82a53fd1156b14aef793"> 3538</a></span>&#160;uintmax_t <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga42aa0e60fa1c82a53fd1156b14aef793">ast_debug_category_rtp_id</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;{</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a8f48f5dcf1c94c6fe194d1c6c8d5e153">debug_category_rtp_id</a>;</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;}</div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;</div><div class="line"><a name="l03543"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#aa2c5cde089c8208c01148d63c51c24cd"> 3543</a></span>&#160;<span class="keyword">static</span> uintmax_t <a class="code" href="../../da/dbe/rtp__engine_8c.html#aa2c5cde089c8208c01148d63c51c24cd">debug_category_rtp_packet_id</a>;</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;</div><div class="line"><a name="l03545"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#ga122d01a77f8d60e32d53135e26cccd6a"> 3545</a></span>&#160;uintmax_t <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga122d01a77f8d60e32d53135e26cccd6a">ast_debug_category_rtp_packet_id</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;{</div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#aa2c5cde089c8208c01148d63c51c24cd">debug_category_rtp_packet_id</a>;</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;}</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;</div><div class="line"><a name="l03550"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a43e7acee5296994d8dab0cb6d1bd4bc1"> 3550</a></span>&#160;<span class="keyword">static</span> uintmax_t <a class="code" href="../../da/dbe/rtp__engine_8c.html#a43e7acee5296994d8dab0cb6d1bd4bc1">debug_category_rtcp_id</a>;</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;</div><div class="line"><a name="l03552"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#gac297e0868722424bbf63a22e4179d0e4"> 3552</a></span>&#160;uintmax_t <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gac297e0868722424bbf63a22e4179d0e4">ast_debug_category_rtcp_id</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;{</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a43e7acee5296994d8dab0cb6d1bd4bc1">debug_category_rtcp_id</a>;</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;}</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;</div><div class="line"><a name="l03557"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a714c07488215920fd58af23fae732e84"> 3557</a></span>&#160;<span class="keyword">static</span> uintmax_t <a class="code" href="../../da/dbe/rtp__engine_8c.html#a714c07488215920fd58af23fae732e84">debug_category_rtcp_packet_id</a>;</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;</div><div class="line"><a name="l03559"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0185509f8e6d3142af9bda551ed4448f"> 3559</a></span>&#160;uintmax_t <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0185509f8e6d3142af9bda551ed4448f">ast_debug_category_rtcp_packet_id</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;{</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a714c07488215920fd58af23fae732e84">debug_category_rtcp_packet_id</a>;</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;}</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;</div><div class="line"><a name="l03564"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#aa934032800e623e98f0c0dd039e503a9"> 3564</a></span>&#160;<span class="keyword">static</span> uintmax_t <a class="code" href="../../da/dbe/rtp__engine_8c.html#aa934032800e623e98f0c0dd039e503a9">debug_category_dtls_id</a>;</div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;</div><div class="line"><a name="l03566"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#gadd41839a7dede33bd5dc1e9a3b41e173"> 3566</a></span>&#160;uintmax_t <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gadd41839a7dede33bd5dc1e9a3b41e173">ast_debug_category_dtls_id</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;{</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#aa934032800e623e98f0c0dd039e503a9">debug_category_dtls_id</a>;</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;}</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;</div><div class="line"><a name="l03571"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a2c5fb9f96675106e960e9c96b7f65ad1"> 3571</a></span>&#160;<span class="keyword">static</span> uintmax_t <a class="code" href="../../da/dbe/rtp__engine_8c.html#a2c5fb9f96675106e960e9c96b7f65ad1">debug_category_dtls_packet_id</a>;</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;</div><div class="line"><a name="l03573"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#ga8de49f8c81c23a3973b4bbfc5f9da89b"> 3573</a></span>&#160;uintmax_t <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga8de49f8c81c23a3973b4bbfc5f9da89b">ast_debug_category_dtls_packet_id</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;{</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a2c5fb9f96675106e960e9c96b7f65ad1">debug_category_dtls_packet_id</a>;</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;}</div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;</div><div class="line"><a name="l03578"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a780f0265a52bd60c73dae5de67dbe12c"> 3578</a></span>&#160;<span class="keyword">static</span> uintmax_t <a class="code" href="../../da/dbe/rtp__engine_8c.html#a780f0265a52bd60c73dae5de67dbe12c">debug_category_ice_id</a>;</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;</div><div class="line"><a name="l03580"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#ga2def1587d11cae8f25a132531073fe03"> 3580</a></span>&#160;uintmax_t <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga2def1587d11cae8f25a132531073fe03">ast_debug_category_ice_id</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;{</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a780f0265a52bd60c73dae5de67dbe12c">debug_category_ice_id</a>;</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;}</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;</div><div class="line"><a name="l03585"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a4f72a2dbb356fdbef1620f3d50563d35"> 3585</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a4f72a2dbb356fdbef1620f3d50563d35">rtp_engine_shutdown</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;{</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(rtp_topic);</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;   rtp_topic = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68594e604220e38eb6593972ef9a4da3">ast_rtp_rtcp_received_type</a>);</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gac1f320e2641058809ef5f0a0e830daf5">ast_rtp_rtcp_sent_type</a>);</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a>; x++) {</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(static_RTP_PT[x]);</div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;      static_RTP_PT[x] = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;   }</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;mime_types_lock);</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../da/dbe/rtp__engine_8c.html#a80375839a4de919dd2024ee65251ad0d">mime_types_len</a>; x++) {</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a>[x].payload_type.format) {</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;         <a class="code" href="../../da/dbe/rtp__engine_8c.html#a93f8936a4d9cc6a544de8bba9ed60c97">rtp_engine_mime_type_cleanup</a>(x);</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;      }</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;   }</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;   mime_types_len = 0;</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;mime_types_lock);</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;   <a class="code" href="../../d5/d1f/logger__category_8h.html#a9ba7f0bc9232e62fe9af86624b6a83f9">ast_debug_category_unregister</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga354a7a05dfbbf7392f398f516cd12cd7">AST_LOG_CATEGORY_ICE</a>);</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;   <a class="code" href="../../d5/d1f/logger__category_8h.html#a9ba7f0bc9232e62fe9af86624b6a83f9">ast_debug_category_unregister</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gad5e7c95bc24a751d7c2c64b43a0d9f87">AST_LOG_CATEGORY_DTLS_PACKET</a>);</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;   <a class="code" href="../../d5/d1f/logger__category_8h.html#a9ba7f0bc9232e62fe9af86624b6a83f9">ast_debug_category_unregister</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5be660321553c9f0d14c9d9307efcc84">AST_LOG_CATEGORY_DTLS</a>);</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;</div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;   <a class="code" href="../../d5/d1f/logger__category_8h.html#a9ba7f0bc9232e62fe9af86624b6a83f9">ast_debug_category_unregister</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga501ac56386fce3535f67353537a508e7">AST_LOG_CATEGORY_RTCP_PACKET</a>);</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;   <a class="code" href="../../d5/d1f/logger__category_8h.html#a9ba7f0bc9232e62fe9af86624b6a83f9">ast_debug_category_unregister</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga61285a9e7352a27c4ff117b79cb369ee">AST_LOG_CATEGORY_RTCP</a>);</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;   <a class="code" href="../../d5/d1f/logger__category_8h.html#a9ba7f0bc9232e62fe9af86624b6a83f9">ast_debug_category_unregister</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaa5ecf12e596867bc22d8df75d2568d96">AST_LOG_CATEGORY_RTP_PACKET</a>);</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;   <a class="code" href="../../d5/d1f/logger__category_8h.html#a9ba7f0bc9232e62fe9af86624b6a83f9">ast_debug_category_unregister</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga7fadd9ceea8dd8eed05d9d9a544ff007">AST_LOG_CATEGORY_RTP</a>);</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;}</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;</div><div class="line"><a name="l03622"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a882bf438d813b4a9d27d8effcd4ad174"> 3622</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a882bf438d813b4a9d27d8effcd4ad174">ast_rtp_engine_init</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;{</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a9b07039db138693d1ebe02c3e99ddcab">ast_rwlock_init</a>(&amp;mime_types_lock);</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a9b07039db138693d1ebe02c3e99ddcab">ast_rwlock_init</a>(&amp;static_RTP_PT_lock);</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;   rtp_topic = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;rtp:all&quot;</span>);</div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;   <span class="keywordflow">if</span> (!rtp_topic) {</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;   }</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gac1f320e2641058809ef5f0a0e830daf5">ast_rtp_rtcp_sent_type</a>);</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68594e604220e38eb6593972ef9a4da3">ast_rtp_rtcp_received_type</a>);</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../da/dbe/rtp__engine_8c.html#a4f72a2dbb356fdbef1620f3d50563d35">rtp_engine_shutdown</a>);</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;   <span class="comment">/* Define all the RTP mime types available */</span></div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a771306b3301213eb2f0a409d3d0f42df">ast_format_g723</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;G723&quot;</span>, 8000);</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a3c4c5f669f55befda69aa08699545ec7">ast_format_gsm</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;GSM&quot;</span>, 8000);</div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a568c3f5838b53c38f11996dbe5ff5785">ast_format_ulaw</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;PCMU&quot;</span>, 8000);</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a568c3f5838b53c38f11996dbe5ff5785">ast_format_ulaw</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;G711U&quot;</span>, 8000);</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;PCMA&quot;</span>, 8000);</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;G711A&quot;</span>, 8000);</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a563a4f351a86128f8a40757c9456ec4e">ast_format_g726</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;G726-32&quot;</span>, 8000);</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a218a7cbc708851ea992f490a8a4c9bef">ast_format_adpcm</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;DVI4&quot;</span>, 8000);</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;L16&quot;</span>, 8000);</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a622d7304e9148c2f4061f36411a43153">ast_format_slin16</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;L16&quot;</span>, 16000);</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a622d7304e9148c2f4061f36411a43153">ast_format_slin16</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;L16-256&quot;</span>, 16000);</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#abf183168c32c9fb898ac74c61d31ae34">ast_format_slin12</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;L16&quot;</span>, 12000);</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a24829195ce428f34ec03d123409a65d2">ast_format_slin24</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;L16&quot;</span>, 24000);</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a42190be4a7a35f2d316b8e4f76e9c82e">ast_format_slin32</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;L16&quot;</span>, 32000);</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a17ade0d0f1b4c22d784c0ed31b6751d7">ast_format_slin44</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;L16&quot;</span>, 44000);</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a6f81e297d6113245d93c9509d13f4fbe">ast_format_slin48</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;L16&quot;</span>, 48000);</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a6b2748bd8e16afa053d89eeaea268dcd">ast_format_slin96</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;L16&quot;</span>, 96000);</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a519067e785497a427635d64e64dc4458">ast_format_slin192</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;L16&quot;</span>, 192000);</div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a5b1d770effa84ed2066d849eebbdc8cb">ast_format_lpc10</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;LPC&quot;</span>, 8000);</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#ae4848b177c158d817294f2b0b447f66e">ast_format_g729</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;G729&quot;</span>, 8000);</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#ae4848b177c158d817294f2b0b447f66e">ast_format_g729</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;G729A&quot;</span>, 8000);</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#ae4848b177c158d817294f2b0b447f66e">ast_format_g729</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;G.729&quot;</span>, 8000);</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a4cce4fa68c1815b942eb3882d14b9a81">ast_format_speex</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;speex&quot;</span>, 8000);</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a0293031ddc642eac4e79c3893e22ec9f">ast_format_speex16</a>, 0,  <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;speex&quot;</span>, 16000);</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#aa430d88a82157dc5990ee7c9401fc718">ast_format_speex32</a>, 0,  <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;speex&quot;</span>, 32000);</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a55209e40c9d09d4b838e91b3e86e0d4e">ast_format_ilbc</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;iLBC&quot;</span>, 8000);</div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;   <span class="comment">/* this is the sample rate listed in the RTP profile for the G.722 codec, *NOT* the actual sample rate of the media stream */</span></div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#ad02ea989608ad5180d04cb0c4e75294c">ast_format_g722</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;G722&quot;</span>, 8000);</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#ad230bc99f5cd46e56e97d32941ba5b23">ast_format_g726_aal2</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;AAL2-G726-32&quot;</span>, 8000);</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a>, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;telephone-event&quot;</span>, 8000);</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#afd196e2ba79659dff0799d49494e8b45">AST_RTP_CISCO_DTMF</a>, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;cisco-telephone-event&quot;</span>, 8000);</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad924782a38efb3a8f9edbb92d3135541">AST_RTP_CN</a>, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;CN&quot;</span>, 8000);</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#af156da16afb1d769b42263c03feb4a80">ast_format_jpeg</a>, 0, <span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;JPEG&quot;</span>, 90000);</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#acb4afe90ab0483659f1ea7207175b29d">ast_format_png</a>, 0, <span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;PNG&quot;</span>, 90000);</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#aaeda14ddafc8c3d2efb20ece9ab29b36">ast_format_h261</a>, 0, <span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;H261&quot;</span>, 90000);</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a4e8a3ae8d3510c9b2024c1649ef33e5a">ast_format_h263</a>, 0, <span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;H263&quot;</span>, 90000);</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#ac8f5dbbf78d277227db1ebff7e134cc1">ast_format_h263p</a>, 0, <span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;h263-1998&quot;</span>, 90000);</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a06f47624d806b644d86c3b2828eafdc1">ast_format_h264</a>, 0, <span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;H264&quot;</span>, 90000);</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a3b2199894b5adbf010e1b6a38dff5ba7">ast_format_h265</a>, 0, <span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;H265&quot;</span>, 90000);</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a5158dc4d004a6a49e8014abbebc8c9b1">ast_format_mp4</a>, 0, <span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;MP4V-ES&quot;</span>, 90000);</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#abd1090ebd4176d40eabbe0878c82e216">ast_format_t140_red</a>, 0, <span class="stringliteral">&quot;text&quot;</span>, <span class="stringliteral">&quot;RED&quot;</span>, 1000);</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#adbb2a7346ad99c0a41cd6c43548835ba">ast_format_t140</a>, 0, <span class="stringliteral">&quot;text&quot;</span>, <span class="stringliteral">&quot;T140&quot;</span>, 1000);</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a7dff267906fd29c091d89827230a3608">ast_format_siren7</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;G7221&quot;</span>, 16000);</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a4a73603085e82e6e49e1cb58a7b37475">ast_format_siren14</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;G7221&quot;</span>, 32000);</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#af85ac680749ca1c388121b295f4d147d">ast_format_g719</a>, 0, <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;G719&quot;</span>, 48000);</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;   <span class="comment">/* Opus, VP8, and VP9 */</span></div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a36ccd0ea29dc6a6505fba266e692509b">ast_format_opus</a>, 0,  <span class="stringliteral">&quot;audio&quot;</span>, <span class="stringliteral">&quot;opus&quot;</span>, 48000);</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#af16d45fe2f99759edff3984706214752">ast_format_vp8</a>, 0,  <span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;VP8&quot;</span>, 90000);</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#ab67520222c2e1418df2d806e2184be22">ast_format_vp9</a>, 0, <span class="stringliteral">&quot;video&quot;</span>, <span class="stringliteral">&quot;VP9&quot;</span>, 90000);</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;</div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;   <span class="comment">/* Define the static rtp payload mappings */</span></div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(0, <a class="code" href="../../db/d1c/format__cache_8h.html#a568c3f5838b53c38f11996dbe5ff5785">ast_format_ulaw</a>, 0);</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;<span class="preprocessor">   #ifdef USE_DEPRECATED_G726</span></div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(2, <a class="code" href="../../db/d1c/format__cache_8h.html#a563a4f351a86128f8a40757c9456ec4e">ast_format_g726</a>, 0);<span class="comment">/* Technically this is G.721, but if Cisco can do it, so can we... */</span></div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;<span class="preprocessor">   #endif</span></div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(3, <a class="code" href="../../db/d1c/format__cache_8h.html#a3c4c5f669f55befda69aa08699545ec7">ast_format_gsm</a>, 0);</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(4, <a class="code" href="../../db/d1c/format__cache_8h.html#a771306b3301213eb2f0a409d3d0f42df">ast_format_g723</a>, 0);</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(5, <a class="code" href="../../db/d1c/format__cache_8h.html#a218a7cbc708851ea992f490a8a4c9bef">ast_format_adpcm</a>, 0);<span class="comment">/* 8 kHz */</span></div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(6, <a class="code" href="../../db/d1c/format__cache_8h.html#a218a7cbc708851ea992f490a8a4c9bef">ast_format_adpcm</a>, 0); <span class="comment">/* 16 kHz */</span></div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(7, <a class="code" href="../../db/d1c/format__cache_8h.html#a5b1d770effa84ed2066d849eebbdc8cb">ast_format_lpc10</a>, 0);</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(8, <a class="code" href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a>, 0);</div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(9, <a class="code" href="../../db/d1c/format__cache_8h.html#ad02ea989608ad5180d04cb0c4e75294c">ast_format_g722</a>, 0);</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(10, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>, 0); <span class="comment">/* 2 channels */</span></div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(11, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>, 0); <span class="comment">/* 1 channel */</span></div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(13, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad924782a38efb3a8f9edbb92d3135541">AST_RTP_CN</a>);</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(16, <a class="code" href="../../db/d1c/format__cache_8h.html#a218a7cbc708851ea992f490a8a4c9bef">ast_format_adpcm</a>, 0); <span class="comment">/* 11.025 kHz */</span></div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(17, <a class="code" href="../../db/d1c/format__cache_8h.html#a218a7cbc708851ea992f490a8a4c9bef">ast_format_adpcm</a>, 0); <span class="comment">/* 22.050 kHz */</span></div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(18, <a class="code" href="../../db/d1c/format__cache_8h.html#ae4848b177c158d817294f2b0b447f66e">ast_format_g729</a>, 0);</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(19, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad924782a38efb3a8f9edbb92d3135541">AST_RTP_CN</a>);         <span class="comment">/* Also used for CN */</span></div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(26, <a class="code" href="../../db/d1c/format__cache_8h.html#af156da16afb1d769b42263c03feb4a80">ast_format_jpeg</a>, 0);</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(31, <a class="code" href="../../db/d1c/format__cache_8h.html#aaeda14ddafc8c3d2efb20ece9ab29b36">ast_format_h261</a>, 0);</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(34, <a class="code" href="../../db/d1c/format__cache_8h.html#a4e8a3ae8d3510c9b2024c1649ef33e5a">ast_format_h263</a>, 0);</div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;<span class="comment">    * Dynamic payload types - Even when dynamically assigning them we&#39;ll fall</span></div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;<span class="comment">    * back to using the statically declared values as the default number.</span></div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(96, <a class="code" href="../../db/d1c/format__cache_8h.html#a519067e785497a427635d64e64dc4458">ast_format_slin192</a>, 0);</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(97, <a class="code" href="../../db/d1c/format__cache_8h.html#a55209e40c9d09d4b838e91b3e86e0d4e">ast_format_ilbc</a>, 0);</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(99, <a class="code" href="../../db/d1c/format__cache_8h.html#a06f47624d806b644d86c3b2828eafdc1">ast_format_h264</a>, 0);</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(100, <a class="code" href="../../db/d1c/format__cache_8h.html#af16d45fe2f99759edff3984706214752">ast_format_vp8</a>, 0);</div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(101, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a>);</div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(102, <a class="code" href="../../db/d1c/format__cache_8h.html#a7dff267906fd29c091d89827230a3608">ast_format_siren7</a>, 0);</div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(103, <a class="code" href="../../db/d1c/format__cache_8h.html#ac8f5dbbf78d277227db1ebff7e134cc1">ast_format_h263p</a>, 0);</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(104, <a class="code" href="../../db/d1c/format__cache_8h.html#a5158dc4d004a6a49e8014abbebc8c9b1">ast_format_mp4</a>, 0);</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(105, <a class="code" href="../../db/d1c/format__cache_8h.html#abd1090ebd4176d40eabbe0878c82e216">ast_format_t140_red</a>, 0);   <span class="comment">/* Real time text chat (with redundancy encoding) */</span></div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(106, <a class="code" href="../../db/d1c/format__cache_8h.html#adbb2a7346ad99c0a41cd6c43548835ba">ast_format_t140</a>, 0);     <span class="comment">/* Real time text chat */</span></div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(107, <a class="code" href="../../db/d1c/format__cache_8h.html#a36ccd0ea29dc6a6505fba266e692509b">ast_format_opus</a>, 0);</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(108, <a class="code" href="../../db/d1c/format__cache_8h.html#ab67520222c2e1418df2d806e2184be22">ast_format_vp9</a>, 0);</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(109, <a class="code" href="../../db/d1c/format__cache_8h.html#a3b2199894b5adbf010e1b6a38dff5ba7">ast_format_h265</a>, 0);</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(110, <a class="code" href="../../db/d1c/format__cache_8h.html#a4cce4fa68c1815b942eb3882d14b9a81">ast_format_speex</a>, 0);</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(111, <a class="code" href="../../db/d1c/format__cache_8h.html#a563a4f351a86128f8a40757c9456ec4e">ast_format_g726</a>, 0);</div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(112, <a class="code" href="../../db/d1c/format__cache_8h.html#ad230bc99f5cd46e56e97d32941ba5b23">ast_format_g726_aal2</a>, 0);</div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(115, <a class="code" href="../../db/d1c/format__cache_8h.html#a4a73603085e82e6e49e1cb58a7b37475">ast_format_siren14</a>, 0);</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(116, <a class="code" href="../../db/d1c/format__cache_8h.html#af85ac680749ca1c388121b295f4d147d">ast_format_g719</a>, 0);</div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(117, <a class="code" href="../../db/d1c/format__cache_8h.html#a0293031ddc642eac4e79c3893e22ec9f">ast_format_speex16</a>, 0);</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(118, <a class="code" href="../../db/d1c/format__cache_8h.html#a622d7304e9148c2f4061f36411a43153">ast_format_slin16</a>, 0); <span class="comment">/* 16 Khz signed linear */</span></div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(119, <a class="code" href="../../db/d1c/format__cache_8h.html#aa430d88a82157dc5990ee7c9401fc718">ast_format_speex32</a>, 0);</div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(121, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#afd196e2ba79659dff0799d49494e8b45">AST_RTP_CISCO_DTMF</a>);   <span class="comment">/* Must be type 121 */</span></div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(122, <a class="code" href="../../db/d1c/format__cache_8h.html#abf183168c32c9fb898ac74c61d31ae34">ast_format_slin12</a>, 0);</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(123, <a class="code" href="../../db/d1c/format__cache_8h.html#a24829195ce428f34ec03d123409a65d2">ast_format_slin24</a>, 0);</div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(124, <a class="code" href="../../db/d1c/format__cache_8h.html#a42190be4a7a35f2d316b8e4f76e9c82e">ast_format_slin32</a>, 0);</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(125, <a class="code" href="../../db/d1c/format__cache_8h.html#a17ade0d0f1b4c22d784c0ed31b6751d7">ast_format_slin44</a>, 0);</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(126, <a class="code" href="../../db/d1c/format__cache_8h.html#a6f81e297d6113245d93c9509d13f4fbe">ast_format_slin48</a>, 0);</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a>(127, <a class="code" href="../../db/d1c/format__cache_8h.html#a6b2748bd8e16afa053d89eeaea268dcd">ast_format_slin96</a>, 0);</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;   <span class="comment">/* payload types above 127 are not valid */</span></div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a8f48f5dcf1c94c6fe194d1c6c8d5e153">debug_category_rtp_id</a> = <a class="code" href="../../d5/d1f/logger__category_8h.html#a1ac50464c806cf16fd3c9ffc714cbc42">ast_debug_category_register</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga7fadd9ceea8dd8eed05d9d9a544ff007">AST_LOG_CATEGORY_RTP</a>);</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aa2c5cde089c8208c01148d63c51c24cd">debug_category_rtp_packet_id</a> = <a class="code" href="../../d5/d1f/logger__category_8h.html#a1ac50464c806cf16fd3c9ffc714cbc42">ast_debug_category_register</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaa5ecf12e596867bc22d8df75d2568d96">AST_LOG_CATEGORY_RTP_PACKET</a>);</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a43e7acee5296994d8dab0cb6d1bd4bc1">debug_category_rtcp_id</a> = <a class="code" href="../../d5/d1f/logger__category_8h.html#a1ac50464c806cf16fd3c9ffc714cbc42">ast_debug_category_register</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga61285a9e7352a27c4ff117b79cb369ee">AST_LOG_CATEGORY_RTCP</a>);</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a714c07488215920fd58af23fae732e84">debug_category_rtcp_packet_id</a> = <a class="code" href="../../d5/d1f/logger__category_8h.html#a1ac50464c806cf16fd3c9ffc714cbc42">ast_debug_category_register</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga501ac56386fce3535f67353537a508e7">AST_LOG_CATEGORY_RTCP_PACKET</a>);</div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#aa934032800e623e98f0c0dd039e503a9">debug_category_dtls_id</a> = <a class="code" href="../../d5/d1f/logger__category_8h.html#a1ac50464c806cf16fd3c9ffc714cbc42">ast_debug_category_register</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5be660321553c9f0d14c9d9307efcc84">AST_LOG_CATEGORY_DTLS</a>);</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a2c5fb9f96675106e960e9c96b7f65ad1">debug_category_dtls_packet_id</a> = <a class="code" href="../../d5/d1f/logger__category_8h.html#a1ac50464c806cf16fd3c9ffc714cbc42">ast_debug_category_register</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gad5e7c95bc24a751d7c2c64b43a0d9f87">AST_LOG_CATEGORY_DTLS_PACKET</a>);</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a780f0265a52bd60c73dae5de67dbe12c">debug_category_ice_id</a> = <a class="code" href="../../d5/d1f/logger__category_8h.html#a1ac50464c806cf16fd3c9ffc714cbc42">ast_debug_category_register</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga354a7a05dfbbf7392f398f516cd12cd7">AST_LOG_CATEGORY_ICE</a>);</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;}</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;</div><div class="line"><a name="l03758"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a71f6c74dc884b40dbbd1be4079e699de"> 3758</a></span>&#160;time_t <a class="code" href="../../da/dbe/rtp__engine_8c.html#a71f6c74dc884b40dbbd1be4079e699de">ast_rtp_instance_get_last_tx</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp)</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;{</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;   <span class="keywordflow">return</span> rtp-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a731f60e2595beaace09fef194e1f616a">last_tx</a>;</div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;}</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;</div><div class="line"><a name="l03763"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a671d95f71246853f2b7672ac36222493"> 3763</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a671d95f71246853f2b7672ac36222493">ast_rtp_instance_set_last_tx</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp, time_t time)</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;{</div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;   rtp-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a731f60e2595beaace09fef194e1f616a">last_tx</a> = time;</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;}</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;</div><div class="line"><a name="l03768"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ab0b96e27f62f9b8279eafe463a5854aa"> 3768</a></span>&#160;time_t <a class="code" href="../../da/dbe/rtp__engine_8c.html#ab0b96e27f62f9b8279eafe463a5854aa">ast_rtp_instance_get_last_rx</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp)</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;{</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;   <span class="keywordflow">return</span> rtp-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a443d37645d5df53ac34413e5a0e52d55">last_rx</a>;</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;}</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;</div><div class="line"><a name="l03773"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a27714e89a2a2d136150789bc6d41e060"> 3773</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a27714e89a2a2d136150789bc6d41e060">ast_rtp_instance_set_last_rx</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp, time_t time)</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;{</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;   rtp-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a443d37645d5df53ac34413e5a0e52d55">last_rx</a> = time;</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;}</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;</div><div class="line"><a name="l03778"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#af0adb620e28a15749fe5bf4f6912f00d"> 3778</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#af0adb620e28a15749fe5bf4f6912f00d">ast_rtp_instance_get_ssrc</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp)</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;{</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ssrc = 0;</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(rtp);</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ac9fdf1f68624cc570128ec4c495d46e6">ssrc_get</a>) {</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;      ssrc = rtp-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ac9fdf1f68624cc570128ec4c495d46e6">ssrc_get</a>(rtp);</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;   }</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(rtp);</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;   <span class="keywordflow">return</span> ssrc;</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;}</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;</div><div class="line"><a name="l03791"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a16d87c90a0ee4dea2d08e9907a0e800c"> 3791</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/dbe/rtp__engine_8c.html#a16d87c90a0ee4dea2d08e9907a0e800c">ast_rtp_instance_get_cname</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp)</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;{</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *cname = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(rtp);</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a93f284b9dd55aeb2556b3bc4c2227ff1">cname_get</a>) {</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;      cname = rtp-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a93f284b9dd55aeb2556b3bc4c2227ff1">cname_get</a>(rtp);</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;   }</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(rtp);</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;   <span class="keywordflow">return</span> cname;</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;}</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;</div><div class="line"><a name="l03804"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a6bfb60287c258994663a8e7749e08532"> 3804</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a6bfb60287c258994663a8e7749e08532">ast_rtp_instance_bundle</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *child, <span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *parent)</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;{</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;   <span class="keywordflow">if</span> (parent &amp;&amp; (child-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a> != parent-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>)) {</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;   }</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(child);</div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;   <span class="keywordflow">if</span> (child-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#af1b542dea88e6cb9b611816cd9917c90">bundle</a>) {</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;      res = child-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#af1b542dea88e6cb9b611816cd9917c90">bundle</a>(child, parent);</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;   }</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(child);</div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;</div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;}</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;</div><div class="line"><a name="l03821"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#a941a9378002f077f9fbd97da4eaee561"> 3821</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#a941a9378002f077f9fbd97da4eaee561">ast_rtp_instance_set_remote_ssrc</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ssrc)</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;{</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(rtp);</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a6df8d099f7707c0fed3ed7928b059a81">set_remote_ssrc</a>) {</div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;      rtp-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#a6df8d099f7707c0fed3ed7928b059a81">set_remote_ssrc</a>(rtp, ssrc);</div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;   }</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(rtp);</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;}</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;</div><div class="line"><a name="l03830"></a><span class="lineno"><a class="line" href="../../da/dbe/rtp__engine_8c.html#ad8f390e1d568b90c8b87174a81f81a5b"> 3830</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../da/dbe/rtp__engine_8c.html#ad8f390e1d568b90c8b87174a81f81a5b">ast_rtp_instance_set_stream_num</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp, <span class="keywordtype">int</span> stream_num)</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;{</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(rtp);</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;   <span class="keywordflow">if</span> (rtp-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ad3da1044f5b8b43756856afbb91abb5b">set_stream_num</a>) {</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;      rtp-&gt;<a class="code" href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">engine</a>-&gt;<a class="code" href="../../d2/d14/structast__rtp__engine.html#ad3da1044f5b8b43756856afbb91abb5b">set_stream_num</a>(rtp, stream_num);</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;   }</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(rtp);</div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;}</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l03840"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#ga32aaf4e901b01797fe9102ad7b5f68c9"> 3840</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga32aaf4e901b01797fe9102ad7b5f68c9">ast_rtp_instance_get_recv_buffer_max</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;{</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;   <span class="keywordtype">size_t</span> res;</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a> *<a class="code" href="../../d8/d89/structtest.html">test</a> = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a>(instance);</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;   <span class="keywordflow">if</span> (!test) {</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;There is no test engine set up!\n&quot;</span>);</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;   }</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;   res = test-&gt;<a class="code" href="../../d5/d98/structast__rtp__engine__test.html#acd325c74d3b143cce624aa96f8a82eb0">recv_buffer_max</a>(instance);</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;}</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;</div><div class="line"><a name="l03857"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#gad193e738ab3f30ba62fb2239823fe47a"> 3857</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gad193e738ab3f30ba62fb2239823fe47a">ast_rtp_instance_get_recv_buffer_count</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;{</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;   <span class="keywordtype">size_t</span> res;</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a> *<a class="code" href="../../d8/d89/structtest.html">test</a> = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a>(instance);</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;   <span class="keywordflow">if</span> (!test) {</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;There is no test engine set up!\n&quot;</span>);</div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;   }</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;   res = test-&gt;<a class="code" href="../../d5/d98/structast__rtp__engine__test.html#a127ffa9479d12a8d665bbd42ba2dee18">recv_buffer_count</a>(instance);</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;}</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;</div><div class="line"><a name="l03874"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#gac232b87801c254313c80905aa709875b"> 3874</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gac232b87801c254313c80905aa709875b">ast_rtp_instance_get_send_buffer_count</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;{</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;   <span class="keywordtype">size_t</span> res;</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a> *<a class="code" href="../../d8/d89/structtest.html">test</a> = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a>(instance);</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;   <span class="keywordflow">if</span> (!test) {</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;There is no test engine set up!\n&quot;</span>);</div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;   }</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;   res = test-&gt;<a class="code" href="../../d5/d98/structast__rtp__engine__test.html#a22a297cd8a09d7ffd6f092bf6dc22eee">send_buffer_count</a>(instance);</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;}</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;</div><div class="line"><a name="l03891"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#ga4355793892bdf43a0a5852220cf0b0d2"> 3891</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga4355793892bdf43a0a5852220cf0b0d2">ast_rtp_instance_set_schedid</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> <span class="keywordtype">id</span>)</div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;{</div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a> *<a class="code" href="../../d8/d89/structtest.html">test</a> = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a>(instance);</div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;   <span class="keywordflow">if</span> (!test) {</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;There is no test engine set up!\n&quot;</span>);</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;   }</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;</div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(instance);</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;   test-&gt;<a class="code" href="../../d5/d98/structast__rtp__engine__test.html#a630ea1ce30dc302ad4e7189bfaa4ae1c">set_schedid</a>(instance, <span class="keywordtype">id</span>);</div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(instance);</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;}</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;</div><div class="line"><a name="l03905"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#gacbf4ba18d5db2721e5d4d8de22a27886"> 3905</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gacbf4ba18d5db2721e5d4d8de22a27886">ast_rtp_instance_drop_packets</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance, <span class="keywordtype">int</span> num)</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;{</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a> *<a class="code" href="../../d8/d89/structtest.html">test</a> = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a>(instance);</div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;   <span class="keywordflow">if</span> (!test) {</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;There is no test engine set up!\n&quot;</span>);</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;   }</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;   test-&gt;<a class="code" href="../../d5/d98/structast__rtp__engine__test.html#a8dbf2df25a080792f44380cdf628916f">packets_to_drop</a> = num;</div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;}</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;</div><div class="line"><a name="l03917"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#ga37f241cedc1f8c75764d407284d7cabb"> 3917</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga37f241cedc1f8c75764d407284d7cabb">ast_rtp_instance_queue_report</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;{</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a> *<a class="code" href="../../d8/d89/structtest.html">test</a> = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a>(instance);</div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;   <span class="keywordflow">if</span> (!test) {</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;There is no test engine set up!\n&quot;</span>);</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;   }</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;   test-&gt;<a class="code" href="../../d5/d98/structast__rtp__engine__test.html#a9ed17e77f1720e944b2e0a6870e7b1c0">send_report</a> = 1;</div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;}</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;</div><div class="line"><a name="l03929"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#ga14c88045a075be4ca9d217c283502532"> 3929</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga14c88045a075be4ca9d217c283502532">ast_rtp_instance_get_sdes_received</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;{</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a> *<a class="code" href="../../d8/d89/structtest.html">test</a> = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a>(instance);</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;</div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;   <span class="keywordflow">if</span> (!test) {</div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;There is no test engine set up!\n&quot;</span>);</div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;   }</div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;</div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;   <span class="keywordflow">return</span> test-&gt;<a class="code" href="../../d5/d98/structast__rtp__engine__test.html#ad499ee617ec9d9be0f4bc339742a07e7">sdes_received</a>;</div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;}</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;</div><div class="line"><a name="l03941"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#ga404c7192a06d6519fbf582eed184ef41"> 3941</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga404c7192a06d6519fbf582eed184ef41">ast_rtp_instance_reset_test_engine</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;{</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a> *<a class="code" href="../../d8/d89/structtest.html">test</a> = <a class="code" href="../../da/dbe/rtp__engine_8c.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a>(instance);</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;   <span class="keywordflow">if</span> (!test) {</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;There is no test engine set up!\n&quot;</span>);</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;   }</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;   test-&gt;<a class="code" href="../../d5/d98/structast__rtp__engine__test.html#a8dbf2df25a080792f44380cdf628916f">packets_to_drop</a> = 0;</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;   test-&gt;<a class="code" href="../../d5/d98/structast__rtp__engine__test.html#a9ed17e77f1720e944b2e0a6870e7b1c0">send_report</a> = 0;</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;   test-&gt;<a class="code" href="../../d5/d98/structast__rtp__engine__test.html#ad499ee617ec9d9be0f4bc339742a07e7">sdes_received</a> = 0;</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;}</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;</div><div class="line"><a name="l03956"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#gab5693c002c4a23d84da916dbb02d5a5c"> 3956</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gab5693c002c4a23d84da916dbb02d5a5c">ast_rtp_convert_stats_json</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d0/db0/structast__rtp__instance__stats.html">ast_rtp_instance_stats</a> *stats)</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;{</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *j_res;</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;   <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;   j_res = <a class="code" href="../../d4/d05/json_8h.html#a5892d6cd943e00556180fcf15d30788e">ast_json_object_create</a>();</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;   <span class="keywordflow">if</span> (!j_res) {</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;   }</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;   <span class="comment">/* set mandatory items */</span></div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;   ret = <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(j_res, <span class="stringliteral">&quot;txcount&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#ac13f0f415f198c5a341017195933356f">ast_json_integer_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a887918839240a36d118b4e1cb46a4de9">txcount</a>));</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;   ret |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(j_res, <span class="stringliteral">&quot;rxcount&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#ac13f0f415f198c5a341017195933356f">ast_json_integer_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a066dafb1cdc02b25e6c2329ef7e7a810">rxcount</a>));</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;   ret |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(j_res, <span class="stringliteral">&quot;txploss&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#ac13f0f415f198c5a341017195933356f">ast_json_integer_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a934ff2437b6705676a1f8fb9223e8e9b">txploss</a>));</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;   ret |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(j_res, <span class="stringliteral">&quot;rxploss&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#ac13f0f415f198c5a341017195933356f">ast_json_integer_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a754403af0ba6403237fadb9b6294ca5f">rxploss</a>));</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;</div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;   ret |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(j_res, <span class="stringliteral">&quot;local_ssrc&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#ac13f0f415f198c5a341017195933356f">ast_json_integer_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a345269c0d57add15c919b781d140e011">local_ssrc</a>));</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;   ret |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(j_res, <span class="stringliteral">&quot;remote_ssrc&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#ac13f0f415f198c5a341017195933356f">ast_json_integer_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a052c95f741f3e25e6ab9217a01affb53">remote_ssrc</a>));</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;</div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;   ret |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(j_res, <span class="stringliteral">&quot;txoctetcount&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#ac13f0f415f198c5a341017195933356f">ast_json_integer_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aed963fd645cea41f8f9a7dd144810204">txoctetcount</a>));</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;   ret |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(j_res, <span class="stringliteral">&quot;rxoctetcount&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#ac13f0f415f198c5a341017195933356f">ast_json_integer_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a6755911cdc9335fc23089602dbbcd048">rxoctetcount</a>));</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;   ret |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(j_res, <span class="stringliteral">&quot;channel_uniqueid&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aeedb7802e580cf4c11d7af4c16ce04bd">channel_uniqueid</a>));</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;   <span class="keywordflow">if</span> (ret) {</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not create rtp statistics info. channel: %s\n&quot;</span>, stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aeedb7802e580cf4c11d7af4c16ce04bd">channel_uniqueid</a>);</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(j_res);</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;   }</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;   <span class="comment">/* set other items */</span></div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;txjitter&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aadfdc9692fcc3eb56f7c94f089db163b">txjitter</a>));</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;rxjitter&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a80552fd3f7f852d51e944dc4105da800">rxjitter</a>));</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;</div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;remote_maxjitter&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aad58a04a0dc44700d786791b27fc40b6">remote_maxjitter</a>));</div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;remote_minjitter&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a21f3d3372a6100f94cc23e62886131ba">remote_minjitter</a>));</div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;remote_normdevjitter&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#ad742aaf83d710b381c462677919a8617">remote_normdevjitter</a>));</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;remote_stdevjitter&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aff4ec25e589bed0b47f2fa58e9b020f2">remote_stdevjitter</a>));</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;local_maxjitter&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#adbaefd95043efe7b49f3190ffeff40fb">local_maxjitter</a>));</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;local_minjitter&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a7f3a0b0d420584f13574e0741c4f96ab">local_minjitter</a>));</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;local_normdevjitter&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a3f7aced2b7c50be99b2b27c36f1c3557">local_normdevjitter</a>));</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;local_stdevjitter&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#ac0a16b9afb840b589358fec8953ba092">local_stdevjitter</a>));</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;remote_maxrxploss&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aa102598d55cb66a61cece8e3033e5352">remote_maxrxploss</a>));</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;remote_minrxploss&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a3a851bbeea9961c987cbc8d3d3a365bd">remote_minrxploss</a>));</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;remote_normdevrxploss&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a8f7c0fb630cef59062f987730a17df71">remote_normdevrxploss</a>));</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;remote_stdevrxploss&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a21f14570a0860de7863be4f0f16e8e4b">remote_stdevrxploss</a>));</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;local_maxrxploss&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a6c8b04702bbcf8c030d6c16e27e7bd1c">local_maxrxploss</a>));</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;local_minrxploss&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a2c14b23dc2a76aa9ae9a9de210527eb4">local_minrxploss</a>));</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;local_normdevrxploss&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a63bee783a421d71165058889b433a9ab">local_normdevrxploss</a>));</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;local_stdevrxploss&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a9dc97ff0394d0d099c6291451e07ea73">local_stdevrxploss</a>));</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;rtt&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#abc953dca5930a67736d6cd8f72353794">rtt</a>));</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;maxrtt&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#ad9e0112e5a3834937c4f84604c175ba6">maxrtt</a>));</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;minrtt&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#aa5e4ba49724f6bb86be553f4c823b510">minrtt</a>));</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;normdevrtt&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a41960a911bf90300e198a29deac4a02f">normdevrtt</a>));</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;   <a class="code" href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a>(j_res, <span class="stringliteral">&quot;stdevrtt&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a>(stats-&gt;<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a484c5279646a0804e4beba6b3f0828c9">stdevrtt</a>));</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;   <span class="keywordflow">return</span> j_res;</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;}</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;</div><div class="line"><a name="l04019"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#gac8dcaac6d227860b04c66fc22462789a"> 4019</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gac8dcaac6d227860b04c66fc22462789a">ast_rtp_instance_get_stats_all_json</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *instance)</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;{</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/db0/structast__rtp__instance__stats.html">ast_rtp_instance_stats</a> stats = {0,};</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;   <span class="keywordflow">if</span>(<a class="code" href="../../da/dbe/rtp__engine_8c.html#a82a029e03affad8a6e1b322c0b9fe2c3">ast_rtp_instance_get_stats</a>(instance, &amp;stats, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faf8772548ca3d011625888eb38c4511e4">AST_RTP_INSTANCE_STAT_ALL</a>)) {</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;   }</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gab5693c002c4a23d84da916dbb02d5a5c">ast_rtp_convert_stats_json</a>(&amp;stats);</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;}</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;</div><div class="line"><a name="l04030"></a><span class="lineno"><a class="line" href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed"> 4030</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>)</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;{</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;   <span class="comment">/* For those wondering: due to a fluke in RFC publication, G.722 is advertised</span></div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;<span class="comment">    * as having a sample rate of 8kHz, while implementations must know that its</span></div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;<span class="comment">    * real rate is 16kHz. Seriously.</span></div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(format, <a class="code" href="../../db/d1c/format__cache_8h.html#ad02ea989608ad5180d04cb0c4e75294c">ast_format_g722</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) ? 8000 : (int)<a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(format);</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;}</div><div class="ttc" id="group__StasisTopicsAndMessages_html_ga0185509f8e6d3142af9bda551ed4448f"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga0185509f8e6d3142af9bda551ed4448f">ast_debug_category_rtcp_packet_id</a></div><div class="ttdeci">uintmax_t ast_debug_category_rtcp_packet_id(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03559">rtp_engine.c:3559</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a0c77f37b19c6629477ed0ce38296365a"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a0c77f37b19c6629477ed0ce38296365a">rtp_dtls_wrap_get_connection</a></div><div class="ttdeci">static enum ast_rtp_dtls_connection rtp_dtls_wrap_get_connection(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02942">rtp_engine.c:2942</a></div></div>
<div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gac1f320e2641058809ef5f0a0e830daf5"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gac1f320e2641058809ef5f0a0e830daf5">ast_rtp_rtcp_sent_type</a></div><div class="ttdeci">struct stasis_message_type * ast_rtp_rtcp_sent_type(void)</div><div class="ttdoc">Message type for an RTCP message sent from this Asterisk instance. </div></div>
<div class="ttc" id="rtp__engine_8c_html_a6b9c2dec2e2bd09deca930909063c8d3"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a6b9c2dec2e2bd09deca930909063c8d3">ast_rtp_instance_set_write_format</a></div><div class="ttdeci">int ast_rtp_instance_set_write_format(struct ast_rtp_instance *instance, struct ast_format *format)</div><div class="ttdoc">Tell underlying RTP engine that audio frames will be provided in a specific format. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02574">rtp_engine.c:2574</a></div></div>
<div class="ttc" id="format__cache_8h_html_af16d45fe2f99759edff3984706214752"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#af16d45fe2f99759edff3984706214752">ast_format_vp8</a></div><div class="ttdeci">struct ast_format * ast_format_vp8</div><div class="ttdoc">Built-in cached vp8 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00196">format_cache.c:196</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a26e4699e53a894379aef105cdc12498e"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a26e4699e53a894379aef105cdc12498e">ast_rtp_instance_get_ice</a></div><div class="ttdeci">struct ast_rtp_engine_ice * ast_rtp_instance_get_ice(struct ast_rtp_instance *instance)</div><div class="ttdoc">Obtain a pointer to the ICE support present on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02891">rtp_engine.c:2891</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a63bee783a421d71165058889b433a9ab"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a63bee783a421d71165058889b433a9ab">ast_rtp_instance_stats::local_normdevrxploss</a></div><div class="ttdeci">double local_normdevrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00408">rtp_engine.h:408</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a91283fc41fa9f913318befed94156e06"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a91283fc41fa9f913318befed94156e06">ast_rtp_instance_sendcng</a></div><div class="ttdeci">int ast_rtp_instance_sendcng(struct ast_rtp_instance *instance, int level)</div><div class="ttdoc">Send a comfort noise packet to the RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02772">rtp_engine.c:2772</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a008c70da51a5d4e337f5857dc14e3ef4a666bf79c451f17b96da27e2fc2c2827c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a666bf79c451f17b96da27e2fc2c2827c">AST_RTP_DTLS_SETUP_ACTPASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00516">rtp_engine.h:516</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a4476b1a5eb13c5d9a359aac69d44e49f"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a4476b1a5eb13c5d9a359aac69d44e49f">ast_rtp_engine::activate</a></div><div class="ttdeci">int(* activate)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00673">rtp_engine.h:673</a></div></div>
<div class="ttc" id="format__cache_8h_html_a563a4f351a86128f8a40757c9456ec4e"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a563a4f351a86128f8a40757c9456ec4e">ast_format_g726</a></div><div class="ttdeci">struct ast_format * ast_format_g726</div><div class="ttdoc">Built-in cached g726 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00116">format_cache.c:116</a></div></div>
<div class="ttc" id="structast__manager__event__blob_html"><div class="ttname"><a href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a></div><div class="ttdoc">Struct containing info for an AMI event to send out. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00491">manager.h:491</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html">ast_rtp_rtcp_report</a></div><div class="ttdoc">An object that represents data sent during a SR/RR RTCP report. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00331">rtp_engine.h:331</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a9fa9778383fb8fefa620b9db4da22268"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a9fa9778383fb8fefa620b9db4da22268">ast_rtp_codecs_payloads_initialize</a></div><div class="ttdeci">int ast_rtp_codecs_payloads_initialize(struct ast_rtp_codecs *codecs)</div><div class="ttdoc">Initialize an RTP codecs structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00958">rtp_engine.c:958</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a2c14b23dc2a76aa9ae9a9de210527eb4"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a2c14b23dc2a76aa9ae9a9de210527eb4">ast_rtp_instance_stats::local_minrxploss</a></div><div class="ttdeci">double local_minrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00406">rtp_engine.h:406</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a7f3a0b0d420584f13574e0741c4f96ab"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a7f3a0b0d420584f13574e0741c4f96ab">ast_rtp_instance_stats::local_minjitter</a></div><div class="ttdeci">double local_minjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00386">rtp_engine.h:386</a></div></div>
<div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ae5fe3bd0559594353c0e168863d7b5a3"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ae5fe3bd0559594353c0e168863d7b5a3">ast_rtp_instance_extmap_clear</a></div><div class="ttdeci">void ast_rtp_instance_extmap_clear(struct ast_rtp_instance *instance)</div><div class="ttdoc">Clear negotiated RTP extension information. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00862">rtp_engine.c:862</a></div></div>
<div class="ttc" id="lock_8h_html_a7330ac9d36b05bad68b188c2dcfa42d7"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a></div><div class="ttdeci">#define ast_rwlock_rdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00233">lock.h:233</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00036">format.h:36</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_add142521845774a8b3cbf6ba2693aeff"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#add142521845774a8b3cbf6ba2693aeff">ast_rtp_engine_unregister</a></div><div class="ttdeci">int ast_rtp_engine_unregister(struct ast_rtp_engine *engine)</div><div class="ttdoc">Unregister an RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00364">rtp_engine.c:364</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structast__rtp__mime__type_html_a4fbccdeeb518e61f3b37a89484f8c347"><div class="ttname"><a href="../../d8/d0d/structast__rtp__mime__type.html#a4fbccdeeb518e61f3b37a89484f8c347">ast_rtp_mime_type::type</a></div><div class="ttdeci">char type[16]</div><div class="ttdoc">The media type. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00255">rtp_engine.c:255</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_af1b542dea88e6cb9b611816cd9917c90"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#af1b542dea88e6cb9b611816cd9917c90">ast_rtp_engine::bundle</a></div><div class="ttdeci">int(* bundle)(struct ast_rtp_instance *child, struct ast_rtp_instance *parent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00685">rtp_engine.h:685</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a80375839a4de919dd2024ee65251ad0d"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a80375839a4de919dd2024ee65251ad0d">mime_types_len</a></div><div class="ttdeci">static int mime_types_len</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00262">rtp_engine.c:262</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_af283fac38e91cd5d6026beb0d9e663d8"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#af283fac38e91cd5d6026beb0d9e663d8">ast_rtp_red_buffer</a></div><div class="ttdeci">int ast_rtp_red_buffer(struct ast_rtp_instance *instance, struct ast_frame *frame)</div><div class="ttdoc">Buffer a frame in an RTP instance for RED. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02432">rtp_engine.c:2432</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771306b3301213eb2f0a409d3d0f42df"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771306b3301213eb2f0a409d3d0f42df">ast_format_g723</a></div><div class="ttdeci">struct ast_format * ast_format_g723</div><div class="ttdoc">Built-in cached g723.1 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00151">format_cache.c:151</a></div></div>
<div class="ttc" id="format__cache_8h_html_a4a73603085e82e6e49e1cb58a7b37475"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a4a73603085e82e6e49e1cb58a7b37475">ast_format_siren14</a></div><div class="ttdeci">struct ast_format * ast_format_siren14</div><div class="ttdoc">Built-in cached siren14 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00216">format_cache.c:216</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a8f77bb51957abfc5f13bdedaa8c77950"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a8f77bb51957abfc5f13bdedaa8c77950">ast_rtp_engine::prop_set</a></div><div class="ttdeci">void(* prop_set)(struct ast_rtp_instance *instance, enum ast_rtp_property property, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00641">rtp_engine.h:641</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378faf8772548ca3d011625888eb38c4511e4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faf8772548ca3d011625888eb38c4511e4">AST_RTP_INSTANCE_STAT_ALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00182">rtp_engine.h:182</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a4de9fa1bec1d70595a4b04cb2e13dec1"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a4de9fa1bec1d70595a4b04cb2e13dec1">ast_rtp_engine::payload_set</a></div><div class="ttdeci">void(* payload_set)(struct ast_rtp_instance *instance, int payload, int asterisk_format, struct ast_format *format, int code)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00643">rtp_engine.h:643</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_ae91dad65f553f7afebe4af507803bc7f"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a></div><div class="ttdeci">unsigned int cos</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l00352">chan_iax2.c:352</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a498e57c534834bb98b09614a139a4283"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a498e57c534834bb98b09614a139a4283">ast_rtp_instance_set_keepalive</a></div><div class="ttdeci">void ast_rtp_instance_set_keepalive(struct ast_rtp_instance *instance, int interval)</div><div class="ttdoc">Set the RTP keepalive interval. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02680">rtp_engine.c:2680</a></div></div>
<div class="ttc" id="json_8h_html_a0ca956b7df20127f7e38993c3c06cb2c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a></div><div class="ttdeci">struct ast_json * ast_json_ref(struct ast_json *value)</div><div class="ttdoc">Increase refcount on value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00067">json.c:67</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_aafd2280a256174629b2fe05b4ffaaab1"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#aafd2280a256174629b2fe05b4ffaaab1">unref_instance_cond</a></div><div class="ttdeci">static void unref_instance_cond(struct ast_rtp_instance **instance)</div><div class="ttdoc">Conditionally unref an rtp instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02226">rtp_engine.c:2226</a></div></div>
<div class="ttc" id="astobj2_8h_html_abd9eeaf9633f630d7588f6a7de7b9fbe"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#abd9eeaf9633f630d7588f6a7de7b9fbe">ao2_t_cleanup</a></div><div class="ttdeci">#define ao2_t_cleanup(obj, tag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01959">astobj2.h:1959</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a95ccef8388e3b0e9c9639e393d4081b6"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6">ast_rtp_options</a></div><div class="ttdeci">ast_rtp_options</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00142">rtp_engine.h:142</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_a0bfcc94658a3213a7e7295e87b72618a"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#a0bfcc94658a3213a7e7295e87b72618a">ast_rtp_engine_dtls::set_configuration</a></div><div class="ttdeci">int(* set_configuration)(struct ast_rtp_instance *instance, const struct ast_rtp_dtls_cfg *dtls_cfg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00572">rtp_engine.h:572</a></div></div>
<div class="ttc" id="format_8h_html_a0aba6e17ced3e85e838ea097baa5ddc7"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a></div><div class="ttdeci">enum ast_media_type ast_format_get_type(const struct ast_format *format)</div><div class="ttdoc">Get the media type of a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00354">format.c:354</a></div></div>
<div class="ttc" id="lock_8h_html"><div class="ttname"><a href="../../dd/d42/lock_8h.html">lock.h</a></div><div class="ttdoc">Asterisk locking-related definitions: </div></div>
<div class="ttc" id="rtp__engine_8c_html_aea2fa83e8348c478fcb44abfb3812b6c"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#aea2fa83e8348c478fcb44abfb3812b6c">rtp_instance_set_incoming_source_address_nolock</a></div><div class="ttdeci">static void rtp_instance_set_incoming_source_address_nolock(struct ast_rtp_instance *instance, const struct ast_sockaddr *address)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00597">rtp_engine.c:597</a></div></div>
<div class="ttc" id="stasis__channels_8h_html"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html">stasis_channels.h</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_aabc9d2a90ef7a2f9e71928d8afeaf696"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#aabc9d2a90ef7a2f9e71928d8afeaf696">find_unused_payload_in_range</a></div><div class="ttdeci">static int find_unused_payload_in_range(const struct ast_rtp_codecs *codecs, int start, int end, struct ast_rtp_payload_type *ignore[])</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01667">rtp_engine.c:1667</a></div></div>
<div class="ttc" id="asterisk_8h_html"><div class="ttname"><a href="../../db/db2/asterisk_8h.html">asterisk.h</a></div><div class="ttdoc">Asterisk main include file. File version handling, generic pbx functions. </div></div>
<div class="ttc" id="rtp__engine_8c_html_acec3992982f194e41ab6a2e4c218af83"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#acec3992982f194e41ab6a2e4c218af83">ast_rtp_codecs_payloads_set_rtpmap_type_rate</a></div><div class="ttdeci">int ast_rtp_codecs_payloads_set_rtpmap_type_rate(struct ast_rtp_codecs *codecs, struct ast_rtp_instance *instance, int pt, char *mimetype, char *mimesubtype, enum ast_rtp_options options, unsigned int sample_rate)</div><div class="ttdoc">Set tx payload type to a known MIME media type for a codec with a specific sample rate...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01343">rtp_engine.c:1343</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a6f85ba232050ff932d804b62e6e848cd"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a6f85ba232050ff932d804b62e6e848cd">ast_rtp_codecs_set_framing</a></div><div class="ttdeci">void ast_rtp_codecs_set_framing(struct ast_rtp_codecs *codecs, unsigned int framing)</div><div class="ttdoc">Set the framing used for a set of codecs. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01558">rtp_engine.c:1558</a></div></div>
<div class="ttc" id="structrtp__extmap_html"><div class="ttname"><a href="../../d4/dec/structrtp__extmap.html">rtp_extmap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00181">rtp_engine.c:181</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a0261ca520593a7aa95eefcbeb884e31e"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a0261ca520593a7aa95eefcbeb884e31e">ast_rtp_instance_set_stats_vars</a></div><div class="ttdeci">void ast_rtp_instance_set_stats_vars(struct ast_channel *chan, struct ast_rtp_instance *instance)</div><div class="ttdoc">Set standard statistics from an RTP instance on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02500">rtp_engine.c:2500</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0af5077f2f205afd10463fa2f98a3a8c96"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0af5077f2f205afd10463fa2f98a3a8c96">AST_RTP_EXTENSION_DIRECTION_SENDONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00775">rtp_engine.h:775</a></div></div>
<div class="ttc" id="structast__rtp__codecs_html_acfbb968d548bd319b981702f31aa89cc"><div class="ttname"><a href="../../d4/d0e/structast__rtp__codecs.html#acfbb968d548bd319b981702f31aa89cc">ast_rtp_codecs::framing</a></div><div class="ttdeci">unsigned int framing</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00713">rtp_engine.h:713</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structast__srtp__policy_html"><div class="ttname"><a href="../../d4/d86/structast__srtp__policy.html">ast_srtp_policy</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd4/res__srtp_8c_source.html#l00076">res_srtp.c:76</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="format__cache_8h_html_a519067e785497a427635d64e64dc4458"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a519067e785497a427635d64e64dc4458">ast_format_slin192</a></div><div class="ttdeci">struct ast_format * ast_format_slin192</div><div class="ttdoc">Built-in cached signed linear 192kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00081">format_cache.c:81</a></div></div>
<div class="ttc" id="structast__rtp__glue_html"><div class="ttname"><a href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00720">rtp_engine.h:720</a></div></div>
<div class="ttc" id="structast__module_html"><div class="ttname"><a href="../../d9/df5/structast__module.html">ast_module</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d96/loader_8c_source.html#l00293">loader.c:293</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ab7623ee9480eaf77b953b8d327eb9bc6"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ab7623ee9480eaf77b953b8d327eb9bc6">rtp_dtls_wrap_get_fingerprint_hash</a></div><div class="ttdeci">static enum ast_rtp_dtls_hash rtp_dtls_wrap_get_fingerprint_hash(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02978">rtp_engine.c:2978</a></div></div>
<div class="ttc" id="format__cache_8h_html_a5158dc4d004a6a49e8014abbebc8c9b1"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a5158dc4d004a6a49e8014abbebc8c9b1">ast_format_mp4</a></div><div class="ttdeci">struct ast_format * ast_format_mp4</div><div class="ttdoc">Built-in cached mp4 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00191">format_cache.c:191</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a0d1b6644a258c74b557e5227f07ff4f6"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a0d1b6644a258c74b557e5227f07ff4f6">ast_rtp_codecs_payload_set_rx</a></div><div class="ttdeci">int ast_rtp_codecs_payload_set_rx(struct ast_rtp_codecs *codecs, int code, struct ast_format *format)</div><div class="ttdoc">Set a payload code for use with a specific Asterisk format. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01923">rtp_engine.c:1923</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a39918fd433ac42184b152c86016ef139"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a39918fd433ac42184b152c86016ef139">AST_RWLIST_HEAD_STATIC</a></div><div class="ttdeci">#define AST_RWLIST_HEAD_STATIC(name, type)</div><div class="ttdoc">Defines a structure to be used to hold a read/write list of specified type, statically initialized...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00332">linkedlists.h:332</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_aa2724cd47193da754cd0ce97c5252477"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#aa2724cd47193da754cd0ce97c5252477">ast_rtp_engine::set_write_format</a></div><div class="ttdeci">int(* set_write_format)(struct ast_rtp_instance *instance, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00667">rtp_engine.h:667</a></div></div>
<div class="ttc" id="format__cache_8h_html_abd1090ebd4176d40eabbe0878c82e216"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#abd1090ebd4176d40eabbe0878c82e216">ast_format_t140_red</a></div><div class="ttdeci">struct ast_format * ast_format_t140_red</div><div class="ttdoc">Built-in cached t140 red format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00241">format_cache.c:241</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a0102aea603f46707ed8895975372dd3a"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a0102aea603f46707ed8895975372dd3a">ast_rtp_instance_get_engine</a></div><div class="ttdeci">struct ast_rtp_engine * ast_rtp_instance_get_engine(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the RTP engine in use on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02700">rtp_engine.c:2700</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a1373cdafc3d959ac6d73933f14ae6e7c"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a1373cdafc3d959ac6d73933f14ae6e7c">ast_rtp_engine::extended_prop_get</a></div><div class="ttdeci">void *(* extended_prop_get)(struct ast_rtp_instance *instance, int property)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00639">rtp_engine.h:639</a></div></div>
<div class="ttc" id="strings_8h_html"><div class="ttname"><a href="../../d6/d90/strings_8h.html">strings.h</a></div><div class="ttdoc">String manipulation functions. </div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a0517365083db736945b1d8a8d5b14781"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a0517365083db736945b1d8a8d5b14781">ast_rtp_rtcp_report_block::highest_seq_no</a></div><div class="ttdeci">unsigned int highest_seq_no</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00322">rtp_engine.h:322</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_aaae1b48769d1b65fdf03ba4d6b86bb78"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#aaae1b48769d1b65fdf03ba4d6b86bb78">ast_rtp_engine_unload_format</a></div><div class="ttdeci">int ast_rtp_engine_unload_format(struct ast_format *format)</div><div class="ttdoc">Formats requiring the use of a format attribute interface must have that interface registered in orde...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03245">rtp_engine.c:3245</a></div></div>
<div class="ttc" id="structast__srtp_html"><div class="ttname"><a href="../../d4/d11/structast__srtp.html">ast_srtp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd4/res__srtp_8c_source.html#l00065">res_srtp.c:65</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a439500472bab4c52aae4ad0b60e16d72"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a439500472bab4c52aae4ad0b60e16d72">ast_rtp_engine::dtmf_mode_get</a></div><div class="ttdeci">enum ast_rtp_dtmf_mode(* dtmf_mode_get)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00649">rtp_engine.h:649</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a8dd95cac01521e8f57c36a24930fc025"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a8dd95cac01521e8f57c36a24930fc025">rtp_dtls_wrappers</a></div><div class="ttdeci">static struct ast_rtp_engine_dtls rtp_dtls_wrappers</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02998">rtp_engine.c:2998</a></div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html_a9ff8d56644bac1d41f8039f2fde5acf2"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html#a9ff8d56644bac1d41f8039f2fde5acf2">ast_rtp_dtls_cfg::cafile</a></div><div class="ttdeci">char * cafile</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00564">rtp_engine.h:564</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a4a374edd699692e9e9467962c0dab680"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a4a374edd699692e9e9467962c0dab680">ast_rtp_engine_ice::get_password</a></div><div class="ttdeci">const char *(* get_password)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00497">rtp_engine.h:497</a></div></div>
<div class="ttc" id="codec__speex_8c_html_acac7df77df55f2a1bfd8d8d18340b773"><div class="ttname"><a href="../../dc/d23/codec__speex_8c.html#acac7df77df55f2a1bfd8d8d18340b773">quality</a></div><div class="ttdeci">static int quality</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d23/codec__speex_8c_source.html#l00062">codec_speex.c:62</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a3fec7bdf564d43850ae605139032f892"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a3fec7bdf564d43850ae605139032f892">rtp_ice_wrap_set_role</a></div><div class="ttdeci">static void rtp_ice_wrap_set_role(struct ast_rtp_instance *instance, enum ast_rtp_ice_role role)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02851">rtp_engine.c:2851</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_a59c186dfc495dd5f0b16f8df944a0a3b"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#a59c186dfc495dd5f0b16f8df944a0a3b">ast_rtp_engine_dtls::get_fingerprint</a></div><div class="ttdeci">const char *(* get_fingerprint)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00590">rtp_engine.h:590</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ab3bd1884eee257b35930744a65e07dc1"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ab3bd1884eee257b35930744a65e07dc1">ast_rtp_instance_get_quality</a></div><div class="ttdeci">char * ast_rtp_instance_get_quality(struct ast_rtp_instance *instance, enum ast_rtp_instance_stat_field field, char *buf, size_t size)</div><div class="ttdoc">Retrieve quality statistics about an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02460">rtp_engine.c:2460</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a8631c44e7160622bcbdc6aea8b449e5f"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a8631c44e7160622bcbdc6aea8b449e5f">ast_rtp_codecs_payload_code_tx</a></div><div class="ttdeci">int ast_rtp_codecs_payload_code_tx(struct ast_rtp_codecs *codecs, int asterisk_format, const struct ast_format *format, int code)</div><div class="ttdoc">Retrieve a tx mapped payload type based on whether it is an Asterisk format and the code...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01928">rtp_engine.c:1928</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a406ed314072b3029782f172649b88e48"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a406ed314072b3029782f172649b88e48">ast_rtp_engine_unregister_srtp</a></div><div class="ttdeci">void ast_rtp_engine_unregister_srtp(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02725">rtp_engine.c:2725</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_aef5d988932736b654957f46ff4360889"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#aef5d988932736b654957f46ff4360889">ast_rtp_codecs_get_framing</a></div><div class="ttdeci">unsigned int ast_rtp_codecs_get_framing(struct ast_rtp_codecs *codecs)</div><div class="ttdoc">Get the framing used for a set of codecs. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01569">rtp_engine.c:1569</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_aad7ddc8882996620f023913474ed2ef7"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#aad7ddc8882996620f023913474ed2ef7">ast_rtp_engine::sendcng</a></div><div class="ttdeci">int(* sendcng)(struct ast_rtp_instance *instance, int level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00679">rtp_engine.h:679</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_ad742aaf83d710b381c462677919a8617"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#ad742aaf83d710b381c462677919a8617">ast_rtp_instance_stats::remote_normdevjitter</a></div><div class="ttdeci">double remote_normdevjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00380">rtp_engine.h:380</a></div></div>
<div class="ttc" id="structast__rtp__mime__type_html_a3ec6ee65afc37dae29a21bec31958574"><div class="ttname"><a href="../../d8/d0d/structast__rtp__mime__type.html#a3ec6ee65afc37dae29a21bec31958574">ast_rtp_mime_type::subtype</a></div><div class="ttdeci">char subtype[64]</div><div class="ttdoc">The format type. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00257">rtp_engine.c:257</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ab5350656de626a43127eb607e58bdfa3"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ab5350656de626a43127eb607e58bdfa3">ast_rtp_codecs_payloads_set_rtpmap_type</a></div><div class="ttdeci">int ast_rtp_codecs_payloads_set_rtpmap_type(struct ast_rtp_codecs *codecs, struct ast_rtp_instance *instance, int payload, char *mimetype, char *mimesubtype, enum ast_rtp_options options)</div><div class="ttdoc">Record tx payload type information that was seen in an a=rtpmap: SDP line. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01428">rtp_engine.c:1428</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a24adb9b390491d8faf485ed22ed09646"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a24adb9b390491d8faf485ed22ed09646">ast_rtp_engine::write</a></div><div class="ttdeci">int(* write)(struct ast_rtp_instance *instance, struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00624">rtp_engine.h:624</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a88677a524d7f3d7201f5d2f773cfc8ffade0794251a0a4f3bfb157bb67e120290"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffade0794251a0a4f3bfb157bb67e120290">AST_RTP_EXTENSION_UNSUPPORTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00544">rtp_engine.h:544</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_affbc766683c7cb1e334faf62a0e4b0a3"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#affbc766683c7cb1e334faf62a0e4b0a3">mime_types_lock</a></div><div class="ttdeci">static ast_rwlock_t mime_types_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00261">rtp_engine.c:261</a></div></div>
<div class="ttc" id="translate_8h_html"><div class="ttname"><a href="../../db/d39/translate_8h.html">translate.h</a></div><div class="ttdoc">Support for translation of data formats. translate.c. </div></div>
<div class="ttc" id="rtp__engine_8c_html_a576dcfebba6ad2a0d3bf3a97119cd953"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a576dcfebba6ad2a0d3bf3a97119cd953">ast_rtp_codecs_get_stream_type</a></div><div class="ttdeci">enum ast_media_type ast_rtp_codecs_get_stream_type(struct ast_rtp_codecs *codecs)</div><div class="ttdoc">Determine the type of RTP stream media from the codecs mapped. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01460">rtp_engine.c:1460</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="lock_8h_html_ab1d35b9611e8b5143ec695ead1b5d8d1"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab1d35b9611e8b5143ec695ead1b5d8d1">ast_rwlock_destroy</a></div><div class="ttdeci">#define ast_rwlock_destroy(rwlock)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00231">lock.h:231</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a882bf438d813b4a9d27d8effcd4ad174"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a882bf438d813b4a9d27d8effcd4ad174">ast_rtp_engine_init</a></div><div class="ttdeci">int ast_rtp_engine_init(void)</div><div class="ttdoc">initializes the rtp engine arrays </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03622">rtp_engine.c:3622</a></div></div>
<div class="ttc" id="time_8h_html"><div class="ttname"><a href="../../de/df7/time_8h.html">time.h</a></div><div class="ttdoc">Time-related functions and macros. </div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="f2c_8h_html_a27c1bdb0cba23a9db2a51eed7b3b2ac1"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a></div><div class="ttdeci">char * address</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00059">f2c.h:59</a></div></div>
<div class="ttc" id="format_8h_html_ad6d7ad5ecec9ae8635d1a1c2de0505bd"><div class="ttname"><a href="../../d0/d0a/format_8h.html#ad6d7ad5ecec9ae8635d1a1c2de0505bd">ast_format_get_codec_name</a></div><div class="ttdeci">const char * ast_format_get_codec_name(const struct ast_format *format)</div><div class="ttdoc">Get the codec name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00339">format.c:339</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a1dd08b3c373d60d9eb21ac6994f3e81d"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a1dd08b3c373d60d9eb21ac6994f3e81d">ast_rtp_instance_early_bridge_make_compatible</a></div><div class="ttdeci">void ast_rtp_instance_early_bridge_make_compatible(struct ast_channel *c_dst, struct ast_channel *c_src)</div><div class="ttdoc">Make two channels compatible for early bridging. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02251">rtp_engine.c:2251</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="stasis_8h_html_a70cd046d8e3fd50de5c51aecb2830d2a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_INIT(name)</div><div class="ttdoc">Boiler-plate messaging macro for initializing message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01501">stasis.h:1501</a></div></div>
<div class="ttc" id="format__cache_8h_html_a42190be4a7a35f2d316b8e4f76e9c82e"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a42190be4a7a35f2d316b8e4f76e9c82e">ast_format_slin32</a></div><div class="ttdeci">struct ast_format * ast_format_slin32</div><div class="ttdoc">Built-in cached signed linear 32kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00061">format_cache.c:61</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga42aa0e60fa1c82a53fd1156b14aef793"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga42aa0e60fa1c82a53fd1156b14aef793">ast_debug_category_rtp_id</a></div><div class="ttdeci">uintmax_t ast_debug_category_rtp_id(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03538">rtp_engine.c:3538</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa2785c5990a086943fea750c980abbc3"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3">ast_transport</a></div><div class="ttdeci">ast_transport</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00059">netsock2.h:59</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a4f72a2dbb356fdbef1620f3d50563d35"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a4f72a2dbb356fdbef1620f3d50563d35">rtp_engine_shutdown</a></div><div class="ttdeci">static void rtp_engine_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03585">rtp_engine.c:3585</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a16d87c90a0ee4dea2d08e9907a0e800c"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a16d87c90a0ee4dea2d08e9907a0e800c">ast_rtp_instance_get_cname</a></div><div class="ttdeci">const char * ast_rtp_instance_get_cname(struct ast_rtp_instance *rtp)</div><div class="ttdoc">Retrieve the CNAME used in RTCP SDES items. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03791">rtp_engine.c:3791</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a98de723ea94b1a4f04b08728c0e97a69"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a98de723ea94b1a4f04b08728c0e97a69">ast_rtp_mime_types</a></div><div class="ttdeci">static struct ast_rtp_mime_type ast_rtp_mime_types[128]</div></div>
<div class="ttc" id="format__cache_8h_html_a6b2748bd8e16afa053d89eeaea268dcd"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a6b2748bd8e16afa053d89eeaea268dcd">ast_format_slin96</a></div><div class="ttdeci">struct ast_format * ast_format_slin96</div><div class="ttdoc">Built-in cached signed linear 96kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00076">format_cache.c:76</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_ab579676bdd804847f84450704683249d"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#ab579676bdd804847f84450704683249d">ast_rtp_engine::read</a></div><div class="ttdeci">struct ast_frame *(* read)(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00661">rtp_engine.h:661</a></div></div>
<div class="ttc" id="format__cache_8h_html_a568c3f5838b53c38f11996dbe5ff5785"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a568c3f5838b53c38f11996dbe5ff5785">ast_format_ulaw</a></div><div class="ttdeci">struct ast_format * ast_format_ulaw</div><div class="ttdoc">Built-in cached ulaw format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00086">format_cache.c:86</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga8de49f8c81c23a3973b4bbfc5f9da89b"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga8de49f8c81c23a3973b4bbfc5f9da89b">ast_debug_category_dtls_packet_id</a></div><div class="ttdeci">uintmax_t ast_debug_category_dtls_packet_id(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03573">rtp_engine.c:3573</a></div></div>
<div class="ttc" id="stasis_8h_html"><div class="ttname"><a href="../../dd/d79/stasis_8h.html">stasis.h</a></div><div class="ttdoc">Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. </div></div>
<div class="ttc" id="rtp__engine_8c_html_a2d639001d5f55f96e7795bf3dd7bd6bc"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a2d639001d5f55f96e7795bf3dd7bd6bc">ast_rtp_engine_register_srtp</a></div><div class="ttdeci">int ast_rtp_engine_register_srtp(struct ast_srtp_res *srtp_res, struct ast_srtp_policy_res *policy_res)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02710">rtp_engine.c:2710</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga4355793892bdf43a0a5852220cf0b0d2"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga4355793892bdf43a0a5852220cf0b0d2">ast_rtp_instance_set_schedid</a></div><div class="ttdeci">void ast_rtp_instance_set_schedid(struct ast_rtp_instance *instance, int id)</div><div class="ttdoc">Set the schedid for RTCP. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03891">rtp_engine.c:3891</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a41960a911bf90300e198a29deac4a02f"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a41960a911bf90300e198a29deac4a02f">ast_rtp_instance_stats::normdevrtt</a></div><div class="ttdeci">double normdevrtt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00418">rtp_engine.h:418</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a86b7a0938f30bf5f9cafa79984a9e776"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a86b7a0938f30bf5f9cafa79984a9e776">ast_rtp_instance_extmap_get_extension</a></div><div class="ttdeci">enum ast_rtp_extension ast_rtp_instance_extmap_get_extension(struct ast_rtp_instance *instance, int id)</div><div class="ttdoc">Retrieve the extension for an RTP extension id. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00910">rtp_engine.c:910</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_aaa3062109825b3dff6b02505d4e44a38"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#aaa3062109825b3dff6b02505d4e44a38">AST_RTP_PT_LAST_STATIC</a></div><div class="ttdeci">#define AST_RTP_PT_LAST_STATIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00089">rtp_engine.h:89</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a6c8b04702bbcf8c030d6c16e27e7bd1c"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a6c8b04702bbcf8c030d6c16e27e7bd1c">ast_rtp_instance_stats::local_maxrxploss</a></div><div class="ttdeci">double local_maxrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00404">rtp_engine.h:404</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a787b4f1be4b07fb171fdce9e9c54a420"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a787b4f1be4b07fb171fdce9e9c54a420">rtp_codecs_payloads_copy_rx</a></div><div class="ttdeci">static void rtp_codecs_payloads_copy_rx(struct ast_rtp_codecs *src, struct ast_rtp_codecs *dest, struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01108">rtp_engine.c:1108</a></div></div>
<div class="ttc" id="utils_8h_html_a34ed7a76195d923c099606f796294a3b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a34ed7a76195d923c099606f796294a3b">ast_file_is_readable</a></div><div class="ttdeci">int ast_file_is_readable(const char *filename)</div><div class="ttdoc">Test that a file exists and is readable by the effective user. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02855">main/utils.c:2855</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_aff4ec25e589bed0b47f2fa58e9b020f2"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#aff4ec25e589bed0b47f2fa58e9b020f2">ast_rtp_instance_stats::remote_stdevjitter</a></div><div class="ttdeci">double remote_stdevjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00382">rtp_engine.h:382</a></div></div>
<div class="ttc" id="json_8h_html_ae2cc29409ec389e8feaf38ec3a585d83"><div class="ttname"><a href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a></div><div class="ttdeci">AST_JSON_INT_T ast_json_int_t</div><div class="ttdoc">Primarily used to cast when packing to an &quot;I&quot; type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l00087">json.h:87</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ab4e151b8ad1b6073128471f3e65671b3"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ab4e151b8ad1b6073128471f3e65671b3">rtp_codecs_payload_replace_rx</a></div><div class="ttdeci">static void rtp_codecs_payload_replace_rx(struct ast_rtp_codecs *codecs, int payload, struct ast_rtp_payload_type *new_type)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01079">rtp_engine.c:1079</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_af52b0487a5d5d25cf8d6e73e4abc78b7"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#af52b0487a5d5d25cf8d6e73e4abc78b7">instance_destructor</a></div><div class="ttdeci">static void instance_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00423">rtp_engine.c:423</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a7531caca0d99015491d75d8556807aab"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a7531caca0d99015491d75d8556807aab">rtp_codecs_find_non_primary_dynamic_rx</a></div><div class="ttdeci">static int rtp_codecs_find_non_primary_dynamic_rx(struct ast_rtp_codecs *codecs)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01778">rtp_engine.c:1778</a></div></div>
<div class="ttc" id="structast__rtp__engine__test_html_ad499ee617ec9d9be0f4bc339742a07e7"><div class="ttname"><a href="../../d5/d98/structast__rtp__engine__test.html#ad499ee617ec9d9be0f4bc339742a07e7">ast_rtp_engine_test::sdes_received</a></div><div class="ttdeci">int sdes_received</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00601">rtp_engine.h:601</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ab410f7a395286cc30ff0f339747eb6ff"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ab410f7a395286cc30ff0f339747eb6ff">ast_rtp_engine_register2</a></div><div class="ttdeci">int ast_rtp_engine_register2(struct ast_rtp_engine *engine, struct ast_module *module)</div><div class="ttdoc">Register an RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00330">rtp_engine.c:330</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a6d9606ad3b3ed04e6e98df5fcb4409f1"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a6d9606ad3b3ed04e6e98df5fcb4409f1">ast_rtp_codecs_get_payload_format</a></div><div class="ttdeci">struct ast_format * ast_rtp_codecs_get_payload_format(struct ast_rtp_codecs *codecs, int payload)</div><div class="ttdoc">Retrieve the actual ast_format stored on the codecs structure for a specific tx payload type...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01537">rtp_engine.c:1537</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a887918839240a36d118b4e1cb46a4de9"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a887918839240a36d118b4e1cb46a4de9">ast_rtp_instance_stats::txcount</a></div><div class="ttdeci">unsigned int txcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00368">rtp_engine.h:368</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a3978338bfe35df207f003782e428fb0c"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a3978338bfe35df207f003782e428fb0c">ast_rtp_instance_stop</a></div><div class="ttdeci">void ast_rtp_instance_stop(struct ast_rtp_instance *instance)</div><div class="ttdoc">Stop an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02183">rtp_engine.c:2183</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ada0c634309987937570c4015e8228cb0"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ada0c634309987937570c4015e8228cb0">rtp_dtls_wrap_get_fingerprint</a></div><div class="ttdeci">static const char * rtp_dtls_wrap_get_fingerprint(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02988">rtp_engine.c:2988</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a3a02b2ea9f0ccfd0d46e4547f3b8fa30"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a3a02b2ea9f0ccfd0d46e4547f3b8fa30">ast_rtp_engine::stop</a></div><div class="ttdeci">void(* stop)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00626">rtp_engine.h:626</a></div></div>
<div class="ttc" id="codec_8h_html_a97df2e6b65823085173625553d2e06c5"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a></div><div class="ttdeci">const char * ast_codec_media_type2str(enum ast_media_type type)</div><div class="ttdoc">Conversion function to take a media type and turn it into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00347">codec.c:347</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a5e1a8da7b40642861f636a3e2664fa71"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a5e1a8da7b40642861f636a3e2664fa71">rtp_ice_wrap_change_components</a></div><div class="ttdeci">static void rtp_ice_wrap_change_components(struct ast_rtp_instance *instance, int num_components)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02869">rtp_engine.c:2869</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a09feabe6b52ba3f674fc0cfed7062a85"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a09feabe6b52ba3f674fc0cfed7062a85">ast_rtp_instance_get_incoming_source_address</a></div><div class="ttdeci">void ast_rtp_instance_get_incoming_source_address(struct ast_rtp_instance *instance, struct ast_sockaddr *address)</div><div class="ttdoc">Get the incoming source address of the remote endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00665">rtp_engine.c:665</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ad47d1bd43ea874c9dc5564d85588a99a"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a></div><div class="ttdeci">const char * ast_rtp_lookup_mime_subtype2(const int asterisk_format, const struct ast_format *format, int code, enum ast_rtp_options options)</div><div class="ttdoc">Retrieve mime subtype information on a payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01992">rtp_engine.c:1992</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a48500e6c95b738b6d442251aad1760d0"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a48500e6c95b738b6d442251aad1760d0">ast_rtp_engine::dtmf_end</a></div><div class="ttdeci">int(* dtmf_end)(struct ast_rtp_instance *instance, char digit)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00630">rtp_engine.h:630</a></div></div>
<div class="ttc" id="format__cache_8h_html_af156da16afb1d769b42263c03feb4a80"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#af156da16afb1d769b42263c03feb4a80">ast_format_jpeg</a></div><div class="ttdeci">struct ast_format * ast_format_jpeg</div><div class="ttdoc">Built-in cached jpeg format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00206">format_cache.c:206</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a2e124ac4d0f75405353087b1067594a1"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a2e124ac4d0f75405353087b1067594a1">rtp_ice_wrap_stop</a></div><div class="ttdeci">static void rtp_ice_wrap_stop(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02807">rtp_engine.c:2807</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a62db59fc4bbbc0dc2d2db79a25c784d9"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a62db59fc4bbbc0dc2d2db79a25c784d9">rtp_dtls_wrap_stop</a></div><div class="ttdeci">static void rtp_dtls_wrap_stop(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02928">rtp_engine.c:2928</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a59687b6ec866bfca8d8c1d6ab1bef7ad"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a59687b6ec866bfca8d8c1d6ab1bef7ad">ast_rtp_rtcp_report::reception_report_count</a></div><div class="ttdeci">unsigned short reception_report_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00332">rtp_engine.h:332</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_af0adb620e28a15749fe5bf4f6912f00d"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#af0adb620e28a15749fe5bf4f6912f00d">ast_rtp_instance_get_ssrc</a></div><div class="ttdeci">unsigned int ast_rtp_instance_get_ssrc(struct ast_rtp_instance *rtp)</div><div class="ttdoc">Retrieve the local SSRC value that we will be using. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03778">rtp_engine.c:3778</a></div></div>
<div class="ttc" id="format__cache_8h_html_ad230bc99f5cd46e56e97d32941ba5b23"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#ad230bc99f5cd46e56e97d32941ba5b23">ast_format_g726_aal2</a></div><div class="ttdeci">struct ast_format * ast_format_g726_aal2</div><div class="ttdoc">Built-in cached g726 aal2 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00121">format_cache.c:121</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a71281cffb0ab0658839b8da1296d06b6"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a71281cffb0ab0658839b8da1296d06b6">ast_rtp_instance_get_bridged</a></div><div class="ttdeci">struct ast_rtp_instance * ast_rtp_instance_get_bridged(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the other RTP instance that an instance is bridged to. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02234">rtp_engine.c:2234</a></div></div>
<div class="ttc" id="stasis_8h_html_a31197e193b1dfd6c122ff6d7c7f6b3fa"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_CLEANUP(name)</div><div class="ttdoc">Boiler-plate messaging macro for cleaning up message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01523">stasis.h:1523</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a4ec2aff820c7f69ef0f436c58105bd16"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a4ec2aff820c7f69ef0f436c58105bd16">rtp_extmap_negotiate_direction</a></div><div class="ttdeci">static enum ast_rtp_extension_direction rtp_extmap_negotiate_direction(enum ast_rtp_extension_direction ours, enum ast_rtp_extension_direction theirs)</div><div class="ttdoc">Helper function which negotiates two RTP extension directions to get our current direction. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00790">rtp_engine.c:790</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a60ba31659303a153a619939ab7b3c74c"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a60ba31659303a153a619939ab7b3c74c">ast_rtp_rtcp_report::report_block</a></div><div class="ttdeci">struct ast_rtp_rtcp_report_block * report_block[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00344">rtp_engine.h:344</a></div></div>
<div class="ttc" id="structast__rtp__engine__test_html_a9ed17e77f1720e944b2e0a6870e7b1c0"><div class="ttname"><a href="../../d5/d98/structast__rtp__engine__test.html#a9ed17e77f1720e944b2e0a6870e7b1c0">ast_rtp_engine_test::send_report</a></div><div class="ttdeci">int send_report</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00599">rtp_engine.h:599</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a754403af0ba6403237fadb9b6294ca5f"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a754403af0ba6403237fadb9b6294ca5f">ast_rtp_instance_stats::rxploss</a></div><div class="ttdeci">unsigned int rxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00394">rtp_engine.h:394</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a008c70da51a5d4e337f5857dc14e3ef4a14e80b1c389413cadf12354d06121ab2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a14e80b1c389413cadf12354d06121ab2">AST_RTP_DTLS_SETUP_PASSIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00515">rtp_engine.h:515</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a787f82faccb7c1f40a2539a14855601b"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a></div><div class="ttdeci">static const char desc[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00073">cdr_mysql.c:73</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a5f8da197d19dc5ecd5457eed351f3311"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a5f8da197d19dc5ecd5457eed351f3311">ast_rtp_codecs_payload_formats</a></div><div class="ttdeci">void ast_rtp_codecs_payload_formats(struct ast_rtp_codecs *codecs, struct ast_format_cap *astformats, int *nonastformats)</div><div class="ttdoc">Retrieve all formats that were found. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01580">rtp_engine.c:1580</a></div></div>
<div class="ttc" id="structast__rtp__glue_html_a6ee109780d8fa72a8b5e87471330d053"><div class="ttname"><a href="../../d8/dc9/structast__rtp__glue.html#a6ee109780d8fa72a8b5e87471330d053">ast_rtp_glue::update_peer</a></div><div class="ttdeci">int(* update_peer)(struct ast_channel *chan, struct ast_rtp_instance *instance, struct ast_rtp_instance *vinstance, struct ast_rtp_instance *tinstance, const struct ast_format_cap *cap, int nat_active)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00756">rtp_engine.h:756</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a2a2d35167e5880fdd5ec8d7df44f18b1"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a2a2d35167e5880fdd5ec8d7df44f18b1">ast_rtp_instance_get_prop</a></div><div class="ttdeci">int ast_rtp_instance_get_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property)</div><div class="ttdoc">Get the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00716">rtp_engine.c:716</a></div></div>
<div class="ttc" id="codec_8h_html"><div class="ttname"><a href="../../d1/d16/codec_8h.html">codec.h</a></div><div class="ttdoc">Codec API. </div></div>
<div class="ttc" id="structast__rtp__engine_html_a93f284b9dd55aeb2556b3bc4c2227ff1"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a93f284b9dd55aeb2556b3bc4c2227ff1">ast_rtp_engine::cname_get</a></div><div class="ttdeci">const char *(* cname_get)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00683">rtp_engine.h:683</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a0cff5eb6a29ecb54fe5589a48556bfac"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a0cff5eb6a29ecb54fe5589a48556bfac">ast_rtp_instance_dtmf_mode_get</a></div><div class="ttdeci">enum ast_rtp_dtmf_mode ast_rtp_instance_dtmf_mode_get(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the DTMF mode of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02137">rtp_engine.c:2137</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a1e3114fe121ef4be68e383f0dd6d21cd"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a1e3114fe121ef4be68e383f0dd6d21cd">rtp_ice_wrappers</a></div><div class="ttdeci">static struct ast_rtp_engine_ice rtp_ice_wrappers</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02877">rtp_engine.c:2877</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a48426638ead592908e3ac2ce173fd02d"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a48426638ead592908e3ac2ce173fd02d">ast_rtp_engine::change_source</a></div><div class="ttdeci">void(* change_source)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00635">rtp_engine.h:635</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a5c8a10cb1bfc8b9fc882eac1cb03adb9"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a5c8a10cb1bfc8b9fc882eac1cb03adb9">ast_rtp_engine_ice::change_components</a></div><div class="ttdeci">void(* change_components)(struct ast_rtp_instance *instance, int num_components)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00509">rtp_engine.h:509</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a90085feb745721b26596e6142738bc1e"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a90085feb745721b26596e6142738bc1e">ast_rtp_engine_ice::add_remote_candidate</a></div><div class="ttdeci">void(* add_remote_candidate)(struct ast_rtp_instance *instance, const struct ast_rtp_engine_ice_candidate *candidate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00489">rtp_engine.h:489</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_af2249bb26050979217a8946885b57508"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#af2249bb26050979217a8946885b57508">rtcp_report_to_json</a></div><div class="ttdeci">static struct ast_json * rtcp_report_to_json(struct stasis_message *msg, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03387">rtp_engine.c:3387</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_abc953dca5930a67736d6cd8f72353794"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#abc953dca5930a67736d6cd8f72353794">ast_rtp_instance_stats::rtt</a></div><div class="ttdeci">double rtt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00412">rtp_engine.h:412</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a74e6eaa4ef93061c27d5fd9ae9991466"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a74e6eaa4ef93061c27d5fd9ae9991466">rtp_codecs_payloads_copy_tx</a></div><div class="ttdeci">static void rtp_codecs_payloads_copy_tx(struct ast_rtp_codecs *src, struct ast_rtp_codecs *dest, struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01193">rtp_engine.c:1193</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faa5d685dc2e85a3fbfad4ed846dbbd268">AST_RTP_INSTANCE_STAT_COMBINED_JITTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00210">rtp_engine.h:210</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a1d4b04f67f8597dca5139a54483954f3"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a1d4b04f67f8597dca5139a54483954f3">ast_rtp_instance_get_and_cmp_local_address</a></div><div class="ttdeci">int ast_rtp_instance_get_and_cmp_local_address(struct ast_rtp_instance *instance, struct ast_sockaddr *address)</div><div class="ttdoc">Get the address of the local endpoint that we are sending RTP to, comparing its address to another...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00629">rtp_engine.c:629</a></div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html_a6005f11af6a60f4169876fcd075595ca"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html#a6005f11af6a60f4169876fcd075595ca">ast_rtp_dtls_cfg::pvtfile</a></div><div class="ttdeci">char * pvtfile</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00562">rtp_engine.h:562</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_a3a02b2ea9f0ccfd0d46e4547f3b8fa30"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#a3a02b2ea9f0ccfd0d46e4547f3b8fa30">ast_rtp_engine_dtls::stop</a></div><div class="ttdeci">void(* stop)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00576">rtp_engine.h:576</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a21f3d3372a6100f94cc23e62886131ba"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a21f3d3372a6100f94cc23e62886131ba">ast_rtp_instance_stats::remote_minjitter</a></div><div class="ttdeci">double remote_minjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00378">rtp_engine.h:378</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a70f89f44b68f2e3a34c2acf3cde93a95"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a70f89f44b68f2e3a34c2acf3cde93a95">rtp_dtls_wrap_reset</a></div><div class="ttdeci">static void rtp_dtls_wrap_reset(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02935">rtp_engine.c:2935</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a2f2313188a4ac6b917040f2589723c95"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a2f2313188a4ac6b917040f2589723c95">rtp_ice_wrap_add_remote_candidate</a></div><div class="ttdeci">static void rtp_ice_wrap_add_remote_candidate(struct ast_rtp_instance *instance, const struct ast_rtp_engine_ice_candidate *candidate)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02793">rtp_engine.c:2793</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a039329c34af438a54c6c4f3ee8abe0f5"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a039329c34af438a54c6c4f3ee8abe0f5">ast_rtp_lookup_sample_rate2</a></div><div class="ttdeci">unsigned int ast_rtp_lookup_sample_rate2(int asterisk_format, const struct ast_format *format, int code)</div><div class="ttdoc">Get the sample rate associated with known RTP payload types. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02022">rtp_engine.c:2022</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ae220d79c908ae7f462a6fb57365afc89"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ae220d79c908ae7f462a6fb57365afc89">ast_rtp_engine_load_format</a></div><div class="ttdeci">int ast_rtp_engine_load_format(struct ast_format *format)</div><div class="ttdoc">Custom formats declared in codecs.conf at startup must be communicated to the rtp_engine so their mim...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03229">rtp_engine.c:3229</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00162">rtp_engine.h:162</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a88677a524d7f3d7201f5d2f773cfc8ff"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ff">ast_rtp_extension</a></div><div class="ttdeci">ast_rtp_extension</div><div class="ttdoc">Known RTP extensions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00542">rtp_engine.h:542</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html">ast_rtp_rtcp_report_block</a></div><div class="ttdoc">A report block within a SR/RR report. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00316">rtp_engine.h:316</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a484c5279646a0804e4beba6b3f0828c9"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a484c5279646a0804e4beba6b3f0828c9">ast_rtp_instance_stats::stdevrtt</a></div><div class="ttdeci">double stdevrtt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00420">rtp_engine.h:420</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ac3c5f764f4d55ef737a57f7e924a1ce6"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ac3c5f764f4d55ef737a57f7e924a1ce6">rtcp_report_to_ami</a></div><div class="ttdeci">static struct ast_manager_event_blob * rtcp_report_to_ami(struct stasis_message *msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03297">rtp_engine.c:3297</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a77f59605d15d7dfc53e0df12352b8235"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a></div><div class="ttdeci">void ast_rtp_instance_set_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property, int value)</div><div class="ttdoc">Set the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00705">rtp_engine.c:705</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga122d01a77f8d60e32d53135e26cccd6a"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga122d01a77f8d60e32d53135e26cccd6a">ast_debug_category_rtp_packet_id</a></div><div class="ttdeci">uintmax_t ast_debug_category_rtp_packet_id(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03545">rtp_engine.c:3545</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_abcc5bda5d149e63f9e2ab630b26fd66c"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#abcc5bda5d149e63f9e2ab630b26fd66c">ast_rtp_codecs_get_payload</a></div><div class="ttdeci">struct ast_rtp_payload_type * ast_rtp_codecs_get_payload(struct ast_rtp_codecs *codecs, int payload)</div><div class="ttdoc">Retrieve rx payload mapped information by payload type. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01479">rtp_engine.c:1479</a></div></div>
<div class="ttc" id="format__cache_8h_html_a24829195ce428f34ec03d123409a65d2"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a24829195ce428f34ec03d123409a65d2">ast_format_slin24</a></div><div class="ttdeci">struct ast_format * ast_format_slin24</div><div class="ttdoc">Built-in cached signed linear 24kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00056">format_cache.c:56</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_aa5e4ba49724f6bb86be553f4c823b510"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#aa5e4ba49724f6bb86be553f4c823b510">ast_rtp_instance_stats::minrtt</a></div><div class="ttdeci">double minrtt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00416">rtp_engine.h:416</a></div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html_a8331a8443119478cd6b1daeb707a94dc"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html#a8331a8443119478cd6b1daeb707a94dc">ast_rtp_dtls_cfg::capath</a></div><div class="ttdeci">char * capath</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00565">rtp_engine.h:565</a></div></div>
<div class="ttc" id="structast__rtp__payload__type_html_a8249e9efcb541dacacaba21b243f5cdc"><div class="ttname"><a href="../../dd/de9/structast__rtp__payload__type.html#a8249e9efcb541dacacaba21b243f5cdc">ast_rtp_payload_type::asterisk_format</a></div><div class="ttdeci">int asterisk_format</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00280">rtp_engine.h:280</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a782cd4a09fbd09a2360143902434dff8"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a782cd4a09fbd09a2360143902434dff8">ast_rtp_instance_set_hold_timeout</a></div><div class="ttdeci">void ast_rtp_instance_set_hold_timeout(struct ast_rtp_instance *instance, int timeout)</div><div class="ttdoc">Set the RTP timeout value for when the instance is on hold. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02675">rtp_engine.c:2675</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a3a02b2ea9f0ccfd0d46e4547f3b8fa30"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a3a02b2ea9f0ccfd0d46e4547f3b8fa30">ast_rtp_engine_ice::stop</a></div><div class="ttdeci">void(* stop)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00493">rtp_engine.h:493</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a93f4ec51ddb2654b816f260287c6182c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a93f4ec51ddb2654b816f260287c6182c">AST_RTP_PT_FIRST_DYNAMIC</a></div><div class="ttdeci">#define AST_RTP_PT_FIRST_DYNAMIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00092">rtp_engine.h:92</a></div></div>
<div class="ttc" id="format__cap_8h_html_ad938aaf8c3c616b854d44f8bfa3bab1d"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ad938aaf8c3c616b854d44f8bfa3bab1d">ast_format_cap_set_framing</a></div><div class="ttdeci">void ast_format_cap_set_framing(struct ast_format_cap *cap, unsigned int framing)</div><div class="ttdoc">Set the global framing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00136">format_cap.c:136</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_aaffcecf59a46cd57d40b6306d40a74fa"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#aaffcecf59a46cd57d40b6306d40a74fa">ast_rtp_engine::update_source</a></div><div class="ttdeci">void(* update_source)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00633">rtp_engine.h:633</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_aee3ef7f9e53a34e743c3a95c9ca95fb4"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#aee3ef7f9e53a34e743c3a95c9ca95fb4">ast_rtp_instance_fd</a></div><div class="ttdeci">int ast_rtp_instance_fd(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdoc">Get the file descriptor for an RTP session (or RTCP) </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02192">rtp_engine.c:2192</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__rtp__payload__type_html_a421d7a48987259112c57cacca939a1fb"><div class="ttname"><a href="../../dd/de9/structast__rtp__payload__type.html#a421d7a48987259112c57cacca939a1fb">ast_rtp_payload_type::rtp_code</a></div><div class="ttdeci">int rtp_code</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00282">rtp_engine.h:282</a></div></div>
<div class="ttc" id="netsock2_8h_html_abae1b903c8f5b7639235b579a267aaab"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a></div><div class="ttdeci">int ast_sockaddr_cmp(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00388">netsock2.c:388</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a80e371ebfcc32d8af17f6312ebe72567"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a80e371ebfcc32d8af17f6312ebe72567">ast_rtp_instance_dtmf_end_with_duration</a></div><div class="ttdeci">int ast_rtp_instance_dtmf_end_with_duration(struct ast_rtp_instance *instance, char digit, unsigned int duration)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02109">rtp_engine.c:2109</a></div></div>
<div class="ttc" id="structast__rtp__codecs_html_a751b8994d39d9c1d930c663361ec24fe"><div class="ttname"><a href="../../d4/d0e/structast__rtp__codecs.html#a751b8994d39d9c1d930c663361ec24fe">ast_rtp_codecs::codecs_lock</a></div><div class="ttdeci">ast_rwlock_t codecs_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00707">rtp_engine.h:707</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="format__cache_8h_html_ad02ea989608ad5180d04cb0c4e75294c"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#ad02ea989608ad5180d04cb0c4e75294c">ast_format_g722</a></div><div class="ttdeci">struct ast_format * ast_format_g722</div><div class="ttdoc">Built-in cached g722 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00111">format_cache.c:111</a></div></div>
<div class="ttc" id="structast__rtp__payload__type_html"><div class="ttname"><a href="../../dd/de9/structast__rtp__payload__type.html">ast_rtp_payload_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00275">rtp_engine.h:275</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_abb22fd2a7290821ed320b3e60d075f21"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#abb22fd2a7290821ed320b3e60d075f21">ast_rtp_dtls_cfg_copy</a></div><div class="ttdeci">void ast_rtp_dtls_cfg_copy(const struct ast_rtp_dtls_cfg *src_cfg, struct ast_rtp_dtls_cfg *dst_cfg)</div><div class="ttdoc">Copy contents of a DTLS configuration structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03113">rtp_engine.c:3113</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fac9a089134754697a7fb1a43c14fdf518">AST_RTP_INSTANCE_STAT_COMBINED_LOSS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00188">rtp_engine.h:188</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a5afa69ff9e5e7692c4db609cb4884c53"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a5afa69ff9e5e7692c4db609cb4884c53">ast_rtp_rtcp_report::rtp_timestamp</a></div><div class="ttdeci">unsigned int rtp_timestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00337">rtp_engine.h:337</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ab88c871dd5c164b7a0a6af5e7e12d16f"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ab88c871dd5c164b7a0a6af5e7e12d16f">ast_rtp_instance_set_channel_id</a></div><div class="ttdeci">void ast_rtp_instance_set_channel_id(struct ast_rtp_instance *instance, const char *uniqueid)</div><div class="ttdoc">Set the channel that owns this RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00553">rtp_engine.c:553</a></div></div>
<div class="ttc" id="res__srtp_8c_html_a923397ffbd17f98cf3c9717a0d13e353"><div class="ttname"><a href="../../d8/dd4/res__srtp_8c.html#a923397ffbd17f98cf3c9717a0d13e353">srtp_res</a></div><div class="ttdeci">static struct ast_srtp_res srtp_res</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd4/res__srtp_8c_source.html#l00102">res_srtp.c:102</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a012b2ab9fad02a5fbf9e457a69020ade"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a012b2ab9fad02a5fbf9e457a69020ade">ast_rtp_instance_new</a></div><div class="ttdeci">struct ast_rtp_instance * ast_rtp_instance_new(const char *engine_name, struct ast_sched_context *sched, const struct ast_sockaddr *sa, void *data)</div><div class="ttdoc">Create a new RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00465">rtp_engine.c:465</a></div></div>
<div class="ttc" id="structast__srtp__res_html_abaa265c86af3e81d7c78ebe92b188120"><div class="ttname"><a href="../../d0/d5d/structast__srtp__res.html#abaa265c86af3e81d7c78ebe92b188120">ast_srtp_res::add_stream</a></div><div class="ttdeci">int(* add_stream)(struct ast_srtp *srtp, struct ast_srtp_policy *policy)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/res__srtp_8h_source.html#l00042">res_srtp.h:42</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a74f89f9e4447405765ee376e5cd3056d"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a74f89f9e4447405765ee376e5cd3056d">ast_rtp_engine::make_compatible</a></div><div class="ttdeci">int(* make_compatible)(struct ast_channel *chan0, struct ast_rtp_instance *instance0, struct ast_channel *chan1, struct ast_rtp_instance *instance1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00669">rtp_engine.h:669</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a></div><div class="ttdoc">Structure for an ICE candidate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00474">rtp_engine.h:474</a></div></div>
<div class="ttc" id="structast__rtp__mime__type_html_a1c086f81c095b0efd7a87ee29fc5ba7e"><div class="ttname"><a href="../../d8/d0d/structast__rtp__mime__type.html#a1c086f81c095b0efd7a87ee29fc5ba7e">ast_rtp_mime_type::sample_rate</a></div><div class="ttdeci">unsigned int sample_rate</div><div class="ttdoc">Expected sample rate of the /c subtype. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00259">rtp_engine.c:259</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a0afb91e7a58d2fbac8e5febe0f94069b"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a0afb91e7a58d2fbac8e5febe0f94069b">ast_rtp_codecs_payloads_destroy</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_destroy(struct ast_rtp_codecs *codecs)</div><div class="ttdoc">Destroy the contents of an RTP codecs structure (but not the structure itself) </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00974">rtp_engine.c:974</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a80baeff1bd121c3168ede2a955e9b3a2"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a80baeff1bd121c3168ede2a955e9b3a2">ast_rtp_instance_get_local_address</a></div><div class="ttdeci">void ast_rtp_instance_get_local_address(struct ast_rtp_instance *instance, struct ast_sockaddr *address)</div><div class="ttdoc">Get the local address that we are expecting RTP on. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00643">rtp_engine.c:643</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ab4fdb206838f2974bd15fc2ca1e9d366"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a></div><div class="ttdeci">static struct ast_str * password</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00077">cdr_mysql.c:77</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a0bfe6336fe7deb78148a84aef2732c7a"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a0bfe6336fe7deb78148a84aef2732c7a">ast_rtp_instance_destroy</a></div><div class="ttdeci">int ast_rtp_instance_destroy(struct ast_rtp_instance *instance)</div><div class="ttdoc">Destroy an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00458">rtp_engine.c:458</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_a507f0958e1bb4b847a4b9384e296c912"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#a507f0958e1bb4b847a4b9384e296c912">ast_rtp_engine_dtls::get_fingerprint_hash</a></div><div class="ttdeci">enum ast_rtp_dtls_hash(* get_fingerprint_hash)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00588">rtp_engine.h:588</a></div></div>
<div class="ttc" id="structast__rtp__glue_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d8/dc9/structast__rtp__glue.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_rtp_glue::type</a></div><div class="ttdeci">const char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00722">rtp_engine.h:722</a></div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html_a3d12e13733aa5172b5cb091fbf8ea478"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html#a3d12e13733aa5172b5cb091fbf8ea478">ast_rtp_dtls_cfg::cipher</a></div><div class="ttdeci">char * cipher</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00563">rtp_engine.h:563</a></div></div>
<div class="ttc" id="manager_8h_html_a3ace32eaf9a3fc2f7d15121c64bf8ecd"><div class="ttname"><a href="../../db/d45/manager_8h.html#a3ace32eaf9a3fc2f7d15121c64bf8ecd">ast_manager_event_blob_create</a></div><div class="ttdeci">struct ast_manager_event_blob * ast_manager_event_blob_create(int event_flags, const char *manager_event, const char *extra_fields_fmt,...)</div><div class="ttdoc">Construct a ast_manager_event_blob. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l09727">manager.c:9727</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a82a029e03affad8a6e1b322c0b9fe2c3"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a82a029e03affad8a6e1b322c0b9fe2c3">ast_rtp_instance_get_stats</a></div><div class="ttdeci">int ast_rtp_instance_get_stats(struct ast_rtp_instance *instance, struct ast_rtp_instance_stats *stats, enum ast_rtp_instance_stat stat)</div><div class="ttdoc">Retrieve statistics about an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02446">rtp_engine.c:2446</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_aa2bc10b6d67275811e5dba476496577b"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#aa2bc10b6d67275811e5dba476496577b">ast_rtp_rtcp_report::sender_information</a></div><div class="ttdeci">struct ast_rtp_rtcp_report::@315 sender_information</div></div>
<div class="ttc" id="structstasis__message__sanitizer_html"><div class="ttname"><a href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a></div><div class="ttdoc">Structure containing callbacks for Stasis message sanitization. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00200">stasis.h:200</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga2def1587d11cae8f25a132531073fe03"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga2def1587d11cae8f25a132531073fe03">ast_debug_category_ice_id</a></div><div class="ttdeci">uintmax_t ast_debug_category_ice_id(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03580">rtp_engine.c:3580</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7">AST_RTP_EXTENSION_DIRECTION_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00771">rtp_engine.h:771</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_a2a5215b1fcb01ef1069f91d9f42778b8"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#a2a5215b1fcb01ef1069f91d9f42778b8">ast_rtp_engine_dtls::get_setup</a></div><div class="ttdeci">enum ast_rtp_dtls_setup(* get_setup)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00582">rtp_engine.h:582</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68594e604220e38eb6593972ef9a4da3"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68594e604220e38eb6593972ef9a4da3">ast_rtp_rtcp_received_type</a></div><div class="ttdeci">struct stasis_message_type * ast_rtp_rtcp_received_type(void)</div><div class="ttdoc">Message type for an RTCP message received from some external source. </div></div>
<div class="ttc" id="rtp__engine_8c_html_a71f6c74dc884b40dbbd1be4079e699de"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a71f6c74dc884b40dbbd1be4079e699de">ast_rtp_instance_get_last_tx</a></div><div class="ttdeci">time_t ast_rtp_instance_get_last_tx(const struct ast_rtp_instance *rtp)</div><div class="ttdoc">Get the last RTP transmission time. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03758">rtp_engine.c:3758</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_aa2bc973b458a176425cec2c60a2c0e79"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#aa2bc973b458a176425cec2c60a2c0e79">ast_rtp_engine::remote_address_set</a></div><div class="ttdeci">void(* remote_address_set)(struct ast_rtp_instance *instance, struct ast_sockaddr *sa)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00645">rtp_engine.h:645</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a7ee8b2d2fb5919d30d35d1339010f641"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a7ee8b2d2fb5919d30d35d1339010f641">ast_rtp_engine_ice::turn_request</a></div><div class="ttdeci">void(* turn_request)(struct ast_rtp_instance *instance, enum ast_rtp_ice_component_type component, enum ast_transport transport, const char *server, unsigned int port, const char *username, const char *password)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00505">rtp_engine.h:505</a></div></div>
<div class="ttc" id="json_8h_html_abc8b563c172cfaffa2b555195990f729"><div class="ttname"><a href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a></div><div class="ttdeci">int ast_json_object_set(struct ast_json *object, const char *key, struct ast_json *value)</div><div class="ttdoc">Set a field in a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00404">json.c:404</a></div></div>
<div class="ttc" id="translate_8h_html_a57042913ae83bc388ddd52d820277aa3"><div class="ttname"><a href="../../db/d39/translate_8h.html#a57042913ae83bc388ddd52d820277aa3">ast_translate_available_formats</a></div><div class="ttdeci">void ast_translate_available_formats(struct ast_format_cap *dest, struct ast_format_cap *src, struct ast_format_cap *result)</div><div class="ttdoc">Find available formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l01571">translate.c:1571</a></div></div>
<div class="ttc" id="utils_8h_html"><div class="ttname"><a href="../../d5/d60/utils_8h.html">utils.h</a></div><div class="ttdoc">Utility functions. </div></div>
<div class="ttc" id="format_8h_html"><div class="ttname"><a href="../../d0/d0a/format_8h.html">format.h</a></div><div class="ttdoc">Media Format API. </div></div>
<div class="ttc" id="format__cache_8h_html_aaeda14ddafc8c3d2efb20ece9ab29b36"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#aaeda14ddafc8c3d2efb20ece9ab29b36">ast_format_h261</a></div><div class="ttdeci">struct ast_format * ast_format_h261</div><div class="ttdoc">Built-in cached h261 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00166">format_cache.c:166</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a25a9305efab3b493ca2519562fcec3d5"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a></div><div class="ttdeci">unsigned int tos</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l00351">chan_iax2.c:351</a></div></div>
<div class="ttc" id="module_8h_html_a15896c26e51e8162df5eb9a0124c841f"><div class="ttname"><a href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a></div><div class="ttdeci">#define ast_module_unref(mod)</div><div class="ttdoc">Release a reference to the module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00469">module.h:469</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__rtp__payload__type_html_a86d3b28b783f5b0e9cf208f0461a6f0b"><div class="ttname"><a href="../../dd/de9/structast__rtp__payload__type.html#a86d3b28b783f5b0e9cf208f0461a6f0b">ast_rtp_payload_type::payload</a></div><div class="ttdeci">int payload</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00284">rtp_engine.h:284</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a8ec033f1e295b12840594307870ba29f"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a8ec033f1e295b12840594307870ba29f">rtp_rtcp_report_dtor</a></div><div class="ttdeci">static void rtp_rtcp_report_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03464">rtp_engine.c:3464</a></div></div>
<div class="ttc" id="format__cache_8h_html_af85ac680749ca1c388121b295f4d147d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#af85ac680749ca1c388121b295f4d147d">ast_format_g719</a></div><div class="ttdeci">struct ast_format * ast_format_g719</div><div class="ttdoc">Built-in cached g719 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00161">format_cache.c:161</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_abdcd28daa60406785f9f34af59a9951e"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#abdcd28daa60406785f9f34af59a9951e">ast_rtp_instance_get_dtls</a></div><div class="ttdeci">struct ast_rtp_engine_dtls * ast_rtp_instance_get_dtls(struct ast_rtp_instance *instance)</div><div class="ttdoc">Obtain a pointer to the DTLS support present on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03011">rtp_engine.c:3011</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a682200a5ab9248b45de4205781dd9e5f"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a682200a5ab9248b45de4205781dd9e5f">add_static_payload</a></div><div class="ttdeci">static void add_static_payload(int payload, struct ast_format *format, int rtp_code)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03183">rtp_engine.c:3183</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_afa4a9048a49a94118a0857361fe868ee"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#afa4a9048a49a94118a0857361fe868ee">ast_rtp_instance_extmap_get_direction</a></div><div class="ttdeci">enum ast_rtp_extension_direction ast_rtp_instance_extmap_get_direction(struct ast_rtp_instance *instance, int id)</div><div class="ttdoc">Retrieve the negotiated direction for an RTP extension id. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00930">rtp_engine.c:930</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_a5992b274cfdcacdbc1fa8347fd01ebde"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a></div><div class="ttdeci">int done</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00048">test_amihooks.c:48</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a600efcadee5b02fc1715ea10e7bc30e0"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a600efcadee5b02fc1715ea10e7bc30e0">ast_rtp_instance_get_timeout</a></div><div class="ttdeci">int ast_rtp_instance_get_timeout(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the RTP timeout value. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02685">rtp_engine.c:2685</a></div></div>
<div class="ttc" id="json_8h_html_a8055cb3a9f4d7d5842826e6157ae00db"><div class="ttname"><a href="../../d4/d05/json_8h.html#a8055cb3a9f4d7d5842826e6157ae00db">ast_json_null</a></div><div class="ttdeci">struct ast_json * ast_json_null(void)</div><div class="ttdoc">Get the JSON null value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00248">json.c:248</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a6a8f09db111d67acd12a3db783b71e85"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a6a8f09db111d67acd12a3db783b71e85">rtp_dtls_wrap_active</a></div><div class="ttdeci">static int rtp_dtls_wrap_active(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02918">rtp_engine.c:2918</a></div></div>
<div class="ttc" id="format__cache_8h_html_ac8f5dbbf78d277227db1ebff7e134cc1"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#ac8f5dbbf78d277227db1ebff7e134cc1">ast_format_h263p</a></div><div class="ttdeci">struct ast_format * ast_format_h263p</div><div class="ttdoc">Built-in cached h263 plus format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00176">format_cache.c:176</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a8e272a4ee35206ff8c4c0384b9e3f592"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a8e272a4ee35206ff8c4c0384b9e3f592">ast_rtp_instance_read</a></div><div class="ttdeci">struct ast_frame * ast_rtp_instance_read(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdoc">Receive a frame over RTP. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00578">rtp_engine.c:578</a></div></div>
<div class="ttc" id="format__cache_8h_html_a5b1d770effa84ed2066d849eebbdc8cb"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a5b1d770effa84ed2066d849eebbdc8cb">ast_format_lpc10</a></div><div class="ttdeci">struct ast_format * ast_format_lpc10</div><div class="ttdoc">Built-in cached ilbc format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00131">format_cache.c:131</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a897e8395e19af29b1835e7e01d75b580"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a897e8395e19af29b1835e7e01d75b580">ast_rtp_glue_register2</a></div><div class="ttdeci">int ast_rtp_glue_register2(struct ast_rtp_glue *glue, struct ast_module *module)</div><div class="ttdoc">Register RTP glue. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00379">rtp_engine.c:379</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga5be660321553c9f0d14c9d9307efcc84"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga5be660321553c9f0d14c9d9307efcc84">AST_LOG_CATEGORY_DTLS</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_DTLS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02832">rtp_engine.h:2832</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a040862f38bfbc80a11a220a3acc4c9d5"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a040862f38bfbc80a11a220a3acc4c9d5">ast_rtp_lookup_mime_multiple2</a></div><div class="ttdeci">char * ast_rtp_lookup_mime_multiple2(struct ast_str *buf, struct ast_format_cap *ast_format_capability, int rtp_capability, const int asterisk_format, enum ast_rtp_options options)</div><div class="ttdoc">Convert formats into a string and put them into a buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02045">rtp_engine.c:2045</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_afb4676cce2045d03ebb5d2fb1cc71a54"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#afb4676cce2045d03ebb5d2fb1cc71a54">ast_rtp_engine_dtls::get_connection</a></div><div class="ttdeci">enum ast_rtp_dtls_connection(* get_connection)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00580">rtp_engine.h:580</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ae89f572a6b37614f05f4e210afcffa8c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ae89f572a6b37614f05f4e210afcffa8c">AST_RTP_MAX</a></div><div class="ttdeci">#define AST_RTP_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00272">rtp_engine.h:272</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a0376aa2503a185437fab8cb0b7d674fb"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * ast_rtp_instance_get_codecs(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the codecs structure of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00727">rtp_engine.c:727</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a88677a524d7f3d7201f5d2f773cfc8ffa2244dfdd646dfd5287d1029c44d1f3f5"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa2244dfdd646dfd5287d1029c44d1f3f5">AST_RTP_EXTENSION_ABS_SEND_TIME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00546">rtp_engine.h:546</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a61afdd249d4047c3f3c5e282258da706"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a61afdd249d4047c3f3c5e282258da706">ast_rtp_engine::destroy</a></div><div class="ttdeci">int(* destroy)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00622">rtp_engine.h:622</a></div></div>
<div class="ttc" id="lock_8h_html_af65c888941c741acb2e2078d5d078c49"><div class="ttname"><a href="../../dd/d42/lock_8h.html#af65c888941c741acb2e2078d5d078c49">ast_rwlock_tryrdlock</a></div><div class="ttdeci">#define ast_rwlock_tryrdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00235">lock.h:235</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structast__rtp__engine__test_html_a22a297cd8a09d7ffd6f092bf6dc22eee"><div class="ttname"><a href="../../d5/d98/structast__rtp__engine__test.html#a22a297cd8a09d7ffd6f092bf6dc22eee">ast_rtp_engine_test::send_buffer_count</a></div><div class="ttdeci">size_t(* send_buffer_count)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00607">rtp_engine.h:607</a></div></div>
<div class="ttc" id="format__cache_8h_html_abf183168c32c9fb898ac74c61d31ae34"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#abf183168c32c9fb898ac74c61d31ae34">ast_format_slin12</a></div><div class="ttdeci">struct ast_format * ast_format_slin12</div><div class="ttdoc">Built-in cached signed linear 12kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00046">format_cache.c:46</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a3ad3e690e524b5871f9b99d12098799f"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a3ad3e690e524b5871f9b99d12098799f">ast_rtp_dtls_cfg_free</a></div><div class="ttdeci">void ast_rtp_dtls_cfg_free(struct ast_rtp_dtls_cfg *dtls_cfg)</div><div class="ttdoc">Free contents of a DTLS configuration structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03131">rtp_engine.c:3131</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a60d6422d11e8d18f20596a91988d9275"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a60d6422d11e8d18f20596a91988d9275">ast_rtp_instance_dtmf_begin</a></div><div class="ttdeci">int ast_rtp_instance_dtmf_begin(struct ast_rtp_instance *instance, char digit)</div><div class="ttdoc">Begin sending a DTMF digit. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02081">rtp_engine.c:2081</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga14c88045a075be4ca9d217c283502532"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga14c88045a075be4ca9d217c283502532">ast_rtp_instance_get_sdes_received</a></div><div class="ttdeci">int ast_rtp_instance_get_sdes_received(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the value of sdes_received on the test engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03929">rtp_engine.c:3929</a></div></div>
<div class="ttc" id="structast__rtp__mime__type_html_ac9b3af8d8bb662272a6684754f6e9622"><div class="ttname"><a href="../../d8/d0d/structast__rtp__mime__type.html#ac9b3af8d8bb662272a6684754f6e9622">ast_rtp_mime_type::payload_type</a></div><div class="ttdeci">struct ast_rtp_payload_type payload_type</div><div class="ttdoc">A mapping object between the Asterisk codec and this RTP payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00253">rtp_engine.c:253</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_accba1c88c182c7b7dcb117b1b8768de2"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#accba1c88c182c7b7dcb117b1b8768de2">ast_rtp_engine::dtls</a></div><div class="ttdeci">struct ast_rtp_engine_dtls * dtls</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00693">rtp_engine.h:693</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0a7eec86ca7aa6358db7f1f47ab1fe8ed1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a7eec86ca7aa6358db7f1f47ab1fe8ed1">AST_RTP_EXTENSION_DIRECTION_INACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00779">rtp_engine.h:779</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ab035447ec9d2b67c82ab84a0d4215935"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ab035447ec9d2b67c82ab84a0d4215935">ast_rtp_instance_get_requested_target_address</a></div><div class="ttdeci">void ast_rtp_instance_get_requested_target_address(struct ast_rtp_instance *instance, struct ast_sockaddr *address)</div><div class="ttdoc">Get the requested target address of the remote endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00673">rtp_engine.c:673</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ae7a61504de5dc81c90a4ce6842da8b32"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ae7a61504de5dc81c90a4ce6842da8b32">STASIS_MESSAGE_TYPE_DEFN</a></div><div class="ttdeci">STASIS_MESSAGE_TYPE_DEFN(ast_rtp_rtcp_sent_type,.to_ami=rtcp_report_to_ami,.to_json=rtcp_report_to_json,)</div><div class="ttdoc">Define RTCP/RTP message types. </div></div>
<div class="ttc" id="structast__rtp__engine_html_a7a2750b1709636223469c884ded2e7bb"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a7a2750b1709636223469c884ded2e7bb">ast_rtp_engine::red_buffer</a></div><div class="ttdeci">int(* red_buffer)(struct ast_rtp_instance *instance, struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00659">rtp_engine.h:659</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a2c5fb9f96675106e960e9c96b7f65ad1"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a2c5fb9f96675106e960e9c96b7f65ad1">debug_category_dtls_packet_id</a></div><div class="ttdeci">static uintmax_t debug_category_dtls_packet_id</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03571">rtp_engine.c:3571</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a008c70da51a5d4e337f5857dc14e3ef4ad01759e580ed1c40971709048d40e6f4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4ad01759e580ed1c40971709048d40e6f4">AST_RTP_DTLS_SETUP_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00514">rtp_engine.h:514</a></div></div>
<div class="ttc" id="utils_8h_html_afa99ec4acc4ecb2dc3c2d05da15d0e3f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a></div><div class="ttdeci">#define MAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00228">utils.h:228</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a493b57f443cc38b3d3df9c1e584d9d82">ast_rtp_instance::timeout</a></div><div class="ttdeci">int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00207">rtp_engine.c:207</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a8f48f5dcf1c94c6fe194d1c6c8d5e153"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a8f48f5dcf1c94c6fe194d1c6c8d5e153">debug_category_rtp_id</a></div><div class="ttdeci">static uintmax_t debug_category_rtp_id</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03536">rtp_engine.c:3536</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a6090669b517d32eacfd0e57dfc7a1efd"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a></div><div class="ttdeci">#define AST_RTP_MAX_PT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00083">rtp_engine.h:83</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a4783eb307c55bda4f55f933f8ebf9661"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a4783eb307c55bda4f55f933f8ebf9661">ast_rtp_rtcp_report_block::fraction</a></div><div class="ttdeci">unsigned short fraction</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00319">rtp_engine.h:319</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_aaef523c36ea1af726854776ee8f2ba51"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#aaef523c36ea1af726854776ee8f2ba51">ast_rtp_instance_activate</a></div><div class="ttdeci">int ast_rtp_instance_activate(struct ast_rtp_instance *instance)</div><div class="ttdoc">Indicate to the RTP engine that packets are now expected to be sent/received on the RTP instance...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02647">rtp_engine.c:2647</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a57ccbb57bb92003f4944587b3b51f71f"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a57ccbb57bb92003f4944587b3b51f71f">ast_rtp_instance_get_keepalive</a></div><div class="ttdeci">int ast_rtp_instance_get_keepalive(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the RTP keepalive interval. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02695">rtp_engine.c:2695</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a88677a524d7f3d7201f5d2f773cfc8ffa11c950ae0dff572356c026d645fef183"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa11c950ae0dff572356c026d645fef183">AST_RTP_EXTENSION_MAX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00550">rtp_engine.h:550</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a7a339b51a851d9fa454e48a38f69d9d7"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a7a339b51a851d9fa454e48a38f69d9d7">ast_rtp_codecs_find_payload_code</a></div><div class="ttdeci">int ast_rtp_codecs_find_payload_code(struct ast_rtp_codecs *codecs, int payload)</div><div class="ttdoc">Search for the tx payload type in the ast_rtp_codecs structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01975">rtp_engine.c:1975</a></div></div>
<div class="ttc" id="channel_8h_html"><div class="ttname"><a href="../../d5/d7b/channel_8h.html">channel.h</a></div><div class="ttdoc">General Asterisk PBX channel definitions. </div></div>
<div class="ttc" id="json_8h_html"><div class="ttname"><a href="../../d4/d05/json_8h.html">json.h</a></div><div class="ttdoc">Asterisk JSON abstraction layer. </div></div>
<div class="ttc" id="vector_8h_html_af613aa5306ff5ad101734708861d634e"><div class="ttname"><a href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a></div><div class="ttdeci">#define AST_VECTOR_GET_ADDR(vec, idx)</div><div class="ttdoc">Get an address of element in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00670">vector.h:670</a></div></div>
<div class="ttc" id="asterisk_8h_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00019">clicompat.c:19</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ab71294e675bc01eb29e9fd13b3839759"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ab71294e675bc01eb29e9fd13b3839759">ast_rtp_instance_set_qos</a></div><div class="ttdeci">int ast_rtp_instance_set_qos(struct ast_rtp_instance *instance, int tos, int cos, const char *desc)</div><div class="ttdoc">Set QoS parameters on an RTP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02169">rtp_engine.c:2169</a></div></div>
<div class="ttc" id="structast__rtp__glue_html_a42454110450e5a6883707f9b4b685e8f"><div class="ttname"><a href="../../d8/dc9/structast__rtp__glue.html#a42454110450e5a6883707f9b4b685e8f">ast_rtp_glue::get_rtp_info</a></div><div class="ttdeci">enum ast_rtp_glue_result(* get_rtp_info)(struct ast_channel *chan, struct ast_rtp_instance **instance)</div><div class="ttdoc">Callback for retrieving the RTP instance carrying audio. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00729">rtp_engine.h:729</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a6f3297fdc6574d935732ec0608b40ef6"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a6f3297fdc6574d935732ec0608b40ef6">ast_rtp_engine_alloc_payload_type</a></div><div class="ttdeci">struct ast_rtp_payload_type * ast_rtp_engine_alloc_payload_type(void)</div><div class="ttdoc">Allocation routine for ast_rtp_payload_type. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00325">rtp_engine.c:325</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_aad58a04a0dc44700d786791b27fc40b6"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#aad58a04a0dc44700d786791b27fc40b6">ast_rtp_instance_stats::remote_maxjitter</a></div><div class="ttdeci">double remote_maxjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00376">rtp_engine.h:376</a></div></div>
<div class="ttc" id="format__cache_8h_html_a36ccd0ea29dc6a6505fba266e692509b"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a36ccd0ea29dc6a6505fba266e692509b">ast_format_opus</a></div><div class="ttdeci">struct ast_format * ast_format_opus</div><div class="ttdoc">Built-in cached opus format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00226">format_cache.c:226</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a87cb097a21ab7712c27aa9e3b3a1ef69"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a87cb097a21ab7712c27aa9e3b3a1ef69">ast_rtp_instance_write</a></div><div class="ttdeci">int ast_rtp_instance_write(struct ast_rtp_instance *instance, struct ast_frame *frame)</div><div class="ttdoc">Send a frame out over RTP. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00568">rtp_engine.c:568</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gac232b87801c254313c80905aa709875b"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gac232b87801c254313c80905aa709875b">ast_rtp_instance_get_send_buffer_count</a></div><div class="ttdeci">size_t ast_rtp_instance_get_send_buffer_count(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the current size of the send buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03874">rtp_engine.c:3874</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378f">ast_rtp_instance_stat</a></div><div class="ttdeci">ast_rtp_instance_stat</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00180">rtp_engine.h:180</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="json_8h_html_adc52f8d76b7fdd0c8d12987981fd5bf5"><div class="ttname"><a href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a></div><div class="ttdeci">struct ast_json * ast_json_string_create(const char *value)</div><div class="ttdoc">Construct a JSON string from value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00268">json.c:268</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914ca433053a4f148421548e609f8415c327e"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca433053a4f148421548e609f8415c327e">AST_RTP_PROPERTY_MAX</a></div><div class="ttdoc">Maximum number of RTP properties supported. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00138">rtp_engine.h:138</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga920b9d3e484257c7e593452a8e36d8d4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga920b9d3e484257c7e593452a8e36d8d4">ast_channel_stage_snapshot_done</a></div><div class="ttdeci">void ast_channel_stage_snapshot_done(struct ast_channel *chan)</div><div class="ttdoc">Clear flag to indicate channel snapshot is being staged, and publish snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01043">stasis_channels.c:1043</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_aac72c5caaa8c6efc53aa5800e5825785"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#aac72c5caaa8c6efc53aa5800e5825785">ast_rtp_engine::available_formats</a></div><div class="ttdeci">void(* available_formats)(struct ast_rtp_instance *instance, struct ast_format_cap *to_endpoint, struct ast_format_cap *to_asterisk, struct ast_format_cap *result)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00677">rtp_engine.h:677</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a88677a524d7f3d7201f5d2f773cfc8ffa163f70dc8ad29138217161bca3ac9b90"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa163f70dc8ad29138217161bca3ac9b90">AST_RTP_EXTENSION_TRANSPORT_WIDE_CC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00548">rtp_engine.h:548</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0758b5402aff85ff35e08f7d482308fb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fb">ast_rtp_ice_role</a></div><div class="ttdeci">ast_rtp_ice_role</div><div class="ttdoc">ICE role during negotiation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00468">rtp_engine.h:468</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378fae61702d25f656069ccc9ba288b3b4dc7"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378fae61702d25f656069ccc9ba288b3b4dc7">AST_RTP_INSTANCE_STAT_COMBINED_RTT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00232">rtp_engine.h:232</a></div></div>
<div class="ttc" id="codec_8c_html_a26d06e92c695d54e16beb8070dc5461d"><div class="ttname"><a href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a></div><div class="ttdeci">static struct ao2_container * codecs</div><div class="ttdoc">Registered codecs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00048">codec.c:48</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a5b1915b54f90c3a385c106f88019ca71"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a5b1915b54f90c3a385c106f88019ca71">ast_rtp_engine::test</a></div><div class="ttdeci">struct ast_rtp_engine_test * test</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00696">rtp_engine.h:696</a></div></div>
<div class="ttc" id="astobj2_8h_html"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html">astobj2.h</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_ae5103bd2c18ffc657bebc3ac9f1d6a90"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#ae5103bd2c18ffc657bebc3ac9f1d6a90">ast_rtp_engine_dtls::set_fingerprint</a></div><div class="ttdeci">void(* set_fingerprint)(struct ast_rtp_instance *instance, enum ast_rtp_dtls_hash hash, const char *fingerprint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00586">rtp_engine.h:586</a></div></div>
<div class="ttc" id="structast__srtp__res_html"><div class="ttname"><a href="../../d0/d5d/structast__srtp__res.html">ast_srtp_res</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/res__srtp_8h_source.html#l00034">res_srtp.h:34</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ad8f390e1d568b90c8b87174a81f81a5b"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ad8f390e1d568b90c8b87174a81f81a5b">ast_rtp_instance_set_stream_num</a></div><div class="ttdeci">void ast_rtp_instance_set_stream_num(struct ast_rtp_instance *rtp, int stream_num)</div><div class="ttdoc">Set the stream number for an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03830">rtp_engine.c:3830</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4ae8179d33ea9515b49d8d088a496a43ac2a4497481a850d7d1bc566e1c774a0b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43ac2a4497481a850d7d1bc566e1c774a0b">AST_RTP_INSTANCE_STAT_FIELD_QUALITY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00170">rtp_engine.h:170</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a4c5d2e9054e218b8316ecb1dc686a3d8"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a4c5d2e9054e218b8316ecb1dc686a3d8">ast_rtp_instance::glue</a></div><div class="ttdeci">struct ast_rtp_glue * glue</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00213">rtp_engine.c:213</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ac17174557c55d1ff7b5d08b06395241f"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ac17174557c55d1ff7b5d08b06395241f">find_static_payload_type</a></div><div class="ttdeci">static int find_static_payload_type(int asterisk_format, const struct ast_format *format, int code)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01624">rtp_engine.c:1624</a></div></div>
<div class="ttc" id="sched_8h_html"><div class="ttname"><a href="../../d7/d00/sched_8h.html">sched.h</a></div><div class="ttdoc">Scheduler Routines (derived from cheops) </div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a003eb2ccfb47fe93819bb8c54084708e"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a003eb2ccfb47fe93819bb8c54084708e">ast_rtp_rtcp_report_block::lsr</a></div><div class="ttdeci">unsigned int lsr</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00324">rtp_engine.h:324</a></div></div>
<div class="ttc" id="structrtcp__message__payload_html"><div class="ttname"><a href="../../d4/de4/structrtcp__message__payload.html">rtcp_message_payload</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03282">rtp_engine.c:3282</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a88369d2301a12e90f67652a9d579929a"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a88369d2301a12e90f67652a9d579929a">ast_rtp_engine::new</a></div><div class="ttdeci">int(* new)(struct ast_rtp_instance *instance, struct ast_sched_context *sched, struct ast_sockaddr *sa, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00620">rtp_engine.h:620</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a3bd9bbc5899ee94231766743b3c4ae29"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a3bd9bbc5899ee94231766743b3c4ae29">rtp_ice_wrap_ice_lite</a></div><div class="ttdeci">static void rtp_ice_wrap_ice_lite(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02844">rtp_engine.c:2844</a></div></div>
<div class="ttc" id="structextension_html"><div class="ttname"><a href="../../d0/d5a/structextension.html">extension</a></div><div class="ttdoc">structure to hold extensions </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00287">res_phoneprov.c:287</a></div></div>
<div class="ttc" id="format__cache_8h_html_a3c4c5f669f55befda69aa08699545ec7"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a3c4c5f669f55befda69aa08699545ec7">ast_format_gsm</a></div><div class="ttdeci">struct ast_format * ast_format_gsm</div><div class="ttdoc">Built-in cached gsm format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00101">format_cache.c:101</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a6401bb61dcc6b76101f99f0127b28a5c"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a6401bb61dcc6b76101f99f0127b28a5c">rtp_payload_type_alloc</a></div><div class="ttdeci">static struct ast_rtp_payload_type * rtp_payload_type_alloc(struct ast_format *format, int payload, int rtp_code, int primary_mapping)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00306">rtp_engine.c:306</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a0d5514f710438c5808ce30d0d35554c2"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a0d5514f710438c5808ce30d0d35554c2">res_srtp</a></div><div class="ttdeci">struct ast_srtp_res * res_srtp</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00177">rtp_engine.c:177</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_aeedb7802e580cf4c11d7af4c16ce04bd"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#aeedb7802e580cf4c11d7af4c16ce04bd">ast_rtp_instance_stats::channel_uniqueid</a></div><div class="ttdeci">char channel_uniqueid[MAX_CHANNEL_ID]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00426">rtp_engine.h:426</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a171e7913c45fa31a09108dadaae5ba78"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a171e7913c45fa31a09108dadaae5ba78">ast_rtp_ice_component_type</a></div><div class="ttdeci">ast_rtp_ice_component_type</div><div class="ttdoc">ICE component types. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00462">rtp_engine.h:462</a></div></div>
<div class="ttc" id="structast__rtp__engine__test_html_a127ffa9479d12a8d665bbd42ba2dee18"><div class="ttname"><a href="../../d5/d98/structast__rtp__engine__test.html#a127ffa9479d12a8d665bbd42ba2dee18">ast_rtp_engine_test::recv_buffer_count</a></div><div class="ttdeci">size_t(* recv_buffer_count)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00603">rtp_engine.h:603</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ae1e679c32bea7207cd56f3b5bb0ed20d"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ae1e679c32bea7207cd56f3b5bb0ed20d">find_unused_payload</a></div><div class="ttdeci">static int find_unused_payload(const struct ast_rtp_codecs *codecs)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01701">rtp_engine.c:1701</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a7fc557455b1c2ded912d80e3b1871a8a"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a7fc557455b1c2ded912d80e3b1871a8a">ast_rtp_instance_get_extended_prop</a></div><div class="ttdeci">void * ast_rtp_instance_get_extended_prop(struct ast_rtp_instance *instance, int property)</div><div class="ttdoc">Get the value of an RTP instance extended property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00690">rtp_engine.c:690</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a43e7acee5296994d8dab0cb6d1bd4bc1"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a43e7acee5296994d8dab0cb6d1bd4bc1">debug_category_rtcp_id</a></div><div class="ttdeci">static uintmax_t debug_category_rtcp_id</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03550">rtp_engine.c:3550</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="json_8h_html_a6772fcee88746a9d4f6ec6f240b76dd0"><div class="ttname"><a href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a></div><div class="ttdeci">const char * ast_json_string_get(const struct ast_json *string)</div><div class="ttdoc">Get the value of a JSON string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00273">json.c:273</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_afd73a14bf491aea2a0fdc2613ff21300"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#afd73a14bf491aea2a0fdc2613ff21300">ast_rtp_instance_set_timeout</a></div><div class="ttdeci">void ast_rtp_instance_set_timeout(struct ast_rtp_instance *instance, int timeout)</div><div class="ttdoc">Set the RTP timeout value. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02670">rtp_engine.c:2670</a></div></div>
<div class="ttc" id="linkedlists_8h_html"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html">linkedlists.h</a></div><div class="ttdoc">A set of macros to manage forward-linked lists. </div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html_a32990be2947ceb7f92525d570f497706"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html#a32990be2947ceb7f92525d570f497706">ast_rtp_dtls_cfg::hash</a></div><div class="ttdeci">enum ast_rtp_dtls_hash hash</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00559">rtp_engine.h:559</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ad8bdc0c51b9a04967d2b507e64d64d5b"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ad8bdc0c51b9a04967d2b507e64d64d5b">ast_rtp_instance_get_glue</a></div><div class="ttdeci">struct ast_rtp_glue * ast_rtp_instance_get_glue(const char *type)</div><div class="ttdoc">Get the RTP glue that binds a channel to the RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02206">rtp_engine.c:2206</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a9dc97ff0394d0d099c6291451e07ea73"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a9dc97ff0394d0d099c6291451e07ea73">ast_rtp_instance_stats::local_stdevrxploss</a></div><div class="ttdeci">double local_stdevrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00410">rtp_engine.h:410</a></div></div>
<div class="ttc" id="structast__rtp__engine__test_html_a8dbf2df25a080792f44380cdf628916f"><div class="ttname"><a href="../../d5/d98/structast__rtp__engine__test.html#a8dbf2df25a080792f44380cdf628916f">ast_rtp_engine_test::packets_to_drop</a></div><div class="ttdeci">int packets_to_drop</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00597">rtp_engine.h:597</a></div></div>
<div class="ttc" id="structast__sched__context_html"><div class="ttname"><a href="../../d7/de8/structast__sched__context.html">ast_sched_context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00109">sched.c:109</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_aef4f32cf0fa56818892f9eca7a2a8896"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#aef4f32cf0fa56818892f9eca7a2a8896">ast_rtp_instance_update_source</a></div><div class="ttdeci">void ast_rtp_instance_update_source(struct ast_rtp_instance *instance)</div><div class="ttdoc">Indicate that the RTP marker bit should be set on an RTP stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02151">rtp_engine.c:2151</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a9416cd4c3b100e3c60792a37072fa061"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a9416cd4c3b100e3c60792a37072fa061">ast_rtp_codecs_payloads_clear</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_clear(struct ast_rtp_codecs *codecs, struct ast_rtp_instance *instance)</div><div class="ttdoc">Clear rx and tx payload mapping information from an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00994">rtp_engine.c:994</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a671d95f71246853f2b7672ac36222493"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a671d95f71246853f2b7672ac36222493">ast_rtp_instance_set_last_tx</a></div><div class="ttdeci">void ast_rtp_instance_set_last_tx(struct ast_rtp_instance *rtp, time_t time)</div><div class="ttdoc">Set the last RTP transmission time. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03763">rtp_engine.c:3763</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_adbaefd95043efe7b49f3190ffeff40fb"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#adbaefd95043efe7b49f3190ffeff40fb">ast_rtp_instance_stats::local_maxjitter</a></div><div class="ttdeci">double local_maxjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00384">rtp_engine.h:384</a></div></div>
<div class="ttc" id="vector_8h_html_aecf5cf511c06438b264c501224d13d89"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aecf5cf511c06438b264c501224d13d89">AST_VECTOR</a></div><div class="ttdeci">#define AST_VECTOR(name, type)</div><div class="ttdoc">Define a vector structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00044">vector.h:44</a></div></div>
<div class="ttc" id="format__cache_8h_html_a0293031ddc642eac4e79c3893e22ec9f"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a0293031ddc642eac4e79c3893e22ec9f">ast_format_speex16</a></div><div class="ttdeci">struct ast_format * ast_format_speex16</div><div class="ttdoc">Built-in cached speex at 16kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00141">format_cache.c:141</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a7ba836e259b39135c3630e314eaec806"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a7ba836e259b39135c3630e314eaec806">ast_rtp_instance_make_compatible</a></div><div class="ttdeci">int ast_rtp_instance_make_compatible(struct ast_channel *chan, struct ast_rtp_instance *instance, struct ast_channel *peer)</div><div class="ttdoc">Request that the underlying RTP engine make two RTP instances compatible with eachother. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02589">rtp_engine.c:2589</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a5e502ec5d4e1d3856c7d6f1a16388418"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a5e502ec5d4e1d3856c7d6f1a16388418">rtp_dtls_wrap_set_fingerprint</a></div><div class="ttdeci">static void rtp_dtls_wrap_set_fingerprint(struct ast_rtp_instance *instance, enum ast_rtp_dtls_hash hash, const char *fingerprint)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02970">rtp_engine.c:2970</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4e13c63955f3824b62d1d11a1f6b56f4a8124b25aa9a78a69d2d61b57c212baa3"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4e13c63955f3824b62d1d11a1f6b56f4a8124b25aa9a78a69d2d61b57c212baa3">AST_RTP_DTLS_VERIFY_FINGERPRINT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00535">rtp_engine.h:535</a></div></div>
<div class="ttc" id="format__cache_8h_html_acb4afe90ab0483659f1ea7207175b29d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#acb4afe90ab0483659f1ea7207175b29d">ast_format_png</a></div><div class="ttdeci">struct ast_format * ast_format_png</div><div class="ttdoc">Built-in cached png format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00211">format_cache.c:211</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_aed963fd645cea41f8f9a7dd144810204"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#aed963fd645cea41f8f9a7dd144810204">ast_rtp_instance_stats::txoctetcount</a></div><div class="ttdeci">unsigned int txoctetcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00428">rtp_engine.h:428</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4f2fb6c08b3697d011cf613c8b68054c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054c">ast_rtp_glue_result</a></div><div class="ttdeci">ast_rtp_glue_result</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00158">rtp_engine.h:158</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a3b5d807d68699a4f03505327f9ddcdc1"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a3b5d807d68699a4f03505327f9ddcdc1">ast_rtp_instance_get_and_cmp_requested_target_address</a></div><div class="ttdeci">int ast_rtp_instance_get_and_cmp_requested_target_address(struct ast_rtp_instance *instance, struct ast_sockaddr *address)</div><div class="ttdoc">Get the requested target address of the remote endpoint and compare it to the given address...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00651">rtp_engine.c:651</a></div></div>
<div class="ttc" id="structast__rtp__glue_html_a446e18924acc8aa16863aac05266866d"><div class="ttname"><a href="../../d8/dc9/structast__rtp__glue.html#a446e18924acc8aa16863aac05266866d">ast_rtp_glue::get_codec</a></div><div class="ttdeci">void(* get_codec)(struct ast_channel *chan, struct ast_format_cap *result_cap)</div><div class="ttdoc">Callback for retrieving codecs that the channel can do. Result returned in result_cap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00761">rtp_engine.h:761</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4ae8179d33ea9515b49d8d088a496a43a1b7906e2aaf6e7955fee6933da7a0e5b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43a1b7906e2aaf6e7955fee6933da7a0e5b">AST_RTP_INSTANCE_STAT_FIELD_QUALITY_LOSS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00174">rtp_engine.h:174</a></div></div>
<div class="ttc" id="res__srtp_8c_html_adae622a01b8004d643b26e73a7859c8f"><div class="ttname"><a href="../../d8/dd4/res__srtp_8c.html#adae622a01b8004d643b26e73a7859c8f">policy_res</a></div><div class="ttdeci">static struct ast_srtp_policy_res policy_res</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd4/res__srtp_8c_source.html#l00114">res_srtp.c:114</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a731f60e2595beaace09fef194e1f616a"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a731f60e2595beaace09fef194e1f616a">ast_rtp_instance::last_tx</a></div><div class="ttdeci">time_t last_tx</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00221">rtp_engine.c:221</a></div></div>
<div class="ttc" id="manager_8h_html_a777cde87d12b331902f862ec44641688"><div class="ttname"><a href="../../db/d45/manager_8h.html#a777cde87d12b331902f862ec44641688">ast_manager_build_channel_state_string</a></div><div class="ttdeci">struct ast_str * ast_manager_build_channel_state_string(const struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Generate the AMI message body from a channel snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1c/manager__channels_8c_source.html#l00561">manager_channels.c:561</a></div></div>
<div class="ttc" id="structglues_html"><div class="ttname"><a href="../../da/dd0/structglues.html">glues</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00245">rtp_engine.c:245</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a5628e2f9c84877e23e8ef7da744567be"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a5628e2f9c84877e23e8ef7da744567be">rtp_ice_wrap_get_ufrag</a></div><div class="ttdeci">static const char * rtp_ice_wrap_get_ufrag(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02814">rtp_engine.c:2814</a></div></div>
<div class="ttc" id="netsock2_8h_html"><div class="ttname"><a href="../../db/df1/netsock2_8h.html">netsock2.h</a></div><div class="ttdoc">Network socket handling. </div></div>
<div class="ttc" id="pbx_8h_html"><div class="ttname"><a href="../../db/de0/pbx_8h.html">pbx.h</a></div><div class="ttdoc">Core PBX routines and definitions. </div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga85ebb1735a6e9ce14a033b479076aaed"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga85ebb1735a6e9ce14a033b479076aaed">ast_rtp_get_rate</a></div><div class="ttdeci">int ast_rtp_get_rate(const struct ast_format *format)</div><div class="ttdoc">Retrieve the sample rate of a format according to RTP specifications. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l04030">rtp_engine.c:4030</a></div></div>
<div class="ttc" id="json_8h_html_a48d874eed79fb2bbeb0557440e33ae67"><div class="ttname"><a href="../../d4/d05/json_8h.html#a48d874eed79fb2bbeb0557440e33ae67">ast_json_array_create</a></div><div class="ttdeci">struct ast_json * ast_json_array_create(void)</div><div class="ttdoc">Create a empty JSON array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00352">json.c:352</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a8f7c0fb630cef59062f987730a17df71"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a8f7c0fb630cef59062f987730a17df71">ast_rtp_instance_stats::remote_normdevrxploss</a></div><div class="ttdeci">double remote_normdevrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00400">rtp_engine.h:400</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html">ast_rtp_engine_dtls</a></div><div class="ttdoc">Structure that represents the optional DTLS SRTP support within an RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00570">rtp_engine.h:570</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a42770fbfa361fd2b293397cdb436c508"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a42770fbfa361fd2b293397cdb436c508">rtp_ice_wrap_start</a></div><div class="ttdeci">static void rtp_ice_wrap_start(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02800">rtp_engine.c:2800</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a6bfb60287c258994663a8e7749e08532"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a6bfb60287c258994663a8e7749e08532">ast_rtp_instance_bundle</a></div><div class="ttdeci">int ast_rtp_instance_bundle(struct ast_rtp_instance *child, struct ast_rtp_instance *parent)</div><div class="ttdoc">Request that an RTP instance be bundled with another. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03804">rtp_engine.c:3804</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dc6fa9191c19396cfaa57113f5b4af2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a></div><div class="ttdeci">void ast_format_cap_remove_by_type(struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Remove all formats matching a specific format type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00525">format_cap.c:525</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a066dafb1cdc02b25e6c2329ef7e7a810"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a066dafb1cdc02b25e6c2329ef7e7a810">ast_rtp_instance_stats::rxcount</a></div><div class="ttdeci">unsigned int rxcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00370">rtp_engine.h:370</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_aa2c5cde089c8208c01148d63c51c24cd"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#aa2c5cde089c8208c01148d63c51c24cd">debug_category_rtp_packet_id</a></div><div class="ttdeci">static uintmax_t debug_category_rtp_packet_id</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03543">rtp_engine.c:3543</a></div></div>
<div class="ttc" id="json_8h_html_a3d675e52f866630a6a03302df2712b8d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a3d675e52f866630a6a03302df2712b8d">ast_json_array_append</a></div><div class="ttdeci">int ast_json_array_append(struct ast_json *array, struct ast_json *value)</div><div class="ttdoc">Append to an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00368">json.c:368</a></div></div>
<div class="ttc" id="format__cap_8h_html"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html">format_cap.h</a></div><div class="ttdoc">Format Capabilities API. </div></div>
<div class="ttc" id="rtp__engine_8h_html_a4e13c63955f3824b62d1d11a1f6b56f4aec5333d6a6da67cd5117484b74e32764"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4e13c63955f3824b62d1d11a1f6b56f4aec5333d6a6da67cd5117484b74e32764">AST_RTP_DTLS_VERIFY_CERTIFICATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00536">rtp_engine.h:536</a></div></div>
<div class="ttc" id="structrtp__extmap_html_a4bb2bd134a0e0119df9ff9d62dcc3df2"><div class="ttname"><a href="../../d4/dec/structrtp__extmap.html#a4bb2bd134a0e0119df9ff9d62dcc3df2">rtp_extmap::direction</a></div><div class="ttdeci">enum ast_rtp_extension_direction direction</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00185">rtp_engine.c:185</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_aa0390ab4031deb2ac5b219d2547beb47"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#aa0390ab4031deb2ac5b219d2547beb47">ast_rtp_instance::srtp</a></div><div class="ttdeci">struct ast_srtp * srtp</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00215">rtp_engine.c:215</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a48d78c6056c1d46bd4b8630fdcd9ba2f"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a48d78c6056c1d46bd4b8630fdcd9ba2f">rtp_topic</a></div><div class="ttdeci">static struct stasis_topic * rtp_topic</div><div class="ttdoc">Stasis Message Bus API topic for RTP related messages </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00278">rtp_engine.c:278</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a008c70da51a5d4e337f5857dc14e3ef4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4">ast_rtp_dtls_setup</a></div><div class="ttdeci">ast_rtp_dtls_setup</div><div class="ttdoc">DTLS setup types. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00513">rtp_engine.h:513</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a3b68fb69b6b56f6b33adf672a770341d"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a3b68fb69b6b56f6b33adf672a770341d">ast_rtp_instance::incoming_source_address</a></div><div class="ttdeci">struct ast_sockaddr incoming_source_address</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00201">rtp_engine.c:201</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a782aff512368932b8d71b3633f88cb04"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a782aff512368932b8d71b3633f88cb04">ast_rtp_engine::mod</a></div><div class="ttdeci">struct ast_module * mod</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00618">rtp_engine.h:618</a></div></div>
<div class="ttc" id="strings_8h_html_ae07f46b125b1fc1520b076ff8b8c4ad8"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ae07f46b125b1fc1520b076ff8b8c4ad8">ast_str_to_upper</a></div><div class="ttdeci">static force_inline char * ast_str_to_upper(char *str)</div><div class="ttdoc">Convert a string to all upper-case. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01289">strings.h:1289</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_aa102598d55cb66a61cece8e3033e5352"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#aa102598d55cb66a61cece8e3033e5352">ast_rtp_instance_stats::remote_maxrxploss</a></div><div class="ttdeci">double remote_maxrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00396">rtp_engine.h:396</a></div></div>
<div class="ttc" id="manager_8h_html"><div class="ttname"><a href="../../db/d45/manager_8h.html">manager.h</a></div><div class="ttdoc">The AMI - Asterisk Manager Interface - is a TCP protocol created to manage Asterisk with third-party ...</div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga501ac56386fce3535f67353537a508e7"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga501ac56386fce3535f67353537a508e7">AST_LOG_CATEGORY_RTCP_PACKET</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_RTCP_PACKET</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02830">rtp_engine.h:2830</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf195fcf1686408b5e52ad76996653cea"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf195fcf1686408b5e52ad76996653cea">ast_channel_stage_snapshot</a></div><div class="ttdeci">void ast_channel_stage_snapshot(struct ast_channel *chan)</div><div class="ttdoc">Set flag to indicate channel snapshot is being staged. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01038">stasis_channels.c:1038</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a689bd82c4ef41ba9dd5ef55bf3039ed9"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a689bd82c4ef41ba9dd5ef55bf3039ed9">ast_rtp_engine_ice::get_ufrag</a></div><div class="ttdeci">const char *(* get_ufrag)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00495">rtp_engine.h:495</a></div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html_a63be54a0beac1f5717217e1d9e629c71"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html#a63be54a0beac1f5717217e1d9e629c71">ast_rtp_dtls_cfg::enabled</a></div><div class="ttdeci">unsigned int enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00555">rtp_engine.h:555</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2e23ae1958d7f6f4a2066eea024bed6ba886ad8bf6124c2be38ee1b4268951d86"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6ba886ad8bf6124c2be38ee1b4268951d86">AST_RTP_DTLS_HASH_SHA256</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00528">rtp_engine.h:528</a></div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html_a075239f44062ff847b685bc030c60258"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html#a075239f44062ff847b685bc030c60258">ast_rtp_dtls_cfg::default_setup</a></div><div class="ttdeci">enum ast_rtp_dtls_setup default_setup</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00557">rtp_engine.h:557</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a5d941ba857d4b650b574bb71c10633e3"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a5d941ba857d4b650b574bb71c10633e3">ast_rtp_engine_ice::set_authentication</a></div><div class="ttdeci">void(* set_authentication)(struct ast_rtp_instance *instance, const char *ufrag, const char *password)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00487">rtp_engine.h:487</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a2641bab7842e6a448b53f26689bef1d2"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a2641bab7842e6a448b53f26689bef1d2">ast_rtp_rtcp_report_block::dlsr</a></div><div class="ttdeci">unsigned int dlsr</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00325">rtp_engine.h:325</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a368880aa0afe3ee532508eff1ba26882"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a368880aa0afe3ee532508eff1ba26882">ast_rtp_instance_get_test</a></div><div class="ttdeci">struct ast_rtp_engine_test * ast_rtp_instance_get_test(struct ast_rtp_instance *instance)</div><div class="ttdoc">Obtain a pointer to the test callbacks on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02901">rtp_engine.c:2901</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_ad9e0112e5a3834937c4f84604c175ba6"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#ad9e0112e5a3834937c4f84604c175ba6">ast_rtp_instance_stats::maxrtt</a></div><div class="ttdeci">double maxrtt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00414">rtp_engine.h:414</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a9109d5d56fd169b19d0c3760a6faa37a"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a9109d5d56fd169b19d0c3760a6faa37a">ast_rtp_codecs_payloads_unset</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_unset(struct ast_rtp_codecs *codecs, struct ast_rtp_instance *instance, int payload)</div><div class="ttdoc">Remove tx payload type mapped information. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01433">rtp_engine.c:1433</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ad01e15ecfeaebeaf55cf0c984ee9ff2f"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ad01e15ecfeaebeaf55cf0c984ee9ff2f">ast_rtp_instance_dtmf_end</a></div><div class="ttdeci">int ast_rtp_instance_dtmf_end(struct ast_rtp_instance *instance, char digit)</div><div class="ttdoc">Stop sending a DTMF digit. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02095">rtp_engine.c:2095</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_ab640b169de1a9a47a400837e5e6294be"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#ab640b169de1a9a47a400837e5e6294be">ast_rtp_engine::dtmf_begin</a></div><div class="ttdeci">int(* dtmf_begin)(struct ast_rtp_instance *instance, char digit)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00628">rtp_engine.h:628</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a2a6d7aa36b2926258868ecd1971e1123"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a2a6d7aa36b2926258868ecd1971e1123">ast_rtp_engine_ice::get_local_candidates</a></div><div class="ttdeci">struct ao2_container *(* get_local_candidates)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00499">rtp_engine.h:499</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a6755911cdc9335fc23089602dbbcd048"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a6755911cdc9335fc23089602dbbcd048">ast_rtp_instance_stats::rxoctetcount</a></div><div class="ttdeci">unsigned int rxoctetcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00430">rtp_engine.h:430</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00160">rtp_engine.h:160</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a2ef79ef84e3dcb1e1378ddef1a1e07b9"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a2ef79ef84e3dcb1e1378ddef1a1e07b9">ast_rtp_engine_srtp_is_registered</a></div><div class="ttdeci">int ast_rtp_engine_srtp_is_registered(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02731">rtp_engine.c:2731</a></div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html_a1554c0cf3ee13f4628dc8725897de877"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html#a1554c0cf3ee13f4628dc8725897de877">ast_rtp_dtls_cfg::verify</a></div><div class="ttdeci">enum ast_rtp_dtls_verify verify</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00560">rtp_engine.h:560</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_afe951ef8ac0fe6aae0db42ce12bb3791"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#afe951ef8ac0fe6aae0db42ce12bb3791">ast_rtp_glue_unregister</a></div><div class="ttdeci">int ast_rtp_glue_unregister(struct ast_rtp_glue *glue)</div><div class="ttdoc">Unregister RTP glue. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00408">rtp_engine.c:408</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0">ast_rtp_extension_direction</a></div><div class="ttdeci">ast_rtp_extension_direction</div><div class="ttdoc">Directions for RTP extensions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00769">rtp_engine.h:769</a></div></div>
<div class="ttc" id="structengines_html"><div class="ttname"><a href="../../d2/d7a/structengines.html">engines</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00242">rtp_engine.c:242</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_af58e44433a3cc62c2051f3aa29415295"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#af58e44433a3cc62c2051f3aa29415295">ast_rtp_engine_ice::set_role</a></div><div class="ttdeci">void(* set_role)(struct ast_rtp_instance *instance, enum ast_rtp_ice_role role)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00503">rtp_engine.h:503</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a345269c0d57add15c919b781d140e011"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a345269c0d57add15c919b781d140e011">ast_rtp_instance_stats::local_ssrc</a></div><div class="ttdeci">unsigned int local_ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00422">rtp_engine.h:422</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a6be325a64ef4f7a8b326a7d1feb41806"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a6be325a64ef4f7a8b326a7d1feb41806">ast_rtp_engine::dtmf_mode_set</a></div><div class="ttdeci">int(* dtmf_mode_set)(struct ast_rtp_instance *instance, enum ast_rtp_dtmf_mode dtmf_mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00647">rtp_engine.h:647</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="format__cache_8h_html_a4cce4fa68c1815b942eb3882d14b9a81"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a4cce4fa68c1815b942eb3882d14b9a81">ast_format_speex</a></div><div class="ttdeci">struct ast_format * ast_format_speex</div><div class="ttdoc">Built-in cached speex format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00136">format_cache.c:136</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9626fb58facd7ece2578af893daf998f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9626fb58facd7ece2578af893daf998f">ast_rtp_dtls_connection</a></div><div class="ttdeci">ast_rtp_dtls_connection</div><div class="ttdoc">DTLS connection states. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00521">rtp_engine.h:521</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_ac893b0c6eaa1db883bb28dada51a9f8f"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#ac893b0c6eaa1db883bb28dada51a9f8f">ast_rtp_engine::ice</a></div><div class="ttdeci">struct ast_rtp_engine_ice * ice</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00691">rtp_engine.h:691</a></div></div>
<div class="ttc" id="structast__rtp__payload__type_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../dd/de9/structast__rtp__payload__type.html#ab425a484a0916077c5a30d9d7b229b44">ast_rtp_payload_type::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00278">rtp_engine.h:278</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a3b0f72469b7dba2f2c7b83b1c7fce4a7"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a3b0f72469b7dba2f2c7b83b1c7fce4a7">rtcp_message_payload_dtor</a></div><div class="ttdeci">static void rtcp_message_payload_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03288">rtp_engine.c:3288</a></div></div>
<div class="ttc" id="lock_8h_html_a9b07039db138693d1ebe02c3e99ddcab"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a9b07039db138693d1ebe02c3e99ddcab">ast_rwlock_init</a></div><div class="ttdeci">#define ast_rwlock_init(rwlock)</div><div class="ttdoc">wrapper for rwlock with tracking enabled </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00222">lock.h:222</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_af397c6999030588cb522be44806d8f6c"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#af397c6999030588cb522be44806d8f6c">ast_rtp_engine::extended_prop_set</a></div><div class="ttdeci">int(* extended_prop_set)(struct ast_rtp_instance *instance, int property, void *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00637">rtp_engine.h:637</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_ac9fdf1f68624cc570128ec4c495d46e6"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#ac9fdf1f68624cc570128ec4c495d46e6">ast_rtp_engine::ssrc_get</a></div><div class="ttdeci">unsigned int(* ssrc_get)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00681">rtp_engine.h:681</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a780f0265a52bd60c73dae5de67dbe12c"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a780f0265a52bd60c73dae5de67dbe12c">debug_category_ice_id</a></div><div class="ttdeci">static uintmax_t debug_category_ice_id</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03578">rtp_engine.c:3578</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4ae8179d33ea9515b49d8d088a496a43aaa0e3bc6b178504c7980664b84f80fc8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43aaa0e3bc6b178504c7980664b84f80fc8">AST_RTP_INSTANCE_STAT_FIELD_QUALITY_RTT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00176">rtp_engine.h:176</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a714c07488215920fd58af23fae732e84"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a714c07488215920fd58af23fae732e84">debug_category_rtcp_packet_id</a></div><div class="ttdeci">static uintmax_t debug_category_rtcp_packet_id</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03557">rtp_engine.c:3557</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_aa4a007f1e87a4af7c5edf93d11738e06"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#aa4a007f1e87a4af7c5edf93d11738e06">ast_rtp_dtls_cfg_parse</a></div><div class="ttdeci">int ast_rtp_dtls_cfg_parse(struct ast_rtp_dtls_cfg *dtls_cfg, const char *name, const char *value)</div><div class="ttdoc">Parse DTLS related configuration options. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03020">rtp_engine.c:3020</a></div></div>
<div class="ttc" id="structast__rtp__glue_html_a782aff512368932b8d71b3633f88cb04"><div class="ttname"><a href="../../d8/dc9/structast__rtp__glue.html#a782aff512368932b8d71b3633f88cb04">ast_rtp_glue::mod</a></div><div class="ttdeci">struct ast_module * mod</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00724">rtp_engine.h:724</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a4af76bf8343e7b7e286ca092fbd814cc"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a4af76bf8343e7b7e286ca092fbd814cc">rtp_ice_wrap_get_password</a></div><div class="ttdeci">static const char * rtp_ice_wrap_get_password(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02824">rtp_engine.c:2824</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_af0a068e62b23d45baeffebf5250afd21"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#af0a068e62b23d45baeffebf5250afd21">ast_rtp_rtcp_report::packet_count</a></div><div class="ttdeci">unsigned int packet_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00338">rtp_engine.h:338</a></div></div>
<div class="ttc" id="format__cache_8h_html_ab67520222c2e1418df2d806e2184be22"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#ab67520222c2e1418df2d806e2184be22">ast_format_vp9</a></div><div class="ttdeci">struct ast_format * ast_format_vp9</div><div class="ttdoc">Built-in cached vp9 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00201">format_cache.c:201</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_a1229bdedff51a0fc453b7c482cd8dd49"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#a1229bdedff51a0fc453b7c482cd8dd49">sip_to_pjsip.ignore</a></div><div class="ttdeci">def ignore(key=None, val=None, section=None, pjsip=None, nmapped=None, type='endpoint')</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l00048">sip_to_pjsip.py:48</a></div></div>
<div class="ttc" id="structrtp__extmap_html_a1ac00de8d6d1907b657473b294e1c973"><div class="ttname"><a href="../../d4/dec/structrtp__extmap.html#a1ac00de8d6d1907b657473b294e1c973">rtp_extmap::extension</a></div><div class="ttdeci">enum ast_rtp_extension extension</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00183">rtp_engine.c:183</a></div></div>
<div class="ttc" id="format__cache_8h_html_a06f47624d806b644d86c3b2828eafdc1"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a06f47624d806b644d86c3b2828eafdc1">ast_format_h264</a></div><div class="ttdeci">struct ast_format * ast_format_h264</div><div class="ttdoc">Built-in cached h264 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00181">format_cache.c:181</a></div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html_a333dffcec025fcdbee0676476f401685"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html#a333dffcec025fcdbee0676476f401685">ast_rtp_dtls_cfg::certfile</a></div><div class="ttdeci">char * certfile</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00561">rtp_engine.h:561</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a9e10385ac55d32d10ef322d1a08a699d"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a9e10385ac55d32d10ef322d1a08a699d">ast_rtp_rtcp_report::ssrc</a></div><div class="ttdeci">unsigned int ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00333">rtp_engine.h:333</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_a5fdb99ab3638c0edd7f6cb268f4c4598"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#a5fdb99ab3638c0edd7f6cb268f4c4598">ast_rtp_engine_dtls::reset</a></div><div class="ttdeci">void(* reset)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00578">rtp_engine.h:578</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_abfe1a23abb6f048f5931e977134df78f"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#abfe1a23abb6f048f5931e977134df78f">ast_rtp_instance_available_formats</a></div><div class="ttdeci">void ast_rtp_instance_available_formats(struct ast_rtp_instance *instance, struct ast_format_cap *to_endpoint, struct ast_format_cap *to_asterisk, struct ast_format_cap *result)</div><div class="ttdoc">Request the formats that can be transcoded. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02633">rtp_engine.c:2633</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2e23ae1958d7f6f4a2066eea024bed6b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6b">ast_rtp_dtls_hash</a></div><div class="ttdeci">ast_rtp_dtls_hash</div><div class="ttdoc">DTLS fingerprint hashes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00527">rtp_engine.h:527</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a280c99fea26b9f464272844eb0310713"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a280c99fea26b9f464272844eb0310713">ast_rtp_instance::properties</a></div><div class="ttdeci">int properties[AST_RTP_PROPERTY_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00195">rtp_engine.c:195</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a566ad2621a8d1010836f3eaa2c1ddbe3"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a566ad2621a8d1010836f3eaa2c1ddbe3">res_srtp_policy</a></div><div class="ttdeci">struct ast_srtp_policy_res * res_srtp_policy</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00178">rtp_engine.c:178</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="stasis__channels_8h_html_a7571e6d10d716525aaa64b1f6583979b"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_channel_snapshot_to_json(const struct ast_channel_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_channel_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01255">stasis_channels.c:1255</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_afd196e2ba79659dff0799d49494e8b45"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#afd196e2ba79659dff0799d49494e8b45">AST_RTP_CISCO_DTMF</a></div><div class="ttdeci">#define AST_RTP_CISCO_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00270">rtp_engine.h:270</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ac16c0d5f1f3b455a2232f62ce4e2f5f5"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ac16c0d5f1f3b455a2232f62ce4e2f5f5">ast_rtp_codecs_payload_replace_format</a></div><div class="ttdeci">int ast_rtp_codecs_payload_replace_format(struct ast_rtp_codecs *codecs, int payload, struct ast_format *format)</div><div class="ttdoc">Update the format associated with a tx payload type in a codecs structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01503">rtp_engine.c:1503</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_af77702faece7e8cc93042e21eb2ed05c"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#af77702faece7e8cc93042e21eb2ed05c">ast_rtp_codecs_payload_code</a></div><div class="ttdeci">int ast_rtp_codecs_payload_code(struct ast_rtp_codecs *codecs, int asterisk_format, struct ast_format *format, int code)</div><div class="ttdoc">Retrieve a rx mapped payload type based on whether it is an Asterisk format and the code...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01873">rtp_engine.c:1873</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a934ff2437b6705676a1f8fb9223e8e9b"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a934ff2437b6705676a1f8fb9223e8e9b">ast_rtp_instance_stats::txploss</a></div><div class="ttdeci">unsigned int txploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00392">rtp_engine.h:392</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a5dfbf8015bcb4758806ff3e946dbd767"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a5dfbf8015bcb4758806ff3e946dbd767">rtp_dtls_wrap_get_setup</a></div><div class="ttdeci">static enum ast_rtp_dtls_setup rtp_dtls_wrap_get_setup(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02952">rtp_engine.c:2952</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a2f646e49dad8b7c0b6082ecaa2f2ff74"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a2f646e49dad8b7c0b6082ecaa2f2ff74">static_RTP_PT</a></div><div class="ttdeci">static struct ast_rtp_payload_type * static_RTP_PT[AST_RTP_MAX_PT]</div><div class="ttdoc">Mapping between Asterisk codecs and rtp payload types. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00274">rtp_engine.c:274</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a615d95dd4609b2cfa36d6de12c548d7f"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a615d95dd4609b2cfa36d6de12c548d7f">ast_rtp_engine_ice::start</a></div><div class="ttdeci">void(* start)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00491">rtp_engine.h:491</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a799d79c026de98946ba12101f2b32919"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a799d79c026de98946ba12101f2b32919">ast_rtp_rtcp_report_block::ia_jitter</a></div><div class="ttdeci">unsigned int ia_jitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00323">rtp_engine.h:323</a></div></div>
<div class="ttc" id="structast__srtp__policy__res_html"><div class="ttname"><a href="../../d6/d13/structast__srtp__policy__res.html">ast_srtp_policy_res</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/res__srtp_8h_source.html#l00070">res_srtp.h:70</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a941a9378002f077f9fbd97da4eaee561"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a941a9378002f077f9fbd97da4eaee561">ast_rtp_instance_set_remote_ssrc</a></div><div class="ttdeci">void ast_rtp_instance_set_remote_ssrc(struct ast_rtp_instance *rtp, unsigned int ssrc)</div><div class="ttdoc">Set the remote SSRC for an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03821">rtp_engine.c:3821</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a3514f29b438a855f44f440c7cb8d2800"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a3514f29b438a855f44f440c7cb8d2800">ast_rtp_instance_dtmf_mode_set</a></div><div class="ttdeci">int ast_rtp_instance_dtmf_mode_set(struct ast_rtp_instance *instance, enum ast_rtp_dtmf_mode dtmf_mode)</div><div class="ttdoc">Set the DTMF mode that should be used. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02123">rtp_engine.c:2123</a></div></div>
<div class="ttc" id="structast__rtp__engine__test_html_a630ea1ce30dc302ad4e7189bfaa4ae1c"><div class="ttname"><a href="../../d5/d98/structast__rtp__engine__test.html#a630ea1ce30dc302ad4e7189bfaa4ae1c">ast_rtp_engine_test::set_schedid</a></div><div class="ttdeci">void(* set_schedid)(struct ast_rtp_instance *instance, int id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00609">rtp_engine.h:609</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a109bb69fd01ee2a9cf4d1583d61b4a1e"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a109bb69fd01ee2a9cf4d1583d61b4a1e">ast_rtp_instance::rtcp_srtp</a></div><div class="ttdeci">struct ast_srtp * rtcp_srtp</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00217">rtp_engine.c:217</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gadd41839a7dede33bd5dc1e9a3b41e173"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gadd41839a7dede33bd5dc1e9a3b41e173">ast_debug_category_dtls_id</a></div><div class="ttdeci">uintmax_t ast_debug_category_dtls_id(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03566">rtp_engine.c:3566</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_afd17d491c79ff44d0a69a2df395d8869"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#afd17d491c79ff44d0a69a2df395d8869">ast_rtp_engine_dtls::set_setup</a></div><div class="ttdeci">void(* set_setup)(struct ast_rtp_instance *instance, enum ast_rtp_dtls_setup setup)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00584">rtp_engine.h:584</a></div></div>
<div class="ttc" id="res__pjsip__exten__state_8c_html_ae8731a90be4dc2d8272b7dfd8a001d4c"><div class="ttname"><a href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a></div><div class="ttdeci">static void to_ami(struct ast_sip_subscription *sub, struct ast_str **buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00542">res_pjsip_exten_state.c:542</a></div></div>
<div class="ttc" id="json_8h_html_afe370c61fc9aae489b7d4c8c9f6968d8"><div class="ttname"><a href="../../d4/d05/json_8h.html#afe370c61fc9aae489b7d4c8c9f6968d8">ast_json_real_get</a></div><div class="ttdeci">double ast_json_real_get(const struct ast_json *real)</div><div class="ttdoc">Get the value from a JSON real number. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00337">json.c:337</a></div></div>
<div class="ttc" id="__private_8h_html"><div class="ttname"><a href="../../d4/d78/__private_8h.html">_private.h</a></div><div class="ttdoc">Prototypes for public functions only of internal interest,. </div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga7fadd9ceea8dd8eed05d9d9a544ff007"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga7fadd9ceea8dd8eed05d9d9a544ff007">AST_LOG_CATEGORY_RTP</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_RTP</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02824">rtp_engine.h:2824</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a27e0280249323e0da56892bd8d4c0a15"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a27e0280249323e0da56892bd8d4c0a15">ast_rtp_engine::qos</a></div><div class="ttdeci">int(* qos)(struct ast_rtp_instance *instance, int tos, int cos, const char *desc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00653">rtp_engine.h:653</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a8f8f80d37794cde9472343e4487ba3eb">ast_rtp_engine::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00616">rtp_engine.h:616</a></div></div>
<div class="ttc" id="vector_8h_html"><div class="ttname"><a href="../../d6/d68/vector_8h.html">vector.h</a></div><div class="ttdoc">Vector container support. </div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gad193e738ab3f30ba62fb2239823fe47a"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gad193e738ab3f30ba62fb2239823fe47a">ast_rtp_instance_get_recv_buffer_count</a></div><div class="ttdeci">size_t ast_rtp_instance_get_recv_buffer_count(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the current size of the receive buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03857">rtp_engine.c:3857</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a6652499b3aff8f317d4c6d1a36c6c740"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a6652499b3aff8f317d4c6d1a36c6c740">ast_rtp_instance::local_address</a></div><div class="ttdeci">struct ast_sockaddr local_address</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00197">rtp_engine.c:197</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a6df8d099f7707c0fed3ed7928b059a81"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a6df8d099f7707c0fed3ed7928b059a81">ast_rtp_engine::set_remote_ssrc</a></div><div class="ttdeci">void(* set_remote_ssrc)(struct ast_rtp_instance *instance, unsigned int ssrc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00687">rtp_engine.h:687</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga354a7a05dfbbf7392f398f516cd12cd7"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga354a7a05dfbbf7392f398f516cd12cd7">AST_LOG_CATEGORY_ICE</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_ICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02836">rtp_engine.h:2836</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_af63b14f966292c58be12163e0df79924"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#af63b14f966292c58be12163e0df79924">ast_rtp_instance_add_srtp_policy</a></div><div class="ttdeci">int ast_rtp_instance_add_srtp_policy(struct ast_rtp_instance *instance, struct ast_srtp_policy *remote_policy, struct ast_srtp_policy *local_policy, int rtcp)</div><div class="ttdoc">Add or replace the SRTP policies for the given RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02736">rtp_engine.c:2736</a></div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html_a82439f35f3dc722e1229ddb5cf0af0b3"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html#a82439f35f3dc722e1229ddb5cf0af0b3">ast_rtp_dtls_cfg::ephemeral_cert</a></div><div class="ttdeci">unsigned int ephemeral_cert</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00566">rtp_engine.h:566</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a729a53f6bd23a458daf9e8f13e69e6a0"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a729a53f6bd23a458daf9e8f13e69e6a0">ast_rtp_codecs_payloads_set_m_type</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_set_m_type(struct ast_rtp_codecs *codecs, struct ast_rtp_instance *instance, int payload)</div><div class="ttdoc">Record tx payload type information that was seen in an m= SDP line. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01301">rtp_engine.c:1301</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a95ccef8388e3b0e9c9639e393d4081b6ad570d49420fe15c4660793d1fc2f0fc8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6ad570d49420fe15c4660793d1fc2f0fc8">AST_RTP_OPT_G726_NONSTANDARD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00144">rtp_engine.h:144</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3054d1eb4ca6e3e9bfd97bc54ff6e6ee"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6ee">ast_rtp_dtmf_mode</a></div><div class="ttdeci">ast_rtp_dtmf_mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00148">rtp_engine.h:148</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0a0d60b69da92022238da4440d7acdebb3"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a0d60b69da92022238da4440d7acdebb3">AST_RTP_EXTENSION_DIRECTION_SENDRECV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00773">rtp_engine.h:773</a></div></div>
<div class="ttc" id="structast__rtp__engine__test_html"><div class="ttname"><a href="../../d5/d98/structast__rtp__engine__test.html">ast_rtp_engine_test</a></div><div class="ttdoc">Structure that represents the test functionality for res_rtp_asterisk unit tests. ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00595">rtp_engine.h:595</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga61285a9e7352a27c4ff117b79cb369ee"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga61285a9e7352a27c4ff117b79cb369ee">AST_LOG_CATEGORY_RTCP</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_RTCP</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02828">rtp_engine.h:2828</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2e23ae1958d7f6f4a2066eea024bed6ba23d971ca86d4499d5bd2b83195ff7fd6"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6ba23d971ca86d4499d5bd2b83195ff7fd6">AST_RTP_DTLS_HASH_SHA1</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00529">rtp_engine.h:529</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_ad3da1044f5b8b43756856afbb91abb5b"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#ad3da1044f5b8b43756856afbb91abb5b">ast_rtp_engine::set_stream_num</a></div><div class="ttdeci">void(* set_stream_num)(struct ast_rtp_instance *instance, int stream_num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00689">rtp_engine.h:689</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_aabeecaca7b5700a968c47257fc9a08f9"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#aabeecaca7b5700a968c47257fc9a08f9">set_next_mime_type</a></div><div class="ttdeci">static void set_next_mime_type(struct ast_format *format, int rtp_code, const char *type, const char *subtype, unsigned int sample_rate)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03155">rtp_engine.c:3155</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_abf8f7e808be60b78811d0435b6af4d42"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#abf8f7e808be60b78811d0435b6af4d42">ast_rtp_instance_set_incoming_source_address</a></div><div class="ttdeci">int ast_rtp_instance_set_incoming_source_address(struct ast_rtp_instance *instance, const struct ast_sockaddr *address)</div><div class="ttdoc">Set the incoming source address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00606">rtp_engine.c:606</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a27714e89a2a2d136150789bc6d41e060"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a27714e89a2a2d136150789bc6d41e060">ast_rtp_instance_set_last_rx</a></div><div class="ttdeci">void ast_rtp_instance_set_last_rx(struct ast_rtp_instance *rtp, time_t time)</div><div class="ttdoc">Set the last RTP reception time. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03773">rtp_engine.c:3773</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a4bfea42429249a1f65204f0c0f34704a"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a4bfea42429249a1f65204f0c0f34704a">ast_rtp_rtcp_report::type</a></div><div class="ttdeci">unsigned int type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00334">rtp_engine.h:334</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a13410845c195aa1581b6ec6afd0526df"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a13410845c195aa1581b6ec6afd0526df">rtp_ice_wrap_turn_request</a></div><div class="ttdeci">static void rtp_ice_wrap_turn_request(struct ast_rtp_instance *instance, enum ast_rtp_ice_component_type component, enum ast_transport transport, const char *server, unsigned int port, const char *username, const char *password)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02859">rtp_engine.c:2859</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_ab1dad022a5ddda6f009706c2f796458e"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#ab1dad022a5ddda6f009706c2f796458e">ast_rtp_engine::stun_request</a></div><div class="ttdeci">void(* stun_request)(struct ast_rtp_instance *instance, struct ast_sockaddr *suggestion, const char *username)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00675">rtp_engine.h:675</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a2d86b8c1a98801a092a3bbb72519cd37"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a2d86b8c1a98801a092a3bbb72519cd37">ast_rtp_instance_set_requested_target_address</a></div><div class="ttdeci">int ast_rtp_instance_set_requested_target_address(struct ast_rtp_instance *instance, const struct ast_sockaddr *address)</div><div class="ttdoc">Set the requested target address of the remote endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00616">rtp_engine.c:616</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a5ce1d82b3b4353dc9df8d473b1c8da67"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a5ce1d82b3b4353dc9df8d473b1c8da67">ast_rtp_instance::requested_target_address</a></div><div class="ttdeci">struct ast_sockaddr requested_target_address</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00199">rtp_engine.c:199</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914c">ast_rtp_property</a></div><div class="ttdeci">ast_rtp_property</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00113">rtp_engine.h:113</a></div></div>
<div class="ttc" id="logger_8h_html"><div class="ttname"><a href="../../d1/d8c/logger_8h.html">logger.h</a></div><div class="ttdoc">Support for logging to various files, console and syslog Configuration in file logger.conf. </div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gacbf4ba18d5db2721e5d4d8de22a27886"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gacbf4ba18d5db2721e5d4d8de22a27886">ast_rtp_instance_drop_packets</a></div><div class="ttdeci">void ast_rtp_instance_drop_packets(struct ast_rtp_instance *instance, int num)</div><div class="ttdoc">Set the number of packets to drop on RTP read. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03905">rtp_engine.c:3905</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a7dbc5b0f6d95748fb627dbdf063bb451"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a7dbc5b0f6d95748fb627dbdf063bb451">ast_rtp_instance_set_extended_prop</a></div><div class="ttdeci">void ast_rtp_instance_set_extended_prop(struct ast_rtp_instance *instance, int property, void *value)</div><div class="ttdoc">Set the value of an RTP instance extended property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00681">rtp_engine.c:681</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_aadfdc9692fcc3eb56f7c94f089db163b"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#aadfdc9692fcc3eb56f7c94f089db163b">ast_rtp_instance_stats::txjitter</a></div><div class="ttdeci">double txjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00372">rtp_engine.h:372</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_af7e8539422966e6361e123389cc9f31c"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#af7e8539422966e6361e123389cc9f31c">payload_mapping_tx_is_present</a></div><div class="ttdeci">static int payload_mapping_tx_is_present(const struct ast_rtp_codecs *codecs, const struct ast_rtp_payload_type *to_match)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01144">rtp_engine.c:1144</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a71b52e664623eb3a1f882d995dd2b499"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a71b52e664623eb3a1f882d995dd2b499">ast_rtp_instance::bridged</a></div><div class="ttdeci">struct ast_rtp_instance * bridged</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00203">rtp_engine.c:203</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a0cd9148a53de0315aa839694cea4938e"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a0cd9148a53de0315aa839694cea4938e">ast_rtp_instance::holdtimeout</a></div><div class="ttdeci">int holdtimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00209">rtp_engine.c:209</a></div></div>
<div class="ttc" id="logger__category_8h_html_a9ba7f0bc9232e62fe9af86624b6a83f9"><div class="ttname"><a href="../../d5/d1f/logger__category_8h.html#a9ba7f0bc9232e62fe9af86624b6a83f9">ast_debug_category_unregister</a></div><div class="ttdeci">int ast_debug_category_unregister(const char *name)</div><div class="ttdoc">Un-register a debug level logger category. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d87/logger__category_8c_source.html#l00284">logger_category.c:284</a></div></div>
<div class="ttc" id="lock_8h_html_a045bd81ceab2de81e42af338ad7cf121"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a></div><div class="ttdeci">#define ast_rwlock_wrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00234">lock.h:234</a></div></div>
<div class="ttc" id="structast__rtp__codecs_html"><div class="ttname"><a href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00705">rtp_engine.h:705</a></div></div>
<div class="ttc" id="module_8h_html_ad2dd3dce05926913c40b883cc7cff0a8"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2dd3dce05926913c40b883cc7cff0a8">ast_module_running_ref</a></div><div class="ttdeci">#define ast_module_running_ref(mod)</div><div class="ttdoc">Hold a reference to the module if it is running. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00455">module.h:455</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a856782043343a9201074dd948a9d312a"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a856782043343a9201074dd948a9d312a">ast_rtp_engine::set_read_format</a></div><div class="ttdeci">int(* set_read_format)(struct ast_rtp_instance *instance, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00665">rtp_engine.h:665</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_ac0a16b9afb840b589358fec8953ba092"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#ac0a16b9afb840b589358fec8953ba092">ast_rtp_instance_stats::local_stdevjitter</a></div><div class="ttdeci">double local_stdevjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00390">rtp_engine.h:390</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a199d704f3867124fe0f56f4c8856a0b4"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a199d704f3867124fe0f56f4c8856a0b4">ast_rtp_rtcp_report_alloc</a></div><div class="ttdeci">struct ast_rtp_rtcp_report * ast_rtp_rtcp_report_alloc(unsigned int report_blocks)</div><div class="ttdoc">Allocate an ao2 ref counted instance of ast_rtp_rtcp_report. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03474">rtp_engine.c:3474</a></div></div>
<div class="ttc" id="channel_8h_html_a695e5b4fcf983db6451b583fbd647424"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a></div><div class="ttdeci">#define ast_channel_lock_both(chan1, chan2)</div><div class="ttdoc">Lock two channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02952">channel.h:2952</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_aedb3ea08a82c48e8817dd7458319d22f"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#aedb3ea08a82c48e8817dd7458319d22f">ast_rtp_instance_get_channel_id</a></div><div class="ttdeci">const char * ast_rtp_instance_get_channel_id(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the unique ID of the channel that owns this RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00548">rtp_engine.c:548</a></div></div>
<div class="ttc" id="manager_8h_html_a0b1b4140c2836696a6950e92ab48a580"><div class="ttname"><a href="../../db/d45/manager_8h.html#a0b1b4140c2836696a6950e92ab48a580">EVENT_FLAG_REPORTING</a></div><div class="ttdeci">#define EVENT_FLAG_REPORTING</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00080">manager.h:80</a></div></div>
<div class="ttc" id="json_8h_html_a5892d6cd943e00556180fcf15d30788e"><div class="ttname"><a href="../../d4/d05/json_8h.html#a5892d6cd943e00556180fcf15d30788e">ast_json_object_create</a></div><div class="ttdeci">struct ast_json * ast_json_object_create(void)</div><div class="ttdoc">Create a new JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00389">json.c:389</a></div></div>
<div class="ttc" id="format__cache_8h_html_a3b2199894b5adbf010e1b6a38dff5ba7"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a3b2199894b5adbf010e1b6a38dff5ba7">ast_format_h265</a></div><div class="ttdeci">struct ast_format * ast_format_h265</div><div class="ttdoc">Built-in cached h265 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00186">format_cache.c:186</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_aa934032800e623e98f0c0dd039e503a9"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#aa934032800e623e98f0c0dd039e503a9">debug_category_dtls_id</a></div><div class="ttdeci">static uintmax_t debug_category_dtls_id</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03564">rtp_engine.c:3564</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_a19836f7d104212817c8d14ecf74add44"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#a19836f7d104212817c8d14ecf74add44">ast_rtp_engine_dtls::active</a></div><div class="ttdeci">int(* active)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00574">rtp_engine.h:574</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a852b2b1d8dbc848c5c27bd37f33e13e0"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a852b2b1d8dbc848c5c27bd37f33e13e0">ast_rtp_instance_set_local_address</a></div><div class="ttdeci">int ast_rtp_instance_set_local_address(struct ast_rtp_instance *instance, const struct ast_sockaddr *address)</div><div class="ttdoc">Set the address that we are expecting to receive RTP on. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00588">rtp_engine.c:588</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4ae8179d33ea9515b49d8d088a496a43"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43">ast_rtp_instance_stat_field</a></div><div class="ttdeci">ast_rtp_instance_stat_field</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00168">rtp_engine.h:168</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a735984d41155bc1032e09bece8f8d66d">ast_rtp_instance::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00193">rtp_engine.c:193</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a6c465b81bc33aa9018af0f972d31b243"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a6c465b81bc33aa9018af0f972d31b243">ast_rtp_instance_stun_request</a></div><div class="ttdeci">void ast_rtp_instance_stun_request(struct ast_rtp_instance *instance, struct ast_sockaddr *suggestion, const char *username)</div><div class="ttdoc">Request that the underlying RTP engine send a STUN BIND request. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02661">rtp_engine.c:2661</a></div></div>
<div class="ttc" id="format__cache_8h_html_a7dff267906fd29c091d89827230a3608"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a7dff267906fd29c091d89827230a3608">ast_format_siren7</a></div><div class="ttdeci">struct ast_format * ast_format_siren7</div><div class="ttdoc">Built-in cached siren7 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00221">format_cache.c:221</a></div></div>
<div class="ttc" id="strings_8h_html_aec1b0a2c5fdd41672184aecbb7ee4e3c"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aec1b0a2c5fdd41672184aecbb7ee4e3c">AS_OR</a></div><div class="ttdeci">#define AS_OR(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00049">strings.h:49</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a9fa64ce3bfd68a0990442e530f0e76df"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a9fa64ce3bfd68a0990442e530f0e76df">ast_rtp_instance::channel_uniqueid</a></div><div class="ttdeci">char channel_uniqueid[AST_MAX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00219">rtp_engine.c:219</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga32aaf4e901b01797fe9102ad7b5f68c9"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga32aaf4e901b01797fe9102ad7b5f68c9">ast_rtp_instance_get_recv_buffer_max</a></div><div class="ttdeci">size_t ast_rtp_instance_get_recv_buffer_max(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the maximum size of the receive buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03840">rtp_engine.c:3840</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="json_8h_html_a57efd086a0c219f41fc3f6ef20cd004d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a57efd086a0c219f41fc3f6ef20cd004d">ast_json_real_create</a></div><div class="ttdeci">struct ast_json * ast_json_real_create(double value)</div><div class="ttdoc">Create a JSON real number. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00332">json.c:332</a></div></div>
<div class="ttc" id="structast__rwlock__info_html"><div class="ttname"><a href="../../dc/d9e/structast__rwlock__info.html">ast_rwlock_info</a></div><div class="ttdoc">Structure for rwlock and tracking information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00156">lock.h:156</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="json_8h_html_a53707225c3bf831e263245c6e3800676"><div class="ttname"><a href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a></div><div class="ttdeci">struct ast_json * ast_json_object_get(struct ast_json *object, const char *key)</div><div class="ttdoc">Get a field from a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00397">json.c:397</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a8a2de2643d83af810ca5781ec1840003"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a8a2de2643d83af810ca5781ec1840003">rtp_ice_wrap_get_local_candidates</a></div><div class="ttdeci">static struct ao2_container * rtp_ice_wrap_get_local_candidates(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02834">rtp_engine.c:2834</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a3a851bbeea9961c987cbc8d3d3a365bd"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a3a851bbeea9961c987cbc8d3d3a365bd">ast_rtp_instance_stats::remote_minrxploss</a></div><div class="ttdeci">double remote_minrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00398">rtp_engine.h:398</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a68d817b226cf59582ded11a88a4c2753"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a68d817b226cf59582ded11a88a4c2753">rtp_ice_wrap_set_authentication</a></div><div class="ttdeci">static void rtp_ice_wrap_set_authentication(struct ast_rtp_instance *instance, const char *ufrag, const char *password)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02786">rtp_engine.c:2786</a></div></div>
<div class="ttc" id="format__cache_8h_html_a95c058fe6adef68780f026d6aec2481c"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a></div><div class="ttdeci">struct ast_format * ast_format_alaw</div><div class="ttdoc">Built-in cached alaw format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00091">format_cache.c:91</a></div></div>
<div class="ttc" id="channel_8h_html_af9e27ecd92ff5aa897c9e058dfbd6510"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af9e27ecd92ff5aa897c9e058dfbd6510">ast_channel_bridge_peer</a></div><div class="ttdeci">struct ast_channel * ast_channel_bridge_peer(struct ast_channel *chan)</div><div class="ttdoc">Get the channel&amp;#39;s bridge peer only if the bridge is two-party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10765">channel.c:10765</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_ac0456a5c8a8a190b04a9eb241b9faf9a"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#ac0456a5c8a8a190b04a9eb241b9faf9a">ast_rtp_rtcp_report_block::packets</a></div><div class="ttdeci">unsigned int packets</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00320">rtp_engine.h:320</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_afb3071f0aa39f4fccc54894395f73a62"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#afb3071f0aa39f4fccc54894395f73a62">ast_rtp_codecs_payloads_xover</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_xover(struct ast_rtp_codecs *src, struct ast_rtp_codecs *dest, struct ast_rtp_instance *instance)</div><div class="ttdoc">Crossover copy the tx payload mapping of src to the rx payload mapping of dest. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01257">rtp_engine.c:1257</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="rtp__engine_8c_html_a7782ac7af5755719f6ca7a7aefc75aff"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a7782ac7af5755719f6ca7a7aefc75aff">ast_rtp_red_init</a></div><div class="ttdeci">int ast_rtp_red_init(struct ast_rtp_instance *instance, int buffer_time, int *payloads, int generations)</div><div class="ttdoc">Initialize RED support on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02418">rtp_engine.c:2418</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gae7636be9781a3bd85e52ba016e8c432f"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gae7636be9781a3bd85e52ba016e8c432f">ast_rtp_topic</a></div><div class="ttdeci">struct stasis_topic * ast_rtp_topic(void)</div><div class="ttdoc">Stasis Message Bus API topic for RTP and RTCP related messages </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03531">rtp_engine.c:3531</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3fa0ae6b0bf0bc054292890cfa0499e8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3fa0ae6b0bf0bc054292890cfa0499e8">AST_RTP_RTCP_SR</a></div><div class="ttdeci">#define AST_RTP_RTCP_SR</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00293">rtp_engine.h:293</a></div></div>
<div class="ttc" id="structrtcp__message__payload_html_ad2b8e22df32b99651f727cd9a8dcb9f3"><div class="ttname"><a href="../../d4/de4/structrtcp__message__payload.html#ad2b8e22df32b99651f727cd9a8dcb9f3">rtcp_message_payload::blob</a></div><div class="ttdeci">struct ast_json * blob</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03285">rtp_engine.c:3285</a></div></div>
<div class="ttc" id="format_8h_html_a499e920008f775eebadd958a42e85862"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a></div><div class="ttdeci">unsigned int ast_format_get_sample_rate(const struct ast_format *format)</div><div class="ttdoc">Get the sample rate of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00379">format.c:379</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structast__rtp__engine__test_html_acd325c74d3b143cce624aa96f8a82eb0"><div class="ttname"><a href="../../d5/d98/structast__rtp__engine__test.html#acd325c74d3b143cce624aa96f8a82eb0">ast_rtp_engine_test::recv_buffer_max</a></div><div class="ttdeci">size_t(* recv_buffer_max)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00605">rtp_engine.h:605</a></div></div>
<div class="ttc" id="vector_8h_html_a0ae01511d65b3fa02bb10165a28f9581"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a></div><div class="ttdeci">#define AST_VECTOR_REPLACE(vec, idx, elem)</div><div class="ttdoc">Replace an element at a specific position in a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00284">vector.h:284</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0aec28074ae9e42a635acf7995b14793"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0aec28074ae9e42a635acf7995b14793">AST_RTP_PT_LAST_REASSIGN</a></div><div class="ttdeci">#define AST_RTP_PT_LAST_REASSIGN</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00095">rtp_engine.h:95</a></div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html_abeb4b6b327b56a622037c2fae63adeab"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html#abeb4b6b327b56a622037c2fae63adeab">ast_rtp_dtls_cfg::suite</a></div><div class="ttdeci">enum ast_srtp_suite suite</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00558">rtp_engine.h:558</a></div></div>
<div class="ttc" id="format__cache_8h_html_a218a7cbc708851ea992f490a8a4c9bef"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a218a7cbc708851ea992f490a8a4c9bef">ast_format_adpcm</a></div><div class="ttdeci">struct ast_format * ast_format_adpcm</div><div class="ttdoc">Built-in cached adpcm format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00106">format_cache.c:106</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a21f14570a0860de7863be4f0f16e8e4b"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a21f14570a0860de7863be4f0f16e8e4b">ast_rtp_instance_stats::remote_stdevrxploss</a></div><div class="ttdeci">double remote_stdevrxploss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00402">rtp_engine.h:402</a></div></div>
<div class="ttc" id="group__main__options_html_ga2834e29d260312cf03f1e463a112631b"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#ga2834e29d260312cf03f1e463a112631b">ast_option_rtpusedynamic</a></div><div class="ttdeci">int ast_option_rtpusedynamic</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00088">options.c:88</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a></div><div class="ttdoc">Structure that represents the optional ICE support within an RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00485">rtp_engine.h:485</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structast__rtp__instance_html_a8b15829f81b8c60e2cc4137d087cc3e1"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a8b15829f81b8c60e2cc4137d087cc3e1">ast_rtp_instance::engine</a></div><div class="ttdeci">struct ast_rtp_engine * engine</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00191">rtp_engine.c:191</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ad0e27894cc1156205f52b3692096c14d"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ad0e27894cc1156205f52b3692096c14d">ast_rtp_instance_extmap_get_id</a></div><div class="ttdeci">int ast_rtp_instance_extmap_get_id(struct ast_rtp_instance *instance, enum ast_rtp_extension extension)</div><div class="ttdoc">Retrieve the id for an RTP extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00886">rtp_engine.c:886</a></div></div>
<div class="ttc" id="format__cache_8h_html_a17ade0d0f1b4c22d784c0ed31b6751d7"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a17ade0d0f1b4c22d784c0ed31b6751d7">ast_format_slin44</a></div><div class="ttdeci">struct ast_format * ast_format_slin44</div><div class="ttdoc">Built-in cached signed linear 44kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00066">format_cache.c:66</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a622089f7b296c002cc855d73172e9da4"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a622089f7b296c002cc855d73172e9da4">ast_rtp_instance_get_srtp</a></div><div class="ttdeci">struct ast_srtp * ast_rtp_instance_get_srtp(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdoc">Obtain the SRTP instance associated with an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02763">rtp_engine.c:2763</a></div></div>
<div class="ttc" id="res__srtp_8h_html"><div class="ttname"><a href="../../de/d15/res__srtp_8h.html">res_srtp.h</a></div><div class="ttdoc">SRTP resource. </div></div>
<div class="ttc" id="structrtcp__message__payload_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../d4/de4/structrtcp__message__payload.html#a36584c0251e54a7af4892d63f7a28c77">rtcp_message_payload::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03283">rtp_engine.c:3283</a></div></div>
<div class="ttc" id="options_8h_html"><div class="ttname"><a href="../../d7/d5b/options_8h.html">options.h</a></div><div class="ttdoc">Options provided by main asterisk program. </div></div>
<div class="ttc" id="rtp__engine_8c_html_aab37acf3b984e60f234d540adfef877f"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#aab37acf3b984e60f234d540adfef877f">payload_mapping_rx_clear_primary</a></div><div class="ttdeci">static void payload_mapping_rx_clear_primary(struct ast_rtp_codecs *codecs, struct ast_rtp_payload_type *to_match)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01022">rtp_engine.c:1022</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a6b8c5b512d000914dd61cb7d7660837f"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a6b8c5b512d000914dd61cb7d7660837f">ast_rtp_instance_set_data</a></div><div class="ttdeci">void ast_rtp_instance_set_data(struct ast_rtp_instance *instance, void *data)</div><div class="ttdoc">Set the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00558">rtp_engine.c:558</a></div></div>
<div class="ttc" id="format__cache_8h_html_a622d7304e9148c2f4061f36411a43153"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a622d7304e9148c2f4061f36411a43153">ast_format_slin16</a></div><div class="ttdeci">struct ast_format * ast_format_slin16</div><div class="ttdoc">Built-in cached signed linear 16kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00051">format_cache.c:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6091f0518f8b6f443fd9f5150f3ac407"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6091f0518f8b6f443fd9f5150f3ac407">AST_RWLIST_REMOVE</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00884">linkedlists.h:884</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a8cb076cdab76522d134ecba81a93e87b"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a8cb076cdab76522d134ecba81a93e87b">ast_rtp_engine::red_init</a></div><div class="ttdeci">int(* red_init)(struct ast_rtp_instance *instance, int buffer_time, int *payloads, int generations)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00657">rtp_engine.h:657</a></div></div>
<div class="ttc" id="structast__rtp__engine_html"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html">ast_rtp_engine</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00614">rtp_engine.h:614</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gad5e7c95bc24a751d7c2c64b43a0d9f87"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gad5e7c95bc24a751d7c2c64b43a0d9f87">AST_LOG_CATEGORY_DTLS_PACKET</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_DTLS_PACKET</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02834">rtp_engine.h:2834</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a65c51eab105ec6198ced0142947bc94d"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a65c51eab105ec6198ced0142947bc94d">rtp_codecs_assign_payload_code_rx</a></div><div class="ttdeci">static int rtp_codecs_assign_payload_code_rx(struct ast_rtp_codecs *codecs, int asterisk_format, struct ast_format *format, int code, int explicit)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01815">rtp_engine.c:1815</a></div></div>
<div class="ttc" id="app__queue_8c_html_acd1f0e9b4730ec60f62cb0806cb06ef1"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#acd1f0e9b4730ec60f62cb0806cb06ef1">id</a></div><div class="ttdeci">enum queue_result id</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01507">app_queue.c:1507</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a></div><div class="ttdeci">ast_media_type</div><div class="ttdoc">Types of media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00030">codec.h:30</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_adcb4a92a7c8fd3bcde19ecc417a3e8a3"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#adcb4a92a7c8fd3bcde19ecc417a3e8a3">ast_rtp_instance_change_source</a></div><div class="ttdeci">void ast_rtp_instance_change_source(struct ast_rtp_instance *instance)</div><div class="ttdoc">Indicate a new source of audio has dropped in and the ssrc should change. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02160">rtp_engine.c:2160</a></div></div>
<div class="ttc" id="structast__rtp__mime__type_html"><div class="ttname"><a href="../../d8/d0d/structast__rtp__mime__type.html">ast_rtp_mime_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00251">rtp_engine.c:251</a></div></div>
<div class="ttc" id="structrtcp__message__payload_html_a3237858d0b294c5fc77531103a85a721"><div class="ttname"><a href="../../d4/de4/structrtcp__message__payload.html#a3237858d0b294c5fc77531103a85a721">rtcp_message_payload::report</a></div><div class="ttdeci">struct ast_rtp_rtcp_report * report</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03284">rtp_engine.c:3284</a></div></div>
<div class="ttc" id="structast__rtp__glue_html_afc66a77fb119541a45aebe90c46db8a7"><div class="ttname"><a href="../../d8/dc9/structast__rtp__glue.html#afc66a77fb119541a45aebe90c46db8a7">ast_rtp_glue::get_vrtp_info</a></div><div class="ttdeci">enum ast_rtp_glue_result(* get_vrtp_info)(struct ast_channel *chan, struct ast_rtp_instance **instance)</div><div class="ttdoc">Callback for retrieving the RTP instance carrying video. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00741">rtp_engine.h:741</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="format_8h_html_a2b07dbbe75e39d505a64e019352f067c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a2b07dbbe75e39d505a64e019352f067c">ast_format_parse_sdp_fmtp</a></div><div class="ttdeci">struct ast_format * ast_format_parse_sdp_fmtp(const struct ast_format *format, const char *attributes)</div><div class="ttdoc">This function is used to have a media format aware module parse and interpret SDP attribute informati...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00286">format.c:286</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="format__cache_8h_html_ae4848b177c158d817294f2b0b447f66e"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#ae4848b177c158d817294f2b0b447f66e">ast_format_g729</a></div><div class="ttdeci">struct ast_format * ast_format_g729</div><div class="ttdoc">Built-in cached g729 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00156">format_cache.c:156</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a3f7aced2b7c50be99b2b27c36f1c3557"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a3f7aced2b7c50be99b2b27c36f1c3557">ast_rtp_instance_stats::local_normdevjitter</a></div><div class="ttdeci">double local_normdevjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00388">rtp_engine.h:388</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaa5ecf12e596867bc22d8df75d2568d96"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaa5ecf12e596867bc22d8df75d2568d96">AST_LOG_CATEGORY_RTP_PACKET</a></div><div class="ttdeci">#define AST_LOG_CATEGORY_RTP_PACKET</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02826">rtp_engine.h:2826</a></div></div>
<div class="ttc" id="logger__category_8h_html_a1ac50464c806cf16fd3c9ffc714cbc42"><div class="ttname"><a href="../../d5/d1f/logger__category_8h.html#a1ac50464c806cf16fd3c9ffc714cbc42">ast_debug_category_register</a></div><div class="ttdeci">uintmax_t ast_debug_category_register(const char *name)</div><div class="ttdoc">Register a debug level logger category. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d87/logger__category_8c_source.html#l00279">logger_category.c:279</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a64835fe6d570951b2a0404799c3d116f"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a64835fe6d570951b2a0404799c3d116f">AST_RWLIST_FIRST</a></div><div class="ttdeci">#define AST_RWLIST_FIRST</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00422">linkedlists.h:422</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ad3d775f5165f2f79207f111a03250a2f"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ad3d775f5165f2f79207f111a03250a2f">ast_rtp_dtls_cfg_validate</a></div><div class="ttdeci">int ast_rtp_dtls_cfg_validate(struct ast_rtp_dtls_cfg *dtls_cfg)</div><div class="ttdoc">Validates DTLS related configuration options. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03094">rtp_engine.c:3094</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a93f8936a4d9cc6a544de8bba9ed60c97"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a93f8936a4d9cc6a544de8bba9ed60c97">rtp_engine_mime_type_cleanup</a></div><div class="ttdeci">static void rtp_engine_mime_type_cleanup(int i)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03149">rtp_engine.c:3149</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ae9b93a22194a526e21db5dc4f5d82805"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ae9b93a22194a526e21db5dc4f5d82805">ast_rtp_instance_set_read_format</a></div><div class="ttdeci">int ast_rtp_instance_set_read_format(struct ast_rtp_instance *instance, struct ast_format *format)</div><div class="ttdoc">Request that the underlying RTP engine provide audio frames in a specific format. ...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02560">rtp_engine.c:2560</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a8ef9a039e87881c3b009cd250f583a96"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a8ef9a039e87881c3b009cd250f583a96">ast_rtp_rtcp_report::octet_count</a></div><div class="ttdeci">unsigned int octet_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00339">rtp_engine.h:339</a></div></div>
<div class="ttc" id="structast__rtp__payload__type_html_a9acb7c8900a0a4dc89f77ed353034b86"><div class="ttname"><a href="../../dd/de9/structast__rtp__payload__type.html#a9acb7c8900a0a4dc89f77ed353034b86">ast_rtp_payload_type::primary_mapping</a></div><div class="ttdeci">unsigned int primary_mapping</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00286">rtp_engine.h:286</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report_html_a69751ecaf659f4f16438fae21fd57d14"><div class="ttname"><a href="../../d8/d40/structast__rtp__rtcp__report.html#a69751ecaf659f4f16438fae21fd57d14">ast_rtp_rtcp_report::ntp_timestamp</a></div><div class="ttdeci">struct timeval ntp_timestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00336">rtp_engine.h:336</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4e13c63955f3824b62d1d11a1f6b56f4a06e3f71fe447754972e5bd7376a88eac"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4e13c63955f3824b62d1d11a1f6b56f4a06e3f71fe447754972e5bd7376a88eac">AST_RTP_DTLS_VERIFY_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00534">rtp_engine.h:534</a></div></div>
<div class="ttc" id="structast__rtp__payload__type_html_ad4668d3f601a8a621df3c3a195296cdd"><div class="ttname"><a href="../../dd/de9/structast__rtp__payload__type.html#ad4668d3f601a8a621df3c3a195296cdd">ast_rtp_payload_type::when_retired</a></div><div class="ttdeci">struct timeval when_retired</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00288">rtp_engine.h:288</a></div></div>
<div class="ttc" id="format__cache_8h_html_aa430d88a82157dc5990ee7c9401fc718"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#aa430d88a82157dc5990ee7c9401fc718">ast_format_speex32</a></div><div class="ttdeci">struct ast_format * ast_format_speex32</div><div class="ttdoc">Built-in cached speex at 32kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00146">format_cache.c:146</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ad924782a38efb3a8f9edbb92d3135541"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ad924782a38efb3a8f9edbb92d3135541">AST_RTP_CN</a></div><div class="ttdeci">#define AST_RTP_CN</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00268">rtp_engine.h:268</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a4d873b83b2c0e1d305d4620c9f0d13b4"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a4d873b83b2c0e1d305d4620c9f0d13b4">ast_rtp_instance_extmap_count</a></div><div class="ttdeci">size_t ast_rtp_instance_extmap_count(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the number of known unique identifiers. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00899">rtp_engine.c:899</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html">ast_rtp_instance_stats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00366">rtp_engine.h:366</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ab0b96e27f62f9b8279eafe463a5854aa"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ab0b96e27f62f9b8279eafe463a5854aa">ast_rtp_instance_get_last_rx</a></div><div class="ttdeci">time_t ast_rtp_instance_get_last_rx(const struct ast_rtp_instance *rtp)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03768">rtp_engine.c:3768</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3cc8001677e3b955b9b5ceb4267a76ec"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a></div><div class="ttdeci">#define AST_RTP_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00266">rtp_engine.h:266</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_af4d3ce6982c29d0241c811f4de4f51c8"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#af4d3ce6982c29d0241c811f4de4f51c8">ast_rtp_instance_get_data</a></div><div class="ttdeci">void * ast_rtp_instance_get_data(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the data portion of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00563">rtp_engine.c:563</a></div></div>
<div class="ttc" id="func__frame__drop_8c_html_a99f26e6ee9fcd62f75203b5402df8098"><div class="ttname"><a href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8b/func__frame__drop_8c_source.html#l00137">func_frame_drop.c:137</a></div></div>
<div class="ttc" id="rtp__engine_8h_html"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html">rtp_engine.h</a></div><div class="ttdoc">Pluggable RTP Architecture. </div></div>
<div class="ttc" id="rtp__engine_8c_html_adef7f9e182a2d5e45a570f990c7dc92f"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#adef7f9e182a2d5e45a570f990c7dc92f">ast_rtp_instance_extmap_negotiate</a></div><div class="ttdeci">int ast_rtp_instance_extmap_negotiate(struct ast_rtp_instance *instance, int id, enum ast_rtp_extension_direction direction, const char *uri, const char *attributes)</div><div class="ttdoc">Negotiate received RTP extension information. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00818">rtp_engine.c:818</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_af3276071050dad21d94b629e60b37460"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#af3276071050dad21d94b629e60b37460">ast_rtp_engine::extension_enable</a></div><div class="ttdeci">int(* extension_enable)(struct ast_rtp_instance *instance, enum ast_rtp_extension extension)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00699">rtp_engine.h:699</a></div></div>
<div class="ttc" id="format__cache_8h_html_adbb2a7346ad99c0a41cd6c43548835ba"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#adbb2a7346ad99c0a41cd6c43548835ba">ast_format_t140</a></div><div class="ttdeci">struct ast_format * ast_format_t140</div><div class="ttdoc">Built-in cached t140 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00236">format_cache.c:236</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4ae8179d33ea9515b49d8d088a496a43ad68f17a95942c9072c417911f797fb1f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4ae8179d33ea9515b49d8d088a496a43ad68f17a95942c9072c417911f797fb1f">AST_RTP_INSTANCE_STAT_FIELD_QUALITY_JITTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00172">rtp_engine.h:172</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a688d8ec2e1a3c71d1ef9c75d1bd6e903"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a688d8ec2e1a3c71d1ef9c75d1bd6e903">static_RTP_PT_lock</a></div><div class="ttdeci">static ast_rwlock_t static_RTP_PT_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00275">rtp_engine.c:275</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="module_8h_html"><div class="ttname"><a href="../../d5/d16/module_8h.html">module.h</a></div><div class="ttdoc">Asterisk module definitions. </div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html_a173bd4ad2c830cbaa689bc4fb759ff0c"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html#a173bd4ad2c830cbaa689bc4fb759ff0c">ast_rtp_dtls_cfg::rekey</a></div><div class="ttdeci">unsigned int rekey</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00556">rtp_engine.h:556</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a96b200c1eb9c9203c9db9c790cd043a7"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a96b200c1eb9c9203c9db9c790cd043a7">ast_rtp_engine::dtmf_end_with_duration</a></div><div class="ttdeci">int(* dtmf_end_with_duration)(struct ast_rtp_instance *instance, char digit, unsigned int duration)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00631">rtp_engine.h:631</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_ae314c4b48027be9feab52906b6313b73"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#ae314c4b48027be9feab52906b6313b73">ast_rtp_instance::keepalive</a></div><div class="ttdeci">int keepalive</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00211">rtp_engine.c:211</a></div></div>
<div class="ttc" id="channel_8h_html_abbf9887dd9233fb9b93cf5d9fa5de57f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abbf9887dd9233fb9b93cf5d9fa5de57f">AST_MAX_UNIQUEID</a></div><div class="ttdeci">#define AST_MAX_UNIQUEID</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00169">channel.h:169</a></div></div>
<div class="ttc" id="structast__srtp__res_html_a069353980fa26064fef7beec6a27a50b"><div class="ttname"><a href="../../d0/d5d/structast__srtp__res.html#a069353980fa26064fef7beec6a27a50b">ast_srtp_res::destroy</a></div><div class="ttdeci">void(* destroy)(struct ast_srtp *srtp)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/res__srtp_8h_source.html#l00040">res_srtp.h:40</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a452d6ad1556ab4006b41ddec84ecac29"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a452d6ad1556ab4006b41ddec84ecac29">ast_rtp_publish_rtcp_message</a></div><div class="ttdeci">void ast_rtp_publish_rtcp_message(struct ast_rtp_instance *rtp, struct stasis_message_type *message_type, struct ast_rtp_rtcp_report *report, struct ast_json *blob)</div><div class="ttdoc">Publish an RTCP message to Stasis Message Bus API. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03485">rtp_engine.c:3485</a></div></div>
<div class="ttc" id="format__cache_8h_html_a4e8a3ae8d3510c9b2024c1649ef33e5a"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a4e8a3ae8d3510c9b2024c1649ef33e5a">ast_format_h263</a></div><div class="ttdeci">struct ast_format * ast_format_h263</div><div class="ttdoc">Built-in cached h263 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00171">format_cache.c:171</a></div></div>
<div class="ttc" id="structast__srtp__res_html_ab935dd91b95bb6948a32a90641a195eb"><div class="ttname"><a href="../../d0/d5d/structast__srtp__res.html#ab935dd91b95bb6948a32a90641a195eb">ast_srtp_res::replace</a></div><div class="ttdeci">int(* replace)(struct ast_srtp **srtp, struct ast_rtp_instance *rtp, struct ast_srtp_policy *policy)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/res__srtp_8h_source.html#l00038">res_srtp.h:38</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a34eee98bc78af7a79bdc3150ad770091"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a34eee98bc78af7a79bdc3150ad770091">ast_rtp_instance_get_active_glue</a></div><div class="ttdeci">struct ast_rtp_glue * ast_rtp_instance_get_active_glue(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the RTP glue in use on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02705">rtp_engine.c:2705</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gab5693c002c4a23d84da916dbb02d5a5c"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gab5693c002c4a23d84da916dbb02d5a5c">ast_rtp_convert_stats_json</a></div><div class="ttdeci">struct ast_json * ast_rtp_convert_stats_json(const struct ast_rtp_instance_stats *stats)</div><div class="ttdoc">Convert given stat instance into json format. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03956">rtp_engine.c:3956</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a26abbab4982b7d787e236f3a3a4e3b94"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a26abbab4982b7d787e236f3a3a4e3b94">ast_rtp_instance_extmap_get_uri</a></div><div class="ttdeci">const char * ast_rtp_instance_extmap_get_uri(struct ast_rtp_instance *instance, int id)</div><div class="ttdoc">Retrieve the URI for an RTP extension id. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00946">rtp_engine.c:946</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_adbd6ed7f5741adbf3d0f899426772a44"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#adbd6ed7f5741adbf3d0f899426772a44">rtp_extension_uris</a></div><div class="ttdeci">static const char *const rtp_extension_uris[AST_RTP_EXTENSION_MAX]</div><div class="ttdoc">URIs for known RTP extensions. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00235">rtp_engine.c:235</a></div></div>
<div class="ttc" id="format_8h_html_a22b99f6d58d54938ec6753f3865f0005"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a22b99f6d58d54938ec6753f3865f0005">ast_format_get_codec_id</a></div><div class="ttdeci">unsigned int ast_format_get_codec_id(const struct ast_format *format)</div><div class="ttdoc">Get the codec identifier associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00329">format.c:329</a></div></div>
<div class="ttc" id="channel_8h_html_af5dee96d4dcc88a95fce391c22d4d21f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a></div><div class="ttdeci">const struct ast_channel_tech * ast_channel_tech(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00769">channel_internal_api.c:769</a></div></div>
<div class="ttc" id="group__main__options_html_gaa241e9e2481830111df49cf5addaab99"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaa241e9e2481830111df49cf5addaab99">ast_option_rtpptdynamic</a></div><div class="ttdeci">unsigned int ast_option_rtpptdynamic</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00089">options.c:89</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a64d1d6751fc14c6f34d5a9b90a424916"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a64d1d6751fc14c6f34d5a9b90a424916">ast_rtp_engine::fd</a></div><div class="ttdeci">int(* fd)(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00655">rtp_engine.h:655</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_a6f505be1e80abef8c8dc43dd435dee82"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#a6f505be1e80abef8c8dc43dd435dee82">ast_rtp_rtcp_report_block::source_ssrc</a></div><div class="ttdeci">unsigned int source_ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00317">rtp_engine.h:317</a></div></div>
<div class="ttc" id="namespace10aedae86a32__add__outgoing__enum__va_html_a42c0f9e518790273ec193fa1b227fea7"><div class="ttname"><a href="../../d3/d63/namespace10aedae86a32__add__outgoing__enum__va.html#a42c0f9e518790273ec193fa1b227fea7">10aedae86a32_add_outgoing_enum_va.new_type</a></div><div class="ttdeci">new_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d63/10aedae86a32__add__outgoing__enum__va_8py_source.html#l00039">10aedae86a32_add_outgoing_enum_va.py:39</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a4f5e657ab906e7d719343f42346c731a"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a4f5e657ab906e7d719343f42346c731a">ast_rtp_instance_extmap_enable</a></div><div class="ttdeci">int ast_rtp_instance_extmap_enable(struct ast_rtp_instance *instance, int id, enum ast_rtp_extension extension, enum ast_rtp_extension_direction direction)</div><div class="ttdoc">Enable support for an RTP extension on an instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00732">rtp_engine.c:732</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a443d37645d5df53ac34413e5a0e52d55"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a443d37645d5df53ac34413e5a0e52d55">ast_rtp_instance::last_rx</a></div><div class="ttdeci">time_t last_rx</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00223">rtp_engine.c:223</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga37f241cedc1f8c75764d407284d7cabb"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga37f241cedc1f8c75764d407284d7cabb">ast_rtp_instance_queue_report</a></div><div class="ttdeci">void ast_rtp_instance_queue_report(struct ast_rtp_instance *instance)</div><div class="ttdoc">Sends a SR/RR report the next time RTP would be sent. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03917">rtp_engine.c:3917</a></div></div>
<div class="ttc" id="format__cache_8h_html_a6f81e297d6113245d93c9509d13f4fbe"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a6f81e297d6113245d93c9509d13f4fbe">ast_format_slin48</a></div><div class="ttdeci">struct ast_format * ast_format_slin48</div><div class="ttdoc">Built-in cached signed linear 48kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00071">format_cache.c:71</a></div></div>
<div class="ttc" id="structast__rtp__instance_html_a07d5509bbac8167e94ad8790e3fe87a4"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html#a07d5509bbac8167e94ad8790e3fe87a4">ast_rtp_instance::codecs</a></div><div class="ttdeci">struct ast_rtp_codecs codecs</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00205">rtp_engine.c:205</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga404c7192a06d6519fbf582eed184ef41"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga404c7192a06d6519fbf582eed184ef41">ast_rtp_instance_reset_test_engine</a></div><div class="ttdeci">void ast_rtp_instance_reset_test_engine(struct ast_rtp_instance *instance)</div><div class="ttdoc">Resets all the fields to default values for the test engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03941">rtp_engine.c:3941</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a530c895cce74a3483ff97c538c598f8d"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a530c895cce74a3483ff97c538c598f8d">ast_rtp_instance_early_bridge</a></div><div class="ttdeci">int ast_rtp_instance_early_bridge(struct ast_channel *c0, struct ast_channel *c1)</div><div class="ttdoc">Early bridge two channels that use RTP instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02337">rtp_engine.c:2337</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0a85f05e5bc6cc29f9c2a1b12113280a52"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a85f05e5bc6cc29f9c2a1b12113280a52">AST_RTP_EXTENSION_DIRECTION_RECVONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00777">rtp_engine.h:777</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a5196c36c9cff35c1551933b7a0e7b7ac"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a5196c36c9cff35c1551933b7a0e7b7ac">SET_AST_JSON_OBJ</a></div><div class="ttdeci">#define SET_AST_JSON_OBJ(target, name, obj)</div><div class="ttdoc">Set given json object into target with name. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00288">rtp_engine.c:288</a></div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html">ast_rtp_dtls_cfg</a></div><div class="ttdoc">DTLS configuration structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00554">rtp_engine.h:554</a></div></div>
<div class="ttc" id="format__cache_8h_html"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html">format_cache.h</a></div><div class="ttdoc">Media Format Cache API. </div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a80552fd3f7f852d51e944dc4105da800"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a80552fd3f7f852d51e944dc4105da800">ast_rtp_instance_stats::rxjitter</a></div><div class="ttdeci">double rxjitter</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00374">rtp_engine.h:374</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a052c95f741f3e25e6ab9217a01affb53"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a052c95f741f3e25e6ab9217a01affb53">ast_rtp_instance_stats::remote_ssrc</a></div><div class="ttdeci">unsigned int remote_ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00424">rtp_engine.h:424</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a95cc8ce9e12bd692ef68c40e2a93857c"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a95cc8ce9e12bd692ef68c40e2a93857c">ast_rtp_instance_get_hold_timeout</a></div><div class="ttdeci">int ast_rtp_instance_get_hold_timeout(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the RTP timeout value for when an RTP instance is on hold. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02690">rtp_engine.c:2690</a></div></div>
<div class="ttc" id="structast__rtp__engine_html_a152867fd9e330f1549a15f4fdd8b7021"><div class="ttname"><a href="../../d2/d14/structast__rtp__engine.html#a152867fd9e330f1549a15f4fdd8b7021">ast_rtp_engine::get_stat</a></div><div class="ttdeci">int(* get_stat)(struct ast_rtp_instance *instance, struct ast_rtp_instance_stats *stats, enum ast_rtp_instance_stat stat)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00651">rtp_engine.h:651</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a4443e413dd03c219fb34bb17cc674cf5"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a4443e413dd03c219fb34bb17cc674cf5">ast_rtp_codecs_payloads_copy</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_copy(struct ast_rtp_codecs *src, struct ast_rtp_codecs *dest, struct ast_rtp_instance *instance)</div><div class="ttdoc">Copy payload information from one RTP instance to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01224">rtp_engine.c:1224</a></div></div>
<div class="ttc" id="format__cache_8h_html_a55209e40c9d09d4b838e91b3e86e0d4e"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a55209e40c9d09d4b838e91b3e86e0d4e">ast_format_ilbc</a></div><div class="ttdeci">struct ast_format * ast_format_ilbc</div><div class="ttdoc">Built-in cached ilbc format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00126">format_cache.c:126</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gac8dcaac6d227860b04c66fc22462789a"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gac8dcaac6d227860b04c66fc22462789a">ast_rtp_instance_get_stats_all_json</a></div><div class="ttdeci">struct ast_json * ast_rtp_instance_get_stats_all_json(struct ast_rtp_instance *instance)</div><div class="ttdoc">Retrieve statistics about an RTP instance in json format. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l04019">rtp_engine.c:4019</a></div></div>
<div class="ttc" id="structast__srtp__res_html_ac87bc654e623df7d5d480bf845470242"><div class="ttname"><a href="../../d0/d5d/structast__srtp__res.html#ac87bc654e623df7d5d480bf845470242">ast_srtp_res::create</a></div><div class="ttdeci">int(* create)(struct ast_srtp **srtp, struct ast_rtp_instance *rtp, struct ast_srtp_policy *policy)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/res__srtp_8h_source.html#l00036">res_srtp.h:36</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_ae206fac1b9f2678cdab6e439db07db71"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#ae206fac1b9f2678cdab6e439db07db71">rtp_dtls_wrap_set_configuration</a></div><div class="ttdeci">static int rtp_dtls_wrap_set_configuration(struct ast_rtp_instance *instance, const struct ast_rtp_dtls_cfg *dtls_cfg)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02907">rtp_engine.c:2907</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_afcde4e4b65201b3a7b5ee9c84bd1043c"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#afcde4e4b65201b3a7b5ee9c84bd1043c">ast_rtp_instance_set_bridged</a></div><div class="ttdeci">void ast_rtp_instance_set_bridged(struct ast_rtp_instance *instance, struct ast_rtp_instance *bridged)</div><div class="ttdoc">Set the other RTP instance that an instance is bridged to. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02244">rtp_engine.c:2244</a></div></div>
<div class="ttc" id="json_8h_html_ac13f0f415f198c5a341017195933356f"><div class="ttname"><a href="../../d4/d05/json_8h.html#ac13f0f415f198c5a341017195933356f">ast_json_integer_create</a></div><div class="ttdeci">struct ast_json * ast_json_integer_create(intmax_t value)</div><div class="ttdoc">Create a JSON integer. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00317">json.c:317</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a6d0f93bb52716a7f972f80391ef7bf96"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a6d0f93bb52716a7f972f80391ef7bf96">rtp_dtls_wrap_set_setup</a></div><div class="ttdeci">static void rtp_dtls_wrap_set_setup(struct ast_rtp_instance *instance, enum ast_rtp_dtls_setup setup)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02962">rtp_engine.c:2962</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a182bf62ba81b9aa1ef9b30468b54e8fb"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a182bf62ba81b9aa1ef9b30468b54e8fb">ast_rtp_engine_ice::ice_lite</a></div><div class="ttdeci">void(* ice_lite)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00501">rtp_engine.h:501</a></div></div>
<div class="ttc" id="channel_8h_html_ada78f1b5f7ec61480c433280f4dfd0a4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ada78f1b5f7ec61480c433280f4dfd0a4">AST_MAX_USER_FIELD</a></div><div class="ttdeci">#define AST_MAX_USER_FIELD</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00175">channel.h:175</a></div></div>
<div class="ttc" id="structast__rtp__rtcp__report__block_html_ac073ee3bf2fb7ca014e53683edba72ff"><div class="ttname"><a href="../../db/d08/structast__rtp__rtcp__report__block.html#ac073ee3bf2fb7ca014e53683edba72ff">ast_rtp_rtcp_report_block::lost_count</a></div><div class="ttdeci">struct ast_rtp_rtcp_report_block::@314 lost_count</div></div>
<div class="ttc" id="format__cap_8h_html_a9c9b87b5062c057862aa7d4237db2780"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a9c9b87b5062c057862aa7d4237db2780">ast_format_cap_iscompatible</a></div><div class="ttdeci">int ast_format_cap_iscompatible(const struct ast_format_cap *cap1, const struct ast_format_cap *cap2)</div><div class="ttdoc">Determine if any joint capabilities exist between two capabilities structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00655">format_cap.c:655</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gac297e0868722424bbf63a22e4179d0e4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gac297e0868722424bbf63a22e4179d0e4">ast_debug_category_rtcp_id</a></div><div class="ttdeci">uintmax_t ast_debug_category_rtcp_id(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03552">rtp_engine.c:3552</a></div></div>
<div class="ttc" id="rtp__engine_8c_html_a141c6bb2b98de4217df072f88be322b5"><div class="ttname"><a href="../../da/dbe/rtp__engine_8c.html#a141c6bb2b98de4217df072f88be322b5">rtp_payload_type_dtor</a></div><div class="ttdeci">static void rtp_payload_type_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00299">rtp_engine.c:299</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:44:11 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
