<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: stasis_bridges.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">stasis_bridges.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Stasis Messages and Data Types for Bridge Objects.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d79/stasis_8h_source.html">asterisk/stasis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d8f/stasis__cache__pattern_8h_source.html">asterisk/stasis_cache_pattern.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html">asterisk/stasis_bridges.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d4a/stasis__channels_8h_source.html">asterisk/stasis_channels.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d56/bridge_8h_source.html">asterisk/bridge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d3b/bridge__technology_8h_source.html">asterisk/bridge_technology.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for stasis_bridges.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/d80/stasis__bridges_8c__incl.png" border="0" usemap="#stasis__bridges_8c" alt=""/></div>
<map name="stasis__bridges_8c" id="stasis__bridges_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="1247,543,1331,569"/>
<area shape="rect" id="node16" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="514,543,649,569"/>
<area shape="rect" id="node20" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="2468,468,2593,495"/>
<area shape="rect" id="node27" href="../../d3/d8f/stasis__cache__pattern_8h.html" title="Caching pattern for Stasis Message Bus API topics. " alt="" coords="2451,155,2610,196"/>
<area shape="rect" id="node28" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1513,393,1652,420"/>
<area shape="rect" id="node41" href="../../dc/d4e/stasis__bridges_8h.html" title="asterisk/stasis_bridges.h" alt="" coords="1611,80,1789,107"/>
<area shape="rect" id="node42" href="../../d4/d56/bridge_8h.html" title="Bridging API. " alt="" coords="1981,162,2109,189"/>
<area shape="rect" id="node45" href="../../d0/d3b/bridge__technology_8h.html" title="Channel Bridging API. " alt="" coords="2121,319,2324,345"/>
<area shape="rect" id="node50" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="1356,319,1545,345"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="1247,617,1401,644"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="745,617,882,644"/>
<area shape="rect" id="node15" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="1477,617,1611,644"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="1288,692,1435,719"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1261,841,1403,868"/>
<area shape="rect" id="node17" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1506,767,1619,793"/>
<area shape="rect" id="node18" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="196,841,343,868"/>
<area shape="rect" id="node19" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1790,692,1941,719"/>
<area shape="rect" id="node21" href="../../d4/d05/json_8h.html" title="Asterisk JSON abstraction layer. " alt="" coords="2292,543,2407,569"/>
<area shape="rect" id="node22" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="2431,543,2577,569"/>
<area shape="rect" id="node24" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="960,543,1075,569"/>
<area shape="rect" id="node26" href="../../dd/d20/event_8h.html" title="asterisk/event.h" alt="" coords="2601,543,2725,569"/>
<area shape="rect" id="node23" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="2066,617,2217,644"/>
<area shape="rect" id="node25" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="32,617,189,644"/>
<area shape="rect" id="node29" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="1000,468,1144,495"/>
<area shape="rect" id="node30" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="1503,468,1662,495"/>
<area shape="rect" id="node31" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="393,468,557,495"/>
<area shape="rect" id="node32" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1738,543,1865,569"/>
<area shape="rect" id="node33" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="1969,468,2116,495"/>
<area shape="rect" id="node34" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="190,468,317,495"/>
<area shape="rect" id="node35" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="581,468,688,495"/>
<area shape="rect" id="node36" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="713,468,874,495"/>
<area shape="rect" id="node37" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="1168,468,1339,495"/>
<area shape="rect" id="node38" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="1363,468,1479,495"/>
<area shape="rect" id="node39" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="1788,468,1945,495"/>
<area shape="rect" id="node40" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="2293,468,2443,495"/>
<area shape="rect" id="node49" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="1621,319,1731,345"/>
<area shape="rect" id="node43" href="../../dc/d7a/bridge__features_8h.html" title="Channel Bridging API. " alt="" coords="1858,319,2046,345"/>
<area shape="rect" id="node44" href="../../de/d41/bridge__channel_8h.html" title="asterisk/bridge_channel.h" alt="" coords="1865,244,2050,271"/>
<area shape="rect" id="node46" href="../../dd/dff/bridge__roles_8h.html" title="Channel Bridging Roles API. " alt="" coords="2686,393,2853,420"/>
<area shape="rect" id="node47" href="../../d3/d08/dsp_8h.html" title="Convenient Signal Processing routines. " alt="" coords="2214,244,2325,271"/>
<area shape="rect" id="node48" href="../../dd/d1d/uuid_8h.html" title="Universally unique identifier support. " alt="" coords="2075,244,2189,271"/>
</map>
</div>
</div>
<p><a href="../../da/d0f/stasis__bridges_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a449169f26afbc412fc537b51a9cd0e16"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a449169f26afbc412fc537b51a9cd0e16">SNAPSHOT_CHANNELS_BUCKETS</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a449169f26afbc412fc537b51a9cd0e16"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3ba70be1910dd4bebfc77dec29ffc43b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a3ba70be1910dd4bebfc77dec29ffc43b">ast_attended_transfer_message_add_app</a> (struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *transfer_msg, const char *<a class="el" href="../../dd/de9/res__agi_8c.html#a9e5f57131367eff409b9e0bd7b31aa1a">app</a>, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *replace_channel)</td></tr>
<tr class="memdesc:a3ba70be1910dd4bebfc77dec29ffc43b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add details for an attended transfer to an application.  <a href="#a3ba70be1910dd4bebfc77dec29ffc43b">More...</a><br /></td></tr>
<tr class="separator:a3ba70be1910dd4bebfc77dec29ffc43b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abec87c9a1f3c9607a841cdf035ae95fd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#abec87c9a1f3c9607a841cdf035ae95fd">ast_attended_transfer_message_add_link</a> (struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *transfer_msg, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../de/d47/core__local_8c.html#aef9f33a8f0b0099c02a84d0c01d77aab">locals</a>[2])</td></tr>
<tr class="memdesc:abec87c9a1f3c9607a841cdf035ae95fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add details for an attended transfer that has a link between bridges.  <a href="#abec87c9a1f3c9607a841cdf035ae95fd">More...</a><br /></td></tr>
<tr class="separator:abec87c9a1f3c9607a841cdf035ae95fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae3000e9dc05d9b3023f5a571ffb14d7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#aae3000e9dc05d9b3023f5a571ffb14d7">ast_attended_transfer_message_add_merge</a> (struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *transfer_msg, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *final_bridge)</td></tr>
<tr class="memdesc:aae3000e9dc05d9b3023f5a571ffb14d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add details for a bridge merge to an attended transfer message.  <a href="#aae3000e9dc05d9b3023f5a571ffb14d7">More...</a><br /></td></tr>
<tr class="separator:aae3000e9dc05d9b3023f5a571ffb14d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a402aa031878d54df98c95146d51fad50"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a402aa031878d54df98c95146d51fad50">ast_attended_transfer_message_add_threeway</a> (struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *transfer_msg, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *survivor_channel, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *survivor_bridge)</td></tr>
<tr class="memdesc:a402aa031878d54df98c95146d51fad50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add details for an attended transfer that was resolved as a three-way call.  <a href="#a402aa031878d54df98c95146d51fad50">More...</a><br /></td></tr>
<tr class="separator:a402aa031878d54df98c95146d51fad50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d80b41bade979c37596d850cfcf3e64"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a5d80b41bade979c37596d850cfcf3e64">ast_attended_transfer_message_create</a> (int is_external, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *to_transferee, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *transferee_bridge, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *to_transfer_target, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *target_bridge, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *transferee, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *transfer_target)</td></tr>
<tr class="memdesc:a5d80b41bade979c37596d850cfcf3e64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an Attended transfer message to be published.  <a href="#a5d80b41bade979c37596d850cfcf3e64">More...</a><br /></td></tr>
<tr class="separator:a5d80b41bade979c37596d850cfcf3e64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20c565f2b4f6dd680b2fa04f8d74f3c4"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a20c565f2b4f6dd680b2fa04f8d74f3c4">ast_blind_transfer_message_create</a> (int is_external, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *transferer, const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>)</td></tr>
<tr class="memdesc:a20c565f2b4f6dd680b2fa04f8d74f3c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a blind transfer message to be published.  <a href="#a20c565f2b4f6dd680b2fa04f8d74f3c4">More...</a><br /></td></tr>
<tr class="separator:a20c565f2b4f6dd680b2fa04f8d74f3c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add1309ffa28c3f41255dc7b294b968d6"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#add1309ffa28c3f41255dc7b294b968d6">ast_bridge_blob_create</a> (struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *message_type, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *blob)</td></tr>
<tr class="memdesc:add1309ffa28c3f41255dc7b294b968d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a <a class="el" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> message.  <a href="#add1309ffa28c3f41255dc7b294b968d6">More...</a><br /></td></tr>
<tr class="separator:add1309ffa28c3f41255dc7b294b968d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4bfe3c16917cccf7fff18dbfa57cc75"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#af4bfe3c16917cccf7fff18dbfa57cc75">ast_bridge_blob_create_from_snapshots</a> (struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *message_type, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge_snapshot, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *chan_snapshot, struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *blob)</td></tr>
<tr class="memdesc:af4bfe3c16917cccf7fff18dbfa57cc75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a <a class="el" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> message from snapshots.  <a href="#af4bfe3c16917cccf7fff18dbfa57cc75">More...</a><br /></td></tr>
<tr class="separator:af4bfe3c16917cccf7fff18dbfa57cc75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04efba17b1302d217a2a07a02c3eac98"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a04efba17b1302d217a2a07a02c3eac98">ast_bridge_get_snapshot</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge)</td></tr>
<tr class="memdesc:a04efba17b1302d217a2a07a02c3eac98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current snapshot for the bridge.  <a href="#a04efba17b1302d217a2a07a02c3eac98">More...</a><br /></td></tr>
<tr class="separator:a04efba17b1302d217a2a07a02c3eac98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc73aeca13d954cdfd8607d94f4539b8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#acc73aeca13d954cdfd8607d94f4539b8">ast_bridge_get_snapshot_by_uniqueid</a> (const char *uniqueid)</td></tr>
<tr class="memdesc:acc73aeca13d954cdfd8607d94f4539b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current snapshot for the bridge.  <a href="#acc73aeca13d954cdfd8607d94f4539b8">More...</a><br /></td></tr>
<tr class="separator:acc73aeca13d954cdfd8607d94f4539b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a141cb49725321747635f3111525583ed"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a141cb49725321747635f3111525583ed">ast_bridge_merge_message_to_json</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg, const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *sanitize)</td></tr>
<tr class="separator:a141cb49725321747635f3111525583ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1949ac2d3f4b2113242d981cc315b451"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a1949ac2d3f4b2113242d981cc315b451">ast_bridge_publish_attended_transfer</a> (struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *transfer_msg)</td></tr>
<tr class="memdesc:a1949ac2d3f4b2113242d981cc315b451"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish an attended transfer.  <a href="#a1949ac2d3f4b2113242d981cc315b451">More...</a><br /></td></tr>
<tr class="separator:a1949ac2d3f4b2113242d981cc315b451"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a0d32d9383a2e73b8292eec6c8359e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a1a0d32d9383a2e73b8292eec6c8359e0">ast_bridge_publish_blind_transfer</a> (struct <a class="el" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a> *transfer_message)</td></tr>
<tr class="memdesc:a1a0d32d9383a2e73b8292eec6c8359e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a blind transfer event.  <a href="#a1a0d32d9383a2e73b8292eec6c8359e0">More...</a><br /></td></tr>
<tr class="separator:a1a0d32d9383a2e73b8292eec6c8359e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecd7e5c63f8d0d4c022bd817d4241c5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#aecd7e5c63f8d0d4c022bd817d4241c5c">ast_bridge_publish_enter</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *swap)</td></tr>
<tr class="memdesc:aecd7e5c63f8d0d4c022bd817d4241c5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a bridge channel enter event.  <a href="#aecd7e5c63f8d0d4c022bd817d4241c5c">More...</a><br /></td></tr>
<tr class="separator:aecd7e5c63f8d0d4c022bd817d4241c5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b295a5bab9da9b629c81985e2897840"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a4b295a5bab9da9b629c81985e2897840">ast_bridge_publish_leave</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="memdesc:a4b295a5bab9da9b629c81985e2897840"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a bridge channel leave event.  <a href="#a4b295a5bab9da9b629c81985e2897840">More...</a><br /></td></tr>
<tr class="separator:a4b295a5bab9da9b629c81985e2897840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a075388377d67766550e9e53761404b99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a075388377d67766550e9e53761404b99">ast_bridge_publish_merge</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *to, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *from)</td></tr>
<tr class="memdesc:a075388377d67766550e9e53761404b99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a bridge merge.  <a href="#a075388377d67766550e9e53761404b99">More...</a><br /></td></tr>
<tr class="separator:a075388377d67766550e9e53761404b99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8bd54e09b0c348a3232053e4be9bcfb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#aa8bd54e09b0c348a3232053e4be9bcfb">ast_bridge_publish_state</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge)</td></tr>
<tr class="memdesc:aa8bd54e09b0c348a3232053e4be9bcfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish the state of a bridge.  <a href="#aa8bd54e09b0c348a3232053e4be9bcfb">More...</a><br /></td></tr>
<tr class="separator:aa8bd54e09b0c348a3232053e4be9bcfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95241898553c1d42ea46964b277433ad"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge)</td></tr>
<tr class="memdesc:a95241898553c1d42ea46964b277433ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a snapshot of the bridge state. This is an ao2 object, so <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> to deallocate.  <a href="#a95241898553c1d42ea46964b277433ad">More...</a><br /></td></tr>
<tr class="separator:a95241898553c1d42ea46964b277433ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76837dd4c259276cc59d163e4bc2a3b5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a> (const struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *snapshot, const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *sanitize)</td></tr>
<tr class="memdesc:a76837dd4c259276cc59d163e4bc2a3b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a JSON object from a <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a>.  <a href="#a76837dd4c259276cc59d163e4bc2a3b5">More...</a><br /></td></tr>
<tr class="separator:a76837dd4c259276cc59d163e4bc2a3b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bdfd8273bb885f7a65f6f5d8188c915"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge)</td></tr>
<tr class="memdesc:a7bdfd8273bb885f7a65f6f5d8188c915"><td class="mdescLeft">&#160;</td><td class="mdescRight">A topic which publishes the events for a particular bridge.  <a href="#a7bdfd8273bb885f7a65f6f5d8188c915">More...</a><br /></td></tr>
<tr class="separator:a7bdfd8273bb885f7a65f6f5d8188c915"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf64fa441014314244648caa6c8ab80b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a> (void)</td></tr>
<tr class="memdesc:abf64fa441014314244648caa6c8ab80b"><td class="mdescLeft">&#160;</td><td class="mdescRight">A topic which publishes the events for all bridges.  <a href="#abf64fa441014314244648caa6c8ab80b">More...</a><br /></td></tr>
<tr class="separator:abf64fa441014314244648caa6c8ab80b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3b95347f2f44866724b7748ef0ffc3e"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#ac3b95347f2f44866724b7748ef0ffc3e">ast_channel_entered_bridge_to_json</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg, const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *sanitize)</td></tr>
<tr class="separator:ac3b95347f2f44866724b7748ef0ffc3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38581774b22fdb360299a2cf498ffbcb"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a38581774b22fdb360299a2cf498ffbcb">ast_channel_left_bridge_to_json</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg, const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *sanitize)</td></tr>
<tr class="separator:a38581774b22fdb360299a2cf498ffbcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae301dc233829a0e07fd9747738636a72"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#ae301dc233829a0e07fd9747738636a72">ast_stasis_bridging_init</a> (void)</td></tr>
<tr class="separator:ae301dc233829a0e07fd9747738636a72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ebcb5871f63c60ee8e550587596b36b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a5ebcb5871f63c60ee8e550587596b36b">attended_transfer_dtor</a> (void *obj)</td></tr>
<tr class="separator:a5ebcb5871f63c60ee8e550587596b36b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ce563c6d22abd56247298fd572ea439"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a6ce563c6d22abd56247298fd572ea439">attended_transfer_to_ami</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:a6ce563c6d22abd56247298fd572ea439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f0b80ae9d4c3b52f9b71b06ba3bb3ba"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a3f0b80ae9d4c3b52f9b71b06ba3bb3ba">attended_transfer_to_json</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg, const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *sanitize)</td></tr>
<tr class="separator:a3f0b80ae9d4c3b52f9b71b06ba3bb3ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a470ce81eefae3e443721eccbc57f6dc1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a470ce81eefae3e443721eccbc57f6dc1">blind_transfer_dtor</a> (void *obj)</td></tr>
<tr class="separator:a470ce81eefae3e443721eccbc57f6dc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63d1a9e2048e948eccb8d1834ab8d2f2"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a63d1a9e2048e948eccb8d1834ab8d2f2">blind_transfer_to_ami</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:a63d1a9e2048e948eccb8d1834ab8d2f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e61b6d0dffe2315a869ff166f248599"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a5e61b6d0dffe2315a869ff166f248599">blind_transfer_to_json</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg, const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *sanitize)</td></tr>
<tr class="separator:a5e61b6d0dffe2315a869ff166f248599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94a38866c29d0fba7fd32e4a1a090a20"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a94a38866c29d0fba7fd32e4a1a090a20">bridge_blob_dtor</a> (void *obj)</td></tr>
<tr class="separator:a94a38866c29d0fba7fd32e4a1a090a20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa51c69aeef790f830bdb24b995f106bf"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#aa51c69aeef790f830bdb24b995f106bf">bridge_channel_snapshot_pair_cleanup</a> (struct <a class="el" href="../../da/db4/structast__bridge__channel__snapshot__pair.html">ast_bridge_channel_snapshot_pair</a> *<a class="el" href="../../df/de8/structpair.html">pair</a>)</td></tr>
<tr class="separator:aa51c69aeef790f830bdb24b995f106bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3cb0d6342689b287a6d37b80adcdbdf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#aa3cb0d6342689b287a6d37b80adcdbdf">bridge_channel_snapshot_pair_init</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge, struct <a class="el" href="../../da/db4/structast__bridge__channel__snapshot__pair.html">ast_bridge_channel_snapshot_pair</a> *snapshot_pair)</td></tr>
<tr class="separator:aa3cb0d6342689b287a6d37b80adcdbdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd161ae34220b966e5d2b35d9c2f9b72"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#abd161ae34220b966e5d2b35d9c2f9b72">bridge_merge_message_create</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *to, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *from)</td></tr>
<tr class="memdesc:abd161ae34220b966e5d2b35d9c2f9b72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bridge merge message creation helper.  <a href="#abd161ae34220b966e5d2b35d9c2f9b72">More...</a><br /></td></tr>
<tr class="separator:abd161ae34220b966e5d2b35d9c2f9b72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8a5edc4099d4ea126a345997b2834e9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#ab8a5edc4099d4ea126a345997b2834e9">bridge_merge_message_dtor</a> (void *obj)</td></tr>
<tr class="memdesc:ab8a5edc4099d4ea126a345997b2834e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor for bridge merge messages.  <a href="#ab8a5edc4099d4ea126a345997b2834e9">More...</a><br /></td></tr>
<tr class="separator:ab8a5edc4099d4ea126a345997b2834e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac738c330e2a7470ec824a2fa94811348"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#ac738c330e2a7470ec824a2fa94811348">bridge_publish_state_from_blob</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge, struct <a class="el" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> *obj)</td></tr>
<tr class="separator:ac738c330e2a7470ec824a2fa94811348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3df470f4762c140fe75e2eb48d0ce46"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#ab3df470f4762c140fe75e2eb48d0ce46">bridge_snapshot_dtor</a> (void *obj)</td></tr>
<tr class="memdesc:ab3df470f4762c140fe75e2eb48d0ce46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor for bridge snapshots.  <a href="#ab3df470f4762c140fe75e2eb48d0ce46">More...</a><br /></td></tr>
<tr class="separator:ab3df470f4762c140fe75e2eb48d0ce46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add80c15db9febf8c5c7aef86e25f9853"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#add80c15db9febf8c5c7aef86e25f9853">bridge_snapshot_update_create</a> (struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *old, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *new)</td></tr>
<tr class="separator:add80c15db9febf8c5c7aef86e25f9853"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2a6194146fc3e38616f8fd66f55f125"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#ae2a6194146fc3e38616f8fd66f55f125">bridge_snapshot_update_dtor</a> (void *obj)</td></tr>
<tr class="separator:ae2a6194146fc3e38616f8fd66f55f125"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae533d4edc97a21476c3f0600a6665eb1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#ae533d4edc97a21476c3f0600a6665eb1">bridge_topics_destroy</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge)</td></tr>
<tr class="separator:ae533d4edc97a21476c3f0600a6665eb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47e2e9503f7beb080c820edc385d0ca6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a47e2e9503f7beb080c820edc385d0ca6">bridge_topics_init</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge)</td></tr>
<tr class="separator:a47e2e9503f7beb080c820edc385d0ca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46bdf1ed4616859d85488f151cd61a6f"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a46bdf1ed4616859d85488f151cd61a6f">capability2str</a> (uint32_t capabilities)</td></tr>
<tr class="separator:a46bdf1ed4616859d85488f151cd61a6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f5816df674dfa9b3143bf3d325c60dc"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a4f5816df674dfa9b3143bf3d325c60dc">container_to_json_array</a> (struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *items, const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *sanitize)</td></tr>
<tr class="separator:a4f5816df674dfa9b3143bf3d325c60dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c58e8db4e31ef6c790a83648a2dddce"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a9c58e8db4e31ef6c790a83648a2dddce">simple_bridge_channel_event</a> (const char *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge_snapshot, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *channel_snapshot, const struct timeval *tv, const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *sanitize)</td></tr>
<tr class="separator:a9c58e8db4e31ef6c790a83648a2dddce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23f5b0736a7524a008638cb19aac20d1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a23f5b0736a7524a008638cb19aac20d1">stasis_bridging_cleanup</a> (void)</td></tr>
<tr class="separator:a23f5b0736a7524a008638cb19aac20d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:ad9ba11f3e20a0a25be0b54bf04a81705"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#ad9ba11f3e20a0a25be0b54bf04a81705">STASIS_MESSAGE_TYPE_DEFN</a> (<a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a>)</td></tr>
<tr class="memdesc:ad9ba11f3e20a0a25be0b54bf04a81705"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define bridge message types.  <a href="#ad9ba11f3e20a0a25be0b54bf04a81705">More...</a><br /></td></tr>
<tr class="separator:ad9ba11f3e20a0a25be0b54bf04a81705"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb475e7d91494ce5f8623c379f426821"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#abb475e7d91494ce5f8623c379f426821">STASIS_MESSAGE_TYPE_DEFN</a> (<a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type</a>,.to_json=<a class="el" href="../../da/d0f/stasis__bridges_8c.html#a141cb49725321747635f3111525583ed">ast_bridge_merge_message_to_json</a>)</td></tr>
<tr class="separator:abb475e7d91494ce5f8623c379f426821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66a702b3c7e8dee1ea8f1e1407bf99f2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a66a702b3c7e8dee1ea8f1e1407bf99f2">STASIS_MESSAGE_TYPE_DEFN</a> (<a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type</a>,.to_json=<a class="el" href="../../da/d0f/stasis__bridges_8c.html#ac3b95347f2f44866724b7748ef0ffc3e">ast_channel_entered_bridge_to_json</a>)</td></tr>
<tr class="separator:a66a702b3c7e8dee1ea8f1e1407bf99f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba554eb4fcece50a0cc95637d32d47e7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#aba554eb4fcece50a0cc95637d32d47e7">STASIS_MESSAGE_TYPE_DEFN</a> (<a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type</a>,.to_json=<a class="el" href="../../da/d0f/stasis__bridges_8c.html#a38581774b22fdb360299a2cf498ffbcb">ast_channel_left_bridge_to_json</a>)</td></tr>
<tr class="separator:aba554eb4fcece50a0cc95637d32d47e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca104f7f1bd503356c8ae400c6da6c1e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#aca104f7f1bd503356c8ae400c6da6c1e">STASIS_MESSAGE_TYPE_DEFN</a> (<a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type</a>,.to_json=<a class="el" href="../../da/d0f/stasis__bridges_8c.html#a5e61b6d0dffe2315a869ff166f248599">blind_transfer_to_json</a>,.<a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a>=<a class="el" href="../../da/d0f/stasis__bridges_8c.html#a63d1a9e2048e948eccb8d1834ab8d2f2">blind_transfer_to_ami</a>)</td></tr>
<tr class="separator:aca104f7f1bd503356c8ae400c6da6c1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c83cc44f24d482e3e9fbb84d0324178"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a7c83cc44f24d482e3e9fbb84d0324178">STASIS_MESSAGE_TYPE_DEFN</a> (<a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type</a>,.to_json=<a class="el" href="../../da/d0f/stasis__bridges_8c.html#a3f0b80ae9d4c3b52f9b71b06ba3bb3ba">attended_transfer_to_json</a>,.<a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a>=<a class="el" href="../../da/d0f/stasis__bridges_8c.html#a6ce563c6d22abd56247298fd572ea439">attended_transfer_to_ami</a>)</td></tr>
<tr class="separator:a7c83cc44f24d482e3e9fbb84d0324178"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a729647b6b24abb62561ee17d87d73f43"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a></td></tr>
<tr class="separator:a729647b6b24abb62561ee17d87d73f43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20df01df18ba86528d57c317aef55785"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a></td></tr>
<tr class="separator:a20df01df18ba86528d57c317aef55785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac33fc704453179f9371e0f8123da56d5"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d0f/stasis__bridges_8c.html#ac33fc704453179f9371e0f8123da56d5">result_strs</a> []</td></tr>
<tr class="separator:ac33fc704453179f9371e0f8123da56d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Stasis Messages and Data Types for Bridge Objects. </p>
<dl class="section author"><dt>Author</dt><dd>Kinsey Moore <a href="#" onclick="location.href='mai'+'lto:'+'kmo'+'or'+'e@d'+'ig'+'ium'+'.c'+'om'; return false;">kmoor<span style="display: none;">.nosp@m.</span>e@di<span style="display: none;">.nosp@m.</span>gium.<span style="display: none;">.nosp@m.</span>com</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a449169f26afbc412fc537b51a9cd0e16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a449169f26afbc412fc537b51a9cd0e16">&#9670;&nbsp;</a></span>SNAPSHOT_CHANNELS_BUCKETS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SNAPSHOT_CHANNELS_BUCKETS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00044">44</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00202">ast_bridge_snapshot_create()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3ba70be1910dd4bebfc77dec29ffc43b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ba70be1910dd4bebfc77dec29ffc43b">&#9670;&nbsp;</a></span>ast_attended_transfer_message_add_app()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_attended_transfer_message_add_app </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *&#160;</td>
          <td class="paramname"><em>transfer_msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>replace_channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add details for an attended transfer to an application. </p>
<p>If the transfer is sending one or more parties into an application, then this should be called to add appropriate details to the transfer message being published.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transfer_msg</td><td>The message to add details to </td></tr>
    <tr><td class="paramname">app</td><td>The name of the application that the parties are being transferred to </td></tr>
    <tr><td class="paramname">replace_channel</td><td>The local channel that is in the bridge and running the application</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01313">1313</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00340">ast_attended_transfer_message::app</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00307">AST_ATTENDED_TRANSFER_DEST_APP</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00309">AST_ATTENDED_TRANSFER_DEST_LOCAL_APP</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">ast_attended_transfer_message::dest_type</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00329">ast_attended_transfer_message::replace_channel</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04729">ast_bridge_transfer_attended()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l04280">attended_transfer_bridge()</a>.</p>
<div class="fragment"><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;{</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">dest_type</a> = replace_channel ? <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8">AST_ATTENDED_TRANSFER_DEST_LOCAL_APP</a> : <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4">AST_ATTENDED_TRANSFER_DEST_APP</a>;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   <span class="keywordflow">if</span> (replace_channel) {</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a69d67589993bc38c485c20b84ce40034">replace_channel</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(replace_channel));</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <span class="keywordflow">if</span> (!transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a69d67589993bc38c485c20b84ce40034">replace_channel</a>) {</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      }</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   }</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a3fa409a52b6210dbe249b2f37430fd4a">app</a>, <a class="code" href="../../d0/db6/app__mysql_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a>, <span class="keyword">sizeof</span>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a3fa409a52b6210dbe249b2f37430fd4a">app</a>));</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;}</div><div class="ttc" id="structast__attended__transfer__message_html_a68eeab7290249706588af2b6cffbdcaa"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a></div><div class="ttdeci">union ast_attended_transfer_message::@324 dest</div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4">AST_ATTENDED_TRANSFER_DEST_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00307">stasis_bridges.h:307</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8">AST_ATTENDED_TRANSFER_DEST_LOCAL_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00309">stasis_bridges.h:309</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a3fa409a52b6210dbe249b2f37430fd4a"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a3fa409a52b6210dbe249b2f37430fd4a">ast_attended_transfer_message::app</a></div><div class="ttdeci">char app[AST_MAX_APP]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00340">stasis_bridges.h:340</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a69d67589993bc38c485c20b84ce40034"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a69d67589993bc38c485c20b84ce40034">ast_attended_transfer_message::replace_channel</a></div><div class="ttdeci">struct ast_channel_snapshot * replace_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00329">stasis_bridges.h:329</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a4623d089424156732a5f5591381d8b31"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">ast_attended_transfer_message::dest_type</a></div><div class="ttdeci">enum ast_attended_transfer_dest_type dest_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">stasis_bridges.h:335</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="app__mysql_8c_html_a1d9b1eccfc259a14525ce817482a3f88"><div class="ttname"><a href="../../d0/db6/app__mysql_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a></div><div class="ttdeci">static const char app[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db6/app__mysql_8c_source.html#l00062">app_mysql.c:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abec87c9a1f3c9607a841cdf035ae95fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abec87c9a1f3c9607a841cdf035ae95fd">&#9670;&nbsp;</a></span>ast_attended_transfer_message_add_link()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_attended_transfer_message_add_link </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *&#160;</td>
          <td class="paramname"><em>transfer_msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>locals</em>[2]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add details for an attended transfer that has a link between bridges. </p>
<p>An attended transfer may be accomplished by linking two bridges together with local channels. If this is how the transfer is to be completed, call this function in order to fill in details about the transfer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transfer_msg</td><td>The message to add details to. </td></tr>
    <tr><td class="paramname">locals</td><td>An array of local channel halves that each are in one of the involved bridges.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01330">1330</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00311">AST_ATTENDED_TRANSFER_DEST_LINK</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">ast_attended_transfer_message::dest_type</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00342">ast_attended_transfer_message::links</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04280">attended_transfer_bridge()</a>.</p>
<div class="fragment"><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;{</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;   transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">dest_type</a> = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527">AST_ATTENDED_TRANSFER_DEST_LINK</a>;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; 2; ++i) {</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a7f2aed874f63d44e55ccbe7b4e59f356">links</a>[i] = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(locals[i]));</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;      <span class="keywordflow">if</span> (!transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a7f2aed874f63d44e55ccbe7b4e59f356">links</a>[i]) {</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      }</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;   }</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527">AST_ATTENDED_TRANSFER_DEST_LINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00311">stasis_bridges.h:311</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a68eeab7290249706588af2b6cffbdcaa"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a></div><div class="ttdeci">union ast_attended_transfer_message::@324 dest</div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a7f2aed874f63d44e55ccbe7b4e59f356"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a7f2aed874f63d44e55ccbe7b4e59f356">ast_attended_transfer_message::links</a></div><div class="ttdeci">struct ast_channel_snapshot * links[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00342">stasis_bridges.h:342</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a4623d089424156732a5f5591381d8b31"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">ast_attended_transfer_message::dest_type</a></div><div class="ttdeci">enum ast_attended_transfer_dest_type dest_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">stasis_bridges.h:335</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aae3000e9dc05d9b3023f5a571ffb14d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae3000e9dc05d9b3023f5a571ffb14d7">&#9670;&nbsp;</a></span>ast_attended_transfer_message_add_merge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_attended_transfer_message_add_merge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *&#160;</td>
          <td class="paramname"><em>transfer_msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>final_bridge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add details for a bridge merge to an attended transfer message. </p>
<p>If the transfer is accomplished by a bridge merge (or swap optimization), then this should be called on the created attended transfer message to have the appropriate details added on.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transfer_msg</td><td>The transfer message to add details to </td></tr>
    <tr><td class="paramname">final_bridge</td><td>The bridge where the surviving parties reside</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01283">1283</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00305">AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00338">ast_attended_transfer_message::bridge</a>, <a class="el" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">ast_attended_transfer_message::dest_type</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01645">publish_transfer_success()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l04663">two_bridge_attended_transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;{</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;   transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">dest_type</a> = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515">AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE</a>;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad62863a88a87dfc024a1d18c32ab3958">bridge</a>, final_bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>,</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;         <span class="keyword">sizeof</span>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad62863a88a87dfc024a1d18c32ab3958">bridge</a>));</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515">AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00305">stasis_bridges.h:305</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a68eeab7290249706588af2b6cffbdcaa"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a></div><div class="ttdeci">union ast_attended_transfer_message::@324 dest</div></div>
<div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_ad62863a88a87dfc024a1d18c32ab3958"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#ad62863a88a87dfc024a1d18c32ab3958">ast_attended_transfer_message::bridge</a></div><div class="ttdeci">char bridge[AST_UUID_STR_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00338">stasis_bridges.h:338</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a4623d089424156732a5f5591381d8b31"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">ast_attended_transfer_message::dest_type</a></div><div class="ttdeci">enum ast_attended_transfer_dest_type dest_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">stasis_bridges.h:335</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a402aa031878d54df98c95146d51fad50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a402aa031878d54df98c95146d51fad50">&#9670;&nbsp;</a></span>ast_attended_transfer_message_add_threeway()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_attended_transfer_message_add_threeway </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *&#160;</td>
          <td class="paramname"><em>transfer_msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>survivor_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>survivor_bridge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add details for an attended transfer that was resolved as a three-way call. </p>
<p>If the transfer results in a three-way call between the transferer, the transferee, and the transfer target, then this should be called in order to add appropriate details to the transfer message to be published.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transfer_msg</td><td>The message to add details to </td></tr>
    <tr><td class="paramname">survivor_channel</td><td>The transferer channel that exists in the three-way call </td></tr>
    <tr><td class="paramname">survivor_bridge</td><td>The bridge where the three-way call takes place.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01293">1293</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00313">AST_ATTENDED_TRANSFER_DEST_THREEWAY</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00234">ast_bridge_channel_snapshot_pair::bridge_snapshot</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00235">ast_bridge_channel_snapshot_pair::channel_snapshot</a>, <a class="el" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">ast_attended_transfer_message::dest_type</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00344">ast_attended_transfer_message::threeway</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00327">ast_attended_transfer_message::to_transfer_target</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00325">ast_attended_transfer_message::to_transferee</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::uniqueid</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::uniqueid</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01668">publish_transfer_threeway()</a>.</p>
<div class="fragment"><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;{</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;   transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">dest_type</a> = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf">AST_ATTENDED_TRANSFER_DEST_THREEWAY</a>;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;   <span class="keywordflow">if</span> (!strcmp(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(survivor_channel), transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>)) {</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">threeway</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a> = transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">threeway</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a> = transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   }</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   <span class="keywordflow">if</span> (!strcmp(survivor_bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>)) {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">threeway</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a> = transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">threeway</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a> = transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;   }</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a68eeab7290249706588af2b6cffbdcaa"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a></div><div class="ttdeci">union ast_attended_transfer_message::@324 dest</div></div>
<div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf">AST_ATTENDED_TRANSFER_DEST_THREEWAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00313">stasis_bridges.h:313</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">ast_channel_snapshot_base::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_ad4cabb0173fd175d7bac078a1a49bcb4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">ast_attended_transfer_message::to_transferee</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00325">stasis_bridges.h:325</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a82a439e20f31112e595909550f5201c4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">ast_attended_transfer_message::to_transfer_target</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transfer_target</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00327">stasis_bridges.h:327</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a4623d089424156732a5f5591381d8b31"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">ast_attended_transfer_message::dest_type</a></div><div class="ttdeci">enum ast_attended_transfer_dest_type dest_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">stasis_bridges.h:335</a></div></div>
<div class="ttc" id="structast__bridge__channel__snapshot__pair_html_adc69b45f11dbab86e83609b31b952033"><div class="ttname"><a href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">ast_bridge_channel_snapshot_pair::channel_snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * channel_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00235">stasis_bridges.h:235</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_aabc3ff47104c976454227f116ac48325"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">ast_attended_transfer_message::threeway</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair threeway</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00344">stasis_bridges.h:344</a></div></div>
<div class="ttc" id="structast__bridge__channel__snapshot__pair_html_a548fa9691ccede16b32f244dd9637db4"><div class="ttname"><a href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">ast_bridge_channel_snapshot_pair::bridge_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00234">stasis_bridges.h:234</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">ast_bridge_snapshot::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d80b41bade979c37596d850cfcf3e64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d80b41bade979c37596d850cfcf3e64">&#9670;&nbsp;</a></span>ast_attended_transfer_message_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a>* ast_attended_transfer_message_create </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_external</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>to_transferee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>transferee_bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>to_transfer_target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>target_bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>transferee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>transfer_target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an Attended transfer message to be published. </p>
<p>The parameters to this function are the basic necessities in order to create the initial attended transfer message.</p>
<p>The transferee and transfer_target parameters are optional. If not provided, then this function will attempt to determine who the transferee and transfer target are based on the input transferer channels and bridges. You typically will not need to provide an explicit transferee and transfer target channel unless your attended transfer is implemented in a strange way.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is_external</td><td>Non-zero if the transfer was initiated by a native channel driver protocol. </td></tr>
    <tr><td class="paramname">to_transferee</td><td>The transferer channel that is bridged to the transferee channel. </td></tr>
    <tr><td class="paramname">transferee_bridge</td><td>The bridge between the transferer and transferee. May be NULL. </td></tr>
    <tr><td class="paramname">to_transfer_target</td><td>The transferer channel that is bridged to the transfer target. </td></tr>
    <tr><td class="paramname">target_bridge</td><td>The bridge between the transferer and transfer target. May be NULL. </td></tr>
    <tr><td class="paramname">transferee</td><td>The channel that is being transferred. Optional. </td></tr>
    <tr><td class="paramname">transfer_target</td><td>The channel that is being transferred to. Optional.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failure to allocate or create snapshots </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The created attended transfer message </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01226">1226</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04142">ast_bridge_peer()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01206">attended_transfer_dtor()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00760">bridge_channel_snapshot_pair_init()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00333">ast_attended_transfer_message::target</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00327">ast_attended_transfer_message::to_transfer_target</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00325">ast_attended_transfer_message::to_transferee</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00331">ast_attended_transfer_message::transferee</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04729">ast_bridge_transfer_attended()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01692">publish_transfer_fail()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01645">publish_transfer_success()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01668">publish_transfer_threeway()</a>.</p>
<div class="fragment"><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;{</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *transfer_msg;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;   transfer_msg = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*transfer_msg), <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a5ebcb5871f63c60ee8e550587596b36b">attended_transfer_dtor</a>);</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   <span class="keywordflow">if</span> (!transfer_msg) {</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;   }</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d0f/stasis__bridges_8c.html#aa3cb0d6342689b287a6d37b80adcdbdf">bridge_channel_snapshot_pair_init</a>(to_transferee, transferee_bridge, &amp;transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>) ||</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;         <a class="code" href="../../da/d0f/stasis__bridges_8c.html#aa3cb0d6342689b287a6d37b80adcdbdf">bridge_channel_snapshot_pair_init</a>(to_transfer_target, target_bridge, &amp;transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>)) {</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(transfer_msg);</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;   }</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;   <span class="keywordflow">if</span> (transferee) {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(transferee));</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <span class="keywordflow">if</span> (!transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>) {</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(transfer_msg);</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      }</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (transferee_bridge) {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      transferee = <a class="code" href="../../d4/d56/bridge_8h.html#a08a41371fb4f020d645a0e6f50434005">ast_bridge_peer</a>(transferee_bridge, to_transferee);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      <span class="keywordflow">if</span> (transferee) {</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;         transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(transferee));</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(transferee);</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;         <span class="keywordflow">if</span> (!transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>) {</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(transfer_msg);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;         }</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      }</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;   }</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   <span class="keywordflow">if</span> (transfer_target) {</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">target</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(transfer_target));</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <span class="keywordflow">if</span> (!transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">target</a>) {</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(transfer_msg);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      }</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (target_bridge) {</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      transfer_target = <a class="code" href="../../d4/d56/bridge_8h.html#a08a41371fb4f020d645a0e6f50434005">ast_bridge_peer</a>(target_bridge, to_transfer_target);</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      <span class="keywordflow">if</span> (transfer_target) {</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;         transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">target</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(transfer_target));</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(transfer_target);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;         <span class="keywordflow">if</span> (!transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">target</a>) {</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(transfer_msg);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;         }</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      }</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;   }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;   <span class="keywordflow">return</span> transfer_msg;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;}</div><div class="ttc" id="structast__attended__transfer__message_html"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a></div><div class="ttdoc">Message representing attended transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00319">stasis_bridges.h:319</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_adb1db9449fd1828a7cc4e1df8f22c3c4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">ast_attended_transfer_message::target</a></div><div class="ttdeci">struct ast_channel_snapshot * target</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00333">stasis_bridges.h:333</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_aa3cb0d6342689b287a6d37b80adcdbdf"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#aa3cb0d6342689b287a6d37b80adcdbdf">bridge_channel_snapshot_pair_init</a></div><div class="ttdeci">static int bridge_channel_snapshot_pair_init(struct ast_channel *channel, struct ast_bridge *bridge, struct ast_bridge_channel_snapshot_pair *snapshot_pair)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00760">stasis_bridges.c:760</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_ad4cabb0173fd175d7bac078a1a49bcb4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">ast_attended_transfer_message::to_transferee</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00325">stasis_bridges.h:325</a></div></div>
<div class="ttc" id="bridge_8h_html_a08a41371fb4f020d645a0e6f50434005"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a08a41371fb4f020d645a0e6f50434005">ast_bridge_peer</a></div><div class="ttdeci">struct ast_channel * ast_bridge_peer(struct ast_bridge *bridge, struct ast_channel *chan)</div><div class="ttdoc">Get the channel&amp;#39;s bridge peer only if the bridge is two-party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l04142">bridge.c:4142</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a82a439e20f31112e595909550f5201c4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">ast_attended_transfer_message::to_transfer_target</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transfer_target</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00327">stasis_bridges.h:327</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a5ebcb5871f63c60ee8e550587596b36b"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a5ebcb5871f63c60ee8e550587596b36b">attended_transfer_dtor</a></div><div class="ttdeci">static void attended_transfer_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l01206">stasis_bridges.c:1206</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a9b1d5bd6bf7fd25f9a35a6e3717f9959"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">ast_attended_transfer_message::transferee</a></div><div class="ttdeci">struct ast_channel_snapshot * transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00331">stasis_bridges.h:331</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a20c565f2b4f6dd680b2fa04f8d74f3c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20c565f2b4f6dd680b2fa04f8d74f3c4">&#9670;&nbsp;</a></span>ast_blind_transfer_message_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a>* ast_blind_transfer_message_create </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_external</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>transferer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a blind transfer message to be published. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is_external</td><td>Whether the blind transfer was initiated externally (e.g. via AMI or native protocol) </td></tr>
    <tr><td class="paramname">transferer</td><td>The transferer's channel that is bridged to the transferee </td></tr>
    <tr><td class="paramname">bridge</td><td>The bridge the transferer and transferee are in </td></tr>
    <tr><td class="paramname">context</td><td>The destination context for the blind transfer </td></tr>
    <tr><td class="paramname">exten</td><td>The destination extension for the blind transfer</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failure to allocate or create snapshots </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The created blind transfer message </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00929">929</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00919">blind_transfer_dtor()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00259">ast_blind_transfer_message::context</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00261">ast_blind_transfer_message::exten</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00253">ast_blind_transfer_message::is_external</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00255">ast_blind_transfer_message::transferer</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04477">ast_bridge_transfer_blind()</a>, and <a class="el" href="../../db/dc4/test__cel_8c_source.html#l01240">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;{</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a> *msg;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   msg = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*msg), <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a470ce81eefae3e443721eccbc57f6dc1">blind_transfer_dtor</a>);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;   }</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a97d7526f26c0a3ca13db9d459c5e1ca2">transferer</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(transferer));</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;   <span class="keywordflow">if</span> (!msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a97d7526f26c0a3ca13db9d459c5e1ca2">transferer</a>) {</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   }</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#ae3e993332191c334c011319613e6a6b0">is_external</a> = <a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#ae3e993332191c334c011319613e6a6b0">is_external</a>;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <span class="keyword">sizeof</span>(msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>));</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a78d4847658b695383d849efd12399b38">exten</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <span class="keyword">sizeof</span>(msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a78d4847658b695383d849efd12399b38">exten</a>));</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;   <span class="keywordflow">return</span> msg;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a78d4847658b695383d849efd12399b38">ast_blind_transfer_message::exten</a></div><div class="ttdeci">char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00261">stasis_bridges.h:261</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a></div><div class="ttdoc">Message published during a blind transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00249">stasis_bridges.h:249</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_ae3e993332191c334c011319613e6a6b0"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#ae3e993332191c334c011319613e6a6b0">ast_blind_transfer_message::is_external</a></div><div class="ttdeci">int is_external</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00253">stasis_bridges.h:253</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a470ce81eefae3e443721eccbc57f6dc1"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a470ce81eefae3e443721eccbc57f6dc1">blind_transfer_dtor</a></div><div class="ttdeci">static void blind_transfer_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00919">stasis_bridges.c:919</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a97d7526f26c0a3ca13db9d459c5e1ca2"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a97d7526f26c0a3ca13db9d459c5e1ca2">ast_blind_transfer_message::transferer</a></div><div class="ttdeci">struct ast_channel_snapshot * transferer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00255">stasis_bridges.h:255</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#ac25ea00ee3f082df06e0cf468cbde240">ast_blind_transfer_message::context</a></div><div class="ttdeci">char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00259">stasis_bridges.h:259</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="add1309ffa28c3f41255dc7b294b968d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add1309ffa28c3f41255dc7b294b968d6">&#9670;&nbsp;</a></span>ast_bridge_blob_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a>* ast_bridge_blob_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td>
          <td class="paramname"><em>blob</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a <a class="el" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> message. </p>
<dl class="section since"><dt>Since</dt><dd>12 The <em>blob</em> JSON object requires a <code>"type"</code> field describing the blob. It should also be treated as immutable and not modified after it is put into the message.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>bridge is locked. </dd>
<dd>
No channels are locked.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>Channel blob is associated with, or NULL for global/all bridges. </td></tr>
    <tr><td class="paramname">blob</td><td>JSON object representing the data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> message. </dd>
<dd>
<code>NULL</code> on error </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00500">500</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00202">ast_bridge_snapshot_create()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00067">ast_json_ref()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00129">ast_bridge_blob::blob</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">ast_bridge_blob::bridge</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00489">bridge_blob_dtor()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">ast_bridge_blob::channel</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00582">ast_bridge_publish_enter()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00611">ast_bridge_publish_leave()</a>, and <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00585">send_conf_stasis()</a>.</p>
<div class="fragment"><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;{</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> *obj;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keywordflow">if</span> (!message_type) {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   obj = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*obj), <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a94a38866c29d0fba7fd32e4a1a090a20">bridge_blob_dtor</a>);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   <span class="keywordflow">if</span> (!obj) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   }</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="keywordflow">if</span> (bridge) {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a> = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a>(bridge);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(obj, -1);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      }</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">channel</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan));</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">channel</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(obj, -1);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   <span class="keywordflow">if</span> (blob) {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a> = <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(blob);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(message_type, obj);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(obj, -1);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <span class="keywordflow">return</span> msg;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div><div class="ttc" id="json_8h_html_a0ca956b7df20127f7e38993c3c06cb2c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a></div><div class="ttdeci">struct ast_json * ast_json_ref(struct ast_json *value)</div><div class="ttdoc">Increase refcount on value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00067">json.c:67</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_a8ee8cdf03a2b9d3424011cb6875751fa"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">ast_bridge_blob::channel</a></div><div class="ttdeci">struct ast_channel_snapshot * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">stasis_bridges.h:127</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_ad2b8e22df32b99651f727cd9a8dcb9f3"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">ast_bridge_blob::blob</a></div><div class="ttdeci">struct ast_json * blob</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00129">stasis_bridges.h:129</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_a820b583b07f0cf97618ca22d73cd8f09"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">ast_bridge_blob::bridge</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">stasis_bridges.h:125</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__bridge__blob_html"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a></div><div class="ttdoc">Blob of data associated with a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00123">stasis_bridges.h:123</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a95241898553c1d42ea46964b277433ad"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a></div><div class="ttdeci">struct ast_bridge_snapshot * ast_bridge_snapshot_create(struct ast_bridge *bridge)</div><div class="ttdoc">Generate a snapshot of the bridge state. This is an ao2 object, so ao2_cleanup() to deallocate...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00202">stasis_bridges.c:202</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a94a38866c29d0fba7fd32e4a1a090a20"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a94a38866c29d0fba7fd32e4a1a090a20">bridge_blob_dtor</a></div><div class="ttdeci">static void bridge_blob_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00489">stasis_bridges.c:489</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af4bfe3c16917cccf7fff18dbfa57cc75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4bfe3c16917cccf7fff18dbfa57cc75">&#9670;&nbsp;</a></span>ast_bridge_blob_create_from_snapshots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a>* ast_bridge_blob_create_from_snapshots </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>chan_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td>
          <td class="paramname"><em>blob</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a <a class="el" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> message from snapshots. </p>
<dl class="section since"><dt>Since</dt><dd>13.28 </dd>
<dd>
16.5 The <em>blob</em> JSON object requires a <code>"type"</code> field describing the blob. It should also be treated as immutable and not modified after it is put into the message.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>bridge is locked. </dd>
<dd>
No channels are locked.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_snapshot</td><td>Bridge snapshot </td></tr>
    <tr><td class="paramname">channel_snapshot</td><td>Channel snapshot </td></tr>
    <tr><td class="paramname">blob</td><td>JSON object representing the data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> message. </dd>
<dd>
<code>NULL</code> on error </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00546">546</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00067">ast_json_ref()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00129">ast_bridge_blob::blob</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">ast_bridge_blob::bridge</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00489">bridge_blob_dtor()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">ast_bridge_blob::channel</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00622">send_conf_stasis_snapshots()</a>.</p>
<div class="fragment"><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;{</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> *obj;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <span class="keywordflow">if</span> (!message_type) {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   }</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   obj = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*obj), <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a94a38866c29d0fba7fd32e4a1a090a20">bridge_blob_dtor</a>);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <span class="keywordflow">if</span> (!obj) {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <span class="keywordflow">if</span> (bridge_snapshot) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(bridge_snapshot);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <span class="keywordflow">if</span> (chan_snapshot) {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">channel</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(chan_snapshot);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <span class="keywordflow">if</span> (blob) {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a> = <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(blob);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   }</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(message_type, obj);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(obj, -1);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <span class="keywordflow">return</span> msg;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;}</div><div class="ttc" id="json_8h_html_a0ca956b7df20127f7e38993c3c06cb2c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a></div><div class="ttdeci">struct ast_json * ast_json_ref(struct ast_json *value)</div><div class="ttdoc">Increase refcount on value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00067">json.c:67</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_a8ee8cdf03a2b9d3424011cb6875751fa"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">ast_bridge_blob::channel</a></div><div class="ttdeci">struct ast_channel_snapshot * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">stasis_bridges.h:127</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_ad2b8e22df32b99651f727cd9a8dcb9f3"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">ast_bridge_blob::blob</a></div><div class="ttdeci">struct ast_json * blob</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00129">stasis_bridges.h:129</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_a820b583b07f0cf97618ca22d73cd8f09"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">ast_bridge_blob::bridge</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">stasis_bridges.h:125</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__bridge__blob_html"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a></div><div class="ttdoc">Blob of data associated with a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00123">stasis_bridges.h:123</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a94a38866c29d0fba7fd32e4a1a090a20"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a94a38866c29d0fba7fd32e4a1a090a20">bridge_blob_dtor</a></div><div class="ttdeci">static void bridge_blob_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00489">stasis_bridges.c:489</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a04efba17b1302d217a2a07a02c3eac98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04efba17b1302d217a2a07a02c3eac98">&#9670;&nbsp;</a></span>ast_bridge_get_snapshot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a>* ast_bridge_get_snapshot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current snapshot for the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>17.0</dd></dl>
<p>The returned pointer is AO2 managed, so <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> when you're done.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>The bridge from which to get the snapshot. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Most recent snapshot. <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> when done. </dd>
<dd>
<code>NULL</code> if there isn't a snapshot. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01378">1378</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00480">ast_bridge_lock</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00414">ast_bridge::current_snapshot</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00885">ast_ari_bridges_list()</a>, <a class="el" href="../../d8/d3a/bridges_8c_source.html#l00078">bridges_scrape_cb()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05094">handle_bridge_show_all()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00448">send_bridge_list_item_cb()</a>, and <a class="el" href="../../db/dc4/test__cel_8c_source.html#l00351">test_cel_generate_peer_str_snapshot()</a>.</p>
<div class="fragment"><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;{</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *snapshot;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;   }</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(bridge);</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;   snapshot = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>);</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;   <span class="keywordflow">return</span> snapshot;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;}</div><div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structast__bridge_html_a7dbe1cd4b391636e49491eafab9095e0"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">ast_bridge::current_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * current_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00414">bridge.h:414</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="bridge_8h_html_ab8ee807d2c3a21d19e16fedf35c90de8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a></div><div class="ttdeci">#define ast_bridge_lock(bridge)</div><div class="ttdoc">Lock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00480">bridge.h:480</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acc73aeca13d954cdfd8607d94f4539b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc73aeca13d954cdfd8607d94f4539b8">&#9670;&nbsp;</a></span>ast_bridge_get_snapshot_by_uniqueid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a>* ast_bridge_get_snapshot_by_uniqueid </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>bridge_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current snapshot for the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>17.0</dd></dl>
<p>The returned pointer is AO2 managed, so <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> when you're done.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_id</td><td>Uniqueid of the bridge from which to get the snapshot. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Most recent snapshot. <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> when done. </dd>
<dd>
<code>NULL</code> if bridge or snapshot doesn't exist. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01359">1359</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05070">ast_bridge_find_by_id()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00480">ast_bridge_lock</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00414">ast_bridge::current_snapshot</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00856">ast_ari_bridges_get()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00057">find_bridge()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05157">handle_bridge_show_specific()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00555">manager_bridge_info()</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l02095">stasis_app_user_event()</a>.</p>
<div class="fragment"><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;{</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *snapshot;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>));</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   bridge = <a class="code" href="../../d4/d56/bridge_8h.html#a69034688e4e730fca4c3e12b7ac38300">ast_bridge_find_by_id</a>(<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>);</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   }</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(bridge);</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   snapshot = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>);</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge);</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, -1);</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;   <span class="keywordflow">return</span> snapshot;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;}</div><div class="ttc" id="bridge_8h_html_a69034688e4e730fca4c3e12b7ac38300"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a69034688e4e730fca4c3e12b7ac38300">ast_bridge_find_by_id</a></div><div class="ttdeci">struct ast_bridge * ast_bridge_find_by_id(const char *bridge_id)</div><div class="ttdoc">Find bridge by id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l05070">bridge.c:5070</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__bridge_html_a7dbe1cd4b391636e49491eafab9095e0"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">ast_bridge::current_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * current_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00414">bridge.h:414</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">ast_bridge_snapshot::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="bridge_8h_html_ab8ee807d2c3a21d19e16fedf35c90de8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a></div><div class="ttdeci">#define ast_bridge_lock(bridge)</div><div class="ttdoc">Lock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00480">bridge.h:480</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a141cb49725321747635f3111525583ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a141cb49725321747635f3111525583ed">&#9670;&nbsp;</a></span>ast_bridge_merge_message_to_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> * ast_bridge_merge_message_to_json </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *&#160;</td>
          <td class="paramname"><em>sanitize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00438">438</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00712">ast_bridge_snapshot_to_json()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00649">ast_json_timeval()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00093">ast_bridge_merge_message::from</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message_timestamp()</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00094">ast_bridge_merge_message::to</a>.</p>
<div class="fragment"><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;{</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a> *merge = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_bridge_to = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a>(merge-&gt;<a class="code" href="../../d5/d49/structast__bridge__merge__message.html#a7895e4b9097873d85bd687c7ee592440">to</a>, sanitize);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_bridge_from = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a>(merge-&gt;<a class="code" href="../../d5/d49/structast__bridge__merge__message.html#a75f281a7bfa00f9ae5993fafe6fdb80d">from</a>, sanitize);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <span class="keywordflow">if</span> (!json_bridge_to || !json_bridge_from) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_bridge_to);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_bridge_from);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: o, s: o, s: o}&quot;</span>,</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="stringliteral">&quot;type&quot;</span>, <span class="stringliteral">&quot;BridgeMerged&quot;</span>,</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="stringliteral">&quot;timestamp&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a>(*<a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(msg), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="stringliteral">&quot;bridge&quot;</span>, json_bridge_to,</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="stringliteral">&quot;bridge_from&quot;</span>, json_bridge_from);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;}</div><div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stasis_8h_html_a0a9c10eadd9db34f8c0b19619752ea93"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a></div><div class="ttdeci">const struct timeval * stasis_message_timestamp(const struct stasis_message *msg)</div><div class="ttdoc">Get the time when a message was created. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message.c:203</a></div></div>
<div class="ttc" id="json_8h_html_a2b7c72e2e3ab2634d8a4f8b708440d95"><div class="ttname"><a href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a></div><div class="ttdeci">struct ast_json * ast_json_timeval(const struct timeval tv, const char *zone)</div><div class="ttdoc">Construct a timeval as JSON. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00649">json.c:649</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="structast__bridge__merge__message_html_a75f281a7bfa00f9ae5993fafe6fdb80d"><div class="ttname"><a href="../../d5/d49/structast__bridge__merge__message.html#a75f281a7bfa00f9ae5993fafe6fdb80d">ast_bridge_merge_message::from</a></div><div class="ttdeci">struct ast_bridge_snapshot * from</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00093">stasis_bridges.h:93</a></div></div>
<div class="ttc" id="structast__bridge__merge__message_html"><div class="ttname"><a href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a></div><div class="ttdoc">Message representing the merge of two bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00092">stasis_bridges.h:92</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="stasis__bridges_8c_html_a76837dd4c259276cc59d163e4bc2a3b5"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_bridge_snapshot_to_json(const struct ast_bridge_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_bridge_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00712">stasis_bridges.c:712</a></div></div>
<div class="ttc" id="structast__bridge__merge__message_html_a7895e4b9097873d85bd687c7ee592440"><div class="ttname"><a href="../../d5/d49/structast__bridge__merge__message.html#a7895e4b9097873d85bd687c7ee592440">ast_bridge_merge_message::to</a></div><div class="ttdeci">struct ast_bridge_snapshot * to</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00094">stasis_bridges.h:94</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1949ac2d3f4b2113242d981cc315b451"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1949ac2d3f4b2113242d981cc315b451">&#9670;&nbsp;</a></span>ast_bridge_publish_attended_transfer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_publish_attended_transfer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *&#160;</td>
          <td class="paramname"><em>transfer_msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish an attended transfer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transfer_msg</td><td>The transfer message to publish </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01346">1346</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00179">ast_bridge_topic_all()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04729">ast_bridge_transfer_attended()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01692">publish_transfer_fail()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01645">publish_transfer_success()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01668">publish_transfer_threeway()</a>.</p>
<div class="fragment"><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;{</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type</a>(), transfer_msg);</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;   }</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a>(), msg);</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;}</div><div class="ttc" id="stasis__bridges_8c_html_abf64fa441014314244648caa6c8ab80b"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic_all(void)</div><div class="ttdoc">A topic which publishes the events for all bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00179">stasis_bridges.c:179</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a263062ed75918c257f5401617389bdd8"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type</a></div><div class="ttdeci">struct stasis_message_type * ast_attended_transfer_type(void)</div><div class="ttdoc">Message type for ast_attended_transfer_message. </div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a0d32d9383a2e73b8292eec6c8359e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a0d32d9383a2e73b8292eec6c8359e0">&#9670;&nbsp;</a></span>ast_bridge_publish_blind_transfer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_publish_blind_transfer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a> *&#160;</td>
          <td class="paramname"><em>transfer_message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a blind transfer event. </p>
<dl class="section pre"><dt>Precondition</dt><dd>Bridges involved are locked. Channels involved are not locked.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is_external</td><td>Whether the blind transfer was initiated externally (e.g. via AMI or native protocol) </td></tr>
    <tr><td class="paramname">result</td><td>The success or failure of the transfer </td></tr>
    <tr><td class="paramname">to_transferee</td><td>The bridge between the transferer and transferee plus the transferer channel </td></tr>
    <tr><td class="paramname">context</td><td>The destination context for the blind transfer </td></tr>
    <tr><td class="paramname">exten</td><td>The destination extension for the blind transfer </td></tr>
    <tr><td class="paramname">transferee_channel</td><td>If a single channel is being transferred, this is it. If multiple parties are being transferred, this is NULL. </td></tr>
    <tr><td class="paramname">replace_channel</td><td>If multiple parties are being transferred or the transfer cannot reach across the bridge due to bridge flags, this is the channel connecting their bridge to the destination. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00953">953</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00179">ast_bridge_topic_all()</a>, <a class="el" href="../../d1/d25/app__stasis_8c_source.html#l00080">stasis</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04477">ast_bridge_transfer_blind()</a>, and <a class="el" href="../../db/dc4/test__cel_8c_source.html#l01240">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;{</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="code" href="../../d1/d25/app__stasis_8c.html#a6721791de482d8b1d92dd47aae0fc0be">stasis</a>;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   stasis = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type</a>(), transfer_message);</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;   <span class="keywordflow">if</span> (!stasis) {</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   }</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a>(), stasis);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(stasis);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_a05b1c5a7666e29a9ec982e3c9d6c1b85"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type</a></div><div class="ttdeci">struct stasis_message_type * ast_blind_transfer_type(void)</div><div class="ttdoc">Message type for ast_blind_transfer_message. </div></div>
<div class="ttc" id="stasis__bridges_8c_html_abf64fa441014314244648caa6c8ab80b"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic_all(void)</div><div class="ttdoc">A topic which publishes the events for all bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00179">stasis_bridges.c:179</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="app__stasis_8c_html_a6721791de482d8b1d92dd47aae0fc0be"><div class="ttname"><a href="../../d1/d25/app__stasis_8c.html#a6721791de482d8b1d92dd47aae0fc0be">stasis</a></div><div class="ttdeci">static const char * stasis</div><div class="ttdoc">Dialplan application name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d25/app__stasis_8c_source.html#l00080">app_stasis.c:80</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aecd7e5c63f8d0d4c022bd817d4241c5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecd7e5c63f8d0d4c022bd817d4241c5c">&#9670;&nbsp;</a></span>ast_bridge_publish_enter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_publish_enter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>swap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a bridge channel enter event. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>bridge is locked. </dd>
<dd>
No channels are locked.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>The bridge a channel entered </td></tr>
    <tr><td class="paramname">chan</td><td>The channel that entered the bridge </td></tr>
    <tr><td class="paramname">swap</td><td>The channel being swapped out of the bridge </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00582">582</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00500">ast_bridge_blob_create()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00057">AST_BRIDGE_FLAG_INVISIBLE</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00184">ast_bridge_topic()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00381">bridge_publish_state_from_blob()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00377">ast_bridge::feature_flags</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02235">bridge_channel_internal_push_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;{</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *blob = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a>)) {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;   }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   <span class="keywordflow">if</span> (swap) {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s}&quot;</span>, <span class="stringliteral">&quot;swap&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(swap));</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keywordflow">if</span> (!blob) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   msg = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#add1309ffa28c3f41255dc7b294b968d6">ast_bridge_blob_create</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type</a>(), bridge, chan, blob);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(blob);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <span class="comment">/* enter blob first, then state */</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a>(bridge), msg);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <a class="code" href="../../da/d0f/stasis__bridges_8c.html#ac738c330e2a7470ec824a2fa94811348">bridge_publish_state_from_blob</a>(bridge, <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg));</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;}</div><div class="ttc" id="structast__bridge_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00377">bridge.h:377</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a8bd3a6c07bd2064a82a7c27091ba0fce"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_entered_bridge_type(void)</div><div class="ttdoc">Message type for channel enter bridge blob messages. </div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00057">bridge_features.h:57</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_ac738c330e2a7470ec824a2fa94811348"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#ac738c330e2a7470ec824a2fa94811348">bridge_publish_state_from_blob</a></div><div class="ttdeci">static void bridge_publish_state_from_blob(struct ast_bridge *bridge, struct ast_bridge_blob *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00381">stasis_bridges.c:381</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a7bdfd8273bb885f7a65f6f5d8188c915"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic(struct ast_bridge *bridge)</div><div class="ttdoc">A topic which publishes the events for a particular bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00184">stasis_bridges.c:184</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="stasis__bridges_8c_html_add1309ffa28c3f41255dc7b294b968d6"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#add1309ffa28c3f41255dc7b294b968d6">ast_bridge_blob_create</a></div><div class="ttdeci">struct stasis_message * ast_bridge_blob_create(struct stasis_message_type *message_type, struct ast_bridge *bridge, struct ast_channel *chan, struct ast_json *blob)</div><div class="ttdoc">Creates a ast_bridge_blob message. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00500">stasis_bridges.c:500</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b295a5bab9da9b629c81985e2897840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b295a5bab9da9b629c81985e2897840">&#9670;&nbsp;</a></span>ast_bridge_publish_leave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_publish_leave </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a bridge channel leave event. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>bridge is locked. </dd>
<dd>
No channels are locked.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>The bridge a channel left </td></tr>
    <tr><td class="paramname">chan</td><td>The channel that left the bridge </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00611">611</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00500">ast_bridge_blob_create()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00057">AST_BRIDGE_FLAG_INVISIBLE</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00184">ast_bridge_topic()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00381">bridge_publish_state_from_blob()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00377">ast_bridge::feature_flags</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02178">bridge_channel_internal_pull()</a>.</p>
<div class="fragment"><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;{</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a>)) {</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   msg = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#add1309ffa28c3f41255dc7b294b968d6">ast_bridge_blob_create</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type</a>(), bridge, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   }</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <span class="comment">/* state first, then leave blob (opposite of enter, preserves nesting of events) */</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <a class="code" href="../../da/d0f/stasis__bridges_8c.html#ac738c330e2a7470ec824a2fa94811348">bridge_publish_state_from_blob</a>(bridge, <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg));</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a>(bridge), msg);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;}</div><div class="ttc" id="structast__bridge_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00377">bridge.h:377</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a4cf969b75b455dc9301ede7c7830d4b6"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_left_bridge_type(void)</div><div class="ttdoc">Message type for channel leave bridge blob messages. </div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00057">bridge_features.h:57</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_ac738c330e2a7470ec824a2fa94811348"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#ac738c330e2a7470ec824a2fa94811348">bridge_publish_state_from_blob</a></div><div class="ttdeci">static void bridge_publish_state_from_blob(struct ast_bridge *bridge, struct ast_bridge_blob *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00381">stasis_bridges.c:381</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a7bdfd8273bb885f7a65f6f5d8188c915"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic(struct ast_bridge *bridge)</div><div class="ttdoc">A topic which publishes the events for a particular bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00184">stasis_bridges.c:184</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_add1309ffa28c3f41255dc7b294b968d6"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#add1309ffa28c3f41255dc7b294b968d6">ast_bridge_blob_create</a></div><div class="ttdeci">struct stasis_message * ast_bridge_blob_create(struct stasis_message_type *message_type, struct ast_bridge *bridge, struct ast_channel *chan, struct ast_json *blob)</div><div class="ttdoc">Creates a ast_bridge_blob message. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00500">stasis_bridges.c:500</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a075388377d67766550e9e53761404b99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a075388377d67766550e9e53761404b99">&#9670;&nbsp;</a></span>ast_bridge_publish_merge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_publish_merge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>from</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a bridge merge. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>Bridges involved are locked</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">to</td><td>The bridge to which channels are being added </td></tr>
    <tr><td class="paramname">from</td><td>The bridge from which channels are being removed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00460">460</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00057">AST_BRIDGE_FLAG_INVISIBLE</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00179">ast_bridge_topic_all()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00418">bridge_merge_message_create()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00377">ast_bridge::feature_flags</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l02096">bridge_do_merge()</a>.</p>
<div class="fragment"><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;{</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a> *merge_msg;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type</a>()) {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(to != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(from != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;to-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a>) == 0);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;from-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a>) == 0);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   merge_msg = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#abd161ae34220b966e5d2b35d9c2f9b72">bridge_merge_message_create</a>(to, from);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <span class="keywordflow">if</span> (!merge_msg) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type</a>(), merge_msg);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(merge_msg, -1);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;   }</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a>(), msg);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;}</div><div class="ttc" id="structast__bridge_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00377">bridge.h:377</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_abd161ae34220b966e5d2b35d9c2f9b72"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#abd161ae34220b966e5d2b35d9c2f9b72">bridge_merge_message_create</a></div><div class="ttdeci">static struct ast_bridge_merge_message * bridge_merge_message_create(struct ast_bridge *to, struct ast_bridge *from)</div><div class="ttdoc">Bridge merge message creation helper. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00418">stasis_bridges.c:418</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00057">bridge_features.h:57</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_abf64fa441014314244648caa6c8ab80b"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic_all(void)</div><div class="ttdoc">A topic which publishes the events for all bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00179">stasis_bridges.c:179</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a20be59047a504f4c5dca2289beef7963"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type</a></div><div class="ttdeci">struct stasis_message_type * ast_bridge_merge_message_type(void)</div><div class="ttdoc">Message type for ast_bridge_merge_message. </div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="structast__bridge__merge__message_html"><div class="ttname"><a href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a></div><div class="ttdoc">Message representing the merge of two bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00092">stasis_bridges.h:92</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa8bd54e09b0c348a3232053e4be9bcfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8bd54e09b0c348a3232053e4be9bcfb">&#9670;&nbsp;</a></span>ast_bridge_publish_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_publish_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish the state of a bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>Bridge is locked</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>The bridge for which to publish state </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00350">350</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00202">ast_bridge_snapshot_create()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00184">ast_bridge_topic()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00275">bridge_snapshot_update_create()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00414">ast_bridge::current_snapshot</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, and <a class="el" href="../../d0/d89/codec__g726_8c_source.html#l00367">update()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l03816">ast_bridge_set_single_src_video_mode()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03883">ast_bridge_update_talker_src_video_mode()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01443">bridge_reconfigured()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l00709">bridge_register()</a>.</p>
<div class="fragment"><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *new_snapshot;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(bridge != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   new_snapshot = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a>(bridge);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keywordflow">if</span> (!new_snapshot) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   update = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#add80c15db9febf8c5c7aef86e25f9853">bridge_snapshot_update_create</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>, new_snapshot);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   <span class="comment">/* There may not have been an old snapshot */</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a> = new_snapshot;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <span class="keywordflow">if</span> (!update) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a>(), update);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(update, -1);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a>(bridge), msg);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_a93724fb58fab92a0a749535e8c8534d2"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a></div><div class="ttdeci">struct stasis_message_type * ast_bridge_snapshot_type(void)</div><div class="ttdoc">Message type for ast_bridge_snapshot. </div></div>
<div class="ttc" id="codec__g726_8c_html_a8c58a1d1fd9436ff5145385d3ef7a430"><div class="ttname"><a href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a></div><div class="ttdeci">static void update(int code_size, int y, int wi, int fi, int dq, int sr, int dqsez, struct g726_state *state_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/codec__g726_8c_source.html#l00367">codec_g726.c:367</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__snapshot__update_html"><div class="ttname"><a href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00034">stasis_bridges.h:34</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_add80c15db9febf8c5c7aef86e25f9853"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#add80c15db9febf8c5c7aef86e25f9853">bridge_snapshot_update_create</a></div><div class="ttdeci">static struct ast_bridge_snapshot_update * bridge_snapshot_update_create(struct ast_bridge_snapshot *old, struct ast_bridge_snapshot *new)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00275">stasis_bridges.c:275</a></div></div>
<div class="ttc" id="structast__bridge_html_a7dbe1cd4b391636e49491eafab9095e0"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">ast_bridge::current_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * current_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00414">bridge.h:414</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a95241898553c1d42ea46964b277433ad"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a></div><div class="ttdeci">struct ast_bridge_snapshot * ast_bridge_snapshot_create(struct ast_bridge *bridge)</div><div class="ttdoc">Generate a snapshot of the bridge state. This is an ao2 object, so ao2_cleanup() to deallocate...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00202">stasis_bridges.c:202</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a7bdfd8273bb885f7a65f6f5d8188c915"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic(struct ast_bridge *bridge)</div><div class="ttdoc">A topic which publishes the events for a particular bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00184">stasis_bridges.c:184</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a95241898553c1d42ea46964b277433ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95241898553c1d42ea46964b277433ad">&#9670;&nbsp;</a></span>ast_bridge_snapshot_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a>* ast_bridge_snapshot_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a snapshot of the bridge state. This is an ao2 object, so <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> to deallocate. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>Bridge is locked</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>The bridge from which to generate a snapshot</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">AO2</td><td>refcounted snapshot on success </td></tr>
    <tr><td class="paramname">NULL</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00202">202</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00057">AST_BRIDGE_FLAG_INVISIBLE</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00102">AST_BRIDGE_VIDEO_MODE_SINGLE_SRC</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00105">AST_BRIDGE_VIDEO_MODE_TALKER_SRC</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d2/d48/strings_8c_source.html#l00206">ast_str_container_add()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01312">ast_str_container_alloc</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00194">bridge_snapshot_dtor()</a>, <a class="el" href="../../d0/d3b/bridge__technology_8h_source.html#l00066">ast_bridge_technology::capabilities</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00343">ast_bridge_snapshot::capabilities</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00116">ast_bridge_video_single_src_data::chan_vsrc</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00123">ast_bridge_video_talker_src_data::chan_vsrc</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00339">ast_bridge_snapshot::channels</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00371">ast_bridge::channels</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00351">ast_bridge_snapshot::creationtime</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00416">ast_bridge::creationtime</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::creator</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00341">ast_bridge_snapshot::feature_flags</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00377">ast_bridge::feature_flags</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00160">ast_bridge_video_mode::mode</a>, <a class="el" href="../../dc/d4a/structast__bridge__video__mode.html#a4815762cb716d9c02daf0caadd5a41db">ast_bridge_video_mode::mode_data</a>, <a class="el" href="../../d0/d3b/bridge__technology_8h_source.html#l00063">ast_bridge_technology::name</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00267">ast_bridge_methods::name</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00347">ast_bridge_snapshot::num_active</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00383">ast_bridge::num_active</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00345">ast_bridge_snapshot::num_channels</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00381">ast_bridge::num_channels</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00163">ast_bridge_video_mode::single_src_data</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00044">SNAPSHOT_CHANNELS_BUCKETS</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00375">ast_bridge::softmix</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00164">ast_bridge_video_mode::talker_src_data</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00363">ast_bridge::technology</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00359">ast_bridge::v_table</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00287">ast_bridge_softmix::video_mode</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00349">ast_bridge_snapshot::video_mode</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00925">ast_ari_bridges_create()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00954">ast_ari_bridges_create_with_id()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00500">ast_bridge_blob_create()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00350">ast_bridge_publish_state()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04477">ast_bridge_transfer_blind()</a>, <a class="el" href="../../db/dc4/test__cel_8c_source.html#l01240">AST_TEST_DEFINE()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00760">bridge_channel_snapshot_pair_init()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00418">bridge_merge_message_create()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00319">bridge_topics_destroy()</a>, and <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00622">send_conf_stasis_snapshots()</a>.</p>
<div class="fragment"><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;{</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *snapshot;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a>)) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   snapshot = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*snapshot), <a class="code" href="../../da/d0f/stasis__bridges_8c.html#ab3df470f4762c140fe75e2eb48d0ce46">bridge_snapshot_dtor</a>,</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(snapshot, 128)) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a> = <a class="code" href="../../d6/d90/strings_8h.html#a77f7edf078454c39f51bae4bb400e764">ast_str_container_alloc</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a449169f26afbc412fc537b51a9cd0e16">SNAPSHOT_CHANNELS_BUCKETS</a>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <span class="keywordflow">if</span> (!snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a>) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>, bridge_channel, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#ae2861c04a240bbc90f32ade1e1261afa">ast_str_container_add</a>(snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a>,</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>))) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(snapshot, uniqueid, bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(snapshot, technology, bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(snapshot, subclass, bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a2f11ecc852af02fffecf1411013f0873">v_table</a>-&gt;<a class="code" href="../../d2/dd3/structast__bridge__methods.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(snapshot, creator, bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a6e62c2774ca18846e6e45057fb8b7a22">creator</a>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(snapshot, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a> = bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a04532f57b1eebac73f24b2a02dab161f">capabilities</a> = bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a04532f57b1eebac73f24b2a02dab161f">capabilities</a>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a97e3bedeadf444995deb6fab68f57e21">num_channels</a> = bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">num_channels</a>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a4d514eabb35f71dee132ef1df1c6cdbb">num_active</a> = bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a4d514eabb35f71dee132ef1df1c6cdbb">num_active</a>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a> = bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a1b93f1ad25034993f7eb103a0322562e">video_mode</a> = bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a1792ee6e2f718b197f668a8b7b16d357">softmix</a>.<a class="code" href="../../d0/d50/structast__bridge__softmix.html#ae0ffa389d55fc0dad4678b948a822add">video_mode</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#ac651801cf270dd2ba5cb81ec5c786308">mode</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   <span class="keywordflow">if</span> (snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a1b93f1ad25034993f7eb103a0322562e">video_mode</a> == <a class="code" href="../../d4/d56/bridge_8h.html#ab388dac5f5c172d7f03c54487afac906a1e27ac207e54a30dfdabc463bd18d43c">AST_BRIDGE_VIDEO_MODE_SINGLE_SRC</a></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      &amp;&amp; bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a1792ee6e2f718b197f668a8b7b16d357">softmix</a>.<a class="code" href="../../d0/d50/structast__bridge__softmix.html#ae0ffa389d55fc0dad4678b948a822add">video_mode</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a4815762cb716d9c02daf0caadd5a41db">mode_data</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a3d1942099e12eaade08dc9ac3fee6c23">single_src_data</a>.<a class="code" href="../../dd/dbe/structast__bridge__video__single__src__data.html#af17523bbee86cea3e7c6959258436728">chan_vsrc</a>) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(snapshot, video_source_id,</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a1792ee6e2f718b197f668a8b7b16d357">softmix</a>.<a class="code" href="../../d0/d50/structast__bridge__softmix.html#ae0ffa389d55fc0dad4678b948a822add">video_mode</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a4815762cb716d9c02daf0caadd5a41db">mode_data</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a3d1942099e12eaade08dc9ac3fee6c23">single_src_data</a>.<a class="code" href="../../dd/dbe/structast__bridge__video__single__src__data.html#af17523bbee86cea3e7c6959258436728">chan_vsrc</a>));</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a1b93f1ad25034993f7eb103a0322562e">video_mode</a> == <a class="code" href="../../d4/d56/bridge_8h.html#ab388dac5f5c172d7f03c54487afac906a48458f43dd7ef0372614e5848f9226e0">AST_BRIDGE_VIDEO_MODE_TALKER_SRC</a></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      &amp;&amp; bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a1792ee6e2f718b197f668a8b7b16d357">softmix</a>.<a class="code" href="../../d0/d50/structast__bridge__softmix.html#ae0ffa389d55fc0dad4678b948a822add">video_mode</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a4815762cb716d9c02daf0caadd5a41db">mode_data</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a7325622e00e4be7c0370401933bb75e5">talker_src_data</a>.<a class="code" href="../../d0/dad/structast__bridge__video__talker__src__data.html#af17523bbee86cea3e7c6959258436728">chan_vsrc</a>) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(snapshot, video_source_id,</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a1792ee6e2f718b197f668a8b7b16d357">softmix</a>.<a class="code" href="../../d0/d50/structast__bridge__softmix.html#ae0ffa389d55fc0dad4678b948a822add">video_mode</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a4815762cb716d9c02daf0caadd5a41db">mode_data</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a7325622e00e4be7c0370401933bb75e5">talker_src_data</a>.<a class="code" href="../../d0/dad/structast__bridge__video__talker__src__data.html#af17523bbee86cea3e7c6959258436728">chan_vsrc</a>));</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   <span class="keywordflow">return</span> snapshot;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div><div class="ttc" id="structast__bridge__snapshot_html_adbc20a2fd50bb1376a3c6094e96a31e3"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">ast_bridge_snapshot::channels</a></div><div class="ttdeci">struct ao2_container * channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00339">bridge.h:339</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a298ce3dfc9b5b8a8351e8ed103aa7e5c"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">ast_bridge_snapshot::creationtime</a></div><div class="ttdeci">struct timeval creationtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00351">bridge.h:351</a></div></div>
<div class="ttc" id="structast__bridge_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00377">bridge.h:377</a></div></div>
<div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a449169f26afbc412fc537b51a9cd0e16"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a449169f26afbc412fc537b51a9cd0e16">SNAPSHOT_CHANNELS_BUCKETS</a></div><div class="ttdeci">#define SNAPSHOT_CHANNELS_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00044">stasis_bridges.c:44</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="structast__bridge_html_a4d514eabb35f71dee132ef1df1c6cdbb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a4d514eabb35f71dee132ef1df1c6cdbb">ast_bridge::num_active</a></div><div class="ttdeci">unsigned int num_active</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00383">bridge.h:383</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structast__bridge__methods_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d2/dd3/structast__bridge__methods.html#a8f8f80d37794cde9472343e4487ba3eb">ast_bridge_methods::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00267">bridge.h:267</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="structast__bridge__softmix_html_ae0ffa389d55fc0dad4678b948a822add"><div class="ttname"><a href="../../d0/d50/structast__bridge__softmix.html#ae0ffa389d55fc0dad4678b948a822add">ast_bridge_softmix::video_mode</a></div><div class="ttdeci">struct ast_bridge_video_mode video_mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00287">bridge.h:287</a></div></div>
<div class="ttc" id="structast__bridge_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#ace9168767fc3707cf5f0a7d049682ba3">ast_bridge::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="structast__bridge__technology_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d1/d04/structast__bridge__technology.html#a8f8f80d37794cde9472343e4487ba3eb">ast_bridge_technology::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00063">bridge_technology.h:63</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00057">bridge_features.h:57</a></div></div>
<div class="ttc" id="structast__bridge__video__single__src__data_html_af17523bbee86cea3e7c6959258436728"><div class="ttname"><a href="../../dd/dbe/structast__bridge__video__single__src__data.html#af17523bbee86cea3e7c6959258436728">ast_bridge_video_single_src_data::chan_vsrc</a></div><div class="ttdeci">struct ast_channel * chan_vsrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00116">bridge.h:116</a></div></div>
<div class="ttc" id="strings_8h_html_a77f7edf078454c39f51bae4bb400e764"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a77f7edf078454c39f51bae4bb400e764">ast_str_container_alloc</a></div><div class="ttdeci">#define ast_str_container_alloc(buckets)</div><div class="ttdoc">Allocates a hash container for bare strings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01312">strings.h:1312</a></div></div>
<div class="ttc" id="bridge_8h_html_ab388dac5f5c172d7f03c54487afac906a1e27ac207e54a30dfdabc463bd18d43c"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab388dac5f5c172d7f03c54487afac906a1e27ac207e54a30dfdabc463bd18d43c">AST_BRIDGE_VIDEO_MODE_SINGLE_SRC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00102">bridge.h:102</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge_html_a1792ee6e2f718b197f668a8b7b16d357"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a1792ee6e2f718b197f668a8b7b16d357">ast_bridge::softmix</a></div><div class="ttdeci">struct ast_bridge_softmix softmix</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00375">bridge.h:375</a></div></div>
<div class="ttc" id="structast__bridge__video__mode_html_a4815762cb716d9c02daf0caadd5a41db"><div class="ttname"><a href="../../dc/d4a/structast__bridge__video__mode.html#a4815762cb716d9c02daf0caadd5a41db">ast_bridge_video_mode::mode_data</a></div><div class="ttdeci">union ast_bridge_video_mode::@227 mode_data</div></div>
<div class="ttc" id="stasis__bridges_8c_html_ab3df470f4762c140fe75e2eb48d0ce46"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#ab3df470f4762c140fe75e2eb48d0ce46">bridge_snapshot_dtor</a></div><div class="ttdeci">static void bridge_snapshot_dtor(void *obj)</div><div class="ttdoc">Destructor for bridge snapshots. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00194">stasis_bridges.c:194</a></div></div>
<div class="ttc" id="structast__bridge_html_aabb60a181a9e98fb31f8666fb4f5d0b8"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">ast_bridge::technology</a></div><div class="ttdeci">struct ast_bridge_technology * technology</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00363">bridge.h:363</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a04532f57b1eebac73f24b2a02dab161f"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a04532f57b1eebac73f24b2a02dab161f">ast_bridge_snapshot::capabilities</a></div><div class="ttdeci">uint32_t capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00343">bridge.h:343</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="structast__bridge__video__mode_html_a7325622e00e4be7c0370401933bb75e5"><div class="ttname"><a href="../../dc/d4a/structast__bridge__video__mode.html#a7325622e00e4be7c0370401933bb75e5">ast_bridge_video_mode::talker_src_data</a></div><div class="ttdeci">struct ast_bridge_video_talker_src_data talker_src_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00164">bridge.h:164</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__bridge__video__mode_html_a3d1942099e12eaade08dc9ac3fee6c23"><div class="ttname"><a href="../../dc/d4a/structast__bridge__video__mode.html#a3d1942099e12eaade08dc9ac3fee6c23">ast_bridge_video_mode::single_src_data</a></div><div class="ttdeci">struct ast_bridge_video_single_src_data single_src_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00163">bridge.h:163</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__bridge_html_a2f11ecc852af02fffecf1411013f0873"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a2f11ecc852af02fffecf1411013f0873">ast_bridge::v_table</a></div><div class="ttdeci">const struct ast_bridge_methods * v_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00359">bridge.h:359</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a1b93f1ad25034993f7eb103a0322562e"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a1b93f1ad25034993f7eb103a0322562e">ast_bridge_snapshot::video_mode</a></div><div class="ttdeci">enum ast_bridge_video_mode_type video_mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00349">bridge.h:349</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structast__bridge_html_a298ce3dfc9b5b8a8351e8ed103aa7e5c"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">ast_bridge::creationtime</a></div><div class="ttdeci">struct timeval creationtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00416">bridge.h:416</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge_snapshot::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00341">bridge.h:341</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a97e3bedeadf444995deb6fab68f57e21"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a97e3bedeadf444995deb6fab68f57e21">ast_bridge_snapshot::num_channels</a></div><div class="ttdeci">unsigned int num_channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00345">bridge.h:345</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a4d514eabb35f71dee132ef1df1c6cdbb"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a4d514eabb35f71dee132ef1df1c6cdbb">ast_bridge_snapshot::num_active</a></div><div class="ttdeci">unsigned int num_active</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00347">bridge.h:347</a></div></div>
<div class="ttc" id="structast__bridge_html_a77542a877d8ed62331c5b3b6aa3e87a7"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">ast_bridge::channels</a></div><div class="ttdeci">struct ast_bridge_channels_list channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00371">bridge.h:371</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="bridge_8h_html_ab388dac5f5c172d7f03c54487afac906a48458f43dd7ef0372614e5848f9226e0"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab388dac5f5c172d7f03c54487afac906a48458f43dd7ef0372614e5848f9226e0">AST_BRIDGE_VIDEO_MODE_TALKER_SRC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00105">bridge.h:105</a></div></div>
<div class="ttc" id="structast__bridge__video__talker__src__data_html_af17523bbee86cea3e7c6959258436728"><div class="ttname"><a href="../../d0/dad/structast__bridge__video__talker__src__data.html#af17523bbee86cea3e7c6959258436728">ast_bridge_video_talker_src_data::chan_vsrc</a></div><div class="ttdeci">struct ast_channel * chan_vsrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00123">bridge.h:123</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structast__bridge_html_a6e62c2774ca18846e6e45057fb8b7a22"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a6e62c2774ca18846e6e45057fb8b7a22">ast_bridge::creator</a></div><div class="ttdeci">const ast_string_field creator</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="structast__bridge__technology_html_a04532f57b1eebac73f24b2a02dab161f"><div class="ttname"><a href="../../d1/d04/structast__bridge__technology.html#a04532f57b1eebac73f24b2a02dab161f">ast_bridge_technology::capabilities</a></div><div class="ttdeci">uint32_t capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00066">bridge_technology.h:66</a></div></div>
<div class="ttc" id="structast__bridge_html_a97e3bedeadf444995deb6fab68f57e21"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">ast_bridge::num_channels</a></div><div class="ttdeci">unsigned int num_channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00381">bridge.h:381</a></div></div>
<div class="ttc" id="structast__bridge__video__mode_html_ac651801cf270dd2ba5cb81ec5c786308"><div class="ttname"><a href="../../dc/d4a/structast__bridge__video__mode.html#ac651801cf270dd2ba5cb81ec5c786308">ast_bridge_video_mode::mode</a></div><div class="ttdeci">enum ast_bridge_video_mode_type mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00160">bridge.h:160</a></div></div>
<div class="ttc" id="strings_8h_html_ae2861c04a240bbc90f32ade1e1261afa"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ae2861c04a240bbc90f32ade1e1261afa">ast_str_container_add</a></div><div class="ttdeci">int ast_str_container_add(struct ao2_container *str_container, const char *add)</div><div class="ttdoc">Adds a string to a string container allocated by ast_str_container_alloc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d48/strings_8c_source.html#l00206">strings.c:206</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76837dd4c259276cc59d163e4bc2a3b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76837dd4c259276cc59d163e4bc2a3b5">&#9670;&nbsp;</a></span>ast_bridge_snapshot_to_json()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a>* ast_bridge_snapshot_to_json </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *&#160;</td>
          <td class="paramname"><em>sanitize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a JSON object from a <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">snapshot</td><td>The bridge snapshot to convert to JSON </td></tr>
    <tr><td class="paramname">sanitize</td><td>The message sanitizer to use on the snapshot</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON object representing bridge snapshot. </dd>
<dd>
<code>NULL</code> on error </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00712">712</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d56/bridge_8h_source.html#l00100">AST_BRIDGE_VIDEO_MODE_NONE</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04018">ast_bridge_video_mode_to_string()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00404">ast_json_object_set()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00268">ast_json_string_create()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00649">ast_json_timeval()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00343">ast_bridge_snapshot::capabilities</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00703">capability2str()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00339">ast_bridge_snapshot::channels</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00673">container_to_json_array()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00351">ast_bridge_snapshot::creationtime</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::creator</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::subclass</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::technology</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::uniqueid</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00349">ast_bridge_snapshot::video_mode</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::video_source_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00925">ast_ari_bridges_create()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00954">ast_ari_bridges_create_with_id()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00856">ast_ari_bridges_get()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00885">ast_ari_bridges_list()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00438">ast_bridge_merge_message_to_json()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00967">attended_transfer_to_json()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00799">blind_transfer_to_json()</a>, <a class="el" href="../../dd/d92/confbridge__manager_8c_source.html#l00311">bridge_to_json()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02045">multi_user_event_to_json()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00629">simple_bridge_channel_event()</a>, and <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00666">simple_bridge_event()</a>.</p>
<div class="fragment"><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;{</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_bridge;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_channels;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   <span class="keywordflow">if</span> (snapshot == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   }</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   json_channels = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a4f5816df674dfa9b3143bf3d325c60dc">container_to_json_array</a>(snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a>, sanitize);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <span class="keywordflow">if</span> (!json_channels) {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   json_bridge = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: s, s: s, s: s, s: s, s: s, s: o, s: o, s: s}&quot;</span>,</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <span class="stringliteral">&quot;id&quot;</span>, snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>,</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="stringliteral">&quot;technology&quot;</span>, snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#ace6976ffaf8aa0738aa7e01b0e98c04f">technology</a>,</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="stringliteral">&quot;bridge_type&quot;</span>, <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a46bdf1ed4616859d85488f151cd61a6f">capability2str</a>(snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a04532f57b1eebac73f24b2a02dab161f">capabilities</a>),</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <span class="stringliteral">&quot;bridge_class&quot;</span>, snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#aed90bb628ee273a4b27b778b5b0d8ec2">subclass</a>,</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="stringliteral">&quot;creator&quot;</span>, snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a6e62c2774ca18846e6e45057fb8b7a22">creator</a>,</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="stringliteral">&quot;name&quot;</span>, snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <span class="stringliteral">&quot;channels&quot;</span>, json_channels,</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      <span class="stringliteral">&quot;creationtime&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a>(snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="stringliteral">&quot;video_mode&quot;</span>, <a class="code" href="../../d4/d56/bridge_8h.html#a2a2b1e82e019faba42fa278f7a69a699">ast_bridge_video_mode_to_string</a>(snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a1b93f1ad25034993f7eb103a0322562e">video_mode</a>));</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   <span class="keywordflow">if</span> (!json_bridge) {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   }</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   <span class="keywordflow">if</span> (snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a1b93f1ad25034993f7eb103a0322562e">video_mode</a> != <a class="code" href="../../d4/d56/bridge_8h.html#ab388dac5f5c172d7f03c54487afac906a51708384777e8722fae674ea8db89f54">AST_BRIDGE_VIDEO_MODE_NONE</a></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a54eb8725951c786429e4b86d7159309e">video_source_id</a>)) {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(json_bridge, <span class="stringliteral">&quot;video_source_id&quot;</span>,</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a54eb8725951c786429e4b86d7159309e">video_source_id</a>));</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <span class="keywordflow">return</span> json_bridge;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;}</div><div class="ttc" id="structast__bridge__snapshot_html_adbc20a2fd50bb1376a3c6094e96a31e3"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">ast_bridge_snapshot::channels</a></div><div class="ttdeci">struct ao2_container * channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00339">bridge.h:339</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a298ce3dfc9b5b8a8351e8ed103aa7e5c"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">ast_bridge_snapshot::creationtime</a></div><div class="ttdeci">struct timeval creationtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00351">bridge.h:351</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a54eb8725951c786429e4b86d7159309e"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a54eb8725951c786429e4b86d7159309e">ast_bridge_snapshot::video_source_id</a></div><div class="ttdeci">const ast_string_field video_source_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a6e62c2774ca18846e6e45057fb8b7a22"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a6e62c2774ca18846e6e45057fb8b7a22">ast_bridge_snapshot::creator</a></div><div class="ttdeci">const ast_string_field creator</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="json_8h_html_abc8b563c172cfaffa2b555195990f729"><div class="ttname"><a href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a></div><div class="ttdeci">int ast_json_object_set(struct ast_json *object, const char *key, struct ast_json *value)</div><div class="ttdoc">Set a field in a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00404">json.c:404</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a04532f57b1eebac73f24b2a02dab161f"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a04532f57b1eebac73f24b2a02dab161f">ast_bridge_snapshot::capabilities</a></div><div class="ttdeci">uint32_t capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00343">bridge.h:343</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_ace6976ffaf8aa0738aa7e01b0e98c04f"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#ace6976ffaf8aa0738aa7e01b0e98c04f">ast_bridge_snapshot::technology</a></div><div class="ttdeci">const ast_string_field technology</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="json_8h_html_adc52f8d76b7fdd0c8d12987981fd5bf5"><div class="ttname"><a href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a></div><div class="ttdeci">struct ast_json * ast_json_string_create(const char *value)</div><div class="ttdoc">Construct a JSON string from value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00268">json.c:268</a></div></div>
<div class="ttc" id="bridge_8h_html_a2a2b1e82e019faba42fa278f7a69a699"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a2a2b1e82e019faba42fa278f7a69a699">ast_bridge_video_mode_to_string</a></div><div class="ttdeci">const char * ast_bridge_video_mode_to_string(enum ast_bridge_video_mode_type video_mode)</div><div class="ttdoc">Converts an enum representation of a bridge video mode to string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l04018">bridge.c:4018</a></div></div>
<div class="ttc" id="json_8h_html_a2b7c72e2e3ab2634d8a4f8b708440d95"><div class="ttname"><a href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a></div><div class="ttdeci">struct ast_json * ast_json_timeval(const struct timeval tv, const char *zone)</div><div class="ttdoc">Construct a timeval as JSON. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00649">json.c:649</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#ace9168767fc3707cf5f0a7d049682ba3">ast_bridge_snapshot::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a1b93f1ad25034993f7eb103a0322562e"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a1b93f1ad25034993f7eb103a0322562e">ast_bridge_snapshot::video_mode</a></div><div class="ttdeci">enum ast_bridge_video_mode_type video_mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00349">bridge.h:349</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a4f5816df674dfa9b3143bf3d325c60dc"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a4f5816df674dfa9b3143bf3d325c60dc">container_to_json_array</a></div><div class="ttdeci">static struct ast_json * container_to_json_array(struct ao2_container *items, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00673">stasis_bridges.c:673</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">ast_bridge_snapshot::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="bridge_8h_html_ab388dac5f5c172d7f03c54487afac906a51708384777e8722fae674ea8db89f54"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab388dac5f5c172d7f03c54487afac906a51708384777e8722fae674ea8db89f54">AST_BRIDGE_VIDEO_MODE_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00100">bridge.h:100</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structast__bridge__snapshot_html_aed90bb628ee273a4b27b778b5b0d8ec2"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#aed90bb628ee273a4b27b778b5b0d8ec2">ast_bridge_snapshot::subclass</a></div><div class="ttdeci">const ast_string_field subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a46bdf1ed4616859d85488f151cd61a6f"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a46bdf1ed4616859d85488f151cd61a6f">capability2str</a></div><div class="ttdeci">static const char * capability2str(uint32_t capabilities)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00703">stasis_bridges.c:703</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7bdfd8273bb885f7a65f6f5d8188c915"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bdfd8273bb885f7a65f6f5d8188c915">&#9670;&nbsp;</a></span>ast_bridge_topic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* ast_bridge_topic </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A topic which publishes the events for a particular bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12 If the given <em>bridge</em> is <code>NULL</code>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#abf64fa441014314244648caa6c8ab80b" title="A topic which publishes the events for all bridges. ">ast_bridge_topic_all()</a> is returned.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>Bridge for which to get a topic or <code>NULL</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Topic</td><td>for bridge's events. </td></tr>
    <tr><td class="paramname"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#abf64fa441014314244648caa6c8ab80b" title="A topic which publishes the events for all bridges. ">ast_bridge_topic_all()</a></td><td>if <em>bridge</em> is <code>NULL</code>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00184">184</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00179">ast_bridge_topic_all()</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00367">ast_bridge::topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00407">ari_bridges_play_new()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00634">ast_ari_bridges_record()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00582">ast_bridge_publish_enter()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00611">ast_bridge_publish_leave()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00350">ast_bridge_publish_state()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00760">bridge_base_init()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00381">bridge_publish_state_from_blob()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00319">bridge_topics_destroy()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00164">forwards_create_bridge()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00585">send_conf_stasis()</a>, and <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00622">send_conf_stasis_snapshots()</a>.</p>
<div class="fragment"><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;{</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a>();</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   <span class="keywordflow">return</span> bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a136460a7868b48ef576c0fa505ef96db">topic</a>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div><div class="ttc" id="stasis__bridges_8c_html_abf64fa441014314244648caa6c8ab80b"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic_all(void)</div><div class="ttdoc">A topic which publishes the events for all bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00179">stasis_bridges.c:179</a></div></div>
<div class="ttc" id="structast__bridge_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a136460a7868b48ef576c0fa505ef96db">ast_bridge::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00367">bridge.h:367</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abf64fa441014314244648caa6c8ab80b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf64fa441014314244648caa6c8ab80b">&#9670;&nbsp;</a></span>ast_bridge_topic_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* ast_bridge_topic_all </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A topic which publishes the events for all bridges. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Topic</td><td>for all bridge events. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00179">179</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00158">bridge_topic_all</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00915">app_create()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01346">ast_bridge_publish_attended_transfer()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00953">ast_bridge_publish_blind_transfer()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00460">ast_bridge_publish_merge()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00184">ast_bridge_topic()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04314">create_subscriptions()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00681">manager_bridging_init()</a>, <a class="el" href="../../dd/d92/confbridge__manager_8c_source.html#l00721">manager_confbridge_init()</a>, <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l00625">refer_blind_callback()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06514">setup_stasis_subs()</a>.</p>
<div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div><div class="ttc" id="stasis__bridges_8c_html_a729647b6b24abb62561ee17d87d73f43"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a></div><div class="ttdeci">static struct stasis_topic * bridge_topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00158">stasis_bridges.c:158</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3b95347f2f44866724b7748ef0ffc3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3b95347f2f44866724b7748ef0ffc3e">&#9670;&nbsp;</a></span>ast_channel_entered_bridge_to_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> * ast_channel_entered_bridge_to_json </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *&#160;</td>
          <td class="paramname"><em>sanitize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00653">653</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">ast_bridge_blob::bridge</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">ast_bridge_blob::channel</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00629">simple_bridge_channel_event()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message_timestamp()</a>.</p>
<div class="fragment"><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;{</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> *obj = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a9c58e8db4e31ef6c790a83648a2dddce">simple_bridge_channel_event</a>(<span class="stringliteral">&quot;ChannelEnteredBridge&quot;</span>, obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a>,</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">channel</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(msg), sanitize);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;}</div><div class="ttc" id="structast__bridge__blob_html_a8ee8cdf03a2b9d3424011cb6875751fa"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">ast_bridge_blob::channel</a></div><div class="ttdeci">struct ast_channel_snapshot * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">stasis_bridges.h:127</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_a820b583b07f0cf97618ca22d73cd8f09"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">ast_bridge_blob::bridge</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">stasis_bridges.h:125</a></div></div>
<div class="ttc" id="stasis_8h_html_a0a9c10eadd9db34f8c0b19619752ea93"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a></div><div class="ttdeci">const struct timeval * stasis_message_timestamp(const struct stasis_message *msg)</div><div class="ttdoc">Get the time when a message was created. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message.c:203</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a9c58e8db4e31ef6c790a83648a2dddce"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a9c58e8db4e31ef6c790a83648a2dddce">simple_bridge_channel_event</a></div><div class="ttdeci">static struct ast_json * simple_bridge_channel_event(const char *type, struct ast_bridge_snapshot *bridge_snapshot, struct ast_channel_snapshot *channel_snapshot, const struct timeval *tv, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00629">stasis_bridges.c:629</a></div></div>
<div class="ttc" id="structast__bridge__blob_html"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a></div><div class="ttdoc">Blob of data associated with a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00123">stasis_bridges.h:123</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a38581774b22fdb360299a2cf498ffbcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38581774b22fdb360299a2cf498ffbcb">&#9670;&nbsp;</a></span>ast_channel_left_bridge_to_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> * ast_channel_left_bridge_to_json </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *&#160;</td>
          <td class="paramname"><em>sanitize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00663">663</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">ast_bridge_blob::bridge</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">ast_bridge_blob::channel</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00629">simple_bridge_channel_event()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message_timestamp()</a>.</p>
<div class="fragment"><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;{</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> *obj = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a9c58e8db4e31ef6c790a83648a2dddce">simple_bridge_channel_event</a>(<span class="stringliteral">&quot;ChannelLeftBridge&quot;</span>, obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a>,</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">channel</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(msg), sanitize);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;}</div><div class="ttc" id="structast__bridge__blob_html_a8ee8cdf03a2b9d3424011cb6875751fa"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">ast_bridge_blob::channel</a></div><div class="ttdeci">struct ast_channel_snapshot * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">stasis_bridges.h:127</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_a820b583b07f0cf97618ca22d73cd8f09"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">ast_bridge_blob::bridge</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">stasis_bridges.h:125</a></div></div>
<div class="ttc" id="stasis_8h_html_a0a9c10eadd9db34f8c0b19619752ea93"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a></div><div class="ttdeci">const struct timeval * stasis_message_timestamp(const struct stasis_message *msg)</div><div class="ttdoc">Get the time when a message was created. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message.c:203</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a9c58e8db4e31ef6c790a83648a2dddce"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a9c58e8db4e31ef6c790a83648a2dddce">simple_bridge_channel_event</a></div><div class="ttdeci">static struct ast_json * simple_bridge_channel_event(const char *type, struct ast_bridge_snapshot *bridge_snapshot, struct ast_channel_snapshot *channel_snapshot, const struct timeval *tv, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00629">stasis_bridges.c:629</a></div></div>
<div class="ttc" id="structast__bridge__blob_html"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a></div><div class="ttdoc">Blob of data associated with a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00123">stasis_bridges.h:123</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae301dc233829a0e07fd9747738636a72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae301dc233829a0e07fd9747738636a72">&#9670;&nbsp;</a></span>ast_stasis_bridging_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stasis_bridging_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01407">1407</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type()</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00019">ast_register_cleanup()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01392">stasis_bridging_cleanup()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01501">STASIS_MESSAGE_TYPE_INIT</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01833">stasis_topic_pool_create()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l05605">ast_bridging_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;{</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a23f5b0736a7524a008638cb19aac20d1">stasis_bridging_cleanup</a>);</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a> = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;bridge:all&quot;</span>);</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a>) {</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;   }</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;   <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a> = <a class="code" href="../../dd/d79/stasis_8h.html#aeb9a69946c2be89329630328f125330d">stasis_topic_pool_create</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a>);</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a>) {</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;   }</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   res |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a>);</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   res |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type</a>);</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;   res |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type</a>);</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;   res |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type</a>);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;   res |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type</a>);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;   res |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type</a>);</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_a93724fb58fab92a0a749535e8c8534d2"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a></div><div class="ttdeci">struct stasis_message_type * ast_bridge_snapshot_type(void)</div><div class="ttdoc">Message type for ast_bridge_snapshot. </div></div>
<div class="ttc" id="stasis__bridges_8h_html_a05b1c5a7666e29a9ec982e3c9d6c1b85"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type</a></div><div class="ttdeci">struct stasis_message_type * ast_blind_transfer_type(void)</div><div class="ttdoc">Message type for ast_blind_transfer_message. </div></div>
<div class="ttc" id="stasis__bridges_8h_html_a8bd3a6c07bd2064a82a7c27091ba0fce"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_entered_bridge_type(void)</div><div class="ttdoc">Message type for channel enter bridge blob messages. </div></div>
<div class="ttc" id="stasis_8h_html_a70cd046d8e3fd50de5c51aecb2830d2a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_INIT(name)</div><div class="ttdoc">Boiler-plate messaging macro for initializing message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01501">stasis.h:1501</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a4cf969b75b455dc9301ede7c7830d4b6"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_left_bridge_type(void)</div><div class="ttdoc">Message type for channel leave bridge blob messages. </div></div>
<div class="ttc" id="stasis_8h_html_aeb9a69946c2be89329630328f125330d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aeb9a69946c2be89329630328f125330d">stasis_topic_pool_create</a></div><div class="ttdeci">struct stasis_topic_pool * stasis_topic_pool_create(struct stasis_topic *pooled_topic)</div><div class="ttdoc">Create a topic pool that routes messages from dynamically generated topics to the given topic...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01833">stasis.c:1833</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a20be59047a504f4c5dca2289beef7963"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type</a></div><div class="ttdeci">struct stasis_message_type * ast_bridge_merge_message_type(void)</div><div class="ttdoc">Message type for ast_bridge_merge_message. </div></div>
<div class="ttc" id="asterisk_8h_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00019">clicompat.c:19</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a20df01df18ba86528d57c317aef55785"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a></div><div class="ttdeci">static struct stasis_topic_pool * bridge_topic_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00159">stasis_bridges.c:159</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a729647b6b24abb62561ee17d87d73f43"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a></div><div class="ttdeci">static struct stasis_topic * bridge_topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00158">stasis_bridges.c:158</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a263062ed75918c257f5401617389bdd8"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type</a></div><div class="ttdeci">struct stasis_message_type * ast_attended_transfer_type(void)</div><div class="ttdoc">Message type for ast_attended_transfer_message. </div></div>
<div class="ttc" id="stasis__bridges_8c_html_a23f5b0736a7524a008638cb19aac20d1"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a23f5b0736a7524a008638cb19aac20d1">stasis_bridging_cleanup</a></div><div class="ttdeci">static void stasis_bridging_cleanup(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l01392">stasis_bridges.c:1392</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5ebcb5871f63c60ee8e550587596b36b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ebcb5871f63c60ee8e550587596b36b">&#9670;&nbsp;</a></span>attended_transfer_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void attended_transfer_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01206">1206</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00311">AST_ATTENDED_TRANSFER_DEST_LINK</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00786">bridge_channel_snapshot_pair_cleanup()</a>, <a class="el" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">ast_attended_transfer_message::dest_type</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00342">ast_attended_transfer_message::links</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00329">ast_attended_transfer_message::replace_channel</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00333">ast_attended_transfer_message::target</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00327">ast_attended_transfer_message::to_transfer_target</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00325">ast_attended_transfer_message::to_transferee</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00331">ast_attended_transfer_message::transferee</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01226">ast_attended_transfer_message_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;{</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *msg = obj;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;   <a class="code" href="../../da/d0f/stasis__bridges_8c.html#aa51c69aeef790f830bdb24b995f106bf">bridge_channel_snapshot_pair_cleanup</a>(&amp;msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;   <a class="code" href="../../da/d0f/stasis__bridges_8c.html#aa51c69aeef790f830bdb24b995f106bf">bridge_channel_snapshot_pair_cleanup</a>(&amp;msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a69d67589993bc38c485c20b84ce40034">replace_channel</a>);</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>);</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">target</a>);</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;   <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">dest_type</a> != <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527">AST_ATTENDED_TRANSFER_DEST_LINK</a>) {</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   }</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a7f2aed874f63d44e55ccbe7b4e59f356">links</a>); ++i) {</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a7f2aed874f63d44e55ccbe7b4e59f356">links</a>[i]);</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;   }</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527">AST_ATTENDED_TRANSFER_DEST_LINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00311">stasis_bridges.h:311</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a68eeab7290249706588af2b6cffbdcaa"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a></div><div class="ttdeci">union ast_attended_transfer_message::@324 dest</div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a></div><div class="ttdoc">Message representing attended transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00319">stasis_bridges.h:319</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_adb1db9449fd1828a7cc4e1df8f22c3c4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">ast_attended_transfer_message::target</a></div><div class="ttdeci">struct ast_channel_snapshot * target</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00333">stasis_bridges.h:333</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_ad4cabb0173fd175d7bac078a1a49bcb4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">ast_attended_transfer_message::to_transferee</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00325">stasis_bridges.h:325</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a82a439e20f31112e595909550f5201c4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">ast_attended_transfer_message::to_transfer_target</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transfer_target</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00327">stasis_bridges.h:327</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a7f2aed874f63d44e55ccbe7b4e59f356"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a7f2aed874f63d44e55ccbe7b4e59f356">ast_attended_transfer_message::links</a></div><div class="ttdeci">struct ast_channel_snapshot * links[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00342">stasis_bridges.h:342</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a9b1d5bd6bf7fd25f9a35a6e3717f9959"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">ast_attended_transfer_message::transferee</a></div><div class="ttdeci">struct ast_channel_snapshot * transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00331">stasis_bridges.h:331</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a69d67589993bc38c485c20b84ce40034"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a69d67589993bc38c485c20b84ce40034">ast_attended_transfer_message::replace_channel</a></div><div class="ttdeci">struct ast_channel_snapshot * replace_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00329">stasis_bridges.h:329</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a4623d089424156732a5f5591381d8b31"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">ast_attended_transfer_message::dest_type</a></div><div class="ttdeci">enum ast_attended_transfer_dest_type dest_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">stasis_bridges.h:335</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_aa51c69aeef790f830bdb24b995f106bf"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#aa51c69aeef790f830bdb24b995f106bf">bridge_channel_snapshot_pair_cleanup</a></div><div class="ttdeci">static void bridge_channel_snapshot_pair_cleanup(struct ast_bridge_channel_snapshot_pair *pair)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00786">stasis_bridges.c:786</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ce563c6d22abd56247298fd572ea439"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ce563c6d22abd56247298fd572ea439">&#9670;&nbsp;</a></span>attended_transfer_to_ami()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> * attended_transfer_to_ami </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01103">1103</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00340">ast_attended_transfer_message::app</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00307">AST_ATTENDED_TRANSFER_DEST_APP</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00305">AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00303">AST_ATTENDED_TRANSFER_DEST_FAIL</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00311">AST_ATTENDED_TRANSFER_DEST_LINK</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00309">AST_ATTENDED_TRANSFER_DEST_LOCAL_APP</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00313">AST_ATTENDED_TRANSFER_DEST_THREEWAY</a>, <a class="el" href="../../d9/db0/astmm_8c_source.html#l01771">ast_free_ptr()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00223">ast_manager_build_bridge_state_string_prefix()</a>, <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l00487">ast_manager_build_channel_state_string_prefix()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09727">ast_manager_event_blob_create()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00338">ast_attended_transfer_message::bridge</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00234">ast_bridge_channel_snapshot_pair::bridge_snapshot</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00235">ast_bridge_channel_snapshot_pair::channel_snapshot</a>, <a class="el" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">ast_attended_transfer_message::dest_type</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00072">EVENT_FLAG_CALL</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00323">ast_attended_transfer_message::is_external</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00342">ast_attended_transfer_message::links</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00321">ast_attended_transfer_message::result</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00792">result_strs</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00333">ast_attended_transfer_message::target</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00344">ast_attended_transfer_message::threeway</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00327">ast_attended_transfer_message::to_transfer_target</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00325">ast_attended_transfer_message::to_transferee</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00331">ast_attended_transfer_message::transferee</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::uniqueid</a>.</p>
<div class="fragment"><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;{</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, variable_data, <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(64), <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, transferer1_state, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>);</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, bridge1_state, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, transferer2_state, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>);</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, bridge2_state, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, local1_state, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, local2_state, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>);</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, transferee_state, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, target_state, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>);</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *transfer_msg = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   <span class="keywordflow">if</span> (!variable_data) {</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;   }</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;   transferer1_state = <a class="code" href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>, <span class="stringliteral">&quot;OrigTransferer&quot;</span>);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;   transferer2_state = <a class="code" href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>, <span class="stringliteral">&quot;SecondTransferer&quot;</span>);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   <span class="keywordflow">if</span> (!transferer1_state || !transferer2_state) {</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;   }</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;   <span class="keywordflow">if</span> (transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>) {</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      transferee_state = <a class="code" href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>, <span class="stringliteral">&quot;Transferee&quot;</span>);</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      <span class="keywordflow">if</span> (!transferee_state) {</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      }</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   }</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   <span class="keywordflow">if</span> (transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">target</a>) {</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      target_state = <a class="code" href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">target</a>, <span class="stringliteral">&quot;TransferTarget&quot;</span>);</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <span class="keywordflow">if</span> (!target_state) {</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      }</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;   }</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;   <span class="keywordflow">if</span> (transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>) {</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      bridge1_state = <a class="code" href="../../db/d45/manager_8h.html#ae848cf7930ca566b76a13a4b3b7e0466">ast_manager_build_bridge_state_string_prefix</a>(</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;         transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>, <span class="stringliteral">&quot;Orig&quot;</span>);</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      <span class="keywordflow">if</span> (!bridge1_state) {</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      }</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   }</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;   <span class="keywordflow">if</span> (transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>) {</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      bridge2_state = <a class="code" href="../../db/d45/manager_8h.html#ae848cf7930ca566b76a13a4b3b7e0466">ast_manager_build_bridge_state_string_prefix</a>(</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;         transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>, <span class="stringliteral">&quot;Second&quot;</span>);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <span class="keywordflow">if</span> (!bridge2_state) {</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      }</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;   }</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;   <span class="keywordflow">switch</span> (transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">dest_type</a>) {</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515">AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE</a>:</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;variable_data, 0, <span class="stringliteral">&quot;DestType: Bridge\r\n&quot;</span>);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;variable_data, 0, <span class="stringliteral">&quot;DestBridgeUniqueid: %s\r\n&quot;</span>, transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad62863a88a87dfc024a1d18c32ab3958">bridge</a>);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4">AST_ATTENDED_TRANSFER_DEST_APP</a>:</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8">AST_ATTENDED_TRANSFER_DEST_LOCAL_APP</a>:</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;variable_data, 0, <span class="stringliteral">&quot;DestType: App\r\n&quot;</span>);</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;variable_data, 0, <span class="stringliteral">&quot;DestApp: %s\r\n&quot;</span>, transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a3fa409a52b6210dbe249b2f37430fd4a">app</a>);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527">AST_ATTENDED_TRANSFER_DEST_LINK</a>:</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      local1_state = <a class="code" href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a7f2aed874f63d44e55ccbe7b4e59f356">links</a>[0], <span class="stringliteral">&quot;LocalOne&quot;</span>);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      local2_state = <a class="code" href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a7f2aed874f63d44e55ccbe7b4e59f356">links</a>[1], <span class="stringliteral">&quot;LocalTwo&quot;</span>);</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <span class="keywordflow">if</span> (!local1_state || !local2_state) {</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;      }</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;variable_data, 0, <span class="stringliteral">&quot;DestType: Link\r\n&quot;</span>);</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;variable_data, 0, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(local1_state));</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;variable_data, 0, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(local2_state));</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf">AST_ATTENDED_TRANSFER_DEST_THREEWAY</a>:</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;variable_data, 0, <span class="stringliteral">&quot;DestType: Threeway\r\n&quot;</span>);</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;variable_data, 0, <span class="stringliteral">&quot;DestBridgeUniqueid: %s\r\n&quot;</span>, transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">threeway</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>);</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;variable_data, 0, <span class="stringliteral">&quot;DestTransfererChannel: %s\r\n&quot;</span>, transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">threeway</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a6d7eec1c6d7b9003b642c7c061444aeb">AST_ATTENDED_TRANSFER_DEST_FAIL</a>:</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;variable_data, 0, <span class="stringliteral">&quot;DestType: Fail\r\n&quot;</span>);</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   }</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a3ace32eaf9a3fc2f7d15121c64bf8ecd">ast_manager_event_blob_create</a>(<a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <span class="stringliteral">&quot;AttendedTransfer&quot;</span>,</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;         <span class="stringliteral">&quot;Result: %s\r\n&quot;</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;         <span class="stringliteral">&quot;IsExternal: %s\r\n&quot;</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span>,</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;         <a class="code" href="../../da/d0f/stasis__bridges_8c.html#ac33fc704453179f9371e0f8123da56d5">result_strs</a>[transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#abd45d96954fe74af9e011742ce09882d">result</a>],</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(transferer1_state),</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;         bridge1_state ? <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(bridge1_state) : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(transferer2_state),</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;         bridge2_state ? <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(bridge2_state) : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;         transferee_state ? <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(transferee_state) : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;         target_state ? <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(target_state) : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;         transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ae3e993332191c334c011319613e6a6b0">is_external</a> ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>,</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(variable_data));</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515">AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00305">stasis_bridges.h:305</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527">AST_ATTENDED_TRANSFER_DEST_LINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00311">stasis_bridges.h:311</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a68eeab7290249706588af2b6cffbdcaa"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a></div><div class="ttdeci">union ast_attended_transfer_message::@324 dest</div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf">AST_ATTENDED_TRANSFER_DEST_THREEWAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00313">stasis_bridges.h:313</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a></div><div class="ttdoc">Message representing attended transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00319">stasis_bridges.h:319</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950a6d7eec1c6d7b9003b642c7c061444aeb"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a6d7eec1c6d7b9003b642c7c061444aeb">AST_ATTENDED_TRANSFER_DEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00303">stasis_bridges.h:303</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4">AST_ATTENDED_TRANSFER_DEST_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00307">stasis_bridges.h:307</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="manager_8h_html_ab71472ea55b4114f460a4459e3dcd18b"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a></div><div class="ttdeci">struct ast_str * ast_manager_build_channel_state_string_prefix(const struct ast_channel_snapshot *snapshot, const char *prefix)</div><div class="ttdoc">Generate the AMI message body from a channel snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1c/manager__channels_8c_source.html#l00487">manager_channels.c:487</a></div></div>
<div class="ttc" id="manager_8h_html_ab5db3cc603d7e798d61cb4cd94fbb4e2"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a></div><div class="ttdeci">#define EVENT_FLAG_CALL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00072">manager.h:72</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_ae3e993332191c334c011319613e6a6b0"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#ae3e993332191c334c011319613e6a6b0">ast_attended_transfer_message::is_external</a></div><div class="ttdeci">int is_external</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00323">stasis_bridges.h:323</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_adb1db9449fd1828a7cc4e1df8f22c3c4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">ast_attended_transfer_message::target</a></div><div class="ttdeci">struct ast_channel_snapshot * target</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00333">stasis_bridges.h:333</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8">AST_ATTENDED_TRANSFER_DEST_LOCAL_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00309">stasis_bridges.h:309</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_ad62863a88a87dfc024a1d18c32ab3958"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#ad62863a88a87dfc024a1d18c32ab3958">ast_attended_transfer_message::bridge</a></div><div class="ttdeci">char bridge[AST_UUID_STR_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00338">stasis_bridges.h:338</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_ad42ab843b767e8b57162c10a158b75c3"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a></div><div class="ttdeci">void ast_free_ptr(void *ptr)</div><div class="ttdoc">free() wrapper </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01771">astmm.c:1771</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_ad4cabb0173fd175d7bac078a1a49bcb4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">ast_attended_transfer_message::to_transferee</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00325">stasis_bridges.h:325</a></div></div>
<div class="ttc" id="manager_8h_html_a3ace32eaf9a3fc2f7d15121c64bf8ecd"><div class="ttname"><a href="../../db/d45/manager_8h.html#a3ace32eaf9a3fc2f7d15121c64bf8ecd">ast_manager_event_blob_create</a></div><div class="ttdeci">struct ast_manager_event_blob * ast_manager_event_blob_create(int event_flags, const char *manager_event, const char *extra_fields_fmt,...)</div><div class="ttdoc">Construct a ast_manager_event_blob. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l09727">manager.c:9727</a></div></div>
<div class="ttc" id="manager_8h_html_ae848cf7930ca566b76a13a4b3b7e0466"><div class="ttname"><a href="../../db/d45/manager_8h.html#ae848cf7930ca566b76a13a4b3b7e0466">ast_manager_build_bridge_state_string_prefix</a></div><div class="ttdeci">struct ast_str * ast_manager_build_bridge_state_string_prefix(const struct ast_bridge_snapshot *snapshot, const char *prefix)</div><div class="ttdoc">Generate the AMI message body from a bridge snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d10/manager__bridges_8c_source.html#l00223">manager_bridges.c:223</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a82a439e20f31112e595909550f5201c4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">ast_attended_transfer_message::to_transfer_target</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transfer_target</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00327">stasis_bridges.h:327</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_abd45d96954fe74af9e011742ce09882d"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#abd45d96954fe74af9e011742ce09882d">ast_attended_transfer_message::result</a></div><div class="ttdeci">enum ast_transfer_result result</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00321">stasis_bridges.h:321</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a3fa409a52b6210dbe249b2f37430fd4a"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a3fa409a52b6210dbe249b2f37430fd4a">ast_attended_transfer_message::app</a></div><div class="ttdeci">char app[AST_MAX_APP]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00340">stasis_bridges.h:340</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a7f2aed874f63d44e55ccbe7b4e59f356"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a7f2aed874f63d44e55ccbe7b4e59f356">ast_attended_transfer_message::links</a></div><div class="ttdeci">struct ast_channel_snapshot * links[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00342">stasis_bridges.h:342</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a9b1d5bd6bf7fd25f9a35a6e3717f9959"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">ast_attended_transfer_message::transferee</a></div><div class="ttdeci">struct ast_channel_snapshot * transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00331">stasis_bridges.h:331</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a4623d089424156732a5f5591381d8b31"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">ast_attended_transfer_message::dest_type</a></div><div class="ttdeci">enum ast_attended_transfer_dest_type dest_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">stasis_bridges.h:335</a></div></div>
<div class="ttc" id="structast__bridge__channel__snapshot__pair_html_adc69b45f11dbab86e83609b31b952033"><div class="ttname"><a href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">ast_bridge_channel_snapshot_pair::channel_snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * channel_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00235">stasis_bridges.h:235</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_aabc3ff47104c976454227f116ac48325"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">ast_attended_transfer_message::threeway</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair threeway</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00344">stasis_bridges.h:344</a></div></div>
<div class="ttc" id="structast__bridge__channel__snapshot__pair_html_a548fa9691ccede16b32f244dd9637db4"><div class="ttname"><a href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">ast_bridge_channel_snapshot_pair::bridge_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00234">stasis_bridges.h:234</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">ast_bridge_snapshot::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_ac33fc704453179f9371e0f8123da56d5"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#ac33fc704453179f9371e0f8123da56d5">result_strs</a></div><div class="ttdeci">static const char * result_strs[]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00792">stasis_bridges.c:792</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3f0b80ae9d4c3b52f9b71b06ba3bb3ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f0b80ae9d4c3b52f9b71b06ba3bb3ba">&#9670;&nbsp;</a></span>attended_transfer_to_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> * attended_transfer_to_json </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *&#160;</td>
          <td class="paramname"><em>sanitize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00967">967</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00340">ast_attended_transfer_message::app</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00307">AST_ATTENDED_TRANSFER_DEST_APP</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00305">AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00303">AST_ATTENDED_TRANSFER_DEST_FAIL</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00311">AST_ATTENDED_TRANSFER_DEST_LINK</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00309">AST_ATTENDED_TRANSFER_DEST_LOCAL_APP</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00313">AST_ATTENDED_TRANSFER_DEST_THREEWAY</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00712">ast_bridge_snapshot_to_json()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01255">ast_channel_snapshot_to_json()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00243">ast_json_boolean()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00404">ast_json_object_set()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00067">ast_json_ref()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00268">ast_json_string_create()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00649">ast_json_timeval()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00338">ast_attended_transfer_message::bridge</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00234">ast_bridge_channel_snapshot_pair::bridge_snapshot</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00235">ast_bridge_channel_snapshot_pair::channel_snapshot</a>, <a class="el" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">ast_attended_transfer_message::dest_type</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00323">ast_attended_transfer_message::is_external</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00342">ast_attended_transfer_message::links</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">out</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00329">ast_attended_transfer_message::replace_channel</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00321">ast_attended_transfer_message::result</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00792">result_strs</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message_timestamp()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00333">ast_attended_transfer_message::target</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00344">ast_attended_transfer_message::threeway</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00327">ast_attended_transfer_message::to_transfer_target</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00325">ast_attended_transfer_message::to_transferee</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00331">ast_attended_transfer_message::transferee</a>.</p>
<div class="fragment"><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;{</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *transfer_msg = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, <a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_transferer1, *json_transferer2, *json_bridge, *json_channel;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_transferee = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *json_target = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span>timeval *tv = <a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(msg);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;   json_transferer1 = <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>, sanitize);</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;   <span class="keywordflow">if</span> (!json_transferer1) {</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;   }</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   json_transferer2 = <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>, sanitize);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   <span class="keywordflow">if</span> (!json_transferer2) {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_transferer1);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;   }</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   <span class="keywordflow">if</span> (transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>) {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      json_transferee = <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>, sanitize);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <span class="keywordflow">if</span> (!json_transferee) {</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_transferer2);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_transferer1);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   }</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;   <span class="keywordflow">if</span> (transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">target</a>) {</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      json_target = <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">target</a>, sanitize);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      <span class="keywordflow">if</span> (!json_target) {</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_transferee);</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_transferer2);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_transferer1);</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      }</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;   }</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;   <a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: o, s: o, s: o, s: s, s: o}&quot;</span>,</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      <span class="stringliteral">&quot;type&quot;</span>, <span class="stringliteral">&quot;BridgeAttendedTransfer&quot;</span>,</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="stringliteral">&quot;timestamp&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a>(*tv, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      <span class="stringliteral">&quot;transferer_first_leg&quot;</span>, json_transferer1,</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <span class="stringliteral">&quot;transferer_second_leg&quot;</span>, json_transferer2,</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <span class="stringliteral">&quot;result&quot;</span>, <a class="code" href="../../da/d0f/stasis__bridges_8c.html#ac33fc704453179f9371e0f8123da56d5">result_strs</a>[transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#abd45d96954fe74af9e011742ce09882d">result</a>],</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      <span class="stringliteral">&quot;is_external&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a701391a32f6f90b4c6056d2ffc1f4678">ast_json_boolean</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ae3e993332191c334c011319613e6a6b0">is_external</a>));</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>) {</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_target);</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_transferee);</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   }</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   <span class="keywordflow">if</span> (json_transferee &amp;&amp; <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;transferee&quot;</span>, json_transferee)) {</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_target);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   }</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   <span class="keywordflow">if</span> (json_target &amp;&amp; <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;transfer_target&quot;</span>, json_target)) {</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   }</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;   <span class="keywordflow">if</span> (transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>) {</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      json_bridge = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>, sanitize);</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      <span class="keywordflow">if</span> (!json_bridge) {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      }</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      res |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;transferer_first_leg_bridge&quot;</span>, json_bridge);</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;   }</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   <span class="keywordflow">if</span> (transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>) {</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      json_bridge = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>, sanitize);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <span class="keywordflow">if</span> (!json_bridge) {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      }</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      res |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;transferer_second_leg_bridge&quot;</span>, json_bridge);</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;   }</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;   <span class="keywordflow">switch</span> (transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">dest_type</a>) {</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515">AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE</a>:</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      res |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;destination_type&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(<span class="stringliteral">&quot;bridge&quot;</span>));</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      res |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;destination_bridge&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad62863a88a87dfc024a1d18c32ab3958">bridge</a>));</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8">AST_ATTENDED_TRANSFER_DEST_LOCAL_APP</a>:</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      res |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;replace_channel&quot;</span>, <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a69d67589993bc38c485c20b84ce40034">replace_channel</a>, sanitize));</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="comment">/* fallthrough */</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4">AST_ATTENDED_TRANSFER_DEST_APP</a>:</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      res |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;destination_type&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(<span class="stringliteral">&quot;application&quot;</span>));</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      res |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;destination_application&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a3fa409a52b6210dbe249b2f37430fd4a">app</a>));</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527">AST_ATTENDED_TRANSFER_DEST_LINK</a>:</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      res |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;destination_type&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(<span class="stringliteral">&quot;link&quot;</span>));</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      json_channel = <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a7f2aed874f63d44e55ccbe7b4e59f356">links</a>[0], sanitize);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      <span class="keywordflow">if</span> (!json_channel) {</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      }</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      res |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;destination_link_first_leg&quot;</span>, json_channel);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      json_channel = <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a7f2aed874f63d44e55ccbe7b4e59f356">links</a>[1], sanitize);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      <span class="keywordflow">if</span> (!json_channel) {</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      }</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      res |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;destination_link_second_leg&quot;</span>, json_channel);</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf">AST_ATTENDED_TRANSFER_DEST_THREEWAY</a>:</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      res |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;destination_type&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(<span class="stringliteral">&quot;threeway&quot;</span>));</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      json_channel = <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">threeway</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>, sanitize);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <span class="keywordflow">if</span> (!json_channel) {</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      }</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      res |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;destination_threeway_channel&quot;</span>, json_channel);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      json_bridge = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">threeway</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>, sanitize);</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <span class="keywordflow">if</span> (!json_bridge) {</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      }</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      res |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;destination_threeway_bridge&quot;</span>, json_bridge);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a6d7eec1c6d7b9003b642c7c061444aeb">AST_ATTENDED_TRANSFER_DEST_FAIL</a>:</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      res |= <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;destination_type&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(<span class="stringliteral">&quot;fail&quot;</span>));</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;   }</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;   }</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515">AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00305">stasis_bridges.h:305</a></div></div>
<div class="ttc" id="json_8h_html_a0ca956b7df20127f7e38993c3c06cb2c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a></div><div class="ttdeci">struct ast_json * ast_json_ref(struct ast_json *value)</div><div class="ttdoc">Increase refcount on value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00067">json.c:67</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527">AST_ATTENDED_TRANSFER_DEST_LINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00311">stasis_bridges.h:311</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a68eeab7290249706588af2b6cffbdcaa"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a></div><div class="ttdeci">union ast_attended_transfer_message::@324 dest</div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf">AST_ATTENDED_TRANSFER_DEST_THREEWAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00313">stasis_bridges.h:313</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a></div><div class="ttdoc">Message representing attended transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00319">stasis_bridges.h:319</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950a6d7eec1c6d7b9003b642c7c061444aeb"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a6d7eec1c6d7b9003b642c7c061444aeb">AST_ATTENDED_TRANSFER_DEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00303">stasis_bridges.h:303</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4">AST_ATTENDED_TRANSFER_DEST_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00307">stasis_bridges.h:307</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_ae3e993332191c334c011319613e6a6b0"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#ae3e993332191c334c011319613e6a6b0">ast_attended_transfer_message::is_external</a></div><div class="ttdeci">int is_external</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00323">stasis_bridges.h:323</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_adb1db9449fd1828a7cc4e1df8f22c3c4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">ast_attended_transfer_message::target</a></div><div class="ttdeci">struct ast_channel_snapshot * target</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00333">stasis_bridges.h:333</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8">AST_ATTENDED_TRANSFER_DEST_LOCAL_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00309">stasis_bridges.h:309</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_ad62863a88a87dfc024a1d18c32ab3958"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#ad62863a88a87dfc024a1d18c32ab3958">ast_attended_transfer_message::bridge</a></div><div class="ttdeci">char bridge[AST_UUID_STR_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00338">stasis_bridges.h:338</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_ad4cabb0173fd175d7bac078a1a49bcb4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">ast_attended_transfer_message::to_transferee</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00325">stasis_bridges.h:325</a></div></div>
<div class="ttc" id="json_8h_html_abc8b563c172cfaffa2b555195990f729"><div class="ttname"><a href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a></div><div class="ttdeci">int ast_json_object_set(struct ast_json *object, const char *key, struct ast_json *value)</div><div class="ttdoc">Set a field in a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00404">json.c:404</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a82a439e20f31112e595909550f5201c4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">ast_attended_transfer_message::to_transfer_target</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transfer_target</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00327">stasis_bridges.h:327</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_abd45d96954fe74af9e011742ce09882d"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#abd45d96954fe74af9e011742ce09882d">ast_attended_transfer_message::result</a></div><div class="ttdeci">enum ast_transfer_result result</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00321">stasis_bridges.h:321</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a3fa409a52b6210dbe249b2f37430fd4a"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a3fa409a52b6210dbe249b2f37430fd4a">ast_attended_transfer_message::app</a></div><div class="ttdeci">char app[AST_MAX_APP]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00340">stasis_bridges.h:340</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a7f2aed874f63d44e55ccbe7b4e59f356"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a7f2aed874f63d44e55ccbe7b4e59f356">ast_attended_transfer_message::links</a></div><div class="ttdeci">struct ast_channel_snapshot * links[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00342">stasis_bridges.h:342</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="json_8h_html_adc52f8d76b7fdd0c8d12987981fd5bf5"><div class="ttname"><a href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a></div><div class="ttdeci">struct ast_json * ast_json_string_create(const char *value)</div><div class="ttdoc">Construct a JSON string from value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00268">json.c:268</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a9b1d5bd6bf7fd25f9a35a6e3717f9959"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">ast_attended_transfer_message::transferee</a></div><div class="ttdeci">struct ast_channel_snapshot * transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00331">stasis_bridges.h:331</a></div></div>
<div class="ttc" id="stasis_8h_html_a0a9c10eadd9db34f8c0b19619752ea93"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a></div><div class="ttdeci">const struct timeval * stasis_message_timestamp(const struct stasis_message *msg)</div><div class="ttdoc">Get the time when a message was created. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message.c:203</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a69d67589993bc38c485c20b84ce40034"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a69d67589993bc38c485c20b84ce40034">ast_attended_transfer_message::replace_channel</a></div><div class="ttdeci">struct ast_channel_snapshot * replace_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00329">stasis_bridges.h:329</a></div></div>
<div class="ttc" id="json_8h_html_a2b7c72e2e3ab2634d8a4f8b708440d95"><div class="ttname"><a href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a></div><div class="ttdeci">struct ast_json * ast_json_timeval(const struct timeval tv, const char *zone)</div><div class="ttdoc">Construct a timeval as JSON. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00649">json.c:649</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a4623d089424156732a5f5591381d8b31"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">ast_attended_transfer_message::dest_type</a></div><div class="ttdeci">enum ast_attended_transfer_dest_type dest_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">stasis_bridges.h:335</a></div></div>
<div class="ttc" id="structast__bridge__channel__snapshot__pair_html_adc69b45f11dbab86e83609b31b952033"><div class="ttname"><a href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">ast_bridge_channel_snapshot_pair::channel_snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * channel_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00235">stasis_bridges.h:235</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_aabc3ff47104c976454227f116ac48325"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">ast_attended_transfer_message::threeway</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair threeway</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00344">stasis_bridges.h:344</a></div></div>
<div class="ttc" id="structast__bridge__channel__snapshot__pair_html_a548fa9691ccede16b32f244dd9637db4"><div class="ttname"><a href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">ast_bridge_channel_snapshot_pair::bridge_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00234">stasis_bridges.h:234</a></div></div>
<div class="ttc" id="stasis__channels_8h_html_a7571e6d10d716525aaa64b1f6583979b"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_channel_snapshot_to_json(const struct ast_channel_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_channel_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01255">stasis_channels.c:1255</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_ac33fc704453179f9371e0f8123da56d5"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#ac33fc704453179f9371e0f8123da56d5">result_strs</a></div><div class="ttdeci">static const char * result_strs[]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00792">stasis_bridges.c:792</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="stasis__bridges_8c_html_a76837dd4c259276cc59d163e4bc2a3b5"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_bridge_snapshot_to_json(const struct ast_bridge_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_bridge_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00712">stasis_bridges.c:712</a></div></div>
<div class="ttc" id="json_8h_html_a701391a32f6f90b4c6056d2ffc1f4678"><div class="ttname"><a href="../../d4/d05/json_8h.html#a701391a32f6f90b4c6056d2ffc1f4678">ast_json_boolean</a></div><div class="ttdeci">struct ast_json * ast_json_boolean(int value)</div><div class="ttdoc">Get the JSON boolean corresponding to value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00243">json.c:243</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a470ce81eefae3e443721eccbc57f6dc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a470ce81eefae3e443721eccbc57f6dc1">&#9670;&nbsp;</a></span>blind_transfer_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void blind_transfer_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00919">919</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00257">ast_blind_transfer_message::bridge</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00265">ast_blind_transfer_message::replace_channel</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00263">ast_blind_transfer_message::transferee</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00255">ast_blind_transfer_message::transferer</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00929">ast_blind_transfer_message_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;{</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a> *msg = obj;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a97d7526f26c0a3ca13db9d459c5e1ca2">transferer</a>);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a>);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>);</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a69d67589993bc38c485c20b84ce40034">replace_channel</a>);</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;}</div><div class="ttc" id="structast__blind__transfer__message_html"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a></div><div class="ttdoc">Message published during a blind transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00249">stasis_bridges.h:249</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a820b583b07f0cf97618ca22d73cd8f09"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a820b583b07f0cf97618ca22d73cd8f09">ast_blind_transfer_message::bridge</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00257">stasis_bridges.h:257</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a97d7526f26c0a3ca13db9d459c5e1ca2"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a97d7526f26c0a3ca13db9d459c5e1ca2">ast_blind_transfer_message::transferer</a></div><div class="ttdeci">struct ast_channel_snapshot * transferer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00255">stasis_bridges.h:255</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a9b1d5bd6bf7fd25f9a35a6e3717f9959"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">ast_blind_transfer_message::transferee</a></div><div class="ttdeci">struct ast_channel_snapshot * transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00263">stasis_bridges.h:263</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a69d67589993bc38c485c20b84ce40034"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a69d67589993bc38c485c20b84ce40034">ast_blind_transfer_message::replace_channel</a></div><div class="ttdeci">struct ast_channel_snapshot * replace_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00265">stasis_bridges.h:265</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a63d1a9e2048e948eccb8d1834ab8d2f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63d1a9e2048e948eccb8d1834ab8d2f2">&#9670;&nbsp;</a></span>blind_transfer_to_ami()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> * blind_transfer_to_ami </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00870">870</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/db0/astmm_8c_source.html#l01771">ast_free_ptr()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00267">ast_manager_build_bridge_state_string()</a>, <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l00487">ast_manager_build_channel_state_string_prefix()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09727">ast_manager_event_blob_create()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00257">ast_blind_transfer_message::bridge</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00259">ast_blind_transfer_message::context</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00072">EVENT_FLAG_CALL</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00261">ast_blind_transfer_message::exten</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00253">ast_blind_transfer_message::is_external</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00251">ast_blind_transfer_message::result</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00792">result_strs</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00263">ast_blind_transfer_message::transferee</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00255">ast_blind_transfer_message::transferer</a>.</p>
<div class="fragment"><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;{</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, transferer_state, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, bridge_state, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, transferee_state, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a> *transfer_msg = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   <span class="keywordflow">if</span> (!transfer_msg) {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   }</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   transferer_state = <a class="code" href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a>(</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;         transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a97d7526f26c0a3ca13db9d459c5e1ca2">transferer</a>, <span class="stringliteral">&quot;Transferer&quot;</span>);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   <span class="keywordflow">if</span> (!transferer_state) {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;   }</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;   <span class="keywordflow">if</span> (transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a>) {</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      bridge_state = <a class="code" href="../../db/d45/manager_8h.html#a873f600042cce2f957f7be2257b4f366">ast_manager_build_bridge_state_string</a>(transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a>);</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      <span class="keywordflow">if</span> (!bridge_state) {</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      }</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;   }</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   <span class="keywordflow">if</span> (transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>) {</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      transferee_state = <a class="code" href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a>(</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>, <span class="stringliteral">&quot;Transferee&quot;</span>);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordflow">if</span> (!transferee_state) {</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      }</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   }</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a3ace32eaf9a3fc2f7d15121c64bf8ecd">ast_manager_event_blob_create</a>(<a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <span class="stringliteral">&quot;BlindTransfer&quot;</span>,</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;         <span class="stringliteral">&quot;Result: %s\r\n&quot;</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;         <span class="stringliteral">&quot;IsExternal: %s\r\n&quot;</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;         <span class="stringliteral">&quot;Context: %s\r\n&quot;</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;         <span class="stringliteral">&quot;Extension: %s\r\n&quot;</span>,</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;         <a class="code" href="../../da/d0f/stasis__bridges_8c.html#ac33fc704453179f9371e0f8123da56d5">result_strs</a>[transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#abd45d96954fe74af9e011742ce09882d">result</a>],</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(transferer_state),</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;         transferee_state ? <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(transferee_state) : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;         bridge_state ? <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(bridge_state) : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;         transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#ae3e993332191c334c011319613e6a6b0">is_external</a> ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>,</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;         transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>,</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;         transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a78d4847658b695383d849efd12399b38">exten</a>);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;}</div><div class="ttc" id="structast__blind__transfer__message_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a78d4847658b695383d849efd12399b38">ast_blind_transfer_message::exten</a></div><div class="ttdeci">char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00261">stasis_bridges.h:261</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a></div><div class="ttdoc">Message published during a blind transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00249">stasis_bridges.h:249</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="manager_8h_html_ab71472ea55b4114f460a4459e3dcd18b"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a></div><div class="ttdeci">struct ast_str * ast_manager_build_channel_state_string_prefix(const struct ast_channel_snapshot *snapshot, const char *prefix)</div><div class="ttdoc">Generate the AMI message body from a channel snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1c/manager__channels_8c_source.html#l00487">manager_channels.c:487</a></div></div>
<div class="ttc" id="manager_8h_html_ab5db3cc603d7e798d61cb4cd94fbb4e2"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a></div><div class="ttdeci">#define EVENT_FLAG_CALL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00072">manager.h:72</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_ad42ab843b767e8b57162c10a158b75c3"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a></div><div class="ttdeci">void ast_free_ptr(void *ptr)</div><div class="ttdoc">free() wrapper </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01771">astmm.c:1771</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_ae3e993332191c334c011319613e6a6b0"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#ae3e993332191c334c011319613e6a6b0">ast_blind_transfer_message::is_external</a></div><div class="ttdeci">int is_external</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00253">stasis_bridges.h:253</a></div></div>
<div class="ttc" id="manager_8h_html_a3ace32eaf9a3fc2f7d15121c64bf8ecd"><div class="ttname"><a href="../../db/d45/manager_8h.html#a3ace32eaf9a3fc2f7d15121c64bf8ecd">ast_manager_event_blob_create</a></div><div class="ttdeci">struct ast_manager_event_blob * ast_manager_event_blob_create(int event_flags, const char *manager_event, const char *extra_fields_fmt,...)</div><div class="ttdoc">Construct a ast_manager_event_blob. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l09727">manager.c:9727</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a820b583b07f0cf97618ca22d73cd8f09"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a820b583b07f0cf97618ca22d73cd8f09">ast_blind_transfer_message::bridge</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00257">stasis_bridges.h:257</a></div></div>
<div class="ttc" id="manager_8h_html_a873f600042cce2f957f7be2257b4f366"><div class="ttname"><a href="../../db/d45/manager_8h.html#a873f600042cce2f957f7be2257b4f366">ast_manager_build_bridge_state_string</a></div><div class="ttdeci">struct ast_str * ast_manager_build_bridge_state_string(const struct ast_bridge_snapshot *snapshot)</div><div class="ttdoc">Generate the AMI message body from a bridge snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d10/manager__bridges_8c_source.html#l00267">manager_bridges.c:267</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a97d7526f26c0a3ca13db9d459c5e1ca2"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a97d7526f26c0a3ca13db9d459c5e1ca2">ast_blind_transfer_message::transferer</a></div><div class="ttdeci">struct ast_channel_snapshot * transferer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00255">stasis_bridges.h:255</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#ac25ea00ee3f082df06e0cf468cbde240">ast_blind_transfer_message::context</a></div><div class="ttdeci">char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00259">stasis_bridges.h:259</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_ac33fc704453179f9371e0f8123da56d5"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#ac33fc704453179f9371e0f8123da56d5">result_strs</a></div><div class="ttdeci">static const char * result_strs[]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00792">stasis_bridges.c:792</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a9b1d5bd6bf7fd25f9a35a6e3717f9959"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">ast_blind_transfer_message::transferee</a></div><div class="ttdeci">struct ast_channel_snapshot * transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00263">stasis_bridges.h:263</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_abd45d96954fe74af9e011742ce09882d"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#abd45d96954fe74af9e011742ce09882d">ast_blind_transfer_message::result</a></div><div class="ttdeci">enum ast_transfer_result result</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00251">stasis_bridges.h:251</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5e61b6d0dffe2315a869ff166f248599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e61b6d0dffe2315a869ff166f248599">&#9670;&nbsp;</a></span>blind_transfer_to_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> * blind_transfer_to_json </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *&#160;</td>
          <td class="paramname"><em>sanitize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00799">799</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00712">ast_bridge_snapshot_to_json()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01255">ast_channel_snapshot_to_json()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00243">ast_json_boolean()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00404">ast_json_object_set()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00649">ast_json_timeval()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00257">ast_blind_transfer_message::bridge</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00259">ast_blind_transfer_message::context</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00261">ast_blind_transfer_message::exten</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00253">ast_blind_transfer_message::is_external</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">out</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00265">ast_blind_transfer_message::replace_channel</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00251">ast_blind_transfer_message::result</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00792">result_strs</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message_timestamp()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00263">ast_blind_transfer_message::transferee</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00255">ast_blind_transfer_message::transferer</a>.</p>
<div class="fragment"><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;{</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a> *transfer_msg = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_transferer;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_transferee = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_replace = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span>timeval *tv = <a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(msg);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;   json_transferer = <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a97d7526f26c0a3ca13db9d459c5e1ca2">transferer</a>, sanitize);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   <span class="keywordflow">if</span> (!json_transferer) {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   }</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <span class="keywordflow">if</span> (transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>) {</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      json_transferee = <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>, sanitize);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      <span class="keywordflow">if</span> (!json_transferee) {</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_transferer);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      }</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   <span class="keywordflow">if</span> (transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a69d67589993bc38c485c20b84ce40034">replace_channel</a>) {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      json_replace = <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a69d67589993bc38c485c20b84ce40034">replace_channel</a>, sanitize);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="keywordflow">if</span> (!json_replace) {</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_transferee);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_transferer);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      }</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   }</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;   out = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: o, s: o, s: s, s: s, s: s, s: o}&quot;</span>,</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <span class="stringliteral">&quot;type&quot;</span>, <span class="stringliteral">&quot;BridgeBlindTransfer&quot;</span>,</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <span class="stringliteral">&quot;timestamp&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a>(*tv, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <span class="stringliteral">&quot;channel&quot;</span>, json_transferer,</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="stringliteral">&quot;exten&quot;</span>, transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a78d4847658b695383d849efd12399b38">exten</a>,</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="stringliteral">&quot;context&quot;</span>, transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>,</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="stringliteral">&quot;result&quot;</span>, <a class="code" href="../../da/d0f/stasis__bridges_8c.html#ac33fc704453179f9371e0f8123da56d5">result_strs</a>[transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#abd45d96954fe74af9e011742ce09882d">result</a>],</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="stringliteral">&quot;is_external&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a701391a32f6f90b4c6056d2ffc1f4678">ast_json_boolean</a>(transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#ae3e993332191c334c011319613e6a6b0">is_external</a>));</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <span class="keywordflow">if</span> (!out) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_transferee);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_replace);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   }</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   <span class="keywordflow">if</span> (json_transferee &amp;&amp; <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(out, <span class="stringliteral">&quot;transferee&quot;</span>, json_transferee)) {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(out);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_replace);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;   }</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;   <span class="keywordflow">if</span> (json_replace &amp;&amp; <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(out, <span class="stringliteral">&quot;replace_channel&quot;</span>, json_replace)) {</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(out);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   }</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   <span class="keywordflow">if</span> (transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a>) {</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_bridge = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a>(</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            transfer_msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a>, sanitize);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="keywordflow">if</span> (!json_bridge || <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(out, <span class="stringliteral">&quot;bridge&quot;</span>, json_bridge)) {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(out);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   }</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;}</div><div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a78d4847658b695383d849efd12399b38">ast_blind_transfer_message::exten</a></div><div class="ttdeci">char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00261">stasis_bridges.h:261</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a></div><div class="ttdoc">Message published during a blind transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00249">stasis_bridges.h:249</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_ae3e993332191c334c011319613e6a6b0"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#ae3e993332191c334c011319613e6a6b0">ast_blind_transfer_message::is_external</a></div><div class="ttdeci">int is_external</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00253">stasis_bridges.h:253</a></div></div>
<div class="ttc" id="json_8h_html_abc8b563c172cfaffa2b555195990f729"><div class="ttname"><a href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a></div><div class="ttdeci">int ast_json_object_set(struct ast_json *object, const char *key, struct ast_json *value)</div><div class="ttdoc">Set a field in a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00404">json.c:404</a></div></div>
<div class="ttc" id="stasis_8h_html_a0a9c10eadd9db34f8c0b19619752ea93"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a></div><div class="ttdeci">const struct timeval * stasis_message_timestamp(const struct stasis_message *msg)</div><div class="ttdoc">Get the time when a message was created. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message.c:203</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a820b583b07f0cf97618ca22d73cd8f09"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a820b583b07f0cf97618ca22d73cd8f09">ast_blind_transfer_message::bridge</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00257">stasis_bridges.h:257</a></div></div>
<div class="ttc" id="json_8h_html_a2b7c72e2e3ab2634d8a4f8b708440d95"><div class="ttname"><a href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a></div><div class="ttdeci">struct ast_json * ast_json_timeval(const struct timeval tv, const char *zone)</div><div class="ttdoc">Construct a timeval as JSON. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00649">json.c:649</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a97d7526f26c0a3ca13db9d459c5e1ca2"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a97d7526f26c0a3ca13db9d459c5e1ca2">ast_blind_transfer_message::transferer</a></div><div class="ttdeci">struct ast_channel_snapshot * transferer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00255">stasis_bridges.h:255</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#ac25ea00ee3f082df06e0cf468cbde240">ast_blind_transfer_message::context</a></div><div class="ttdeci">char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00259">stasis_bridges.h:259</a></div></div>
<div class="ttc" id="stasis__channels_8h_html_a7571e6d10d716525aaa64b1f6583979b"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_channel_snapshot_to_json(const struct ast_channel_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_channel_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01255">stasis_channels.c:1255</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_ac33fc704453179f9371e0f8123da56d5"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#ac33fc704453179f9371e0f8123da56d5">result_strs</a></div><div class="ttdeci">static const char * result_strs[]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00792">stasis_bridges.c:792</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="stasis__bridges_8c_html_a76837dd4c259276cc59d163e4bc2a3b5"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_bridge_snapshot_to_json(const struct ast_bridge_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_bridge_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00712">stasis_bridges.c:712</a></div></div>
<div class="ttc" id="json_8h_html_a701391a32f6f90b4c6056d2ffc1f4678"><div class="ttname"><a href="../../d4/d05/json_8h.html#a701391a32f6f90b4c6056d2ffc1f4678">ast_json_boolean</a></div><div class="ttdeci">struct ast_json * ast_json_boolean(int value)</div><div class="ttdoc">Get the JSON boolean corresponding to value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00243">json.c:243</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a9b1d5bd6bf7fd25f9a35a6e3717f9959"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">ast_blind_transfer_message::transferee</a></div><div class="ttdeci">struct ast_channel_snapshot * transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00263">stasis_bridges.h:263</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_abd45d96954fe74af9e011742ce09882d"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#abd45d96954fe74af9e011742ce09882d">ast_blind_transfer_message::result</a></div><div class="ttdeci">enum ast_transfer_result result</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00251">stasis_bridges.h:251</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a69d67589993bc38c485c20b84ce40034"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a69d67589993bc38c485c20b84ce40034">ast_blind_transfer_message::replace_channel</a></div><div class="ttdeci">struct ast_channel_snapshot * replace_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00265">stasis_bridges.h:265</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a94a38866c29d0fba7fd32e4a1a090a20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94a38866c29d0fba7fd32e4a1a090a20">&#9670;&nbsp;</a></span>bridge_blob_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_blob_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00489">489</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00500">ast_bridge_blob_create()</a>, and <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00546">ast_bridge_blob_create_from_snapshots()</a>.</p>
<div class="fragment"><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;{</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> *<span class="keyword">event</span> = obj;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>-&gt;bridge);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <span class="keyword">event</span>-&gt;bridge = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>-&gt;channel);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <span class="keyword">event</span>-&gt;channel = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>-&gt;blob);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <span class="keyword">event</span>-&gt;blob = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;}</div><div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__blob_html"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a></div><div class="ttdoc">Blob of data associated with a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00123">stasis_bridges.h:123</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa51c69aeef790f830bdb24b995f106bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa51c69aeef790f830bdb24b995f106bf">&#9670;&nbsp;</a></span>bridge_channel_snapshot_pair_cleanup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_snapshot_pair_cleanup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/db4/structast__bridge__channel__snapshot__pair.html">ast_bridge_channel_snapshot_pair</a> *&#160;</td>
          <td class="paramname"><em>pair</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00786">786</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00234">ast_bridge_channel_snapshot_pair::bridge_snapshot</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00235">ast_bridge_channel_snapshot_pair::channel_snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01206">attended_transfer_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;{</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(pair-&gt;<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(pair-&gt;<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;}</div><div class="ttc" id="structast__bridge__channel__snapshot__pair_html_adc69b45f11dbab86e83609b31b952033"><div class="ttname"><a href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">ast_bridge_channel_snapshot_pair::channel_snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * channel_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00235">stasis_bridges.h:235</a></div></div>
<div class="ttc" id="structast__bridge__channel__snapshot__pair_html_a548fa9691ccede16b32f244dd9637db4"><div class="ttname"><a href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">ast_bridge_channel_snapshot_pair::bridge_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00234">stasis_bridges.h:234</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3cb0d6342689b287a6d37b80adcdbdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3cb0d6342689b287a6d37b80adcdbdf">&#9670;&nbsp;</a></span>bridge_channel_snapshot_pair_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_channel_snapshot_pair_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/db4/structast__bridge__channel__snapshot__pair.html">ast_bridge_channel_snapshot_pair</a> *&#160;</td>
          <td class="paramname"><em>snapshot_pair</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00760">760</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d56/bridge_8h_source.html#l00480">ast_bridge_lock</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00202">ast_bridge_snapshot_create()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00234">ast_bridge_channel_snapshot_pair::bridge_snapshot</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00235">ast_bridge_channel_snapshot_pair::channel_snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01226">ast_attended_transfer_message_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;{</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <span class="keywordflow">if</span> (bridge) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(bridge);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      snapshot_pair-&gt;<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a> = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a>(bridge);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="keywordflow">if</span> (!snapshot_pair-&gt;<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>) {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   snapshot_pair-&gt;<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(channel));</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   <span class="keywordflow">if</span> (!snapshot_pair-&gt;<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>) {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   }</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;}</div><div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__bridge__channel__snapshot__pair_html_adc69b45f11dbab86e83609b31b952033"><div class="ttname"><a href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">ast_bridge_channel_snapshot_pair::channel_snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * channel_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00235">stasis_bridges.h:235</a></div></div>
<div class="ttc" id="structast__bridge__channel__snapshot__pair_html_a548fa9691ccede16b32f244dd9637db4"><div class="ttname"><a href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">ast_bridge_channel_snapshot_pair::bridge_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00234">stasis_bridges.h:234</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a95241898553c1d42ea46964b277433ad"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a></div><div class="ttdeci">struct ast_bridge_snapshot * ast_bridge_snapshot_create(struct ast_bridge *bridge)</div><div class="ttdoc">Generate a snapshot of the bridge state. This is an ao2 object, so ao2_cleanup() to deallocate...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00202">stasis_bridges.c:202</a></div></div>
<div class="ttc" id="bridge_8h_html_ab8ee807d2c3a21d19e16fedf35c90de8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a></div><div class="ttdeci">#define ast_bridge_lock(bridge)</div><div class="ttdoc">Lock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00480">bridge.h:480</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abd161ae34220b966e5d2b35d9c2f9b72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd161ae34220b966e5d2b35d9c2f9b72">&#9670;&nbsp;</a></span>bridge_merge_message_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a>* bridge_merge_message_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>from</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Bridge merge message creation helper. </p>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00418">418</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00202">ast_bridge_snapshot_create()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00407">bridge_merge_message_dtor()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00093">ast_bridge_merge_message::from</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00094">ast_bridge_merge_message::to</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00460">ast_bridge_publish_merge()</a>.</p>
<div class="fragment"><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;{</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a> *msg;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   msg = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*msg), <a class="code" href="../../da/d0f/stasis__bridges_8c.html#ab8a5edc4099d4ea126a345997b2834e9">bridge_merge_message_dtor</a>);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   msg-&gt;<a class="code" href="../../d5/d49/structast__bridge__merge__message.html#a7895e4b9097873d85bd687c7ee592440">to</a> = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a>(to);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   msg-&gt;<a class="code" href="../../d5/d49/structast__bridge__merge__message.html#a75f281a7bfa00f9ae5993fafe6fdb80d">from</a> = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a>(from);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="keywordflow">if</span> (!msg-&gt;<a class="code" href="../../d5/d49/structast__bridge__merge__message.html#a7895e4b9097873d85bd687c7ee592440">to</a> || !msg-&gt;<a class="code" href="../../d5/d49/structast__bridge__merge__message.html#a75f281a7bfa00f9ae5993fafe6fdb80d">from</a>) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   <span class="keywordflow">return</span> msg;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_ab8a5edc4099d4ea126a345997b2834e9"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#ab8a5edc4099d4ea126a345997b2834e9">bridge_merge_message_dtor</a></div><div class="ttdeci">static void bridge_merge_message_dtor(void *obj)</div><div class="ttdoc">Destructor for bridge merge messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00407">stasis_bridges.c:407</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a95241898553c1d42ea46964b277433ad"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a></div><div class="ttdeci">struct ast_bridge_snapshot * ast_bridge_snapshot_create(struct ast_bridge *bridge)</div><div class="ttdoc">Generate a snapshot of the bridge state. This is an ao2 object, so ao2_cleanup() to deallocate...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00202">stasis_bridges.c:202</a></div></div>
<div class="ttc" id="structast__bridge__merge__message_html_a75f281a7bfa00f9ae5993fafe6fdb80d"><div class="ttname"><a href="../../d5/d49/structast__bridge__merge__message.html#a75f281a7bfa00f9ae5993fafe6fdb80d">ast_bridge_merge_message::from</a></div><div class="ttdeci">struct ast_bridge_snapshot * from</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00093">stasis_bridges.h:93</a></div></div>
<div class="ttc" id="structast__bridge__merge__message_html"><div class="ttname"><a href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a></div><div class="ttdoc">Message representing the merge of two bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00092">stasis_bridges.h:92</a></div></div>
<div class="ttc" id="structast__bridge__merge__message_html_a7895e4b9097873d85bd687c7ee592440"><div class="ttname"><a href="../../d5/d49/structast__bridge__merge__message.html#a7895e4b9097873d85bd687c7ee592440">ast_bridge_merge_message::to</a></div><div class="ttdeci">struct ast_bridge_snapshot * to</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00094">stasis_bridges.h:94</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8a5edc4099d4ea126a345997b2834e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8a5edc4099d4ea126a345997b2834e9">&#9670;&nbsp;</a></span>bridge_merge_message_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_merge_message_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor for bridge merge messages. </p>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00407">407</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00093">ast_bridge_merge_message::from</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00094">ast_bridge_merge_message::to</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00418">bridge_merge_message_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;{</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a> *msg = obj;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg-&gt;<a class="code" href="../../d5/d49/structast__bridge__merge__message.html#a7895e4b9097873d85bd687c7ee592440">to</a>);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   msg-&gt;<a class="code" href="../../d5/d49/structast__bridge__merge__message.html#a7895e4b9097873d85bd687c7ee592440">to</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg-&gt;<a class="code" href="../../d5/d49/structast__bridge__merge__message.html#a75f281a7bfa00f9ae5993fafe6fdb80d">from</a>);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   msg-&gt;<a class="code" href="../../d5/d49/structast__bridge__merge__message.html#a75f281a7bfa00f9ae5993fafe6fdb80d">from</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__merge__message_html_a75f281a7bfa00f9ae5993fafe6fdb80d"><div class="ttname"><a href="../../d5/d49/structast__bridge__merge__message.html#a75f281a7bfa00f9ae5993fafe6fdb80d">ast_bridge_merge_message::from</a></div><div class="ttdeci">struct ast_bridge_snapshot * from</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00093">stasis_bridges.h:93</a></div></div>
<div class="ttc" id="structast__bridge__merge__message_html"><div class="ttname"><a href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a></div><div class="ttdoc">Message representing the merge of two bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00092">stasis_bridges.h:92</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__bridge__merge__message_html_a7895e4b9097873d85bd687c7ee592440"><div class="ttname"><a href="../../d5/d49/structast__bridge__merge__message.html#a7895e4b9097873d85bd687c7ee592440">ast_bridge_merge_message::to</a></div><div class="ttdeci">struct ast_bridge_snapshot * to</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00094">stasis_bridges.h:94</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac738c330e2a7470ec824a2fa94811348"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac738c330e2a7470ec824a2fa94811348">&#9670;&nbsp;</a></span>bridge_publish_state_from_blob()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_publish_state_from_blob </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> *&#160;</td>
          <td class="paramname"><em>obj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00381">381</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00184">ast_bridge_topic()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">ast_bridge_blob::bridge</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00275">bridge_snapshot_update_create()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00414">ast_bridge::current_snapshot</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, and <a class="el" href="../../d0/d89/codec__g726_8c_source.html#l00367">update()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00582">ast_bridge_publish_enter()</a>, and <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00611">ast_bridge_publish_leave()</a>.</p>
<div class="fragment"><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;{</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(obj != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;   update = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#add80c15db9febf8c5c7aef86e25f9853">bridge_snapshot_update_create</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>, obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a>);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;   <span class="keywordflow">if</span> (!update) {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a>(), update);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(update, -1);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a>(bridge), msg);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_a93724fb58fab92a0a749535e8c8534d2"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a></div><div class="ttdeci">struct stasis_message_type * ast_bridge_snapshot_type(void)</div><div class="ttdoc">Message type for ast_bridge_snapshot. </div></div>
<div class="ttc" id="codec__g726_8c_html_a8c58a1d1fd9436ff5145385d3ef7a430"><div class="ttname"><a href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a></div><div class="ttdeci">static void update(int code_size, int y, int wi, int fi, int dq, int sr, int dqsez, struct g726_state *state_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/codec__g726_8c_source.html#l00367">codec_g726.c:367</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_a820b583b07f0cf97618ca22d73cd8f09"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">ast_bridge_blob::bridge</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">stasis_bridges.h:125</a></div></div>
<div class="ttc" id="structast__bridge__snapshot__update_html"><div class="ttname"><a href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00034">stasis_bridges.h:34</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_add80c15db9febf8c5c7aef86e25f9853"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#add80c15db9febf8c5c7aef86e25f9853">bridge_snapshot_update_create</a></div><div class="ttdeci">static struct ast_bridge_snapshot_update * bridge_snapshot_update_create(struct ast_bridge_snapshot *old, struct ast_bridge_snapshot *new)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00275">stasis_bridges.c:275</a></div></div>
<div class="ttc" id="structast__bridge_html_a7dbe1cd4b391636e49491eafab9095e0"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">ast_bridge::current_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * current_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00414">bridge.h:414</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a7bdfd8273bb885f7a65f6f5d8188c915"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic(struct ast_bridge *bridge)</div><div class="ttdoc">A topic which publishes the events for a particular bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00184">stasis_bridges.c:184</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab3df470f4762c140fe75e2eb48d0ce46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3df470f4762c140fe75e2eb48d0ce46">&#9670;&nbsp;</a></span>bridge_snapshot_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_snapshot_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor for bridge snapshots. </p>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00194">194</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00339">ast_bridge_snapshot::channels</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00202">ast_bridge_snapshot_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;{</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *snapshot = obj;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(snapshot);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div><div class="ttc" id="structast__bridge__snapshot_html_adbc20a2fd50bb1376a3c6094e96a31e3"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">ast_bridge_snapshot::channels</a></div><div class="ttdeci">struct ao2_container * channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00339">bridge.h:339</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="add80c15db9febf8c5c7aef86e25f9853"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add80c15db9febf8c5c7aef86e25f9853">&#9670;&nbsp;</a></span>bridge_snapshot_update_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a>* bridge_snapshot_update_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>new</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00275">275</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00264">bridge_snapshot_update_dtor()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00036">ast_bridge_snapshot_update::new_snapshot</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00035">ast_bridge_snapshot_update::old_snapshot</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::uniqueid</a>, and <a class="el" href="../../d0/d89/codec__g726_8c_source.html#l00367">update()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00350">ast_bridge_publish_state()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00381">bridge_publish_state_from_blob()</a>, and <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00319">bridge_topics_destroy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   update = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*update), <a class="code" href="../../da/d0f/stasis__bridges_8c.html#ae2a6194146fc3e38616f8fd66f55f125">bridge_snapshot_update_dtor</a>,</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   <span class="keywordflow">if</span> (!update) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   update-&gt;<a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html#a8fc4a6f90768c6d81351045201e6fd21">old_snapshot</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(old);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   update-&gt;<a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html#a300bfc6cec12facf0e5b203d670aa2d1">new_snapshot</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<span class="keyword">new</span>);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Update: %p  Old: %s  New: %s\n&quot;</span>, update,</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      update-&gt;<a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html#a8fc4a6f90768c6d81351045201e6fd21">old_snapshot</a> ? update-&gt;<a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html#a8fc4a6f90768c6d81351045201e6fd21">old_snapshot</a>-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a> : <span class="stringliteral">&quot;&lt;none&gt;&quot;</span>,</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      update-&gt;<a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html#a300bfc6cec12facf0e5b203d670aa2d1">new_snapshot</a> ? update-&gt;<a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html#a300bfc6cec12facf0e5b203d670aa2d1">new_snapshot</a>-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a> : <span class="stringliteral">&quot;&lt;none&gt;&quot;</span>);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;}</div><div class="ttc" id="stasis__bridges_8c_html_ae2a6194146fc3e38616f8fd66f55f125"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#ae2a6194146fc3e38616f8fd66f55f125">bridge_snapshot_update_dtor</a></div><div class="ttdeci">static void bridge_snapshot_update_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00264">stasis_bridges.c:264</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="codec__g726_8c_html_a8c58a1d1fd9436ff5145385d3ef7a430"><div class="ttname"><a href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a></div><div class="ttdeci">static void update(int code_size, int y, int wi, int fi, int dq, int sr, int dqsez, struct g726_state *state_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/codec__g726_8c_source.html#l00367">codec_g726.c:367</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__bridge__snapshot__update_html"><div class="ttname"><a href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00034">stasis_bridges.h:34</a></div></div>
<div class="ttc" id="structast__bridge__snapshot__update_html_a8fc4a6f90768c6d81351045201e6fd21"><div class="ttname"><a href="../../d2/d33/structast__bridge__snapshot__update.html#a8fc4a6f90768c6d81351045201e6fd21">ast_bridge_snapshot_update::old_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * old_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00035">stasis_bridges.h:35</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">ast_bridge_snapshot::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="structast__bridge__snapshot__update_html_a300bfc6cec12facf0e5b203d670aa2d1"><div class="ttname"><a href="../../d2/d33/structast__bridge__snapshot__update.html#a300bfc6cec12facf0e5b203d670aa2d1">ast_bridge_snapshot_update::new_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * new_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00036">stasis_bridges.h:36</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae2a6194146fc3e38616f8fd66f55f125"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2a6194146fc3e38616f8fd66f55f125">&#9670;&nbsp;</a></span>bridge_snapshot_update_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_snapshot_update_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00264">264</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00036">ast_bridge_snapshot_update::new_snapshot</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00035">ast_bridge_snapshot_update::old_snapshot</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::uniqueid</a>, and <a class="el" href="../../d0/d89/codec__g726_8c_source.html#l00367">update()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00275">bridge_snapshot_update_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;{</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a> = obj;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Update: %p  Old: %s  New: %s\n&quot;</span>, update,</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      update-&gt;<a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html#a8fc4a6f90768c6d81351045201e6fd21">old_snapshot</a> ? update-&gt;<a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html#a8fc4a6f90768c6d81351045201e6fd21">old_snapshot</a>-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a> : <span class="stringliteral">&quot;&lt;none&gt;&quot;</span>,</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      update-&gt;<a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html#a300bfc6cec12facf0e5b203d670aa2d1">new_snapshot</a> ? update-&gt;<a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html#a300bfc6cec12facf0e5b203d670aa2d1">new_snapshot</a>-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a> : <span class="stringliteral">&quot;&lt;none&gt;&quot;</span>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(update-&gt;<a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html#a8fc4a6f90768c6d81351045201e6fd21">old_snapshot</a>);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(update-&gt;<a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html#a300bfc6cec12facf0e5b203d670aa2d1">new_snapshot</a>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div><div class="ttc" id="codec__g726_8c_html_a8c58a1d1fd9436ff5145385d3ef7a430"><div class="ttname"><a href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a></div><div class="ttdeci">static void update(int code_size, int y, int wi, int fi, int dq, int sr, int dqsez, struct g726_state *state_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/codec__g726_8c_source.html#l00367">codec_g726.c:367</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__bridge__snapshot__update_html"><div class="ttname"><a href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00034">stasis_bridges.h:34</a></div></div>
<div class="ttc" id="structast__bridge__snapshot__update_html_a8fc4a6f90768c6d81351045201e6fd21"><div class="ttname"><a href="../../d2/d33/structast__bridge__snapshot__update.html#a8fc4a6f90768c6d81351045201e6fd21">ast_bridge_snapshot_update::old_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * old_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00035">stasis_bridges.h:35</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">ast_bridge_snapshot::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="structast__bridge__snapshot__update_html_a300bfc6cec12facf0e5b203d670aa2d1"><div class="ttname"><a href="../../d2/d33/structast__bridge__snapshot__update.html#a300bfc6cec12facf0e5b203d670aa2d1">ast_bridge_snapshot_update::new_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * new_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00036">stasis_bridges.h:36</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae533d4edc97a21476c3f0600a6665eb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae533d4edc97a21476c3f0600a6665eb1">&#9670;&nbsp;</a></span>bridge_topics_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bridge_topics_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00319">319</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00202">ast_bridge_snapshot_create()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00184">ast_bridge_topic()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00275">bridge_snapshot_update_create()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00414">ast_bridge::current_snapshot</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00628">stasis_topic_name()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01864">stasis_topic_pool_delete_topic()</a>, and <a class="el" href="../../d0/d89/codec__g726_8c_source.html#l00367">update()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l00658">destroy_bridge()</a>.</p>
<div class="fragment"><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;{</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(bridge != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="keywordflow">if</span> (!bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a> = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a>(bridge);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">if</span> (!bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;   }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   update = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#add80c15db9febf8c5c7aef86e25f9853">bridge_snapshot_update_create</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="keywordflow">if</span> (!update) {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a>(), update);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(update, -1);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a>(bridge), msg);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a1dfabff07a77d235b2b16d2b564f5c4b">stasis_topic_pool_delete_topic</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a>, <a class="code" href="../../dd/d79/stasis_8h.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a>(bridge)));</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_a93724fb58fab92a0a749535e8c8534d2"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a></div><div class="ttdeci">struct stasis_message_type * ast_bridge_snapshot_type(void)</div><div class="ttdoc">Message type for ast_bridge_snapshot. </div></div>
<div class="ttc" id="codec__g726_8c_html_a8c58a1d1fd9436ff5145385d3ef7a430"><div class="ttname"><a href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a></div><div class="ttdeci">static void update(int code_size, int y, int wi, int fi, int dq, int sr, int dqsez, struct g726_state *state_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/codec__g726_8c_source.html#l00367">codec_g726.c:367</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__snapshot__update_html"><div class="ttname"><a href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00034">stasis_bridges.h:34</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_add80c15db9febf8c5c7aef86e25f9853"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#add80c15db9febf8c5c7aef86e25f9853">bridge_snapshot_update_create</a></div><div class="ttdeci">static struct ast_bridge_snapshot_update * bridge_snapshot_update_create(struct ast_bridge_snapshot *old, struct ast_bridge_snapshot *new)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00275">stasis_bridges.c:275</a></div></div>
<div class="ttc" id="stasis_8h_html_a1dfabff07a77d235b2b16d2b564f5c4b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a1dfabff07a77d235b2b16d2b564f5c4b">stasis_topic_pool_delete_topic</a></div><div class="ttdeci">void stasis_topic_pool_delete_topic(struct stasis_topic_pool *pool, const char *topic_name)</div><div class="ttdoc">Delete a topic from the topic pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01864">stasis.c:1864</a></div></div>
<div class="ttc" id="structast__bridge_html_a7dbe1cd4b391636e49491eafab9095e0"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">ast_bridge::current_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * current_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00414">bridge.h:414</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a20df01df18ba86528d57c317aef55785"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a></div><div class="ttdeci">static struct stasis_topic_pool * bridge_topic_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00159">stasis_bridges.c:159</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="stasis_8h_html_af23deee342575033bc73311b1215d886"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a></div><div class="ttdeci">const char * stasis_topic_name(const struct stasis_topic *topic)</div><div class="ttdoc">Return the name of a topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00628">stasis.c:628</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a95241898553c1d42ea46964b277433ad"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a></div><div class="ttdeci">struct ast_bridge_snapshot * ast_bridge_snapshot_create(struct ast_bridge *bridge)</div><div class="ttdoc">Generate a snapshot of the bridge state. This is an ao2 object, so ao2_cleanup() to deallocate...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00202">stasis_bridges.c:202</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a7bdfd8273bb885f7a65f6f5d8188c915"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic(struct ast_bridge *bridge)</div><div class="ttdoc">A topic which publishes the events for a particular bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00184">stasis_bridges.c:184</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a47e2e9503f7beb080c820edc385d0ca6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47e2e9503f7beb080c820edc385d0ca6">&#9670;&nbsp;</a></span>bridge_topics_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bridge_topics_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00295">295</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00269">ast_asprintf</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01884">stasis_topic_pool_get_topic()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00367">ast_bridge::topic</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l00760">bridge_base_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   <span class="keywordtype">char</span> *topic_name;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>)) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Bridge id initialization required\n&quot;</span>);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   ret = <a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(&amp;topic_name, <span class="stringliteral">&quot;bridge:%s&quot;</span>, bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a1ee1df597af46f3b489cce002b604a89">stasis_topic_pool_get_topic</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a>, topic_name);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(topic_name);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="keywordflow">if</span> (!bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a136460a7868b48ef576c0fa505ef96db">topic</a>) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div><div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="stasis_8h_html_a1ee1df597af46f3b489cce002b604a89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a1ee1df597af46f3b489cce002b604a89">stasis_topic_pool_get_topic</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_pool_get_topic(struct stasis_topic_pool *pool, const char *topic_name)</div><div class="ttdoc">Find or create a topic in the pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01884">stasis.c:1884</a></div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a20df01df18ba86528d57c317aef55785"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a></div><div class="ttdeci">static struct stasis_topic_pool * bridge_topic_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00159">stasis_bridges.c:159</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__bridge_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a136460a7868b48ef576c0fa505ef96db">ast_bridge::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00367">bridge.h:367</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a46bdf1ed4616859d85488f151cd61a6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46bdf1ed4616859d85488f151cd61a6f">&#9670;&nbsp;</a></span>capability2str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* capability2str </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>capabilities</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00703">703</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d56/bridge_8h_source.html#l00086">AST_BRIDGE_CAPABILITY_HOLDING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00712">ast_bridge_snapshot_to_json()</a>.</p>
<div class="fragment"><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;{</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   <span class="keywordflow">if</span> (capabilities &amp; <a class="code" href="../../d4/d56/bridge_8h.html#a815c9b3e933dfd4b8f523cf55caa5bbfaff2606e446a3b7e22fb3785a06110554">AST_BRIDGE_CAPABILITY_HOLDING</a>) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;holding&quot;</span>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;mixing&quot;</span>;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;}</div><div class="ttc" id="bridge_8h_html_a815c9b3e933dfd4b8f523cf55caa5bbfaff2606e446a3b7e22fb3785a06110554"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a815c9b3e933dfd4b8f523cf55caa5bbfaff2606e446a3b7e22fb3785a06110554">AST_BRIDGE_CAPABILITY_HOLDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00086">bridge.h:86</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4f5816df674dfa9b3143bf3d325c60dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f5816df674dfa9b3143bf3d325c60dc">&#9670;&nbsp;</a></span>container_to_json_array()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a>* container_to_json_array </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td>
          <td class="paramname"><em>items</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *&#160;</td>
          <td class="paramname"><em>sanitize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00673">673</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00368">ast_json_array_append()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00352">ast_json_array_create()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00268">ast_json_string_create()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00210">stasis_message_sanitizer::channel_id</a>, <a class="el" href="../../d8/d4f/test__config_8c_source.html#l01463">item</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00712">ast_bridge_snapshot_to_json()</a>.</p>
<div class="fragment"><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;{</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_items = <a class="code" href="../../d4/d05/json_8h.html#a48d874eed79fb2bbeb0557440e33ae67">ast_json_array_create</a>();</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d8/d4f/test__config_8c.html#aecdc7cbd5dfa76493c0212caa55d706c">item</a>;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> it;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   <span class="keywordflow">if</span> (!json_items) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   <span class="keywordflow">for</span> (it = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(items, 0);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      (item = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;it)); <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(item)) {</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="keywordflow">if</span> (sanitize &amp;&amp; sanitize-&gt;<a class="code" href="../../d4/d45/structstasis__message__sanitizer.html#ae2767f52c403c8409a9574717ec14095">channel_id</a> &amp;&amp; sanitize-&gt;<a class="code" href="../../d4/d45/structstasis__message__sanitizer.html#ae2767f52c403c8409a9574717ec14095">channel_id</a>(item)) {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      }</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/json_8h.html#a3d675e52f866630a6a03302df2712b8d">ast_json_array_append</a>(json_items, <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(item))) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(item);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_items);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      }</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   }</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <span class="keywordflow">return</span> json_items;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;}</div><div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="structstasis__message__sanitizer_html_ae2767f52c403c8409a9574717ec14095"><div class="ttname"><a href="../../d4/d45/structstasis__message__sanitizer.html#ae2767f52c403c8409a9574717ec14095">stasis_message_sanitizer::channel_id</a></div><div class="ttdeci">int(* channel_id)(const char *channel_id)</div><div class="ttdoc">Callback which determines whether a channel should be sanitized from a message based on the channel&amp;#39;s...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00210">stasis.h:210</a></div></div>
<div class="ttc" id="test__config_8c_html_aecdc7cbd5dfa76493c0212caa55d706c"><div class="ttname"><a href="../../d8/d4f/test__config_8c.html#aecdc7cbd5dfa76493c0212caa55d706c">item</a></div><div class="ttdeci">static struct aco_type item</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4f/test__config_8c_source.html#l01463">test_config.c:1463</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="json_8h_html_adc52f8d76b7fdd0c8d12987981fd5bf5"><div class="ttname"><a href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a></div><div class="ttdeci">struct ast_json * ast_json_string_create(const char *value)</div><div class="ttdoc">Construct a JSON string from value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00268">json.c:268</a></div></div>
<div class="ttc" id="json_8h_html_a48d874eed79fb2bbeb0557440e33ae67"><div class="ttname"><a href="../../d4/d05/json_8h.html#a48d874eed79fb2bbeb0557440e33ae67">ast_json_array_create</a></div><div class="ttdeci">struct ast_json * ast_json_array_create(void)</div><div class="ttdoc">Create a empty JSON array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00352">json.c:352</a></div></div>
<div class="ttc" id="json_8h_html_a3d675e52f866630a6a03302df2712b8d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a3d675e52f866630a6a03302df2712b8d">ast_json_array_append</a></div><div class="ttdeci">int ast_json_array_append(struct ast_json *array, struct ast_json *value)</div><div class="ttdoc">Append to an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00368">json.c:368</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c58e8db4e31ef6c790a83648a2dddce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c58e8db4e31ef6c790a83648a2dddce">&#9670;&nbsp;</a></span>simple_bridge_channel_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a>* simple_bridge_channel_event </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>channel_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct timeval *&#160;</td>
          <td class="paramname"><em>tv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *&#160;</td>
          <td class="paramname"><em>sanitize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00629">629</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00712">ast_bridge_snapshot_to_json()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01255">ast_channel_snapshot_to_json()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00649">ast_json_timeval()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00653">ast_channel_entered_bridge_to_json()</a>, and <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00663">ast_channel_left_bridge_to_json()</a>.</p>
<div class="fragment"><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;{</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_bridge = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a>(bridge_snapshot, sanitize);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_channel = <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(channel_snapshot, sanitize);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   <span class="keywordflow">if</span> (!json_bridge || !json_channel) {</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_bridge);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_channel);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   }</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: o, s: o, s: o}&quot;</span>,</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <span class="stringliteral">&quot;type&quot;</span>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>,</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="stringliteral">&quot;timestamp&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a>(*tv, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <span class="stringliteral">&quot;bridge&quot;</span>, json_bridge,</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="stringliteral">&quot;channel&quot;</span>, json_channel);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="json_8h_html_a2b7c72e2e3ab2634d8a4f8b708440d95"><div class="ttname"><a href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a></div><div class="ttdeci">struct ast_json * ast_json_timeval(const struct timeval tv, const char *zone)</div><div class="ttdoc">Construct a timeval as JSON. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00649">json.c:649</a></div></div>
<div class="ttc" id="stasis__channels_8h_html_a7571e6d10d716525aaa64b1f6583979b"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_channel_snapshot_to_json(const struct ast_channel_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_channel_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01255">stasis_channels.c:1255</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="stasis__bridges_8c_html_a76837dd4c259276cc59d163e4bc2a3b5"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_bridge_snapshot_to_json(const struct ast_bridge_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_bridge_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00712">stasis_bridges.c:712</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a23f5b0736a7524a008638cb19aac20d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23f5b0736a7524a008638cb19aac20d1">&#9670;&nbsp;</a></span>stasis_bridging_cleanup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stasis_bridging_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01392">1392</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l01523">STASIS_MESSAGE_TYPE_CLEANUP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01407">ast_stasis_bridging_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;{</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a>);</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type</a>);</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type</a>);</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type</a>);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type</a>);</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type</a>);</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a>);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;   <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a>);</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;   <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_a93724fb58fab92a0a749535e8c8534d2"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a></div><div class="ttdeci">struct stasis_message_type * ast_bridge_snapshot_type(void)</div><div class="ttdoc">Message type for ast_bridge_snapshot. </div></div>
<div class="ttc" id="stasis__bridges_8h_html_a05b1c5a7666e29a9ec982e3c9d6c1b85"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type</a></div><div class="ttdeci">struct stasis_message_type * ast_blind_transfer_type(void)</div><div class="ttdoc">Message type for ast_blind_transfer_message. </div></div>
<div class="ttc" id="stasis__bridges_8h_html_a8bd3a6c07bd2064a82a7c27091ba0fce"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_entered_bridge_type(void)</div><div class="ttdoc">Message type for channel enter bridge blob messages. </div></div>
<div class="ttc" id="stasis__bridges_8h_html_a4cf969b75b455dc9301ede7c7830d4b6"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_left_bridge_type(void)</div><div class="ttdoc">Message type for channel leave bridge blob messages. </div></div>
<div class="ttc" id="stasis_8h_html_a31197e193b1dfd6c122ff6d7c7f6b3fa"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_CLEANUP(name)</div><div class="ttdoc">Boiler-plate messaging macro for cleaning up message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01523">stasis.h:1523</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a20be59047a504f4c5dca2289beef7963"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type</a></div><div class="ttdeci">struct stasis_message_type * ast_bridge_merge_message_type(void)</div><div class="ttdoc">Message type for ast_bridge_merge_message. </div></div>
<div class="ttc" id="stasis__bridges_8c_html_a20df01df18ba86528d57c317aef55785"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a></div><div class="ttdeci">static struct stasis_topic_pool * bridge_topic_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00159">stasis_bridges.c:159</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a729647b6b24abb62561ee17d87d73f43"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a></div><div class="ttdeci">static struct stasis_topic * bridge_topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00158">stasis_bridges.c:158</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a263062ed75918c257f5401617389bdd8"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type</a></div><div class="ttdeci">struct stasis_message_type * ast_attended_transfer_type(void)</div><div class="ttdoc">Message type for ast_attended_transfer_message. </div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad9ba11f3e20a0a25be0b54bf04a81705"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9ba11f3e20a0a25be0b54bf04a81705">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN() <span class="overload">[1/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define bridge message types. </p>

</div>
</div>
<a id="abb475e7d91494ce5f8623c379f426821"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb475e7d91494ce5f8623c379f426821">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN() <span class="overload">[2/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>to_json</em> = <code><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a141cb49725321747635f3111525583ed">ast_bridge_merge_message_to_json</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a66a702b3c7e8dee1ea8f1e1407bf99f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66a702b3c7e8dee1ea8f1e1407bf99f2">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN() <span class="overload">[3/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>to_json</em> = <code><a class="el" href="../../da/d0f/stasis__bridges_8c.html#ac3b95347f2f44866724b7748ef0ffc3e">ast_channel_entered_bridge_to_json</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aba554eb4fcece50a0cc95637d32d47e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba554eb4fcece50a0cc95637d32d47e7">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN() <span class="overload">[4/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>to_json</em> = <code><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a38581774b22fdb360299a2cf498ffbcb">ast_channel_left_bridge_to_json</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aca104f7f1bd503356c8ae400c6da6c1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca104f7f1bd503356c8ae400c6da6c1e">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN() <span class="overload">[5/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>to_json</em> = <code><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a5e61b6d0dffe2315a869ff166f248599">blind_transfer_to_json</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>to_ami</em> = <code><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a63d1a9e2048e948eccb8d1834ab8d2f2">blind_transfer_to_ami</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7c83cc44f24d482e3e9fbb84d0324178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c83cc44f24d482e3e9fbb84d0324178">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN() <span class="overload">[6/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>to_json</em> = <code><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a3f0b80ae9d4c3b52f9b71b06ba3bb3ba">attended_transfer_to_json</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>to_ami</em> = <code><a class="el" href="../../da/d0f/stasis__bridges_8c.html#a6ce563c6d22abd56247298fd572ea439">attended_transfer_to_ami</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a729647b6b24abb62561ee17d87d73f43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a729647b6b24abb62561ee17d87d73f43">&#9670;&nbsp;</a></span>bridge_topic_all</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* bridge_topic_all</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00158">158</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00179">ast_bridge_topic_all()</a>.</p>

</div>
</div>
<a id="a20df01df18ba86528d57c317aef55785"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20df01df18ba86528d57c317aef55785">&#9670;&nbsp;</a></span>bridge_topic_pool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a>* bridge_topic_pool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00159">159</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

</div>
</div>
<a id="ac33fc704453179f9371e0f8123da56d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac33fc704453179f9371e0f8123da56d5">&#9670;&nbsp;</a></span>result_strs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* result_strs[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00792">792</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01103">attended_transfer_to_ami()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00967">attended_transfer_to_json()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00870">blind_transfer_to_ami()</a>, and <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00799">blind_transfer_to_json()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:49 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
