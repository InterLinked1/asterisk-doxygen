<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: test_dns_srv.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_59425e443f801f1f2fd8bbe4959a3ccf.html">tests</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">test_dns_srv.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;arpa/nameser.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d51/dns__core_8h_source.html">asterisk/dns_core.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/da7/dns__resolver_8h_source.html">asterisk/dns_resolver.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d39/dns__srv_8h_source.html">asterisk/dns_srv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/df0/dns__test_8h_source.html">asterisk/dns_test.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for test_dns_srv.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/df8/test__dns__srv_8c__incl.png" border="0" usemap="#test__dns__srv_8c" alt=""/></div>
<map name="test__dns__srv_8c" id="test__dns__srv_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="831,155,915,181"/>
<area shape="rect" id="node23" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="1494,80,1607,107"/>
<area shape="rect" id="node29" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1588,155,1724,181"/>
<area shape="rect" id="node30" href="../../d6/d51/dns__core_8h.html" title="Core DNS API. " alt="" coords="1688,80,1835,107"/>
<area shape="rect" id="node34" href="../../d9/da7/dns__resolver_8h.html" title="DNS Resolver API. " alt="" coords="2005,80,2173,107"/>
<area shape="rect" id="node35" href="../../d6/d39/dns__srv_8h.html" title="DNS SRV Record Parsing API. " alt="" coords="2197,80,2333,107"/>
<area shape="rect" id="node36" href="../../d3/df0/dns__test_8h.html" title="asterisk/dns_test.h" alt="" coords="2358,80,2501,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="273,229,428,256"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="725,229,862,256"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="886,229,1021,256"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="5,304,152,331"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="831,304,974,331"/>
<area shape="rect" id="node24" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1412,155,1513,181"/>
<area shape="rect" id="node26" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1487,229,1617,256"/>
<area shape="rect" id="node25" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1311,229,1462,256"/>
<area shape="rect" id="node27" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1593,304,1708,331"/>
<area shape="rect" id="node28" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1634,379,1761,405"/>
<area shape="rect" id="node31" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="1756,155,1903,181"/>
</map>
</div>
</div>
<p><a href="../../da/d22/test__dns__srv_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d8c/structsrv__record.html">srv_record</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa34cd35aa1833cd9ddf1515bbec4b443"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#aa34cd35aa1833cd9ddf1515bbec4b443">AST_TEST_DEFINE</a> (srv_resolve_single_record)</td></tr>
<tr class="separator:aa34cd35aa1833cd9ddf1515bbec4b443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3f4e8ed6d6fa17a1044e407a892c4ef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#ae3f4e8ed6d6fa17a1044e407a892c4ef">AST_TEST_DEFINE</a> (srv_resolve_sort_priority)</td></tr>
<tr class="separator:ae3f4e8ed6d6fa17a1044e407a892c4ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1c09a385c74a231d125f6b13bf85385"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#ad1c09a385c74a231d125f6b13bf85385">AST_TEST_DEFINE</a> (srv_resolve_same_priority_zero_weight)</td></tr>
<tr class="separator:ad1c09a385c74a231d125f6b13bf85385"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74149319ccb101b1f84160f41623c8f2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#a74149319ccb101b1f84160f41623c8f2">AST_TEST_DEFINE</a> (srv_resolve_same_priority_different_weights)</td></tr>
<tr class="separator:a74149319ccb101b1f84160f41623c8f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae60f4451032328d428634b4ec10d2946"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#ae60f4451032328d428634b4ec10d2946">AST_TEST_DEFINE</a> (srv_resolve_different_priorities_different_weights)</td></tr>
<tr class="separator:ae60f4451032328d428634b4ec10d2946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba60dc38e415655c5d93a0c42c810aec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#aba60dc38e415655c5d93a0c42c810aec">AST_TEST_DEFINE</a> (srv_resolve_record_missing_weight_port_host)</td></tr>
<tr class="separator:aba60dc38e415655c5d93a0c42c810aec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0fd0b385be8628e883803807cc88bd3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#ac0fd0b385be8628e883803807cc88bd3">AST_TEST_DEFINE</a> (srv_resolve_record_missing_port_host)</td></tr>
<tr class="separator:ac0fd0b385be8628e883803807cc88bd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77c4c6cc70a06addbd9d0f590e5317e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#a77c4c6cc70a06addbd9d0f590e5317e0">AST_TEST_DEFINE</a> (srv_resolve_record_missing_host)</td></tr>
<tr class="separator:a77c4c6cc70a06addbd9d0f590e5317e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab27525649d5a2cf30fe9d9d51fbae22f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#ab27525649d5a2cf30fe9d9d51fbae22f">generate_srv_record</a> (void *<a class="el" href="../../d6/df1/structdns__record.html">dns_record</a>, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>)</td></tr>
<tr class="separator:ab27525649d5a2cf30fe9d9d51fbae22f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a608da9d6d14a8c7209dd5f9befba4ba7"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#a608da9d6d14a8c7209dd5f9befba4ba7">invalid_record_test</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, struct <a class="el" href="../../da/d8c/structsrv__record.html">srv_record</a> *<a class="el" href="../../dd/d22/cdr__pgsql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>, int num_records)</td></tr>
<tr class="separator:a608da9d6d14a8c7209dd5f9befba4ba7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a249f39bf4255ffd7e79853b0ff7df9a2"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#a249f39bf4255ffd7e79853b0ff7df9a2">nominal_test</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, struct <a class="el" href="../../da/d8c/structsrv__record.html">srv_record</a> *<a class="el" href="../../dd/d22/cdr__pgsql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>, int *srv_record_order, int num_records)</td></tr>
<tr class="separator:a249f39bf4255ffd7e79853b0ff7df9a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7084ddc67e0a6fa4b26335d8832a1e7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#ac7084ddc67e0a6fa4b26335d8832a1e7">srv_cancel</a> (struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query)</td></tr>
<tr class="separator:ac7084ddc67e0a6fa4b26335d8832a1e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a750c158d07d2aa1e71d8b0de792bc64b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#a750c158d07d2aa1e71d8b0de792bc64b">srv_resolve</a> (struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query)</td></tr>
<tr class="separator:a750c158d07d2aa1e71d8b0de792bc64b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dec3130428f46c1da8b4c098d747a60"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#a6dec3130428f46c1da8b4c098d747a60">srv_thread</a> (void *dns_query)</td></tr>
<tr class="separator:a6dec3130428f46c1da8b4c098d747a60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;DNS SRV Tests&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1d8c27641605c79d2c52378b61c8c5f"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a> [1024]</td></tr>
<tr class="separator:ab1d8c27641605c79d2c52378b61c8c5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805baa2da9a6e94fe48b68e46e21230b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a></td></tr>
<tr class="separator:a805baa2da9a6e94fe48b68e46e21230b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab8aad5cbe964a8de6eb6e408e8b7586"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#aab8aad5cbe964a8de6eb6e408e8b7586">srv_resolver</a></td></tr>
<tr class="separator:aab8aad5cbe964a8de6eb6e408e8b7586"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d09f4168d3123388546dc6dc89b3cda"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../da/d8c/structsrv__record.html">srv_record</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a></td></tr>
<tr class="separator:a5d09f4168d3123388546dc6dc89b3cda"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00589">589</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00589">589</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00589">589</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

</div>
</div>
<a id="aa34cd35aa1833cd9ddf1515bbec4b443"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa34cd35aa1833cd9ddf1515bbec4b443">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[1/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">srv_resolve_single_record&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00188">188</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00125">nominal_test()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d8c/structsrv__record.html">srv_record</a> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[] = {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      { 10, 10, 5060, <span class="stringliteral">&quot;goose.down&quot;</span> },</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   };</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <span class="keywordtype">int</span> srv_record_order[] = { 0, };</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;srv_resolve_single_record&quot;</span>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/dns/srv/&quot;</span>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test an SRV lookup which returns a single record&quot;</span>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test defines a single SRV record and performs a\n&quot;</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;         <span class="stringliteral">&quot;resolution of the domain to which they belong. The test ensures that all\n&quot;</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;         <span class="stringliteral">&quot;fields of the SRV record are parsed correctly&quot;</span>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/d22/test__dns__srv_8c.html#a249f39bf4255ffd7e79853b0ff7df9a2">nominal_test</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, records, srv_record_order, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records));</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_ab18693215565ea1a797096dfe19e895f"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a></div><div class="ttdeci">static int records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00084">cdr_mysql.c:84</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="structsrv__record_html"><div class="ttname"><a href="../../da/d8c/structsrv__record.html">srv_record</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00036">test_dns_srv.c:36</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a249f39bf4255ffd7e79853b0ff7df9a2"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a249f39bf4255ffd7e79853b0ff7df9a2">nominal_test</a></div><div class="ttdeci">static enum ast_test_result_state nominal_test(struct ast_test *test, struct srv_record *records, int *srv_record_order, int num_records)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00125">test_dns_srv.c:125</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae3f4e8ed6d6fa17a1044e407a892c4ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3f4e8ed6d6fa17a1044e407a892c4ef">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[2/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">srv_resolve_sort_priority&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00212">212</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00125">nominal_test()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d8c/structsrv__record.html">srv_record</a> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[] = {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      { 20, 10, 5060, <span class="stringliteral">&quot;tacos&quot;</span> },</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      { 10, 10, 5060, <span class="stringliteral">&quot;goose.down&quot;</span> },</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   };</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   <span class="keywordtype">int</span> srv_record_order[] = { 1, 0};</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;srv_resolve_sort_priority&quot;</span>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/dns/srv/&quot;</span>;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test an SRV lookup which returns two records with differing priorities&quot;</span>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test defines two SRV records with differing priorities and\n&quot;</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;         <span class="stringliteral">&quot;performs a resolution of the domain to which they belong. The test ensures that\n&quot;</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;         <span class="stringliteral">&quot;the two records are sorted according to priority and that all fields of the SRV\n&quot;</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;         <span class="stringliteral">&quot;records are parsed correctly&quot;</span>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/d22/test__dns__srv_8c.html#a249f39bf4255ffd7e79853b0ff7df9a2">nominal_test</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, records, srv_record_order, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records));</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_ab18693215565ea1a797096dfe19e895f"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a></div><div class="ttdeci">static int records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00084">cdr_mysql.c:84</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="structsrv__record_html"><div class="ttname"><a href="../../da/d8c/structsrv__record.html">srv_record</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00036">test_dns_srv.c:36</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a249f39bf4255ffd7e79853b0ff7df9a2"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a249f39bf4255ffd7e79853b0ff7df9a2">nominal_test</a></div><div class="ttdeci">static enum ast_test_result_state nominal_test(struct ast_test *test, struct srv_record *records, int *srv_record_order, int num_records)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00125">test_dns_srv.c:125</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad1c09a385c74a231d125f6b13bf85385"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1c09a385c74a231d125f6b13bf85385">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[3/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">srv_resolve_same_priority_zero_weight&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00237">237</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00125">nominal_test()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;{</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d8c/structsrv__record.html">srv_record</a> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[] = {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      { 10, 0, 5060, <span class="stringliteral">&quot;tacos&quot;</span> },</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      { 10, 10, 5060, <span class="stringliteral">&quot;goose.down&quot;</span> },</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   };</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   <span class="keywordtype">int</span> srv_record_order[] = { 1, 0};</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;srv_resolve_same_priority_zero_weight&quot;</span>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/dns/srv/&quot;</span>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test an SRV lookup which returns two records with same priority but different weights&quot;</span>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test defines two SRV records with same priority but different weights and\n&quot;</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;         <span class="stringliteral">&quot;performs a resolution of the domain to which they belong. The test ensures that\n&quot;</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;         <span class="stringliteral">&quot;the record with zero weight comes last and that all fields of the SRV\n&quot;</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;         <span class="stringliteral">&quot;records are parsed correctly&quot;</span>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/d22/test__dns__srv_8c.html#a249f39bf4255ffd7e79853b0ff7df9a2">nominal_test</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, records, srv_record_order, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records));</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_ab18693215565ea1a797096dfe19e895f"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a></div><div class="ttdeci">static int records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00084">cdr_mysql.c:84</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="structsrv__record_html"><div class="ttname"><a href="../../da/d8c/structsrv__record.html">srv_record</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00036">test_dns_srv.c:36</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a249f39bf4255ffd7e79853b0ff7df9a2"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a249f39bf4255ffd7e79853b0ff7df9a2">nominal_test</a></div><div class="ttdeci">static enum ast_test_result_state nominal_test(struct ast_test *test, struct srv_record *records, int *srv_record_order, int num_records)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00125">test_dns_srv.c:125</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a74149319ccb101b1f84160f41623c8f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74149319ccb101b1f84160f41623c8f2">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[4/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">srv_resolve_same_priority_different_weights&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00262">262</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00079">ans_buffer</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00314">ast_dns_resolve()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00630">ast_dns_resolver_register()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00680">ast_dns_resolver_unregister()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00130">ast_dns_result_free()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00102">ast_dns_result_get_records()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00188">ast_dns_srv_get_host()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00212">ast_dns_srv_get_port()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00196">ast_dns_srv_get_priority()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00204">ast_dns_srv_get_weight()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00040">srv_record::host</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00078">num_test_records</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00039">srv_record::port</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00037">srv_record::priority</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00084">records</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00038">srv_record::weight</a>.</p>
<div class="fragment"><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;{</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d8c/structsrv__record.html">srv_record</a> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[] = {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      { 10, 10, 5060, <span class="stringliteral">&quot;tacos&quot;</span> },</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      { 10, 20, 5060, <span class="stringliteral">&quot;goose.down&quot;</span> },</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   };</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   <span class="keywordtype">int</span> srv_record_occurence[2] = { 0, };</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;srv_resolve_same_priority_different_weights&quot;</span>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/dns/srv/&quot;</span>;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test an SRV lookup which returns two records with same priority but different weights&quot;</span>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test defines two SRV records with same priority but different weights and\n&quot;</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;         <span class="stringliteral">&quot;performs a resolution of the domain to which they belong. The test ensures that\n&quot;</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;         <span class="stringliteral">&quot;the record with higher weight occurs more often than the one of lesser weight&quot;</span>;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a> = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a> = <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a>(&amp;<a class="code" href="../../da/d22/test__dns__srv_8c.html#aab8aad5cbe964a8de6eb6e408e8b7586">srv_resolver</a>);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="keywordflow">for</span> (count = 0; count &lt; 100; count++) {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a> *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d3/db7/structast__dns__record.html">ast_dns_record</a> *record;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      memset(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>));</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a>(<span class="stringliteral">&quot;goose.feathers&quot;</span>, T_SRV, C_IN, &amp;result)) {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;DNS resolution failed\n&quot;</span>);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="keywordflow">if</span> (!result) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;DNS resolution returned no result\n&quot;</span>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      record = <a class="code" href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a>(result);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records); i++) {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d39/dns__srv_8h.html#a78c74b574e091fd69e9b7c979176c5fe">ast_dns_srv_get_priority</a>(record) != records[i].<a class="code" href="../../da/d8c/structsrv__record.html#a0815784d41b3c13d42ce22367abfba1d">priority</a>) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;         }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d39/dns__srv_8h.html#a865a8f4403946d85995086c7715f7a4c">ast_dns_srv_get_weight</a>(record) != records[i].<a class="code" href="../../da/d8c/structsrv__record.html#a3c304b42c785c4cc5fa46842e2845a6b">weight</a>) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;         }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d39/dns__srv_8h.html#af77654636fa5bbe16a66123e248e0a6d">ast_dns_srv_get_port</a>(record) != records[i].<a class="code" href="../../da/d8c/structsrv__record.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>) {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;         }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;         <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../d6/d39/dns__srv_8h.html#ad7c1d64f481a6014b355a1276e3121d1">ast_dns_srv_get_host</a>(record), records[i].<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>)) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;         }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;         srv_record_occurence[i]++;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <a class="code" href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a>(result);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <span class="keywordflow">if</span> (srv_record_occurence[0] &gt; srv_record_occurence[1]) {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;SRV sorting resulted in lesser weight being returned more often\n&quot;</span>);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a>(&amp;<a class="code" href="../../da/d22/test__dns__srv_8c.html#aab8aad5cbe964a8de6eb6e408e8b7586">srv_resolver</a>);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a> = 0;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   memset(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>));</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div><div class="ttc" id="dns__srv_8h_html_a78c74b574e091fd69e9b7c979176c5fe"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#a78c74b574e091fd69e9b7c979176c5fe">ast_dns_srv_get_priority</a></div><div class="ttdeci">unsigned short ast_dns_srv_get_priority(const struct ast_dns_record *record)</div><div class="ttdoc">Get the priority from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00196">dns_srv.c:196</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ab18693215565ea1a797096dfe19e895f"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a></div><div class="ttdeci">static int records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00084">cdr_mysql.c:84</a></div></div>
<div class="ttc" id="dns__core_8h_html_ace452a5e50044783b7b81caf7dbee17c"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a></div><div class="ttdeci">int ast_dns_resolve(const char *name, int rr_type, int rr_class, struct ast_dns_result **result)</div><div class="ttdoc">Synchronously resolve a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00314">dns_core.c:314</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structsrv__record_html_a0815784d41b3c13d42ce22367abfba1d"><div class="ttname"><a href="../../da/d8c/structsrv__record.html#a0815784d41b3c13d42ce22367abfba1d">srv_record::priority</a></div><div class="ttdeci">uint16_t priority</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00037">test_dns_srv.c:37</a></div></div>
<div class="ttc" id="dns__core_8h_html_a9d8517652042a392b47003f26c9baeb5"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a></div><div class="ttdeci">void ast_dns_result_free(struct ast_dns_result *result)</div><div class="ttdoc">Free the DNS result information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00130">dns_core.c:130</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_aef7d827099f07e77891ab28255079399"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a></div><div class="ttdeci">void ast_dns_resolver_unregister(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Unregister a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00680">dns_core.c:680</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_aab8aad5cbe964a8de6eb6e408e8b7586"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#aab8aad5cbe964a8de6eb6e408e8b7586">srv_resolver</a></div><div class="ttdeci">static struct ast_dns_resolver srv_resolver</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00118">test_dns_srv.c:118</a></div></div>
<div class="ttc" id="structast__dns__record_html"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html">ast_dns_record</a></div><div class="ttdoc">For AST_LIST. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00039">dns_internal.h:39</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a805baa2da9a6e94fe48b68e46e21230b"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a></div><div class="ttdeci">static int num_test_records</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00078">test_dns_srv.c:78</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="dns__srv_8h_html_af77654636fa5bbe16a66123e248e0a6d"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#af77654636fa5bbe16a66123e248e0a6d">ast_dns_srv_get_port</a></div><div class="ttdeci">unsigned short ast_dns_srv_get_port(const struct ast_dns_record *record)</div><div class="ttdoc">Get the port from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00212">dns_srv.c:212</a></div></div>
<div class="ttc" id="dns__srv_8h_html_ad7c1d64f481a6014b355a1276e3121d1"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#ad7c1d64f481a6014b355a1276e3121d1">ast_dns_srv_get_host</a></div><div class="ttdeci">const char * ast_dns_srv_get_host(const struct ast_dns_record *record)</div><div class="ttdoc">Get the hostname from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00188">dns_srv.c:188</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="dns__srv_8h_html_a865a8f4403946d85995086c7715f7a4c"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#a865a8f4403946d85995086c7715f7a4c">ast_dns_srv_get_weight</a></div><div class="ttdeci">unsigned short ast_dns_srv_get_weight(const struct ast_dns_record *record)</div><div class="ttdoc">Get the weight from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00204">dns_srv.c:204</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="structsrv__record_html"><div class="ttname"><a href="../../da/d8c/structsrv__record.html">srv_record</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00036">test_dns_srv.c:36</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a7cf990e0d32f790b61b1cdffc6f005a2"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a></div><div class="ttdeci">int ast_dns_resolver_register(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Register a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00630">dns_core.c:630</a></div></div>
<div class="ttc" id="structsrv__record_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="../../da/d8c/structsrv__record.html#a8e0798404bf2cf5dabb84c5ba9a4f236">srv_record::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00039">test_dns_srv.c:39</a></div></div>
<div class="ttc" id="structast__dns__result_html"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a></div><div class="ttdoc">The result of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00117">dns_internal.h:117</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="dns__core_8h_html_abad4eaaea3a60b0e8b9dc1f69a7d69fc"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a></div><div class="ttdeci">const struct ast_dns_record * ast_dns_result_get_records(const struct ast_dns_result *result)</div><div class="ttdoc">Get the first record of a DNS Result. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00102">dns_core.c:102</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a5d09f4168d3123388546dc6dc89b3cda"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a></div><div class="ttdeci">static struct srv_record * test_records</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00077">test_dns_srv.c:77</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_ab1d8c27641605c79d2c52378b61c8c5f"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a></div><div class="ttdeci">static char ans_buffer[1024]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00079">test_dns_srv.c:79</a></div></div>
<div class="ttc" id="structsrv__record_html_a3c304b42c785c4cc5fa46842e2845a6b"><div class="ttname"><a href="../../da/d8c/structsrv__record.html#a3c304b42c785c4cc5fa46842e2845a6b">srv_record::weight</a></div><div class="ttdeci">uint16_t weight</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00038">test_dns_srv.c:38</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae60f4451032328d428634b4ec10d2946"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae60f4451032328d428634b4ec10d2946">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[5/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">srv_resolve_different_priorities_different_weights&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00348">348</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00079">ans_buffer</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00170">ast_dns_record_get_next()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00314">ast_dns_resolve()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00630">ast_dns_resolver_register()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00680">ast_dns_resolver_unregister()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00130">ast_dns_result_free()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00102">ast_dns_result_get_records()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00188">ast_dns_srv_get_host()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00212">ast_dns_srv_get_port()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00196">ast_dns_srv_get_priority()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00204">ast_dns_srv_get_weight()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00040">srv_record::host</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00078">num_test_records</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00039">srv_record::port</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00037">srv_record::priority</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00084">records</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00038">srv_record::weight</a>.</p>
<div class="fragment"><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;{</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d8c/structsrv__record.html">srv_record</a> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[] = {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      { 10, 10, 5060, <span class="stringliteral">&quot;tacos&quot;</span> },</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      { 10, 20, 5060, <span class="stringliteral">&quot;goose.down&quot;</span> },</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      { 5, 80, 5060, <span class="stringliteral">&quot;moo&quot;</span> },</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      { 5, 10, 5060, <span class="stringliteral">&quot;Canada&quot;</span> },</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   };</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <span class="keywordtype">int</span> srv_record_priority[4] = { 5, 5, 10, 10 };</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   <span class="keywordtype">int</span> srv_record_occurence[4] = { 0, };</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;srv_resolve_different_priorities_different_weights&quot;</span>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/dns/srv/&quot;</span>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test an SRV lookup which returns four records with different priority and different weights&quot;</span>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test defines four SRV records, two with one priority and two with another priority,\n&quot;</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;         <span class="stringliteral">&quot;and different weights and performs a resolution of the domain to which they belong.\n&quot;</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;         <span class="stringliteral">&quot;The test ensures that the priorities are sorted properly and that the records with higher weight\n&quot;</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;         <span class="stringliteral">&quot;occur more often than the ones of less weight.&quot;</span>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a> = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a> = <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a>(&amp;<a class="code" href="../../da/d22/test__dns__srv_8c.html#aab8aad5cbe964a8de6eb6e408e8b7586">srv_resolver</a>);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   <span class="keywordflow">for</span> (count = 0; count &lt; 100; count++) {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a> *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d3/db7/structast__dns__record.html">ast_dns_record</a> *record;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      memset(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>));</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a>(<span class="stringliteral">&quot;goose.feathers&quot;</span>, T_SRV, C_IN, &amp;result)) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;DNS resolution failed\n&quot;</span>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">if</span> (!result) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;DNS resolution returned no result\n&quot;</span>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      }</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      i = 0;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="keywordflow">for</span> (record = <a class="code" href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a>(result); record; record = <a class="code" href="../../d6/d51/dns__core_8h.html#a60c7de83431c14325042733b66a591d1">ast_dns_record_get_next</a>(record)) {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d39/dns__srv_8h.html#a78c74b574e091fd69e9b7c979176c5fe">ast_dns_srv_get_priority</a>(record) != srv_record_priority[i]) {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unexpected priority in returned SRV record\n&quot;</span>);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;         }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;         i++;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      record = <a class="code" href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a>(result);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records); i++) {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d39/dns__srv_8h.html#a78c74b574e091fd69e9b7c979176c5fe">ast_dns_srv_get_priority</a>(record) != records[i].<a class="code" href="../../da/d8c/structsrv__record.html#a0815784d41b3c13d42ce22367abfba1d">priority</a>) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;         }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d39/dns__srv_8h.html#a865a8f4403946d85995086c7715f7a4c">ast_dns_srv_get_weight</a>(record) != records[i].<a class="code" href="../../da/d8c/structsrv__record.html#a3c304b42c785c4cc5fa46842e2845a6b">weight</a>) {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;         }</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d39/dns__srv_8h.html#af77654636fa5bbe16a66123e248e0a6d">ast_dns_srv_get_port</a>(record) != records[i].<a class="code" href="../../da/d8c/structsrv__record.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;         }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;         <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../d6/d39/dns__srv_8h.html#ad7c1d64f481a6014b355a1276e3121d1">ast_dns_srv_get_host</a>(record), records[i].<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>)) {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;         }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;         srv_record_occurence[i]++;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <a class="code" href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a>(result);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   <span class="keywordflow">if</span> (srv_record_occurence[0] &gt; srv_record_occurence[1]) {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;SRV sorting resulted in lesser weight being returned more often for priority 10\n&quot;</span>);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <span class="keywordflow">if</span> (srv_record_occurence[3] &gt; srv_record_occurence[2]) {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;SRV sorting resulted in lesser weight being returned more often for priority 5\n&quot;</span>);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a>(&amp;<a class="code" href="../../da/d22/test__dns__srv_8c.html#aab8aad5cbe964a8de6eb6e408e8b7586">srv_resolver</a>);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a> = 0;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;   memset(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>));</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div><div class="ttc" id="dns__srv_8h_html_a78c74b574e091fd69e9b7c979176c5fe"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#a78c74b574e091fd69e9b7c979176c5fe">ast_dns_srv_get_priority</a></div><div class="ttdeci">unsigned short ast_dns_srv_get_priority(const struct ast_dns_record *record)</div><div class="ttdoc">Get the priority from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00196">dns_srv.c:196</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ab18693215565ea1a797096dfe19e895f"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a></div><div class="ttdeci">static int records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00084">cdr_mysql.c:84</a></div></div>
<div class="ttc" id="dns__core_8h_html_a60c7de83431c14325042733b66a591d1"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a60c7de83431c14325042733b66a591d1">ast_dns_record_get_next</a></div><div class="ttdeci">const struct ast_dns_record * ast_dns_record_get_next(const struct ast_dns_record *record)</div><div class="ttdoc">Get the next DNS record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00170">dns_core.c:170</a></div></div>
<div class="ttc" id="dns__core_8h_html_ace452a5e50044783b7b81caf7dbee17c"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a></div><div class="ttdeci">int ast_dns_resolve(const char *name, int rr_type, int rr_class, struct ast_dns_result **result)</div><div class="ttdoc">Synchronously resolve a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00314">dns_core.c:314</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structsrv__record_html_a0815784d41b3c13d42ce22367abfba1d"><div class="ttname"><a href="../../da/d8c/structsrv__record.html#a0815784d41b3c13d42ce22367abfba1d">srv_record::priority</a></div><div class="ttdeci">uint16_t priority</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00037">test_dns_srv.c:37</a></div></div>
<div class="ttc" id="dns__core_8h_html_a9d8517652042a392b47003f26c9baeb5"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a></div><div class="ttdeci">void ast_dns_result_free(struct ast_dns_result *result)</div><div class="ttdoc">Free the DNS result information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00130">dns_core.c:130</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_aef7d827099f07e77891ab28255079399"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a></div><div class="ttdeci">void ast_dns_resolver_unregister(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Unregister a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00680">dns_core.c:680</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_aab8aad5cbe964a8de6eb6e408e8b7586"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#aab8aad5cbe964a8de6eb6e408e8b7586">srv_resolver</a></div><div class="ttdeci">static struct ast_dns_resolver srv_resolver</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00118">test_dns_srv.c:118</a></div></div>
<div class="ttc" id="structast__dns__record_html"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html">ast_dns_record</a></div><div class="ttdoc">For AST_LIST. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00039">dns_internal.h:39</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a805baa2da9a6e94fe48b68e46e21230b"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a></div><div class="ttdeci">static int num_test_records</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00078">test_dns_srv.c:78</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="dns__srv_8h_html_af77654636fa5bbe16a66123e248e0a6d"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#af77654636fa5bbe16a66123e248e0a6d">ast_dns_srv_get_port</a></div><div class="ttdeci">unsigned short ast_dns_srv_get_port(const struct ast_dns_record *record)</div><div class="ttdoc">Get the port from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00212">dns_srv.c:212</a></div></div>
<div class="ttc" id="dns__srv_8h_html_ad7c1d64f481a6014b355a1276e3121d1"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#ad7c1d64f481a6014b355a1276e3121d1">ast_dns_srv_get_host</a></div><div class="ttdeci">const char * ast_dns_srv_get_host(const struct ast_dns_record *record)</div><div class="ttdoc">Get the hostname from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00188">dns_srv.c:188</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="dns__srv_8h_html_a865a8f4403946d85995086c7715f7a4c"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#a865a8f4403946d85995086c7715f7a4c">ast_dns_srv_get_weight</a></div><div class="ttdeci">unsigned short ast_dns_srv_get_weight(const struct ast_dns_record *record)</div><div class="ttdoc">Get the weight from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00204">dns_srv.c:204</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="structsrv__record_html"><div class="ttname"><a href="../../da/d8c/structsrv__record.html">srv_record</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00036">test_dns_srv.c:36</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a7cf990e0d32f790b61b1cdffc6f005a2"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a></div><div class="ttdeci">int ast_dns_resolver_register(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Register a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00630">dns_core.c:630</a></div></div>
<div class="ttc" id="structsrv__record_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="../../da/d8c/structsrv__record.html#a8e0798404bf2cf5dabb84c5ba9a4f236">srv_record::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00039">test_dns_srv.c:39</a></div></div>
<div class="ttc" id="structast__dns__result_html"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a></div><div class="ttdoc">The result of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00117">dns_internal.h:117</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="dns__core_8h_html_abad4eaaea3a60b0e8b9dc1f69a7d69fc"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a></div><div class="ttdeci">const struct ast_dns_record * ast_dns_result_get_records(const struct ast_dns_result *result)</div><div class="ttdoc">Get the first record of a DNS Result. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00102">dns_core.c:102</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a5d09f4168d3123388546dc6dc89b3cda"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a></div><div class="ttdeci">static struct srv_record * test_records</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00077">test_dns_srv.c:77</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_ab1d8c27641605c79d2c52378b61c8c5f"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a></div><div class="ttdeci">static char ans_buffer[1024]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00079">test_dns_srv.c:79</a></div></div>
<div class="ttc" id="structsrv__record_html_a3c304b42c785c4cc5fa46842e2845a6b"><div class="ttname"><a href="../../da/d8c/structsrv__record.html#a3c304b42c785c4cc5fa46842e2845a6b">srv_record::weight</a></div><div class="ttdeci">uint16_t weight</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00038">test_dns_srv.c:38</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aba60dc38e415655c5d93a0c42c810aec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba60dc38e415655c5d93a0c42c810aec">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[6/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">srv_resolve_record_missing_weight_port_host&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00494">494</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00452">invalid_record_test()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;{</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d8c/structsrv__record.html">srv_record</a> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[] = {</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      { 10, 10, 5060, <span class="stringliteral">&quot;tacos.com&quot;</span>, 0, 1, 1, 1 },</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   };</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;srv_resolve_record_missing_weight_port_host&quot;</span>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/dns/srv/&quot;</span>;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test an SRV lookup which returns a single invalid record&quot;</span>;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test defines a single SRV record and performs a\n&quot;</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;         <span class="stringliteral">&quot;resolution of the domain to which they belong. The test ensures that the\n&quot;</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;         <span class="stringliteral">&quot;record is determined to be corrupt as it contains only a priority&quot;</span>;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/d22/test__dns__srv_8c.html#a608da9d6d14a8c7209dd5f9befba4ba7">invalid_record_test</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, records, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records));</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_ab18693215565ea1a797096dfe19e895f"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a></div><div class="ttdeci">static int records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00084">cdr_mysql.c:84</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a608da9d6d14a8c7209dd5f9befba4ba7"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a608da9d6d14a8c7209dd5f9befba4ba7">invalid_record_test</a></div><div class="ttdeci">static enum ast_test_result_state invalid_record_test(struct ast_test *test, struct srv_record *records, int num_records)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00452">test_dns_srv.c:452</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="structsrv__record_html"><div class="ttname"><a href="../../da/d8c/structsrv__record.html">srv_record</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00036">test_dns_srv.c:36</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0fd0b385be8628e883803807cc88bd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0fd0b385be8628e883803807cc88bd3">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[7/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">srv_resolve_record_missing_port_host&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00516">516</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00452">invalid_record_test()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;{</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d8c/structsrv__record.html">srv_record</a> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[] = {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      { 10, 10, 5060, <span class="stringliteral">&quot;tacos.com&quot;</span>, 0, 0, 1, 1 },</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   };</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;srv_resolve_record_missing_port_host&quot;</span>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/dns/srv/&quot;</span>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test an SRV lookup which returns a single invalid record&quot;</span>;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test defines a single SRV record and performs a\n&quot;</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;         <span class="stringliteral">&quot;resolution of the domain to which they belong. The test ensures that the\n&quot;</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;         <span class="stringliteral">&quot;record is determined to be corrupt as it contains only a priority and weight&quot;</span>;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/d22/test__dns__srv_8c.html#a608da9d6d14a8c7209dd5f9befba4ba7">invalid_record_test</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, records, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records));</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_ab18693215565ea1a797096dfe19e895f"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a></div><div class="ttdeci">static int records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00084">cdr_mysql.c:84</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a608da9d6d14a8c7209dd5f9befba4ba7"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a608da9d6d14a8c7209dd5f9befba4ba7">invalid_record_test</a></div><div class="ttdeci">static enum ast_test_result_state invalid_record_test(struct ast_test *test, struct srv_record *records, int num_records)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00452">test_dns_srv.c:452</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="structsrv__record_html"><div class="ttname"><a href="../../da/d8c/structsrv__record.html">srv_record</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00036">test_dns_srv.c:36</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a77c4c6cc70a06addbd9d0f590e5317e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77c4c6cc70a06addbd9d0f590e5317e0">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[8/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">srv_resolve_record_missing_host&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00538">538</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00452">invalid_record_test()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;{</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d8c/structsrv__record.html">srv_record</a> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[] = {</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      { 10, 10, 5060, <span class="stringliteral">&quot;tacos.com&quot;</span>, 0, 0, 0, 1 },</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   };</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;srv_resolve_record_missing_host&quot;</span>;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/dns/srv/&quot;</span>;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test an SRV lookup which returns a single invalid record&quot;</span>;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test defines a single SRV record and performs a\n&quot;</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;         <span class="stringliteral">&quot;resolution of the domain to which they belong. The test ensures that the\n&quot;</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;         <span class="stringliteral">&quot;record is determined to be corrupt as it contains only a priority, weight,\n&quot;</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;         <span class="stringliteral">&quot;and port&quot;</span>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   }</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/d22/test__dns__srv_8c.html#a608da9d6d14a8c7209dd5f9befba4ba7">invalid_record_test</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, records, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records));</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_ab18693215565ea1a797096dfe19e895f"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a></div><div class="ttdeci">static int records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00084">cdr_mysql.c:84</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a608da9d6d14a8c7209dd5f9befba4ba7"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a608da9d6d14a8c7209dd5f9befba4ba7">invalid_record_test</a></div><div class="ttdeci">static enum ast_test_result_state invalid_record_test(struct ast_test *test, struct srv_record *records, int num_records)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00452">test_dns_srv.c:452</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="structsrv__record_html"><div class="ttname"><a href="../../da/d8c/structsrv__record.html">srv_record</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00036">test_dns_srv.c:36</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab27525649d5a2cf30fe9d9d51fbae22f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab27525649d5a2cf30fe9d9d51fbae22f">&#9670;&nbsp;</a></span>generate_srv_record()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int generate_srv_record </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dns_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00047">47</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d71/dns__test_8c_source.html#l00196">ast_dns_test_write_domain()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00040">srv_record::host</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00044">srv_record::ignore_host</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00043">srv_record::ignore_port</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00041">srv_record::ignore_priority</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00042">srv_record::ignore_weight</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00039">srv_record::port</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00037">srv_record::priority</a>, and <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00038">srv_record::weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00081">srv_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d8c/structsrv__record.html">srv_record</a> *record = <a class="code" href="../../d6/df1/structdns__record.html">dns_record</a>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;   uint16_t <a class="code" href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a> = htons(record-&gt;<a class="code" href="../../da/d8c/structsrv__record.html#a0815784d41b3c13d42ce22367abfba1d">priority</a>);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;   uint16_t <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a> = htons(record-&gt;<a class="code" href="../../da/d8c/structsrv__record.html#a3c304b42c785c4cc5fa46842e2845a6b">weight</a>);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;   uint16_t <a class="code" href="../../da/d8c/structsrv__record.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a> = htons(record-&gt;<a class="code" href="../../da/d8c/structsrv__record.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;   <span class="keywordtype">char</span> *ptr = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;   <span class="keywordflow">if</span> (!record-&gt;<a class="code" href="../../da/d8c/structsrv__record.html#ad873d12968b75863fc596da9f16b26be">ignore_priority</a>) {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      memcpy(ptr, &amp;priority, <span class="keyword">sizeof</span>(priority));</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      ptr += <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;   }</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;   <span class="keywordflow">if</span> (!record-&gt;<a class="code" href="../../da/d8c/structsrv__record.html#a12444d188e8d5447a8f89088756cbc59">ignore_weight</a>) {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      memcpy(ptr, &amp;weight, <span class="keyword">sizeof</span>(weight));</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      ptr += <span class="keyword">sizeof</span>(<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a>);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;   }</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;   <span class="keywordflow">if</span> (!record-&gt;<a class="code" href="../../da/d8c/structsrv__record.html#aa3a5a35cb23dbb47bc13f0ee8e5d4ec5">ignore_port</a>) {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      memcpy(ptr, &amp;port, <span class="keyword">sizeof</span>(port));</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      ptr += <span class="keyword">sizeof</span>(<a class="code" href="../../da/d8c/structsrv__record.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;   }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;   <span class="keywordflow">if</span> (!record-&gt;<a class="code" href="../../da/d8c/structsrv__record.html#af294c6936b095d1127c9a5197d66b2b3">ignore_host</a>) {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      ptr += <a class="code" href="../../d3/df0/dns__test_8h.html#a901c12bb62886fd3ae6f927c9595a911">ast_dns_test_write_domain</a>(record-&gt;<a class="code" href="../../da/d8c/structsrv__record.html#ae032e164f1daa754d6fbb79d59723931">host</a>, ptr);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;   }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   <span class="keywordflow">return</span> ptr - <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div><div class="ttc" id="structsrv__record_html_aa3a5a35cb23dbb47bc13f0ee8e5d4ec5"><div class="ttname"><a href="../../da/d8c/structsrv__record.html#aa3a5a35cb23dbb47bc13f0ee8e5d4ec5">srv_record::ignore_port</a></div><div class="ttdeci">unsigned int ignore_port</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00043">test_dns_srv.c:43</a></div></div>
<div class="ttc" id="structsrv__record_html_ae032e164f1daa754d6fbb79d59723931"><div class="ttname"><a href="../../da/d8c/structsrv__record.html#ae032e164f1daa754d6fbb79d59723931">srv_record::host</a></div><div class="ttdeci">const char * host</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00040">test_dns_srv.c:40</a></div></div>
<div class="ttc" id="structsrv__record_html_a0815784d41b3c13d42ce22367abfba1d"><div class="ttname"><a href="../../da/d8c/structsrv__record.html#a0815784d41b3c13d42ce22367abfba1d">srv_record::priority</a></div><div class="ttdeci">uint16_t priority</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00037">test_dns_srv.c:37</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structsrv__record_html_ad873d12968b75863fc596da9f16b26be"><div class="ttname"><a href="../../da/d8c/structsrv__record.html#ad873d12968b75863fc596da9f16b26be">srv_record::ignore_priority</a></div><div class="ttdeci">unsigned int ignore_priority</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00041">test_dns_srv.c:41</a></div></div>
<div class="ttc" id="structdns__record_html"><div class="ttname"><a href="../../d6/df1/structdns__record.html">dns_record</a></div><div class="ttdoc">A DNS record to be used during a test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00509">res_resolver_unbound.c:509</a></div></div>
<div class="ttc" id="cdr__beanstalkd_8c_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a></div><div class="ttdeci">static int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00076">cdr_beanstalkd.c:76</a></div></div>
<div class="ttc" id="structsrv__record_html"><div class="ttname"><a href="../../da/d8c/structsrv__record.html">srv_record</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00036">test_dns_srv.c:36</a></div></div>
<div class="ttc" id="structsrv__record_html_af294c6936b095d1127c9a5197d66b2b3"><div class="ttname"><a href="../../da/d8c/structsrv__record.html#af294c6936b095d1127c9a5197d66b2b3">srv_record::ignore_host</a></div><div class="ttdeci">unsigned int ignore_host</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00044">test_dns_srv.c:44</a></div></div>
<div class="ttc" id="structsrv__record_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="../../da/d8c/structsrv__record.html#a8e0798404bf2cf5dabb84c5ba9a4f236">srv_record::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00039">test_dns_srv.c:39</a></div></div>
<div class="ttc" id="dns__test_8h_html_a901c12bb62886fd3ae6f927c9595a911"><div class="ttname"><a href="../../d3/df0/dns__test_8h.html#a901c12bb62886fd3ae6f927c9595a911">ast_dns_test_write_domain</a></div><div class="ttdeci">int ast_dns_test_write_domain(const char *string, char *buf)</div><div class="ttdoc">Write a DNS domain to a buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d71/dns__test_8c_source.html#l00196">dns_test.c:196</a></div></div>
<div class="ttc" id="app__alarmreceiver_8c_html_abad164b523955988350efd52f43e7d67"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a></div><div class="ttdeci">char weight</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00132">app_alarmreceiver.c:132</a></div></div>
<div class="ttc" id="structsrv__record_html_a12444d188e8d5447a8f89088756cbc59"><div class="ttname"><a href="../../da/d8c/structsrv__record.html#a12444d188e8d5447a8f89088756cbc59">srv_record::ignore_weight</a></div><div class="ttdeci">unsigned int ignore_weight</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00042">test_dns_srv.c:42</a></div></div>
<div class="ttc" id="structsrv__record_html_a3c304b42c785c4cc5fa46842e2845a6b"><div class="ttname"><a href="../../da/d8c/structsrv__record.html#a3c304b42c785c4cc5fa46842e2845a6b">srv_record::weight</a></div><div class="ttdeci">uint16_t weight</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00038">test_dns_srv.c:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a608da9d6d14a8c7209dd5f9befba4ba7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a608da9d6d14a8c7209dd5f9befba4ba7">&#9670;&nbsp;</a></span>invalid_record_test()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> invalid_record_test </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d8c/structsrv__record.html">srv_record</a> *&#160;</td>
          <td class="paramname"><em>records</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_records</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00452">452</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00079">ans_buffer</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00314">ast_dns_resolve()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00630">ast_dns_resolver_register()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00680">ast_dns_resolver_unregister()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00130">ast_dns_result_free()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00102">ast_dns_result_get_records()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00078">num_test_records</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00084">records</a>, and <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00494">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;{</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a> *, <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a>);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d3/db7/structast__dns__record.html">ast_dns_record</a> *record;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a> = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a> = num_records;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   memset(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>));</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a>(&amp;<a class="code" href="../../da/d22/test__dns__srv_8c.html#aab8aad5cbe964a8de6eb6e408e8b7586">srv_resolver</a>);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a>(<span class="stringliteral">&quot;goose.feathers&quot;</span>, T_SRV, C_IN, &amp;<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>)) {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;DNS resolution failed\n&quot;</span>);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>) {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;DNS resolution returned no result\n&quot;</span>);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   record = <a class="code" href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a>(<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;   <span class="keywordflow">if</span> (record) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unexpected record returned from SRV query\n&quot;</span>);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a>(&amp;<a class="code" href="../../da/d22/test__dns__srv_8c.html#aab8aad5cbe964a8de6eb6e408e8b7586">srv_resolver</a>);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a> = 0;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   memset(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>));</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_ab18693215565ea1a797096dfe19e895f"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a></div><div class="ttdeci">static int records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00084">cdr_mysql.c:84</a></div></div>
<div class="ttc" id="dns__core_8h_html_ace452a5e50044783b7b81caf7dbee17c"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a></div><div class="ttdeci">int ast_dns_resolve(const char *name, int rr_type, int rr_class, struct ast_dns_result **result)</div><div class="ttdoc">Synchronously resolve a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00314">dns_core.c:314</a></div></div>
<div class="ttc" id="dns__core_8h_html_a9d8517652042a392b47003f26c9baeb5"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a></div><div class="ttdeci">void ast_dns_result_free(struct ast_dns_result *result)</div><div class="ttdoc">Free the DNS result information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00130">dns_core.c:130</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_aef7d827099f07e77891ab28255079399"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a></div><div class="ttdeci">void ast_dns_resolver_unregister(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Unregister a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00680">dns_core.c:680</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_aab8aad5cbe964a8de6eb6e408e8b7586"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#aab8aad5cbe964a8de6eb6e408e8b7586">srv_resolver</a></div><div class="ttdeci">static struct ast_dns_resolver srv_resolver</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00118">test_dns_srv.c:118</a></div></div>
<div class="ttc" id="structast__dns__record_html"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html">ast_dns_record</a></div><div class="ttdoc">For AST_LIST. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00039">dns_internal.h:39</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a805baa2da9a6e94fe48b68e46e21230b"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a></div><div class="ttdeci">static int num_test_records</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00078">test_dns_srv.c:78</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a7cf990e0d32f790b61b1cdffc6f005a2"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a></div><div class="ttdeci">int ast_dns_resolver_register(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Register a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00630">dns_core.c:630</a></div></div>
<div class="ttc" id="structast__dns__result_html"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a></div><div class="ttdoc">The result of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00117">dns_internal.h:117</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="dns__core_8h_html_abad4eaaea3a60b0e8b9dc1f69a7d69fc"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a></div><div class="ttdeci">const struct ast_dns_record * ast_dns_result_get_records(const struct ast_dns_result *result)</div><div class="ttdoc">Get the first record of a DNS Result. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00102">dns_core.c:102</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a5d09f4168d3123388546dc6dc89b3cda"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a></div><div class="ttdeci">static struct srv_record * test_records</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00077">test_dns_srv.c:77</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_ab1d8c27641605c79d2c52378b61c8c5f"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a></div><div class="ttdeci">static char ans_buffer[1024]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00079">test_dns_srv.c:79</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00575">575</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00127">AST_TEST_REGISTER</a>.</p>
<div class="fragment"><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;{</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(srv_resolve_single_record);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(srv_resolve_sort_priority);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(srv_resolve_same_priority_zero_weight);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(srv_resolve_same_priority_different_weights);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(srv_resolve_different_priorities_different_weights);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(srv_resolve_record_missing_weight_port_host);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(srv_resolve_record_missing_port_host);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(srv_resolve_record_missing_host);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a34f64a69c09d98ceb693b077efd7ef97"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a></div><div class="ttdeci">#define AST_TEST_REGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00127">test.h:127</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a249f39bf4255ffd7e79853b0ff7df9a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a249f39bf4255ffd7e79853b0ff7df9a2">&#9670;&nbsp;</a></span>nominal_test()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> nominal_test </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d8c/structsrv__record.html">srv_record</a> *&#160;</td>
          <td class="paramname"><em>records</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>srv_record_order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_records</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00125">125</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00079">ans_buffer</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00170">ast_dns_record_get_next()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00314">ast_dns_resolve()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00630">ast_dns_resolver_register()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00680">ast_dns_resolver_unregister()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00130">ast_dns_result_free()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00102">ast_dns_result_get_records()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00188">ast_dns_srv_get_host()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00212">ast_dns_srv_get_port()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00196">ast_dns_srv_get_priority()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00204">ast_dns_srv_get_weight()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00040">srv_record::host</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00078">num_test_records</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00039">srv_record::port</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00037">srv_record::priority</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00084">records</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, and <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00038">srv_record::weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00188">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;{</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a> *, <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d3/db7/structast__dns__record.html">ast_dns_record</a> *record;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a> = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a> = num_records;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   memset(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>));</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a>(&amp;<a class="code" href="../../da/d22/test__dns__srv_8c.html#aab8aad5cbe964a8de6eb6e408e8b7586">srv_resolver</a>);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a>(<span class="stringliteral">&quot;goose.feathers&quot;</span>, T_SRV, C_IN, &amp;<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>)) {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;DNS resolution failed\n&quot;</span>);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;DNS resolution returned no result\n&quot;</span>);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   i = 0;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   <span class="keywordflow">for</span> (record = <a class="code" href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a>(<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>); record; record = <a class="code" href="../../d6/d51/dns__core_8h.html#a60c7de83431c14325042733b66a591d1">ast_dns_record_get_next</a>(record)) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d39/dns__srv_8h.html#a78c74b574e091fd69e9b7c979176c5fe">ast_dns_srv_get_priority</a>(record) != records[srv_record_order[i]].<a class="code" href="../../da/d8c/structsrv__record.html#a0815784d41b3c13d42ce22367abfba1d">priority</a>) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unexpected priority in returned SRV record\n&quot;</span>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d39/dns__srv_8h.html#a865a8f4403946d85995086c7715f7a4c">ast_dns_srv_get_weight</a>(record) != records[srv_record_order[i]].<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a>) {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unexpected weight in returned SRV record\n&quot;</span>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d39/dns__srv_8h.html#af77654636fa5bbe16a66123e248e0a6d">ast_dns_srv_get_port</a>(record) != records[srv_record_order[i]].port) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unexpected port in returned SRV record\n&quot;</span>);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../d6/d39/dns__srv_8h.html#ad7c1d64f481a6014b355a1276e3121d1">ast_dns_srv_get_host</a>(record), records[srv_record_order[i]].<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>)) {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unexpected host in returned SRV record\n&quot;</span>);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      ++i;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <span class="keywordflow">if</span> (i != num_records) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unexpected number of records returned in SRV lookup\n&quot;</span>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a>(&amp;<a class="code" href="../../da/d22/test__dns__srv_8c.html#aab8aad5cbe964a8de6eb6e408e8b7586">srv_resolver</a>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   <a class="code" href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a> = 0;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   memset(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>));</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div><div class="ttc" id="dns__srv_8h_html_a78c74b574e091fd69e9b7c979176c5fe"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#a78c74b574e091fd69e9b7c979176c5fe">ast_dns_srv_get_priority</a></div><div class="ttdeci">unsigned short ast_dns_srv_get_priority(const struct ast_dns_record *record)</div><div class="ttdoc">Get the priority from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00196">dns_srv.c:196</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ab18693215565ea1a797096dfe19e895f"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a></div><div class="ttdeci">static int records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00084">cdr_mysql.c:84</a></div></div>
<div class="ttc" id="dns__core_8h_html_a60c7de83431c14325042733b66a591d1"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a60c7de83431c14325042733b66a591d1">ast_dns_record_get_next</a></div><div class="ttdeci">const struct ast_dns_record * ast_dns_record_get_next(const struct ast_dns_record *record)</div><div class="ttdoc">Get the next DNS record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00170">dns_core.c:170</a></div></div>
<div class="ttc" id="dns__core_8h_html_ace452a5e50044783b7b81caf7dbee17c"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a></div><div class="ttdeci">int ast_dns_resolve(const char *name, int rr_type, int rr_class, struct ast_dns_result **result)</div><div class="ttdoc">Synchronously resolve a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00314">dns_core.c:314</a></div></div>
<div class="ttc" id="structsrv__record_html_a0815784d41b3c13d42ce22367abfba1d"><div class="ttname"><a href="../../da/d8c/structsrv__record.html#a0815784d41b3c13d42ce22367abfba1d">srv_record::priority</a></div><div class="ttdeci">uint16_t priority</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00037">test_dns_srv.c:37</a></div></div>
<div class="ttc" id="dns__core_8h_html_a9d8517652042a392b47003f26c9baeb5"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a></div><div class="ttdeci">void ast_dns_result_free(struct ast_dns_result *result)</div><div class="ttdoc">Free the DNS result information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00130">dns_core.c:130</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_aef7d827099f07e77891ab28255079399"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a></div><div class="ttdeci">void ast_dns_resolver_unregister(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Unregister a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00680">dns_core.c:680</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_aab8aad5cbe964a8de6eb6e408e8b7586"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#aab8aad5cbe964a8de6eb6e408e8b7586">srv_resolver</a></div><div class="ttdeci">static struct ast_dns_resolver srv_resolver</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00118">test_dns_srv.c:118</a></div></div>
<div class="ttc" id="structast__dns__record_html"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html">ast_dns_record</a></div><div class="ttdoc">For AST_LIST. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00039">dns_internal.h:39</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a805baa2da9a6e94fe48b68e46e21230b"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a></div><div class="ttdeci">static int num_test_records</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00078">test_dns_srv.c:78</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="dns__srv_8h_html_af77654636fa5bbe16a66123e248e0a6d"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#af77654636fa5bbe16a66123e248e0a6d">ast_dns_srv_get_port</a></div><div class="ttdeci">unsigned short ast_dns_srv_get_port(const struct ast_dns_record *record)</div><div class="ttdoc">Get the port from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00212">dns_srv.c:212</a></div></div>
<div class="ttc" id="dns__srv_8h_html_ad7c1d64f481a6014b355a1276e3121d1"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#ad7c1d64f481a6014b355a1276e3121d1">ast_dns_srv_get_host</a></div><div class="ttdeci">const char * ast_dns_srv_get_host(const struct ast_dns_record *record)</div><div class="ttdoc">Get the hostname from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00188">dns_srv.c:188</a></div></div>
<div class="ttc" id="dns__srv_8h_html_a865a8f4403946d85995086c7715f7a4c"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#a865a8f4403946d85995086c7715f7a4c">ast_dns_srv_get_weight</a></div><div class="ttdeci">unsigned short ast_dns_srv_get_weight(const struct ast_dns_record *record)</div><div class="ttdoc">Get the weight from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00204">dns_srv.c:204</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a7cf990e0d32f790b61b1cdffc6f005a2"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a></div><div class="ttdeci">int ast_dns_resolver_register(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Register a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00630">dns_core.c:630</a></div></div>
<div class="ttc" id="structast__dns__result_html"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a></div><div class="ttdoc">The result of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00117">dns_internal.h:117</a></div></div>
<div class="ttc" id="app__alarmreceiver_8c_html_abad164b523955988350efd52f43e7d67"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a></div><div class="ttdeci">char weight</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00132">app_alarmreceiver.c:132</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="dns__core_8h_html_abad4eaaea3a60b0e8b9dc1f69a7d69fc"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a></div><div class="ttdeci">const struct ast_dns_record * ast_dns_result_get_records(const struct ast_dns_result *result)</div><div class="ttdoc">Get the first record of a DNS Result. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00102">dns_core.c:102</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a5d09f4168d3123388546dc6dc89b3cda"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a></div><div class="ttdeci">static struct srv_record * test_records</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00077">test_dns_srv.c:77</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_ab1d8c27641605c79d2c52378b61c8c5f"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a></div><div class="ttdeci">static char ans_buffer[1024]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00079">test_dns_srv.c:79</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac7084ddc67e0a6fa4b26335d8832a1e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7084ddc67e0a6fa4b26335d8832a1e7">&#9670;&nbsp;</a></span>srv_cancel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int srv_cancel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00113">113</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a750c158d07d2aa1e71d8b0de792bc64b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a750c158d07d2aa1e71d8b0de792bc64b">&#9670;&nbsp;</a></span>srv_resolve()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int srv_resolve </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00106">106</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00563">ast_pthread_create_detached</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00081">srv_thread()</a>, and <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01089">thread</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   pthread_t <a class="code" href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a>(&amp;thread, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../da/d22/test__dns__srv_8c.html#a6dec3130428f46c1da8b4c098d747a60">srv_thread</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(query));</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div><div class="ttc" id="app__meetme_8c_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01089">app_meetme.c:1089</a></div></div>
<div class="ttc" id="utils_8h_html_a832647380b1f97e7ac1b4492f8816d46"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a></div><div class="ttdeci">#define ast_pthread_create_detached(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00563">utils.h:563</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a6dec3130428f46c1da8b4c098d747a60"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a6dec3130428f46c1da8b4c098d747a60">srv_thread</a></div><div class="ttdeci">static void * srv_thread(void *dns_query)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00081">test_dns_srv.c:81</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6dec3130428f46c1da8b4c098d747a60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dec3130428f46c1da8b4c098d747a60">&#9670;&nbsp;</a></span>srv_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* srv_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dns_query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00081">81</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00079">ans_buffer</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00535">ast_dns_resolver_add_record()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00599">ast_dns_resolver_completed()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00456">ast_dns_resolver_set_result()</a>, <a class="el" href="../../db/d71/dns__test_8c_source.html#l00222">ast_dns_test_generate_result()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00047">generate_srv_record()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00078">num_test_records</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00106">srv_resolve()</a>.</p>
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query = dns_query;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;   <span class="keywordtype">int</span> ans_size;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;   ans_size = <a class="code" href="../../d3/df0/dns__test_8h.html#a9a06dd551b7eee2429abf790e84544f8">ast_dns_test_generate_result</a>(query, <a class="code" href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a>, <a class="code" href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a>,</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;         <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../da/d8c/structsrv__record.html">srv_record</a>), <a class="code" href="../../da/d22/test__dns__srv_8c.html#ab27525649d5a2cf30fe9d9d51fbae22f">generate_srv_record</a>, <a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#a321df8f3250551f796c99524dbcc2567">ast_dns_resolver_set_result</a>(query, 0, 0, NOERROR, <span class="stringliteral">&quot;goose.feathers&quot;</span>, <a class="code" href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a>, ans_size);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a>; ++i) {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keywordtype">char</span> record[128];</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <span class="keywordtype">int</span> srv_size;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      srv_size = <a class="code" href="../../da/d22/test__dns__srv_8c.html#ab27525649d5a2cf30fe9d9d51fbae22f">generate_srv_record</a>(&amp;<a class="code" href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a>[i], record);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <a class="code" href="../../d9/da7/dns__resolver_8h.html#ae88ff57fdf06ba45b931609978be2611">ast_dns_resolver_add_record</a>(query, T_SRV, C_IN, 12345, record, srv_size);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#a3eae81285310e1c64e8cb9e59e79d2e9">ast_dns_resolver_completed</a>(query);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(query, -1);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div><div class="ttc" id="test__dns__srv_8c_html_ab27525649d5a2cf30fe9d9d51fbae22f"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#ab27525649d5a2cf30fe9d9d51fbae22f">generate_srv_record</a></div><div class="ttdeci">static int generate_srv_record(void *dns_record, char *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00047">test_dns_srv.c:47</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_ae88ff57fdf06ba45b931609978be2611"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#ae88ff57fdf06ba45b931609978be2611">ast_dns_resolver_add_record</a></div><div class="ttdeci">int ast_dns_resolver_add_record(struct ast_dns_query *query, int rr_type, int rr_class, int ttl, const char *data, const size_t size)</div><div class="ttdoc">Add a DNS record to the result of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00535">dns_core.c:535</a></div></div>
<div class="ttc" id="dns__test_8h_html_a9a06dd551b7eee2429abf790e84544f8"><div class="ttname"><a href="../../d3/df0/dns__test_8h.html#a9a06dd551b7eee2429abf790e84544f8">ast_dns_test_generate_result</a></div><div class="ttdeci">int ast_dns_test_generate_result(struct ast_dns_query *query, void *records, size_t num_records, size_t record_size, record_fn generate, char *buffer)</div><div class="ttdoc">Generate a full DNS response for the given DNS records. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d71/dns__test_8c_source.html#l00222">dns_test.c:222</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a805baa2da9a6e94fe48b68e46e21230b"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a805baa2da9a6e94fe48b68e46e21230b">num_test_records</a></div><div class="ttdeci">static int num_test_records</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00078">test_dns_srv.c:78</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structsrv__record_html"><div class="ttname"><a href="../../da/d8c/structsrv__record.html">srv_record</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00036">test_dns_srv.c:36</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a3eae81285310e1c64e8cb9e59e79d2e9"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a3eae81285310e1c64e8cb9e59e79d2e9">ast_dns_resolver_completed</a></div><div class="ttdeci">void ast_dns_resolver_completed(struct ast_dns_query *query)</div><div class="ttdoc">Mark a DNS query as having been completed. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00599">dns_core.c:599</a></div></div>
<div class="ttc" id="structast__dns__query_html"><div class="ttname"><a href="../../dd/daa/structast__dns__query.html">ast_dns_query</a></div><div class="ttdoc">A DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00137">dns_internal.h:137</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_a5d09f4168d3123388546dc6dc89b3cda"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#a5d09f4168d3123388546dc6dc89b3cda">test_records</a></div><div class="ttdeci">static struct srv_record * test_records</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00077">test_dns_srv.c:77</a></div></div>
<div class="ttc" id="test__dns__srv_8c_html_ab1d8c27641605c79d2c52378b61c8c5f"><div class="ttname"><a href="../../da/d22/test__dns__srv_8c.html#ab1d8c27641605c79d2c52378b61c8c5f">ans_buffer</a></div><div class="ttdeci">static char ans_buffer[1024]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d22/test__dns__srv_8c_source.html#l00079">test_dns_srv.c:79</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a321df8f3250551f796c99524dbcc2567"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a321df8f3250551f796c99524dbcc2567">ast_dns_resolver_set_result</a></div><div class="ttdeci">int ast_dns_resolver_set_result(struct ast_dns_query *query, unsigned int secure, unsigned int bogus, unsigned int rcode, const char *canonical, const char *answer, size_t answer_size)</div><div class="ttdoc">Set result information for a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00456">dns_core.c:456</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00561">561</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/ddc/test_8h_source.html#l00128">AST_TEST_UNREGISTER</a>.</p>
<div class="fragment"><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;{</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(srv_resolve_single_record);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(srv_resolve_sort_priority);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(srv_resolve_same_priority_zero_weight);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(srv_resolve_same_priority_different_weights);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(srv_resolve_different_priorities_different_weights);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(srv_resolve_record_missing_weight_port_host);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(srv_resolve_record_missing_port_host);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(srv_resolve_record_missing_host);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div><div class="ttc" id="test_8h_html_a79bc64a935b14b1b181156e5ada58ead"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a></div><div class="ttdeci">#define AST_TEST_UNREGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00128">test.h:128</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;DNS SRV Tests&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00589">589</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

</div>
</div>
<a id="ab1d8c27641605c79d2c52378b61c8c5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1d8c27641605c79d2c52378b61c8c5f">&#9670;&nbsp;</a></span>ans_buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char ans_buffer[1024]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00079">79</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00262">AST_TEST_DEFINE()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00452">invalid_record_test()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00125">nominal_test()</a>, and <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00081">srv_thread()</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00589">589</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

</div>
</div>
<a id="a805baa2da9a6e94fe48b68e46e21230b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a805baa2da9a6e94fe48b68e46e21230b">&#9670;&nbsp;</a></span>num_test_records</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int num_test_records</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00078">78</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00262">AST_TEST_DEFINE()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00452">invalid_record_test()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00125">nominal_test()</a>, and <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00081">srv_thread()</a>.</p>

</div>
</div>
<a id="aab8aad5cbe964a8de6eb6e408e8b7586"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab8aad5cbe964a8de6eb6e408e8b7586">&#9670;&nbsp;</a></span>srv_resolver</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a> srv_resolver</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00118">118</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

</div>
</div>
<a id="a5d09f4168d3123388546dc6dc89b3cda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d09f4168d3123388546dc6dc89b3cda">&#9670;&nbsp;</a></span>test_records</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../da/d8c/structsrv__record.html">srv_record</a>* test_records</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00077">77</a> of file <a class="el" href="../../da/d22/test__dns__srv_8c_source.html">test_dns_srv.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:55 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
