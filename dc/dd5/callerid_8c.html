<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: callerid.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">callerid.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>CallerID Generation support.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="../../de/df7/time_8h_source.html">time.h</a>&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d4/dc2/ulaw_8h_source.html">asterisk/ulaw.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/db5/alaw_8h_source.html">asterisk/alaw.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html">asterisk/frame.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d47/callerid_8h_source.html">asterisk/callerid.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/dab/fskmodem_8h_source.html">asterisk/fskmodem.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d1c/format__cache_8h_source.html">asterisk/format_cache.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for callerid.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d31/callerid_8c__incl.png" border="0" usemap="#callerid_8c" alt=""/></div>
<map name="callerid_8c" id="callerid_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="2319,229,2403,256"/>
<area shape="rect" id="node18" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="889,453,951,480"/>
<area shape="rect" id="node23" href="../../d4/dc2/ulaw_8h.html" title="u&#45;Law to Signed linear conversion " alt="" coords="2788,80,2903,107"/>
<area shape="rect" id="node24" href="../../d6/db5/alaw_8h.html" title="A&#45;Law to Signed linear conversion. " alt="" coords="2927,80,3041,107"/>
<area shape="rect" id="node25" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1871,229,1998,256"/>
<area shape="rect" id="node30" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1037,80,1176,107"/>
<area shape="rect" id="node32" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="392,229,507,256"/>
<area shape="rect" id="node47" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr..." alt="" coords="2479,229,2612,256"/>
<area shape="rect" id="node48" href="../../dd/dab/fskmodem_8h.html" title="FSK Modem Support. " alt="" coords="2370,80,2526,107"/>
<area shape="rect" id="node50" href="../../db/d1c/format__cache_8h.html" title="Media Format Cache API. " alt="" coords="3065,80,3241,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="2111,528,2265,555"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="1266,304,1403,331"/>
<area shape="rect" id="node17" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="2370,304,2505,331"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="2115,603,2261,629"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="975,453,1118,480"/>
<area shape="rect" id="node20" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="683,528,829,555"/>
<area shape="rect" id="node26" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="2063,304,2193,331"/>
<area shape="rect" id="node27" href="../../d1/d84/endian_8h.html" title="Asterisk architecture endianess compatibility definitions. " alt="" coords="1908,304,2039,331"/>
<area shape="rect" id="node28" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="730,304,881,331"/>
<area shape="rect" id="node29" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="699,379,813,405"/>
<area shape="rect" id="node31" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="296,155,440,181"/>
<area shape="rect" id="node33" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="345,304,503,331"/>
<area shape="rect" id="node34" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="2049,229,2207,256"/>
<area shape="rect" id="node35" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1030,229,1165,256"/>
<area shape="rect" id="node36" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="1241,155,1405,181"/>
<area shape="rect" id="node37" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="757,229,904,256"/>
<area shape="rect" id="node38" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="145,155,271,181"/>
<area shape="rect" id="node39" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="1429,155,1536,181"/>
<area shape="rect" id="node40" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="531,229,682,256"/>
<area shape="rect" id="node41" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="1561,155,1722,181"/>
<area shape="rect" id="node42" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="2073,155,2244,181"/>
<area shape="rect" id="node43" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="1049,155,1165,181"/>
<area shape="rect" id="node44" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="816,155,973,181"/>
<area shape="rect" id="node45" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="464,155,589,181"/>
<area shape="rect" id="node46" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="1746,155,1897,181"/>
<area shape="rect" id="node49" href="../../de/d7d/fskmodem__float_8h.html" title="FSK Modem Support. " alt="" coords="2370,155,2507,181"/>
</map>
</div>
</div>
<p><a href="../../dc/dd5/callerid_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dbc/structast__value__translation.html">ast_value_translation</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af0451163d41eba078d01949d368cae8f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#af0451163d41eba078d01949d368cae8f">AST_CALLERID_UNKNOWN</a>&#160;&#160;&#160;&quot;&lt;unknown&gt;&quot;</td></tr>
<tr class="separator:af0451163d41eba078d01949d368cae8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa77a53334827b801fa3f5865c26ab6e0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#aa77a53334827b801fa3f5865c26ab6e0">CALLERID_MARK</a>&#160;&#160;&#160;1200.0</td></tr>
<tr class="separator:aa77a53334827b801fa3f5865c26ab6e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae22e91b5117c723dd02bfcc5e382bdd7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#ae22e91b5117c723dd02bfcc5e382bdd7">CALLERID_SPACE</a>&#160;&#160;&#160;2200.0</td></tr>
<tr class="separator:ae22e91b5117c723dd02bfcc5e382bdd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f2259fb59644af478715f091739ade8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a8f2259fb59644af478715f091739ade8">CAS_FREQ1</a>&#160;&#160;&#160;2130.0</td></tr>
<tr class="separator:a8f2259fb59644af478715f091739ade8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69603be4978e9a144bef1b7e29630008"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a69603be4978e9a144bef1b7e29630008">CAS_FREQ2</a>&#160;&#160;&#160;2750.0</td></tr>
<tr class="separator:a69603be4978e9a144bef1b7e29630008"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17433d3c64fa04166b2585cad952a436"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a17433d3c64fa04166b2585cad952a436">SAS_FREQ</a>&#160;&#160;&#160;440.0</td></tr>
<tr class="separator:a17433d3c64fa04166b2585cad952a436"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4fb7270b684193a01d9b1be69ac3aef0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a4fb7270b684193a01d9b1be69ac3aef0">__ast_callerid_generate</a> (unsigned char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d6/d49/structnumber.html">number</a>, int <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a>, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *codec)</td></tr>
<tr class="separator:a4fb7270b684193a01d9b1be69ac3aef0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76330ca7b08802701f95f22080fe9780"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a76330ca7b08802701f95f22080fe9780">ast_callerid_callwaiting_generate</a> (unsigned char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d6/d49/structnumber.html">number</a>, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *codec)</td></tr>
<tr class="memdesc:a76330ca7b08802701f95f22080fe9780"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate Caller-ID spill but in a format suitable for Call Waiting(tm)'s Caller*ID(tm)  <a href="#a76330ca7b08802701f95f22080fe9780">More...</a><br /></td></tr>
<tr class="separator:a76330ca7b08802701f95f22080fe9780"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4e407d014f5dd9539fc91380db59c39"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#af4e407d014f5dd9539fc91380db59c39">ast_callerid_generate</a> (unsigned char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d6/d49/structnumber.html">number</a>, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *codec)</td></tr>
<tr class="memdesc:af4e407d014f5dd9539fc91380db59c39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate Caller-ID spill from the "callerid" field of asterisk (in e-mail address like format)  <a href="#af4e407d014f5dd9539fc91380db59c39">More...</a><br /></td></tr>
<tr class="separator:af4e407d014f5dd9539fc91380db59c39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c25633b1ed63682c95ec613d7cbe559"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a1c25633b1ed63682c95ec613d7cbe559">ast_callerid_merge</a> (char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, int bufsiz, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *num, const char *<a class="el" href="../../d6/d62/test__core__codec_8c.html#a9dec7356daac94621e9f62538be37b57">unknown</a>)</td></tr>
<tr class="separator:a1c25633b1ed63682c95ec613d7cbe559"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1847b9c31fdcc2754d6b43dc62abbfe7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a1847b9c31fdcc2754d6b43dc62abbfe7">ast_callerid_parse</a> (char *input_str, char **<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, char **location)</td></tr>
<tr class="memdesc:a1847b9c31fdcc2754d6b43dc62abbfe7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructively parse inbuf into name and location (or number)  <a href="#a1847b9c31fdcc2754d6b43dc62abbfe7">More...</a><br /></td></tr>
<tr class="separator:a1847b9c31fdcc2754d6b43dc62abbfe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae198fa9405854429974768ad54edd05d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#ae198fa9405854429974768ad54edd05d">ast_callerid_split</a> (const char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, int namelen, char *num, int numlen)</td></tr>
<tr class="separator:ae198fa9405854429974768ad54edd05d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a378fe87e535212d6a6bf16498d7ed980"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a378fe87e535212d6a6bf16498d7ed980">ast_callerid_vmwi_generate</a> (unsigned char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, int active, int <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *codec, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d6/d49/structnumber.html">number</a>, int flags)</td></tr>
<tr class="memdesc:a378fe87e535212d6a6bf16498d7ed980"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate message waiting indicator.  <a href="#a378fe87e535212d6a6bf16498d7ed980">More...</a><br /></td></tr>
<tr class="separator:a378fe87e535212d6a6bf16498d7ed980"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb35b71627f5691d50b2fed71a5503d8"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#adb35b71627f5691d50b2fed71a5503d8">ast_connected_line_source_describe</a> (int data)</td></tr>
<tr class="memdesc:adb35b71627f5691d50b2fed71a5503d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert connected line update source value to explanatory string.  <a href="#adb35b71627f5691d50b2fed71a5503d8">More...</a><br /></td></tr>
<tr class="separator:adb35b71627f5691d50b2fed71a5503d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d116c380853cb8aa6d9717c92038de8"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a5d116c380853cb8aa6d9717c92038de8">ast_connected_line_source_name</a> (int data)</td></tr>
<tr class="memdesc:a5d116c380853cb8aa6d9717c92038de8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert connected line update source value to text code.  <a href="#a5d116c380853cb8aa6d9717c92038de8">More...</a><br /></td></tr>
<tr class="separator:a5d116c380853cb8aa6d9717c92038de8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc8489de4c82b23d152dfab8b1f54cbc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#adc8489de4c82b23d152dfab8b1f54cbc">ast_connected_line_source_parse</a> (const char *data)</td></tr>
<tr class="memdesc:adc8489de4c82b23d152dfab8b1f54cbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert connected line update source text code to value (used in config file parsing)  <a href="#adc8489de4c82b23d152dfab8b1f54cbc">More...</a><br /></td></tr>
<tr class="separator:adc8489de4c82b23d152dfab8b1f54cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b8a5c3b5ed37a9e1396ddef68ac7846"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a4b8a5c3b5ed37a9e1396ddef68ac7846">ast_describe_caller_presentation</a> (int data)</td></tr>
<tr class="memdesc:a4b8a5c3b5ed37a9e1396ddef68ac7846"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert caller ID pres value to explanatory string.  <a href="#a4b8a5c3b5ed37a9e1396ddef68ac7846">More...</a><br /></td></tr>
<tr class="separator:a4b8a5c3b5ed37a9e1396ddef68ac7846"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a595062b8e4878f2fd871b3f7a98c3c76"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a595062b8e4878f2fd871b3f7a98c3c76">ast_gen_cas</a> (unsigned char *outbuf, int sendsas, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *codec)</td></tr>
<tr class="memdesc:a595062b8e4878f2fd871b3f7a98c3c76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a CAS (CPE Alert Signal) tone for 'n' samples.  <a href="#a595062b8e4878f2fd871b3f7a98c3c76">More...</a><br /></td></tr>
<tr class="separator:a595062b8e4878f2fd871b3f7a98c3c76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9c1fe6ac3c381fd57719a1a19182225"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#ae9c1fe6ac3c381fd57719a1a19182225">ast_is_shrinkable_phonenumber</a> (const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>)</td></tr>
<tr class="memdesc:ae9c1fe6ac3c381fd57719a1a19182225"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a string consists only of digits and + # ( ) - . (meaning it can be cleaned with ast_shrink_phone_number)  <a href="#ae9c1fe6ac3c381fd57719a1a19182225">More...</a><br /></td></tr>
<tr class="separator:ae9c1fe6ac3c381fd57719a1a19182225"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aadfef3ff9c0b25b909909dadc92a90"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a6aadfef3ff9c0b25b909909dadc92a90">ast_is_valid_string</a> (const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, const char *valid)</td></tr>
<tr class="memdesc:a6aadfef3ff9c0b25b909909dadc92a90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if phone number consists of valid characters.  <a href="#a6aadfef3ff9c0b25b909909dadc92a90">More...</a><br /></td></tr>
<tr class="separator:a6aadfef3ff9c0b25b909909dadc92a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbaf2d96bf4d17406d600876364c1133"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#abbaf2d96bf4d17406d600876364c1133">ast_isphonenumber</a> (const char *n)</td></tr>
<tr class="memdesc:abbaf2d96bf4d17406d600876364c1133"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a string consists only of digits and + #.  <a href="#abbaf2d96bf4d17406d600876364c1133">More...</a><br /></td></tr>
<tr class="separator:abbaf2d96bf4d17406d600876364c1133"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1391d3fb87904ae33a70839451ca6bb"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#ac1391d3fb87904ae33a70839451ca6bb">ast_named_caller_presentation</a> (int data)</td></tr>
<tr class="memdesc:ac1391d3fb87904ae33a70839451ca6bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert caller ID pres value to text code.  <a href="#ac1391d3fb87904ae33a70839451ca6bb">More...</a><br /></td></tr>
<tr class="separator:ac1391d3fb87904ae33a70839451ca6bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13d412653c31f84508b594005292a52c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a13d412653c31f84508b594005292a52c">ast_parse_caller_presentation</a> (const char *data)</td></tr>
<tr class="memdesc:a13d412653c31f84508b594005292a52c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert caller ID text code to value (used in config file parsing)  <a href="#a13d412653c31f84508b594005292a52c">More...</a><br /></td></tr>
<tr class="separator:a13d412653c31f84508b594005292a52c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04986cfbe1c7a7c796967190ba507c7a"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a04986cfbe1c7a7c796967190ba507c7a">ast_party_name_charset_describe</a> (int data)</td></tr>
<tr class="memdesc:a04986cfbe1c7a7c796967190ba507c7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert <a class="el" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b" title="Character set the name is using. ">ast_party_name.char_set</a> value to explanatory string.  <a href="#a04986cfbe1c7a7c796967190ba507c7a">More...</a><br /></td></tr>
<tr class="separator:a04986cfbe1c7a7c796967190ba507c7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5466a8da400155a64ab9e410ed7aa4f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#ab5466a8da400155a64ab9e410ed7aa4f">ast_party_name_charset_parse</a> (const char *data)</td></tr>
<tr class="memdesc:ab5466a8da400155a64ab9e410ed7aa4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert <a class="el" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b" title="Character set the name is using. ">ast_party_name.char_set</a> text code to value (used in config file parsing)  <a href="#ab5466a8da400155a64ab9e410ed7aa4f">More...</a><br /></td></tr>
<tr class="separator:ab5466a8da400155a64ab9e410ed7aa4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17f169b0149b953868047bef1dcffd28"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a17f169b0149b953868047bef1dcffd28">ast_party_name_charset_str</a> (int data)</td></tr>
<tr class="memdesc:a17f169b0149b953868047bef1dcffd28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert <a class="el" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b" title="Character set the name is using. ">ast_party_name.char_set</a> value to text code.  <a href="#a17f169b0149b953868047bef1dcffd28">More...</a><br /></td></tr>
<tr class="separator:a17f169b0149b953868047bef1dcffd28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a014cb205261d7e13f35a41657f38e33f"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a014cb205261d7e13f35a41657f38e33f">ast_redirecting_reason_describe</a> (int data)</td></tr>
<tr class="memdesc:a014cb205261d7e13f35a41657f38e33f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert redirecting reason value to explanatory string.  <a href="#a014cb205261d7e13f35a41657f38e33f">More...</a><br /></td></tr>
<tr class="separator:a014cb205261d7e13f35a41657f38e33f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43ec98d69a580c6db3fdf214a36b9dd3"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a43ec98d69a580c6db3fdf214a36b9dd3">ast_redirecting_reason_name</a> (const struct <a class="el" href="../../d1/dee/structast__party__redirecting__reason.html">ast_party_redirecting_reason</a> *data)</td></tr>
<tr class="memdesc:a43ec98d69a580c6db3fdf214a36b9dd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert redirecting reason value to text code.  <a href="#a43ec98d69a580c6db3fdf214a36b9dd3">More...</a><br /></td></tr>
<tr class="separator:a43ec98d69a580c6db3fdf214a36b9dd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb5eeae1a2076a16e7727368d0d95e17"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#acb5eeae1a2076a16e7727368d0d95e17">ast_redirecting_reason_parse</a> (const char *data)</td></tr>
<tr class="memdesc:acb5eeae1a2076a16e7727368d0d95e17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert redirecting reason text code to value (used in config file parsing)  <a href="#acb5eeae1a2076a16e7727368d0d95e17">More...</a><br /></td></tr>
<tr class="separator:acb5eeae1a2076a16e7727368d0d95e17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a61669b28d0f994e44db5e3baab6ef2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a6a61669b28d0f994e44db5e3baab6ef2">ast_shrink_phone_number</a> (char *n)</td></tr>
<tr class="memdesc:a6a61669b28d0f994e44db5e3baab6ef2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean up phone string.  <a href="#a6a61669b28d0f994e44db5e3baab6ef2">More...</a><br /></td></tr>
<tr class="separator:a6a61669b28d0f994e44db5e3baab6ef2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3faa215563ac24dec8ae8906dabafd3e"><td class="memItemLeft" align="right" valign="top">static unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a3faa215563ac24dec8ae8906dabafd3e">calc_crc</a> (unsigned short crc, unsigned char data)</td></tr>
<tr class="separator:a3faa215563ac24dec8ae8906dabafd3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad21a4437ceda04b65d3572989d3c802"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#aad21a4437ceda04b65d3572989d3c802">callerid_feed</a> (struct <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a> *cid, unsigned char *ubuf, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *codec)</td></tr>
<tr class="memdesc:aad21a4437ceda04b65d3572989d3c802"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read samples into the state machine.  <a href="#aad21a4437ceda04b65d3572989d3c802">More...</a><br /></td></tr>
<tr class="separator:aad21a4437ceda04b65d3572989d3c802"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cb6f2d6ff8bf52dd46583ecddd78359"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a5cb6f2d6ff8bf52dd46583ecddd78359">callerid_feed_jp</a> (struct <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a> *cid, unsigned char *ubuf, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *codec)</td></tr>
<tr class="memdesc:a5cb6f2d6ff8bf52dd46583ecddd78359"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read samples into the state machine.  <a href="#a5cb6f2d6ff8bf52dd46583ecddd78359">More...</a><br /></td></tr>
<tr class="separator:a5cb6f2d6ff8bf52dd46583ecddd78359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d792e593d99c8b5b3a5534e73082c9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a4d792e593d99c8b5b3a5534e73082c9d">callerid_free</a> (struct <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a> *cid)</td></tr>
<tr class="memdesc:a4d792e593d99c8b5b3a5534e73082c9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function frees <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a> cid.  <a href="#a4d792e593d99c8b5b3a5534e73082c9d">More...</a><br /></td></tr>
<tr class="separator:a4d792e593d99c8b5b3a5534e73082c9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a467dcb1b5a2d65636d9281dbe3df6fdb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a467dcb1b5a2d65636d9281dbe3df6fdb">callerid_generate</a> (unsigned char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, const char *<a class="el" href="../../d6/d49/structnumber.html">number</a>, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, int flags, int <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a>, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *codec)</td></tr>
<tr class="memdesc:a467dcb1b5a2d65636d9281dbe3df6fdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a CallerID FSK stream in ulaw format suitable for transmission.  <a href="#a467dcb1b5a2d65636d9281dbe3df6fdb">More...</a><br /></td></tr>
<tr class="separator:a467dcb1b5a2d65636d9281dbe3df6fdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a315d5278c97c5c96bfe89c6d0e24fd42"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a315d5278c97c5c96bfe89c6d0e24fd42">callerid_genmsg</a> (char *msg, int size, const char *<a class="el" href="../../d6/d49/structnumber.html">number</a>, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, int flags)</td></tr>
<tr class="separator:a315d5278c97c5c96bfe89c6d0e24fd42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afed6bec2ec821870918daf8f6d7ea832"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#afed6bec2ec821870918daf8f6d7ea832">callerid_get</a> (struct <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a> *cid, char **<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, char **<a class="el" href="../../d6/d49/structnumber.html">number</a>, int *flags)</td></tr>
<tr class="memdesc:afed6bec2ec821870918daf8f6d7ea832"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract info out of callerID state machine. Flags are listed above.  <a href="#afed6bec2ec821870918daf8f6d7ea832">More...</a><br /></td></tr>
<tr class="separator:afed6bec2ec821870918daf8f6d7ea832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5fe1d08c3e1f692c09923587e1cce70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#ab5fe1d08c3e1f692c09923587e1cce70">callerid_get_dtmf</a> (char *cidstring, char *<a class="el" href="../../d6/d49/structnumber.html">number</a>, int *flags)</td></tr>
<tr class="memdesc:ab5fe1d08c3e1f692c09923587e1cce70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get and parse DTMF-based callerid.  <a href="#ab5fe1d08c3e1f692c09923587e1cce70">More...</a><br /></td></tr>
<tr class="separator:ab5fe1d08c3e1f692c09923587e1cce70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c1767ffd4ca30651bcc241c16d1f071"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a9c1767ffd4ca30651bcc241c16d1f071">callerid_init</a> (void)</td></tr>
<tr class="memdesc:a9c1767ffd4ca30651bcc241c16d1f071"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize stuff for inverse FFT.  <a href="#a9c1767ffd4ca30651bcc241c16d1f071">More...</a><br /></td></tr>
<tr class="separator:a9c1767ffd4ca30651bcc241c16d1f071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae48529c2f2ea547ec29a2451b8fef8a2"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#ae48529c2f2ea547ec29a2451b8fef8a2">callerid_new</a> (int cid_signalling)</td></tr>
<tr class="memdesc:ae48529c2f2ea547ec29a2451b8fef8a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a callerID state machine.  <a href="#ae48529c2f2ea547ec29a2451b8fef8a2">More...</a><br /></td></tr>
<tr class="separator:ae48529c2f2ea547ec29a2451b8fef8a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a67c225a2440869e0b40486d23f46d7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a5a67c225a2440869e0b40486d23f46d7">gen_tone</a> (unsigned char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *codec, float ddr1, float ddi1, float *cr1, float *ci1)</td></tr>
<tr class="separator:a5a67c225a2440869e0b40486d23f46d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e5cfdc91ca9e318b128a1dd68c9c1d5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a7e5cfdc91ca9e318b128a1dd68c9c1d5">gen_tones</a> (unsigned char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *codec, float ddr1, float ddi1, float ddr2, float ddi2, float *cr1, float *ci1, float *cr2, float *ci2)</td></tr>
<tr class="separator:a7e5cfdc91ca9e318b128a1dd68c9c1d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a1fc9110f09a12aef8ba8a94479dc03c3"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a1fc9110f09a12aef8ba8a94479dc03c3">casdi1</a></td></tr>
<tr class="separator:a1fc9110f09a12aef8ba8a94479dc03c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4647d3812e6efba4e068f86b2ab2574"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#ac4647d3812e6efba4e068f86b2ab2574">casdi2</a></td></tr>
<tr class="separator:ac4647d3812e6efba4e068f86b2ab2574"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acffc1e68a433ac6fd82d29d859805971"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#acffc1e68a433ac6fd82d29d859805971">casdr1</a></td></tr>
<tr class="separator:acffc1e68a433ac6fd82d29d859805971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb906a5386153c9b5cb1d078fb033443"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#acb906a5386153c9b5cb1d078fb033443">casdr2</a></td></tr>
<tr class="separator:acb906a5386153c9b5cb1d078fb033443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae28e7a746ab99a470a022ff2eba08a88"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#ae28e7a746ab99a470a022ff2eba08a88">cid_di</a> [4]</td></tr>
<tr class="separator:ae28e7a746ab99a470a022ff2eba08a88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a271c1c132faed1b658e2fba40c41b868"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a271c1c132faed1b658e2fba40c41b868">cid_dr</a> [4]</td></tr>
<tr class="separator:a271c1c132faed1b658e2fba40c41b868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af30a3f664009e7371f3dca3231f9fd8d"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#af30a3f664009e7371f3dca3231f9fd8d">clidsb</a> = 8000.0 / 1200.0</td></tr>
<tr class="separator:af30a3f664009e7371f3dca3231f9fd8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d68c9a4e83475478bcb1a12bc2ce416"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d3/dbc/structast__value__translation.html">ast_value_translation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a0d68c9a4e83475478bcb1a12bc2ce416">connected_line_source_types</a> []</td></tr>
<tr class="memdesc:a0d68c9a4e83475478bcb1a12bc2ce416"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translation table for connected line update source settings.  <a href="#a0d68c9a4e83475478bcb1a12bc2ce416">More...</a><br /></td></tr>
<tr class="separator:a0d68c9a4e83475478bcb1a12bc2ce416"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a225715f5e0e7e1627ba853fb7af1c50e"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d3/dbc/structast__value__translation.html">ast_value_translation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a225715f5e0e7e1627ba853fb7af1c50e">party_name_charset_tbl</a> []</td></tr>
<tr class="memdesc:a225715f5e0e7e1627ba853fb7af1c50e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translation table for <a class="el" href="../../d8/d6f/structast__party__name.html" title="Information needed to specify a name in a call. ">ast_party_name</a> char-set settings.  <a href="#a225715f5e0e7e1627ba853fb7af1c50e">More...</a><br /></td></tr>
<tr class="separator:a225715f5e0e7e1627ba853fb7af1c50e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb60f093090a78a6ae7027b408099acf"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d3/dbc/structast__value__translation.html">ast_value_translation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#adb60f093090a78a6ae7027b408099acf">pres_types</a> []</td></tr>
<tr class="memdesc:adb60f093090a78a6ae7027b408099acf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translation table for Caller ID Presentation settings.  <a href="#adb60f093090a78a6ae7027b408099acf">More...</a><br /></td></tr>
<tr class="separator:adb60f093090a78a6ae7027b408099acf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40bf393e22e6436775e8d2c8e9aa7d96"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d3/dbc/structast__value__translation.html">ast_value_translation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a40bf393e22e6436775e8d2c8e9aa7d96">redirecting_reason_types</a> []</td></tr>
<tr class="memdesc:a40bf393e22e6436775e8d2c8e9aa7d96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translation table for redirecting reason settings.  <a href="#a40bf393e22e6436775e8d2c8e9aa7d96">More...</a><br /></td></tr>
<tr class="separator:a40bf393e22e6436775e8d2c8e9aa7d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae81f6b006f99cb8e2a8dca1b21eda4be"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#ae81f6b006f99cb8e2a8dca1b21eda4be">sasdi</a></td></tr>
<tr class="separator:ae81f6b006f99cb8e2a8dca1b21eda4be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37d6e99cad72f8884d9c575ac45badb9"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dd5/callerid_8c.html#a37d6e99cad72f8884d9c575ac45badb9">sasdr</a></td></tr>
<tr class="separator:a37d6e99cad72f8884d9c575ac45badb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>CallerID Generation support. </p>
<dl class="section author"><dt>Author</dt><dd>Mark Spencer <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ks'+'ter'+'@d'+'igi'+'um'+'.co'+'m'; return false;">marks<span style="display: none;">.nosp@m.</span>ter@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af0451163d41eba078d01949d368cae8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0451163d41eba078d01949d368cae8f">&#9670;&nbsp;</a></span>AST_CALLERID_UNKNOWN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_CALLERID_UNKNOWN&#160;&#160;&#160;&quot;&lt;unknown&gt;&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00075">75</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

</div>
</div>
<a id="aa77a53334827b801fa3f5865c26ab6e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa77a53334827b801fa3f5865c26ab6e0">&#9670;&nbsp;</a></span>CALLERID_MARK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CALLERID_MARK&#160;&#160;&#160;1200.0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>1200 hz for "1" </p>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00070">70</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00115">callerid_init()</a>.</p>

</div>
</div>
<a id="ae22e91b5117c723dd02bfcc5e382bdd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae22e91b5117c723dd02bfcc5e382bdd7">&#9670;&nbsp;</a></span>CALLERID_SPACE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CALLERID_SPACE&#160;&#160;&#160;2200.0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>2200 hz for "0" </p>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00069">69</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00115">callerid_init()</a>.</p>

</div>
</div>
<a id="a8f2259fb59644af478715f091739ade8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f2259fb59644af478715f091739ade8">&#9670;&nbsp;</a></span>CAS_FREQ1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CAS_FREQ1&#160;&#160;&#160;2130.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00072">72</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00115">callerid_init()</a>.</p>

</div>
</div>
<a id="a69603be4978e9a144bef1b7e29630008"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69603be4978e9a144bef1b7e29630008">&#9670;&nbsp;</a></span>CAS_FREQ2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CAS_FREQ2&#160;&#160;&#160;2750.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00073">73</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00115">callerid_init()</a>.</p>

</div>
</div>
<a id="a17433d3c64fa04166b2585cad952a436"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17433d3c64fa04166b2585cad952a436">&#9670;&nbsp;</a></span>SAS_FREQ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SAS_FREQ&#160;&#160;&#160;440.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00071">71</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00115">callerid_init()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4fb7270b684193a01d9b1be69ac3aef0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb7270b684193a01d9b1be69ac3aef0">&#9670;&nbsp;</a></span>__ast_callerid_generate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __ast_callerid_generate </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>callwaiting</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>codec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01054">1054</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00898">callerid_generate()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01068">ast_callerid_callwaiting_generate()</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01063">ast_callerid_generate()</a>.</p>
<div class="fragment"><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;{</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>))</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d6/d49/structnumber.html">number</a>))</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      <a class="code" href="../../d6/d49/structnumber.html">number</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#a467dcb1b5a2d65636d9281dbe3df6fdb">callerid_generate</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d6/d49/structnumber.html">number</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, 0, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a>, codec);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;}</div><div class="ttc" id="callerid_8c_html_a467dcb1b5a2d65636d9281dbe3df6fdb"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a467dcb1b5a2d65636d9281dbe3df6fdb">callerid_generate</a></div><div class="ttdeci">int callerid_generate(unsigned char *buf, const char *number, const char *name, int flags, int callwaiting, struct ast_format *codec)</div><div class="ttdoc">Generates a CallerID FSK stream in ulaw format suitable for transmission. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00898">callerid.c:898</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a50ea1ecd6da04bb18650fe24943d23d1"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a></div><div class="ttdeci">static int callwaiting</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00185">chan_mgcp.c:185</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76330ca7b08802701f95f22080fe9780"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76330ca7b08802701f95f22080fe9780">&#9670;&nbsp;</a></span>ast_callerid_callwaiting_generate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_callerid_callwaiting_generate </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>codec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate Caller-ID spill but in a format suitable for Call Waiting(tm)'s Caller*ID(tm) </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../de/d47/callerid_8h.html#af4e407d014f5dd9539fc91380db59c39" title="Generate Caller-ID spill from the &quot;callerid&quot; field of asterisk (in e-mail address like format) ...">ast_callerid_generate()</a> for other details </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01068">1068</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01054">__ast_callerid_generate()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l01547">my_send_callerid()</a>, and <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l05017">send_cwcidspill()</a>.</p>
<div class="fragment"><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;{</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#a4fb7270b684193a01d9b1be69ac3aef0">__ast_callerid_generate</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d6/d49/structnumber.html">number</a>, 1, codec);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="callerid_8c_html_a4fb7270b684193a01d9b1be69ac3aef0"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a4fb7270b684193a01d9b1be69ac3aef0">__ast_callerid_generate</a></div><div class="ttdeci">static int __ast_callerid_generate(unsigned char *buf, const char *name, const char *number, int callwaiting, struct ast_format *codec)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01054">callerid.c:1054</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af4e407d014f5dd9539fc91380db59c39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4e407d014f5dd9539fc91380db59c39">&#9670;&nbsp;</a></span>ast_callerid_generate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_callerid_generate </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>codec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate Caller-ID spill from the "callerid" field of asterisk (in e-mail address like format) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>buffer for output samples. See <a class="el" href="../../de/d47/callerid_8h.html#a467dcb1b5a2d65636d9281dbe3df6fdb" title="Generates a CallerID FSK stream in ulaw format suitable for transmission. ">callerid_generate()</a> for details regarding buffer. </td></tr>
    <tr><td class="paramname">name</td><td>Caller-ID Name </td></tr>
    <tr><td class="paramname">number</td><td>Caller-ID Number </td></tr>
    <tr><td class="paramname">codec</td><td>Asterisk codec (either AST_FORMAT_ALAW or AST_FORMAT_ULAW)</td></tr>
  </table>
  </dd>
</dl>
<p>Acts like callerid_generate except uses an asterisk format callerid string. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01063">1063</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01054">__ast_callerid_generate()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l01547">my_send_callerid()</a>.</p>
<div class="fragment"><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;{</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#a4fb7270b684193a01d9b1be69ac3aef0">__ast_callerid_generate</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d6/d49/structnumber.html">number</a>, 0, codec);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="callerid_8c_html_a4fb7270b684193a01d9b1be69ac3aef0"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a4fb7270b684193a01d9b1be69ac3aef0">__ast_callerid_generate</a></div><div class="ttdeci">static int __ast_callerid_generate(unsigned char *buf, const char *name, const char *number, int callwaiting, struct ast_format *codec)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01054">callerid.c:1054</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1c25633b1ed63682c95ec613d7cbe559"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c25633b1ed63682c95ec613d7cbe559">&#9670;&nbsp;</a></span>ast_callerid_merge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_callerid_merge </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufsiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>unknown</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01073">1073</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00635">ast_escape_quoted()</a>, and <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21181">_sip_show_peer()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04443">_skinny_show_line()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00623">caller_id_to_str()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l01287">cdr_object_create_public_records()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03243">cdr_object_format_property()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04055">cli_show_channel()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04384">cli_show_subscriptions_detail()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l03815">handle_cli_iax2_show_peer()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00933">launch_monitor_thread()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01912">leave_voicemail()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01002">prep_email_sub_vars()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21509">sip_show_user()</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01820">sip_subscription_to_ami()</a>.</p>
<div class="fragment"><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;{</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d62/test__core__codec_8c.html#a9dec7356daac94621e9f62538be37b57">unknown</a>)</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <a class="code" href="../../d6/d62/test__core__codec_8c.html#a9dec7356daac94621e9f62538be37b57">unknown</a> = <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> &amp;&amp; num) {</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <span class="keywordtype">char</span> name_buf[128];</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a4b31ed81ab98c5aa5fc1d298874abf54">ast_escape_quoted</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, name_buf, <span class="keyword">sizeof</span>(name_buf));</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      snprintf(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, bufsiz, <span class="stringliteral">&quot;\&quot;%s\&quot; &lt;%s&gt;&quot;</span>, name_buf, num);</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) {</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, bufsiz);</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (num) {</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, num, bufsiz);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d6/d62/test__core__codec_8c.html#a9dec7356daac94621e9f62538be37b57">unknown</a>, bufsiz);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;   }</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="utils_8h_html_a4b31ed81ab98c5aa5fc1d298874abf54"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4b31ed81ab98c5aa5fc1d298874abf54">ast_escape_quoted</a></div><div class="ttdeci">char * ast_escape_quoted(const char *string, char *outbuf, int buflen)</div><div class="ttdoc">Escape characters found in a quoted string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00635">main/utils.c:635</a></div></div>
<div class="ttc" id="test__core__codec_8c_html_a9dec7356daac94621e9f62538be37b57"><div class="ttname"><a href="../../d6/d62/test__core__codec_8c.html#a9dec7356daac94621e9f62538be37b57">unknown</a></div><div class="ttdeci">static struct ast_codec unknown</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d62/test__core__codec_8c_source.html#l00058">test_core_codec.c:58</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1847b9c31fdcc2754d6b43dc62abbfe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1847b9c31fdcc2754d6b43dc62abbfe7">&#9670;&nbsp;</a></span>ast_callerid_parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_callerid_parse </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>instr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>location</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructively parse inbuf into name and location (or number) </p>
<p>Parses callerid stream from inbuf and changes into useable form, outputed in name and location. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instr</td><td>buffer of callerid stream (in audio form) to be parsed. Warning, data in buffer is changed. </td></tr>
    <tr><td class="paramname">name</td><td>address of a pointer-to-char for the name value of the stream. </td></tr>
    <tr><td class="paramname">location</td><td>address of a pointer-to-char for the phone number value of the stream. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>XXX 'name' is not parsed consistently e.g. we have input location name " foo bar " &lt;123&gt; 123 ' foo bar ' (with spaces around) " foo bar " NULL 'foo bar' (without spaces around) The parsing of leading and trailing space/quotes should be more consistent. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01008">1008</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00998">ast_isphonenumber()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00947">ast_shrink_phone_number()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00219">ast_strip()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01639">ast_strip_quoted()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00696">ast_unescape_quoted()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l05723">action_originate()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l07542">adsi_message()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l15305">advanced_options()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01063">ari_channels_handle_originate_with_id()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01092">ast_callerid_split()</a>, <a class="el" href="../../da/de0/privacy_8c_source.html#l00046">ast_privacy_check()</a>, <a class="el" href="../../da/de0/privacy_8c_source.html#l00082">ast_privacy_set()</a>, <a class="el" href="../../d0/d16/test__callerid_8c_source.html#l00047">AST_TEST_DEFINE()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03158">handle_setcallerid()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08174">misdn_new()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08716">play_message_callerid()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05922">read_config()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l27879">sip_msg_send()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l05704">unistim_new()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l02021">vm_allocate_dh()</a>.</p>
<div class="fragment"><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;{</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   <span class="keywordtype">char</span> *ls;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;   <span class="keywordtype">char</span> *le;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;   <span class="keywordtype">char</span> *name_start;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;   <span class="keywordtype">char</span> *instr;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   <span class="keywordtype">int</span> quotes_stripped = 0;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;   <span class="comment">/* Handle surrounding quotes */</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;   input_str = <a class="code" href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a>(input_str);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   instr = <a class="code" href="../../d6/d90/strings_8h.html#aeb597bdc9a1209c2e7dd8af04de43485">ast_strip_quoted</a>(input_str, <span class="stringliteral">&quot;\&quot;&quot;</span>, <span class="stringliteral">&quot;\&quot;&quot;</span>);</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   <span class="keywordflow">if</span> (instr != input_str) {</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      quotes_stripped = 1;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;   }</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   <span class="comment">/* Try &quot;name&quot; &lt;location&gt; format or name &lt;location&gt; format or with a missing &gt; */</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;   <span class="keywordflow">if</span> ((ls = strrchr(instr, <span class="charliteral">&#39;&lt;&#39;</span>))) {</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <span class="keywordflow">if</span> ((le = strrchr(ls, <span class="charliteral">&#39;&gt;&#39;</span>))) {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;         *le = <span class="charliteral">&#39;\0&#39;</span>; <span class="comment">/* location found, trim off the brackets */</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      }</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      *ls = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      *location = ls + 1;  <span class="comment">/* and this is the result */</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      name_start = <a class="code" href="../../d6/d90/strings_8h.html#aeb597bdc9a1209c2e7dd8af04de43485">ast_strip_quoted</a>(instr, <span class="stringliteral">&quot;\&quot;&quot;</span>, <span class="stringliteral">&quot;\&quot;&quot;</span>);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   } <span class="keywordflow">else</span> { <span class="comment">/* no valid brackets */</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[256];</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmp, instr, <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      <a class="code" href="../../dc/dd5/callerid_8c.html#a6a61669b28d0f994e44db5e3baab6ef2">ast_shrink_phone_number</a>(tmp);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <span class="keywordflow">if</span> (!quotes_stripped &amp;&amp; <a class="code" href="../../dc/dd5/callerid_8c.html#abbaf2d96bf4d17406d600876364c1133">ast_isphonenumber</a>(tmp)) {  <span class="comment">/* Assume it&#39;s just a location */</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;         name_start = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;         strcpy(instr, tmp); <span class="comment">/* safe, because tmp will always be the same size or smaller than instr */</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;         *location = instr;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      } <span class="keywordflow">else</span> { <span class="comment">/* Assume it&#39;s just a name. */</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;         *location = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;         name_start = <a class="code" href="../../d6/d90/strings_8h.html#aeb597bdc9a1209c2e7dd8af04de43485">ast_strip_quoted</a>(instr, <span class="stringliteral">&quot;\&quot;&quot;</span>, <span class="stringliteral">&quot;\&quot;&quot;</span>);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      }</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;   }</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;   <span class="keywordflow">if</span> (name_start) {</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a06a3aadc32e947d3bffa610aa7c74065">ast_unescape_quoted</a>(name_start);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;   }</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;   *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = name_start;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;}</div><div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_aeb597bdc9a1209c2e7dd8af04de43485"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aeb597bdc9a1209c2e7dd8af04de43485">ast_strip_quoted</a></div><div class="ttdeci">char * ast_strip_quoted(char *s, const char *beg_quotes, const char *end_quotes)</div><div class="ttdoc">Strip leading/trailing whitespace and quotes from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01639">main/utils.c:1639</a></div></div>
<div class="ttc" id="utils_8h_html_a06a3aadc32e947d3bffa610aa7c74065"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a06a3aadc32e947d3bffa610aa7c74065">ast_unescape_quoted</a></div><div class="ttdeci">void ast_unescape_quoted(char *quote_str)</div><div class="ttdoc">Unescape quotes in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00696">main/utils.c:696</a></div></div>
<div class="ttc" id="strings_8h_html_ac92713b8d07a45720b2664be70810e55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a></div><div class="ttdeci">char * ast_strip(char *s)</div><div class="ttdoc">Strip leading/trailing whitespace from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00219">strings.h:219</a></div></div>
<div class="ttc" id="callerid_8c_html_a6a61669b28d0f994e44db5e3baab6ef2"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a6a61669b28d0f994e44db5e3baab6ef2">ast_shrink_phone_number</a></div><div class="ttdeci">void ast_shrink_phone_number(char *n)</div><div class="ttdoc">Clean up phone string. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00947">callerid.c:947</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="callerid_8c_html_abbaf2d96bf4d17406d600876364c1133"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#abbaf2d96bf4d17406d600876364c1133">ast_isphonenumber</a></div><div class="ttdeci">int ast_isphonenumber(const char *n)</div><div class="ttdoc">Check if a string consists only of digits and + #. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00998">callerid.c:998</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae198fa9405854429974768ad54edd05d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae198fa9405854429974768ad54edd05d">&#9670;&nbsp;</a></span>ast_callerid_split()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_callerid_split </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>namelen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01092">1092</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01008">ast_callerid_parse()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00947">ast_shrink_phone_number()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12794">build_peer()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l13119">build_user()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00592">caller_id_handler()</a>, <a class="el" href="../../df/d38/func__callerid_8c_source.html#l00930">callerid_read()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l07770">config_parse_variables()</a>, <a class="el" href="../../d4/d7e/app__disa_8c_source.html#l00146">disa_exec()</a>, <a class="el" href="../../da/dde/chan__phone_8c_source.html#l01378">load_module()</a>, <a class="el" href="../../d9/dd4/pbx__spool_8c_source.html#l00177">parse_line()</a>, <a class="el" href="../../df/d38/func__callerid_8c_source.html#l00844">party_id_write()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l04895">prep_email_sub_vars()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l17900">process_dahdi()</a>, and <a class="el" href="../../d3/d4e/chan__console_8c_source.html#l01305">store_callerid()</a>.</p>
<div class="fragment"><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;{</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   <span class="keywordtype">char</span> *l = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *n = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;   tmp = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>);</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;   <a class="code" href="../../dc/dd5/callerid_8c.html#a1847b9c31fdcc2754d6b43dc62abbfe7">ast_callerid_parse</a>(tmp, &amp;n, &amp;l);</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   <span class="keywordflow">if</span> (n)</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, n, namelen);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;   <span class="keywordflow">if</span> (l) {</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      <a class="code" href="../../dc/dd5/callerid_8c.html#a6a61669b28d0f994e44db5e3baab6ef2">ast_shrink_phone_number</a>(l);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(num, l, numlen);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      num[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="callerid_8c_html_a6a61669b28d0f994e44db5e3baab6ef2"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a6a61669b28d0f994e44db5e3baab6ef2">ast_shrink_phone_number</a></div><div class="ttdeci">void ast_shrink_phone_number(char *n)</div><div class="ttdoc">Clean up phone string. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00947">callerid.c:947</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="callerid_8c_html_a1847b9c31fdcc2754d6b43dc62abbfe7"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a1847b9c31fdcc2754d6b43dc62abbfe7">ast_callerid_parse</a></div><div class="ttdeci">int ast_callerid_parse(char *input_str, char **name, char **location)</div><div class="ttdoc">Destructively parse inbuf into name and location (or number) </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01008">callerid.c:1008</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a378fe87e535212d6a6bf16498d7ed980"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a378fe87e535212d6a6bf16498d7ed980">&#9670;&nbsp;</a></span>ast_callerid_vmwi_generate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_callerid_vmwi_generate </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>active</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>codec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate message waiting indicator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td></td></tr>
    <tr><td class="paramname">active</td><td>The message indicator state &ndash; either 0 no messages in mailbox or 1 messages in mailbox </td></tr>
    <tr><td class="paramname">type</td><td>Format of message (any of CID_MWI_TYPE_*) </td></tr>
    <tr><td class="paramname">codec</td><td></td></tr>
    <tr><td class="paramname">name</td><td></td></tr>
    <tr><td class="paramname">number</td><td></td></tr>
    <tr><td class="paramname">flags</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../de/d47/callerid_8h.html#a467dcb1b5a2d65636d9281dbe3df6fdb" title="Generates a CallerID FSK stream in ulaw format suitable for transmission. ">callerid_generate()</a> for more info as it uses the same <a class="el" href="../../dd/d22/cdr__pgsql_8c.html#abfd0452ce0a5ba319ea4d624dc209250">encoding</a> </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.6.1 changed mdmf parameter to type, added name, number and flags for caller id message generation </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00810">810</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00739">callerid_genmsg()</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00074">CID_MWI_TYPE_MDMF</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00076">CID_MWI_TYPE_MDMF_FULL</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00057">callerid_state::len</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00278">PUT_BYTE</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00304">PUT_CLID</a>, and <a class="el" href="../../de/d47/callerid_8h_source.html#l00289">PUT_CLID_MARKMS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l10883">mwi_send_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;{</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   <span class="keywordtype">char</span> msg[256];</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = 0;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   <span class="keywordtype">int</span> sum;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   <span class="keywordtype">int</span> bytes = 0;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <span class="keywordtype">float</span> cr = 1.0;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;   <span class="keywordtype">float</span> ci = 0.0;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   <span class="keywordtype">float</span> scont = 0.0;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> == <a class="code" href="../../de/d47/callerid_8h.html#aacdaed00a37721d3ab3a861627af9222">CID_MWI_TYPE_MDMF_FULL</a>) {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <span class="comment">/* MDMF Message waiting with date, number, name and MWI parameter */</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      msg[0] = 0x82;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <span class="comment">/* put date, number info at the right place */</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      len = <a class="code" href="../../dc/dd5/callerid_8c.html#a315d5278c97c5c96bfe89c6d0e24fd42">callerid_genmsg</a>(msg+2, <span class="keyword">sizeof</span>(msg)-2, <a class="code" href="../../d6/d49/structnumber.html">number</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, flags);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <span class="comment">/* length of MDMF CLI plus Message Waiting Structure */</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      msg[1] = len+3;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <span class="comment">/* Go to the position to write to */</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      len = len+2;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="comment">/* &quot;Message Waiting Parameter&quot; */</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      msg[len++] = 0x0b;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="comment">/* Length of IE is one */</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      msg[len++] = 1;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      <span class="comment">/* Active or not */</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="keywordflow">if</span> (active)</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;         msg[len++] = 0xff;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;         msg[len++] = 0x00;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> == <a class="code" href="../../de/d47/callerid_8h.html#a540c45fbdf71614d56e99cb84f5a2c00">CID_MWI_TYPE_MDMF</a>) {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="comment">/* MDMF Message waiting only */</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <span class="comment">/* same as above except that the we only put MWI parameter */</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      msg[len++] = 0x82;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <span class="comment">/* Length is 3 */</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      msg[len++] = 3;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      <span class="comment">/* IE is &quot;Message Waiting Parameter&quot; */</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      msg[len++] = 0x0b;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="comment">/* Length of IE is one */</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      msg[len++] = 1;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <span class="comment">/* Active or not */</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <span class="keywordflow">if</span> (active)</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;         msg[len++] = 0xff;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;         msg[len++] = 0x00;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="comment">/* SDMF Message waiting */</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      msg[len++] = 0x6;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <span class="comment">/* Length is 3 */</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      msg[len++] = 3;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="keywordflow">if</span> (active) {</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;         msg[len++] = 0x42;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;         msg[len++] = 0x42;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;         msg[len++] = 0x42;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;         msg[len++] = 0x6f;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;         msg[len++] = 0x6f;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;         msg[len++] = 0x6f;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      }</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   }</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   sum = 0;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>; x++)</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      sum += msg[x];</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;   sum = (256 - (sum &amp; 255));</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   msg[len++] = sum;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;   <span class="comment">/* Wait a half a second */</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; 4000; x++)</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <a class="code" href="../../de/d47/callerid_8h.html#a32e0652e615f27aef195c93a80f756b9">PUT_BYTE</a>(0x7f);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   <span class="comment">/* Transmit 30 0x55&#39;s (looks like a square wave) for channel seizure */</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; 30; x++)</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      <a class="code" href="../../de/d47/callerid_8h.html#a02c7254b3ec648f815c15bd6f8cce39b">PUT_CLID</a>(0x55);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;   <span class="comment">/* Send 170ms of callerid marks */</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; 170; x++)</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <a class="code" href="../../de/d47/callerid_8h.html#a7ce7cf8db165eb44e64e704c3ced9774">PUT_CLID_MARKMS</a>;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>; x++) {</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      <a class="code" href="../../de/d47/callerid_8h.html#a02c7254b3ec648f815c15bd6f8cce39b">PUT_CLID</a>(msg[x]);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;   }</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;   <span class="comment">/* Send 50 more ms of marks */</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; 50; x++)</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <a class="code" href="../../de/d47/callerid_8h.html#a7ce7cf8db165eb44e64e704c3ced9774">PUT_CLID_MARKMS</a>;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   <span class="keywordflow">return</span> bytes;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="callerid_8h_html_aacdaed00a37721d3ab3a861627af9222"><div class="ttname"><a href="../../de/d47/callerid_8h.html#aacdaed00a37721d3ab3a861627af9222">CID_MWI_TYPE_MDMF_FULL</a></div><div class="ttdeci">#define CID_MWI_TYPE_MDMF_FULL</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00076">callerid.h:76</a></div></div>
<div class="ttc" id="callerid_8h_html_a32e0652e615f27aef195c93a80f756b9"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a32e0652e615f27aef195c93a80f756b9">PUT_BYTE</a></div><div class="ttdeci">#define PUT_BYTE(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00278">callerid.h:278</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="callerid_8c_html_a315d5278c97c5c96bfe89c6d0e24fd42"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a315d5278c97c5c96bfe89c6d0e24fd42">callerid_genmsg</a></div><div class="ttdeci">static int callerid_genmsg(char *msg, int size, const char *number, const char *name, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00739">callerid.c:739</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="callerid_8h_html_a02c7254b3ec648f815c15bd6f8cce39b"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a02c7254b3ec648f815c15bd6f8cce39b">PUT_CLID</a></div><div class="ttdeci">#define PUT_CLID(byte)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00304">callerid.h:304</a></div></div>
<div class="ttc" id="callerid_8h_html_a7ce7cf8db165eb44e64e704c3ced9774"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a7ce7cf8db165eb44e64e704c3ced9774">PUT_CLID_MARKMS</a></div><div class="ttdeci">#define PUT_CLID_MARKMS</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00289">callerid.h:289</a></div></div>
<div class="ttc" id="callerid_8h_html_a540c45fbdf71614d56e99cb84f5a2c00"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a540c45fbdf71614d56e99cb84f5a2c00">CID_MWI_TYPE_MDMF</a></div><div class="ttdeci">#define CID_MWI_TYPE_MDMF</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00074">callerid.h:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adb35b71627f5691d50b2fed71a5503d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb35b71627f5691d50b2fed71a5503d8">&#9670;&nbsp;</a></span>ast_connected_line_source_describe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_connected_line_source_describe </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert connected line update source value to explanatory string. </p>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>AST_CONNECTED_LINE_UPDATE_SOURCE from <a class="el" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr...">callerid.h</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string for human presentation </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01292">1292</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01114">ast_value_translation::description</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>
<div class="fragment"><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;{</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#a0d68c9a4e83475478bcb1a12bc2ce416">connected_line_source_types</a>); ++index) {</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/dd5/callerid_8c.html#a0d68c9a4e83475478bcb1a12bc2ce416">connected_line_source_types</a>[index].<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> == data) {</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#a0d68c9a4e83475478bcb1a12bc2ce416">connected_line_source_types</a>[index].<a class="code" href="../../d3/dbc/structast__value__translation.html#a68344fa88cf4e86b5079fd69a5c22d57">description</a>;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      }</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;not-known&quot;</span>;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structast__value__translation_html_a68344fa88cf4e86b5079fd69a5c22d57"><div class="ttname"><a href="../../d3/dbc/structast__value__translation.html#a68344fa88cf4e86b5079fd69a5c22d57">ast_value_translation::description</a></div><div class="ttdeci">const char * description</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01114">callerid.c:1114</a></div></div>
<div class="ttc" id="callerid_8c_html_a0d68c9a4e83475478bcb1a12bc2ce416"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a0d68c9a4e83475478bcb1a12bc2ce416">connected_line_source_types</a></div><div class="ttdeci">static const struct ast_value_translation connected_line_source_types[]</div><div class="ttdoc">Translation table for connected line update source settings. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01268">callerid.c:1268</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d116c380853cb8aa6d9717c92038de8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d116c380853cb8aa6d9717c92038de8">&#9670;&nbsp;</a></span>ast_connected_line_source_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_connected_line_source_name </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert connected line update source value to text code. </p>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>AST_CONNECTED_LINE_UPDATE_SOURCE from <a class="el" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr...">callerid.h</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string for config file </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01305">1305</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01113">ast_value_translation::name</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d38/func__callerid_8c_source.html#l01244">connectedline_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;{</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#a0d68c9a4e83475478bcb1a12bc2ce416">connected_line_source_types</a>); ++index) {</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/dd5/callerid_8c.html#a0d68c9a4e83475478bcb1a12bc2ce416">connected_line_source_types</a>[index].<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> == data) {</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#a0d68c9a4e83475478bcb1a12bc2ce416">connected_line_source_types</a>[index].<a class="code" href="../../d3/dbc/structast__value__translation.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      }</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;   }</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;not-known&quot;</span>;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="callerid_8c_html_a0d68c9a4e83475478bcb1a12bc2ce416"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a0d68c9a4e83475478bcb1a12bc2ce416">connected_line_source_types</a></div><div class="ttdeci">static const struct ast_value_translation connected_line_source_types[]</div><div class="ttdoc">Translation table for connected line update source settings. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01268">callerid.c:1268</a></div></div>
<div class="ttc" id="structast__value__translation_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d3/dbc/structast__value__translation.html#a8f8f80d37794cde9472343e4487ba3eb">ast_value_translation::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01113">callerid.c:1113</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adc8489de4c82b23d152dfab8b1f54cbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc8489de4c82b23d152dfab8b1f54cbc">&#9670;&nbsp;</a></span>ast_connected_line_source_parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_connected_line_source_parse </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert connected line update source text code to value (used in config file parsing) </p>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>text string from config file</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">AST_CONNECTED_LINE_UPDATE_SOURCE</td><td>from <a class="el" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr...">callerid.h</a> </td></tr>
    <tr><td class="paramname">-1</td><td>if not in table </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01279">1279</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00053">callerid_state::name</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01112">ast_value_translation::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d38/func__callerid_8c_source.html#l01308">connectedline_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;{</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#a0d68c9a4e83475478bcb1a12bc2ce416">connected_line_source_types</a>); ++index) {</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../dc/dd5/callerid_8c.html#a0d68c9a4e83475478bcb1a12bc2ce416">connected_line_source_types</a>[index].<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, data)) {</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#a0d68c9a4e83475478bcb1a12bc2ce416">connected_line_source_types</a>[index].<a class="code" href="../../d3/dbc/structast__value__translation.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      }</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   }</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;}</div><div class="ttc" id="structast__value__translation_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d3/dbc/structast__value__translation.html#ac4f474c82e82cbb89ca7c36dd52be0ed">ast_value_translation::value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01112">callerid.c:1112</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="callerid_8c_html_a0d68c9a4e83475478bcb1a12bc2ce416"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a0d68c9a4e83475478bcb1a12bc2ce416">connected_line_source_types</a></div><div class="ttdeci">static const struct ast_value_translation connected_line_source_types[]</div><div class="ttdoc">Translation table for connected line update source settings. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01268">callerid.c:1268</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b8a5c3b5ed37a9e1396ddef68ac7846"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b8a5c3b5ed37a9e1396ddef68ac7846">&#9670;&nbsp;</a></span>ast_describe_caller_presentation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_describe_caller_presentation </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert caller ID pres value to explanatory string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>AST_PRES_ value from <a class="el" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr...">callerid.h</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string for human presentation </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01164">1164</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01114">ast_value_translation::description</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21181">_sip_show_peer()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00784">ast_json_party_id()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00479">channel_callerid()</a>, <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l00640">channel_new_callerid()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00761">json_party_name()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00749">json_party_number()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21509">sip_show_user()</a>.</p>
<div class="fragment"><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;{</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#adb60f093090a78a6ae7027b408099acf">pres_types</a>); ++index) {</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/dd5/callerid_8c.html#adb60f093090a78a6ae7027b408099acf">pres_types</a>[index].<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> == data) {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#adb60f093090a78a6ae7027b408099acf">pres_types</a>[index].<a class="code" href="../../d3/dbc/structast__value__translation.html#a68344fa88cf4e86b5079fd69a5c22d57">description</a>;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      }</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;   }</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;unknown&quot;</span>;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;}</div><div class="ttc" id="callerid_8c_html_adb60f093090a78a6ae7027b408099acf"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#adb60f093090a78a6ae7027b408099acf">pres_types</a></div><div class="ttdeci">static const struct ast_value_translation pres_types[]</div><div class="ttdoc">Translation table for Caller ID Presentation settings. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01118">callerid.c:1118</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structast__value__translation_html_a68344fa88cf4e86b5079fd69a5c22d57"><div class="ttname"><a href="../../d3/dbc/structast__value__translation.html#a68344fa88cf4e86b5079fd69a5c22d57">ast_value_translation::description</a></div><div class="ttdeci">const char * description</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01114">callerid.c:1114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a595062b8e4878f2fd871b3f7a98c3c76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a595062b8e4878f2fd871b3f7a98c3c76">&#9670;&nbsp;</a></span>ast_gen_cas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_gen_cas </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>outbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>codec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a CAS (CPE Alert Signal) tone for 'n' samples. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">outbuf</td><td>Allocated buffer for data. Must be at least 2400 bytes unless no SAS is desired </td></tr>
    <tr><td class="paramname">sas</td><td>Non-zero if CAS should be preceeded by SAS </td></tr>
    <tr><td class="paramname">len</td><td>How many samples to generate. </td></tr>
    <tr><td class="paramname">codec</td><td>Which codec (AST_FORMAT_ALAW or AST_FORMAT_ULAW) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns -1 on error (if len is less than 2400), 0 on success. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00261">261</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00067">casdi1</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00067">casdi2</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00067">casdr1</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00067">casdr2</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00099">gen_tone()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00077">gen_tones()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00050">callerid_state::pos</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00066">sasdi</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00066">sasdr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d27/res__adsi_8c_source.html#l00229">__adsi_transmit_messages()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l05087">dahdi_callwait()</a>, and <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l01513">my_callwait()</a>.</p>
<div class="fragment"><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;{</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   <span class="keywordtype">int</span> pos = 0;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="keywordtype">int</span> saslen = 2400;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   <span class="keywordtype">float</span> cr1 = 1.0;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   <span class="keywordtype">float</span> ci1 = 0.0;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   <span class="keywordtype">float</span> cr2 = 1.0;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <span class="keywordtype">float</span> ci2 = 0.0;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <span class="keywordflow">if</span> (sendsas) {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> &lt; saslen)</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <a class="code" href="../../dc/dd5/callerid_8c.html#a5a67c225a2440869e0b40486d23f46d7">gen_tone</a>(outbuf, saslen, codec, <a class="code" href="../../dc/dd5/callerid_8c.html#a37d6e99cad72f8884d9c575ac45badb9">sasdr</a>, <a class="code" href="../../dc/dd5/callerid_8c.html#ae81f6b006f99cb8e2a8dca1b21eda4be">sasdi</a>, &amp;cr1, &amp;ci1);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> -= saslen;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      pos += saslen;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      cr2 = cr1;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      ci2 = ci1;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   <a class="code" href="../../dc/dd5/callerid_8c.html#a7e5cfdc91ca9e318b128a1dd68c9c1d5">gen_tones</a>(outbuf + pos, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, codec, <a class="code" href="../../dc/dd5/callerid_8c.html#acffc1e68a433ac6fd82d29d859805971">casdr1</a>, <a class="code" href="../../dc/dd5/callerid_8c.html#a1fc9110f09a12aef8ba8a94479dc03c3">casdi1</a>, <a class="code" href="../../dc/dd5/callerid_8c.html#acb906a5386153c9b5cb1d078fb033443">casdr2</a>, <a class="code" href="../../dc/dd5/callerid_8c.html#ac4647d3812e6efba4e068f86b2ab2574">casdi2</a>, &amp;cr1, &amp;ci1, &amp;cr2, &amp;ci2);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div><div class="ttc" id="callerid_8c_html_a7e5cfdc91ca9e318b128a1dd68c9c1d5"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a7e5cfdc91ca9e318b128a1dd68c9c1d5">gen_tones</a></div><div class="ttdeci">static void gen_tones(unsigned char *buf, int len, struct ast_format *codec, float ddr1, float ddi1, float ddr2, float ddi2, float *cr1, float *ci1, float *cr2, float *ci2)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00077">callerid.c:77</a></div></div>
<div class="ttc" id="callerid_8c_html_acffc1e68a433ac6fd82d29d859805971"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#acffc1e68a433ac6fd82d29d859805971">casdr1</a></div><div class="ttdeci">float casdr1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00067">callerid.c:67</a></div></div>
<div class="ttc" id="callerid_8c_html_ae81f6b006f99cb8e2a8dca1b21eda4be"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#ae81f6b006f99cb8e2a8dca1b21eda4be">sasdi</a></div><div class="ttdeci">float sasdi</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00066">callerid.c:66</a></div></div>
<div class="ttc" id="callerid_8c_html_a5a67c225a2440869e0b40486d23f46d7"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a5a67c225a2440869e0b40486d23f46d7">gen_tone</a></div><div class="ttdeci">static void gen_tone(unsigned char *buf, int len, struct ast_format *codec, float ddr1, float ddi1, float *cr1, float *ci1)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00099">callerid.c:99</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="callerid_8c_html_a37d6e99cad72f8884d9c575ac45badb9"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a37d6e99cad72f8884d9c575ac45badb9">sasdr</a></div><div class="ttdeci">float sasdr</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00066">callerid.c:66</a></div></div>
<div class="ttc" id="callerid_8c_html_acb906a5386153c9b5cb1d078fb033443"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#acb906a5386153c9b5cb1d078fb033443">casdr2</a></div><div class="ttdeci">float casdr2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00067">callerid.c:67</a></div></div>
<div class="ttc" id="callerid_8c_html_ac4647d3812e6efba4e068f86b2ab2574"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#ac4647d3812e6efba4e068f86b2ab2574">casdi2</a></div><div class="ttdeci">float casdi2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00067">callerid.c:67</a></div></div>
<div class="ttc" id="callerid_8c_html_a1fc9110f09a12aef8ba8a94479dc03c3"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a1fc9110f09a12aef8ba8a94479dc03c3">casdi1</a></div><div class="ttdeci">float casdi1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00067">callerid.c:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae9c1fe6ac3c381fd57719a1a19182225"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9c1fe6ac3c381fd57719a1a19182225">&#9670;&nbsp;</a></span>ast_is_shrinkable_phonenumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_is_shrinkable_phonenumber </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>exten</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if a string consists only of digits and + # ( ) - . (meaning it can be cleaned with ast_shrink_phone_number) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exten</td><td>The extension (or URI) to be checked. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>if string is valid AST shrinkable phone number </td></tr>
    <tr><td class="paramname">0</td><td>if not </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01003">1003</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00986">ast_is_valid_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01063">ari_channels_handle_originate_with_id()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l19237">check_peer_ok()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l19486">check_user_full()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l18190">get_pai()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l18266">get_rpid()</a>.</p>
<div class="fragment"><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;{</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#a6aadfef3ff9c0b25b909909dadc92a90">ast_is_valid_string</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <span class="stringliteral">&quot;0123456789*#+()-.&quot;</span>);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="callerid_8c_html_a6aadfef3ff9c0b25b909909dadc92a90"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a6aadfef3ff9c0b25b909909dadc92a90">ast_is_valid_string</a></div><div class="ttdeci">static int ast_is_valid_string(const char *exten, const char *valid)</div><div class="ttdoc">Checks if phone number consists of valid characters. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00986">callerid.c:986</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6aadfef3ff9c0b25b909909dadc92a90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6aadfef3ff9c0b25b909909dadc92a90">&#9670;&nbsp;</a></span>ast_is_valid_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_is_valid_string </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>valid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if phone number consists of valid characters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exten</td><td>String that needs to be checked </td></tr>
    <tr><td class="paramname">valid</td><td>Valid characters in string </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>if valid string </td></tr>
    <tr><td class="paramname">0</td><td>if string contains invalid characters </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00986">986</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01003">ast_is_shrinkable_phonenumber()</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00998">ast_isphonenumber()</a>.</p>
<div class="fragment"><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;{</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>))</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   <span class="keywordflow">for</span> (x = 0; <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>[x]; x++)</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <span class="keywordflow">if</span> (!strchr(valid, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>[x]))</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abbaf2d96bf4d17406d600876364c1133"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbaf2d96bf4d17406d600876364c1133">&#9670;&nbsp;</a></span>ast_isphonenumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_isphonenumber </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if a string consists only of digits and + #. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>number to be checked. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if n is a number, 1 if it's not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00998">998</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00986">ast_is_valid_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01008">ast_callerid_parse()</a>, and <a class="el" href="../../d3/d51/chan__mobile_8c_source.html#l02224">hfp_parse_clip()</a>.</p>
<div class="fragment"><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;{</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#a6aadfef3ff9c0b25b909909dadc92a90">ast_is_valid_string</a>(n, <span class="stringliteral">&quot;0123456789*#+&quot;</span>);</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;}</div><div class="ttc" id="callerid_8c_html_a6aadfef3ff9c0b25b909909dadc92a90"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a6aadfef3ff9c0b25b909909dadc92a90">ast_is_valid_string</a></div><div class="ttdeci">static int ast_is_valid_string(const char *exten, const char *valid)</div><div class="ttdoc">Checks if phone number consists of valid characters. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00986">callerid.c:986</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac1391d3fb87904ae33a70839451ca6bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1391d3fb87904ae33a70839451ca6bb">&#9670;&nbsp;</a></span>ast_named_caller_presentation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_named_caller_presentation </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert caller ID pres value to text code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>AST_PRES_ value from <a class="el" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr...">callerid.h</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string for config file </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01182">1182</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01113">ast_value_translation::name</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00658">caller_id_privacy_to_str()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../df/d38/func__callerid_8c_source.html#l00609">party_id_read()</a>, <a class="el" href="../../df/d38/func__callerid_8c_source.html#l00493">party_name_read()</a>, <a class="el" href="../../df/d38/func__callerid_8c_source.html#l00532">party_number_read()</a>, and <a class="el" href="../../df/d38/func__callerid_8c_source.html#l01417">redirecting_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;{</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#adb60f093090a78a6ae7027b408099acf">pres_types</a>); ++index) {</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/dd5/callerid_8c.html#adb60f093090a78a6ae7027b408099acf">pres_types</a>[index].<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> == data) {</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#adb60f093090a78a6ae7027b408099acf">pres_types</a>[index].<a class="code" href="../../d3/dbc/structast__value__translation.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      }</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;   }</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;unknown&quot;</span>;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;}</div><div class="ttc" id="callerid_8c_html_adb60f093090a78a6ae7027b408099acf"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#adb60f093090a78a6ae7027b408099acf">pres_types</a></div><div class="ttdeci">static const struct ast_value_translation pres_types[]</div><div class="ttdoc">Translation table for Caller ID Presentation settings. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01118">callerid.c:1118</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structast__value__translation_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d3/dbc/structast__value__translation.html#a8f8f80d37794cde9472343e4487ba3eb">ast_value_translation::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01113">callerid.c:1113</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a13d412653c31f84508b594005292a52c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13d412653c31f84508b594005292a52c">&#9670;&nbsp;</a></span>ast_parse_caller_presentation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_parse_caller_presentation </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert caller ID text code to value (used in config file parsing) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>text string from config file </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">value</td><td>AST_PRES_ from <a class="el" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr...">callerid.h</a> </td></tr>
    <tr><td class="paramname">-1</td><td>if not in table </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01143">1143</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00053">callerid_state::name</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01112">ast_value_translation::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l31631">build_peer()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00646">caller_id_privacy_handler()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../df/d38/func__callerid_8c_source.html#l00844">party_id_write()</a>, <a class="el" href="../../df/d38/func__callerid_8c_source.html#l00667">party_name_write()</a>, <a class="el" href="../../df/d38/func__callerid_8c_source.html#l00741">party_number_write()</a>, and <a class="el" href="../../df/d38/func__callerid_8c_source.html#l01549">redirecting_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;{</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   <span class="keywordflow">if</span> (!data) {</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;   }</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#adb60f093090a78a6ae7027b408099acf">pres_types</a>); ++index) {</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../dc/dd5/callerid_8c.html#adb60f093090a78a6ae7027b408099acf">pres_types</a>[index].<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, data)) {</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#adb60f093090a78a6ae7027b408099acf">pres_types</a>[index].<a class="code" href="../../d3/dbc/structast__value__translation.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      }</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;   }</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;}</div><div class="ttc" id="structast__value__translation_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d3/dbc/structast__value__translation.html#ac4f474c82e82cbb89ca7c36dd52be0ed">ast_value_translation::value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01112">callerid.c:1112</a></div></div>
<div class="ttc" id="callerid_8c_html_adb60f093090a78a6ae7027b408099acf"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#adb60f093090a78a6ae7027b408099acf">pres_types</a></div><div class="ttdeci">static const struct ast_value_translation pres_types[]</div><div class="ttdoc">Translation table for Caller ID Presentation settings. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01118">callerid.c:1118</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a04986cfbe1c7a7c796967190ba507c7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04986cfbe1c7a7c796967190ba507c7a">&#9670;&nbsp;</a></span>ast_party_name_charset_describe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_party_name_charset_describe </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert <a class="el" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b" title="Character set the name is using. ">ast_party_name.char_set</a> value to explanatory string. </p>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>AST_PARTY_CHAR_SET from <a class="el" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. ">channel.h</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string for human presentation </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01347">1347</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01114">ast_value_translation::description</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d98/json_8c_source.html#l00761">json_party_name()</a>.</p>
<div class="fragment"><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;{</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#a225715f5e0e7e1627ba853fb7af1c50e">party_name_charset_tbl</a>); ++index) {</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/dd5/callerid_8c.html#a225715f5e0e7e1627ba853fb7af1c50e">party_name_charset_tbl</a>[index].<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> == data) {</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#a225715f5e0e7e1627ba853fb7af1c50e">party_name_charset_tbl</a>[index].<a class="code" href="../../d3/dbc/structast__value__translation.html#a68344fa88cf4e86b5079fd69a5c22d57">description</a>;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      }</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;   }</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;not-known&quot;</span>;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structast__value__translation_html_a68344fa88cf4e86b5079fd69a5c22d57"><div class="ttname"><a href="../../d3/dbc/structast__value__translation.html#a68344fa88cf4e86b5079fd69a5c22d57">ast_value_translation::description</a></div><div class="ttdeci">const char * description</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01114">callerid.c:1114</a></div></div>
<div class="ttc" id="callerid_8c_html_a225715f5e0e7e1627ba853fb7af1c50e"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a225715f5e0e7e1627ba853fb7af1c50e">party_name_charset_tbl</a></div><div class="ttdeci">static const struct ast_value_translation party_name_charset_tbl[]</div><div class="ttdoc">Translation table for ast_party_name char-set settings. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01319">callerid.c:1319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5466a8da400155a64ab9e410ed7aa4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5466a8da400155a64ab9e410ed7aa4f">&#9670;&nbsp;</a></span>ast_party_name_charset_parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_party_name_charset_parse </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert <a class="el" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b" title="Character set the name is using. ">ast_party_name.char_set</a> text code to value (used in config file parsing) </p>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>text string from config file</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">AST_PARTY_CHAR_SET</td><td>from <a class="el" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. ">channel.h</a> </td></tr>
    <tr><td class="paramname">-1</td><td>if not in table </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01334">1334</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00053">callerid_state::name</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01112">ast_value_translation::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d38/func__callerid_8c_source.html#l00667">party_name_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;{</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#a225715f5e0e7e1627ba853fb7af1c50e">party_name_charset_tbl</a>); ++index) {</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../dc/dd5/callerid_8c.html#a225715f5e0e7e1627ba853fb7af1c50e">party_name_charset_tbl</a>[index].<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, data)) {</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#a225715f5e0e7e1627ba853fb7af1c50e">party_name_charset_tbl</a>[index].<a class="code" href="../../d3/dbc/structast__value__translation.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      }</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;   }</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;}</div><div class="ttc" id="structast__value__translation_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d3/dbc/structast__value__translation.html#ac4f474c82e82cbb89ca7c36dd52be0ed">ast_value_translation::value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01112">callerid.c:1112</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="callerid_8c_html_a225715f5e0e7e1627ba853fb7af1c50e"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a225715f5e0e7e1627ba853fb7af1c50e">party_name_charset_tbl</a></div><div class="ttdeci">static const struct ast_value_translation party_name_charset_tbl[]</div><div class="ttdoc">Translation table for ast_party_name char-set settings. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01319">callerid.c:1319</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a17f169b0149b953868047bef1dcffd28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17f169b0149b953868047bef1dcffd28">&#9670;&nbsp;</a></span>ast_party_name_charset_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_party_name_charset_str </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert <a class="el" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b" title="Character set the name is using. ">ast_party_name.char_set</a> value to text code. </p>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>AST_PARTY_CHAR_SET from <a class="el" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. ">channel.h</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string for config file </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01360">1360</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01113">ast_value_translation::name</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d38/func__callerid_8c_source.html#l00493">party_name_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;{</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#a225715f5e0e7e1627ba853fb7af1c50e">party_name_charset_tbl</a>); ++index) {</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/dd5/callerid_8c.html#a225715f5e0e7e1627ba853fb7af1c50e">party_name_charset_tbl</a>[index].<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> == data) {</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#a225715f5e0e7e1627ba853fb7af1c50e">party_name_charset_tbl</a>[index].<a class="code" href="../../d3/dbc/structast__value__translation.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      }</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;   }</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;not-known&quot;</span>;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="callerid_8c_html_a225715f5e0e7e1627ba853fb7af1c50e"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a225715f5e0e7e1627ba853fb7af1c50e">party_name_charset_tbl</a></div><div class="ttdeci">static const struct ast_value_translation party_name_charset_tbl[]</div><div class="ttdoc">Translation table for ast_party_name char-set settings. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01319">callerid.c:1319</a></div></div>
<div class="ttc" id="structast__value__translation_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d3/dbc/structast__value__translation.html#a8f8f80d37794cde9472343e4487ba3eb">ast_value_translation::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01113">callerid.c:1113</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a014cb205261d7e13f35a41657f38e33f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a014cb205261d7e13f35a41657f38e33f">&#9670;&nbsp;</a></span>ast_redirecting_reason_describe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_redirecting_reason_describe </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert redirecting reason value to explanatory string. </p>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Q931_REDIRECTING_REASON from <a class="el" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr...">callerid.h</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string for human presentation </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01236">1236</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01114">ast_value_translation::description</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>
<div class="fragment"><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;{</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#a40bf393e22e6436775e8d2c8e9aa7d96">redirecting_reason_types</a>); ++index) {</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/dd5/callerid_8c.html#a40bf393e22e6436775e8d2c8e9aa7d96">redirecting_reason_types</a>[index].<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> == data) {</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#a40bf393e22e6436775e8d2c8e9aa7d96">redirecting_reason_types</a>[index].<a class="code" href="../../d3/dbc/structast__value__translation.html#a68344fa88cf4e86b5079fd69a5c22d57">description</a> ?: <span class="stringliteral">&quot;Redirecting reason alias-bug&quot;</span>;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;      }</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;   }</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;not-known&quot;</span>;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structast__value__translation_html_a68344fa88cf4e86b5079fd69a5c22d57"><div class="ttname"><a href="../../d3/dbc/structast__value__translation.html#a68344fa88cf4e86b5079fd69a5c22d57">ast_value_translation::description</a></div><div class="ttdeci">const char * description</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01114">callerid.c:1114</a></div></div>
<div class="ttc" id="callerid_8c_html_a40bf393e22e6436775e8d2c8e9aa7d96"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a40bf393e22e6436775e8d2c8e9aa7d96">redirecting_reason_types</a></div><div class="ttdeci">static const struct ast_value_translation redirecting_reason_types[]</div><div class="ttdoc">Translation table for redirecting reason settings. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01196">callerid.c:1196</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a43ec98d69a580c6db3fdf214a36b9dd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43ec98d69a580c6db3fdf214a36b9dd3">&#9670;&nbsp;</a></span>ast_redirecting_reason_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_redirecting_reason_name </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d1/dee/structast__party__redirecting__reason.html">ast_party_redirecting_reason</a> *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert redirecting reason value to text code. </p>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td><a class="el" href="../../d1/dee/structast__party__redirecting__reason.html" title="Redirecting reason information. ">ast_party_redirecting_reason</a> structure from <a class="el" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. ">channel.h</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string for config file </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01249">1249</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00511">ast_party_redirecting_reason::code</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01113">ast_value_translation::name</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00508">ast_party_redirecting_reason::str</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d38/func__callerid_8c_source.html#l01417">redirecting_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;{</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>)) {</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      <span class="comment">/* Use this string if it has been set. Otherwise, use the table. */</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      <span class="keywordflow">return</span> data-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;   }</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#a40bf393e22e6436775e8d2c8e9aa7d96">redirecting_reason_types</a>); ++index) {</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/dd5/callerid_8c.html#a40bf393e22e6436775e8d2c8e9aa7d96">redirecting_reason_types</a>[index].<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> == data-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a>) {</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#a40bf393e22e6436775e8d2c8e9aa7d96">redirecting_reason_types</a>[index].<a class="code" href="../../d3/dbc/structast__value__translation.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      }</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   }</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;not-known&quot;</span>;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structast__party__redirecting__reason_html_a45a5b7c00a796a23f01673cef1dbe0a9"><div class="ttname"><a href="../../d1/dee/structast__party__redirecting__reason.html#a45a5b7c00a796a23f01673cef1dbe0a9">ast_party_redirecting_reason::code</a></div><div class="ttdeci">int code</div><div class="ttdoc">enum AST_REDIRECTING_REASON value for redirection </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00511">channel.h:511</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__party__redirecting__reason_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_redirecting_reason::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">a string value for the redirecting reason </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00508">channel.h:508</a></div></div>
<div class="ttc" id="callerid_8c_html_a40bf393e22e6436775e8d2c8e9aa7d96"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a40bf393e22e6436775e8d2c8e9aa7d96">redirecting_reason_types</a></div><div class="ttdeci">static const struct ast_value_translation redirecting_reason_types[]</div><div class="ttdoc">Translation table for redirecting reason settings. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01196">callerid.c:1196</a></div></div>
<div class="ttc" id="structast__value__translation_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d3/dbc/structast__value__translation.html#a8f8f80d37794cde9472343e4487ba3eb">ast_value_translation::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01113">callerid.c:1113</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acb5eeae1a2076a16e7727368d0d95e17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb5eeae1a2076a16e7727368d0d95e17">&#9670;&nbsp;</a></span>ast_redirecting_reason_parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_redirecting_reason_parse </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert redirecting reason text code to value (used in config file parsing) </p>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>text string from config file</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Q931_REDIRECTING_REASON</td><td>from <a class="el" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr...">callerid.h</a> </td></tr>
    <tr><td class="paramname">-1</td><td>if not in table </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01223">1223</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00053">callerid_state::name</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01112">ast_value_translation::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l18394">get_rdnis()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l24006">handle_response_invite()</a>, <a class="el" href="../../df/d38/func__callerid_8c_source.html#l01549">redirecting_write()</a>, and <a class="el" href="../../d5/da9/res__pjsip__diversion_8c_source.html#l00351">set_redirecting_reason()</a>.</p>
<div class="fragment"><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;{</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#a40bf393e22e6436775e8d2c8e9aa7d96">redirecting_reason_types</a>); ++index) {</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../dc/dd5/callerid_8c.html#a40bf393e22e6436775e8d2c8e9aa7d96">redirecting_reason_types</a>[index].<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, data)) {</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/dd5/callerid_8c.html#a40bf393e22e6436775e8d2c8e9aa7d96">redirecting_reason_types</a>[index].<a class="code" href="../../d3/dbc/structast__value__translation.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      }</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;   }</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;}</div><div class="ttc" id="structast__value__translation_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d3/dbc/structast__value__translation.html#ac4f474c82e82cbb89ca7c36dd52be0ed">ast_value_translation::value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01112">callerid.c:1112</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="callerid_8c_html_a40bf393e22e6436775e8d2c8e9aa7d96"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a40bf393e22e6436775e8d2c8e9aa7d96">redirecting_reason_types</a></div><div class="ttdeci">static const struct ast_value_translation redirecting_reason_types[]</div><div class="ttdoc">Translation table for redirecting reason settings. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01196">callerid.c:1196</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a61669b28d0f994e44db5e3baab6ef2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a61669b28d0f994e44db5e3baab6ef2">&#9670;&nbsp;</a></span>ast_shrink_phone_number()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_shrink_phone_number </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clean up phone string. </p>
<p>Shrink a phone number in place to just digits (more accurately it just removes ()'s, .'s, and -'s...</p>
<p>Remove '(', ' ', ')', non-trailing '.', and '-' not in square brackets. Basically, remove anything that could be invalid in a pattern. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00947">947</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d09/sig__analog_8c_source.html#l01711">__analog_ss_thread()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05723">action_originate()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l09512">analog_ss_thread()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01063">ari_channels_handle_originate_with_id()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01008">ast_callerid_parse()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01092">ast_callerid_split()</a>, <a class="el" href="../../da/de0/privacy_8c_source.html#l00046">ast_privacy_check()</a>, <a class="el" href="../../da/de0/privacy_8c_source.html#l00082">ast_privacy_set()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07787">check_access()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l19237">check_peer_ok()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l19486">check_user_full()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l18190">get_pai()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l18266">get_rpid()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03158">handle_setcallerid()</a>, <a class="el" href="../../dd/d9a/pbx__config_8c_source.html#l01674">pbx_load_config()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02075">setup_privacy_args()</a>, and <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00321">write_metadata()</a>.</p>
<div class="fragment"><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;{</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;   <span class="keywordtype">int</span> x, y = 0;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   <span class="keywordtype">int</span> bracketed = 0;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   <span class="keywordflow">for</span> (x = 0; n[x]; x++) {</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="keywordflow">switch</span> (n[x]) {</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;[&#39;</span>:</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;         bracketed++;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;         n[y++] = n[x];</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;]&#39;</span>:</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;         bracketed--;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;         n[y++] = n[x];</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;-&#39;</span>:</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;         <span class="keywordflow">if</span> (bracketed)</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            n[y++] = n[x];</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;.&#39;</span>:</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;         <span class="keywordflow">if</span> (!n[x+1])</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;            n[y++] = n[x];</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;         <span class="comment">/* ignore parenthesis and whitespace */</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;         <span class="keywordflow">if</span> (!strchr(<span class="stringliteral">&quot;( )&quot;</span>, n[x]))</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            n[y++] = n[x];</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      }</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;   }</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;   n[y] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a3faa215563ac24dec8ae8906dabafd3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3faa215563ac24dec8ae8906dabafd3e">&#9670;&nbsp;</a></span>calc_crc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned short calc_crc </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>crc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00283">283</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00060">callerid_state::crc</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00202">org</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00306">callerid_feed_jp()</a>.</p>
<div class="fragment"><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;{</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, j, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ad51e32c16369e570e5b8eeac50679e74">org</a>, dst;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   org = data;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   dst = 0;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; CHAR_BIT; i++) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      org &lt;&lt;= 1;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      dst &gt;&gt;= 1;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <span class="keywordflow">if</span> (org &amp; 0x100)</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;         dst |= 0x80;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   }</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   data = (<span class="keywordtype">unsigned</span> char) dst;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   crc ^= (<span class="keywordtype">unsigned</span> int) data &lt;&lt; (16 - CHAR_BIT);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   <span class="keywordflow">for</span> (j = 0; j &lt; CHAR_BIT; j++) {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keywordflow">if</span> (crc &amp; 0x8000U)</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;         crc = (crc &lt;&lt; 1) ^ 0x1021U ;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;         crc &lt;&lt;= 1 ;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <span class="keywordflow">return</span> crc;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div><div class="ttc" id="pbx__dundi_8c_html_ad51e32c16369e570e5b8eeac50679e74"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ad51e32c16369e570e5b8eeac50679e74">org</a></div><div class="ttdeci">static char org[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00202">pbx_dundi.c:202</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aad21a4437ceda04b65d3572989d3c802"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad21a4437ceda04b65d3572989d3c802">&#9670;&nbsp;</a></span>callerid_feed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int callerid_feed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a> *&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>ubuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>codec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read samples into the state machine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cid</td><td>Which state machine to act upon </td></tr>
    <tr><td class="paramname">ubuf</td><td>containing your samples </td></tr>
    <tr><td class="paramname">samples</td><td>number of samples contained within the buffer. </td></tr>
    <tr><td class="paramname">codec</td><td>which codec (AST_FORMAT_ALAW or AST_FORMAT_ULAW)</td></tr>
  </table>
  </dd>
</dl>
<p>Send received audio to the Caller*ID demodulator. </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>on error </td></tr>
    <tr><td class="paramname">0</td><td>for "needs more samples" </td></tr>
    <tr><td class="paramname">1</td><td>if the CallerID spill reception is complete. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00545">545</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00079">AST_XLAW</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">b</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00056">CID_MSGWAITING</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00057">CID_NOMSGWAITING</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00052">CID_PRIVATE_NAME</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00053">CID_PRIVATE_NUMBER</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00054">CID_UNKNOWN_NAME</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00055">CID_UNKNOWN_NUMBER</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00052">callerid_state::cksum</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00055">callerid_state::flags</a>, <a class="el" href="../../df/d9b/fskmodem__float_8c_source.html#l00224">fsk_serial()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00046">callerid_state::fskd</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00057">callerid_state::len</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00053">callerid_state::name</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00054">callerid_state::number</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00049">callerid_state::oldlen</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00048">callerid_state::oldstuff</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00050">callerid_state::pos</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00047">callerid_state::rawdata</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00056">callerid_state::sawflag</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00051">callerid_state::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l09512">analog_ss_thread()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l10726">mwi_thread()</a>, and <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l01302">my_get_callerid()</a>.</p>
<div class="fragment"><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;{</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   <span class="keywordtype">int</span> mylen = <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   <span class="keywordtype">int</span> olen;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a> = <span class="charliteral">&#39;X&#39;</span>;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <span class="keywordtype">short</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   buf = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(2 * <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> + cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a867bf9ceda87a78eff00c671640f3043">oldlen</a>);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   memcpy(buf, cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ad11068e3f0f16b0b1eed6eb357e7fdb7">oldstuff</a>, cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a867bf9ceda87a78eff00c671640f3043">oldlen</a>);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   mylen += cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a867bf9ceda87a78eff00c671640f3043">oldlen</a>/2;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>; x++)</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      buf[x+cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a867bf9ceda87a78eff00c671640f3043">oldlen</a>/2] = <a class="code" href="../../de/d47/callerid_8h.html#ad9a6e3dea5cb07f976f8641770add81b">AST_XLAW</a>(ubuf[x]);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <span class="keywordflow">while</span> (mylen &gt;= 160) {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      olen = mylen;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      res = <a class="code" href="../../de/d7d/fskmodem__float_8h.html#a6315165519388f15eccffd8103769ee3">fsk_serial</a>(&amp;cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>, buf, &amp;mylen, &amp;b);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="keywordflow">if</span> (mylen &lt; 0) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No start bit found in fsk data.\n&quot;</span>);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      buf += (olen - mylen);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;fsk_serial failed\n&quot;</span>);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keywordflow">if</span> (res == 1) {</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;         <span class="keywordflow">if</span> (b &gt; 0xff) {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            <span class="keywordflow">if</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> != 5) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;               <span class="comment">/* Ignore invalid bytes */</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">             * We can tollerate an error on the checksum character since the</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">             * checksum character is the last character in the message and</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">             * it validates the message.</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">             *</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">             * Remove character error flags.</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">             * Bit 8 : Parity error</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">             * Bit 9 : Framing error</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            b &amp;= 0xff;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;         }</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;         <span class="keywordflow">switch</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a>) {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;         <span class="keywordflow">case</span> 0: <span class="comment">/* Look for flag */</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <span class="keywordflow">if</span> (b == <span class="charliteral">&#39;U&#39;</span>)</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 2;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;         <span class="keywordflow">case</span> 2: <span class="comment">/* Get lead-in */</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="keywordflow">if</span> ((b == 0x04) || (b == 0x80) || (b == 0x06) || (b == 0x82)) {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac765329451135abec74c45e1897abf26">type</a> = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 3;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a4f533d7ca3de0b7d7ecc95de785b4d2c">cksum</a> = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            }</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;         <span class="keywordflow">case</span> 3:  <span class="comment">/* Get length */</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <span class="comment">/* Not a lead in.  We&#39;re ready  */</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 4;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#afed088663f8704004425cdae2120b9b3">len</a> = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a1910d262855b71da353ed0d07a6c7823">pos</a> = 0;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a4f533d7ca3de0b7d7ecc95de785b4d2c">cksum</a> += <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;         <span class="keywordflow">case</span> 4: <span class="comment">/* Retrieve message */</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <span class="keywordflow">if</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a1910d262855b71da353ed0d07a6c7823">pos</a> &gt;= 128) {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Caller ID too long???\n&quot;</span>);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;               <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a1910d262855b71da353ed0d07a6c7823">pos</a>++] = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#afed088663f8704004425cdae2120b9b3">len</a>--;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a4f533d7ca3de0b7d7ecc95de785b4d2c">cksum</a> += <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            <span class="keywordflow">if</span> (!cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#afed088663f8704004425cdae2120b9b3">len</a>) {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a1910d262855b71da353ed0d07a6c7823">pos</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 5;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            }</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;         <span class="keywordflow">case</span> 5: <span class="comment">/* Check checksum */</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <span class="keywordflow">if</span> ((b + cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a4f533d7ca3de0b7d7ecc95de785b4d2c">cksum</a>) &amp; 0xff) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Caller*ID failed checksum\n&quot;</span>);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;               <span class="comment">/* Try again */</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 0;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">number</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ad53db8acabbf75e31bf23d9f20a2c847">name</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <span class="comment">/* Update flags */</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> = 0;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <span class="comment">/* If we get this far we&#39;re fine.  */</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <span class="keywordflow">if</span> ((cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac765329451135abec74c45e1897abf26">type</a> == 0x80) || (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac765329451135abec74c45e1897abf26">type</a> == 0x82)) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;               <span class="comment">/* MDMF */</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;               <span class="comment">/* Go through each element and process */</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;               <span class="keywordflow">for</span> (x = 0; x &lt; cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a1910d262855b71da353ed0d07a6c7823">pos</a>;) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                  <span class="keywordflow">switch</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x++]) {</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                  <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                     <span class="comment">/* Date */</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                  <span class="keywordflow">case</span> 2: <span class="comment">/* Number */</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                  <span class="keywordflow">case</span> 3: <span class="comment">/* Number (for Zebble) */</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                  <span class="keywordflow">case</span> 4: <span class="comment">/* Number */</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                     res = cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x];</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                     <span class="keywordflow">if</span> (res &gt; 32) {</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                        <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Truncating long caller ID number from %d bytes to 32\n&quot;</span>, cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x]);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                        res = 32;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                     }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">number</a>)) {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                        memcpy(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">number</a>, cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a> + x + 1, res);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                        <span class="comment">/* Null terminate */</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                        cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">number</a>[res] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                     }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                  <span class="keywordflow">case</span> 6: <span class="comment">/* Stentor Call Qualifier (ie. Long Distance call) */</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                  <span class="keywordflow">case</span> 7: <span class="comment">/* Name */</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                  <span class="keywordflow">case</span> 8: <span class="comment">/* Name */</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                     res = cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x];</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                     <span class="keywordflow">if</span> (res &gt; 32) {</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                        <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Truncating long caller ID name from %d bytes to 32\n&quot;</span>, cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x]);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                        res = 32;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                     }</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                     memcpy(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ad53db8acabbf75e31bf23d9f20a2c847">name</a>, cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a> + x + 1, res);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                     cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ad53db8acabbf75e31bf23d9f20a2c847">name</a>[res] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                  <span class="keywordflow">case</span> 11: <span class="comment">/* Message Waiting */</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                     res = cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x + 1];</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                     <span class="keywordflow">if</span> (res)</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                        cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="../../de/d47/callerid_8h.html#a9c4dfda5214a190d972ea14ae5055378">CID_MSGWAITING</a>;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                     <span class="keywordflow">else</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                        cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="../../de/d47/callerid_8h.html#a826d6ae29e47b657de576a044828734a">CID_NOMSGWAITING</a>;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                  <span class="keywordflow">case</span> 17: <span class="comment">/* UK: Call type, 1=Voice Call, 2=Ringback when free, 129=Message waiting  */</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                  <span class="keywordflow">case</span> 19: <span class="comment">/* UK: Network message system status (Number of messages waiting) */</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                  <span class="keywordflow">case</span> 22: <span class="comment">/* Something French */</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                  <span class="keywordflow">default</span>:</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                     <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Unknown IE %d\n&quot;</span>, cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x - 1]);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                  }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                  res = cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x];</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                  <span class="keywordflow">if</span> (0 &gt; res){  <span class="comment">/* Negative offset in the CID Spill */</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                     <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;IE %d has bad field length of %d at offset %d\n&quot;</span>, cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x-1], cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x], x);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                     <span class="comment">/* Try again */</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                     cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 0;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                     <span class="keywordflow">break</span>;   <span class="comment">/* Exit the loop */</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                  }</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                  x += cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x];</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                  x++;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;               }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac765329451135abec74c45e1897abf26">type</a> == 0x6) {</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;               <span class="comment">/* VMWI SDMF */</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;               <span class="keywordflow">if</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[2] == 0x42) {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                  cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="../../de/d47/callerid_8h.html#a9c4dfda5214a190d972ea14ae5055378">CID_MSGWAITING</a>;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[2] == 0x6f) {</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                  cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="../../de/d47/callerid_8h.html#a826d6ae29e47b657de576a044828734a">CID_NOMSGWAITING</a>;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;               }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;               <span class="comment">/* SDMF */</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">number</a>, cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a> + 8, <span class="keyword">sizeof</span>(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">number</a>));</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            }</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <span class="keywordflow">if</span> (!strcmp(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">number</a>, <span class="stringliteral">&quot;P&quot;</span>)) {</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;               strcpy(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">number</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="../../de/d47/callerid_8h.html#a89ec835ed3bca0bf18b83d753daeecbd">CID_PRIVATE_NUMBER</a>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">number</a>, <span class="stringliteral">&quot;O&quot;</span>) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">number</a>)) {</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;               strcpy(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">number</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a>;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            }</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            <span class="keywordflow">if</span> (!strcmp(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ad53db8acabbf75e31bf23d9f20a2c847">name</a>, <span class="stringliteral">&quot;P&quot;</span>)) {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;               strcpy(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ad53db8acabbf75e31bf23d9f20a2c847">name</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="../../de/d47/callerid_8h.html#a75e6d6b2c4ea5b399d5a5b42f7be15c0">CID_PRIVATE_NAME</a>;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ad53db8acabbf75e31bf23d9f20a2c847">name</a>, <span class="stringliteral">&quot;O&quot;</span>) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ad53db8acabbf75e31bf23d9f20a2c847">name</a>)) {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;               strcpy(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ad53db8acabbf75e31bf23d9f20a2c847">name</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="../../de/d47/callerid_8h.html#a30f6e6391969dd024122f1fc9203b273">CID_UNKNOWN_NAME</a>;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            }</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Dunno what to do with a digit in sawflag %d\n&quot;</span>, cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a>);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;         }</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      }</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   }</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   <span class="keywordflow">if</span> (mylen) {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      memcpy(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ad11068e3f0f16b0b1eed6eb357e7fdb7">oldstuff</a>, buf, mylen * 2);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a867bf9ceda87a78eff00c671640f3043">oldlen</a> = mylen * 2;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a867bf9ceda87a78eff00c671640f3043">oldlen</a> = 0;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;}</div><div class="ttc" id="callerid_8h_html_a1290504d77210103d8553593671cc3c2"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a></div><div class="ttdeci">#define CID_UNKNOWN_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00055">callerid.h:55</a></div></div>
<div class="ttc" id="structcallerid__state_html_ab42e79f596ce4d812d8bf08468f9855d"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">callerid_state::sawflag</a></div><div class="ttdeci">int sawflag</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00056">callerid.c:56</a></div></div>
<div class="ttc" id="callerid_8h_html_a9c4dfda5214a190d972ea14ae5055378"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a9c4dfda5214a190d972ea14ae5055378">CID_MSGWAITING</a></div><div class="ttdeci">#define CID_MSGWAITING</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00056">callerid.h:56</a></div></div>
<div class="ttc" id="structcallerid__state_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#afed088663f8704004425cdae2120b9b3">callerid_state::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00057">callerid.c:57</a></div></div>
<div class="ttc" id="structcallerid__state_html_a1910d262855b71da353ed0d07a6c7823"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#a1910d262855b71da353ed0d07a6c7823">callerid_state::pos</a></div><div class="ttdeci">int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00050">callerid.c:50</a></div></div>
<div class="ttc" id="callerid_8h_html_ad9a6e3dea5cb07f976f8641770add81b"><div class="ttname"><a href="../../de/d47/callerid_8h.html#ad9a6e3dea5cb07f976f8641770add81b">AST_XLAW</a></div><div class="ttdeci">#define AST_XLAW(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00079">callerid.h:79</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structcallerid__state_html_ac765329451135abec74c45e1897abf26"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#ac765329451135abec74c45e1897abf26">callerid_state::type</a></div><div class="ttdeci">int type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00051">callerid.c:51</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="callerid_8h_html_a826d6ae29e47b657de576a044828734a"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a826d6ae29e47b657de576a044828734a">CID_NOMSGWAITING</a></div><div class="ttdeci">#define CID_NOMSGWAITING</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00057">callerid.h:57</a></div></div>
<div class="ttc" id="callerid_8h_html_a75e6d6b2c4ea5b399d5a5b42f7be15c0"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a75e6d6b2c4ea5b399d5a5b42f7be15c0">CID_PRIVATE_NAME</a></div><div class="ttdeci">#define CID_PRIVATE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00052">callerid.h:52</a></div></div>
<div class="ttc" id="callerid_8h_html_a89ec835ed3bca0bf18b83d753daeecbd"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a89ec835ed3bca0bf18b83d753daeecbd">CID_PRIVATE_NUMBER</a></div><div class="ttdeci">#define CID_PRIVATE_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00053">callerid.h:53</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structcallerid__state_html_ad53db8acabbf75e31bf23d9f20a2c847"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#ad53db8acabbf75e31bf23d9f20a2c847">callerid_state::name</a></div><div class="ttdeci">char name[64]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00053">callerid.c:53</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structcallerid__state_html_a867bf9ceda87a78eff00c671640f3043"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#a867bf9ceda87a78eff00c671640f3043">callerid_state::oldlen</a></div><div class="ttdeci">int oldlen</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00049">callerid.c:49</a></div></div>
<div class="ttc" id="structcallerid__state_html_ad11068e3f0f16b0b1eed6eb357e7fdb7"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#ad11068e3f0f16b0b1eed6eb357e7fdb7">callerid_state::oldstuff</a></div><div class="ttdeci">short oldstuff[160]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00048">callerid.c:48</a></div></div>
<div class="ttc" id="callerid_8h_html_a30f6e6391969dd024122f1fc9203b273"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a30f6e6391969dd024122f1fc9203b273">CID_UNKNOWN_NAME</a></div><div class="ttdeci">#define CID_UNKNOWN_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00054">callerid.h:54</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structcallerid__state_html_ac8bf36fe0577cba66bccda3a6f7e80a4"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">callerid_state::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00055">callerid.c:55</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a025ede890af287961d3a98d0e634a62b"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a></div><div class="ttdeci">static struct test_val b</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">test_linkedlists.c:47</a></div></div>
<div class="ttc" id="structcallerid__state_html_a4f533d7ca3de0b7d7ecc95de785b4d2c"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#a4f533d7ca3de0b7d7ecc95de785b4d2c">callerid_state::cksum</a></div><div class="ttdeci">int cksum</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00052">callerid.c:52</a></div></div>
<div class="ttc" id="fskmodem__float_8h_html_a6315165519388f15eccffd8103769ee3"><div class="ttname"><a href="../../de/d7d/fskmodem__float_8h.html#a6315165519388f15eccffd8103769ee3">fsk_serial</a></div><div class="ttdeci">int fsk_serial(fsk_data *fskd, short *buffer, int *len, int *outbyte)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d9b/fskmodem__float_8c_source.html#l00224">fskmodem_float.c:224</a></div></div>
<div class="ttc" id="structcallerid__state_html_a206c088624d4566f4e1f629e1caf7dfa"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">callerid_state::rawdata</a></div><div class="ttdeci">char rawdata[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00047">callerid.c:47</a></div></div>
<div class="ttc" id="structcallerid__state_html_a5d40e881ec298b08348b3e355222c685"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">callerid_state::number</a></div><div class="ttdeci">char number[64]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00054">callerid.c:54</a></div></div>
<div class="ttc" id="structcallerid__state_html_a89025e7d3ea985fe597c69e2d26c26ec"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">callerid_state::fskd</a></div><div class="ttdeci">fsk_data fskd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00046">callerid.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5cb6f2d6ff8bf52dd46583ecddd78359"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cb6f2d6ff8bf52dd46583ecddd78359">&#9670;&nbsp;</a></span>callerid_feed_jp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int callerid_feed_jp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a> *&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>ubuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>codec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read samples into the state machine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cid</td><td>Which state machine to act upon </td></tr>
    <tr><td class="paramname">ubuf</td><td>containing your samples </td></tr>
    <tr><td class="paramname">samples</td><td>number of samples contained within the buffer. </td></tr>
    <tr><td class="paramname">codec</td><td>which codec (AST_FORMAT_ALAW or AST_FORMAT_ULAW)</td></tr>
  </table>
  </dd>
</dl>
<p>Send received audio to the Caller*ID demodulator (for japanese style lines). </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>on error </td></tr>
    <tr><td class="paramname">0</td><td>for "needs more samples" </td></tr>
    <tr><td class="paramname">1</td><td>if the CallerID spill reception is complete. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00306">306</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00079">AST_XLAW</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">b</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00283">calc_crc()</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00055">CID_UNKNOWN_NUMBER</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00060">callerid_state::crc</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00441">DEBUG_ATLEAST</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00055">callerid_state::flags</a>, <a class="el" href="../../df/d9b/fskmodem__float_8c_source.html#l00224">fsk_serial()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00046">callerid_state::fskd</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00057">callerid_state::len</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00053">callerid_state::name</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00054">callerid_state::number</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00049">callerid_state::oldlen</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00048">callerid_state::oldstuff</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00050">callerid_state::pos</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00047">callerid_state::rawdata</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00056">callerid_state::sawflag</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00059">callerid_state::skipflag</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l09512">analog_ss_thread()</a>, and <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l01302">my_get_callerid()</a>.</p>
<div class="fragment"><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;{</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   <span class="keywordtype">int</span> mylen = <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   <span class="keywordtype">int</span> olen;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a> = <span class="charliteral">&#39;X&#39;</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <span class="keywordtype">int</span> b2;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <span class="keywordtype">short</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   buf = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(2 * <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> + cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a867bf9ceda87a78eff00c671640f3043">oldlen</a>);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   memcpy(buf, cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ad11068e3f0f16b0b1eed6eb357e7fdb7">oldstuff</a>, cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a867bf9ceda87a78eff00c671640f3043">oldlen</a>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   mylen += cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a867bf9ceda87a78eff00c671640f3043">oldlen</a> / 2;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>; x++)</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      buf[x+cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a867bf9ceda87a78eff00c671640f3043">oldlen</a>/2] = <a class="code" href="../../de/d47/callerid_8h.html#ad9a6e3dea5cb07f976f8641770add81b">AST_XLAW</a>(ubuf[x]);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <span class="keywordflow">while</span> (mylen &gt;= 160) {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      b = b2 = 0;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      olen = mylen;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      res = <a class="code" href="../../de/d7d/fskmodem__float_8h.html#a6315165519388f15eccffd8103769ee3">fsk_serial</a>(&amp;cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>, buf, &amp;mylen, &amp;b);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">if</span> (mylen &lt; 0) {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No start bit found in fsk data.\n&quot;</span>);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      buf += (olen - mylen);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;fsk_serial failed\n&quot;</span>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="keywordflow">if</span> (res == 1) {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;         b2 = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;         b  &amp;= 0x7f;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;         <span class="comment">/* crc checksum calculation */</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;         <span class="keywordflow">if</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> &gt; 1)</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a0e34886f35a1dc651e0caf46a73e27ab">crc</a> = <a class="code" href="../../dc/dd5/callerid_8c.html#a3faa215563ac24dec8ae8906dabafd3e">calc_crc</a>(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a0e34886f35a1dc651e0caf46a73e27ab">crc</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) b2);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;         <span class="comment">/* Ignore invalid bytes */</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;         <span class="keywordflow">if</span> (b &gt; 0xff)</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;         <span class="comment">/* skip DLE if needed */</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;         <span class="keywordflow">if</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> &gt; 0) {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="keywordflow">if</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> != 5 &amp;&amp; cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a8f054ca18f780062a4bf92f2c265d93b">skipflag</a> == 0 &amp;&amp; b == 0x10) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a8f054ca18f780062a4bf92f2c265d93b">skipflag</a> = 1 ;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;               continue ;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;         }</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;         <span class="keywordflow">if</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a8f054ca18f780062a4bf92f2c265d93b">skipflag</a> == 1)</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a8f054ca18f780062a4bf92f2c265d93b">skipflag</a> = 0 ;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;         <span class="comment">/* caller id retrieval */</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;         <span class="keywordflow">switch</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a>) {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;         <span class="keywordflow">case</span> 0: <span class="comment">/* DLE */</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keywordflow">if</span> (b == 0x10) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 1;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a8f054ca18f780062a4bf92f2c265d93b">skipflag</a> = 0;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a0e34886f35a1dc651e0caf46a73e27ab">crc</a> = 0;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;         <span class="keywordflow">case</span> 1: <span class="comment">/* SOH */</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="keywordflow">if</span> (b == 0x01)</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 2;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            break ;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;         <span class="keywordflow">case</span> 2: <span class="comment">/* HEADER */</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="keywordflow">if</span> (b == 0x07)</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 3;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;         <span class="keywordflow">case</span> 3: <span class="comment">/* STX */</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keywordflow">if</span> (b == 0x02)</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 4;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;         <span class="keywordflow">case</span> 4: <span class="comment">/* SERVICE TYPE */</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">if</span> (b == 0x40)</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 5;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;         <span class="keywordflow">case</span> 5: <span class="comment">/* Frame Length */</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 6;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;         <span class="keywordflow">case</span> 6: <span class="comment">/* NUMBER TYPE */</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 7;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a1910d262855b71da353ed0d07a6c7823">pos</a> = 0;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a1910d262855b71da353ed0d07a6c7823">pos</a>++] = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;         <span class="keywordflow">case</span> 7:  <span class="comment">/* NUMBER LENGTH */</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 8;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#afed088663f8704004425cdae2120b9b3">len</a> = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="keywordflow">if</span> ((cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#afed088663f8704004425cdae2120b9b3">len</a>+2) &gt;= <span class="keyword">sizeof</span>(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>)) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;too long caller id string\n&quot;</span>) ;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;               <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a1910d262855b71da353ed0d07a6c7823">pos</a>++] = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;         <span class="keywordflow">case</span> 8:  <span class="comment">/* Retrieve message */</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a1910d262855b71da353ed0d07a6c7823">pos</a>++] = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#afed088663f8704004425cdae2120b9b3">len</a>--;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <span class="keywordflow">if</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#afed088663f8704004425cdae2120b9b3">len</a>&lt;=0) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a1910d262855b71da353ed0d07a6c7823">pos</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;               cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 9;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;         <span class="keywordflow">case</span> 9:  <span class="comment">/* ETX */</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 10;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;         <span class="keywordflow">case</span> 10: <span class="comment">/* CRC Checksum 1 */</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 11;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;         <span class="keywordflow">case</span> 11: <span class="comment">/* CRC Checksum 2 */</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a> = 12;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="keywordflow">if</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a0e34886f35a1dc651e0caf46a73e27ab">crc</a> != 0) {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;crc checksum error\n&quot;</span>) ;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;               <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="comment">/* extract caller id data */</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            <span class="keywordflow">for</span> (x = 0; x &lt; cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a1910d262855b71da353ed0d07a6c7823">pos</a>;) {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;               <span class="keywordflow">switch</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x++]) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;               <span class="keywordflow">case</span> 0x02: <span class="comment">/* caller id  number */</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                  cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">number</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                  cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ad53db8acabbf75e31bf23d9f20a2c847">name</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                  cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> = 0;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                  res = cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x++];</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">number</a>, &amp;cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x], res+1);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                  x += res;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;               <span class="keywordflow">case</span> 0x21: <span class="comment">/* additional information */</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                  <span class="comment">/* length */</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                  x++;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                  <span class="comment">/* number type */</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                  <span class="keywordflow">switch</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x]) {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                  <span class="keywordflow">case</span> 0x00: <span class="comment">/* unknown */</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                  <span class="keywordflow">case</span> 0x01: <span class="comment">/* international number */</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                  <span class="keywordflow">case</span> 0x02: <span class="comment">/* domestic number */</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                  <span class="keywordflow">case</span> 0x03: <span class="comment">/* network */</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                  <span class="keywordflow">case</span> 0x04: <span class="comment">/* local call */</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                  <span class="keywordflow">case</span> 0x06: <span class="comment">/* short dial number */</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                  <span class="keywordflow">case</span> 0x07: <span class="comment">/* reserved */</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                  <span class="keywordflow">default</span>:   <span class="comment">/* reserved */</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                     <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;cid info:#1=%X\n&quot;</span>, (<span class="keywordtype">unsigned</span>)cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x]);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                     break ;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                  }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                  x++;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                  <span class="comment">/* numbering plan octed 4 */</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                  x++;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                  <span class="comment">/* numbering plan octed 5 */</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                  <span class="keywordflow">switch</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x]) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                  <span class="keywordflow">case</span> 0x00: <span class="comment">/* unknown */</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                  <span class="keywordflow">case</span> 0x01: <span class="comment">/* recommendation E.164 ISDN */</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                  <span class="keywordflow">case</span> 0x03: <span class="comment">/* recommendation X.121 */</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                  <span class="keywordflow">case</span> 0x04: <span class="comment">/* telex dial plan */</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                  <span class="keywordflow">case</span> 0x08: <span class="comment">/* domestic dial plan */</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                  <span class="keywordflow">case</span> 0x09: <span class="comment">/* private dial plan */</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                  <span class="keywordflow">case</span> 0x05: <span class="comment">/* reserved */</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                  <span class="keywordflow">default</span>:   <span class="comment">/* reserved */</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                     <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;cid info:#2=%X\n&quot;</span>, (<span class="keywordtype">unsigned</span>)cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x]);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                     break ;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                  }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                  x++;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                  break ;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;               <span class="keywordflow">case</span> 0x04: <span class="comment">/* no callerid reason */</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                  <span class="comment">/* length */</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                  x++;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                  <span class="comment">/* no callerid reason code */</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                  <span class="keywordflow">switch</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x]) {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                  <span class="keywordflow">case</span> <span class="charliteral">&#39;P&#39;</span>: <span class="comment">/* caller id denied by user */</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                  <span class="keywordflow">case</span> <span class="charliteral">&#39;O&#39;</span>: <span class="comment">/* service not available */</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                  <span class="keywordflow">case</span> <span class="charliteral">&#39;C&#39;</span>: <span class="comment">/* pay phone */</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                  <span class="keywordflow">case</span> <span class="charliteral">&#39;S&#39;</span>: <span class="comment">/* service congested */</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                     cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                     <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;no cid reason:%c\n&quot;</span>, cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x]);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                     break ;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                  }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                  x++;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                  break ;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;               <span class="keywordflow">case</span> 0x09: <span class="comment">/* dialed number */</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                  <span class="comment">/* length */</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                  res = cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x++];</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                  <span class="comment">/* dialed number */</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                  x += res;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                  break ;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;               <span class="keywordflow">case</span> 0x22: <span class="comment">/* dialed number additional information */</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                  <span class="comment">/* length */</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                  x++;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                  <span class="comment">/* number type */</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                  <span class="keywordflow">switch</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x]) {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                  <span class="keywordflow">case</span> 0x00: <span class="comment">/* unknown */</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                  <span class="keywordflow">case</span> 0x01: <span class="comment">/* international number */</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                  <span class="keywordflow">case</span> 0x02: <span class="comment">/* domestic number */</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                  <span class="keywordflow">case</span> 0x03: <span class="comment">/* network */</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                  <span class="keywordflow">case</span> 0x04: <span class="comment">/* local call */</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                  <span class="keywordflow">case</span> 0x06: <span class="comment">/* short dial number */</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                  <span class="keywordflow">case</span> 0x07: <span class="comment">/* reserved */</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                  <span class="keywordflow">default</span>:   <span class="comment">/* reserved */</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a>(2))</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                        <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;did info:#1=%X\n&quot;</span>, (<span class="keywordtype">unsigned</span>)cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x]);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                     break ;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                  }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                  x++;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                  <span class="comment">/* numbering plan octed 4 */</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                  x++;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                  <span class="comment">/* numbering plan octed 5 */</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                  <span class="keywordflow">switch</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x]) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                  <span class="keywordflow">case</span> 0x00: <span class="comment">/* unknown */</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                  <span class="keywordflow">case</span> 0x01: <span class="comment">/* recommendation E.164 ISDN */</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                  <span class="keywordflow">case</span> 0x03: <span class="comment">/* recommendation X.121 */</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                  <span class="keywordflow">case</span> 0x04: <span class="comment">/* telex dial plan */</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                  <span class="keywordflow">case</span> 0x08: <span class="comment">/* domestic dial plan */</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                  <span class="keywordflow">case</span> 0x09: <span class="comment">/* private dial plan */</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                  <span class="keywordflow">case</span> 0x05: <span class="comment">/* reserved */</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                  <span class="keywordflow">default</span>:   <span class="comment">/* reserved */</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                     <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;did info:#2=%X\n&quot;</span>, (<span class="keywordtype">unsigned</span>)cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">rawdata</a>[x]);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                     break ;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                  }</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                  x++;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                  break ;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;               }</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;invalid value in sawflag %d\n&quot;</span>, cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">sawflag</a>);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;         }</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   <span class="keywordflow">if</span> (mylen) {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      memcpy(cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ad11068e3f0f16b0b1eed6eb357e7fdb7">oldstuff</a>, buf, mylen * 2);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a867bf9ceda87a78eff00c671640f3043">oldlen</a> = mylen * 2;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a867bf9ceda87a78eff00c671640f3043">oldlen</a> = 0;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;}</div><div class="ttc" id="callerid_8h_html_a1290504d77210103d8553593671cc3c2"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a></div><div class="ttdeci">#define CID_UNKNOWN_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00055">callerid.h:55</a></div></div>
<div class="ttc" id="structcallerid__state_html_ab42e79f596ce4d812d8bf08468f9855d"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#ab42e79f596ce4d812d8bf08468f9855d">callerid_state::sawflag</a></div><div class="ttdeci">int sawflag</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00056">callerid.c:56</a></div></div>
<div class="ttc" id="structcallerid__state_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#afed088663f8704004425cdae2120b9b3">callerid_state::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00057">callerid.c:57</a></div></div>
<div class="ttc" id="structcallerid__state_html_a1910d262855b71da353ed0d07a6c7823"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#a1910d262855b71da353ed0d07a6c7823">callerid_state::pos</a></div><div class="ttdeci">int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00050">callerid.c:50</a></div></div>
<div class="ttc" id="callerid_8h_html_ad9a6e3dea5cb07f976f8641770add81b"><div class="ttname"><a href="../../de/d47/callerid_8h.html#ad9a6e3dea5cb07f976f8641770add81b">AST_XLAW</a></div><div class="ttdeci">#define AST_XLAW(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00079">callerid.h:79</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structcallerid__state_html_a0e34886f35a1dc651e0caf46a73e27ab"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#a0e34886f35a1dc651e0caf46a73e27ab">callerid_state::crc</a></div><div class="ttdeci">unsigned short crc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00060">callerid.c:60</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="structcallerid__state_html_a8f054ca18f780062a4bf92f2c265d93b"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#a8f054ca18f780062a4bf92f2c265d93b">callerid_state::skipflag</a></div><div class="ttdeci">int skipflag</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00059">callerid.c:59</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structcallerid__state_html_ad53db8acabbf75e31bf23d9f20a2c847"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#ad53db8acabbf75e31bf23d9f20a2c847">callerid_state::name</a></div><div class="ttdeci">char name[64]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00053">callerid.c:53</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structcallerid__state_html_a867bf9ceda87a78eff00c671640f3043"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#a867bf9ceda87a78eff00c671640f3043">callerid_state::oldlen</a></div><div class="ttdeci">int oldlen</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00049">callerid.c:49</a></div></div>
<div class="ttc" id="structcallerid__state_html_ad11068e3f0f16b0b1eed6eb357e7fdb7"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#ad11068e3f0f16b0b1eed6eb357e7fdb7">callerid_state::oldstuff</a></div><div class="ttdeci">short oldstuff[160]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00048">callerid.c:48</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structcallerid__state_html_ac8bf36fe0577cba66bccda3a6f7e80a4"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">callerid_state::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00055">callerid.c:55</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a025ede890af287961d3a98d0e634a62b"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a></div><div class="ttdeci">static struct test_val b</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">test_linkedlists.c:47</a></div></div>
<div class="ttc" id="callerid_8c_html_a3faa215563ac24dec8ae8906dabafd3e"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a3faa215563ac24dec8ae8906dabafd3e">calc_crc</a></div><div class="ttdeci">static unsigned short calc_crc(unsigned short crc, unsigned char data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00283">callerid.c:283</a></div></div>
<div class="ttc" id="logger_8h_html_a33f6031de4ab6d1406465a7a3ee18e86"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a></div><div class="ttdeci">#define DEBUG_ATLEAST(level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00441">logger.h:441</a></div></div>
<div class="ttc" id="fskmodem__float_8h_html_a6315165519388f15eccffd8103769ee3"><div class="ttname"><a href="../../de/d7d/fskmodem__float_8h.html#a6315165519388f15eccffd8103769ee3">fsk_serial</a></div><div class="ttdeci">int fsk_serial(fsk_data *fskd, short *buffer, int *len, int *outbyte)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d9b/fskmodem__float_8c_source.html#l00224">fskmodem_float.c:224</a></div></div>
<div class="ttc" id="structcallerid__state_html_a206c088624d4566f4e1f629e1caf7dfa"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#a206c088624d4566f4e1f629e1caf7dfa">callerid_state::rawdata</a></div><div class="ttdeci">char rawdata[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00047">callerid.c:47</a></div></div>
<div class="ttc" id="structcallerid__state_html_a5d40e881ec298b08348b3e355222c685"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">callerid_state::number</a></div><div class="ttdeci">char number[64]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00054">callerid.c:54</a></div></div>
<div class="ttc" id="structcallerid__state_html_a89025e7d3ea985fe597c69e2d26c26ec"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">callerid_state::fskd</a></div><div class="ttdeci">fsk_data fskd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00046">callerid.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d792e593d99c8b5b3a5534e73082c9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d792e593d99c8b5b3a5534e73082c9d">&#9670;&nbsp;</a></span>callerid_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void callerid_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a> *&#160;</td>
          <td class="paramname"><em>cid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function frees <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a> cid. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cid</td><td>This is the <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a> state machine to free </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00734">734</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l09512">analog_ss_thread()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l10726">mwi_thread()</a>, and <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l01286">my_stop_cid_detect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;{</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cid);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;}</div><div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a467dcb1b5a2d65636d9281dbe3df6fdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a467dcb1b5a2d65636d9281dbe3df6fdb">&#9670;&nbsp;</a></span>callerid_generate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int callerid_generate </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>callwaiting</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>codec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates a CallerID FSK stream in ulaw format suitable for transmission. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Buffer to use. If "buf" is supplied, it will use that buffer instead of allocating its own. "buf" must be at least 32000 bytes in size of you want to be sure you don't have an overrun. </td></tr>
    <tr><td class="paramname">number</td><td>Use NULL for no number or "P" for "private" </td></tr>
    <tr><td class="paramname">name</td><td>name to be used </td></tr>
    <tr><td class="paramname">flags</td><td>passed flags </td></tr>
    <tr><td class="paramname">callwaiting</td><td>callwaiting flag </td></tr>
    <tr><td class="paramname">codec</td><td>&ndash; either AST_FORMAT_ULAW or AST_FORMAT_ALAW</td></tr>
  </table>
  </dd>
</dl>
<p>This function creates a stream of callerid (a callerid spill) data in ulaw format. </p><dl class="section return"><dt>Returns</dt><dd>It returns the size (in bytes) of the data (if it returns a size of 0, there is probably an error) </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00898">898</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00739">callerid_genmsg()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00057">callerid_state::len</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00278">PUT_BYTE</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00304">PUT_CLID</a>, and <a class="el" href="../../de/d47/callerid_8h_source.html#l00289">PUT_CLID_MARKMS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01054">__ast_callerid_generate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;{</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   <span class="keywordtype">int</span> bytes = 0;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;   <span class="keywordtype">int</span> x, sum;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   <span class="comment">/* Initial carriers (real/imaginary) */</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;   <span class="keywordtype">float</span> cr = 1.0;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;   <span class="keywordtype">float</span> ci = 0.0;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;   <span class="keywordtype">float</span> scont = 0.0;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;   <span class="keywordtype">char</span> msg[256];</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   len = <a class="code" href="../../dc/dd5/callerid_8c.html#a315d5278c97c5c96bfe89c6d0e24fd42">callerid_genmsg</a>(msg, <span class="keyword">sizeof</span>(msg), <a class="code" href="../../d6/d49/structnumber.html">number</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, flags);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a>) {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <span class="comment">/* Wait a half a second */</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; 4000; x++)</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;         <a class="code" href="../../de/d47/callerid_8h.html#a32e0652e615f27aef195c93a80f756b9">PUT_BYTE</a>(0x7f);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <span class="comment">/* Transmit 30 0x55&#39;s (looks like a square wave) for channel seizure */</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; 30; x++)</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;         <a class="code" href="../../de/d47/callerid_8h.html#a02c7254b3ec648f815c15bd6f8cce39b">PUT_CLID</a>(0x55);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;   }</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;   <span class="comment">/* Send 150ms of callerid marks */</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; 150; x++)</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <a class="code" href="../../de/d47/callerid_8h.html#a7ce7cf8db165eb44e64e704c3ced9774">PUT_CLID_MARKMS</a>;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;   <span class="comment">/* Send 0x80 indicating MDMF format */</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;   <a class="code" href="../../de/d47/callerid_8h.html#a02c7254b3ec648f815c15bd6f8cce39b">PUT_CLID</a>(0x80);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   <span class="comment">/* Put length of whole message */</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;   <a class="code" href="../../de/d47/callerid_8h.html#a02c7254b3ec648f815c15bd6f8cce39b">PUT_CLID</a>(len);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   sum = 0x80 + strlen(msg);</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;   <span class="comment">/* Put each character of message and update checksum */</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>; x++) {</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <a class="code" href="../../de/d47/callerid_8h.html#a02c7254b3ec648f815c15bd6f8cce39b">PUT_CLID</a>(msg[x]);</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      sum += msg[x];</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   }</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;   <span class="comment">/* Send 2&#39;s compliment of sum */</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   <a class="code" href="../../de/d47/callerid_8h.html#a02c7254b3ec648f815c15bd6f8cce39b">PUT_CLID</a>(256 - (sum &amp; 255));</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   <span class="comment">/* Send 50 more ms of marks */</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; 50; x++)</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <a class="code" href="../../de/d47/callerid_8h.html#a7ce7cf8db165eb44e64e704c3ced9774">PUT_CLID_MARKMS</a>;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   <span class="keywordflow">return</span> bytes;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a50ea1ecd6da04bb18650fe24943d23d1"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a></div><div class="ttdeci">static int callwaiting</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00185">chan_mgcp.c:185</a></div></div>
<div class="ttc" id="callerid_8h_html_a32e0652e615f27aef195c93a80f756b9"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a32e0652e615f27aef195c93a80f756b9">PUT_BYTE</a></div><div class="ttdeci">#define PUT_BYTE(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00278">callerid.h:278</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="callerid_8c_html_a315d5278c97c5c96bfe89c6d0e24fd42"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a315d5278c97c5c96bfe89c6d0e24fd42">callerid_genmsg</a></div><div class="ttdeci">static int callerid_genmsg(char *msg, int size, const char *number, const char *name, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00739">callerid.c:739</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="callerid_8h_html_a02c7254b3ec648f815c15bd6f8cce39b"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a02c7254b3ec648f815c15bd6f8cce39b">PUT_CLID</a></div><div class="ttdeci">#define PUT_CLID(byte)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00304">callerid.h:304</a></div></div>
<div class="ttc" id="callerid_8h_html_a7ce7cf8db165eb44e64e704c3ced9774"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a7ce7cf8db165eb44e64e704c3ced9774">PUT_CLID_MARKMS</a></div><div class="ttdeci">#define PUT_CLID_MARKMS</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00289">callerid.h:289</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a315d5278c97c5c96bfe89c6d0e24fd42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a315d5278c97c5c96bfe89c6d0e24fd42">&#9670;&nbsp;</a></span>callerid_genmsg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int callerid_genmsg </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00739">739</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/df8/localtime_8c_source.html#l01739">ast_localtime()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00052">CID_PRIVATE_NAME</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00053">CID_PRIVATE_NUMBER</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00054">CID_UNKNOWN_NAME</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00055">CID_UNKNOWN_NUMBER</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/deb/localtime_8h_source.html#l00038">ast_tm::tm_hour</a>, <a class="el" href="../../d5/deb/localtime_8h_source.html#l00039">ast_tm::tm_mday</a>, <a class="el" href="../../d5/deb/localtime_8h_source.html#l00037">ast_tm::tm_min</a>, and <a class="el" href="../../d5/deb/localtime_8h_source.html#l00040">ast_tm::tm_mon</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00810">ast_callerid_vmwi_generate()</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00898">callerid_generate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;{</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   <span class="keyword">struct </span>timeval now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d84/structast__tm.html">ast_tm</a> tm;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   <span class="keywordtype">char</span> *ptr;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   <span class="keywordtype">int</span> i, x;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   <span class="comment">/* Get the time */</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;now, &amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   ptr = msg;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <span class="comment">/* Format time and message header */</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;   res = snprintf(ptr, size, <span class="stringliteral">&quot;\001\010%02d%02d%02d%02d&quot;</span>, tm.tm_mon + 1,</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            tm.tm_mday, tm.tm_hour, tm.tm_min);</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   size -= res;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   ptr += res;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d6/d49/structnumber.html">number</a>) || (flags &amp; <a class="code" href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a>)) {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <span class="comment">/* Indicate number not known */</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      res = snprintf(ptr, size, <span class="stringliteral">&quot;\004\001O&quot;</span>);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      size -= res;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      ptr += res;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags &amp; <a class="code" href="../../de/d47/callerid_8h.html#a89ec835ed3bca0bf18b83d753daeecbd">CID_PRIVATE_NUMBER</a>) {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <span class="comment">/* Indicate number is private */</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      res = snprintf(ptr, size, <span class="stringliteral">&quot;\004\001P&quot;</span>);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      size -= res;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      ptr += res;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="comment">/* Send up to 16 digits of number MAX */</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      i = strlen(<a class="code" href="../../d6/d49/structnumber.html">number</a>);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <span class="keywordflow">if</span> (i &gt; 16)</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;         i = 16;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      res = snprintf(ptr, size, <span class="stringliteral">&quot;\002%c&quot;</span>, i);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      size -= res;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      ptr += res;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; i; x++)</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;         ptr[x] = <a class="code" href="../../d6/d49/structnumber.html">number</a>[x];</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      ptr[i] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      ptr += i;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      size -= i;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) || (flags &amp; <a class="code" href="../../de/d47/callerid_8h.html#a30f6e6391969dd024122f1fc9203b273">CID_UNKNOWN_NAME</a>)) {</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="comment">/* Indicate name not known */</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      res = snprintf(ptr, size, <span class="stringliteral">&quot;\010\001O&quot;</span>);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      size -= res;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      ptr += res;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags &amp; <a class="code" href="../../de/d47/callerid_8h.html#a75e6d6b2c4ea5b399d5a5b42f7be15c0">CID_PRIVATE_NAME</a>) {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="comment">/* Indicate name is private */</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      res = snprintf(ptr, size, <span class="stringliteral">&quot;\010\001P&quot;</span>);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      size -= res;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      ptr += res;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <span class="comment">/* Send up to 16 digits of name MAX */</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      i = strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      <span class="keywordflow">if</span> (i &gt; 16)</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;         i = 16;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      res = snprintf(ptr, size, <span class="stringliteral">&quot;\007%c&quot;</span>, i);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      size -= res;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      ptr += res;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; i; x++)</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;         ptr[x] = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>[x];</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      ptr[i] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      ptr += i;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      size -= i;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   }</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <span class="keywordflow">return</span> (ptr - msg);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;}</div><div class="ttc" id="callerid_8h_html_a1290504d77210103d8553593671cc3c2"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a></div><div class="ttdeci">#define CID_UNKNOWN_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00055">callerid.h:55</a></div></div>
<div class="ttc" id="localtime_8h_html_ae9fbda728350a9a5b9c09b29214d718e"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a></div><div class="ttdeci">struct ast_tm * ast_localtime(const struct timeval *timep, struct ast_tm *p_tm, const char *zone)</div><div class="ttdoc">Timezone-independent version of localtime_r(3). </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l01739">localtime.c:1739</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="callerid_8h_html_a75e6d6b2c4ea5b399d5a5b42f7be15c0"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a75e6d6b2c4ea5b399d5a5b42f7be15c0">CID_PRIVATE_NAME</a></div><div class="ttdeci">#define CID_PRIVATE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00052">callerid.h:52</a></div></div>
<div class="ttc" id="callerid_8h_html_a89ec835ed3bca0bf18b83d753daeecbd"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a89ec835ed3bca0bf18b83d753daeecbd">CID_PRIVATE_NUMBER</a></div><div class="ttdeci">#define CID_PRIVATE_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00053">callerid.h:53</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="callerid_8h_html_a30f6e6391969dd024122f1fc9203b273"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a30f6e6391969dd024122f1fc9203b273">CID_UNKNOWN_NAME</a></div><div class="ttdeci">#define CID_UNKNOWN_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00054">callerid.h:54</a></div></div>
<div class="ttc" id="structast__tm_html"><div class="ttname"><a href="../../d5/d84/structast__tm.html">ast_tm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/deb/localtime_8h_source.html#l00035">localtime.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afed6bec2ec821870918daf8f6d7ea832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afed6bec2ec821870918daf8f6d7ea832">&#9670;&nbsp;</a></span>callerid_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void callerid_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a> *&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract info out of callerID state machine. Flags are listed above. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cid</td><td>Callerid state machine to act upon </td></tr>
    <tr><td class="paramname">number</td><td>Pass the address of a pointer-to-char (will contain the phone number) </td></tr>
    <tr><td class="paramname">name</td><td>Pass the address of a pointer-to-char (will contain the name) </td></tr>
    <tr><td class="paramname">flags</td><td>Pass the address of an int variable(will contain the various callerid flags)</td></tr>
  </table>
  </dd>
</dl>
<p>This function extracts a callerid string out of a <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a> state machine. If no number is found, *number will be set to NULL. Likewise for the name. Flags can contain any of the following:</p>
<dl class="section return"><dt>Returns</dt><dd>Returns nothing. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00188">188</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d47/callerid_8h_source.html#l00052">CID_PRIVATE_NAME</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00053">CID_PRIVATE_NUMBER</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00054">CID_UNKNOWN_NAME</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00055">CID_UNKNOWN_NUMBER</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00055">callerid_state::flags</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00053">callerid_state::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00054">callerid_state::number</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l09512">analog_ss_thread()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l10726">mwi_thread()</a>, and <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l01302">my_get_callerid()</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   *flags = cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <span class="keywordflow">if</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; (<a class="code" href="../../de/d47/callerid_8h.html#a30f6e6391969dd024122f1fc9203b273">CID_UNKNOWN_NAME</a> | <a class="code" href="../../de/d47/callerid_8h.html#a75e6d6b2c4ea5b399d5a5b42f7be15c0">CID_PRIVATE_NAME</a>))</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ad53db8acabbf75e31bf23d9f20a2c847">name</a>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   <span class="keywordflow">if</span> (cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; (<a class="code" href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a> | <a class="code" href="../../de/d47/callerid_8h.html#a89ec835ed3bca0bf18b83d753daeecbd">CID_PRIVATE_NUMBER</a>))</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      *<a class="code" href="../../d6/d49/structnumber.html">number</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      *<a class="code" href="../../d6/d49/structnumber.html">number</a> = cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">number</a>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div><div class="ttc" id="callerid_8h_html_a1290504d77210103d8553593671cc3c2"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a></div><div class="ttdeci">#define CID_UNKNOWN_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00055">callerid.h:55</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="callerid_8h_html_a75e6d6b2c4ea5b399d5a5b42f7be15c0"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a75e6d6b2c4ea5b399d5a5b42f7be15c0">CID_PRIVATE_NAME</a></div><div class="ttdeci">#define CID_PRIVATE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00052">callerid.h:52</a></div></div>
<div class="ttc" id="callerid_8h_html_a89ec835ed3bca0bf18b83d753daeecbd"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a89ec835ed3bca0bf18b83d753daeecbd">CID_PRIVATE_NUMBER</a></div><div class="ttdeci">#define CID_PRIVATE_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00053">callerid.h:53</a></div></div>
<div class="ttc" id="structcallerid__state_html_ad53db8acabbf75e31bf23d9f20a2c847"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#ad53db8acabbf75e31bf23d9f20a2c847">callerid_state::name</a></div><div class="ttdeci">char name[64]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00053">callerid.c:53</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="callerid_8h_html_a30f6e6391969dd024122f1fc9203b273"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a30f6e6391969dd024122f1fc9203b273">CID_UNKNOWN_NAME</a></div><div class="ttdeci">#define CID_UNKNOWN_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00054">callerid.h:54</a></div></div>
<div class="ttc" id="structcallerid__state_html_ac8bf36fe0577cba66bccda3a6f7e80a4"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">callerid_state::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00055">callerid.c:55</a></div></div>
<div class="ttc" id="structcallerid__state_html_a5d40e881ec298b08348b3e355222c685"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#a5d40e881ec298b08348b3e355222c685">callerid_state::number</a></div><div class="ttdeci">char number[64]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00054">callerid.c:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5fe1d08c3e1f692c09923587e1cce70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5fe1d08c3e1f692c09923587e1cce70">&#9670;&nbsp;</a></span>callerid_get_dtmf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void callerid_get_dtmf </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cidstring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get and parse DTMF-based callerid. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cidstring</td><td>The actual transmitted string. </td></tr>
    <tr><td class="paramname">number</td><td>The cid number is returned here. </td></tr>
    <tr><td class="paramname">flags</td><td>The cid flags are returned here. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00201">201</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00053">CID_PRIVATE_NUMBER</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00055">CID_UNKNOWN_NUMBER</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d09/sig__analog_8c_source.html#l01711">__analog_ss_thread()</a>, and <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l09512">analog_ss_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;{</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <span class="keywordtype">int</span> code;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="comment">/* &quot;Clear&quot; the number-buffer. */</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <a class="code" href="../../d6/d49/structnumber.html">number</a>[0] = 0;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <span class="keywordflow">if</span> (strlen(cidstring) &lt; 2) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;No cid detected\n&quot;</span>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      *flags = <a class="code" href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <span class="comment">/* Detect protocol and special types */</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   <span class="keywordflow">if</span> (cidstring[0] == <span class="charliteral">&#39;B&#39;</span>) {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="comment">/* Handle special codes */</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      code = atoi(&amp;cidstring[1]);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="keywordflow">if</span> (code == 0)</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;         *flags = <a class="code" href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (code == 10)</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;         *flags = <a class="code" href="../../de/d47/callerid_8h.html#a89ec835ed3bca0bf18b83d753daeecbd">CID_PRIVATE_NUMBER</a>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Unknown DTMF code %d\n&quot;</span>, code);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cidstring[0] == <span class="charliteral">&#39;D&#39;</span> &amp;&amp; cidstring[2] == <span class="charliteral">&#39;#&#39;</span>) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="comment">/* .DK special code */</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">if</span> (cidstring[1] == <span class="charliteral">&#39;1&#39;</span>)</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;         *flags = <a class="code" href="../../de/d47/callerid_8h.html#a89ec835ed3bca0bf18b83d753daeecbd">CID_PRIVATE_NUMBER</a>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordflow">if</span> (cidstring[1] == <span class="charliteral">&#39;2&#39;</span> || cidstring[1] == <span class="charliteral">&#39;3&#39;</span>)</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;         *flags = <a class="code" href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cidstring[0] == <span class="charliteral">&#39;D&#39;</span> || cidstring[0] == <span class="charliteral">&#39;A&#39;</span>) {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="comment">/* &quot;Standard&quot; callerid */</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keywordflow">for</span> (i = 1; i &lt; strlen(cidstring); i++) {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;         <span class="keywordflow">if</span> (cidstring[i] == <span class="charliteral">&#39;C&#39;</span> || cidstring[i] == <span class="charliteral">&#39;#&#39;</span>)</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;         <span class="keywordflow">if</span> (isdigit(cidstring[i]))</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <a class="code" href="../../d6/d49/structnumber.html">number</a>[i-1] = cidstring[i];</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Unknown CID digit &#39;%c&#39;\n&quot;</span>,</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;               cidstring[i]);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <a class="code" href="../../d6/d49/structnumber.html">number</a>[i-1] = 0;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isdigit(cidstring[0])) {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="comment">/* It begins with a digit, so we parse it as a number and hope</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">       * for the best */</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Couldn&#39;t detect start-character. CID &quot;</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;         <span class="stringliteral">&quot;parsing might be unreliable\n&quot;</span>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; strlen(cidstring); i++) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;         <span class="keywordflow">if</span> (isdigit(cidstring[i]))</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <a class="code" href="../../d6/d49/structnumber.html">number</a>[i] = cidstring[i];</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <a class="code" href="../../d6/d49/structnumber.html">number</a>[i] = 0;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Unknown CID protocol, start digit &#39;%c&#39;\n&quot;</span>, cidstring[0]);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      *flags = <a class="code" href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;}</div><div class="ttc" id="callerid_8h_html_a1290504d77210103d8553593671cc3c2"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a></div><div class="ttdeci">#define CID_UNKNOWN_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00055">callerid.h:55</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="callerid_8h_html_a89ec835ed3bca0bf18b83d753daeecbd"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a89ec835ed3bca0bf18b83d753daeecbd">CID_PRIVATE_NUMBER</a></div><div class="ttdeci">#define CID_PRIVATE_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00053">callerid.h:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c1767ffd4ca30651bcc241c16d1f071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c1767ffd4ca30651bcc241c16d1f071">&#9670;&nbsp;</a></span>callerid_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void callerid_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize stuff for inverse FFT. </p>
<p>CallerID Initialization. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00115">115</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00070">CALLERID_MARK</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00069">CALLERID_SPACE</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00072">CAS_FREQ1</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00073">CAS_FREQ2</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00067">casdi1</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00067">casdi2</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00067">casdr1</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00067">casdr2</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00064">cid_di</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00064">cid_dr</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l00352">cos</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00083">M_PI</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00071">SAS_FREQ</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00066">sasdi</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00066">sasdr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d03/asterisk_8c_source.html#l03947">asterisk_daemon()</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;{</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   <a class="code" href="../../dc/dd5/callerid_8c.html#a271c1c132faed1b658e2fba40c41b868">cid_dr</a>[0] = <a class="code" href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#ae22e91b5117c723dd02bfcc5e382bdd7">CALLERID_SPACE</a> * 2.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / 8000.0);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <a class="code" href="../../dc/dd5/callerid_8c.html#ae28e7a746ab99a470a022ff2eba08a88">cid_di</a>[0] = sin(<a class="code" href="../../dc/dd5/callerid_8c.html#ae22e91b5117c723dd02bfcc5e382bdd7">CALLERID_SPACE</a> * 2.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / 8000.0);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   <a class="code" href="../../dc/dd5/callerid_8c.html#a271c1c132faed1b658e2fba40c41b868">cid_dr</a>[1] = <a class="code" href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#aa77a53334827b801fa3f5865c26ab6e0">CALLERID_MARK</a> * 2.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / 8000.0);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   <a class="code" href="../../dc/dd5/callerid_8c.html#ae28e7a746ab99a470a022ff2eba08a88">cid_di</a>[1] = sin(<a class="code" href="../../dc/dd5/callerid_8c.html#aa77a53334827b801fa3f5865c26ab6e0">CALLERID_MARK</a> * 2.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / 8000.0);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   <a class="code" href="../../dc/dd5/callerid_8c.html#a37d6e99cad72f8884d9c575ac45badb9">sasdr</a> = <a class="code" href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#a17433d3c64fa04166b2585cad952a436">SAS_FREQ</a> * 2.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / 8000.0);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   <a class="code" href="../../dc/dd5/callerid_8c.html#ae81f6b006f99cb8e2a8dca1b21eda4be">sasdi</a> = sin(<a class="code" href="../../dc/dd5/callerid_8c.html#a17433d3c64fa04166b2585cad952a436">SAS_FREQ</a> * 2.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / 8000.0);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   <a class="code" href="../../dc/dd5/callerid_8c.html#acffc1e68a433ac6fd82d29d859805971">casdr1</a> = <a class="code" href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#a8f2259fb59644af478715f091739ade8">CAS_FREQ1</a> * 2.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / 8000.0);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   <a class="code" href="../../dc/dd5/callerid_8c.html#a1fc9110f09a12aef8ba8a94479dc03c3">casdi1</a> = sin(<a class="code" href="../../dc/dd5/callerid_8c.html#a8f2259fb59644af478715f091739ade8">CAS_FREQ1</a> * 2.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / 8000.0);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   <a class="code" href="../../dc/dd5/callerid_8c.html#acb906a5386153c9b5cb1d078fb033443">casdr2</a> = <a class="code" href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>(<a class="code" href="../../dc/dd5/callerid_8c.html#a69603be4978e9a144bef1b7e29630008">CAS_FREQ2</a> * 2.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / 8000.0);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <a class="code" href="../../dc/dd5/callerid_8c.html#ac4647d3812e6efba4e068f86b2ab2574">casdi2</a> = sin(<a class="code" href="../../dc/dd5/callerid_8c.html#a69603be4978e9a144bef1b7e29630008">CAS_FREQ2</a> * 2.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / 8000.0);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div><div class="ttc" id="callerid_8c_html_aa77a53334827b801fa3f5865c26ab6e0"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#aa77a53334827b801fa3f5865c26ab6e0">CALLERID_MARK</a></div><div class="ttdeci">#define CALLERID_MARK</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00070">callerid.c:70</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_ae91dad65f553f7afebe4af507803bc7f"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a></div><div class="ttdeci">unsigned int cos</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l00352">chan_iax2.c:352</a></div></div>
<div class="ttc" id="callerid_8c_html_a8f2259fb59644af478715f091739ade8"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a8f2259fb59644af478715f091739ade8">CAS_FREQ1</a></div><div class="ttdeci">#define CAS_FREQ1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00072">callerid.c:72</a></div></div>
<div class="ttc" id="callerid_8c_html_ae28e7a746ab99a470a022ff2eba08a88"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#ae28e7a746ab99a470a022ff2eba08a88">cid_di</a></div><div class="ttdeci">float cid_di[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00064">callerid.c:64</a></div></div>
<div class="ttc" id="callerid_8c_html_a69603be4978e9a144bef1b7e29630008"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a69603be4978e9a144bef1b7e29630008">CAS_FREQ2</a></div><div class="ttdeci">#define CAS_FREQ2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00073">callerid.c:73</a></div></div>
<div class="ttc" id="callerid_8c_html_acffc1e68a433ac6fd82d29d859805971"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#acffc1e68a433ac6fd82d29d859805971">casdr1</a></div><div class="ttdeci">float casdr1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00067">callerid.c:67</a></div></div>
<div class="ttc" id="callerid_8c_html_ae81f6b006f99cb8e2a8dca1b21eda4be"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#ae81f6b006f99cb8e2a8dca1b21eda4be">sasdi</a></div><div class="ttdeci">float sasdi</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00066">callerid.c:66</a></div></div>
<div class="ttc" id="callerid_8c_html_a17433d3c64fa04166b2585cad952a436"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a17433d3c64fa04166b2585cad952a436">SAS_FREQ</a></div><div class="ttdeci">#define SAS_FREQ</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00071">callerid.c:71</a></div></div>
<div class="ttc" id="resample_8c_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00083">resample.c:83</a></div></div>
<div class="ttc" id="callerid_8c_html_ae22e91b5117c723dd02bfcc5e382bdd7"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#ae22e91b5117c723dd02bfcc5e382bdd7">CALLERID_SPACE</a></div><div class="ttdeci">#define CALLERID_SPACE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00069">callerid.c:69</a></div></div>
<div class="ttc" id="callerid_8c_html_a37d6e99cad72f8884d9c575ac45badb9"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a37d6e99cad72f8884d9c575ac45badb9">sasdr</a></div><div class="ttdeci">float sasdr</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00066">callerid.c:66</a></div></div>
<div class="ttc" id="callerid_8c_html_acb906a5386153c9b5cb1d078fb033443"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#acb906a5386153c9b5cb1d078fb033443">casdr2</a></div><div class="ttdeci">float casdr2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00067">callerid.c:67</a></div></div>
<div class="ttc" id="callerid_8c_html_ac4647d3812e6efba4e068f86b2ab2574"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#ac4647d3812e6efba4e068f86b2ab2574">casdi2</a></div><div class="ttdeci">float casdi2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00067">callerid.c:67</a></div></div>
<div class="ttc" id="callerid_8c_html_a1fc9110f09a12aef8ba8a94479dc03c3"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a1fc9110f09a12aef8ba8a94479dc03c3">casdi1</a></div><div class="ttdeci">float casdi1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00067">callerid.c:67</a></div></div>
<div class="ttc" id="callerid_8c_html_a271c1c132faed1b658e2fba40c41b868"><div class="ttname"><a href="../../dc/dd5/callerid_8c.html#a271c1c132faed1b658e2fba40c41b868">cid_dr</a></div><div class="ttdeci">float cid_dr[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00064">callerid.c:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae48529c2f2ea547ec29a2451b8fef8a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae48529c2f2ea547ec29a2451b8fef8a2">&#9670;&nbsp;</a></span>callerid_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a>* callerid_new </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cid_signalling</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a callerID state machine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cid_signalling</td><td>Type of signalling in use</td></tr>
  </table>
  </dd>
</dl>
<p>This function returns a malloc'd instance of the <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a> data structure. </p><dl class="section return"><dt>Returns</dt><dd>Returns a pointer to a malloc'd <a class="el" href="../../d2/d76/structcallerid__state.html">callerid_state</a> structure, or NULL on error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00129">129</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../de/d7d/fskmodem__float_8h_source.html#l00044">fsk_data::bw</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00054">CID_UNKNOWN_NAME</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00055">CID_UNKNOWN_NUMBER</a>, <a class="el" href="../../de/d7d/fskmodem__float_8h_source.html#l00051">fsk_data::f_mark_idx</a>, <a class="el" href="../../de/d7d/fskmodem__float_8h_source.html#l00052">fsk_data::f_space_idx</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00055">callerid_state::flags</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00046">callerid_state::fskd</a>, <a class="el" href="../../d5/d38/fskmodem__int_8c_source.html#l00195">fskmodem_init()</a>, <a class="el" href="../../da/dc5/fskmodem__int_8h_source.html#l00053">fsk_data::icont</a>, <a class="el" href="../../da/dc5/fskmodem__int_8h_source.html#l00046">fsk_data::instop</a>, <a class="el" href="../../da/dc5/fskmodem__int_8h_source.html#l00052">fsk_data::ispb</a>, <a class="el" href="../../de/d7d/fskmodem__float_8h_source.html#l00036">fsk_data::nbit</a>, <a class="el" href="../../de/d7d/fskmodem__float_8h_source.html#l00037">fsk_data::nstop</a>, <a class="el" href="../../da/dc5/fskmodem__int_8h_source.html#l00060">fsk_data::pllids</a>, <a class="el" href="../../da/dc5/fskmodem__int_8h_source.html#l00059">fsk_data::pllispb</a>, <a class="el" href="../../da/dc5/fskmodem__int_8h_source.html#l00061">fsk_data::pllispb2</a>, and <a class="el" href="../../de/d7d/fskmodem__float_8h_source.html#l00035">fsk_data::spb</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l09512">analog_ss_thread()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l10726">mwi_thread()</a>, and <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l01269">my_start_cid_detect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;{</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d76/structcallerid__state.html">callerid_state</a> *cid;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   <span class="keywordflow">if</span> ((cid = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*cid)))) {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#ifdef INTEGER_CALLERID</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#a00899d7313f0bcad57ed0a95a3dd6f97">ispb</a> = 7;           <span class="comment">/* 1200 baud */</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="comment">/* Set up for 1200 / 8000 freq *32 to allow ints */</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#a9272af2c74dc6b5e741fe38267b0a748">pllispb</a>  = (int)(8000 * 32  / 1200);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#aa619b3c011d659441b1d906ef66b58c6">pllids</a>   = cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#a9272af2c74dc6b5e741fe38267b0a748">pllispb</a>/32;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#a755ded0cbde6a60feae7ad6113b8057c">pllispb2</a> = cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#a9272af2c74dc6b5e741fe38267b0a748">pllispb</a>/2;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#ae349656d51d3dfa03fd4ba13cf338e5a">icont</a> = 0;           <span class="comment">/* PLL REset */</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <span class="comment">/* cid-&gt;fskd.hdlc = 0; */</span>        <span class="comment">/* Async */</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#abe6ea42d56bb6b1cf335146f0877d7a9">nbit</a> = 8;              <span class="comment">/* 8 bits */</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#a8a334a19512bd0e0d3e322210ea86047">instop</a> = 1;         <span class="comment">/* 1 stop bit */</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="comment">/* cid-&gt;fskd.paridad = 0; */</span>     <span class="comment">/* No parity */</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#a09f48e0ccba89e108e701fa07300d102">bw</a> = 1;                <span class="comment">/* Filter 800 Hz */</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keywordflow">if</span> (cid_signalling == 2) {       <span class="comment">/* v23 signalling */</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;         cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#a55000e3ae1765fc3bcafb33740be41a9">f_mark_idx</a>  = 4; <span class="comment">/* 1300 Hz */</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;         cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#aee1863152c02a253f722ffb0fda8251d">f_space_idx</a> = 5; <span class="comment">/* 2100 Hz */</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      } <span class="keywordflow">else</span> {                         <span class="comment">/* Bell 202 signalling as default */</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;         cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#a55000e3ae1765fc3bcafb33740be41a9">f_mark_idx</a>  = 2; <span class="comment">/* 1200 Hz */</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;         cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#aee1863152c02a253f722ffb0fda8251d">f_space_idx</a> = 3; <span class="comment">/* 2200 Hz */</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="comment">/* cid-&gt;fskd.pcola = 0; */</span>       <span class="comment">/* No clue */</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="comment">/* cid-&gt;fskd.cont = 0.0; */</span>      <span class="comment">/* Digital PLL reset */</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="comment">/* cid-&gt;fskd.x0 = 0.0; */</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="comment">/* cid-&gt;fskd.state = 0; */</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> = <a class="code" href="../../de/d47/callerid_8h.html#a30f6e6391969dd024122f1fc9203b273">CID_UNKNOWN_NAME</a> | <a class="code" href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="comment">/* cid-&gt;pos = 0; */</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <a class="code" href="../../da/dc5/fskmodem__int_8h.html#a183afaf79ee92e26e8aacd129d9be3cb">fskmodem_init</a>(&amp;cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#a47e2a2415d4ac2c2f1b3303b23dd35a6">spb</a> = 7.0;             <span class="comment">/* 1200 baud */</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="comment">/* cid-&gt;fskd.hdlc = 0; */</span>        <span class="comment">/* Async */</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#abe6ea42d56bb6b1cf335146f0877d7a9">nbit</a> = 8;              <span class="comment">/* 8 bits */</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#a7161c14fc5f3607c82bc97762fca2262">nstop</a> = 1.0;           <span class="comment">/* 1 stop bit */</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="comment">/* cid-&gt;fskd.paridad = 0; */</span>     <span class="comment">/* No parity */</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#a09f48e0ccba89e108e701fa07300d102">bw</a> = 1;                <span class="comment">/* Filter 800 Hz */</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="keywordflow">if</span> (cid_signalling == 2) {       <span class="comment">/* v23 signalling */</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;         cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#a55000e3ae1765fc3bcafb33740be41a9">f_mark_idx</a> =  4; <span class="comment">/* 1300 Hz */</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;         cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#aee1863152c02a253f722ffb0fda8251d">f_space_idx</a> = 5; <span class="comment">/* 2100 Hz */</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      } <span class="keywordflow">else</span> {                         <span class="comment">/* Bell 202 signalling as default */</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;         cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#a55000e3ae1765fc3bcafb33740be41a9">f_mark_idx</a> =  2; <span class="comment">/* 1200 Hz */</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;         cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">fskd</a>.<a class="code" href="../../d0/d4b/structfsk__data.html#aee1863152c02a253f722ffb0fda8251d">f_space_idx</a> = 3; <span class="comment">/* 2200 Hz */</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="comment">/* cid-&gt;fskd.pcola = 0; */</span>       <span class="comment">/* No clue */</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="comment">/* cid-&gt;fskd.cont = 0.0; */</span>      <span class="comment">/* Digital PLL reset */</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="comment">/* cid-&gt;fskd.x0 = 0.0; */</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="comment">/* cid-&gt;fskd.state = 0; */</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      cid-&gt;<a class="code" href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> = <a class="code" href="../../de/d47/callerid_8h.html#a30f6e6391969dd024122f1fc9203b273">CID_UNKNOWN_NAME</a> | <a class="code" href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="comment">/* cid-&gt;pos = 0; */</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   <span class="keywordflow">return</span> cid;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div><div class="ttc" id="callerid_8h_html_a1290504d77210103d8553593671cc3c2"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a1290504d77210103d8553593671cc3c2">CID_UNKNOWN_NUMBER</a></div><div class="ttdeci">#define CID_UNKNOWN_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00055">callerid.h:55</a></div></div>
<div class="ttc" id="structfsk__data_html_abe6ea42d56bb6b1cf335146f0877d7a9"><div class="ttname"><a href="../../d0/d4b/structfsk__data.html#abe6ea42d56bb6b1cf335146f0877d7a9">fsk_data::nbit</a></div><div class="ttdeci">int nbit</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/fskmodem__float_8h_source.html#l00036">fskmodem_float.h:36</a></div></div>
<div class="ttc" id="structfsk__data_html_a47e2a2415d4ac2c2f1b3303b23dd35a6"><div class="ttname"><a href="../../d0/d4b/structfsk__data.html#a47e2a2415d4ac2c2f1b3303b23dd35a6">fsk_data::spb</a></div><div class="ttdeci">float spb</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/fskmodem__float_8h_source.html#l00035">fskmodem_float.h:35</a></div></div>
<div class="ttc" id="structcallerid__state_html"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html">callerid_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00045">callerid.c:45</a></div></div>
<div class="ttc" id="structfsk__data_html_aa619b3c011d659441b1d906ef66b58c6"><div class="ttname"><a href="../../d0/d4b/structfsk__data.html#aa619b3c011d659441b1d906ef66b58c6">fsk_data::pllids</a></div><div class="ttdeci">int pllids</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc5/fskmodem__int_8h_source.html#l00060">fskmodem_int.h:60</a></div></div>
<div class="ttc" id="fskmodem__int_8h_html_a183afaf79ee92e26e8aacd129d9be3cb"><div class="ttname"><a href="../../da/dc5/fskmodem__int_8h.html#a183afaf79ee92e26e8aacd129d9be3cb">fskmodem_init</a></div><div class="ttdeci">int fskmodem_init(fsk_data *fskd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d38/fskmodem__int_8c_source.html#l00195">fskmodem_int.c:195</a></div></div>
<div class="ttc" id="structfsk__data_html_a7161c14fc5f3607c82bc97762fca2262"><div class="ttname"><a href="../../d0/d4b/structfsk__data.html#a7161c14fc5f3607c82bc97762fca2262">fsk_data::nstop</a></div><div class="ttdeci">float nstop</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/fskmodem__float_8h_source.html#l00037">fskmodem_float.h:37</a></div></div>
<div class="ttc" id="structfsk__data_html_a09f48e0ccba89e108e701fa07300d102"><div class="ttname"><a href="../../d0/d4b/structfsk__data.html#a09f48e0ccba89e108e701fa07300d102">fsk_data::bw</a></div><div class="ttdeci">int bw</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/fskmodem__float_8h_source.html#l00044">fskmodem_float.h:44</a></div></div>
<div class="ttc" id="structfsk__data_html_a00899d7313f0bcad57ed0a95a3dd6f97"><div class="ttname"><a href="../../d0/d4b/structfsk__data.html#a00899d7313f0bcad57ed0a95a3dd6f97">fsk_data::ispb</a></div><div class="ttdeci">int ispb</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc5/fskmodem__int_8h_source.html#l00052">fskmodem_int.h:52</a></div></div>
<div class="ttc" id="structfsk__data_html_a8a334a19512bd0e0d3e322210ea86047"><div class="ttname"><a href="../../d0/d4b/structfsk__data.html#a8a334a19512bd0e0d3e322210ea86047">fsk_data::instop</a></div><div class="ttdeci">int instop</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc5/fskmodem__int_8h_source.html#l00046">fskmodem_int.h:46</a></div></div>
<div class="ttc" id="structfsk__data_html_a9272af2c74dc6b5e741fe38267b0a748"><div class="ttname"><a href="../../d0/d4b/structfsk__data.html#a9272af2c74dc6b5e741fe38267b0a748">fsk_data::pllispb</a></div><div class="ttdeci">int pllispb</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc5/fskmodem__int_8h_source.html#l00059">fskmodem_int.h:59</a></div></div>
<div class="ttc" id="structfsk__data_html_a755ded0cbde6a60feae7ad6113b8057c"><div class="ttname"><a href="../../d0/d4b/structfsk__data.html#a755ded0cbde6a60feae7ad6113b8057c">fsk_data::pllispb2</a></div><div class="ttdeci">int pllispb2</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc5/fskmodem__int_8h_source.html#l00061">fskmodem_int.h:61</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structfsk__data_html_aee1863152c02a253f722ffb0fda8251d"><div class="ttname"><a href="../../d0/d4b/structfsk__data.html#aee1863152c02a253f722ffb0fda8251d">fsk_data::f_space_idx</a></div><div class="ttdeci">int f_space_idx</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/fskmodem__float_8h_source.html#l00052">fskmodem_float.h:52</a></div></div>
<div class="ttc" id="structfsk__data_html_ae349656d51d3dfa03fd4ba13cf338e5a"><div class="ttname"><a href="../../d0/d4b/structfsk__data.html#ae349656d51d3dfa03fd4ba13cf338e5a">fsk_data::icont</a></div><div class="ttdeci">int icont</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc5/fskmodem__int_8h_source.html#l00053">fskmodem_int.h:53</a></div></div>
<div class="ttc" id="callerid_8h_html_a30f6e6391969dd024122f1fc9203b273"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a30f6e6391969dd024122f1fc9203b273">CID_UNKNOWN_NAME</a></div><div class="ttdeci">#define CID_UNKNOWN_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00054">callerid.h:54</a></div></div>
<div class="ttc" id="structcallerid__state_html_ac8bf36fe0577cba66bccda3a6f7e80a4"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#ac8bf36fe0577cba66bccda3a6f7e80a4">callerid_state::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00055">callerid.c:55</a></div></div>
<div class="ttc" id="structfsk__data_html_a55000e3ae1765fc3bcafb33740be41a9"><div class="ttname"><a href="../../d0/d4b/structfsk__data.html#a55000e3ae1765fc3bcafb33740be41a9">fsk_data::f_mark_idx</a></div><div class="ttdeci">int f_mark_idx</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/fskmodem__float_8h_source.html#l00051">fskmodem_float.h:51</a></div></div>
<div class="ttc" id="structcallerid__state_html_a89025e7d3ea985fe597c69e2d26c26ec"><div class="ttname"><a href="../../d2/d76/structcallerid__state.html#a89025e7d3ea985fe597c69e2d26c26ec">callerid_state::fskd</a></div><div class="ttdeci">fsk_data fskd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00046">callerid.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5a67c225a2440869e0b40486d23f46d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a67c225a2440869e0b40486d23f46d7">&#9670;&nbsp;</a></span>gen_tone()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void gen_tone </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>codec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ddr1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ddi1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>cr1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>ci1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00099">99</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d47/callerid_8h_source.html#l00078">AST_LIN2X</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00057">callerid_state::len</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00261">ast_gen_cas()</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   <span class="keywordtype">float</span> t;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>; x++) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      t = *cr1 * ddr1 - *ci1 * ddi1;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      *ci1 = *cr1 * ddi1 + *ci1 * ddr1;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      *cr1 = t;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      t = 2.0 - (*cr1 * *cr1 + *ci1 * *ci1);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      *cr1 *= t;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      *ci1 *= t;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[x] = <a class="code" href="../../de/d47/callerid_8h.html#afec677970850757078d74b852cbcd0ad">AST_LIN2X</a>(*cr1 * 8192.0);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="callerid_8h_html_afec677970850757078d74b852cbcd0ad"><div class="ttname"><a href="../../de/d47/callerid_8h.html#afec677970850757078d74b852cbcd0ad">AST_LIN2X</a></div><div class="ttdeci">#define AST_LIN2X(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00078">callerid.h:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e5cfdc91ca9e318b128a1dd68c9c1d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e5cfdc91ca9e318b128a1dd68c9c1d5">&#9670;&nbsp;</a></span>gen_tones()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void gen_tones </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>codec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ddr1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ddi1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ddr2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ddi2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>cr1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>ci1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>cr2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>ci2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00077">77</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d47/callerid_8h_source.html#l00078">AST_LIN2X</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00057">callerid_state::len</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00261">ast_gen_cas()</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;{</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   <span class="keywordtype">float</span> t;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>; x++) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      t = *cr1 * ddr1 - *ci1 * ddi1;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      *ci1 = *cr1 * ddi1 + *ci1 * ddr1;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      *cr1 = t;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      t = 2.0 - (*cr1 * *cr1 + *ci1 * *ci1);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      *cr1 *= t;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      *ci1 *= t;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      t = *cr2 * ddr2 - *ci2 * ddi2;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      *ci2 = *cr2 * ddi2 + *ci2 * ddr2;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      *cr2 = t;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      t = 2.0 - (*cr2 * *cr2 + *ci2 * *ci2);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      *cr2 *= t;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      *ci2 *= t;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[x] = <a class="code" href="../../de/d47/callerid_8h.html#afec677970850757078d74b852cbcd0ad">AST_LIN2X</a>((*cr1 + *cr2) * 2048.0);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="callerid_8h_html_afec677970850757078d74b852cbcd0ad"><div class="ttname"><a href="../../de/d47/callerid_8h.html#afec677970850757078d74b852cbcd0ad">AST_LIN2X</a></div><div class="ttdeci">#define AST_LIN2X(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00078">callerid.h:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a1fc9110f09a12aef8ba8a94479dc03c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fc9110f09a12aef8ba8a94479dc03c3">&#9670;&nbsp;</a></span>casdi1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float casdi1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00067">67</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00261">ast_gen_cas()</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00115">callerid_init()</a>.</p>

</div>
</div>
<a id="ac4647d3812e6efba4e068f86b2ab2574"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4647d3812e6efba4e068f86b2ab2574">&#9670;&nbsp;</a></span>casdi2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float casdi2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00067">67</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00261">ast_gen_cas()</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00115">callerid_init()</a>.</p>

</div>
</div>
<a id="acffc1e68a433ac6fd82d29d859805971"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acffc1e68a433ac6fd82d29d859805971">&#9670;&nbsp;</a></span>casdr1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float casdr1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00067">67</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00261">ast_gen_cas()</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00115">callerid_init()</a>.</p>

</div>
</div>
<a id="acb906a5386153c9b5cb1d078fb033443"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb906a5386153c9b5cb1d078fb033443">&#9670;&nbsp;</a></span>casdr2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float casdr2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00067">67</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00261">ast_gen_cas()</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00115">callerid_init()</a>.</p>

</div>
</div>
<a id="ae28e7a746ab99a470a022ff2eba08a88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae28e7a746ab99a470a022ff2eba08a88">&#9670;&nbsp;</a></span>cid_di</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float cid_di[4]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00064">64</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d47/callerid_8h_source.html#l00264">callerid_getcarrier()</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00115">callerid_init()</a>.</p>

</div>
</div>
<a id="a271c1c132faed1b658e2fba40c41b868"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a271c1c132faed1b658e2fba40c41b868">&#9670;&nbsp;</a></span>cid_dr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float cid_dr[4]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00064">64</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d47/callerid_8h_source.html#l00264">callerid_getcarrier()</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00115">callerid_init()</a>.</p>

</div>
</div>
<a id="af30a3f664009e7371f3dca3231f9fd8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af30a3f664009e7371f3dca3231f9fd8d">&#9670;&nbsp;</a></span>clidsb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float clidsb = 8000.0 / 1200.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00065">65</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

</div>
</div>
<a id="a0d68c9a4e83475478bcb1a12bc2ce416"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d68c9a4e83475478bcb1a12bc2ce416">&#9670;&nbsp;</a></span>connected_line_source_types</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d3/dbc/structast__value__translation.html">ast_value_translation</a> connected_line_source_types[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Translation table for connected line update source settings. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01268">1268</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

</div>
</div>
<a id="a225715f5e0e7e1627ba853fb7af1c50e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a225715f5e0e7e1627ba853fb7af1c50e">&#9670;&nbsp;</a></span>party_name_charset_tbl</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d3/dbc/structast__value__translation.html">ast_value_translation</a> party_name_charset_tbl[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Translation table for <a class="el" href="../../d8/d6f/structast__party__name.html" title="Information needed to specify a name in a call. ">ast_party_name</a> char-set settings. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01319">1319</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

</div>
</div>
<a id="adb60f093090a78a6ae7027b408099acf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb60f093090a78a6ae7027b408099acf">&#9670;&nbsp;</a></span>pres_types</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d3/dbc/structast__value__translation.html">ast_value_translation</a> pres_types[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Translation table for Caller ID Presentation settings. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01118">1118</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

</div>
</div>
<a id="a40bf393e22e6436775e8d2c8e9aa7d96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40bf393e22e6436775e8d2c8e9aa7d96">&#9670;&nbsp;</a></span>redirecting_reason_types</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d3/dbc/structast__value__translation.html">ast_value_translation</a> redirecting_reason_types[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Translation table for redirecting reason settings. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01196">1196</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

</div>
</div>
<a id="ae81f6b006f99cb8e2a8dca1b21eda4be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae81f6b006f99cb8e2a8dca1b21eda4be">&#9670;&nbsp;</a></span>sasdi</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float sasdi</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00066">66</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00261">ast_gen_cas()</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00115">callerid_init()</a>.</p>

</div>
</div>
<a id="a37d6e99cad72f8884d9c575ac45badb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37d6e99cad72f8884d9c575ac45badb9">&#9670;&nbsp;</a></span>sasdr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float sasdr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00066">66</a> of file <a class="el" href="../../dc/dd5/callerid_8c_source.html">callerid.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00261">ast_gen_cas()</a>, and <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00115">callerid_init()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:44:55 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
