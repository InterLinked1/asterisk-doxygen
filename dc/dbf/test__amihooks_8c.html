<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: test_amihooks.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_59425e443f801f1f2fd8bbe4959a3ccf.html">tests</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">test_amihooks.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Test AMI hook.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d45/manager_8h_source.html">asterisk/manager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for test_amihooks.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d34/test__amihooks_8c__incl.png" border="0" usemap="#test__amihooks_8c" alt=""/></div>
<map name="test__amihooks_8c" id="test__amihooks_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="481,229,565,256"/>
<area shape="rect" id="node22" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1406,80,1542,107"/>
<area shape="rect" id="node23" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1450,229,1564,256"/>
<area shape="rect" id="node31" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1274,155,1375,181"/>
<area shape="rect" id="node33" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="988,80,1133,107"/>
<area shape="rect" id="node37" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="1268,80,1381,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="622,453,776,480"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="534,304,672,331"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="376,304,510,331"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="626,528,772,555"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1148,379,1290,405"/>
<area shape="rect" id="node24" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="1012,304,1151,331"/>
<area shape="rect" id="node25" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1501,379,1564,405"/>
<area shape="rect" id="node26" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1176,304,1289,331"/>
<area shape="rect" id="node27" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1588,379,1714,405"/>
<area shape="rect" id="node28" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="1620,304,1767,331"/>
<area shape="rect" id="node29" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="831,304,988,331"/>
<area shape="rect" id="node30" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1314,304,1444,331"/>
<area shape="rect" id="node32" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1157,229,1308,256"/>
<area shape="rect" id="node34" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1098,155,1249,181"/>
<area shape="rect" id="node35" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="837,229,972,256"/>
<area shape="rect" id="node36" href="../../d0/d62/xml_8h.html" title="Asterisk XML abstraction layer. " alt="" coords="696,304,806,331"/>
</map>
</div>
</div>
<p><a href="../../dc/dbf/test__amihooks_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a60d401f420413a119c88879ab1a4ab58"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#a60d401f420413a119c88879ab1a4ab58">CATEGORY</a>&#160;&#160;&#160;&quot;/main/amihooks/&quot;</td></tr>
<tr class="separator:a60d401f420413a119c88879ab1a4ab58"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d204841e8bd42034a132e497f82584b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#a0d204841e8bd42034a132e497f82584b">amihook_helper</a> (int category, const char *<a class="el" href="../../df/d7d/structevent.html">event</a>, char *content)</td></tr>
<tr class="separator:a0d204841e8bd42034a132e497f82584b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a673ba2c9a27a1b630c6141335dfd6f87"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#a673ba2c9a27a1b630c6141335dfd6f87">AST_TEST_DEFINE</a> (amihook_cli_send)</td></tr>
<tr class="separator:a673ba2c9a27a1b630c6141335dfd6f87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a087d90880a248be7f0a265ac4bd4083a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#a087d90880a248be7f0a265ac4bd4083a">handle_cli_amihook_register_hook</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a087d90880a248be7f0a265ac4bd4083a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc4eadc13cc464d2862ba9092a8d4381"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#adc4eadc13cc464d2862ba9092a8d4381">handle_cli_amihook_send</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:adc4eadc13cc464d2862ba9092a8d4381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47ea95334b3a8b361bb09b86b2dea85a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#a47ea95334b3a8b361bb09b86b2dea85a">handle_cli_amihook_unregister_hook</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a47ea95334b3a8b361bb09b86b2dea85a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a925c2aac5ed1a3675f243528a1e99560"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#a925c2aac5ed1a3675f243528a1e99560">hook_send</a> (void)</td></tr>
<tr class="separator:a925c2aac5ed1a3675f243528a1e99560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a329e4c0640a0ac0159e83b379895bac2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#a329e4c0640a0ac0159e83b379895bac2">register_hook</a> (void)</td></tr>
<tr class="separator:a329e4c0640a0ac0159e83b379895bac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3918734388f7127bbbc9e1ca4c51768"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#ac3918734388f7127bbbc9e1ca4c51768">unregister_hook</a> (void)</td></tr>
<tr class="separator:ac3918734388f7127bbbc9e1ca4c51768"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f24812ef7a9a7bb78f7fc3d2a0aa650"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#a1f24812ef7a9a7bb78f7fc3d2a0aa650">wait_for_hook</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>)</td></tr>
<tr class="separator:a1f24812ef7a9a7bb78f7fc3d2a0aa650"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;AMI Hook Test Module&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af80d187cfd4885f6e4566c6b59bab740"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#af80d187cfd4885f6e4566c6b59bab740">cli_amihook_evt</a> []</td></tr>
<tr class="separator:af80d187cfd4885f6e4566c6b59bab740"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5992b274cfdcacdbc1fa8347fd01ebde"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a></td></tr>
<tr class="separator:a5992b274cfdcacdbc1fa8347fd01ebde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3903dafc94177a3165a6fb694914eea4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#a3903dafc94177a3165a6fb694914eea4">hook_cond</a></td></tr>
<tr class="separator:a3903dafc94177a3165a6fb694914eea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac191cce0d73209fccda0a3f055e955b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#aac191cce0d73209fccda0a3f055e955b">hook_lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:aac191cce0d73209fccda0a3f055e955b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf7dde2b7524d547853ec1104c1a4385"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d10/structmanager__custom__hook.html">manager_custom_hook</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/test__amihooks_8c.html#acf7dde2b7524d547853ec1104c1a4385">test_hook</a></td></tr>
<tr class="separator:acf7dde2b7524d547853ec1104c1a4385"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Test AMI hook. </p>
<dl class="section author"><dt>Author</dt><dd>David Brooks <a href="#" onclick="location.href='mai'+'lto:'+'dbr'+'oo'+'ks@'+'di'+'giu'+'m.'+'com'; return false;">dbroo<span style="display: none;">.nosp@m.</span>ks@d<span style="display: none;">.nosp@m.</span>igium<span style="display: none;">.nosp@m.</span>.com</a> based off of code written by Russell Bryant <a href="#" onclick="location.href='mai'+'lto:'+'rus'+'se'+'ll@'+'di'+'giu'+'m.'+'com'; return false;">russe<span style="display: none;">.nosp@m.</span>ll@d<span style="display: none;">.nosp@m.</span>igium<span style="display: none;">.nosp@m.</span>.com</a></dd></dl>
<p>This started, and continues to serves, as an example illustrating the ability for a custom module to hook into AMI. Registration for AMI events and sending of AMI actions is shown. A test has also been created that utilizes the original example in order to make sure the ami event hook gets raised. </p>

<p class="definition">Definition in file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a60d401f420413a119c88879ab1a4ab58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60d401f420413a119c88879ab1a4ab58">&#9670;&nbsp;</a></span>CATEGORY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CATEGORY&#160;&#160;&#160;&quot;/main/amihooks/&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00044">44</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00072">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00218">218</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00218">218</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

</div>
</div>
<a id="a0d204841e8bd42034a132e497f82584b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d204841e8bd42034a132e497f82584b">&#9670;&nbsp;</a></span>amihook_helper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int amihook_helper </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>content</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00095">95</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00048">done</a>, <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00047">hook_cond</a>, <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00046">hook_lock</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>.</p>
<div class="fragment"><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;{</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;AMI Event: \nCategory: %d Event: %s\n%s\n&quot;</span>, category, <a class="code" href="../../df/d7d/structevent.html">event</a>, content);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#aac191cce0d73209fccda0a3f055e955b">hook_lock</a>);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a> = 1;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#a3903dafc94177a3165a6fb694914eea4">hook_cond</a>);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#aac191cce0d73209fccda0a3f055e955b">hook_lock</a>);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div><div class="ttc" id="test__amihooks_8c_html_aac191cce0d73209fccda0a3f055e955b"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#aac191cce0d73209fccda0a3f055e955b">hook_lock</a></div><div class="ttdeci">static ast_mutex_t hook_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00046">test_amihooks.c:46</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_a3903dafc94177a3165a6fb694914eea4"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a3903dafc94177a3165a6fb694914eea4">hook_cond</a></div><div class="ttdeci">ast_cond_t hook_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00047">test_amihooks.c:47</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_a5992b274cfdcacdbc1fa8347fd01ebde"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a></div><div class="ttdeci">int done</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00048">test_amihooks.c:48</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00218">218</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

</div>
</div>
<a id="a673ba2c9a27a1b630c6141335dfd6f87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a673ba2c9a27a1b630c6141335dfd6f87">&#9670;&nbsp;</a></span>AST_TEST_DEFINE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">amihook_cli_send&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00072">72</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00044">CATEGORY</a>, <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00048">done</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00050">wait_for_hook()</a>.</p>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a60d401f420413a119c88879ab1a4ab58">CATEGORY</a>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Execute an action using an AMI hook&quot;</span>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;   <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a> = 0;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9">ast_cli_command</a>(-1, <span class="stringliteral">&quot;amihook send&quot;</span>)) {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;   }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a1f24812ef7a9a7bb78f7fc3d2a0aa650">wait_for_hook</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>) ? <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a> : <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div><div class="ttc" id="test__amihooks_8c_html_a1f24812ef7a9a7bb78f7fc3d2a0aa650"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a1f24812ef7a9a7bb78f7fc3d2a0aa650">wait_for_hook</a></div><div class="ttdeci">static int wait_for_hook(struct ast_test *test)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00050">test_amihooks.c:50</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_a60d401f420413a119c88879ab1a4ab58"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a60d401f420413a119c88879ab1a4ab58">CATEGORY</a></div><div class="ttdeci">#define CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00044">test_amihooks.c:44</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_a5992b274cfdcacdbc1fa8347fd01ebde"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a></div><div class="ttdeci">int done</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00048">test_amihooks.c:48</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9">ast_cli_command</a></div><div class="ttdeci">ast_cli_command</div><div class="ttdoc">calling arguments for new-style handlers. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00151">cli.h:151</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a087d90880a248be7f0a265ac4bd4083a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a087d90880a248be7f0a265ac4bd4083a">&#9670;&nbsp;</a></span>handle_cli_amihook_register_hook()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_amihook_register_hook </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00156">156</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00154">CLI_HANDLER</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00120">register_hook()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;{</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;amihook register&quot;</span>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> = <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;         <span class="stringliteral">&quot;Usage: amihook register&quot;</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;         <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a2e4a68503bbadbeacf842a24c7d7f2df">CLI_HANDLER</a>:</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a329e4c0640a0ac0159e83b379895bac2">register_hook</a>();</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;}</div><div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a2e4a68503bbadbeacf842a24c7d7f2df"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a2e4a68503bbadbeacf842a24c7d7f2df">CLI_HANDLER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00154">cli.h:154</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_a329e4c0640a0ac0159e83b379895bac2"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a329e4c0640a0ac0159e83b379895bac2">register_hook</a></div><div class="ttdeci">static void register_hook(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00120">test_amihooks.c:120</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adc4eadc13cc464d2862ba9092a8d4381"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc4eadc13cc464d2862ba9092a8d4381">&#9670;&nbsp;</a></span>handle_cli_amihook_send()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_amihook_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00137">137</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00154">CLI_HANDLER</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00111">hook_send()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;{</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;amihook send&quot;</span>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> = <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;         <span class="stringliteral">&quot;Usage: amihook send&quot;</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;         <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a2e4a68503bbadbeacf842a24c7d7f2df">CLI_HANDLER</a>:</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a925c2aac5ed1a3675f243528a1e99560">hook_send</a>();</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div><div class="ttc" id="test__amihooks_8c_html_a925c2aac5ed1a3675f243528a1e99560"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a925c2aac5ed1a3675f243528a1e99560">hook_send</a></div><div class="ttdeci">static int hook_send(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00111">test_amihooks.c:111</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a2e4a68503bbadbeacf842a24c7d7f2df"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a2e4a68503bbadbeacf842a24c7d7f2df">CLI_HANDLER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00154">cli.h:154</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a47ea95334b3a8b361bb09b86b2dea85a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47ea95334b3a8b361bb09b86b2dea85a">&#9670;&nbsp;</a></span>handle_cli_amihook_unregister_hook()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_amihook_unregister_hook </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00175">175</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00154">CLI_HANDLER</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00130">unregister_hook()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;{</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;amihook unregister&quot;</span>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> = <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;         <span class="stringliteral">&quot;Usage: amihook unregister&quot;</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;         <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a2e4a68503bbadbeacf842a24c7d7f2df">CLI_HANDLER</a>:</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <a class="code" href="../../dc/dbf/test__amihooks_8c.html#ac3918734388f7127bbbc9e1ca4c51768">unregister_hook</a>();</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div><div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_ac3918734388f7127bbbc9e1ca4c51768"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#ac3918734388f7127bbbc9e1ca4c51768">unregister_hook</a></div><div class="ttdeci">static void unregister_hook(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00130">test_amihooks.c:130</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a2e4a68503bbadbeacf842a24c7d7f2df"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a2e4a68503bbadbeacf842a24c7d7f2df">CLI_HANDLER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00154">cli.h:154</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a925c2aac5ed1a3675f243528a1e99560"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a925c2aac5ed1a3675f243528a1e99560">&#9670;&nbsp;</a></span>hook_send()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int hook_send </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00111">111</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l02937">ast_hook_send_action()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00137">handle_cli_amihook_send()</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                           {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;   <span class="comment">/* Send a test action (core show version) to the AMI */</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   res = <a class="code" href="../../df/d72/group__Group__AMI.html#gacc128abc0bb66879ef7743eea7a5d53f">ast_hook_send_action</a>(&amp;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#acf7dde2b7524d547853ec1104c1a4385">test_hook</a>, <span class="stringliteral">&quot;Action: Command\nCommand: core show version\nActionID: 987654321\n&quot;</span>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gacc128abc0bb66879ef7743eea7a5d53f"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gacc128abc0bb66879ef7743eea7a5d53f">ast_hook_send_action</a></div><div class="ttdeci">int ast_hook_send_action(struct manager_custom_hook *hook, const char *msg)</div><div class="ttdoc">Registered hooks can call this function to invoke actions and they will receive responses through reg...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02937">manager.c:2937</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_acf7dde2b7524d547853ec1104c1a4385"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#acf7dde2b7524d547853ec1104c1a4385">test_hook</a></div><div class="ttdeci">static struct manager_custom_hook test_hook</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00106">test_amihooks.c:106</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00207">207</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00127">AST_TEST_REGISTER</a>.</p>
<div class="fragment"><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;{</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   res = <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../dc/dbf/test__amihooks_8c.html#af80d187cfd4885f6e4566c6b59bab740">cli_amihook_evt</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/dbf/test__amihooks_8c.html#af80d187cfd4885f6e4566c6b59bab740">cli_amihook_evt</a>));</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(amihook_cli_send);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <span class="keywordflow">return</span> res ? <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a> : <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a34f64a69c09d98ceb693b077efd7ef97"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a></div><div class="ttdeci">#define AST_TEST_REGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00127">test.h:127</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_af80d187cfd4885f6e4566c6b59bab740"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#af80d187cfd4885f6e4566c6b59bab740">cli_amihook_evt</a></div><div class="ttdeci">static struct ast_cli_entry cli_amihook_evt[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00194">test_amihooks.c:194</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a329e4c0640a0ac0159e83b379895bac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a329e4c0640a0ac0159e83b379895bac2">&#9670;&nbsp;</a></span>register_hook()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void register_hook </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00120">120</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01934">ast_manager_register_hook()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01942">ast_manager_unregister_hook()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00156">handle_cli_amihook_register_hook()</a>.</p>
<div class="fragment"><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                                {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   <span class="comment">/* Unregister the hook, we don&#39;t want a double-registration (Bad Things(tm) happen) */</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga9592be65e0f9c99b7952a5841888757f">ast_manager_unregister_hook</a>(&amp;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#acf7dde2b7524d547853ec1104c1a4385">test_hook</a>);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   <span class="comment">/* Register the hook for AMI events */</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga9b312f4df19fa79a2185f41ff533516b">ast_manager_register_hook</a>(&amp;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#acf7dde2b7524d547853ec1104c1a4385">test_hook</a>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga9592be65e0f9c99b7952a5841888757f"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga9592be65e0f9c99b7952a5841888757f">ast_manager_unregister_hook</a></div><div class="ttdeci">void ast_manager_unregister_hook(struct manager_custom_hook *hook)</div><div class="ttdoc">Delete a custom hook to be called when an event is fired. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01942">manager.c:1942</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga9b312f4df19fa79a2185f41ff533516b"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga9b312f4df19fa79a2185f41ff533516b">ast_manager_register_hook</a></div><div class="ttdeci">void ast_manager_register_hook(struct manager_custom_hook *hook)</div><div class="ttdoc">Add a custom hook to be called when an event is fired. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01934">manager.c:1934</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_acf7dde2b7524d547853ec1104c1a4385"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#acf7dde2b7524d547853ec1104c1a4385">test_hook</a></div><div class="ttdeci">static struct manager_custom_hook test_hook</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00106">test_amihooks.c:106</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00200">200</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01942">ast_manager_unregister_hook()</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00128">AST_TEST_UNREGISTER</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;{</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(amihook_cli_send);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga9592be65e0f9c99b7952a5841888757f">ast_manager_unregister_hook</a>(&amp;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#acf7dde2b7524d547853ec1104c1a4385">test_hook</a>);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../dc/dbf/test__amihooks_8c.html#af80d187cfd4885f6e4566c6b59bab740">cli_amihook_evt</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/dbf/test__amihooks_8c.html#af80d187cfd4885f6e4566c6b59bab740">cli_amihook_evt</a>));</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga9592be65e0f9c99b7952a5841888757f"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga9592be65e0f9c99b7952a5841888757f">ast_manager_unregister_hook</a></div><div class="ttdeci">void ast_manager_unregister_hook(struct manager_custom_hook *hook)</div><div class="ttdoc">Delete a custom hook to be called when an event is fired. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01942">manager.c:1942</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="test_8h_html_a79bc64a935b14b1b181156e5ada58ead"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a></div><div class="ttdeci">#define AST_TEST_UNREGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00128">test.h:128</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_acf7dde2b7524d547853ec1104c1a4385"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#acf7dde2b7524d547853ec1104c1a4385">test_hook</a></div><div class="ttdeci">static struct manager_custom_hook test_hook</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00106">test_amihooks.c:106</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_af80d187cfd4885f6e4566c6b59bab740"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#af80d187cfd4885f6e4566c6b59bab740">cli_amihook_evt</a></div><div class="ttdeci">static struct ast_cli_entry cli_amihook_evt[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00194">test_amihooks.c:194</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3918734388f7127bbbc9e1ca4c51768"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3918734388f7127bbbc9e1ca4c51768">&#9670;&nbsp;</a></span>unregister_hook()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unregister_hook </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00130">130</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01942">ast_manager_unregister_hook()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00175">handle_cli_amihook_unregister_hook()</a>.</p>
<div class="fragment"><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                  {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   <span class="comment">/* Unregister the hook */</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga9592be65e0f9c99b7952a5841888757f">ast_manager_unregister_hook</a>(&amp;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#acf7dde2b7524d547853ec1104c1a4385">test_hook</a>);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga9592be65e0f9c99b7952a5841888757f"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga9592be65e0f9c99b7952a5841888757f">ast_manager_unregister_hook</a></div><div class="ttdeci">void ast_manager_unregister_hook(struct manager_custom_hook *hook)</div><div class="ttdoc">Delete a custom hook to be called when an event is fired. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01942">manager.c:1942</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_acf7dde2b7524d547853ec1104c1a4385"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#acf7dde2b7524d547853ec1104c1a4385">test_hook</a></div><div class="ttdeci">static struct manager_custom_hook test_hook</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00106">test_amihooks.c:106</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f24812ef7a9a7bb78f7fc3d2a0aa650"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f24812ef7a9a7bb78f7fc3d2a0aa650">&#9670;&nbsp;</a></span>wait_for_hook()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int wait_for_hook </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00050">50</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00048">done</a>, <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00047">hook_cond</a>, and <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00046">hook_lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00072">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      .tv_sec = start.tv_sec + 2,</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      .tv_nsec = start.tv_usec * 1000</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;   };</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#aac191cce0d73209fccda0a3f055e955b">hook_lock</a>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>) {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#a3903dafc94177a3165a6fb694914eea4">hook_cond</a>, &amp;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#aac191cce0d73209fccda0a3f055e955b">hook_lock</a>, &amp;timeout) == ETIMEDOUT) {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Test timed out while waiting for hook event\n&quot;</span>);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;         res = -1;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      }</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;   }</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#aac191cce0d73209fccda0a3f055e955b">hook_lock</a>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div><div class="ttc" id="test__amihooks_8c_html_aac191cce0d73209fccda0a3f055e955b"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#aac191cce0d73209fccda0a3f055e955b">hook_lock</a></div><div class="ttdeci">static ast_mutex_t hook_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00046">test_amihooks.c:46</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_a3903dafc94177a3165a6fb694914eea4"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a3903dafc94177a3165a6fb694914eea4">hook_cond</a></div><div class="ttdeci">ast_cond_t hook_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00047">test_amihooks.c:47</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_a5992b274cfdcacdbc1fa8347fd01ebde"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a></div><div class="ttdeci">int done</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00048">test_amihooks.c:48</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;AMI Hook Test Module&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00218">218</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00218">218</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

</div>
</div>
<a id="af80d187cfd4885f6e4566c6b59bab740"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af80d187cfd4885f6e4566c6b59bab740">&#9670;&nbsp;</a></span>cli_amihook_evt</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_amihook_evt[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   { .handler =  <a class="code" href="../../dc/dbf/test__amihooks_8c.html#adc4eadc13cc464d2862ba9092a8d4381">handle_cli_amihook_send</a> , .summary =  <span class="stringliteral">&quot;Send an AMI event&quot;</span> ,},</div><div class="line">   { .handler =  <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a087d90880a248be7f0a265ac4bd4083a">handle_cli_amihook_register_hook</a> , .summary =  <span class="stringliteral">&quot;Register module for AMI hook&quot;</span> ,},</div><div class="line">   { .handler =  <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a47ea95334b3a8b361bb09b86b2dea85a">handle_cli_amihook_unregister_hook</a> , .summary =  <span class="stringliteral">&quot;Unregister module for AMI hook&quot;</span> ,},</div><div class="line">}</div><div class="ttc" id="test__amihooks_8c_html_a47ea95334b3a8b361bb09b86b2dea85a"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a47ea95334b3a8b361bb09b86b2dea85a">handle_cli_amihook_unregister_hook</a></div><div class="ttdeci">static char * handle_cli_amihook_unregister_hook(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00175">test_amihooks.c:175</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_a087d90880a248be7f0a265ac4bd4083a"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a087d90880a248be7f0a265ac4bd4083a">handle_cli_amihook_register_hook</a></div><div class="ttdeci">static char * handle_cli_amihook_register_hook(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00156">test_amihooks.c:156</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_adc4eadc13cc464d2862ba9092a8d4381"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#adc4eadc13cc464d2862ba9092a8d4381">handle_cli_amihook_send</a></div><div class="ttdeci">static char * handle_cli_amihook_send(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00137">test_amihooks.c:137</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00194">194</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

</div>
</div>
<a id="a5992b274cfdcacdbc1fa8347fd01ebde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5992b274cfdcacdbc1fa8347fd01ebde">&#9670;&nbsp;</a></span>done</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int done</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00048">48</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l02704">__ast_answer()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l02420">__ast_cli_register()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03529">__ast_read()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l00432">__ast_sorcery_wizard_register()</a>, <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00095">amihook_helper()</a>, <a class="el" href="../../df/dd7/res__pjsip__endpoint__identifier__anonymous_8c_source.html#l00062">anonymous_identify()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l02939">ast_cli_command_full()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01494">ast_dsp_process()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02337">ast_rtp_instance_early_bridge()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02251">ast_rtp_instance_early_bridge_make_compatible()</a>, <a class="el" href="../../d8/d06/sip_2dialplan__functions_8c_source.html#l00359">AST_TEST_DEFINE()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05194">ast_write_stream()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l00937">ast_xmpp_chatroom_invite()</a>, <a class="el" href="../../d5/d92/features_8c_source.html#l01007">bridge_exec()</a>, <a class="el" href="../../d9/de0/stasis__bridge_8c_source.html#l00142">bridge_stasis_push_peek()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09152">close_mailbox()</a>, <a class="el" href="../../de/d6a/ie_8c_source.html#l00160">dec_ie_bearer()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l06852">dial_trunk()</a>, <a class="el" href="../../dd/d32/app__dictate_8c_source.html#l00087">dictate_exec()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08269">forward_message()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l05433">get_insecure_variable_from_sipregs()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01937">httpd_helper_thread()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l05734">iax2_indicate()</a>, <a class="el" href="../../d3/d96/loader_8c_source.html#l02338">load_modules()</a>, <a class="el" href="../../d3/d96/loader_8c_source.html#l02214">loader_config_init()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l01650">make_channel()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l16082">message_range_and_existence_check()</a>, <a class="el" href="../../d1/d27/bridge__native__rtp_8c_source.html#l00289">native_rtp_bridge_start()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01144">pbx_builtin_background()</a>, <a class="el" href="../../d7/d1b/app__playback_8c_source.html#l00442">playback_exec()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l02789">read_raw_content_length()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l01716">read_test()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l03434">retrydial_exec()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06937">session_do()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l06132">sla_stop_ringing_station()</a>, <a class="el" href="../../d7/d81/app__sms_8c_source.html#l01881">sms_exec()</a>, <a class="el" href="../../d4/d5b/app__speech__utils_8c_source.html#l00700">speech_background()</a>, <a class="el" href="../../d0/d2a/cdr__tds_8c_source.html#l00109">tds_log()</a>, <a class="el" href="../../d8/db9/test_8c_source.html#l00492">test_generate_results()</a>, <a class="el" href="../../df/dde/app__fax_8c_source.html#l00367">transmit_audio()</a>, <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00050">wait_for_hook()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l00968">xmpp_client_set_group_presence()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l02308">xmpp_client_set_presence()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l02192">xmpp_client_unsubscribe_user()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l02934">xmpp_component_register_get_hook()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l02995">xmpp_component_register_set_hook()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l02847">xmpp_component_service_discovery_get_hook()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l03042">xmpp_component_service_discovery_items_hook()</a>.</p>

</div>
</div>
<a id="a3903dafc94177a3165a6fb694914eea4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3903dafc94177a3165a6fb694914eea4">&#9670;&nbsp;</a></span>hook_cond</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> hook_cond</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00047">47</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00095">amihook_helper()</a>, and <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00050">wait_for_hook()</a>.</p>

</div>
</div>
<a id="aac191cce0d73209fccda0a3f055e955b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac191cce0d73209fccda0a3f055e955b">&#9670;&nbsp;</a></span>hook_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> hook_lock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00046">46</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00095">amihook_helper()</a>, and <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00050">wait_for_hook()</a>.</p>

</div>
</div>
<a id="acf7dde2b7524d547853ec1104c1a4385"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf7dde2b7524d547853ec1104c1a4385">&#9670;&nbsp;</a></span>test_hook</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d10/structmanager__custom__hook.html">manager_custom_hook</a> test_hook</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .file = __FILE__,</div><div class="line">   .helper = &amp;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#a0d204841e8bd42034a132e497f82584b">amihook_helper</a>,</div><div class="line">}</div><div class="ttc" id="test__amihooks_8c_html_a0d204841e8bd42034a132e497f82584b"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a0d204841e8bd42034a132e497f82584b">amihook_helper</a></div><div class="ttdeci">static int amihook_helper(int category, const char *event, char *content)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00095">test_amihooks.c:95</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00106">106</a> of file <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html">test_amihooks.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:53 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
