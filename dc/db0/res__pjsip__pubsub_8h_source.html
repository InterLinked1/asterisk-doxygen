<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_pjsip_pubsub.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">res_pjsip_pubsub.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../dc/db0/res__pjsip__pubsub_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Asterisk -- An open source telephony toolkit.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 2013, Digium, Inc.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Mark Michelson &lt;mmichelson@digium.com&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * See http://www.asterisk.org for more information about</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * the Asterisk project. Please do not directly contact</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * any of the maintainers of this project for assistance;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * the project provides a web site, mailing lists and IRC</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * channels for your use.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * This program is free software, distributed under the terms of</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * at the top of the source tree.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#ifndef _RES_PJSIP_PUBSUB_H</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#define _RES_PJSIP_PUBSUB_H</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d90/linkedlists_8h.html">asterisk/linkedlists.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/* Forward declarations */</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">struct </span>pjsip_rx_data;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">struct </span>pjsip_tx_data;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">struct </span>pjsip_evsub;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">struct </span><a class="code" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a>;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a>;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">struct </span><a class="code" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a>;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * \brief Opaque structure representing a publication</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a>;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562">   37</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562">ast_sip_publish_state</a> {<span class="comment"></span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">    /*! Publication has just been initialized */</span></div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562ab368f4beb502956f3544f351c116ade6">   39</a></span>&#160;    <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562ab368f4beb502956f3544f351c116ade6">AST_SIP_PUBLISH_STATE_INITIALIZED</a>,<span class="comment"></span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">    /*! Publication is currently active */</span></div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562a5d64d62e9e58a0f155318ab2bc94ade3">   41</a></span>&#160;    <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562a5d64d62e9e58a0f155318ab2bc94ade3">AST_SIP_PUBLISH_STATE_ACTIVE</a>,<span class="comment"></span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">    /*! Publication has been terminated */</span></div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562a797a8ff87d8dc4f37be06d27c0687352">   43</a></span>&#160;    <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562a797a8ff87d8dc4f37be06d27c0687352">AST_SIP_PUBLISH_STATE_TERMINATED</a>,</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;};</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> * \brief Callbacks that publication handlers will define</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="../../d5/d9f/structast__sip__publish__handler.html">   49</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d5/d9f/structast__sip__publish__handler.html">ast_sip_publish_handler</a> {<span class="comment"></span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">   /*! \brief The name of the event this handler deals with */</span></div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="../../d5/d9f/structast__sip__publish__handler.html#aeccf279e6fca0e5f8536fdf76c838728">   51</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d9f/structast__sip__publish__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">   /*! \brief Publications */</span></div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../d5/d9f/structast__sip__publish__handler.html#aac80748c488a3724f6ab7e1ef4b73530">   54</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../d5/d9f/structast__sip__publish__handler.html#aac80748c488a3724f6ab7e1ef4b73530">publications</a>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">    * \brief Called when a PUBLISH to establish a new publication arrives.</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">    * \param endpoint The endpoint from whom the PUBLISH arrived.</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">    * \param resource The resource whose state is being published.</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">    * \param event_configuration The name of the event type configuration to use for this resource.</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">    * \return Response code for the incoming PUBLISH</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="../../d5/d9f/structast__sip__publish__handler.html#a3bcafa1a0d7e03921ef2883953be90ae">   64</a></span>&#160;   int (*<a class="code" href="../../d5/d9f/structast__sip__publish__handler.html#a3bcafa1a0d7e03921ef2883953be90ae">new_publication</a>)(<span class="keyword">struct </span><a class="code" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, <span class="keyword">const</span> <span class="keywordtype">char</span> *resource, <span class="keyword">const</span> <span class="keywordtype">char</span> *event_configuration);<span class="comment"></span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">    * \brief Called when a publication has reached its expiration.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="../../d5/d9f/structast__sip__publish__handler.html#a26ee2c39a0ad034e88f91562a94c1327">   68</a></span>&#160;   void (*<a class="code" href="../../d5/d9f/structast__sip__publish__handler.html#a26ee2c39a0ad034e88f91562a94c1327">publish_expire</a>)(<span class="keyword">struct </span><a class="code" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *pub);<span class="comment"></span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">    * \brief Published resource has changed states.</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">    * The state parameter can be used to take further action. For instance,</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">    * if the state is AST_SIP_PUBLISH_STATE_INITIALIZED, then this is the initial</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">    * PUBLISH request. This is a good time to set up datastores on the publication</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">    * or any other initial needs.</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">    * AST_SIP_PUBLISH_STATE_TERMINATED is used when the remote end is terminating</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">    * its publication. This is a good opportunity to free any resources associated with</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">    * the publication.</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">    * AST_SIP_PUBLISH_STATE_ACTIVE is used when a publication that modifies state</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">    * arrives.</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">    * \param pub The publication whose state has changed</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">    * \param body The body of the inbound PUBLISH</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">    * \param state The state of the publication</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="../../d5/d9f/structast__sip__publish__handler.html#af0ab5befc3e79fb52d28e243c8ac14e0">   88</a></span>&#160;   int (*<a class="code" href="../../d5/d9f/structast__sip__publish__handler.html#af0ab5befc3e79fb52d28e243c8ac14e0">publication_state_change</a>)(<span class="keyword">struct </span><a class="code" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *pub, pjsip_msg_body *body,</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;         <span class="keyword">enum</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562">ast_sip_publish_state</a> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>);</div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="../../d5/d9f/structast__sip__publish__handler.html#a6ad12c15b9231aec95e53a632ff79a56">   90</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../d5/d9f/structast__sip__publish__handler.html">ast_sip_publish_handler</a>) <a class="code" href="../../d5/d9f/structast__sip__publish__handler.html#a6ad12c15b9231aec95e53a632ff79a56">next</a>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;};</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> * \brief Given a publication, get the associated endpoint</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"> * \param pub The publication</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"> * \retval NULL Failure</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"> * \retval non-NULL The associated endpoint</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="keyword">struct </span><a class="code" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#adf23ea14cf21cc35810a043bed318bb6">ast_sip_publication_get_endpoint</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *pub);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"> * \brief Given a publication, get the resource the publication is to</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> * \param pub The publication</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"> * \return The resource</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#ac1dd2ba4db4cb10f5d1813886503bd96">ast_sip_publication_get_resource</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *pub);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"> * \brief Given a publication, get the configuration name for the event type in use</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"> * \param pub The publication</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment"> * \return The configuration name</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#ada9f3d03df5f52f4aeb09f6d952f46de">ast_sip_publication_get_event_configuration</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *pub);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"> * \brief Register a publish handler</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"> * \retval 0 Handler was registered successfully</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"> * \retval non-zero Handler was not registered successfully</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a14d30548053458724404f5c041483cfa">ast_sip_register_publish_handler</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d9f/structast__sip__publish__handler.html">ast_sip_publish_handler</a> *<a class="code" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> * \brief Unregister a publish handler</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a65b342a28c864a472dfff5ea27de8691">ast_sip_unregister_publish_handler</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d9f/structast__sip__publish__handler.html">ast_sip_publish_handler</a> *<a class="code" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"> * \brief Add a datastore to a SIP publication</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"> * Note that SIP uses reference counted datastores. The datastore passed into this function</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"> * must have been allocated using ao2_alloc() or there will be serious problems.</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"> * \param publication The publication to add the datastore to</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"> * \param datastore The datastore to be added to the subscription</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"> * \retval 0 Success</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"> * \retval -1 Failure</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#aefd01cccb44e52e8c576785903382206">ast_sip_publication_add_datastore</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *publication, <span class="keyword">struct</span> <a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment"> * \brief Retrieve a publication datastore</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"> * The datastore retrieved will have its reference count incremented. When the caller is done</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"> * with the datastore, the reference counted needs to be decremented using ao2_ref().</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"> * \param publication The publication from which to retrieve the datastore</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"> * \param name The name of the datastore to retrieve</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"> * \retval NULL Failed to find the specified datastore</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"> * \retval non-NULL The specified datastore</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a69501f479a8ea3b0d1b6c4b8439e03c9">ast_sip_publication_get_datastore</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *publication, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"> * \brief Remove a publication datastore from the publication</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment"> * This operation may cause the datastore&#39;s free() callback to be called if the reference</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"> * count reaches zero.</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"> * \param publication The publication to remove the datastore from</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"> * \param name The name of the datastore to remove</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a60c370a28e03a8dc64e6b1cf9f277194">ast_sip_publication_remove_datastore</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *publication, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"> * \brief Get the datastores container for a publication</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"> * \param publication The publication to get the datastores container from</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"> * \retval NULL datastores container not present</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"> * \retval non-NULL datastores container</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"> * \note The container is NOT returned with reference count bumped</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment"> * \since 14.0.0</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#aa8ca8ca978fb48dc5a57ce618b36c0b5">ast_sip_publication_get_datastores</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *publication);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"> * \brief Opaque structure representing an RFC 3265 SIP subscription</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="keyword">struct </span><a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment"> * \brief Role for the subscription that is being created</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20">  190</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20">ast_sip_subscription_role</a> {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <span class="comment">/* Sending SUBSCRIBEs, receiving NOTIFYs */</span></div><div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20a3c10d5621e8e7278503d4ea4c13cedc1">  192</a></span>&#160;   <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20a3c10d5621e8e7278503d4ea4c13cedc1">AST_SIP_SUBSCRIBER</a>,</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <span class="comment">/* Sending NOTIFYs, receiving SUBSCRIBEs */</span></div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20ab72ff83a6adb7eae0bf918c8e3f5cf49">  194</a></span>&#160;   <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20ab72ff83a6adb7eae0bf918c8e3f5cf49">AST_SIP_NOTIFIER</a>,</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;};</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"> * \brief Data for responses to SUBSCRIBEs and NOTIFIEs</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"> * Some of PJSIP&#39;s evsub callbacks expect us to provide them</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"> * with data so that they can craft a response rather than have</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"> * us create our own response.</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"> * Filling in the structure is optional, since the framework</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"> * will automatically respond with a 200 OK response if we do</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment"> * not provide it with any additional data.</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="../../da/d9e/structast__sip__subscription__response__data.html">  208</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../da/d9e/structast__sip__subscription__response__data.html">ast_sip_subscription_response_data</a> {<span class="comment"></span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">   /*! Status code of the response */</span></div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="../../da/d9e/structast__sip__subscription__response__data.html#ac275fb0ffa19246e789b4c3c9febcf00">  210</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../da/d9e/structast__sip__subscription__response__data.html#ac275fb0ffa19246e789b4c3c9febcf00">status_code</a>;<span class="comment"></span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">   /*! Optional status text */</span></div><div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="../../da/d9e/structast__sip__subscription__response__data.html#a02f62480fb9b4a963d2cc2d8d4f6616a">  212</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d9e/structast__sip__subscription__response__data.html#a02f62480fb9b4a963d2cc2d8d4f6616a">status_text</a>;<span class="comment"></span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">   /*! Optional additional headers to add to the response */</span></div><div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="../../da/d9e/structast__sip__subscription__response__data.html#a868b834ff08995eb5259bdaad5494305">  214</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../da/d9e/structast__sip__subscription__response__data.html#a868b834ff08995eb5259bdaad5494305">headers</a>;<span class="comment"></span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">   /*! Optional body to add to the response */</span></div><div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="../../da/d9e/structast__sip__subscription__response__data.html#aba9589a3f064d8a135ae114031013e78">  216</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *<a class="code" href="../../da/d9e/structast__sip__subscription__response__data.html#aba9589a3f064d8a135ae114031013e78">body</a>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;};</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="../../dc/db0/res__pjsip__pubsub_8h.html#a1521854cc25592b7f8a58a4bed55ac6d">  219</a></span>&#160;<span class="preprocessor">#define AST_SIP_MAX_ACCEPT 32</span></div><div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8">  220</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8">ast_sip_subscription_notify_reason</a> {<span class="comment"></span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">   /*! Initial NOTIFY for subscription */</span></div><div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8a5ecfc46fb4337bd9d5c9f2253e197583">  222</a></span>&#160;   <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8a5ecfc46fb4337bd9d5c9f2253e197583">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_STARTED</a>,<span class="comment"></span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">   /*! Subscription has been renewed */</span></div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8a2cf7cc98f2ea79c84c94f7e5a9dfeae0">  224</a></span>&#160;   <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8a2cf7cc98f2ea79c84c94f7e5a9dfeae0">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_RENEWED</a>,<span class="comment"></span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">   /*! Subscription is being terminated */</span></div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8ad77cd10aac8a016474e1595c2342a90e">  226</a></span>&#160;   <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8ad77cd10aac8a016474e1595c2342a90e">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_TERMINATED</a>,<span class="comment"></span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">   /*! Other unspecified reason */</span></div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8ac605eaafb5b7ba1aefd0011850f1eb21">  228</a></span>&#160;   <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8ac605eaafb5b7ba1aefd0011850f1eb21">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_OTHER</a></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;};</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">/*! Type used for extension state/presence */</span></div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="../../dc/db0/res__pjsip__pubsub_8h.html#adabdcafc2b4700a1c7727ac147f27639">  232</a></span>&#160;<span class="preprocessor">#define AST_SIP_EXTEN_STATE_DATA &quot;ast_sip_exten_state_data&quot;</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">/*! Type used for conveying mailbox state */</span></div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9632d729a323355beec62acda995cc21">  234</a></span>&#160;<span class="preprocessor">#define AST_SIP_MESSAGE_ACCUMULATOR &quot;ast_sip_message_accumulator&quot;</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment"> * \brief Data used to create bodies for NOTIFY/PUBLISH requests.</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="../../d1/de8/structast__sip__body__data.html">  239</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d1/de8/structast__sip__body__data.html">ast_sip_body_data</a> {<span class="comment"></span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">   /*! The type of the data */</span></div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="../../d1/de8/structast__sip__body__data.html#a35514bc6335d541353cf54c7146e8ce5">  241</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d1/de8/structast__sip__body__data.html#a35514bc6335d541353cf54c7146e8ce5">body_type</a>;<span class="comment"></span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">   /*! The actual data from which the body is generated */</span></div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="../../d1/de8/structast__sip__body__data.html#a086f833f6f250c98d7bcd80f9a573d06">  243</a></span>&#160;   <span class="keywordtype">void</span> *<a class="code" href="../../d1/de8/structast__sip__body__data.html#a086f833f6f250c98d7bcd80f9a573d06">body_data</a>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;};</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="../../d1/d5b/structast__sip__notifier.html">  246</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d1/d5b/structast__sip__notifier.html">ast_sip_notifier</a> {<span class="comment"></span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">    * \brief Default body type defined for the event package this notifier handles.</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">    * Typically, a SUBSCRIBE request will contain one or more Accept headers that tell</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">    * what format they expect the body of NOTIFY requests to use. However, every event</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">    * package is required to define a default body format type to be used if a SUBSCRIBE</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">    * request for the event contains no Accept header.</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="../../d1/d5b/structast__sip__notifier.html#ad1e64b1a6297045eb98ac47f56591b0f">  255</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d1/d5b/structast__sip__notifier.html#ad1e64b1a6297045eb98ac47f56591b0f">default_accept</a>;<span class="comment"></span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">    * \brief Called when a SUBSCRIBE arrives attempting to establish a new subscription.</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">    * The notifier is expected to return the response that should be sent to the</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">    * SUBSCRIBE request.</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">    * If a 200-class response is returned, then the notifier&#39;s notify_required</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">    * callback will immediately be called into with a reason of</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">    * AST_SIP_SUBSCRIPTION_NOTIFY_REASON_STARTED.</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">    * \param endpoint The endpoint from which we received the SUBSCRIBE</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">    * \param resource The name of the resource to which the subscription is being made</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">    * \return The response code to send to the SUBSCRIBE.</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="../../d1/d5b/structast__sip__notifier.html#a0772d90dd533f5d4d50dccaad8817843">  270</a></span>&#160;   int (*<a class="code" href="../../d2/d3d/res__pjsip__exten__state_8c.html#aeadff6190808255f709da23129cc62b1">new_subscribe</a>)(<span class="keyword">struct </span><a class="code" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, <span class="keyword">const</span> <span class="keywordtype">char</span> *resource);<span class="comment"></span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">    * \brief Called when an inbound subscription has been accepted.</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">    * This is a prime opportunity for notifiers to add any notifier-specific</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">    * data to the subscription (such as datastores) that it needs to.</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">    * \note There is no need to send a NOTIFY request when this callback</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">    * is called</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">    * \param sub The new subscription</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">    * \retval 0 Success</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">    * \retval -1 Failure</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="../../d1/d5b/structast__sip__notifier.html#ae3f8912b4a41553688ad665f170c6a91">  284</a></span>&#160;   int (*<a class="code" href="../../d2/d3d/res__pjsip__exten__state_8c.html#a9b6bcc7a1b06e8224618d36d94b85f70">subscription_established</a>)(<span class="keyword">struct </span><a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);<span class="comment"></span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">    * \brief Supply data needed to create a NOTIFY body.</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">    * The returned data must be an ao2 object. The caller of this function</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">    * will be responsible for decrementing the refcount of the returned object</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">    * \param sub The subscription</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">    * \return An ao2 object that can be used to create a NOTIFY body.</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="../../d1/d5b/structast__sip__notifier.html#ac400184f8d9f71baaaf9d294d33c1ca8">  294</a></span>&#160;   <span class="keywordtype">void</span> *(*get_notify_data)(<span class="keyword">struct </span><a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;};</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="../../db/dd4/structast__sip__subscriber.html">  297</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../db/dd4/structast__sip__subscriber.html">ast_sip_subscriber</a> {<span class="comment"></span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">    * \brief A NOTIFY has been received.</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">    * The body of the NOTIFY is provided so that it may be parsed and appropriate</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">    * internal state change may be generated.</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">    * The state can be used to determine if the subscription has been terminated</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">    * by the far end or if this is just a typical resource state change.</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">    * \param sub The subscription on which the NOTIFY arrived</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">    * \param body The body of the NOTIFY</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">    * \param state The subscription state</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="../../db/dd4/structast__sip__subscriber.html#a6cd23572cbfc2d0302ac6929a18a975b">  311</a></span>&#160;   void (*<a class="code" href="../../d9/d66/structstate__change.html">state_change</a>)(<span class="keyword">struct </span><a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, pjsip_msg_body *body, <span class="keyword">enum</span> pjsip_evsub_state <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;};</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="../../d8/d6c/structast__sip__subscription__handler.html">  314</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a> {<span class="comment"></span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">   /*! The name of the event this subscriber deals with */</span></div><div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="../../d8/d6c/structast__sip__subscription__handler.html#aeccf279e6fca0e5f8536fdf76c838728">  316</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>;<span class="comment"></span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">   /*! Type of data used to generate NOTIFY bodies */</span></div><div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="../../d8/d6c/structast__sip__subscription__handler.html#a35514bc6335d541353cf54c7146e8ce5">  318</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html#a35514bc6335d541353cf54c7146e8ce5">body_type</a>;<span class="comment"></span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">   /*! The types of body this subscriber accepts. */</span></div><div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="../../d8/d6c/structast__sip__subscription__handler.html#a37cb3e0e7b0966a69f790d8d182d8cd0">  320</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *accept[<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a1521854cc25592b7f8a58a4bed55ac6d">AST_SIP_MAX_ACCEPT</a>];<span class="comment"></span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">    * \brief Called when a subscription is to be destroyed</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">    * The handler is not expected to send any sort of requests or responses</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">    * during this callback. The handler MUST, however, begin the destruction</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">    * process for the subscription during this callback.</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="../../d8/d6c/structast__sip__subscription__handler.html#aafe0a2289a5de4ddc780067899f70eaa">  328</a></span>&#160;   void (*<a class="code" href="../../d2/d3d/res__pjsip__exten__state_8c.html#a8914f5b597fd3f724ebb90da26565da7">subscription_shutdown</a>)(<span class="keyword">struct </span><a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *subscription);<span class="comment"></span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">    * \brief Converts the subscriber to AMI</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">    * \param sub The subscription</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">    * \param buf The string to write AMI data</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="../../d8/d6c/structast__sip__subscription__handler.html#a2cdc6ead7e87bb0cd7c01b2445b0f60d">  335</a></span>&#160;   void (*<a class="code" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a>)(<span class="keyword">struct </span><a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> **<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>);<span class="comment"></span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">   /*! Subscriber callbacks for this handler */</span></div><div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="../../d8/d6c/structast__sip__subscription__handler.html#aa63e03b2552c36d21f2bb7bffd26a06a">  337</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dd4/structast__sip__subscriber.html">ast_sip_subscriber</a> *<a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html#aa63e03b2552c36d21f2bb7bffd26a06a">subscriber</a>;<span class="comment"></span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">   /*! Notifier callbacks for this handler */</span></div><div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="../../d8/d6c/structast__sip__subscription__handler.html#a06762434263891503f1fe196fd2cf613">  339</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d5b/structast__sip__notifier.html">ast_sip_notifier</a> *<a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html#a06762434263891503f1fe196fd2cf613">notifier</a>;</div><div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="../../d8/d6c/structast__sip__subscription__handler.html#a2e4aa60e677c95983d44693bd69bc1be">  340</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a>) <a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html#a2e4aa60e677c95983d44693bd69bc1be">next</a>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;};</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"> * \brief Create a new ast_sip_subscription structure</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment"> * When a subscriber wishes to create a subscription, it may call this function</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment"> * to allocate resources and to send the initial SUBSCRIBE out.</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"> * \param subscriber The subscriber that is making the request.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment"> * \param endpoint The endpoint to whome the SUBSCRIBE will be sent.</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment"> * \param resource The resource to place in the SUBSCRIBE&#39;s Request-URI.</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="keyword">struct </span><a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#adcc803ec5ffc0029b9be176cc090f135">ast_sip_create_subscription</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a> *<a class="code" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>,</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keyword">struct</span> <a class="code" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, <span class="keyword">const</span> <span class="keywordtype">char</span> *resource);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"> * \brief Get the pjsip dialog that is associated with this subscription</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment"> * \since 13.9.0</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment"> * \retval NULL Could not get dialog</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment"> * \retval non-NULL The dialog</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;pjsip_dialog *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#aa6471e6d6f4563ef5fb93343180fea40">ast_sip_subscription_get_dialog</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"> * \brief Get the endpoint that is associated with this subscription</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment"> * This function will increase the reference count of the endpoint. Be sure to</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment"> * release the reference to it when you are finished with the endpoint.</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"> * \retval NULL Could not get endpoint</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment"> * \retval non-NULL The endpoint</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="keyword">struct </span><a class="code" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#abce1c0cc1320bb801480d0929266d08f">ast_sip_subscription_get_endpoint</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment"> * \brief Get the serializer for the subscription</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"> * Tasks that originate outside of a SIP servant thread should get the serializer</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"> * and push the task to the serializer.</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment"> * \param sub The subscription</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment"> * \retval NULL Failure</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment"> * \retval non-NULL The subscription&#39;s serializer</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a81489602b194ea87cae6470409bee3b5">ast_sip_subscription_get_serializer</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"> * \brief Notify a SIP subscription of a state change.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment"> * This tells the pubsub core that the state of a subscribed resource has changed.</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"> * The pubsub core will generate an appropriate NOTIFY request to send to the</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment"> * subscriber.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment"> * \param sub The subscription on which a state change is occurring.</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment"> * \param notify_data Event package-specific data used to create the NOTIFY body.</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment"> * \param terminate True if this NOTIFY is intended to terminate the subscription.</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment"> * \retval 0 Success</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment"> * \retval non-zero Failure</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a5b0f67be0ca6ad54e4eba8d4aa029faf">ast_sip_subscription_notify</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <span class="keyword">struct</span> <a class="code" href="../../d1/de8/structast__sip__body__data.html">ast_sip_body_data</a> *<a class="code" href="../../d4/d18/structnotify__data.html">notify_data</a>, <span class="keywordtype">int</span> terminate);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment"> * \brief Retrieve the local sip uri for this subscription</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment"> * \since 13.9.0</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment"> * This is the local sip URI of the subscribed resource.</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment"> * \param sub The subscription</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment"> * \retval NULL Could not get uri</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment"> * \retval non-NULL The local pjsip_sip_uri</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;pjsip_sip_uri *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a79792c0d3a54f779754479075e3c80b3">ast_sip_subscription_get_sip_uri</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment"> * \brief Retrieve the local URI for this subscription</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment"> * This is the local URI of the subscribed resource.</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment"> * \param sub The subscription</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"> * \param[out] buf The buffer into which to store the URI.</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment"> * \param size The size of the buffer.</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#aeb411f16e0fee4036a22b354164b43a6">ast_sip_subscription_get_local_uri</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="keywordtype">size_t</span> size);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment"> * \brief Retrive the remote URI for this subscription</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"> * This is the remote URI as determined by the underlying SIP dialog.</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment"> * \param sub The subscription</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment"> * \param[out] buf The buffer into which to store the URI.</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment"> * \param size The size of the buffer.</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0cb53b1ca63b4b97b4b3fa8721274ee9">ast_sip_subscription_get_remote_uri</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="keywordtype">size_t</span> size);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment"> * \brief Get the name of the subscribed resource.</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a2d7ed3f8785ad9d9aa3fc090d983c45d">ast_sip_subscription_get_resource_name</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment"> * \brief Get whether the subscription has been terminated or not.</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment"> * \param sub The subscription.</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment"> * \retval 0 not terminated.</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment"> * \retval 1 terminated.</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment"> * \since 13.4.0</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#ae741d1ec08fd26b810d24514e510dad8">ast_sip_subscription_is_terminated</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment"> * \brief Get a header value for a subscription.</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment"> * For notifiers, the headers of the inbound SUBSCRIBE that started the dialog</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"> * are stored on the subscription. This method allows access to the header. The</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment"> * return is the same as pjsip_msg_find_hdr_by_name(), meaning that it is dependent</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment"> * on the header being searched for.</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment"> * \param sub The subscription to search in.</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"> * \param header The name of the header to search for.</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"> * \return The discovered header, or NULL if the header cannot be found.</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="keywordtype">void</span> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a4034b13c08bafa4bff82854bcc0ce135">ast_sip_subscription_get_header</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d65/structheader.html">header</a>);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment"> * \brief Send a request created via a PJSIP evsub method</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment"> * Callers of this function should take care to do so within a SIP servant</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment"> * thread.</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment"> * \param sub The subscription on which to send the request</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment"> * \param tdata The request to send</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"> * \retval 0 Success</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"> * \retval non-zero Failure</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a57948a70c8607d9fb37f687da1ad4c25">ast_sip_subscription_send_request</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, pjsip_tx_data *tdata);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"> * \brief Alternative for ast_datastore_alloc()</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment"> * There are two major differences between this and ast_datastore_alloc()</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment"> * 1) This allocates a refcounted object</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"> * 2) This will fill in a uid if one is not provided</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment"> * DO NOT call ast_datastore_free() on a datastore allocated in this</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment"> * way since that function will attempt to free the datastore rather</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment"> * than play nicely with its refcount.</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment"> * \param info Callbacks for datastore</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment"> * \param uid Identifier for datastore</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"> * \retval NULL Failed to allocate datastore</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment"> * \retval non-NULL Newly allocated datastore</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a5d3ad3f5c55c026e22e1103686227ae0">ast_sip_subscription_alloc_datastore</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> *<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">uid</a>);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment"> * \brief Add a datastore to a SIP subscription</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment"> * Note that SIP uses reference counted datastores. The datastore passed into this function</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment"> * must have been allocated using ao2_alloc() or there will be serious problems.</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment"> * \param subscription The ssubscription to add the datastore to</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment"> * \param datastore The datastore to be added to the subscription</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment"> * \retval 0 Success</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment"> * \retval -1 Failure</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a68314dedb48b2799a693d3a090ae038b">ast_sip_subscription_add_datastore</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *subscription, <span class="keyword">struct</span> <a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment"> * \brief Retrieve a subscription datastore</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment"> * The datastore retrieved will have its reference count incremented. When the caller is done</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment"> * with the datastore, the reference counted needs to be decremented using ao2_ref().</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment"> * \param subscription The subscription from which to retrieve the datastore</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment"> * \param name The name of the datastore to retrieve</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment"> * \retval NULL Failed to find the specified datastore</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment"> * \retval non-NULL The specified datastore</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a5ad2231cd4e17cd5a713f0c7cea20da4">ast_sip_subscription_get_datastore</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *subscription, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"> * \brief Remove a subscription datastore from the subscription</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"> * This operation may cause the datastore&#39;s free() callback to be called if the reference</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment"> * count reaches zero.</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment"> * \param subscription The subscription to remove the datastore from</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment"> * \param name The name of the datastore to remove</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a3c257396060f400b0fba424730e7576e">ast_sip_subscription_remove_datastore</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *subscription, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment"> * \brief Get the datastores container for a subscription</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment"> * \param subscription The subscription to get the datastores container from</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment"> * \retval NULL datastores container not present</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment"> * \retval non-NULL datastores container</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment"> * \note The container is NOT returned with reference count bumped</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment"> * \since 14.0.0</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#acd22eade3d3a1bfce2d9acf505d34b1a">ast_sip_subscription_get_datastores</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *subscription);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment"> * \since 13.31.0</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment"> * \since 16.8.0</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment"> * \since 17.2.0</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment"> * \brief Set persistence data for a subscription</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment"> * \param subscription The subscription to set persistence data on</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment"> * \param persistence_data The persistence data to set</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment"> * \note This steals the reference to persistence_data</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a823b9711e5de08ec19a03f1994c11b30">ast_sip_subscription_set_persistence_data</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *subscription, <span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *persistence_data);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment"> * \since 13.31.0</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment"> * \since 16.8.0</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment"> * \since 17.2.0</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment"> * \brief Retrieve persistence data for a subscription</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment"> * \param subscription The subscription to retrieve persistence data from</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#ac14c963f858de2e8b9bcd86c1a127b2d">ast_sip_subscription_get_persistence_data</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *subscription);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment"> * \brief Register a subscription handler</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment"> * \retval 0 Handler was registered successfully</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment"> * \retval non-zero Handler was not registered successfully</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a250d91ea4fba33dd520804c8a47e795a">ast_sip_register_subscription_handler</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a> *<a class="code" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment"> * \brief Unregister a subscription handler</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a16d299943a24f9857d3e847b83073d5d">ast_sip_unregister_subscription_handler</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a> *<a class="code" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment"> * \brief Pubsub body generator</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment"> * A body generator is responsible for taking Asterisk content</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment"> * and converting it into a body format to be placed in an outbound</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment"> * SIP NOTIFY or PUBLISH request.</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00591"></a><span class="lineno"><a class="line" href="../../df/dc3/structast__sip__pubsub__body__generator.html">  591</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a> {<span class="comment"></span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">    * \brief Content type</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">    * In &quot;plain/text&quot;, &quot;plain&quot; is the type</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00596"></a><span class="lineno"><a class="line" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a763fd8db6bba8fbbbc113ca0d61c47c2">  596</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>;<span class="comment"></span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">    * \brief Content subtype</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">    * In &quot;plain/text&quot;, &quot;text&quot; is the subtype</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00601"></a><span class="lineno"><a class="line" href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">  601</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>;<span class="comment"></span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">   /*! Type of data the body generator takes as input */</span></div><div class="line"><a name="l00603"></a><span class="lineno"><a class="line" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a35514bc6335d541353cf54c7146e8ce5">  603</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a35514bc6335d541353cf54c7146e8ce5">body_type</a>;<span class="comment"></span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">    * \brief allocate body structure.</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">    * Body generators will have this method called when a NOTIFY</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">    * or PUBLISH body needs to be created. The type returned depends on</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">    * the type of content being produced for the body. The data parameter</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">    * is provided by the subscription handler and will vary between different</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">    * event types.</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">    * \param data The subscription data provided by the event handler</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">    * \retval non-NULL The allocated body</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">    * \retval NULL Failure</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00617"></a><span class="lineno"><a class="line" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a385739136e77ae600f5bf6f00bcfebb9">  617</a></span>&#160;   <span class="keywordtype">void</span> *(*allocate_body)(<span class="keywordtype">void</span> *data);<span class="comment"></span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">    * \brief Add content to the body of a SIP request</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">    * The body of the request has already been allocated by the body generator&#39;s</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">    * allocate_body callback.</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">    * \param body The body of the SIP request. The type is determined by the</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">    * content type.</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">    * \param data The subscription data used to populate the body. The type is</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">    * determined by the content type.</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00629"></a><span class="lineno"><a class="line" href="../../df/dc3/structast__sip__pubsub__body__generator.html#ae9df1ad90af9f1ce1a581f295ef305a5">  629</a></span>&#160;   int (*generate_body_content)(<span class="keywordtype">void</span> *body, <span class="keywordtype">void</span> *data);<span class="comment"></span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">    * \brief Convert the body to a string.</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">    * \param body The request body.</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">    * \param str The converted string form of the request body</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00636"></a><span class="lineno"><a class="line" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a01fdd40c6cfdff735455dee9436346d6">  636</a></span>&#160;   void (*<a class="code" href="../../d3/dd1/ast__expr2_8c.html#a2aa4dbade73df2109fad6d42296278d8">to_string</a>)(<span class="keywordtype">void</span> *body, <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> **<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);<span class="comment"></span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">    * \brief Deallocate resources created for the body</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">    * Optional callback to destroy resources allocated for the</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">    * message body.</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">    * \param body Body to be destroyed</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00645"></a><span class="lineno"><a class="line" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a3b12361a3bb7b12cc7729927503209cb">  645</a></span>&#160;   void (*destroy_body)(<span class="keywordtype">void</span> *body);</div><div class="line"><a name="l00646"></a><span class="lineno"><a class="line" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a6ee50771ea71fae45af837b709132cd3">  646</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a>) list;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;};</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment"> * \brief Body supplement</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment"> * Body supplements provide additions to bodies not already</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment"> * provided by body generators. This may include proprietary</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment"> * extensions, optional content, or other nonstandard fare.</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00656"></a><span class="lineno"><a class="line" href="../../d7/d72/structast__sip__pubsub__body__supplement.html">  656</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d7/d72/structast__sip__pubsub__body__supplement.html">ast_sip_pubsub_body_supplement</a> {<span class="comment"></span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">    * \brief Content type</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">    * In &quot;plain/text&quot;, &quot;plain&quot; is the type</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00661"></a><span class="lineno"><a class="line" href="../../d7/d72/structast__sip__pubsub__body__supplement.html#a763fd8db6bba8fbbbc113ca0d61c47c2">  661</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d72/structast__sip__pubsub__body__supplement.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>;<span class="comment"></span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">    * \brief Content subtype</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">    * In &quot;plain/text&quot;, &quot;text&quot; is the subtype</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="../../d7/d72/structast__sip__pubsub__body__supplement.html#abb4ae60bbcbce3616fdd7d4238869c91">  666</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d72/structast__sip__pubsub__body__supplement.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>;<span class="comment"></span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">    * \brief Add additional content to a SIP request body.</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">    * A body generator will have already allocated a body and populated</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">    * it with base data for the event. The supplement&#39;s duty is, if desired,</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">    * to extend the body to have optional data beyond what a base RFC specifies.</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">    * \param body The body of the SIP request. The type is determined by the</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">    * body generator that allocated the body.</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">    * \param data The subscription data used to populate the body. The type is</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">    * determined by the content type.</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="../../d7/d72/structast__sip__pubsub__body__supplement.html#a2d404fadf2a8afa26742b1cd27bd50cd">  679</a></span>&#160;   int (*supplement_body)(<span class="keywordtype">void</span> *body, <span class="keywordtype">void</span> *data);</div><div class="line"><a name="l00680"></a><span class="lineno"><a class="line" href="../../d7/d72/structast__sip__pubsub__body__supplement.html#a8c12956d57300d6a98f1223ef0bc0268">  680</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../d7/d72/structast__sip__pubsub__body__supplement.html">ast_sip_pubsub_body_supplement</a>) list;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;};</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment"> * \since 13.0.0</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment"> * \brief Generate body content for a PUBLISH or NOTIFY</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment"> * This function takes a pre-allocated body and calls into registered body</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment"> * generators in order to fill in the body with appropriate details.</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment"> * The primary body generator will be called first, followed by the</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment"> * supplementary body generators</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment"> * \param content_type The content type of the body</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment"> * \param content_subtype The content subtype of the body</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment"> * \param data The data associated with body generation.</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment"> * \param[out] str The string representation of the generated body</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment"> * \retval 0 Success</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment"> * \retval non-zero Failure</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a41512cbe01e475968618fcb5631bb1b0">ast_sip_pubsub_generate_body_content</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *content_type,</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *content_subtype, <span class="keyword">struct</span> <a class="code" href="../../d1/de8/structast__sip__body__data.html">ast_sip_body_data</a> *data, <span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> **<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment"> * \brief Is a body generator registered for the given type/subtype.</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment"> * \since 14.0.0</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment"> * \param type The content type of the body</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment"> * \param subtype The content subtype of the body</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment"> * \note In &quot;plain/text&quot;, &quot;plain&quot; is the type and &quot;text&quot; is the subtype.</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment"> * \retval non-zero if a generator is registered.</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#ac0030d8d5c2b988a0f7e7968a66180dd">ast_sip_pubsub_is_body_generator_registered</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *subtype);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment"> * \since 13.0.0</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment"> * \brief Register a body generator with the pubsub core.</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment"> * This may fail if an attempt is made to register a primary body supplement</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment"> * for a given content type if a primary body supplement for that content type</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment"> * has already been registered.</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment"> * \param generator Body generator to register</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment"> * \retval 0 Success</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment"> * \retval -1 Failure</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a8d089a744841fa628f7dc8f09d70db04">ast_sip_pubsub_register_body_generator</a>(<span class="keyword">struct</span> <a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a> *<a class="code" href="../../df/dde/app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a>);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment"> * \since 13.0.0</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment"> * \brief Unregister a body generator with the pubsub core.</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment"> * \param generator Body generator to unregister</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a22d7c1042170155672514fbb16ce46eb">ast_sip_pubsub_unregister_body_generator</a>(<span class="keyword">struct</span> <a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a> *<a class="code" href="../../df/dde/app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a>);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment"> * \since 13.0.0</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment"> * \brief Register a body generator with the pubsub core.</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment"> * This may fail if an attempt is made to register a primary body supplement</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment"> * for a given content type if a primary body supplement for that content type</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment"> * has already been registered.</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment"> * \param generator Body generator to register</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment"> * \retval 0 Success</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment"> * \retval -1 Failure</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a5cc1e17b0488075e8ea7d40085d502e1">ast_sip_pubsub_register_body_supplement</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d72/structast__sip__pubsub__body__supplement.html">ast_sip_pubsub_body_supplement</a> *supplement);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment"> * \since 13.0.0</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment"> * \brief Unregister a body generator with the pubsub core.</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment"> * \param generator Body generator to unregister</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a2be73952bf96122adf824dbbc26caa1c">ast_sip_pubsub_unregister_body_supplement</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d72/structast__sip__pubsub__body__supplement.html">ast_sip_pubsub_body_supplement</a> *supplement);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment"> * \since 13.0.0</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment"> * \brief Get the body type used for this subscription</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a2294ee18e05ee676e083133058243909">ast_sip_subscription_get_body_type</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment"> * \since 13.0.0</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment"> * \brief Get the body subtype used for this subscription</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a5c54dc5f481da88392b1ec7149385613">ast_sip_subscription_get_body_subtype</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment"> * \since 13.6.0</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment"> * \brief Alert the pubsub core that the subscription is ready for destruction</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment"> * \param sub The subscription that is complete</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a3bb393c5880be9a3a3ddeccfc998452b">ast_sip_subscription_destroy</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* RES_PJSIP_PUBSUB_H */</span><span class="preprocessor"></span></div><div class="ttc" id="structast__sip__publish__handler_html_aeccf279e6fca0e5f8536fdf76c838728"><div class="ttname"><a href="../../d5/d9f/structast__sip__publish__handler.html#aeccf279e6fca0e5f8536fdf76c838728">ast_sip_publish_handler::event_name</a></div><div class="ttdeci">const char * event_name</div><div class="ttdoc">The name of the event this handler deals with. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00051">res_pjsip_pubsub.h:51</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_a35514bc6335d541353cf54c7146e8ce5"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#a35514bc6335d541353cf54c7146e8ce5">ast_sip_pubsub_body_generator::body_type</a></div><div class="ttdeci">const char * body_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00603">res_pjsip_pubsub.h:603</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_aeb411f16e0fee4036a22b354164b43a6"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#aeb411f16e0fee4036a22b354164b43a6">ast_sip_subscription_get_local_uri</a></div><div class="ttdeci">void ast_sip_subscription_get_local_uri(struct ast_sip_subscription *sub, char *buf, size_t size)</div><div class="ttdoc">Retrieve the local URI for this subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02578">res_pjsip_pubsub.c:2578</a></div></div>
<div class="ttc" id="structast__sip__body__data_html_a086f833f6f250c98d7bcd80f9a573d06"><div class="ttname"><a href="../../d1/de8/structast__sip__body__data.html#a086f833f6f250c98d7bcd80f9a573d06">ast_sip_body_data::body_data</a></div><div class="ttdeci">void * body_data</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00243">res_pjsip_pubsub.h:243</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a81489602b194ea87cae6470409bee3b5"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a81489602b194ea87cae6470409bee3b5">ast_sip_subscription_get_serializer</a></div><div class="ttdeci">struct ast_taskprocessor * ast_sip_subscription_get_serializer(struct ast_sip_subscription *sub)</div><div class="ttdoc">Get the serializer for the subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01942">res_pjsip_pubsub.c:1942</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_ae741d1ec08fd26b810d24514e510dad8"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#ae741d1ec08fd26b810d24514e510dad8">ast_sip_subscription_is_terminated</a></div><div class="ttdeci">int ast_sip_subscription_is_terminated(const struct ast_sip_subscription *sub)</div><div class="ttdoc">Get whether the subscription has been terminated or not. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02601">res_pjsip_pubsub.c:2601</a></div></div>
<div class="ttc" id="structast__sip__subscription__handler_html_aa63e03b2552c36d21f2bb7bffd26a06a"><div class="ttname"><a href="../../d8/d6c/structast__sip__subscription__handler.html#aa63e03b2552c36d21f2bb7bffd26a06a">ast_sip_subscription_handler::subscriber</a></div><div class="ttdeci">struct ast_sip_subscriber * subscriber</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00337">res_pjsip_pubsub.h:337</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a9b75abdc267ce4a677b7eaa67ead3c20a3c10d5621e8e7278503d4ea4c13cedc1"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20a3c10d5621e8e7278503d4ea4c13cedc1">AST_SIP_SUBSCRIBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00192">res_pjsip_pubsub.h:192</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a></div><div class="ttdoc">Pubsub body generator. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00591">res_pjsip_pubsub.h:591</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__supplement_html"><div class="ttname"><a href="../../d7/d72/structast__sip__pubsub__body__supplement.html">ast_sip_pubsub_body_supplement</a></div><div class="ttdoc">Body supplement. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00656">res_pjsip_pubsub.h:656</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_sip_pubsub_body_generator::type</a></div><div class="ttdeci">const char * type</div><div class="ttdoc">Content type In &quot;plain/text&quot;, &quot;plain&quot; is the type. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00596">res_pjsip_pubsub.h:596</a></div></div>
<div class="ttc" id="structast__sip__body__data_html_a35514bc6335d541353cf54c7146e8ce5"><div class="ttname"><a href="../../d1/de8/structast__sip__body__data.html#a35514bc6335d541353cf54c7146e8ce5">ast_sip_body_data::body_type</a></div><div class="ttdeci">const char * body_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00241">res_pjsip_pubsub.h:241</a></div></div>
<div class="ttc" id="structast__sip__body__data_html"><div class="ttname"><a href="../../d1/de8/structast__sip__body__data.html">ast_sip_body_data</a></div><div class="ttdoc">Data used to create bodies for NOTIFY/PUBLISH requests. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00239">res_pjsip_pubsub.h:239</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a9b8c76be46a7016bf5a352af82470bc8a2cf7cc98f2ea79c84c94f7e5a9dfeae0"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8a2cf7cc98f2ea79c84c94f7e5a9dfeae0">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_RENEWED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00224">res_pjsip_pubsub.h:224</a></div></div>
<div class="ttc" id="structast__sip__subscriber_html"><div class="ttname"><a href="../../db/dd4/structast__sip__subscriber.html">ast_sip_subscriber</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00297">res_pjsip_pubsub.h:297</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a9b8c76be46a7016bf5a352af82470bc8a5ecfc46fb4337bd9d5c9f2253e197583"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8a5ecfc46fb4337bd9d5c9f2253e197583">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_STARTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00222">res_pjsip_pubsub.h:222</a></div></div>
<div class="ttc" id="structast__sip__subscription__handler_html_a06762434263891503f1fe196fd2cf613"><div class="ttname"><a href="../../d8/d6c/structast__sip__subscription__handler.html#a06762434263891503f1fe196fd2cf613">ast_sip_subscription_handler::notifier</a></div><div class="ttdeci">struct ast_sip_notifier * notifier</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00339">res_pjsip_pubsub.h:339</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a2294ee18e05ee676e083133058243909"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a2294ee18e05ee676e083133058243909">ast_sip_subscription_get_body_type</a></div><div class="ttdeci">const char * ast_sip_subscription_get_body_type(struct ast_sip_subscription *sub)</div><div class="ttdoc">Get the body type used for this subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03509">res_pjsip_pubsub.c:3509</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a250d91ea4fba33dd520804c8a47e795a"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a250d91ea4fba33dd520804c8a47e795a">ast_sip_register_subscription_handler</a></div><div class="ttdeci">int ast_sip_register_subscription_handler(struct ast_sip_subscription_handler *handler)</div><div class="ttdoc">Register a subscription handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02777">res_pjsip_pubsub.c:2777</a></div></div>
<div class="ttc" id="structast__sip__publish__handler_html_a3bcafa1a0d7e03921ef2883953be90ae"><div class="ttname"><a href="../../d5/d9f/structast__sip__publish__handler.html#a3bcafa1a0d7e03921ef2883953be90ae">ast_sip_publish_handler::new_publication</a></div><div class="ttdeci">int(* new_publication)(struct ast_sip_endpoint *endpoint, const char *resource, const char *event_configuration)</div><div class="ttdoc">Called when a PUBLISH to establish a new publication arrives. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00064">res_pjsip_pubsub.h:64</a></div></div>
<div class="ttc" id="structast__datastore__info_html"><div class="ttname"><a href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a></div><div class="ttdoc">Structure for a data store type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00031">datastore.h:31</a></div></div>
<div class="ttc" id="structstate__change_html"><div class="ttname"><a href="../../d9/d66/structstate__change.html">state_change</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00200">devicestate.c:200</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a0cb53b1ca63b4b97b4b3fa8721274ee9"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a0cb53b1ca63b4b97b4b3fa8721274ee9">ast_sip_subscription_get_remote_uri</a></div><div class="ttdeci">void ast_sip_subscription_get_remote_uri(struct ast_sip_subscription *sub, char *buf, size_t size)</div><div class="ttdoc">Retrive the remote URI for this subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02583">res_pjsip_pubsub.c:2583</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__supplement_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d7/d72/structast__sip__pubsub__body__supplement.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_sip_pubsub_body_supplement::type</a></div><div class="ttdeci">const char * type</div><div class="ttdoc">Content type In &quot;plain/text&quot;, &quot;plain&quot; is the type. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00661">res_pjsip_pubsub.h:661</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a14d30548053458724404f5c041483cfa"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a14d30548053458724404f5c041483cfa">ast_sip_register_publish_handler</a></div><div class="ttdeci">int ast_sip_register_publish_handler(struct ast_sip_publish_handler *handler)</div><div class="ttdoc">Register a publish handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02718">res_pjsip_pubsub.c:2718</a></div></div>
<div class="ttc" id="res__pjsip__exten__state_8c_html_a9b6bcc7a1b06e8224618d36d94b85f70"><div class="ttname"><a href="../../d2/d3d/res__pjsip__exten__state_8c.html#a9b6bcc7a1b06e8224618d36d94b85f70">subscription_established</a></div><div class="ttdeci">static int subscription_established(struct ast_sip_subscription *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00427">res_pjsip_exten_state.c:427</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a2d7ed3f8785ad9d9aa3fc090d983c45d"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a2d7ed3f8785ad9d9aa3fc090d983c45d">ast_sip_subscription_get_resource_name</a></div><div class="ttdeci">const char * ast_sip_subscription_get_resource_name(struct ast_sip_subscription *sub)</div><div class="ttdoc">Get the name of the subscribed resource. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02596">res_pjsip_pubsub.c:2596</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a0a56204d9bae50c4103725ef62aab562a5d64d62e9e58a0f155318ab2bc94ade3"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562a5d64d62e9e58a0f155318ab2bc94ade3">AST_SIP_PUBLISH_STATE_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00041">res_pjsip_pubsub.h:41</a></div></div>
<div class="ttc" id="ast__expr2_8c_html_a2aa4dbade73df2109fad6d42296278d8"><div class="ttname"><a href="../../d3/dd1/ast__expr2_8c.html#a2aa4dbade73df2109fad6d42296278d8">to_string</a></div><div class="ttdeci">static void to_string(struct val *vp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l02630">ast_expr2.c:2630</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a8d089a744841fa628f7dc8f09d70db04"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a8d089a744841fa628f7dc8f09d70db04">ast_sip_pubsub_register_body_generator</a></div><div class="ttdeci">int ast_sip_pubsub_register_body_generator(struct ast_sip_pubsub_body_generator *generator)</div><div class="ttdoc">Register a body generator with the pubsub core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03440">res_pjsip_pubsub.c:3440</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_aefd01cccb44e52e8c576785903382206"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#aefd01cccb44e52e8c576785903382206">ast_sip_publication_add_datastore</a></div><div class="ttdeci">int ast_sip_publication_add_datastore(struct ast_sip_publication *publication, struct ast_datastore *datastore)</div><div class="ttdoc">Add a datastore to a SIP publication. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02649">res_pjsip_pubsub.c:2649</a></div></div>
<div class="ttc" id="structnotify__data_html"><div class="ttname"><a href="../../d4/d18/structnotify__data.html">notify_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d41/res__pjsip__notify_8c_source.html#l00266">res_pjsip_notify.c:266</a></div></div>
<div class="ttc" id="structast__datastore_html_a2daadcdbac635c83b7bfc6375b4c9be4"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">ast_datastore::uid</a></div><div class="ttdeci">const char * uid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00069">datastore.h:69</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_aa8ca8ca978fb48dc5a57ce618b36c0b5"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#aa8ca8ca978fb48dc5a57ce618b36c0b5">ast_sip_publication_get_datastores</a></div><div class="ttdeci">struct ao2_container * ast_sip_publication_get_datastores(const struct ast_sip_publication *publication)</div><div class="ttdoc">Get the datastores container for a publication. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02664">res_pjsip_pubsub.c:2664</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_acd22eade3d3a1bfce2d9acf505d34b1a"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#acd22eade3d3a1bfce2d9acf505d34b1a">ast_sip_subscription_get_datastores</a></div><div class="ttdeci">struct ao2_container * ast_sip_subscription_get_datastores(const struct ast_sip_subscription *subscription)</div><div class="ttdoc">Get the datastores container for a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02644">res_pjsip_pubsub.c:2644</a></div></div>
<div class="ttc" id="structast__sip__publish__handler_html_a26ee2c39a0ad034e88f91562a94c1327"><div class="ttname"><a href="../../d5/d9f/structast__sip__publish__handler.html#a26ee2c39a0ad034e88f91562a94c1327">ast_sip_publish_handler::publish_expire</a></div><div class="ttdeci">void(* publish_expire)(struct ast_sip_publication *pub)</div><div class="ttdoc">Called when a publication has reached its expiration. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00068">res_pjsip_pubsub.h:68</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a79792c0d3a54f779754479075e3c80b3"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a79792c0d3a54f779754479075e3c80b3">ast_sip_subscription_get_sip_uri</a></div><div class="ttdeci">pjsip_sip_uri * ast_sip_subscription_get_sip_uri(struct ast_sip_subscription *sub)</div><div class="ttdoc">Retrieve the local sip uri for this subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02573">res_pjsip_pubsub.c:2573</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__supplement_html_abb4ae60bbcbce3616fdd7d4238869c91"><div class="ttname"><a href="../../d7/d72/structast__sip__pubsub__body__supplement.html#abb4ae60bbcbce3616fdd7d4238869c91">ast_sip_pubsub_body_supplement::subtype</a></div><div class="ttdeci">const char * subtype</div><div class="ttdoc">Content subtype In &quot;plain/text&quot;, &quot;text&quot; is the subtype. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00666">res_pjsip_pubsub.h:666</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_adcc803ec5ffc0029b9be176cc090f135"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#adcc803ec5ffc0029b9be176cc090f135">ast_sip_create_subscription</a></div><div class="ttdeci">struct ast_sip_subscription * ast_sip_create_subscription(const struct ast_sip_subscription_handler *handler, struct ast_sip_endpoint *endpoint, const char *resource)</div><div class="ttdoc">Create a new ast_sip_subscription structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01868">res_pjsip_pubsub.c:1868</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a823b9711e5de08ec19a03f1994c11b30"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a823b9711e5de08ec19a03f1994c11b30">ast_sip_subscription_set_persistence_data</a></div><div class="ttdeci">void ast_sip_subscription_set_persistence_data(struct ast_sip_subscription *subscription, struct ast_json *persistence_data)</div><div class="ttdoc">Set persistence data for a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02669">res_pjsip_pubsub.c:2669</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a41512cbe01e475968618fcb5631bb1b0"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a41512cbe01e475968618fcb5631bb1b0">ast_sip_pubsub_generate_body_content</a></div><div class="ttdeci">int ast_sip_pubsub_generate_body_content(const char *content_type, const char *content_subtype, struct ast_sip_body_data *data, struct ast_str **str)</div><div class="ttdoc">Generate body content for a PUBLISH or NOTIFY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03519">res_pjsip_pubsub.c:3519</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a0a56204d9bae50c4103725ef62aab562"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562">ast_sip_publish_state</a></div><div class="ttdeci">ast_sip_publish_state</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00037">res_pjsip_pubsub.h:37</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a9b8c76be46a7016bf5a352af82470bc8"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8">ast_sip_subscription_notify_reason</a></div><div class="ttdeci">ast_sip_subscription_notify_reason</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00220">res_pjsip_pubsub.h:220</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a1521854cc25592b7f8a58a4bed55ac6d"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a1521854cc25592b7f8a58a4bed55ac6d">AST_SIP_MAX_ACCEPT</a></div><div class="ttdeci">#define AST_SIP_MAX_ACCEPT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00219">res_pjsip_pubsub.h:219</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a0a56204d9bae50c4103725ef62aab562a797a8ff87d8dc4f37be06d27c0687352"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562a797a8ff87d8dc4f37be06d27c0687352">AST_SIP_PUBLISH_STATE_TERMINATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00043">res_pjsip_pubsub.h:43</a></div></div>
<div class="ttc" id="structast__sip__publish__handler_html_a6ad12c15b9231aec95e53a632ff79a56"><div class="ttname"><a href="../../d5/d9f/structast__sip__publish__handler.html#a6ad12c15b9231aec95e53a632ff79a56">ast_sip_publish_handler::next</a></div><div class="ttdeci">struct ast_sip_publish_handler * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00090">res_pjsip_pubsub.h:90</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_ada9f3d03df5f52f4aeb09f6d952f46de"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#ada9f3d03df5f52f4aeb09f6d952f46de">ast_sip_publication_get_event_configuration</a></div><div class="ttdeci">const char * ast_sip_publication_get_event_configuration(const struct ast_sip_publication *pub)</div><div class="ttdoc">Given a publication, get the configuration name for the event type in use. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03430">res_pjsip_pubsub.c:3430</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_adf23ea14cf21cc35810a043bed318bb6"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#adf23ea14cf21cc35810a043bed318bb6">ast_sip_publication_get_endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * ast_sip_publication_get_endpoint(struct ast_sip_publication *pub)</div><div class="ttdoc">Given a publication, get the associated endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03420">res_pjsip_pubsub.c:3420</a></div></div>
<div class="ttc" id="linkedlists_8h_html"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html">linkedlists.h</a></div><div class="ttdoc">A set of macros to manage forward-linked lists. </div></div>
<div class="ttc" id="structast__sip__subscription__handler_html"><div class="ttname"><a href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00314">res_pjsip_pubsub.h:314</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a></div><div class="ttdoc">An entity with which Asterisk communicates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00812">res_pjsip.h:812</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_ac0030d8d5c2b988a0f7e7968a66180dd"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#ac0030d8d5c2b988a0f7e7968a66180dd">ast_sip_pubsub_is_body_generator_registered</a></div><div class="ttdeci">int ast_sip_pubsub_is_body_generator_registered(const char *type, const char *subtype)</div><div class="ttdoc">Is a body generator registered for the given type/subtype. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03435">res_pjsip_pubsub.c:3435</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_abb4ae60bbcbce3616fdd7d4238869c91"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">ast_sip_pubsub_body_generator::subtype</a></div><div class="ttdeci">const char * subtype</div><div class="ttdoc">Content subtype In &quot;plain/text&quot;, &quot;text&quot; is the subtype. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00601">res_pjsip_pubsub.h:601</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a57948a70c8607d9fb37f687da1ad4c25"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a57948a70c8607d9fb37f687da1ad4c25">ast_sip_subscription_send_request</a></div><div class="ttdeci">int ast_sip_subscription_send_request(struct ast_sip_subscription *sub, pjsip_tx_data *tdata)</div><div class="ttdoc">Send a request created via a PJSIP evsub method. </div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a9b8c76be46a7016bf5a352af82470bc8ac605eaafb5b7ba1aefd0011850f1eb21"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8ac605eaafb5b7ba1aefd0011850f1eb21">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_OTHER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00228">res_pjsip_pubsub.h:228</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a3bb393c5880be9a3a3ddeccfc998452b"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a3bb393c5880be9a3a3ddeccfc998452b">ast_sip_subscription_destroy</a></div><div class="ttdeci">void ast_sip_subscription_destroy(struct ast_sip_subscription *sub)</div><div class="ttdoc">Alert the pubsub core that the subscription is ready for destruction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01389">res_pjsip_pubsub.c:1389</a></div></div>
<div class="ttc" id="structast__sip__subscription_html"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a></div><div class="ttdoc">Structure representing a &quot;virtual&quot; SIP subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00477">res_pjsip_pubsub.c:477</a></div></div>
<div class="ttc" id="structast__sip__publish__handler_html_af0ab5befc3e79fb52d28e243c8ac14e0"><div class="ttname"><a href="../../d5/d9f/structast__sip__publish__handler.html#af0ab5befc3e79fb52d28e243c8ac14e0">ast_sip_publish_handler::publication_state_change</a></div><div class="ttdeci">int(* publication_state_change)(struct ast_sip_publication *pub, pjsip_msg_body *body, enum ast_sip_publish_state state)</div><div class="ttdoc">Published resource has changed states. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00088">res_pjsip_pubsub.h:88</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a5c54dc5f481da88392b1ec7149385613"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a5c54dc5f481da88392b1ec7149385613">ast_sip_subscription_get_body_subtype</a></div><div class="ttdeci">const char * ast_sip_subscription_get_body_subtype(struct ast_sip_subscription *sub)</div><div class="ttdoc">Get the body subtype used for this subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03514">res_pjsip_pubsub.c:3514</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a60c370a28e03a8dc64e6b1cf9f277194"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a60c370a28e03a8dc64e6b1cf9f277194">ast_sip_publication_remove_datastore</a></div><div class="ttdeci">void ast_sip_publication_remove_datastore(struct ast_sip_publication *publication, const char *name)</div><div class="ttdoc">Remove a publication datastore from the publication. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02659">res_pjsip_pubsub.c:2659</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="app__fax_8c_html_a36aeb2eb01afb248bad64a309d743636"><div class="ttname"><a href="../../df/dde/app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a></div><div class="ttdeci">static struct ast_generator generator</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dde/app__fax_8c_source.html#l00359">app_fax.c:359</a></div></div>
<div class="ttc" id="structast__sip__subscription__response__data_html_ac275fb0ffa19246e789b4c3c9febcf00"><div class="ttname"><a href="../../da/d9e/structast__sip__subscription__response__data.html#ac275fb0ffa19246e789b4c3c9febcf00">ast_sip_subscription_response_data::status_code</a></div><div class="ttdeci">int status_code</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00210">res_pjsip_pubsub.h:210</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_ac1dd2ba4db4cb10f5d1813886503bd96"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#ac1dd2ba4db4cb10f5d1813886503bd96">ast_sip_publication_get_resource</a></div><div class="ttdeci">const char * ast_sip_publication_get_resource(const struct ast_sip_publication *pub)</div><div class="ttdoc">Given a publication, get the resource the publication is to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03425">res_pjsip_pubsub.c:3425</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a5d3ad3f5c55c026e22e1103686227ae0"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a5d3ad3f5c55c026e22e1103686227ae0">ast_sip_subscription_alloc_datastore</a></div><div class="ttdeci">struct ast_datastore * ast_sip_subscription_alloc_datastore(const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Alternative for ast_datastore_alloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02624">res_pjsip_pubsub.c:2624</a></div></div>
<div class="ttc" id="structast__sip__publish__handler_html"><div class="ttname"><a href="../../d5/d9f/structast__sip__publish__handler.html">ast_sip_publish_handler</a></div><div class="ttdoc">Callbacks that publication handlers will define. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00049">res_pjsip_pubsub.h:49</a></div></div>
<div class="ttc" id="structast__sip__subscription__handler_html_aeccf279e6fca0e5f8536fdf76c838728"><div class="ttname"><a href="../../d8/d6c/structast__sip__subscription__handler.html#aeccf279e6fca0e5f8536fdf76c838728">ast_sip_subscription_handler::event_name</a></div><div class="ttdeci">const char * event_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00316">res_pjsip_pubsub.h:316</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a67508a613c8f337732e35d9367b43ae7"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a></div><div class="ttdeci">#define AST_LIST_ENTRY(type)</div><div class="ttdoc">Declare a forward link structure inside a list entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00409">linkedlists.h:409</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a9b8c76be46a7016bf5a352af82470bc8ad77cd10aac8a016474e1595c2342a90e"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8ad77cd10aac8a016474e1595c2342a90e">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_TERMINATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00226">res_pjsip_pubsub.h:226</a></div></div>
<div class="ttc" id="structast__sip__subscription__response__data_html_aba9589a3f064d8a135ae114031013e78"><div class="ttname"><a href="../../da/d9e/structast__sip__subscription__response__data.html#aba9589a3f064d8a135ae114031013e78">ast_sip_subscription_response_data::body</a></div><div class="ttdeci">struct ast_sip_body * body</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00216">res_pjsip_pubsub.h:216</a></div></div>
<div class="ttc" id="res__pjsip__exten__state_8c_html_ae8731a90be4dc2d8272b7dfd8a001d4c"><div class="ttname"><a href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a></div><div class="ttdeci">static void to_ami(struct ast_sip_subscription *sub, struct ast_str **buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00542">res_pjsip_exten_state.c:542</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a16d299943a24f9857d3e847b83073d5d"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a16d299943a24f9857d3e847b83073d5d">ast_sip_unregister_subscription_handler</a></div><div class="ttdeci">void ast_sip_unregister_subscription_handler(struct ast_sip_subscription_handler *handler)</div><div class="ttdoc">Unregister a subscription handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02810">res_pjsip_pubsub.c:2810</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a5ad2231cd4e17cd5a713f0c7cea20da4"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a5ad2231cd4e17cd5a713f0c7cea20da4">ast_sip_subscription_get_datastore</a></div><div class="ttdeci">struct ast_datastore * ast_sip_subscription_get_datastore(struct ast_sip_subscription *subscription, const char *name)</div><div class="ttdoc">Retrieve a subscription datastore. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02634">res_pjsip_pubsub.c:2634</a></div></div>
<div class="ttc" id="structheader_html"><div class="ttname"><a href="../../d5/d65/structheader.html">header</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d73/pjsip__global__headers_8c_source.html#l00047">pjsip_global_headers.c:47</a></div></div>
<div class="ttc" id="res__pjsip__exten__state_8c_html_a8914f5b597fd3f724ebb90da26565da7"><div class="ttname"><a href="../../d2/d3d/res__pjsip__exten__state_8c.html#a8914f5b597fd3f724ebb90da26565da7">subscription_shutdown</a></div><div class="ttdeci">static void subscription_shutdown(struct ast_sip_subscription *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00398">res_pjsip_exten_state.c:398</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a9b75abdc267ce4a677b7eaa67ead3c20ab72ff83a6adb7eae0bf918c8e3f5cf49"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20ab72ff83a6adb7eae0bf918c8e3f5cf49">AST_SIP_NOTIFIER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00194">res_pjsip_pubsub.h:194</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a65b342a28c864a472dfff5ea27de8691"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a65b342a28c864a472dfff5ea27de8691">ast_sip_unregister_publish_handler</a></div><div class="ttdeci">void ast_sip_unregister_publish_handler(struct ast_sip_publish_handler *handler)</div><div class="ttdoc">Unregister a publish handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02738">res_pjsip_pubsub.c:2738</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_abce1c0cc1320bb801480d0929266d08f"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#abce1c0cc1320bb801480d0929266d08f">ast_sip_subscription_get_endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * ast_sip_subscription_get_endpoint(struct ast_sip_subscription *sub)</div><div class="ttdoc">Get the endpoint that is associated with this subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01936">res_pjsip_pubsub.c:1936</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_aa6471e6d6f4563ef5fb93343180fea40"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#aa6471e6d6f4563ef5fb93343180fea40">ast_sip_subscription_get_dialog</a></div><div class="ttdeci">pjsip_dialog * ast_sip_subscription_get_dialog(struct ast_sip_subscription *sub)</div><div class="ttdoc">Get the pjsip dialog that is associated with this subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01930">res_pjsip_pubsub.c:1930</a></div></div>
<div class="ttc" id="structast__sip__subscription__handler_html_a35514bc6335d541353cf54c7146e8ce5"><div class="ttname"><a href="../../d8/d6c/structast__sip__subscription__handler.html#a35514bc6335d541353cf54c7146e8ce5">ast_sip_subscription_handler::body_type</a></div><div class="ttdeci">const char * body_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00318">res_pjsip_pubsub.h:318</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a5cc1e17b0488075e8ea7d40085d502e1"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a5cc1e17b0488075e8ea7d40085d502e1">ast_sip_pubsub_register_body_supplement</a></div><div class="ttdeci">int ast_sip_pubsub_register_body_supplement(struct ast_sip_pubsub_body_supplement *supplement)</div><div class="ttdoc">Register a body generator with the pubsub core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03485">res_pjsip_pubsub.c:3485</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a68314dedb48b2799a693d3a090ae038b"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a68314dedb48b2799a693d3a090ae038b">ast_sip_subscription_add_datastore</a></div><div class="ttdeci">int ast_sip_subscription_add_datastore(struct ast_sip_subscription *subscription, struct ast_datastore *datastore)</div><div class="ttdoc">Add a datastore to a SIP subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02629">res_pjsip_pubsub.c:2629</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a5b0f67be0ca6ad54e4eba8d4aa029faf"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a5b0f67be0ca6ad54e4eba8d4aa029faf">ast_sip_subscription_notify</a></div><div class="ttdeci">int ast_sip_subscription_notify(struct ast_sip_subscription *sub, struct ast_sip_body_data *notify_data, int terminate)</div><div class="ttdoc">Notify a SIP subscription of a state change. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02529">res_pjsip_pubsub.c:2529</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a9b75abdc267ce4a677b7eaa67ead3c20"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20">ast_sip_subscription_role</a></div><div class="ttdeci">ast_sip_subscription_role</div><div class="ttdoc">Role for the subscription that is being created. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00190">res_pjsip_pubsub.h:190</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a3c257396060f400b0fba424730e7576e"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a3c257396060f400b0fba424730e7576e">ast_sip_subscription_remove_datastore</a></div><div class="ttdeci">void ast_sip_subscription_remove_datastore(struct ast_sip_subscription *subscription, const char *name)</div><div class="ttdoc">Remove a subscription datastore from the subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02639">res_pjsip_pubsub.c:2639</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a2be73952bf96122adf824dbbc26caa1c"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a2be73952bf96122adf824dbbc26caa1c">ast_sip_pubsub_unregister_body_supplement</a></div><div class="ttdeci">void ast_sip_pubsub_unregister_body_supplement(struct ast_sip_pubsub_body_supplement *supplement)</div><div class="ttdoc">Unregister a body generator with the pubsub core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03494">res_pjsip_pubsub.c:3494</a></div></div>
<div class="ttc" id="test__ari_8c_html_a695cc202c7a2869aa8202bb20726ea3c"><div class="ttname"><a href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a></div><div class="ttdeci">static void handler(const char *name, int response_code, struct ast_variable *get_params, struct ast_variable *path_vars, struct ast_variable *headers, struct ast_json *body, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/test__ari_8c_source.html#l00059">test_ari.c:59</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structast__sip__publication_html"><div class="ttname"><a href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a></div><div class="ttdoc">Structure representing a SIP publication. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00345">res_pjsip_pubsub.c:345</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_ac14c963f858de2e8b9bcd86c1a127b2d"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#ac14c963f858de2e8b9bcd86c1a127b2d">ast_sip_subscription_get_persistence_data</a></div><div class="ttdeci">const struct ast_json * ast_sip_subscription_get_persistence_data(const struct ast_sip_subscription *subscription)</div><div class="ttdoc">Retrieve persistence data for a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02686">res_pjsip_pubsub.c:2686</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a0a56204d9bae50c4103725ef62aab562ab368f4beb502956f3544f351c116ade6"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562ab368f4beb502956f3544f351c116ade6">AST_SIP_PUBLISH_STATE_INITIALIZED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00039">res_pjsip_pubsub.h:39</a></div></div>
<div class="ttc" id="structast__sip__subscription__handler_html_a2e4aa60e677c95983d44693bd69bc1be"><div class="ttname"><a href="../../d8/d6c/structast__sip__subscription__handler.html#a2e4aa60e677c95983d44693bd69bc1be">ast_sip_subscription_handler::next</a></div><div class="ttdeci">struct ast_sip_subscription_handler * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00340">res_pjsip_pubsub.h:340</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="structast__sip__notifier_html_ad1e64b1a6297045eb98ac47f56591b0f"><div class="ttname"><a href="../../d1/d5b/structast__sip__notifier.html#ad1e64b1a6297045eb98ac47f56591b0f">ast_sip_notifier::default_accept</a></div><div class="ttdeci">const char * default_accept</div><div class="ttdoc">Default body type defined for the event package this notifier handles. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00255">res_pjsip_pubsub.h:255</a></div></div>
<div class="ttc" id="structast__sip__notifier_html"><div class="ttname"><a href="../../d1/d5b/structast__sip__notifier.html">ast_sip_notifier</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00246">res_pjsip_pubsub.h:246</a></div></div>
<div class="ttc" id="structast__sip__publish__handler_html_aac80748c488a3724f6ab7e1ef4b73530"><div class="ttname"><a href="../../d5/d9f/structast__sip__publish__handler.html#aac80748c488a3724f6ab7e1ef4b73530">ast_sip_publish_handler::publications</a></div><div class="ttdeci">struct ao2_container * publications</div><div class="ttdoc">Publications. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00054">res_pjsip_pubsub.h:54</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a69501f479a8ea3b0d1b6c4b8439e03c9"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a69501f479a8ea3b0d1b6c4b8439e03c9">ast_sip_publication_get_datastore</a></div><div class="ttdeci">struct ast_datastore * ast_sip_publication_get_datastore(struct ast_sip_publication *publication, const char *name)</div><div class="ttdoc">Retrieve a publication datastore. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02654">res_pjsip_pubsub.c:2654</a></div></div>
<div class="ttc" id="structast__sip__body_html"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html">ast_sip_body</a></div><div class="ttdoc">SIP body description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02027">res_pjsip.h:2027</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a4034b13c08bafa4bff82854bcc0ce135"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a4034b13c08bafa4bff82854bcc0ce135">ast_sip_subscription_get_header</a></div><div class="ttdeci">void * ast_sip_subscription_get_header(const struct ast_sip_subscription *sub, const char *header)</div><div class="ttdoc">Get a header value for a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01854">res_pjsip_pubsub.c:1854</a></div></div>
<div class="ttc" id="structast__sip__subscription__response__data_html_a868b834ff08995eb5259bdaad5494305"><div class="ttname"><a href="../../da/d9e/structast__sip__subscription__response__data.html#a868b834ff08995eb5259bdaad5494305">ast_sip_subscription_response_data::headers</a></div><div class="ttdeci">struct ast_variable * headers</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00214">res_pjsip_pubsub.h:214</a></div></div>
<div class="ttc" id="structast__sip__subscription__response__data_html_a02f62480fb9b4a963d2cc2d8d4f6616a"><div class="ttname"><a href="../../da/d9e/structast__sip__subscription__response__data.html#a02f62480fb9b4a963d2cc2d8d4f6616a">ast_sip_subscription_response_data::status_text</a></div><div class="ttdeci">const char * status_text</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00212">res_pjsip_pubsub.h:212</a></div></div>
<div class="ttc" id="structast__sip__subscription__response__data_html"><div class="ttname"><a href="../../da/d9e/structast__sip__subscription__response__data.html">ast_sip_subscription_response_data</a></div><div class="ttdoc">Data for responses to SUBSCRIBEs and NOTIFIEs. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00208">res_pjsip_pubsub.h:208</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a22d7c1042170155672514fbb16ce46eb"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a22d7c1042170155672514fbb16ce46eb">ast_sip_pubsub_unregister_body_generator</a></div><div class="ttdeci">void ast_sip_pubsub_unregister_body_generator(struct ast_sip_pubsub_body_generator *generator)</div><div class="ttdoc">Unregister a body generator with the pubsub core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03470">res_pjsip_pubsub.c:3470</a></div></div>
<div class="ttc" id="res__pjsip__exten__state_8c_html_aeadff6190808255f709da23129cc62b1"><div class="ttname"><a href="../../d2/d3d/res__pjsip__exten__state_8c.html#aeadff6190808255f709da23129cc62b1">new_subscribe</a></div><div class="ttdeci">static int new_subscribe(struct ast_sip_endpoint *endpoint, const char *resource)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00412">res_pjsip_exten_state.c:412</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:44:05 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
