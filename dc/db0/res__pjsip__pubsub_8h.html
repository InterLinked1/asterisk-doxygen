<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_pjsip_pubsub.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">res_pjsip_pubsub.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_pjsip_pubsub.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d73/res__pjsip__pubsub_8h__incl.png" border="0" usemap="#res__pjsip__pubsub_8h" alt=""/></div>
<map name="res__pjsip__pubsub_8h" id="res__pjsip__pubsub_8h">
<area shape="rect" id="node2" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="345,80,496,107"/>
<area shape="rect" id="node3" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="364,155,477,181"/>
<area shape="rect" id="node5" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="113,229,176,256"/>
<area shape="rect" id="node6" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="106,304,253,331"/>
<area shape="rect" id="node9" href="../../d3/dda/backtrace_8h.html" title="Asterisk backtrace generation. " alt="" coords="488,229,639,256"/>
<area shape="rect" id="node10" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="663,229,789,256"/>
<area shape="rect" id="node11" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="813,229,956,256"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d12/res__pjsip__pubsub_8h__dep__incl.png" border="0" usemap="#res__pjsip__pubsub_8hdep" alt=""/></div>
<map name="res__pjsip__pubsub_8hdep" id="res__pjsip__pubsub_8hdep">
<area shape="rect" id="node2" href="../../d9/d81/res__pjsip__dialog__info__body__generator_8c.html" title="res_pjsip_dialog_info\l_body_generator.c" alt="" coords="5,80,159,121"/>
<area shape="rect" id="node3" href="../../d2/d3d/res__pjsip__exten__state_8c.html" title="res_pjsip_exten_state.c" alt="" coords="183,87,355,114"/>
<area shape="rect" id="node4" href="../../d8/d25/res__pjsip__mwi_8c.html" title="res_pjsip_mwi.c" alt="" coords="379,87,500,114"/>
<area shape="rect" id="node5" href="../../d4/d94/res__pjsip__mwi__body__generator_8c.html" title="res_pjsip_mwi_body\l_generator.c" alt="" coords="524,80,672,121"/>
<area shape="rect" id="node6" href="../../d0/d38/res__pjsip__pidf__body__generator_8c.html" title="res_pjsip_pidf_body\l_generator.c" alt="" coords="697,80,843,121"/>
<area shape="rect" id="node7" href="../../d7/d45/res__pjsip__pidf__digium__body__supplement_8c.html" title="res_pjsip_pidf_digium\l_body_supplement.c" alt="" coords="868,80,1027,121"/>
<area shape="rect" id="node8" href="../../da/dea/res__pjsip__pidf__eyebeam__body__supplement_8c.html" title="res_pjsip_pidf_eyebeam\l_body_supplement.c" alt="" coords="1051,80,1225,121"/>
<area shape="rect" id="node9" href="../../dc/d7a/res__pjsip__publish__asterisk_8c.html" title="res_pjsip_publish_asterisk.c" alt="" coords="1249,87,1448,114"/>
<area shape="rect" id="node10" href="../../d8/dca/res__pjsip__pubsub_8c.html" title="res_pjsip_pubsub.c" alt="" coords="1472,87,1615,114"/>
<area shape="rect" id="node11" href="../../de/d6f/res__pjsip__xpidf__body__generator_8c.html" title="res_pjsip_xpidf_body\l_generator.c" alt="" coords="1639,80,1792,121"/>
</map>
</div>
</div>
<p><a href="../../dc/db0/res__pjsip__pubsub_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de8/structast__sip__body__data.html">ast_sip_body_data</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data used to create bodies for NOTIFY/PUBLISH requests.  <a href="../../d1/de8/structast__sip__body__data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d5b/structast__sip__notifier.html">ast_sip_notifier</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9f/structast__sip__publish__handler.html">ast_sip_publish_handler</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callbacks that publication handlers will define.  <a href="../../d5/d9f/structast__sip__publish__handler.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pubsub body generator.  <a href="../../df/dc3/structast__sip__pubsub__body__generator.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d72/structast__sip__pubsub__body__supplement.html">ast_sip_pubsub_body_supplement</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Body supplement.  <a href="../../d7/d72/structast__sip__pubsub__body__supplement.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd4/structast__sip__subscriber.html">ast_sip_subscriber</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d9e/structast__sip__subscription__response__data.html">ast_sip_subscription_response_data</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data for responses to SUBSCRIBEs and NOTIFIEs.  <a href="../../da/d9e/structast__sip__subscription__response__data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:adabdcafc2b4700a1c7727ac147f27639"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#adabdcafc2b4700a1c7727ac147f27639">AST_SIP_EXTEN_STATE_DATA</a>&#160;&#160;&#160;&quot;ast_sip_exten_state_data&quot;</td></tr>
<tr class="separator:adabdcafc2b4700a1c7727ac147f27639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1521854cc25592b7f8a58a4bed55ac6d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a1521854cc25592b7f8a58a4bed55ac6d">AST_SIP_MAX_ACCEPT</a>&#160;&#160;&#160;32</td></tr>
<tr class="separator:a1521854cc25592b7f8a58a4bed55ac6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9632d729a323355beec62acda995cc21"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9632d729a323355beec62acda995cc21">AST_SIP_MESSAGE_ACCUMULATOR</a>&#160;&#160;&#160;&quot;ast_sip_message_accumulator&quot;</td></tr>
<tr class="separator:a9632d729a323355beec62acda995cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a0a56204d9bae50c4103725ef62aab562"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562">ast_sip_publish_state</a> { <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562ab368f4beb502956f3544f351c116ade6">AST_SIP_PUBLISH_STATE_INITIALIZED</a>, 
<a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562a5d64d62e9e58a0f155318ab2bc94ade3">AST_SIP_PUBLISH_STATE_ACTIVE</a>, 
<a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562a797a8ff87d8dc4f37be06d27c0687352">AST_SIP_PUBLISH_STATE_TERMINATED</a>
 }</td></tr>
<tr class="separator:a0a56204d9bae50c4103725ef62aab562"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b8c76be46a7016bf5a352af82470bc8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8">ast_sip_subscription_notify_reason</a> { <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8a5ecfc46fb4337bd9d5c9f2253e197583">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_STARTED</a>, 
<a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8a2cf7cc98f2ea79c84c94f7e5a9dfeae0">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_RENEWED</a>, 
<a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8ad77cd10aac8a016474e1595c2342a90e">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_TERMINATED</a>, 
<a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8ac605eaafb5b7ba1aefd0011850f1eb21">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_OTHER</a>
 }</td></tr>
<tr class="separator:a9b8c76be46a7016bf5a352af82470bc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b75abdc267ce4a677b7eaa67ead3c20"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20">ast_sip_subscription_role</a> { <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20a3c10d5621e8e7278503d4ea4c13cedc1">AST_SIP_SUBSCRIBER</a>, 
<a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20ab72ff83a6adb7eae0bf918c8e3f5cf49">AST_SIP_NOTIFIER</a>
 }<tr class="memdesc:a9b75abdc267ce4a677b7eaa67ead3c20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Role for the subscription that is being created.  <a href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a9b75abdc267ce4a677b7eaa67ead3c20"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adcc803ec5ffc0029b9be176cc090f135"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#adcc803ec5ffc0029b9be176cc090f135">ast_sip_create_subscription</a> (const struct <a class="el" href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a> *<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>, struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, const char *resource)</td></tr>
<tr class="memdesc:adcc803ec5ffc0029b9be176cc090f135"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new <a class="el" href="../../db/d02/structast__sip__subscription.html" title="Structure representing a &quot;virtual&quot; SIP subscription. ">ast_sip_subscription</a> structure.  <a href="#adcc803ec5ffc0029b9be176cc090f135">More...</a><br /></td></tr>
<tr class="separator:adcc803ec5ffc0029b9be176cc090f135"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefd01cccb44e52e8c576785903382206"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#aefd01cccb44e52e8c576785903382206">ast_sip_publication_add_datastore</a> (struct <a class="el" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *publication, struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore)</td></tr>
<tr class="memdesc:aefd01cccb44e52e8c576785903382206"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a datastore to a SIP publication.  <a href="#aefd01cccb44e52e8c576785903382206">More...</a><br /></td></tr>
<tr class="separator:aefd01cccb44e52e8c576785903382206"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69501f479a8ea3b0d1b6c4b8439e03c9"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a69501f479a8ea3b0d1b6c4b8439e03c9">ast_sip_publication_get_datastore</a> (struct <a class="el" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *publication, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a69501f479a8ea3b0d1b6c4b8439e03c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a publication datastore.  <a href="#a69501f479a8ea3b0d1b6c4b8439e03c9">More...</a><br /></td></tr>
<tr class="separator:a69501f479a8ea3b0d1b6c4b8439e03c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8ca8ca978fb48dc5a57ce618b36c0b5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#aa8ca8ca978fb48dc5a57ce618b36c0b5">ast_sip_publication_get_datastores</a> (const struct <a class="el" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *publication)</td></tr>
<tr class="memdesc:aa8ca8ca978fb48dc5a57ce618b36c0b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the datastores container for a publication.  <a href="#aa8ca8ca978fb48dc5a57ce618b36c0b5">More...</a><br /></td></tr>
<tr class="separator:aa8ca8ca978fb48dc5a57ce618b36c0b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf23ea14cf21cc35810a043bed318bb6"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#adf23ea14cf21cc35810a043bed318bb6">ast_sip_publication_get_endpoint</a> (struct <a class="el" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *pub)</td></tr>
<tr class="memdesc:adf23ea14cf21cc35810a043bed318bb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a publication, get the associated endpoint.  <a href="#adf23ea14cf21cc35810a043bed318bb6">More...</a><br /></td></tr>
<tr class="separator:adf23ea14cf21cc35810a043bed318bb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada9f3d03df5f52f4aeb09f6d952f46de"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#ada9f3d03df5f52f4aeb09f6d952f46de">ast_sip_publication_get_event_configuration</a> (const struct <a class="el" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *pub)</td></tr>
<tr class="memdesc:ada9f3d03df5f52f4aeb09f6d952f46de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a publication, get the configuration name for the event type in use.  <a href="#ada9f3d03df5f52f4aeb09f6d952f46de">More...</a><br /></td></tr>
<tr class="separator:ada9f3d03df5f52f4aeb09f6d952f46de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1dd2ba4db4cb10f5d1813886503bd96"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#ac1dd2ba4db4cb10f5d1813886503bd96">ast_sip_publication_get_resource</a> (const struct <a class="el" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *pub)</td></tr>
<tr class="memdesc:ac1dd2ba4db4cb10f5d1813886503bd96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a publication, get the resource the publication is to.  <a href="#ac1dd2ba4db4cb10f5d1813886503bd96">More...</a><br /></td></tr>
<tr class="separator:ac1dd2ba4db4cb10f5d1813886503bd96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60c370a28e03a8dc64e6b1cf9f277194"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a60c370a28e03a8dc64e6b1cf9f277194">ast_sip_publication_remove_datastore</a> (struct <a class="el" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *publication, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a60c370a28e03a8dc64e6b1cf9f277194"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a publication datastore from the publication.  <a href="#a60c370a28e03a8dc64e6b1cf9f277194">More...</a><br /></td></tr>
<tr class="separator:a60c370a28e03a8dc64e6b1cf9f277194"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41512cbe01e475968618fcb5631bb1b0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a41512cbe01e475968618fcb5631bb1b0">ast_sip_pubsub_generate_body_content</a> (const char *content_type, const char *content_subtype, struct <a class="el" href="../../d1/de8/structast__sip__body__data.html">ast_sip_body_data</a> *data, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **<a class="el" href="../../d8/d30/main_2security__events_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)</td></tr>
<tr class="memdesc:a41512cbe01e475968618fcb5631bb1b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate body content for a PUBLISH or NOTIFY.  <a href="#a41512cbe01e475968618fcb5631bb1b0">More...</a><br /></td></tr>
<tr class="separator:a41512cbe01e475968618fcb5631bb1b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0030d8d5c2b988a0f7e7968a66180dd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#ac0030d8d5c2b988a0f7e7968a66180dd">ast_sip_pubsub_is_body_generator_registered</a> (const char *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, const char *subtype)</td></tr>
<tr class="memdesc:ac0030d8d5c2b988a0f7e7968a66180dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is a body generator registered for the given type/subtype.  <a href="#ac0030d8d5c2b988a0f7e7968a66180dd">More...</a><br /></td></tr>
<tr class="separator:ac0030d8d5c2b988a0f7e7968a66180dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d089a744841fa628f7dc8f09d70db04"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a8d089a744841fa628f7dc8f09d70db04">ast_sip_pubsub_register_body_generator</a> (struct <a class="el" href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a> *<a class="el" href="../../df/dde/app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a>)</td></tr>
<tr class="memdesc:a8d089a744841fa628f7dc8f09d70db04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a body generator with the pubsub core.  <a href="#a8d089a744841fa628f7dc8f09d70db04">More...</a><br /></td></tr>
<tr class="separator:a8d089a744841fa628f7dc8f09d70db04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cc1e17b0488075e8ea7d40085d502e1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a5cc1e17b0488075e8ea7d40085d502e1">ast_sip_pubsub_register_body_supplement</a> (struct <a class="el" href="../../d7/d72/structast__sip__pubsub__body__supplement.html">ast_sip_pubsub_body_supplement</a> *supplement)</td></tr>
<tr class="memdesc:a5cc1e17b0488075e8ea7d40085d502e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a body generator with the pubsub core.  <a href="#a5cc1e17b0488075e8ea7d40085d502e1">More...</a><br /></td></tr>
<tr class="separator:a5cc1e17b0488075e8ea7d40085d502e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22d7c1042170155672514fbb16ce46eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a22d7c1042170155672514fbb16ce46eb">ast_sip_pubsub_unregister_body_generator</a> (struct <a class="el" href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a> *<a class="el" href="../../df/dde/app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a>)</td></tr>
<tr class="memdesc:a22d7c1042170155672514fbb16ce46eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a body generator with the pubsub core.  <a href="#a22d7c1042170155672514fbb16ce46eb">More...</a><br /></td></tr>
<tr class="separator:a22d7c1042170155672514fbb16ce46eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2be73952bf96122adf824dbbc26caa1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a2be73952bf96122adf824dbbc26caa1c">ast_sip_pubsub_unregister_body_supplement</a> (struct <a class="el" href="../../d7/d72/structast__sip__pubsub__body__supplement.html">ast_sip_pubsub_body_supplement</a> *supplement)</td></tr>
<tr class="memdesc:a2be73952bf96122adf824dbbc26caa1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a body generator with the pubsub core.  <a href="#a2be73952bf96122adf824dbbc26caa1c">More...</a><br /></td></tr>
<tr class="separator:a2be73952bf96122adf824dbbc26caa1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14d30548053458724404f5c041483cfa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a14d30548053458724404f5c041483cfa">ast_sip_register_publish_handler</a> (struct <a class="el" href="../../d5/d9f/structast__sip__publish__handler.html">ast_sip_publish_handler</a> *<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>)</td></tr>
<tr class="memdesc:a14d30548053458724404f5c041483cfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a publish handler.  <a href="#a14d30548053458724404f5c041483cfa">More...</a><br /></td></tr>
<tr class="separator:a14d30548053458724404f5c041483cfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a250d91ea4fba33dd520804c8a47e795a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a250d91ea4fba33dd520804c8a47e795a">ast_sip_register_subscription_handler</a> (struct <a class="el" href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a> *<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>)</td></tr>
<tr class="memdesc:a250d91ea4fba33dd520804c8a47e795a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a subscription handler.  <a href="#a250d91ea4fba33dd520804c8a47e795a">More...</a><br /></td></tr>
<tr class="separator:a250d91ea4fba33dd520804c8a47e795a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68314dedb48b2799a693d3a090ae038b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a68314dedb48b2799a693d3a090ae038b">ast_sip_subscription_add_datastore</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *subscription, struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore)</td></tr>
<tr class="memdesc:a68314dedb48b2799a693d3a090ae038b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a datastore to a SIP subscription.  <a href="#a68314dedb48b2799a693d3a090ae038b">More...</a><br /></td></tr>
<tr class="separator:a68314dedb48b2799a693d3a090ae038b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d3ad3f5c55c026e22e1103686227ae0"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a5d3ad3f5c55c026e22e1103686227ae0">ast_sip_subscription_alloc_datastore</a> (const struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> *info, const char *uid)</td></tr>
<tr class="memdesc:a5d3ad3f5c55c026e22e1103686227ae0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alternative for <a class="el" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc()</a>  <a href="#a5d3ad3f5c55c026e22e1103686227ae0">More...</a><br /></td></tr>
<tr class="separator:a5d3ad3f5c55c026e22e1103686227ae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bb393c5880be9a3a3ddeccfc998452b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a3bb393c5880be9a3a3ddeccfc998452b">ast_sip_subscription_destroy</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="memdesc:a3bb393c5880be9a3a3ddeccfc998452b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alert the pubsub core that the subscription is ready for destruction.  <a href="#a3bb393c5880be9a3a3ddeccfc998452b">More...</a><br /></td></tr>
<tr class="separator:a3bb393c5880be9a3a3ddeccfc998452b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c54dc5f481da88392b1ec7149385613"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a5c54dc5f481da88392b1ec7149385613">ast_sip_subscription_get_body_subtype</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="memdesc:a5c54dc5f481da88392b1ec7149385613"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the body subtype used for this subscription.  <a href="#a5c54dc5f481da88392b1ec7149385613">More...</a><br /></td></tr>
<tr class="separator:a5c54dc5f481da88392b1ec7149385613"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2294ee18e05ee676e083133058243909"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a2294ee18e05ee676e083133058243909">ast_sip_subscription_get_body_type</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="memdesc:a2294ee18e05ee676e083133058243909"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the body type used for this subscription.  <a href="#a2294ee18e05ee676e083133058243909">More...</a><br /></td></tr>
<tr class="separator:a2294ee18e05ee676e083133058243909"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ad2231cd4e17cd5a713f0c7cea20da4"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a5ad2231cd4e17cd5a713f0c7cea20da4">ast_sip_subscription_get_datastore</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *subscription, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a5ad2231cd4e17cd5a713f0c7cea20da4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a subscription datastore.  <a href="#a5ad2231cd4e17cd5a713f0c7cea20da4">More...</a><br /></td></tr>
<tr class="separator:a5ad2231cd4e17cd5a713f0c7cea20da4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd22eade3d3a1bfce2d9acf505d34b1a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#acd22eade3d3a1bfce2d9acf505d34b1a">ast_sip_subscription_get_datastores</a> (const struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *subscription)</td></tr>
<tr class="memdesc:acd22eade3d3a1bfce2d9acf505d34b1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the datastores container for a subscription.  <a href="#acd22eade3d3a1bfce2d9acf505d34b1a">More...</a><br /></td></tr>
<tr class="separator:acd22eade3d3a1bfce2d9acf505d34b1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6471e6d6f4563ef5fb93343180fea40"><td class="memItemLeft" align="right" valign="top">pjsip_dialog *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#aa6471e6d6f4563ef5fb93343180fea40">ast_sip_subscription_get_dialog</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="memdesc:aa6471e6d6f4563ef5fb93343180fea40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the pjsip dialog that is associated with this subscription.  <a href="#aa6471e6d6f4563ef5fb93343180fea40">More...</a><br /></td></tr>
<tr class="separator:aa6471e6d6f4563ef5fb93343180fea40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abce1c0cc1320bb801480d0929266d08f"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#abce1c0cc1320bb801480d0929266d08f">ast_sip_subscription_get_endpoint</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="memdesc:abce1c0cc1320bb801480d0929266d08f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the endpoint that is associated with this subscription.  <a href="#abce1c0cc1320bb801480d0929266d08f">More...</a><br /></td></tr>
<tr class="separator:abce1c0cc1320bb801480d0929266d08f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4034b13c08bafa4bff82854bcc0ce135"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a4034b13c08bafa4bff82854bcc0ce135">ast_sip_subscription_get_header</a> (const struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, const char *<a class="el" href="../../d5/d65/structheader.html">header</a>)</td></tr>
<tr class="memdesc:a4034b13c08bafa4bff82854bcc0ce135"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a header value for a subscription.  <a href="#a4034b13c08bafa4bff82854bcc0ce135">More...</a><br /></td></tr>
<tr class="separator:a4034b13c08bafa4bff82854bcc0ce135"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb411f16e0fee4036a22b354164b43a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#aeb411f16e0fee4036a22b354164b43a6">ast_sip_subscription_get_local_uri</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t size)</td></tr>
<tr class="memdesc:aeb411f16e0fee4036a22b354164b43a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the local URI for this subscription.  <a href="#aeb411f16e0fee4036a22b354164b43a6">More...</a><br /></td></tr>
<tr class="separator:aeb411f16e0fee4036a22b354164b43a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac14c963f858de2e8b9bcd86c1a127b2d"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#ac14c963f858de2e8b9bcd86c1a127b2d">ast_sip_subscription_get_persistence_data</a> (const struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *subscription)</td></tr>
<tr class="memdesc:ac14c963f858de2e8b9bcd86c1a127b2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve persistence data for a subscription.  <a href="#ac14c963f858de2e8b9bcd86c1a127b2d">More...</a><br /></td></tr>
<tr class="separator:ac14c963f858de2e8b9bcd86c1a127b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cb53b1ca63b4b97b4b3fa8721274ee9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0cb53b1ca63b4b97b4b3fa8721274ee9">ast_sip_subscription_get_remote_uri</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t size)</td></tr>
<tr class="memdesc:a0cb53b1ca63b4b97b4b3fa8721274ee9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrive the remote URI for this subscription.  <a href="#a0cb53b1ca63b4b97b4b3fa8721274ee9">More...</a><br /></td></tr>
<tr class="separator:a0cb53b1ca63b4b97b4b3fa8721274ee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d7ed3f8785ad9d9aa3fc090d983c45d"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a2d7ed3f8785ad9d9aa3fc090d983c45d">ast_sip_subscription_get_resource_name</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="memdesc:a2d7ed3f8785ad9d9aa3fc090d983c45d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the name of the subscribed resource.  <a href="#a2d7ed3f8785ad9d9aa3fc090d983c45d">More...</a><br /></td></tr>
<tr class="separator:a2d7ed3f8785ad9d9aa3fc090d983c45d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81489602b194ea87cae6470409bee3b5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a81489602b194ea87cae6470409bee3b5">ast_sip_subscription_get_serializer</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="memdesc:a81489602b194ea87cae6470409bee3b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the serializer for the subscription.  <a href="#a81489602b194ea87cae6470409bee3b5">More...</a><br /></td></tr>
<tr class="separator:a81489602b194ea87cae6470409bee3b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79792c0d3a54f779754479075e3c80b3"><td class="memItemLeft" align="right" valign="top">pjsip_sip_uri *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a79792c0d3a54f779754479075e3c80b3">ast_sip_subscription_get_sip_uri</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="memdesc:a79792c0d3a54f779754479075e3c80b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the local sip uri for this subscription.  <a href="#a79792c0d3a54f779754479075e3c80b3">More...</a><br /></td></tr>
<tr class="separator:a79792c0d3a54f779754479075e3c80b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae741d1ec08fd26b810d24514e510dad8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#ae741d1ec08fd26b810d24514e510dad8">ast_sip_subscription_is_terminated</a> (const struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="memdesc:ae741d1ec08fd26b810d24514e510dad8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get whether the subscription has been terminated or not.  <a href="#ae741d1ec08fd26b810d24514e510dad8">More...</a><br /></td></tr>
<tr class="separator:ae741d1ec08fd26b810d24514e510dad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b0f67be0ca6ad54e4eba8d4aa029faf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a5b0f67be0ca6ad54e4eba8d4aa029faf">ast_sip_subscription_notify</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d1/de8/structast__sip__body__data.html">ast_sip_body_data</a> *<a class="el" href="../../d4/d18/structnotify__data.html">notify_data</a>, int terminate)</td></tr>
<tr class="memdesc:a5b0f67be0ca6ad54e4eba8d4aa029faf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify a SIP subscription of a state change.  <a href="#a5b0f67be0ca6ad54e4eba8d4aa029faf">More...</a><br /></td></tr>
<tr class="separator:a5b0f67be0ca6ad54e4eba8d4aa029faf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c257396060f400b0fba424730e7576e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a3c257396060f400b0fba424730e7576e">ast_sip_subscription_remove_datastore</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *subscription, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a3c257396060f400b0fba424730e7576e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a subscription datastore from the subscription.  <a href="#a3c257396060f400b0fba424730e7576e">More...</a><br /></td></tr>
<tr class="separator:a3c257396060f400b0fba424730e7576e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57948a70c8607d9fb37f687da1ad4c25"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a57948a70c8607d9fb37f687da1ad4c25">ast_sip_subscription_send_request</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, pjsip_tx_data *tdata)</td></tr>
<tr class="memdesc:a57948a70c8607d9fb37f687da1ad4c25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request created via a PJSIP evsub method.  <a href="#a57948a70c8607d9fb37f687da1ad4c25">More...</a><br /></td></tr>
<tr class="separator:a57948a70c8607d9fb37f687da1ad4c25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a823b9711e5de08ec19a03f1994c11b30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a823b9711e5de08ec19a03f1994c11b30">ast_sip_subscription_set_persistence_data</a> (struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *subscription, struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *persistence_data)</td></tr>
<tr class="memdesc:a823b9711e5de08ec19a03f1994c11b30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set persistence data for a subscription.  <a href="#a823b9711e5de08ec19a03f1994c11b30">More...</a><br /></td></tr>
<tr class="separator:a823b9711e5de08ec19a03f1994c11b30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65b342a28c864a472dfff5ea27de8691"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a65b342a28c864a472dfff5ea27de8691">ast_sip_unregister_publish_handler</a> (struct <a class="el" href="../../d5/d9f/structast__sip__publish__handler.html">ast_sip_publish_handler</a> *<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>)</td></tr>
<tr class="memdesc:a65b342a28c864a472dfff5ea27de8691"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a publish handler.  <a href="#a65b342a28c864a472dfff5ea27de8691">More...</a><br /></td></tr>
<tr class="separator:a65b342a28c864a472dfff5ea27de8691"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16d299943a24f9857d3e847b83073d5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a16d299943a24f9857d3e847b83073d5d">ast_sip_unregister_subscription_handler</a> (struct <a class="el" href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a> *<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>)</td></tr>
<tr class="memdesc:a16d299943a24f9857d3e847b83073d5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a subscription handler.  <a href="#a16d299943a24f9857d3e847b83073d5d">More...</a><br /></td></tr>
<tr class="separator:a16d299943a24f9857d3e847b83073d5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="adabdcafc2b4700a1c7727ac147f27639"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adabdcafc2b4700a1c7727ac147f27639">&#9670;&nbsp;</a></span>AST_SIP_EXTEN_STATE_DATA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_SIP_EXTEN_STATE_DATA&#160;&#160;&#160;&quot;ast_sip_exten_state_data&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Type used for extension state/presence </p>

<p class="definition">Definition at line <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00232">232</a> of file <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html">res_pjsip_pubsub.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00619">exten_state_publisher_cb()</a>, and <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00288">notify_task()</a>.</p>

</div>
</div>
<a id="a1521854cc25592b7f8a58a4bed55ac6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1521854cc25592b7f8a58a4bed55ac6d">&#9670;&nbsp;</a></span>AST_SIP_MAX_ACCEPT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_SIP_MAX_ACCEPT&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00219">219</a> of file <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html">res_pjsip_pubsub.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02777">ast_sip_register_subscription_handler()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00831">subscription_get_generator_from_rdata()</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00745">subscription_persistence_remove()</a>.</p>

</div>
</div>
<a id="a9632d729a323355beec62acda995cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9632d729a323355beec62acda995cc21">&#9670;&nbsp;</a></span>AST_SIP_MESSAGE_ACCUMULATOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_SIP_MESSAGE_ACCUMULATOR&#160;&#160;&#160;&quot;ast_sip_message_accumulator&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Type used for conveying mailbox state </p>

<p class="definition">Definition at line <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00234">234</a> of file <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html">res_pjsip_pubsub.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00538">send_mwi_notify()</a>, and <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00371">send_unsolicited_mwi_notify_to_contact()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a0a56204d9bae50c4103725ef62aab562"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a56204d9bae50c4103725ef62aab562">&#9670;&nbsp;</a></span>ast_sip_publish_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562">ast_sip_publish_state</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a0a56204d9bae50c4103725ef62aab562ab368f4beb502956f3544f351c116ade6"></a>AST_SIP_PUBLISH_STATE_INITIALIZED&#160;</td><td class="fielddoc"><p>Publication has just been initialized </p>
</td></tr>
<tr><td class="fieldname"><a id="a0a56204d9bae50c4103725ef62aab562a5d64d62e9e58a0f155318ab2bc94ade3"></a>AST_SIP_PUBLISH_STATE_ACTIVE&#160;</td><td class="fielddoc"><p>Publication is currently active </p>
</td></tr>
<tr><td class="fieldname"><a id="a0a56204d9bae50c4103725ef62aab562a797a8ff87d8dc4f37be06d27c0687352"></a>AST_SIP_PUBLISH_STATE_TERMINATED&#160;</td><td class="fielddoc"><p>Publication has been terminated </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00037">37</a> of file <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html">res_pjsip_pubsub.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                           {<span class="comment"></span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">    /*! Publication has just been initialized */</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562ab368f4beb502956f3544f351c116ade6">AST_SIP_PUBLISH_STATE_INITIALIZED</a>,<span class="comment"></span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">    /*! Publication is currently active */</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562a5d64d62e9e58a0f155318ab2bc94ade3">AST_SIP_PUBLISH_STATE_ACTIVE</a>,<span class="comment"></span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">    /*! Publication has been terminated */</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562a797a8ff87d8dc4f37be06d27c0687352">AST_SIP_PUBLISH_STATE_TERMINATED</a>,</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;};</div><div class="ttc" id="res__pjsip__pubsub_8h_html_a0a56204d9bae50c4103725ef62aab562a5d64d62e9e58a0f155318ab2bc94ade3"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562a5d64d62e9e58a0f155318ab2bc94ade3">AST_SIP_PUBLISH_STATE_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00041">res_pjsip_pubsub.h:41</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a0a56204d9bae50c4103725ef62aab562a797a8ff87d8dc4f37be06d27c0687352"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562a797a8ff87d8dc4f37be06d27c0687352">AST_SIP_PUBLISH_STATE_TERMINATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00043">res_pjsip_pubsub.h:43</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a0a56204d9bae50c4103725ef62aab562ab368f4beb502956f3544f351c116ade6"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a0a56204d9bae50c4103725ef62aab562ab368f4beb502956f3544f351c116ade6">AST_SIP_PUBLISH_STATE_INITIALIZED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00039">res_pjsip_pubsub.h:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9b8c76be46a7016bf5a352af82470bc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b8c76be46a7016bf5a352af82470bc8">&#9670;&nbsp;</a></span>ast_sip_subscription_notify_reason</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8">ast_sip_subscription_notify_reason</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a9b8c76be46a7016bf5a352af82470bc8a5ecfc46fb4337bd9d5c9f2253e197583"></a>AST_SIP_SUBSCRIPTION_NOTIFY_REASON_STARTED&#160;</td><td class="fielddoc"><p>Initial NOTIFY for subscription </p>
</td></tr>
<tr><td class="fieldname"><a id="a9b8c76be46a7016bf5a352af82470bc8a2cf7cc98f2ea79c84c94f7e5a9dfeae0"></a>AST_SIP_SUBSCRIPTION_NOTIFY_REASON_RENEWED&#160;</td><td class="fielddoc"><p>Subscription has been renewed </p>
</td></tr>
<tr><td class="fieldname"><a id="a9b8c76be46a7016bf5a352af82470bc8ad77cd10aac8a016474e1595c2342a90e"></a>AST_SIP_SUBSCRIPTION_NOTIFY_REASON_TERMINATED&#160;</td><td class="fielddoc"><p>Subscription is being terminated </p>
</td></tr>
<tr><td class="fieldname"><a id="a9b8c76be46a7016bf5a352af82470bc8ac605eaafb5b7ba1aefd0011850f1eb21"></a>AST_SIP_SUBSCRIPTION_NOTIFY_REASON_OTHER&#160;</td><td class="fielddoc"><p>Other unspecified reason </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00220">220</a> of file <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html">res_pjsip_pubsub.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                                        {<span class="comment"></span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">   /*! Initial NOTIFY for subscription */</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;   <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8a5ecfc46fb4337bd9d5c9f2253e197583">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_STARTED</a>,<span class="comment"></span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">   /*! Subscription has been renewed */</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8a2cf7cc98f2ea79c84c94f7e5a9dfeae0">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_RENEWED</a>,<span class="comment"></span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">   /*! Subscription is being terminated */</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8ad77cd10aac8a016474e1595c2342a90e">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_TERMINATED</a>,<span class="comment"></span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">   /*! Other unspecified reason */</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8ac605eaafb5b7ba1aefd0011850f1eb21">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_OTHER</a></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;};</div><div class="ttc" id="res__pjsip__pubsub_8h_html_a9b8c76be46a7016bf5a352af82470bc8a2cf7cc98f2ea79c84c94f7e5a9dfeae0"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8a2cf7cc98f2ea79c84c94f7e5a9dfeae0">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_RENEWED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00224">res_pjsip_pubsub.h:224</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a9b8c76be46a7016bf5a352af82470bc8a5ecfc46fb4337bd9d5c9f2253e197583"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8a5ecfc46fb4337bd9d5c9f2253e197583">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_STARTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00222">res_pjsip_pubsub.h:222</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a9b8c76be46a7016bf5a352af82470bc8ac605eaafb5b7ba1aefd0011850f1eb21"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8ac605eaafb5b7ba1aefd0011850f1eb21">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_OTHER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00228">res_pjsip_pubsub.h:228</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a9b8c76be46a7016bf5a352af82470bc8ad77cd10aac8a016474e1595c2342a90e"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b8c76be46a7016bf5a352af82470bc8ad77cd10aac8a016474e1595c2342a90e">AST_SIP_SUBSCRIPTION_NOTIFY_REASON_TERMINATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00226">res_pjsip_pubsub.h:226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9b75abdc267ce4a677b7eaa67ead3c20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b75abdc267ce4a677b7eaa67ead3c20">&#9670;&nbsp;</a></span>ast_sip_subscription_role</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20">ast_sip_subscription_role</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Role for the subscription that is being created. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a9b75abdc267ce4a677b7eaa67ead3c20a3c10d5621e8e7278503d4ea4c13cedc1"></a>AST_SIP_SUBSCRIBER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9b75abdc267ce4a677b7eaa67ead3c20ab72ff83a6adb7eae0bf918c8e3f5cf49"></a>AST_SIP_NOTIFIER&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00190">190</a> of file <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html">res_pjsip_pubsub.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                               {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <span class="comment">/* Sending SUBSCRIBEs, receiving NOTIFYs */</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20a3c10d5621e8e7278503d4ea4c13cedc1">AST_SIP_SUBSCRIBER</a>,</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <span class="comment">/* Sending NOTIFYs, receiving SUBSCRIBEs */</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20ab72ff83a6adb7eae0bf918c8e3f5cf49">AST_SIP_NOTIFIER</a>,</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;};</div><div class="ttc" id="res__pjsip__pubsub_8h_html_a9b75abdc267ce4a677b7eaa67ead3c20a3c10d5621e8e7278503d4ea4c13cedc1"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20a3c10d5621e8e7278503d4ea4c13cedc1">AST_SIP_SUBSCRIBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00192">res_pjsip_pubsub.h:192</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a9b75abdc267ce4a677b7eaa67ead3c20ab72ff83a6adb7eae0bf918c8e3f5cf49"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a9b75abdc267ce4a677b7eaa67ead3c20ab72ff83a6adb7eae0bf918c8e3f5cf49">AST_SIP_NOTIFIER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00194">res_pjsip_pubsub.h:194</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="adcc803ec5ffc0029b9be176cc090f135"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcc803ec5ffc0029b9be176cc090f135">&#9670;&nbsp;</a></span>ast_sip_create_subscription()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a>* ast_sip_create_subscription </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a> *&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>resource</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new <a class="el" href="../../db/d02/structast__sip__subscription.html" title="Structure representing a &quot;virtual&quot; SIP subscription. ">ast_sip_subscription</a> structure. </p>
<p>When a subscriber wishes to create a subscription, it may call this function to allocate resources and to send the initial SUBSCRIBE out.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscriber</td><td>The subscriber that is making the request. </td></tr>
    <tr><td class="paramname">endpoint</td><td>The endpoint to whome the SUBSCRIBE will be sent. </td></tr>
    <tr><td class="paramname">resource</td><td>The resource to place in the SUBSCRIBE's Request-URI. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01868">1868</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01175">add_subscription()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01233">allocate_subscription()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01405">allocate_subscription_tree()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00821">ast_sip_endpoint::aors</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04028">ast_sip_create_dialog_uac()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l00304">ast_sip_location_retrieve_contact_from_aor_list()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00328">resource_list::event</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00316">ast_sip_subscription_handler::event_name</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00441">sip_subscription_tree::evsub</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00549">pubsub_cb</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01396">subscription_setup_dialog()</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00303">ast_sip_contact::uri</a>.</p>
<div class="fragment"><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;{</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;   pjsip_dialog *dlg;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a> *<a class="code" href="../../d9/d03/structcontact.html">contact</a>;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;   pj_str_t <a class="code" href="../../df/d7d/structevent.html">event</a>;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;   pjsip_tx_data *tdata;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;   pjsip_evsub *evsub;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/dd7/structsip__subscription__tree.html">sip_subscription_tree</a> *sub_tree = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;   sub_tree = <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#ae855491c1f2f6714df5daa3fd69a10df">allocate_subscription_tree</a>(endpoint, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;   <span class="keywordflow">if</span> (!sub_tree) {</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;   }</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;   sub = <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#aa70a279b186df17b611eabf8164c396c">allocate_subscription</a>(handler, resource, sub_tree);</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;   <span class="keywordflow">if</span> (!sub) {</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sub_tree);</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;   }</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;   contact = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a00fd98f03df089bd6aa358f941ae0dcd">ast_sip_location_retrieve_contact_from_aor_list</a>(endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50edbc089f02d537b9a487f1a62c889e">aors</a>);</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;   <span class="keywordflow">if</span> (!contact || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(contact-&gt;<a class="code" href="../../d8/d8a/structast__sip__contact.html#a19ac71226fac09e87afe31acb4c99214">uri</a>)) {</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No contacts configured for endpoint %s. Unable to create SIP subsription\n&quot;</span>,</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;            <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(endpoint));</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub_tree, -1);</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(contact);</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;   }</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;   dlg = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a681ca1bf74a943a8009a5c2ad6894831">ast_sip_create_dialog_uac</a>(endpoint, contact-&gt;<a class="code" href="../../d8/d8a/structast__sip__contact.html#a19ac71226fac09e87afe31acb4c99214">uri</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(contact);</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;   <span class="keywordflow">if</span> (!dlg) {</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create dialog for SIP subscription\n&quot;</span>);</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub_tree, -1);</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;   }</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;   pj_cstr(&amp;event, handler-&gt;<a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>);</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;   pjsip_evsub_create_uac(dlg, &amp;<a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a7d62301cf52b6bc6d7b66cea60bee8cc">pubsub_cb</a>, &amp;event, 0, &amp;sub_tree-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a3990a4c9f559fbabfdfe3f6785246b3e">evsub</a>);</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;   <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#acc8db1e0ce416bc7a5a05275db0cb8a7">subscription_setup_dialog</a>(sub_tree, dlg);</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;   evsub = sub_tree-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a3990a4c9f559fbabfdfe3f6785246b3e">evsub</a>;</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;   <span class="keywordflow">if</span> (pjsip_evsub_initiate(evsub, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -1, &amp;tdata) == PJ_SUCCESS) {</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      pjsip_evsub_send_request(sub_tree-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a3990a4c9f559fbabfdfe3f6785246b3e">evsub</a>, tdata);</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      <span class="comment">/* pjsip_evsub_terminate will result in pubsub_on_evsub_state,</span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;<span class="comment">       * being called and terminating the subscription. Therefore, we don&#39;t</span></div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="comment">       * need to decrease the reference count of sub here.</span></div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;      pjsip_evsub_terminate(evsub, PJ_TRUE);</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub_tree, -1);</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;   }</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;   <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a8ebc5adf3564428c0201cff2376dd187">add_subscription</a>(sub_tree);</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;}</div><div class="ttc" id="res__pjsip__pubsub_8c_html_a8ebc5adf3564428c0201cff2376dd187"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a8ebc5adf3564428c0201cff2376dd187">add_subscription</a></div><div class="ttdeci">static void add_subscription(struct sip_subscription_tree *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01175">res_pjsip_pubsub.c:1175</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a7d62301cf52b6bc6d7b66cea60bee8cc"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a7d62301cf52b6bc6d7b66cea60bee8cc">pubsub_cb</a></div><div class="ttdeci">static pjsip_evsub_user pubsub_cb</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00549">res_pjsip_pubsub.c:549</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structsip__subscription__tree_html_a3990a4c9f559fbabfdfe3f6785246b3e"><div class="ttname"><a href="../../d0/dd7/structsip__subscription__tree.html#a3990a4c9f559fbabfdfe3f6785246b3e">sip_subscription_tree::evsub</a></div><div class="ttdeci">pjsip_evsub * evsub</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00441">res_pjsip_pubsub.c:441</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a00fd98f03df089bd6aa358f941ae0dcd"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a00fd98f03df089bd6aa358f941ae0dcd">ast_sip_location_retrieve_contact_from_aor_list</a></div><div class="ttdeci">struct ast_sip_contact * ast_sip_location_retrieve_contact_from_aor_list(const char *aor_list)</div><div class="ttdoc">Retrieve the first bound contact from a list of AORs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dad/location_8c_source.html#l00304">location.c:304</a></div></div>
<div class="ttc" id="structast__sip__subscription_html"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a></div><div class="ttdoc">Structure representing a &quot;virtual&quot; SIP subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00477">res_pjsip_pubsub.c:477</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_acc8db1e0ce416bc7a5a05275db0cb8a7"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#acc8db1e0ce416bc7a5a05275db0cb8a7">subscription_setup_dialog</a></div><div class="ttdeci">static void subscription_setup_dialog(struct sip_subscription_tree *sub_tree, pjsip_dialog *dlg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01396">res_pjsip_pubsub.c:1396</a></div></div>
<div class="ttc" id="structast__sip__contact_html"><div class="ttname"><a href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a></div><div class="ttdoc">Contact associated with an address of record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00281">res_pjsip.h:281</a></div></div>
<div class="ttc" id="structast__sip__subscription__handler_html_aeccf279e6fca0e5f8536fdf76c838728"><div class="ttname"><a href="../../d8/d6c/structast__sip__subscription__handler.html#aeccf279e6fca0e5f8536fdf76c838728">ast_sip_subscription_handler::event_name</a></div><div class="ttdeci">const char * event_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00316">res_pjsip_pubsub.h:316</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_aa70a279b186df17b611eabf8164c396c"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#aa70a279b186df17b611eabf8164c396c">allocate_subscription</a></div><div class="ttdeci">static struct ast_sip_subscription * allocate_subscription(const struct ast_sip_subscription_handler *handler, const char *resource, struct sip_subscription_tree *tree)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01233">res_pjsip_pubsub.c:1233</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a681ca1bf74a943a8009a5c2ad6894831"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a681ca1bf74a943a8009a5c2ad6894831">ast_sip_create_dialog_uac</a></div><div class="ttdeci">pjsip_dialog * ast_sip_create_dialog_uac(const struct ast_sip_endpoint *endpoint, const char *aor_name, const char *request_user)</div><div class="ttdoc">General purpose method for creating a UAC dialog with an endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04028">res_pjsip.c:4028</a></div></div>
<div class="ttc" id="structcontact_html"><div class="ttname"><a href="../../d9/d03/structcontact.html">contact</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8f/reqresp__parser_8h_source.html#l00035">reqresp_parser.h:35</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a50edbc089f02d537b9a487f1a62c889e"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a50edbc089f02d537b9a487f1a62c889e">ast_sip_endpoint::aors</a></div><div class="ttdeci">const ast_string_field aors</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00821">res_pjsip.h:821</a></div></div>
<div class="ttc" id="structast__sip__contact_html_a19ac71226fac09e87afe31acb4c99214"><div class="ttname"><a href="../../d8/d8a/structast__sip__contact.html#a19ac71226fac09e87afe31acb4c99214">ast_sip_contact::uri</a></div><div class="ttdeci">const ast_string_field uri</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00303">res_pjsip.h:303</a></div></div>
<div class="ttc" id="structsip__subscription__tree_html"><div class="ttname"><a href="../../d0/dd7/structsip__subscription__tree.html">sip_subscription_tree</a></div><div class="ttdoc">A tree of SIP subscriptions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00431">res_pjsip_pubsub.c:431</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_ae855491c1f2f6714df5daa3fd69a10df"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#ae855491c1f2f6714df5daa3fd69a10df">allocate_subscription_tree</a></div><div class="ttdeci">static struct sip_subscription_tree * allocate_subscription_tree(struct ast_sip_endpoint *endpoint, pjsip_rx_data *rdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01405">res_pjsip_pubsub.c:1405</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aefd01cccb44e52e8c576785903382206"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefd01cccb44e52e8c576785903382206">&#9670;&nbsp;</a></span>ast_sip_publication_add_datastore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_publication_add_datastore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *&#160;</td>
          <td class="paramname"><em>publication</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *&#160;</td>
          <td class="paramname"><em>datastore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a datastore to a SIP publication. </p>
<p>Note that SIP uses reference counted datastores. The datastore passed into this function must have been allocated using <a class="el" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc()</a> or there will be serious problems.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">publication</td><td>The publication to add the datastore to </td></tr>
    <tr><td class="paramname">datastore</td><td>The datastore to be added to the subscription </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02649">2649</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d7a/datastore_8c_source.html#l00101">ast_datastores_add()</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00347">ast_sip_publication::datastores</a>.</p>
<div class="fragment"><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;{</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/db6/datastore_8h.html#a267b2996c54061f82ff1c5be72bbc731">ast_datastores_add</a>(publication-&gt;<a class="code" href="../../d4/da6/structast__sip__publication.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>, datastore);</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;}</div><div class="ttc" id="datastore_8h_html_a267b2996c54061f82ff1c5be72bbc731"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a267b2996c54061f82ff1c5be72bbc731">ast_datastores_add</a></div><div class="ttdeci">int ast_datastores_add(struct ao2_container *datastores, struct ast_datastore *datastore)</div><div class="ttdoc">Add a data store to a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00101">datastore.c:101</a></div></div>
<div class="ttc" id="structast__sip__publication_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../d4/da6/structast__sip__publication.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_publication::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00347">res_pjsip_pubsub.c:347</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a69501f479a8ea3b0d1b6c4b8439e03c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69501f479a8ea3b0d1b6c4b8439e03c9">&#9670;&nbsp;</a></span>ast_sip_publication_get_datastore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a>* ast_sip_publication_get_datastore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *&#160;</td>
          <td class="paramname"><em>publication</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve a publication datastore. </p>
<p>The datastore retrieved will have its reference count incremented. When the caller is done with the datastore, the reference counted needs to be decremented using <a class="el" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">publication</td><td>The publication from which to retrieve the datastore </td></tr>
    <tr><td class="paramname">name</td><td>The name of the datastore to retrieve </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failed to find the specified datastore </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The specified datastore </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02654">2654</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d7a/datastore_8c_source.html#l00119">ast_datastores_find()</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00347">ast_sip_publication::datastores</a>.</p>
<div class="fragment"><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;{</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/db6/datastore_8h.html#a3e5e18520733ba3dc58c1e218ab5541b">ast_datastores_find</a>(publication-&gt;<a class="code" href="../../d4/da6/structast__sip__publication.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;}</div><div class="ttc" id="datastore_8h_html_a3e5e18520733ba3dc58c1e218ab5541b"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a3e5e18520733ba3dc58c1e218ab5541b">ast_datastores_find</a></div><div class="ttdeci">struct ast_datastore * ast_datastores_find(struct ao2_container *datastores, const char *name)</div><div class="ttdoc">Find a data store in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00119">datastore.c:119</a></div></div>
<div class="ttc" id="structast__sip__publication_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../d4/da6/structast__sip__publication.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_publication::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00347">res_pjsip_pubsub.c:347</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa8ca8ca978fb48dc5a57ce618b36c0b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8ca8ca978fb48dc5a57ce618b36c0b5">&#9670;&nbsp;</a></span>ast_sip_publication_get_datastores()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a>* ast_sip_publication_get_datastores </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *&#160;</td>
          <td class="paramname"><em>publication</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the datastores container for a publication. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">publication</td><td>The publication to get the datastores container from</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>datastores container not present </td></tr>
    <tr><td class="paramname">non-NULL</td><td>datastores container</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The container is NOT returned with reference count bumped</dd></dl>
<dl class="section since"><dt>Since</dt><dd>14.0.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02664">2664</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00347">ast_sip_publication::datastores</a>.</p>
<div class="fragment"><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;{</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;   <span class="keywordflow">return</span> publication-&gt;<a class="code" href="../../d4/da6/structast__sip__publication.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>;</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;}</div><div class="ttc" id="structast__sip__publication_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../d4/da6/structast__sip__publication.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_publication::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00347">res_pjsip_pubsub.c:347</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adf23ea14cf21cc35810a043bed318bb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf23ea14cf21cc35810a043bed318bb6">&#9670;&nbsp;</a></span>ast_sip_publication_get_endpoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a>* ast_sip_publication_get_endpoint </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *&#160;</td>
          <td class="paramname"><em>pub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a publication, get the associated endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pub</td><td>The publication </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failure </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The associated endpoint </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03420">3420</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00353">ast_sip_publication::endpoint</a>.</p>
<div class="fragment"><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;{</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;   <span class="keywordflow">return</span> pub-&gt;<a class="code" href="../../d4/da6/structast__sip__publication.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>;</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;}</div><div class="ttc" id="structast__sip__publication_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d4/da6/structast__sip__publication.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_publication::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdoc">The endpoint with which the subscription is communicating. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00353">res_pjsip_pubsub.c:353</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ada9f3d03df5f52f4aeb09f6d952f46de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada9f3d03df5f52f4aeb09f6d952f46de">&#9670;&nbsp;</a></span>ast_sip_publication_get_event_configuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_sip_publication_get_event_configuration </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *&#160;</td>
          <td class="paramname"><em>pub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a publication, get the configuration name for the event type in use. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pub</td><td>The publication </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The configuration name </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03430">3430</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00361">ast_sip_publication::event_configuration_name</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00594">asterisk_publication_devicestate_state_change()</a>, and <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00685">asterisk_publication_mwi_state_change()</a>.</p>
<div class="fragment"><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;{</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;   <span class="keywordflow">return</span> pub-&gt;<a class="code" href="../../d4/da6/structast__sip__publication.html#a6aae576152b40374b43f81349aecc739">event_configuration_name</a>;</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;}</div><div class="ttc" id="structast__sip__publication_html_a6aae576152b40374b43f81349aecc739"><div class="ttname"><a href="../../d4/da6/structast__sip__publication.html#a6aae576152b40374b43f81349aecc739">ast_sip_publication::event_configuration_name</a></div><div class="ttdeci">char * event_configuration_name</div><div class="ttdoc">The name of the event type configuration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00361">res_pjsip_pubsub.c:361</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac1dd2ba4db4cb10f5d1813886503bd96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1dd2ba4db4cb10f5d1813886503bd96">&#9670;&nbsp;</a></span>ast_sip_publication_get_resource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_sip_publication_get_resource </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *&#160;</td>
          <td class="paramname"><em>pub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a publication, get the resource the publication is to. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pub</td><td>The publication </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The resource </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03425">3425</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00359">ast_sip_publication::resource</a>.</p>
<div class="fragment"><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;{</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;   <span class="keywordflow">return</span> pub-&gt;<a class="code" href="../../d4/da6/structast__sip__publication.html#add9403c2dd81e949c8c4aa872eabdcc7">resource</a>;</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;}</div><div class="ttc" id="structast__sip__publication_html_add9403c2dd81e949c8c4aa872eabdcc7"><div class="ttname"><a href="../../d4/da6/structast__sip__publication.html#add9403c2dd81e949c8c4aa872eabdcc7">ast_sip_publication::resource</a></div><div class="ttdeci">char * resource</div><div class="ttdoc">The resource the publication is to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00359">res_pjsip_pubsub.c:359</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a60c370a28e03a8dc64e6b1cf9f277194"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60c370a28e03a8dc64e6b1cf9f277194">&#9670;&nbsp;</a></span>ast_sip_publication_remove_datastore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_publication_remove_datastore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/da6/structast__sip__publication.html">ast_sip_publication</a> *&#160;</td>
          <td class="paramname"><em>publication</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a publication datastore from the publication. </p>
<p>This operation may cause the datastore's <a class="el" href="../../da/dfd/gsm__destroy_8c.html#aafde19f7d36ca163a143579c1b125b6d">free()</a> callback to be called if the reference count reaches zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">publication</td><td>The publication to remove the datastore from </td></tr>
    <tr><td class="paramname">name</td><td>The name of the datastore to remove </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02659">2659</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d7a/datastore_8c_source.html#l00114">ast_datastores_remove()</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00347">ast_sip_publication::datastores</a>.</p>
<div class="fragment"><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;{</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;   <a class="code" href="../../d9/db6/datastore_8h.html#a126dac1c8ced6e9cf905430e88f35396">ast_datastores_remove</a>(publication-&gt;<a class="code" href="../../d4/da6/structast__sip__publication.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;}</div><div class="ttc" id="structast__sip__publication_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../d4/da6/structast__sip__publication.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_publication::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00347">res_pjsip_pubsub.c:347</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="datastore_8h_html_a126dac1c8ced6e9cf905430e88f35396"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a126dac1c8ced6e9cf905430e88f35396">ast_datastores_remove</a></div><div class="ttdeci">void ast_datastores_remove(struct ao2_container *datastores, const char *name)</div><div class="ttdoc">Remove a data store from a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00114">datastore.c:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a41512cbe01e475968618fcb5631bb1b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41512cbe01e475968618fcb5631bb1b0">&#9670;&nbsp;</a></span>ast_sip_pubsub_generate_body_content()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_pubsub_generate_body_content </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>content_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>content_subtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/de8/structast__sip__body__data.html">ast_sip_body_data</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate body content for a PUBLISH or NOTIFY. </p>
<dl class="section since"><dt>Since</dt><dd>13.0.0 This function takes a pre-allocated body and calls into registered body generators in order to fill in the body with appropriate details. The primary body generator will be called first, followed by the supplementary body generators</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">content_type</td><td>The content type of the body </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">content_subtype</td><td>The content subtype of the body </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">data</td><td>The data associated with body generation. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">str</td><td>The string representation of the generated body </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">non-zero</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03519">3519</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00617">ast_sip_pubsub_body_generator::allocate_body</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00243">ast_sip_body_data::body_data</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00241">ast_sip_body_data::body_type</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00603">ast_sip_pubsub_body_generator::body_type</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00645">ast_sip_pubsub_body_generator::destroy_body</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02839">find_body_generator_type_subtype()</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00629">ast_sip_pubsub_body_generator::generate_body_content</a>, <a class="el" href="../../df/dde/app__fax_8c_source.html#l00359">generator</a>, <a class="el" href="../../df/dc3/structast__sip__pubsub__body__generator.html#af820db3728fdeafb6d1c8ff284ea6cc5">ast_sip_pubsub_body_generator::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00601">ast_sip_pubsub_body_generator::subtype</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00666">ast_sip_pubsub_body_supplement::subtype</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00679">ast_sip_pubsub_body_supplement::supplement_body</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00636">ast_sip_pubsub_body_generator::to_string</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00596">ast_sip_pubsub_body_generator::type</a>, and <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00661">ast_sip_pubsub_body_supplement::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02529">ast_sip_subscription_notify()</a>, <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00619">exten_state_publisher_cb()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02887">generate_initial_notify()</a>, and <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00371">send_unsolicited_mwi_notify_to_contact()</a>.</p>
<div class="fragment"><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;{</div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d72/structast__sip__pubsub__body__supplement.html">ast_sip_pubsub_body_supplement</a> *supplement;</div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a> *<a class="code" href="../../df/dde/app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a>;</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;   <span class="keywordtype">void</span> *body;</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;   generator = <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a5df18a3e8742e6bd4e6917b459c4c82d">find_body_generator_type_subtype</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>);</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;   <span class="keywordflow">if</span> (!generator) {</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to find a body generator for %s/%s\n&quot;</span>,</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;            <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>);</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;   }</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;   <span class="keywordflow">if</span> (strcmp(data-&gt;<a class="code" href="../../d1/de8/structast__sip__body__data.html#a35514bc6335d541353cf54c7146e8ce5">body_type</a>, generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a35514bc6335d541353cf54c7146e8ce5">body_type</a>)) {</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;%s/%s body generator does not accept the type of data provided\n&quot;</span>,</div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;         <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>);</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;   }</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;   body = generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a385739136e77ae600f5bf6f00bcfebb9">allocate_body</a>(data-&gt;<a class="code" href="../../d1/de8/structast__sip__body__data.html#a086f833f6f250c98d7bcd80f9a573d06">body_data</a>);</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;   <span class="keywordflow">if</span> (!body) {</div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;%s/%s body generator could not to allocate a body\n&quot;</span>,</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;         <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>);</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;   }</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;</div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;   <span class="keywordflow">if</span> (generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#ae9df1ad90af9f1ce1a581f295ef305a5">generate_body_content</a>(body, data-&gt;<a class="code" href="../../d1/de8/structast__sip__body__data.html#a086f833f6f250c98d7bcd80f9a573d06">body_data</a>)) {</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;      res = -1;</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;   }</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d5/d90/structbody__supplements.html">body_supplements</a>);</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d90/structbody__supplements.html">body_supplements</a>, supplement, <a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#af820db3728fdeafb6d1c8ff284ea6cc5">list</a>) {</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;      <span class="keywordflow">if</span> (!strcmp(generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>, supplement-&gt;<a class="code" href="../../d7/d72/structast__sip__pubsub__body__supplement.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>) &amp;&amp;</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;            !strcmp(generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>, supplement-&gt;<a class="code" href="../../d7/d72/structast__sip__pubsub__body__supplement.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>)) {</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;         res = supplement-&gt;<a class="code" href="../../d7/d72/structast__sip__pubsub__body__supplement.html#a2d404fadf2a8afa26742b1cd27bd50cd">supplement_body</a>(body, data-&gt;<a class="code" href="../../d1/de8/structast__sip__body__data.html#a086f833f6f250c98d7bcd80f9a573d06">body_data</a>);</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;         <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;         }</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;      }</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;   }</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d90/structbody__supplements.html">body_supplements</a>);</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;</div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;      generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a01fdd40c6cfdff735455dee9436346d6">to_string</a>(body, str);</div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;   }</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;   <span class="keywordflow">if</span> (generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a3b12361a3bb7b12cc7729927503209cb">destroy_body</a>) {</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;      generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a3b12361a3bb7b12cc7729927503209cb">destroy_body</a>(body);</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;   }</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;}</div><div class="ttc" id="structast__sip__pubsub__body__generator_html_a01fdd40c6cfdff735455dee9436346d6"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#a01fdd40c6cfdff735455dee9436346d6">ast_sip_pubsub_body_generator::to_string</a></div><div class="ttdeci">void(* to_string)(void *body, struct ast_str **str)</div><div class="ttdoc">Convert the body to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00636">res_pjsip_pubsub.h:636</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_a35514bc6335d541353cf54c7146e8ce5"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#a35514bc6335d541353cf54c7146e8ce5">ast_sip_pubsub_body_generator::body_type</a></div><div class="ttdeci">const char * body_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00603">res_pjsip_pubsub.h:603</a></div></div>
<div class="ttc" id="structast__sip__body__data_html_a086f833f6f250c98d7bcd80f9a573d06"><div class="ttname"><a href="../../d1/de8/structast__sip__body__data.html#a086f833f6f250c98d7bcd80f9a573d06">ast_sip_body_data::body_data</a></div><div class="ttdeci">void * body_data</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00243">res_pjsip_pubsub.h:243</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a></div><div class="ttdoc">Pubsub body generator. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00591">res_pjsip_pubsub.h:591</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__supplement_html"><div class="ttname"><a href="../../d7/d72/structast__sip__pubsub__body__supplement.html">ast_sip_pubsub_body_supplement</a></div><div class="ttdoc">Body supplement. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00656">res_pjsip_pubsub.h:656</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_sip_pubsub_body_generator::type</a></div><div class="ttdeci">const char * type</div><div class="ttdoc">Content type In &quot;plain/text&quot;, &quot;plain&quot; is the type. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00596">res_pjsip_pubsub.h:596</a></div></div>
<div class="ttc" id="structast__sip__body__data_html_a35514bc6335d541353cf54c7146e8ce5"><div class="ttname"><a href="../../d1/de8/structast__sip__body__data.html#a35514bc6335d541353cf54c7146e8ce5">ast_sip_body_data::body_type</a></div><div class="ttdeci">const char * body_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00241">res_pjsip_pubsub.h:241</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__supplement_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d7/d72/structast__sip__pubsub__body__supplement.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_sip_pubsub_body_supplement::type</a></div><div class="ttdeci">const char * type</div><div class="ttdoc">Content type In &quot;plain/text&quot;, &quot;plain&quot; is the type. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00661">res_pjsip_pubsub.h:661</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__supplement_html_abb4ae60bbcbce3616fdd7d4238869c91"><div class="ttname"><a href="../../d7/d72/structast__sip__pubsub__body__supplement.html#abb4ae60bbcbce3616fdd7d4238869c91">ast_sip_pubsub_body_supplement::subtype</a></div><div class="ttdeci">const char * subtype</div><div class="ttdoc">Content subtype In &quot;plain/text&quot;, &quot;text&quot; is the subtype. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00666">res_pjsip_pubsub.h:666</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_a385739136e77ae600f5bf6f00bcfebb9"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#a385739136e77ae600f5bf6f00bcfebb9">ast_sip_pubsub_body_generator::allocate_body</a></div><div class="ttdeci">void *(* allocate_body)(void *data)</div><div class="ttdoc">allocate body structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00617">res_pjsip_pubsub.h:617</a></div></div>
<div class="ttc" id="structbody__supplements_html"><div class="ttname"><a href="../../d5/d90/structbody__supplements.html">body_supplements</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00537">res_pjsip_pubsub.c:537</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a5df18a3e8742e6bd4e6917b459c4c82d"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a5df18a3e8742e6bd4e6917b459c4c82d">find_body_generator_type_subtype</a></div><div class="ttdeci">static struct ast_sip_pubsub_body_generator * find_body_generator_type_subtype(const char *type, const char *subtype)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02839">res_pjsip_pubsub.c:2839</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_abb4ae60bbcbce3616fdd7d4238869c91"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">ast_sip_pubsub_body_generator::subtype</a></div><div class="ttdeci">const char * subtype</div><div class="ttdoc">Content subtype In &quot;plain/text&quot;, &quot;text&quot; is the subtype. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00601">res_pjsip_pubsub.h:601</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_af820db3728fdeafb6d1c8ff284ea6cc5"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#af820db3728fdeafb6d1c8ff284ea6cc5">ast_sip_pubsub_body_generator::list</a></div><div class="ttdeci">struct ast_sip_pubsub_body_generator::@306 list</div></div>
<div class="ttc" id="app__fax_8c_html_a36aeb2eb01afb248bad64a309d743636"><div class="ttname"><a href="../../df/dde/app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a></div><div class="ttdeci">static struct ast_generator generator</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dde/app__fax_8c_source.html#l00359">app_fax.c:359</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_a3b12361a3bb7b12cc7729927503209cb"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#a3b12361a3bb7b12cc7729927503209cb">ast_sip_pubsub_body_generator::destroy_body</a></div><div class="ttdeci">void(* destroy_body)(void *body)</div><div class="ttdoc">Deallocate resources created for the body. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00645">res_pjsip_pubsub.h:645</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__supplement_html_a2d404fadf2a8afa26742b1cd27bd50cd"><div class="ttname"><a href="../../d7/d72/structast__sip__pubsub__body__supplement.html#a2d404fadf2a8afa26742b1cd27bd50cd">ast_sip_pubsub_body_supplement::supplement_body</a></div><div class="ttdeci">int(* supplement_body)(void *body, void *data)</div><div class="ttdoc">Add additional content to a SIP request body. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00679">res_pjsip_pubsub.h:679</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_ae9df1ad90af9f1ce1a581f295ef305a5"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#ae9df1ad90af9f1ce1a581f295ef305a5">ast_sip_pubsub_body_generator::generate_body_content</a></div><div class="ttdeci">int(* generate_body_content)(void *body, void *data)</div><div class="ttdoc">Add content to the body of a SIP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00629">res_pjsip_pubsub.h:629</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0030d8d5c2b988a0f7e7968a66180dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0030d8d5c2b988a0f7e7968a66180dd">&#9670;&nbsp;</a></span>ast_sip_pubsub_is_body_generator_registered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_pubsub_is_body_generator_registered </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>subtype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is a body generator registered for the given type/subtype. </p>
<dl class="section since"><dt>Since</dt><dd>14.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>The content type of the body </td></tr>
    <tr><td class="paramname">subtype</td><td>The content subtype of the body</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>In "plain/text", "plain" is the type and "text" is the subtype.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-zero</td><td>if a generator is registered. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03435">3435</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02839">find_body_generator_type_subtype()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00837">publisher_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;{</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;   <span class="keywordflow">return</span> !!<a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a5df18a3e8742e6bd4e6917b459c4c82d">find_body_generator_type_subtype</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>);</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a5df18a3e8742e6bd4e6917b459c4c82d"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a5df18a3e8742e6bd4e6917b459c4c82d">find_body_generator_type_subtype</a></div><div class="ttdeci">static struct ast_sip_pubsub_body_generator * find_body_generator_type_subtype(const char *type, const char *subtype)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02839">res_pjsip_pubsub.c:2839</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_abb4ae60bbcbce3616fdd7d4238869c91"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">ast_sip_pubsub_body_generator::subtype</a></div><div class="ttdeci">const char * subtype</div><div class="ttdoc">Content subtype In &quot;plain/text&quot;, &quot;text&quot; is the subtype. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00601">res_pjsip_pubsub.h:601</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8d089a744841fa628f7dc8f09d70db04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d089a744841fa628f7dc8f09d70db04">&#9670;&nbsp;</a></span>ast_sip_pubsub_register_body_generator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_pubsub_register_body_generator </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a> *&#160;</td>
          <td class="paramname"><em>generator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a body generator with the pubsub core. </p>
<dl class="section since"><dt>Since</dt><dd>13.0.0 This may fail if an attempt is made to register a primary body supplement for a given content type if a primary body supplement for that content type has already been registered.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">generator</td><td>Body generator to register </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03440">3440</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03718">ast_sip_get_pjsip_endpoint()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02825">find_body_generator_type_subtype_nolock()</a>, <a class="el" href="../../df/dc3/structast__sip__pubsub__body__generator.html#af820db3728fdeafb6d1c8ff284ea6cc5">ast_sip_pubsub_body_generator::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00229">pubsub_module</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00601">ast_sip_pubsub_body_generator::subtype</a>, and <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00596">ast_sip_pubsub_body_generator::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d81/res__pjsip__dialog__info__body__generator_8c_source.html#l00312">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;{</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a> *existing;</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;   pj_str_t accept;</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;   pj_size_t accept_len;</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../dd/de0/structbody__generators.html">body_generators</a>);</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;   existing = <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a3d0a8fc757c1fb1e064887580d4ba1ea">find_body_generator_type_subtype_nolock</a>(generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>, generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>);</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;   <span class="keywordflow">if</span> (existing) {</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dd/de0/structbody__generators.html">body_generators</a>);</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;A body generator for %s/%s is already registered.\n&quot;</span>,</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;         generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>, generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>);</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;   }</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../dd/de0/structbody__generators.html">body_generators</a>, generator, <a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#af820db3728fdeafb6d1c8ff284ea6cc5">list</a>);</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dd/de0/structbody__generators.html">body_generators</a>);</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;   <span class="comment">/* Lengths of type and subtype plus a slash. */</span></div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;   accept_len = strlen(generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>) + strlen(generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>) + 1;</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;   <span class="comment">/* Add room for null terminator that sprintf() will set. */</span></div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;   pj_strset(&amp;accept, <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(accept_len + 1), accept_len);</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;   sprintf((<span class="keywordtype">char</span> *) pj_strbuf(&amp;accept), <span class="stringliteral">&quot;%s/%s&quot;</span>, generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>, generator-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>);<span class="comment">/* Safe */</span></div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;   pjsip_endpt_add_capability(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), &amp;<a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a7f71e2a3aca3dcf8077d9c7edcb34325">pubsub_module</a>,</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;         PJSIP_H_ACCEPT, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1, &amp;accept);</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;}</div><div class="ttc" id="res__pjsip__pubsub_8c_html_a3d0a8fc757c1fb1e064887580d4ba1ea"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a3d0a8fc757c1fb1e064887580d4ba1ea">find_body_generator_type_subtype_nolock</a></div><div class="ttdeci">static struct ast_sip_pubsub_body_generator * find_body_generator_type_subtype_nolock(const char *type, const char *subtype)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02825">res_pjsip_pubsub.c:2825</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a7f71e2a3aca3dcf8077d9c7edcb34325"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a7f71e2a3aca3dcf8077d9c7edcb34325">pubsub_module</a></div><div class="ttdeci">static struct pjsip_module pubsub_module</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00229">res_pjsip_pubsub.c:229</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a></div><div class="ttdoc">Pubsub body generator. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00591">res_pjsip_pubsub.h:591</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_sip_pubsub_body_generator::type</a></div><div class="ttdeci">const char * type</div><div class="ttdoc">Content type In &quot;plain/text&quot;, &quot;plain&quot; is the type. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00596">res_pjsip_pubsub.h:596</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structbody__generators_html"><div class="ttname"><a href="../../dd/de0/structbody__generators.html">body_generators</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00536">res_pjsip_pubsub.c:536</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_abb4ae60bbcbce3616fdd7d4238869c91"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">ast_sip_pubsub_body_generator::subtype</a></div><div class="ttdeci">const char * subtype</div><div class="ttdoc">Content subtype In &quot;plain/text&quot;, &quot;text&quot; is the subtype. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00601">res_pjsip_pubsub.h:601</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_af820db3728fdeafb6d1c8ff284ea6cc5"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#af820db3728fdeafb6d1c8ff284ea6cc5">ast_sip_pubsub_body_generator::list</a></div><div class="ttdeci">struct ast_sip_pubsub_body_generator::@306 list</div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a785afb501e315c8a97ad476fb6a8be1d"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a></div><div class="ttdeci">pjsip_endpoint * ast_sip_get_pjsip_endpoint(void)</div><div class="ttdoc">Get a pointer to the PJSIP endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03718">res_pjsip.c:3718</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5cc1e17b0488075e8ea7d40085d502e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cc1e17b0488075e8ea7d40085d502e1">&#9670;&nbsp;</a></span>ast_sip_pubsub_register_body_supplement()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_pubsub_register_body_supplement </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d72/structast__sip__pubsub__body__supplement.html">ast_sip_pubsub_body_supplement</a> *&#160;</td>
          <td class="paramname"><em>supplement</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a body generator with the pubsub core. </p>
<dl class="section since"><dt>Since</dt><dd>13.0.0 This may fail if an attempt is made to register a primary body supplement for a given content type if a primary body supplement for that content type has already been registered.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">generator</td><td>Body generator to register </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03485">3485</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00740">AST_RWLIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, and <a class="el" href="../../df/dc3/structast__sip__pubsub__body__generator.html#af820db3728fdeafb6d1c8ff284ea6cc5">ast_sip_pubsub_body_generator::list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d45/res__pjsip__pidf__digium__body__supplement_8c_source.html#l00098">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;{</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d5/d90/structbody__supplements.html">body_supplements</a>);</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d5/d90/structbody__supplements.html">body_supplements</a>, supplement, <a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#af820db3728fdeafb6d1c8ff284ea6cc5">list</a>);</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d90/structbody__supplements.html">body_supplements</a>);</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structbody__supplements_html"><div class="ttname"><a href="../../d5/d90/structbody__supplements.html">body_supplements</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00537">res_pjsip_pubsub.c:537</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_af820db3728fdeafb6d1c8ff284ea6cc5"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#af820db3728fdeafb6d1c8ff284ea6cc5">ast_sip_pubsub_body_generator::list</a></div><div class="ttdeci">struct ast_sip_pubsub_body_generator::@306 list</div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a22d7c1042170155672514fbb16ce46eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22d7c1042170155672514fbb16ce46eb">&#9670;&nbsp;</a></span>ast_sip_pubsub_unregister_body_generator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_pubsub_unregister_body_generator </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a> *&#160;</td>
          <td class="paramname"><em>generator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a body generator with the pubsub core. </p>
<dl class="section since"><dt>Since</dt><dd>13.0.0 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">generator</td><td>Body generator to unregister </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03470">3470</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00556">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, and <a class="el" href="../../df/dc3/structast__sip__pubsub__body__generator.html#af820db3728fdeafb6d1c8ff284ea6cc5">ast_sip_pubsub_body_generator::list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d81/res__pjsip__dialog__info__body__generator_8c_source.html#l00321">unload_module()</a>, and <a class="el" href="../../de/d6f/res__pjsip__xpidf__body__generator_8c_source.html#l00143">unregister_all()</a>.</p>
<div class="fragment"><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;{</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a> *iter;</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../dd/de0/structbody__generators.html">body_generators</a>);</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../dd/de0/structbody__generators.html">body_generators</a>, iter, <a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#af820db3728fdeafb6d1c8ff284ea6cc5">list</a>) {</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;      <span class="keywordflow">if</span> (iter == generator) {</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#af820db3728fdeafb6d1c8ff284ea6cc5">list</a>);</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;      }</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;   }</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dd/de0/structbody__generators.html">body_generators</a>);</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;}</div><div class="ttc" id="structast__sip__pubsub__body__generator_html"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html">ast_sip_pubsub_body_generator</a></div><div class="ttdoc">Pubsub body generator. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00591">res_pjsip_pubsub.h:591</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structbody__generators_html"><div class="ttname"><a href="../../dd/de0/structbody__generators.html">body_generators</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00536">res_pjsip_pubsub.c:536</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_af820db3728fdeafb6d1c8ff284ea6cc5"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#af820db3728fdeafb6d1c8ff284ea6cc5">ast_sip_pubsub_body_generator::list</a></div><div class="ttdeci">struct ast_sip_pubsub_body_generator::@306 list</div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2be73952bf96122adf824dbbc26caa1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2be73952bf96122adf824dbbc26caa1c">&#9670;&nbsp;</a></span>ast_sip_pubsub_unregister_body_supplement()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_pubsub_unregister_body_supplement </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d72/structast__sip__pubsub__body__supplement.html">ast_sip_pubsub_body_supplement</a> *&#160;</td>
          <td class="paramname"><em>supplement</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a body generator with the pubsub core. </p>
<dl class="section since"><dt>Since</dt><dd>13.0.0 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">generator</td><td>Body generator to unregister </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03494">3494</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00556">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, and <a class="el" href="../../d7/d72/structast__sip__pubsub__body__supplement.html#a50233821a9d3db6ae3c8b16d85bffe86">ast_sip_pubsub_body_supplement::list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d45/res__pjsip__pidf__digium__body__supplement_8c_source.html#l00106">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;{</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d72/structast__sip__pubsub__body__supplement.html">ast_sip_pubsub_body_supplement</a> *iter;</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d5/d90/structbody__supplements.html">body_supplements</a>);</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d5/d90/structbody__supplements.html">body_supplements</a>, iter, <a class="code" href="../../d7/d72/structast__sip__pubsub__body__supplement.html#a50233821a9d3db6ae3c8b16d85bffe86">list</a>) {</div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;      <span class="keywordflow">if</span> (iter == supplement) {</div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d7/d72/structast__sip__pubsub__body__supplement.html#a50233821a9d3db6ae3c8b16d85bffe86">list</a>);</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;      }</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;   }</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d90/structbody__supplements.html">body_supplements</a>);</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;}</div><div class="ttc" id="structast__sip__pubsub__body__supplement_html"><div class="ttname"><a href="../../d7/d72/structast__sip__pubsub__body__supplement.html">ast_sip_pubsub_body_supplement</a></div><div class="ttdoc">Body supplement. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00656">res_pjsip_pubsub.h:656</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structbody__supplements_html"><div class="ttname"><a href="../../d5/d90/structbody__supplements.html">body_supplements</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00537">res_pjsip_pubsub.c:537</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__supplement_html_a50233821a9d3db6ae3c8b16d85bffe86"><div class="ttname"><a href="../../d7/d72/structast__sip__pubsub__body__supplement.html#a50233821a9d3db6ae3c8b16d85bffe86">ast_sip_pubsub_body_supplement::list</a></div><div class="ttdeci">struct ast_sip_pubsub_body_supplement::@307 list</div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a14d30548053458724404f5c041483cfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14d30548053458724404f5c041483cfa">&#9670;&nbsp;</a></span>ast_sip_register_publish_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_register_publish_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d9f/structast__sip__publish__handler.html">ast_sip_publish_handler</a> *&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a publish handler. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Handler was registered successfully </td></tr>
    <tr><td class="paramname">non-zero</td><td>Handler was not registered successfully </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02718">2718</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01310">ao2_container_alloc_hash</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00051">ast_sip_publish_handler::event_name</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02701">publication_cmp_fn()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02693">publication_hash_fn()</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00054">ast_sip_publish_handler::publications</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00244">PUBLICATIONS_BUCKETS</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02711">publish_add_handler()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00862">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;{</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(handler-&gt;<a class="code" href="../../d5/d9f/structast__sip__publish__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>)) {</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No event package specified for publish handler. Cannot register\n&quot;</span>);</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;   }</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;   handler-&gt;<a class="code" href="../../d5/d9f/structast__sip__publish__handler.html#aac80748c488a3724f6ab7e1ef4b73530">publications</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0,</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;      <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a7b2ea661eb5491432e647c3070aa78a7">PUBLICATIONS_BUCKETS</a>, <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a267cc6529937f4689c804fb39976a823">publication_hash_fn</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a34bc405d2cc3c85aa8d449185c3569d6">publication_cmp_fn</a>);</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;   <span class="keywordflow">if</span> (!handler-&gt;<a class="code" href="../../d5/d9f/structast__sip__publish__handler.html#aac80748c488a3724f6ab7e1ef4b73530">publications</a>) {</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not allocate publications container for event &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;         handler-&gt;<a class="code" href="../../d5/d9f/structast__sip__publish__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>);</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;   }</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;   <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#adb6d5815066f000bab8aa2aa43611f6c">publish_add_handler</a>(handler);</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;}</div><div class="ttc" id="structast__sip__publish__handler_html_aeccf279e6fca0e5f8536fdf76c838728"><div class="ttname"><a href="../../d5/d9f/structast__sip__publish__handler.html#aeccf279e6fca0e5f8536fdf76c838728">ast_sip_publish_handler::event_name</a></div><div class="ttdeci">const char * event_name</div><div class="ttdoc">The name of the event this handler deals with. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00051">res_pjsip_pubsub.h:51</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a7b2ea661eb5491432e647c3070aa78a7"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a7b2ea661eb5491432e647c3070aa78a7">PUBLICATIONS_BUCKETS</a></div><div class="ttdeci">#define PUBLICATIONS_BUCKETS</div><div class="ttdoc">Number of buckets for publications (on a per handler) </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00244">res_pjsip_pubsub.c:244</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_adb6d5815066f000bab8aa2aa43611f6c"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#adb6d5815066f000bab8aa2aa43611f6c">publish_add_handler</a></div><div class="ttdeci">static void publish_add_handler(struct ast_sip_publish_handler *handler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02711">res_pjsip_pubsub.c:2711</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a267cc6529937f4689c804fb39976a823"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a267cc6529937f4689c804fb39976a823">publication_hash_fn</a></div><div class="ttdeci">static int publication_hash_fn(const void *obj, const int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02693">res_pjsip_pubsub.c:2693</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc16f8aa9087cbc5c55c70cf1dd41b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a></div><div class="ttdeci">#define ao2_container_alloc_hash(ao2_options, container_options, n_buckets, hash_fn, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01310">astobj2.h:1310</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a34bc405d2cc3c85aa8d449185c3569d6"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a34bc405d2cc3c85aa8d449185c3569d6">publication_cmp_fn</a></div><div class="ttdeci">static int publication_cmp_fn(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02701">res_pjsip_pubsub.c:2701</a></div></div>
<div class="ttc" id="structast__sip__publish__handler_html_aac80748c488a3724f6ab7e1ef4b73530"><div class="ttname"><a href="../../d5/d9f/structast__sip__publish__handler.html#aac80748c488a3724f6ab7e1ef4b73530">ast_sip_publish_handler::publications</a></div><div class="ttdeci">struct ao2_container * publications</div><div class="ttdoc">Publications. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00054">res_pjsip_pubsub.h:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a250d91ea4fba33dd520804c8a47e795a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a250d91ea4fba33dd520804c8a47e795a">&#9670;&nbsp;</a></span>ast_sip_register_subscription_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_register_subscription_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a> *&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a subscription handler. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Handler was registered successfully </td></tr>
    <tr><td class="paramname">non-zero</td><td>Handler was not registered successfully </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02777">2777</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00320">ast_sip_subscription_handler::accept</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00219">AST_SIP_MAX_ACCEPT</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00253">DEFAULT_EXPIRES</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00328">resource_list::event</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00316">ast_sip_subscription_handler::event_name</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02763">find_sub_handler_for_event_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00229">pubsub_module</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02756">sub_add_handler()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00960">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;{</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;   pj_str_t <a class="code" href="../../df/d7d/structevent.html">event</a>;</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;   pj_str_t accept[<a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a1521854cc25592b7f8a58a4bed55ac6d">AST_SIP_MAX_ACCEPT</a>] = { {0, }, };</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a> *existing;</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;   <span class="keywordtype">int</span> i = 0;</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(handler-&gt;<a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>)) {</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No event package specified for subscription handler. Cannot register\n&quot;</span>);</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;   }</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;   existing = <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a219baab2a37a17e4922d696be2e07cca">find_sub_handler_for_event_name</a>(handler-&gt;<a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>);</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;   <span class="keywordflow">if</span> (existing) {</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>,</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;         <span class="stringliteral">&quot;Unable to register subscription handler for event %s.  A handler is already registered\n&quot;</span>,</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;         handler-&gt;<a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>);</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;   }</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../dc/db0/res__pjsip__pubsub_8h.html#a1521854cc25592b7f8a58a4bed55ac6d">AST_SIP_MAX_ACCEPT</a> &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(handler-&gt;<a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html#a37cb3e0e7b0966a69f790d8d182d8cd0">accept</a>[i]); ++i) {</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;      pj_cstr(&amp;accept[i], handler-&gt;<a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html#a37cb3e0e7b0966a69f790d8d182d8cd0">accept</a>[i]);</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;   }</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;   pj_cstr(&amp;event, handler-&gt;<a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>);</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;   pjsip_evsub_register_pkg(&amp;<a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a7f71e2a3aca3dcf8077d9c7edcb34325">pubsub_module</a>, &amp;event, <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#afc353f33f479f252b0cea51d55afc7ca">DEFAULT_EXPIRES</a>, i, accept);</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;   <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a7fa8f8f5e7bf978b9bc6c710d3b3e437">sub_add_handler</a>(handler);</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;}</div><div class="ttc" id="res__pjsip__pubsub_8c_html_a7f71e2a3aca3dcf8077d9c7edcb34325"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a7f71e2a3aca3dcf8077d9c7edcb34325">pubsub_module</a></div><div class="ttdeci">static struct pjsip_module pubsub_module</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00229">res_pjsip_pubsub.c:229</a></div></div>
<div class="ttc" id="structast__sip__subscription__handler_html_a37cb3e0e7b0966a69f790d8d182d8cd0"><div class="ttname"><a href="../../d8/d6c/structast__sip__subscription__handler.html#a37cb3e0e7b0966a69f790d8d182d8cd0">ast_sip_subscription_handler::accept</a></div><div class="ttdeci">const char * accept[AST_SIP_MAX_ACCEPT]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00320">res_pjsip_pubsub.h:320</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_afc353f33f479f252b0cea51d55afc7ca"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#afc353f33f479f252b0cea51d55afc7ca">DEFAULT_EXPIRES</a></div><div class="ttdeci">#define DEFAULT_EXPIRES</div><div class="ttdoc">Default expiration for subscriptions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00253">res_pjsip_pubsub.c:253</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a7fa8f8f5e7bf978b9bc6c710d3b3e437"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a7fa8f8f5e7bf978b9bc6c710d3b3e437">sub_add_handler</a></div><div class="ttdeci">static void sub_add_handler(struct ast_sip_subscription_handler *handler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02756">res_pjsip_pubsub.c:2756</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8h_html_a1521854cc25592b7f8a58a4bed55ac6d"><div class="ttname"><a href="../../dc/db0/res__pjsip__pubsub_8h.html#a1521854cc25592b7f8a58a4bed55ac6d">AST_SIP_MAX_ACCEPT</a></div><div class="ttdeci">#define AST_SIP_MAX_ACCEPT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00219">res_pjsip_pubsub.h:219</a></div></div>
<div class="ttc" id="structast__sip__subscription__handler_html"><div class="ttname"><a href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00314">res_pjsip_pubsub.h:314</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__sip__subscription__handler_html_aeccf279e6fca0e5f8536fdf76c838728"><div class="ttname"><a href="../../d8/d6c/structast__sip__subscription__handler.html#aeccf279e6fca0e5f8536fdf76c838728">ast_sip_subscription_handler::event_name</a></div><div class="ttdeci">const char * event_name</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00316">res_pjsip_pubsub.h:316</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a219baab2a37a17e4922d696be2e07cca"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a219baab2a37a17e4922d696be2e07cca">find_sub_handler_for_event_name</a></div><div class="ttdeci">static struct ast_sip_subscription_handler * find_sub_handler_for_event_name(const char *event_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02763">res_pjsip_pubsub.c:2763</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a68314dedb48b2799a693d3a090ae038b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68314dedb48b2799a693d3a090ae038b">&#9670;&nbsp;</a></span>ast_sip_subscription_add_datastore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_subscription_add_datastore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *&#160;</td>
          <td class="paramname"><em>datastore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a datastore to a SIP subscription. </p>
<p>Note that SIP uses reference counted datastores. The datastore passed into this function must have been allocated using <a class="el" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc()</a> or there will be serious problems.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>The ssubscription to add the datastore to </td></tr>
    <tr><td class="paramname">datastore</td><td>The datastore to be added to the subscription </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02629">2629</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d7a/datastore_8c_source.html#l00101">ast_datastores_add()</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00479">ast_sip_subscription::datastores</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00369">add_datastore()</a>, and <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00640">add_mwi_datastore()</a>.</p>
<div class="fragment"><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;{</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/db6/datastore_8h.html#a267b2996c54061f82ff1c5be72bbc731">ast_datastores_add</a>(subscription-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>, datastore);</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;}</div><div class="ttc" id="datastore_8h_html_a267b2996c54061f82ff1c5be72bbc731"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a267b2996c54061f82ff1c5be72bbc731">ast_datastores_add</a></div><div class="ttdeci">int ast_datastores_add(struct ao2_container *datastores, struct ast_datastore *datastore)</div><div class="ttdoc">Add a data store to a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00101">datastore.c:101</a></div></div>
<div class="ttc" id="structast__sip__subscription_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_subscription::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00479">res_pjsip_pubsub.c:479</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d3ad3f5c55c026e22e1103686227ae0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d3ad3f5c55c026e22e1103686227ae0">&#9670;&nbsp;</a></span>ast_sip_subscription_alloc_datastore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a>* ast_sip_subscription_alloc_datastore </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>uid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alternative for <a class="el" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc()</a> </p>
<p>There are two major differences between this and <a class="el" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc()</a> 1) This allocates a refcounted object 2) This will fill in a uid if one is not provided</p>
<p>DO NOT call <a class="el" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14" title="Free a data store object. ">ast_datastore_free()</a> on a datastore allocated in this way since that function will attempt to free the datastore rather than play nicely with its refcount.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>Callbacks for datastore </td></tr>
    <tr><td class="paramname">uid</td><td>Identifier for datastore </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failed to allocate datastore </td></tr>
    <tr><td class="paramname">non-NULL</td><td>Newly allocated datastore </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02624">2624</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d7a/datastore_8c_source.html#l00138">ast_datastores_alloc_datastore()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00369">add_datastore()</a>, and <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00640">add_mwi_datastore()</a>.</p>
<div class="fragment"><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;{</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/db6/datastore_8h.html#a65b31a9e32e3dad540c98ed2ee36e828">ast_datastores_alloc_datastore</a>(info, uid);</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;}</div><div class="ttc" id="datastore_8h_html_a65b31a9e32e3dad540c98ed2ee36e828"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a65b31a9e32e3dad540c98ed2ee36e828">ast_datastores_alloc_datastore</a></div><div class="ttdeci">struct ast_datastore * ast_datastores_alloc_datastore(const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Allocate a datastore for use with the datastores container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00138">datastore.c:138</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3bb393c5880be9a3a3ddeccfc998452b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bb393c5880be9a3a3ddeccfc998452b">&#9670;&nbsp;</a></span>ast_sip_subscription_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_subscription_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alert the pubsub core that the subscription is ready for destruction. </p>
<dl class="section since"><dt>Since</dt><dd>13.6.0 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>The subscription that is complete </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01389">1389</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00433">sip_subscription_tree::endpoint</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">ast_sip_subscription::tree</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00170">exten_state_subscription_destructor()</a>, and <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00219">mwi_subscription_destructor()</a>.</p>
<div class="fragment"><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;{</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Removing subscription %p &#39;%s-&gt;%s&#39; reference to subscription tree %p\n&quot;</span>,</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      sub, <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>), sub-&gt;resource, sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>);</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>);</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;}</div><div class="ttc" id="structast__sip__subscription_html_a1f889c1c1ee1ab4174d6b34771d6951d"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">ast_sip_subscription::tree</a></div><div class="ttdeci">struct sip_subscription_tree * tree</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">res_pjsip_pubsub.c:483</a></div></div>
<div class="ttc" id="structsip__subscription__tree_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d0/dd7/structsip__subscription__tree.html#a3960205b2a4e7e012dc9f0eae1855f01">sip_subscription_tree::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00433">res_pjsip_pubsub.c:433</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5c54dc5f481da88392b1ec7149385613"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c54dc5f481da88392b1ec7149385613">&#9670;&nbsp;</a></span>ast_sip_subscription_get_body_subtype()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_sip_subscription_get_body_subtype </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the body subtype used for this subscription. </p>
<dl class="section since"><dt>Since</dt><dd>13.0.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03514">3514</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00485">ast_sip_subscription::body_generator</a>, and <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00601">ast_sip_pubsub_body_generator::subtype</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02529">ast_sip_subscription_notify()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02887">generate_initial_notify()</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02371">generate_notify_body()</a>.</p>
<div class="fragment"><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;{</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;   <span class="keywordflow">return</span> sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a4b57472ac293cbff3de8eb58471771f0">body_generator</a>-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>;</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;}</div><div class="ttc" id="structast__sip__subscription_html_a4b57472ac293cbff3de8eb58471771f0"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html#a4b57472ac293cbff3de8eb58471771f0">ast_sip_subscription::body_generator</a></div><div class="ttdeci">struct ast_sip_pubsub_body_generator * body_generator</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00485">res_pjsip_pubsub.c:485</a></div></div>
<div class="ttc" id="structast__sip__pubsub__body__generator_html_abb4ae60bbcbce3616fdd7d4238869c91"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#abb4ae60bbcbce3616fdd7d4238869c91">ast_sip_pubsub_body_generator::subtype</a></div><div class="ttdeci">const char * subtype</div><div class="ttdoc">Content subtype In &quot;plain/text&quot;, &quot;text&quot; is the subtype. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00601">res_pjsip_pubsub.h:601</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2294ee18e05ee676e083133058243909"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2294ee18e05ee676e083133058243909">&#9670;&nbsp;</a></span>ast_sip_subscription_get_body_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_sip_subscription_get_body_type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the body type used for this subscription. </p>
<dl class="section since"><dt>Since</dt><dd>13.0.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03509">3509</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00485">ast_sip_subscription::body_generator</a>, and <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00596">ast_sip_pubsub_body_generator::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02529">ast_sip_subscription_notify()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02887">generate_initial_notify()</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02371">generate_notify_body()</a>.</p>
<div class="fragment"><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;{</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;   <span class="keywordflow">return</span> sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a4b57472ac293cbff3de8eb58471771f0">body_generator</a>-&gt;<a class="code" href="../../df/dc3/structast__sip__pubsub__body__generator.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>;</div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;}</div><div class="ttc" id="structast__sip__pubsub__body__generator_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../df/dc3/structast__sip__pubsub__body__generator.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_sip_pubsub_body_generator::type</a></div><div class="ttdeci">const char * type</div><div class="ttdoc">Content type In &quot;plain/text&quot;, &quot;plain&quot; is the type. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00596">res_pjsip_pubsub.h:596</a></div></div>
<div class="ttc" id="structast__sip__subscription_html_a4b57472ac293cbff3de8eb58471771f0"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html#a4b57472ac293cbff3de8eb58471771f0">ast_sip_subscription::body_generator</a></div><div class="ttdeci">struct ast_sip_pubsub_body_generator * body_generator</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00485">res_pjsip_pubsub.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5ad2231cd4e17cd5a713f0c7cea20da4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ad2231cd4e17cd5a713f0c7cea20da4">&#9670;&nbsp;</a></span>ast_sip_subscription_get_datastore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a>* ast_sip_subscription_get_datastore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve a subscription datastore. </p>
<p>The datastore retrieved will have its reference count incremented. When the caller is done with the datastore, the reference counted needs to be decremented using <a class="el" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>The subscription from which to retrieve the datastore </td></tr>
    <tr><td class="paramname">name</td><td>The name of the datastore to retrieve </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failed to find the specified datastore </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The specified datastore </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02634">2634</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d7a/datastore_8c_source.html#l00119">ast_datastores_find()</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00479">ast_sip_subscription::datastores</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00389">get_exten_state_sub()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01042">mwi_get_notify_data()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00587">mwi_subscription_shutdown()</a>, and <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01097">mwi_to_ami()</a>.</p>
<div class="fragment"><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;{</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/db6/datastore_8h.html#a3e5e18520733ba3dc58c1e218ab5541b">ast_datastores_find</a>(subscription-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;}</div><div class="ttc" id="datastore_8h_html_a3e5e18520733ba3dc58c1e218ab5541b"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a3e5e18520733ba3dc58c1e218ab5541b">ast_datastores_find</a></div><div class="ttdeci">struct ast_datastore * ast_datastores_find(struct ao2_container *datastores, const char *name)</div><div class="ttdoc">Find a data store in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00119">datastore.c:119</a></div></div>
<div class="ttc" id="structast__sip__subscription_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_subscription::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00479">res_pjsip_pubsub.c:479</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd22eade3d3a1bfce2d9acf505d34b1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd22eade3d3a1bfce2d9acf505d34b1a">&#9670;&nbsp;</a></span>ast_sip_subscription_get_datastores()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a>* ast_sip_subscription_get_datastores </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>subscription</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the datastores container for a subscription. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>The subscription to get the datastores container from</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>datastores container not present </td></tr>
    <tr><td class="paramname">non-NULL</td><td>datastores container</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The container is NOT returned with reference count bumped</dd></dl>
<dl class="section since"><dt>Since</dt><dd>14.0.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02644">2644</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00479">ast_sip_subscription::datastores</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00251">alloc_notify_task_data()</a>, <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00482">exten_state_data_alloc()</a>, and <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00288">notify_task()</a>.</p>
<div class="fragment"><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;{</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;   <span class="keywordflow">return</span> subscription-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>;</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;}</div><div class="ttc" id="structast__sip__subscription_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_subscription::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00479">res_pjsip_pubsub.c:479</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6471e6d6f4563ef5fb93343180fea40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6471e6d6f4563ef5fb93343180fea40">&#9670;&nbsp;</a></span>ast_sip_subscription_get_dialog()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pjsip_dialog* ast_sip_subscription_get_dialog </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the pjsip dialog that is associated with this subscription. </p>
<dl class="section since"><dt>Since</dt><dd>13.9.0</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Could not get dialog </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The dialog </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01930">1930</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00443">sip_subscription_tree::dlg</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">ast_sip_subscription::tree</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d81/res__pjsip__dialog__info__body__generator_8c_source.html#l00093">dialog_info_generate_body_content()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01042">mwi_get_notify_data()</a>, and <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00538">send_mwi_notify()</a>.</p>
<div class="fragment"><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;{</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a9d867cb404dff4c9d88a624e78a0e4d0">dlg</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;   <span class="keywordflow">return</span> sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a9d867cb404dff4c9d88a624e78a0e4d0">dlg</a>;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;}</div><div class="ttc" id="structast__sip__subscription_html_a1f889c1c1ee1ab4174d6b34771d6951d"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">ast_sip_subscription::tree</a></div><div class="ttdeci">struct sip_subscription_tree * tree</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">res_pjsip_pubsub.c:483</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structsip__subscription__tree_html_a9d867cb404dff4c9d88a624e78a0e4d0"><div class="ttname"><a href="../../d0/dd7/structsip__subscription__tree.html#a9d867cb404dff4c9d88a624e78a0e4d0">sip_subscription_tree::dlg</a></div><div class="ttdeci">pjsip_dialog * dlg</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00443">res_pjsip_pubsub.c:443</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abce1c0cc1320bb801480d0929266d08f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abce1c0cc1320bb801480d0929266d08f">&#9670;&nbsp;</a></span>ast_sip_subscription_get_endpoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a>* ast_sip_subscription_get_endpoint </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the endpoint that is associated with this subscription. </p>
<p>This function will increase the reference count of the endpoint. Be sure to release the reference to it when you are finished with the endpoint.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Could not get endpoint </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The endpoint </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01936">1936</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00433">sip_subscription_tree::endpoint</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">ast_sip_subscription::tree</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d81/res__pjsip__dialog__info__body__generator_8c_source.html#l00093">dialog_info_generate_body_content()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01042">mwi_get_notify_data()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01005">mwi_subscription_established()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00538">send_mwi_notify()</a>, and <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00427">subscription_established()</a>.</p>
<div class="fragment"><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;{</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>);</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;}</div><div class="ttc" id="structast__sip__subscription_html_a1f889c1c1ee1ab4174d6b34771d6951d"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">ast_sip_subscription::tree</a></div><div class="ttdeci">struct sip_subscription_tree * tree</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">res_pjsip_pubsub.c:483</a></div></div>
<div class="ttc" id="structsip__subscription__tree_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d0/dd7/structsip__subscription__tree.html#a3960205b2a4e7e012dc9f0eae1855f01">sip_subscription_tree::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00433">res_pjsip_pubsub.c:433</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4034b13c08bafa4bff82854bcc0ce135"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4034b13c08bafa4bff82854bcc0ce135">&#9670;&nbsp;</a></span>ast_sip_subscription_get_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ast_sip_subscription_get_header </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>header</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a header value for a subscription. </p>
<p>For notifiers, the headers of the inbound SUBSCRIBE that started the dialog are stored on the subscription. This method allows access to the header. The return is the same as pjsip_msg_find_hdr_by_name(), meaning that it is dependent on the header being searched for.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>The subscription to search in. </td></tr>
    <tr><td class="paramname">header</td><td>The name of the header to search for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The discovered header, or NULL if the header cannot be found. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01854">1854</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02638">ast_sip_mod_data_get</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00443">sip_subscription_tree::dlg</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00236">MOD_DATA_MSG</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00229">pubsub_module</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">ast_sip_subscription::tree</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00179">get_user_agent()</a>.</p>
<div class="fragment"><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;{</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;   pjsip_dialog *dlg;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;   pjsip_msg *msg;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;   pj_str_t <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;   dlg = sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a9d867cb404dff4c9d88a624e78a0e4d0">dlg</a>;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;   msg = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aad194ead974937834375b0ac8d37a7c2">ast_sip_mod_data_get</a>(dlg-&gt;mod_data, <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a7f71e2a3aca3dcf8077d9c7edcb34325">pubsub_module</a>.id, <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#ab95c1bf11412f8e2a82ddd0eb69ad4a4">MOD_DATA_MSG</a>);</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;   pj_cstr(&amp;name, <a class="code" href="../../d5/d65/structheader.html">header</a>);</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;   <span class="keywordflow">return</span> pjsip_msg_find_hdr_by_name(msg, &amp;name, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;}</div><div class="ttc" id="structast__sip__subscription_html_a1f889c1c1ee1ab4174d6b34771d6951d"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">ast_sip_subscription::tree</a></div><div class="ttdeci">struct sip_subscription_tree * tree</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">res_pjsip_pubsub.c:483</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a7f71e2a3aca3dcf8077d9c7edcb34325"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a7f71e2a3aca3dcf8077d9c7edcb34325">pubsub_module</a></div><div class="ttdeci">static struct pjsip_module pubsub_module</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00229">res_pjsip_pubsub.c:229</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structsip__subscription__tree_html_a9d867cb404dff4c9d88a624e78a0e4d0"><div class="ttname"><a href="../../d0/dd7/structsip__subscription__tree.html#a9d867cb404dff4c9d88a624e78a0e4d0">sip_subscription_tree::dlg</a></div><div class="ttdeci">pjsip_dialog * dlg</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00443">res_pjsip_pubsub.c:443</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aad194ead974937834375b0ac8d37a7c2"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aad194ead974937834375b0ac8d37a7c2">ast_sip_mod_data_get</a></div><div class="ttdeci">#define ast_sip_mod_data_get(mod_data, id, key)</div><div class="ttdoc">Using the dictionary stored in mod_data array at a given id, retrieve the value associated with the g...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02638">res_pjsip.h:2638</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structheader_html"><div class="ttname"><a href="../../d5/d65/structheader.html">header</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d73/pjsip__global__headers_8c_source.html#l00047">pjsip_global_headers.c:47</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_ab95c1bf11412f8e2a82ddd0eb69ad4a4"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#ab95c1bf11412f8e2a82ddd0eb69ad4a4">MOD_DATA_MSG</a></div><div class="ttdeci">#define MOD_DATA_MSG</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00236">res_pjsip_pubsub.c:236</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb411f16e0fee4036a22b354164b43a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb411f16e0fee4036a22b354164b43a6">&#9670;&nbsp;</a></span>ast_sip_subscription_get_local_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_subscription_get_local_uri </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the local URI for this subscription. </p>
<p>This is the local URI of the subscribed resource.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">sub</td><td>The subscription </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>The buffer into which to store the URI. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">size</td><td>The size of the buffer. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02578">2578</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02162">build_rlmi_body()</a>, <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00482">exten_state_data_alloc()</a>, and <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00288">notify_task()</a>.</p>
<div class="fragment"><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;{</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;   pjsip_uri_print(PJSIP_URI_IN_CONTACT_HDR, sub-&gt;uri, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size);</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac14c963f858de2e8b9bcd86c1a127b2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac14c963f858de2e8b9bcd86c1a127b2d">&#9670;&nbsp;</a></span>ast_sip_subscription_get_persistence_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a>* ast_sip_subscription_get_persistence_data </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>subscription</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve persistence data for a subscription. </p>
<dl class="section since"><dt>Since</dt><dd>13.31.0 </dd>
<dd>
16.8.0 </dd>
<dd>
17.2.0 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>The subscription to retrieve persistence data from </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02686">2686</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d81/res__pjsip__dialog__info__body__generator_8c_source.html#l00093">dialog_info_generate_body_content()</a>.</p>
<div class="fragment"><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;{</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;   <span class="keywordflow">return</span> subscription-&gt;persistence_data;</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a0cb53b1ca63b4b97b4b3fa8721274ee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cb53b1ca63b4b97b4b3fa8721274ee9">&#9670;&nbsp;</a></span>ast_sip_subscription_get_remote_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_subscription_get_remote_uri </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrive the remote URI for this subscription. </p>
<p>This is the remote URI as determined by the underlying SIP dialog.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">sub</td><td>The subscription </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>The buffer into which to store the URI. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">size</td><td>The size of the buffer. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02583">2583</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00443">sip_subscription_tree::dlg</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">ast_sip_subscription::tree</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00482">exten_state_data_alloc()</a>, and <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00288">notify_task()</a>.</p>
<div class="fragment"><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;{</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;   pjsip_dialog *dlg;</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;   pjsip_sip_uri *uri;</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;   dlg = sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a9d867cb404dff4c9d88a624e78a0e4d0">dlg</a>;</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;   uri = pjsip_uri_get_uri(dlg-&gt;remote.info-&gt;uri);</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;   <span class="keywordflow">if</span> (pjsip_uri_print(PJSIP_URI_IN_FROMTO_HDR, uri, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size) &lt; 0) {</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;      *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;   }</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;}</div><div class="ttc" id="structast__sip__subscription_html_a1f889c1c1ee1ab4174d6b34771d6951d"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">ast_sip_subscription::tree</a></div><div class="ttdeci">struct sip_subscription_tree * tree</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">res_pjsip_pubsub.c:483</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structsip__subscription__tree_html_a9d867cb404dff4c9d88a624e78a0e4d0"><div class="ttname"><a href="../../d0/dd7/structsip__subscription__tree.html#a9d867cb404dff4c9d88a624e78a0e4d0">sip_subscription_tree::dlg</a></div><div class="ttdeci">pjsip_dialog * dlg</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00443">res_pjsip_pubsub.c:443</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2d7ed3f8785ad9d9aa3fc090d983c45d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d7ed3f8785ad9d9aa3fc090d983c45d">&#9670;&nbsp;</a></span>ast_sip_subscription_get_resource_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_sip_subscription_get_resource_name </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the name of the subscribed resource. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02596">2596</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02162">build_rlmi_body()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01042">mwi_get_notify_data()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01005">mwi_subscription_established()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01182">remove_subscription()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00538">send_mwi_notify()</a>, and <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00427">subscription_established()</a>.</p>
<div class="fragment"><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;{</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;   <span class="keywordflow">return</span> sub-&gt;resource;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a81489602b194ea87cae6470409bee3b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81489602b194ea87cae6470409bee3b5">&#9670;&nbsp;</a></span>ast_sip_subscription_get_serializer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a>* ast_sip_subscription_get_serializer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the serializer for the subscription. </p>
<p>Tasks that originate outside of a SIP servant thread should get the serializer and push the task to the serializer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>The subscription </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failure </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The subscription's serializer </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01942">1942</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00435">sip_subscription_tree::serializer</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">ast_sip_subscription::tree</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00210">exten_state_subscription_alloc()</a>, and <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01142">send_notify()</a>.</p>
<div class="fragment"><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;{</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;   <span class="keywordflow">return</span> sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;}</div><div class="ttc" id="structast__sip__subscription_html_a1f889c1c1ee1ab4174d6b34771d6951d"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">ast_sip_subscription::tree</a></div><div class="ttdeci">struct sip_subscription_tree * tree</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">res_pjsip_pubsub.c:483</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structsip__subscription__tree_html_ac23e23ba60f358de78a893d537c0afa4"><div class="ttname"><a href="../../d0/dd7/structsip__subscription__tree.html#ac23e23ba60f358de78a893d537c0afa4">sip_subscription_tree::serializer</a></div><div class="ttdeci">struct ast_taskprocessor * serializer</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00435">res_pjsip_pubsub.c:435</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a79792c0d3a54f779754479075e3c80b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79792c0d3a54f779754479075e3c80b3">&#9670;&nbsp;</a></span>ast_sip_subscription_get_sip_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pjsip_sip_uri* ast_sip_subscription_get_sip_uri </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the local sip uri for this subscription. </p>
<dl class="section since"><dt>Since</dt><dd>13.9.0</dd></dl>
<p>This is the local sip URI of the subscribed resource.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>The subscription </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Could not get uri </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The local pjsip_sip_uri </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02573">2573</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01042">mwi_get_notify_data()</a>, and <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00538">send_mwi_notify()</a>.</p>
<div class="fragment"><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;{</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;   <span class="keywordflow">return</span> sub-&gt;uri;</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ae741d1ec08fd26b810d24514e510dad8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae741d1ec08fd26b810d24514e510dad8">&#9670;&nbsp;</a></span>ast_sip_subscription_is_terminated()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_subscription_is_terminated </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get whether the subscription has been terminated or not. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>The subscription. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>not terminated. </td></tr>
    <tr><td class="paramname">1</td><td>terminated. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>13.4.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02601">2601</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00288">notify_task()</a>.</p>
<div class="fragment"><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;{</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;   <span class="keywordflow">return</span> sub-&gt;subscription_state == PJSIP_EVSUB_STATE_TERMINATED ? 1 : 0;</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a5b0f67be0ca6ad54e4eba8d4aa029faf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b0f67be0ca6ad54e4eba8d4aa029faf">&#9670;&nbsp;</a></span>ast_sip_subscription_notify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_subscription_notify </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/de8/structast__sip__body__data.html">ast_sip_body_data</a> *&#160;</td>
          <td class="paramname"><em>notify_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>terminate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notify a SIP subscription of a state change. </p>
<p>This tells the pubsub core that the state of a subscribed resource has changed. The pubsub core will generate an appropriate NOTIFY request to send to the subscriber.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>The subscription on which a state change is occurring. </td></tr>
    <tr><td class="paramname"><a class="el" href="../../d4/d18/structnotify__data.html">notify_data</a></td><td>Event package-specific data used to create the NOTIFY body. </td></tr>
    <tr><td class="paramname">terminate</td><td>True if this NOTIFY is intended to terminate the subscription. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">non-zero</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02529">2529</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03519">ast_sip_pubsub_generate_body_content()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03514">ast_sip_subscription_get_body_subtype()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03509">ast_sip_subscription_get_body_type()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00196">ast_test_suite_event_notify</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00443">sip_subscription_tree::dlg</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00445">sip_subscription_tree::notification_batch_interval</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00451">sip_subscription_tree::root</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02512">schedule_notification()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02425">send_notify()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00406">SIP_SUB_TREE_NORMAL</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00410">SIP_SUB_TREE_TERMINATE_IN_PROGRESS</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00408">SIP_SUB_TREE_TERMINATE_PENDING</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00457">sip_subscription_tree::state</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">ast_sip_subscription::tree</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00288">notify_task()</a>, and <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00538">send_mwi_notify()</a>.</p>
<div class="fragment"><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;{</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;   pjsip_dialog *dlg = sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a9d867cb404dff4c9d88a624e78a0e4d0">dlg</a>;</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;   pjsip_dlg_inc_lock(dlg);</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a9765def6b392c5f0f2eabbf976174b5a">state</a> != <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a386166c75f00c0b4d1878e3a6d666e89af7fea613b9dafd6f664eea50435fea4e">SIP_SUB_TREE_NORMAL</a>) {</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;      pjsip_dlg_dec_lock(dlg);</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;   }</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#aa3b78cda3768f8f485e1ad46d6fcb765">ast_sip_pubsub_generate_body_content</a>(<a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a2294ee18e05ee676e083133058243909">ast_sip_subscription_get_body_type</a>(sub),</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;            <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a5c54dc5f481da88392b1ec7149385613">ast_sip_subscription_get_body_subtype</a>(sub), notify_data, &amp;sub-&gt;body_text)) {</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;      pjsip_dlg_dec_lock(dlg);</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;   }</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;   sub-&gt;body_changed = 1;</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;   <span class="keywordflow">if</span> (terminate) {</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;      sub-&gt;subscription_state = PJSIP_EVSUB_STATE_TERMINATED;</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;      sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a9765def6b392c5f0f2eabbf976174b5a">state</a> = <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a386166c75f00c0b4d1878e3a6d666e89a5ffbdb3ef21db1d83c5a508f5e3865ae">SIP_SUB_TREE_TERMINATE_PENDING</a>;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;   }</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#ac90516981222dda0270465a33483f2b4">notification_batch_interval</a>) {</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;      res = <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a312601e694a9ca811601375d4e33d8df">schedule_notification</a>(sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>);</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;      <span class="comment">/* See the note in pubsub_on_rx_refresh() for why sub-&gt;tree is refbumped here */</span></div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>, +1);</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;      <span class="keywordflow">if</span> (terminate) {</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;         sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a9765def6b392c5f0f2eabbf976174b5a">state</a> = <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a386166c75f00c0b4d1878e3a6d666e89af9b5de443ecb1dc5781aff2a03502ca5">SIP_SUB_TREE_TERMINATE_IN_PROGRESS</a>;</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;      }</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;      res = <a class="code" href="../../d8/dca/res__pjsip__pubsub_8c.html#a8b3391cb48972f432118c4ca2eeb3063">send_notify</a>(sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>, 0);</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(terminate ? <span class="stringliteral">&quot;SUBSCRIPTION_TERMINATED&quot;</span> : <span class="stringliteral">&quot;SUBSCRIPTION_STATE_CHANGED&quot;</span>,</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;            <span class="stringliteral">&quot;Resource: %s&quot;</span>,</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;            sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#ac02d9f08d76f5be5e9c998ca541c05b9">root</a>-&gt;resource);</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>, -1);</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;   }</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;   pjsip_dlg_dec_lock(dlg);</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;}</div><div class="ttc" id="structsip__subscription__tree_html_ac02d9f08d76f5be5e9c998ca541c05b9"><div class="ttname"><a href="../../d0/dd7/structsip__subscription__tree.html#ac02d9f08d76f5be5e9c998ca541c05b9">sip_subscription_tree::root</a></div><div class="ttdeci">struct ast_sip_subscription * root</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00451">res_pjsip_pubsub.c:451</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a386166c75f00c0b4d1878e3a6d666e89af7fea613b9dafd6f664eea50435fea4e"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a386166c75f00c0b4d1878e3a6d666e89af7fea613b9dafd6f664eea50435fea4e">SIP_SUB_TREE_NORMAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00406">res_pjsip_pubsub.c:406</a></div></div>
<div class="ttc" id="structast__sip__subscription_html_a1f889c1c1ee1ab4174d6b34771d6951d"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">ast_sip_subscription::tree</a></div><div class="ttdeci">struct sip_subscription_tree * tree</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">res_pjsip_pubsub.c:483</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a312601e694a9ca811601375d4e33d8df"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a312601e694a9ca811601375d4e33d8df">schedule_notification</a></div><div class="ttdeci">static int schedule_notification(struct sip_subscription_tree *sub_tree)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02512">res_pjsip_pubsub.c:2512</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a5c54dc5f481da88392b1ec7149385613"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a5c54dc5f481da88392b1ec7149385613">ast_sip_subscription_get_body_subtype</a></div><div class="ttdeci">const char * ast_sip_subscription_get_body_subtype(struct ast_sip_subscription *sub)</div><div class="ttdoc">Get the body subtype used for this subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03514">res_pjsip_pubsub.c:3514</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structsip__subscription__tree_html_a9d867cb404dff4c9d88a624e78a0e4d0"><div class="ttname"><a href="../../d0/dd7/structsip__subscription__tree.html#a9d867cb404dff4c9d88a624e78a0e4d0">sip_subscription_tree::dlg</a></div><div class="ttdeci">pjsip_dialog * dlg</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00443">res_pjsip_pubsub.c:443</a></div></div>
<div class="ttc" id="structsip__subscription__tree_html_a9765def6b392c5f0f2eabbf976174b5a"><div class="ttname"><a href="../../d0/dd7/structsip__subscription__tree.html#a9765def6b392c5f0f2eabbf976174b5a">sip_subscription_tree::state</a></div><div class="ttdeci">enum sip_subscription_tree_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00457">res_pjsip_pubsub.c:457</a></div></div>
<div class="ttc" id="test_8h_html_a9482d93ea3931853331bdbc745ce7cb4"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a></div><div class="ttdeci">#define ast_test_suite_event_notify(s, f,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00196">test.h:196</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_aa3b78cda3768f8f485e1ad46d6fcb765"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#aa3b78cda3768f8f485e1ad46d6fcb765">ast_sip_pubsub_generate_body_content</a></div><div class="ttdeci">int ast_sip_pubsub_generate_body_content(const char *type, const char *subtype, struct ast_sip_body_data *data, struct ast_str **str)</div><div class="ttdoc">Generate body content for a PUBLISH or NOTIFY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03519">res_pjsip_pubsub.c:3519</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a2294ee18e05ee676e083133058243909"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a2294ee18e05ee676e083133058243909">ast_sip_subscription_get_body_type</a></div><div class="ttdeci">const char * ast_sip_subscription_get_body_type(struct ast_sip_subscription *sub)</div><div class="ttdoc">Get the body type used for this subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03509">res_pjsip_pubsub.c:3509</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a8b3391cb48972f432118c4ca2eeb3063"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a8b3391cb48972f432118c4ca2eeb3063">send_notify</a></div><div class="ttdeci">static int send_notify(struct sip_subscription_tree *sub_tree, unsigned int force_full_state)</div><div class="ttdoc">Send a NOTIFY request to a subscriber. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02425">res_pjsip_pubsub.c:2425</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a386166c75f00c0b4d1878e3a6d666e89af9b5de443ecb1dc5781aff2a03502ca5"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a386166c75f00c0b4d1878e3a6d666e89af9b5de443ecb1dc5781aff2a03502ca5">SIP_SUB_TREE_TERMINATE_IN_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00410">res_pjsip_pubsub.c:410</a></div></div>
<div class="ttc" id="structsip__subscription__tree_html_ac90516981222dda0270465a33483f2b4"><div class="ttname"><a href="../../d0/dd7/structsip__subscription__tree.html#ac90516981222dda0270465a33483f2b4">sip_subscription_tree::notification_batch_interval</a></div><div class="ttdeci">unsigned int notification_batch_interval</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00445">res_pjsip_pubsub.c:445</a></div></div>
<div class="ttc" id="res__pjsip__pubsub_8c_html_a386166c75f00c0b4d1878e3a6d666e89a5ffbdb3ef21db1d83c5a508f5e3865ae"><div class="ttname"><a href="../../d8/dca/res__pjsip__pubsub_8c.html#a386166c75f00c0b4d1878e3a6d666e89a5ffbdb3ef21db1d83c5a508f5e3865ae">SIP_SUB_TREE_TERMINATE_PENDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00408">res_pjsip_pubsub.c:408</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c257396060f400b0fba424730e7576e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c257396060f400b0fba424730e7576e">&#9670;&nbsp;</a></span>ast_sip_subscription_remove_datastore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_subscription_remove_datastore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a subscription datastore from the subscription. </p>
<p>This operation may cause the datastore's <a class="el" href="../../da/dfd/gsm__destroy_8c.html#aafde19f7d36ca163a143579c1b125b6d">free()</a> callback to be called if the reference count reaches zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>The subscription to remove the datastore from </td></tr>
    <tr><td class="paramname">name</td><td>The name of the datastore to remove </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02639">2639</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d7a/datastore_8c_source.html#l00114">ast_datastores_remove()</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00479">ast_sip_subscription::datastores</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01005">mwi_subscription_established()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00587">mwi_subscription_shutdown()</a>, and <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00398">subscription_shutdown()</a>.</p>
<div class="fragment"><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;{</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;   <a class="code" href="../../d9/db6/datastore_8h.html#a126dac1c8ced6e9cf905430e88f35396">ast_datastores_remove</a>(subscription-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;}</div><div class="ttc" id="structast__sip__subscription_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_subscription::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00479">res_pjsip_pubsub.c:479</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="datastore_8h_html_a126dac1c8ced6e9cf905430e88f35396"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a126dac1c8ced6e9cf905430e88f35396">ast_datastores_remove</a></div><div class="ttdeci">void ast_datastores_remove(struct ao2_container *datastores, const char *name)</div><div class="ttdoc">Remove a data store from a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00114">datastore.c:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a57948a70c8607d9fb37f687da1ad4c25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57948a70c8607d9fb37f687da1ad4c25">&#9670;&nbsp;</a></span>ast_sip_subscription_send_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_subscription_send_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a request created via a PJSIP evsub method. </p>
<p>Callers of this function should take care to do so within a SIP servant thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>The subscription on which to send the request </td></tr>
    <tr><td class="paramname">tdata</td><td>The request to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">non-zero</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a823b9711e5de08ec19a03f1994c11b30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a823b9711e5de08ec19a03f1994c11b30">&#9670;&nbsp;</a></span>ast_sip_subscription_set_persistence_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_subscription_set_persistence_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d02/structast__sip__subscription.html">ast_sip_subscription</a> *&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td>
          <td class="paramname"><em>persistence_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set persistence data for a subscription. </p>
<dl class="section since"><dt>Since</dt><dd>13.31.0 </dd>
<dd>
16.8.0 </dd>
<dd>
17.2.0 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>The subscription to set persistence data on </td></tr>
    <tr><td class="paramname">persistence_data</td><td>The persistence data to set</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This steals the reference to persistence_data </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02669">2669</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d98/json_8c_source.html#l00389">ast_json_object_create()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00404">ast_json_object_set()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00067">ast_json_ref()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00398">subscription_persistence::generator_data</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00439">sip_subscription_tree::persistence</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">ast_sip_subscription::tree</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d81/res__pjsip__dialog__info__body__generator_8c_source.html#l00093">dialog_info_generate_body_content()</a>.</p>
<div class="fragment"><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;{</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(subscription-&gt;persistence_data);</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;   subscription-&gt;persistence_data = persistence_data;</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;   <span class="keywordflow">if</span> (subscription-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a21053f8b496f0b3ac0aee6f43d27adce">persistence</a>) {</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;      <span class="keywordflow">if</span> (!subscription-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a21053f8b496f0b3ac0aee6f43d27adce">persistence</a>-&gt;<a class="code" href="../../d9/df9/structsubscription__persistence.html#a1805e05b0976bcd4f821f92c0206cba0">generator_data</a>) {</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;         subscription-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a21053f8b496f0b3ac0aee6f43d27adce">persistence</a>-&gt;<a class="code" href="../../d9/df9/structsubscription__persistence.html#a1805e05b0976bcd4f821f92c0206cba0">generator_data</a> = <a class="code" href="../../d4/d05/json_8h.html#a5892d6cd943e00556180fcf15d30788e">ast_json_object_create</a>();</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;         <span class="keywordflow">if</span> (!subscription-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a21053f8b496f0b3ac0aee6f43d27adce">persistence</a>-&gt;<a class="code" href="../../d9/df9/structsubscription__persistence.html#a1805e05b0976bcd4f821f92c0206cba0">generator_data</a>) {</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;         }</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;      }</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(subscription-&gt;<a class="code" href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">tree</a>-&gt;<a class="code" href="../../d0/dd7/structsip__subscription__tree.html#a21053f8b496f0b3ac0aee6f43d27adce">persistence</a>-&gt;<a class="code" href="../../d9/df9/structsubscription__persistence.html#a1805e05b0976bcd4f821f92c0206cba0">generator_data</a>, subscription-&gt;resource,</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(persistence_data));</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;   }</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;}</div><div class="ttc" id="json_8h_html_a0ca956b7df20127f7e38993c3c06cb2c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a></div><div class="ttdeci">struct ast_json * ast_json_ref(struct ast_json *value)</div><div class="ttdoc">Increase refcount on value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00067">json.c:67</a></div></div>
<div class="ttc" id="structast__sip__subscription_html_a1f889c1c1ee1ab4174d6b34771d6951d"><div class="ttname"><a href="../../db/d02/structast__sip__subscription.html#a1f889c1c1ee1ab4174d6b34771d6951d">ast_sip_subscription::tree</a></div><div class="ttdeci">struct sip_subscription_tree * tree</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00483">res_pjsip_pubsub.c:483</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="structsip__subscription__tree_html_a21053f8b496f0b3ac0aee6f43d27adce"><div class="ttname"><a href="../../d0/dd7/structsip__subscription__tree.html#a21053f8b496f0b3ac0aee6f43d27adce">sip_subscription_tree::persistence</a></div><div class="ttdeci">struct subscription_persistence * persistence</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00439">res_pjsip_pubsub.c:439</a></div></div>
<div class="ttc" id="json_8h_html_abc8b563c172cfaffa2b555195990f729"><div class="ttname"><a href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a></div><div class="ttdeci">int ast_json_object_set(struct ast_json *object, const char *key, struct ast_json *value)</div><div class="ttdoc">Set a field in a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00404">json.c:404</a></div></div>
<div class="ttc" id="json_8h_html_a5892d6cd943e00556180fcf15d30788e"><div class="ttname"><a href="../../d4/d05/json_8h.html#a5892d6cd943e00556180fcf15d30788e">ast_json_object_create</a></div><div class="ttdeci">struct ast_json * ast_json_object_create(void)</div><div class="ttdoc">Create a new JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00389">json.c:389</a></div></div>
<div class="ttc" id="structsubscription__persistence_html_a1805e05b0976bcd4f821f92c0206cba0"><div class="ttname"><a href="../../d9/df9/structsubscription__persistence.html#a1805e05b0976bcd4f821f92c0206cba0">subscription_persistence::generator_data</a></div><div class="ttdeci">struct ast_json * generator_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00398">res_pjsip_pubsub.c:398</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a65b342a28c864a472dfff5ea27de8691"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65b342a28c864a472dfff5ea27de8691">&#9670;&nbsp;</a></span>ast_sip_unregister_publish_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_unregister_publish_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d9f/structast__sip__publish__handler.html">ast_sip_publish_handler</a> *&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a publish handler. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02738">2738</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00090">ast_sip_publish_handler::next</a>, and <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00054">ast_sip_publish_handler::publications</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00862">load_module()</a>, and <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00925">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;{</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d9f/structast__sip__publish__handler.html">ast_sip_publish_handler</a> *iter;</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../df/d3c/structpublish__handlers.html">publish_handlers</a>);</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../df/d3c/structpublish__handlers.html">publish_handlers</a>, iter, <a class="code" href="../../d5/d9f/structast__sip__publish__handler.html#a6ad12c15b9231aec95e53a632ff79a56">next</a>) {</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;      <span class="keywordflow">if</span> (handler == iter) {</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(<a class="code" href="../../d5/d9f/structast__sip__publish__handler.html#a6ad12c15b9231aec95e53a632ff79a56">next</a>);</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(handler-&gt;<a class="code" href="../../d5/d9f/structast__sip__publish__handler.html#aac80748c488a3724f6ab7e1ef4b73530">publications</a>);</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;      }</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;   }</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../df/d3c/structpublish__handlers.html">publish_handlers</a>);</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structpublish__handlers_html"><div class="ttname"><a href="../../df/d3c/structpublish__handlers.html">publish_handlers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02691">res_pjsip_pubsub.c:2691</a></div></div>
<div class="ttc" id="structast__sip__publish__handler_html_a6ad12c15b9231aec95e53a632ff79a56"><div class="ttname"><a href="../../d5/d9f/structast__sip__publish__handler.html#a6ad12c15b9231aec95e53a632ff79a56">ast_sip_publish_handler::next</a></div><div class="ttdeci">struct ast_sip_publish_handler * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00090">res_pjsip_pubsub.h:90</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="structast__sip__publish__handler_html"><div class="ttname"><a href="../../d5/d9f/structast__sip__publish__handler.html">ast_sip_publish_handler</a></div><div class="ttdoc">Callbacks that publication handlers will define. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00049">res_pjsip_pubsub.h:49</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__sip__publish__handler_html_aac80748c488a3724f6ab7e1ef4b73530"><div class="ttname"><a href="../../d5/d9f/structast__sip__publish__handler.html#aac80748c488a3724f6ab7e1ef4b73530">ast_sip_publish_handler::publications</a></div><div class="ttdeci">struct ao2_container * publications</div><div class="ttdoc">Publications. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00054">res_pjsip_pubsub.h:54</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a16d299943a24f9857d3e847b83073d5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16d299943a24f9857d3e847b83073d5d">&#9670;&nbsp;</a></span>ast_sip_unregister_subscription_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_unregister_subscription_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a> *&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a subscription handler. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02810">2810</a> of file <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html">res_pjsip_pubsub.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, and <a class="el" href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00340">ast_sip_subscription_handler::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00942">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;{</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a> *iter;</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d2/d1b/structsubscription__handlers.html">subscription_handlers</a>);</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d2/d1b/structsubscription__handlers.html">subscription_handlers</a>, iter, <a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html#a2e4aa60e677c95983d44693bd69bc1be">next</a>) {</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;      <span class="keywordflow">if</span> (handler == iter) {</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(<a class="code" href="../../d8/d6c/structast__sip__subscription__handler.html#a2e4aa60e677c95983d44693bd69bc1be">next</a>);</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;      }</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;   }</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/d1b/structsubscription__handlers.html">subscription_handlers</a>);</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;}</div><div class="ttc" id="structsubscription__handlers_html"><div class="ttname"><a href="../../d2/d1b/structsubscription__handlers.html">subscription_handlers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02754">res_pjsip_pubsub.c:2754</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="structast__sip__subscription__handler_html"><div class="ttname"><a href="../../d8/d6c/structast__sip__subscription__handler.html">ast_sip_subscription_handler</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00314">res_pjsip_pubsub.h:314</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="structast__sip__subscription__handler_html_a2e4aa60e677c95983d44693bd69bc1be"><div class="ttname"><a href="../../d8/d6c/structast__sip__subscription__handler.html#a2e4aa60e677c95983d44693bd69bc1be">ast_sip_subscription_handler::next</a></div><div class="ttdeci">struct ast_sip_subscription_handler * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/res__pjsip__pubsub_8h_source.html#l00340">res_pjsip_pubsub.h:340</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:33 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
