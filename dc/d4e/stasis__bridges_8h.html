<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: stasis_bridges.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">stasis_bridges.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d1/d0f/stringfields_8h_source.html">asterisk/stringfields.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d56/bridge_8h_source.html">asterisk/bridge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for stasis_bridges.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d72/stasis__bridges_8h__incl.png" border="0" usemap="#stasis__bridges_8h" alt=""/></div>
<map name="stasis__bridges_8h" id="stasis__bridges_8h">
<area shape="rect" id="node2" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="376,603,533,629"/>
<area shape="rect" id="node5" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1405,827,1518,853"/>
<area shape="rect" id="node9" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="2203,528,2317,555"/>
<area shape="rect" id="node22" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1341,752,1491,779"/>
<area shape="rect" id="node23" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1209,304,1348,331"/>
<area shape="rect" id="node40" href="../../d4/d56/bridge_8h.html" title="Bridging API. " alt="" coords="1073,80,1201,107"/>
<area shape="rect" id="node46" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="563,229,674,256"/>
<area shape="rect" id="node3" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="2495,976,2641,1003"/>
<area shape="rect" id="node4" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="446,752,573,779"/>
<area shape="rect" id="node6" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="2638,901,2701,928"/>
<area shape="rect" id="node8" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1951,901,2078,928"/>
<area shape="rect" id="node10" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="2027,603,2165,629"/>
<area shape="rect" id="node19" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="2308,603,2455,629"/>
<area shape="rect" id="node20" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1787,603,1917,629"/>
<area shape="rect" id="node21" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1530,677,1665,704"/>
<area shape="rect" id="node24" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="2235,453,2379,480"/>
<area shape="rect" id="node25" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="906,453,1065,480"/>
<area shape="rect" id="node27" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="855,379,1019,405"/>
<area shape="rect" id="node28" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1226,453,1353,480"/>
<area shape="rect" id="node29" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="431,379,577,405"/>
<area shape="rect" id="node30" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="2454,453,2581,480"/>
<area shape="rect" id="node31" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="1145,379,1252,405"/>
<area shape="rect" id="node32" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1454,528,1605,555"/>
<area shape="rect" id="node33" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="1277,379,1438,405"/>
<area shape="rect" id="node34" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="1132,528,1303,555"/>
<area shape="rect" id="node35" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="1973,379,2089,405"/>
<area shape="rect" id="node37" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="1740,379,1897,405"/>
<area shape="rect" id="node38" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="2085,453,2211,480"/>
<area shape="rect" id="node39" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="1565,379,1715,405"/>
<area shape="rect" id="node26" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="920,528,1051,555"/>
<area shape="rect" id="node36" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="1848,453,2011,480"/>
<area shape="rect" id="node41" href="../../dc/d7a/bridge__features_8h.html" title="Channel Bridging API. " alt="" coords="1185,229,1373,256"/>
<area shape="rect" id="node42" href="../../de/d41/bridge__channel_8h.html" title="asterisk/bridge_channel.h" alt="" coords="1133,155,1318,181"/>
<area shape="rect" id="node43" href="../../dd/dff/bridge__roles_8h.html" title="Channel Bridging Roles API. " alt="" coords="2495,229,2662,256"/>
<area shape="rect" id="node44" href="../../d3/d08/dsp_8h.html" title="Convenient Signal Processing routines. " alt="" coords="858,155,969,181"/>
<area shape="rect" id="node45" href="../../dd/d1d/uuid_8h.html" title="Universally unique identifier support. " alt="" coords="993,155,1108,181"/>
<area shape="rect" id="node47" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="246,304,373,331"/>
<area shape="rect" id="node48" href="../../d6/dd7/presencestate_8h.html" title="Presence state management. " alt="" coords="397,304,577,331"/>
<area shape="rect" id="node49" href="../../d6/da0/hashtab_8h.html" title="Generic (perhaps overly so) hashtable implementation Hash Table support in Asterisk. " alt="" coords="94,752,234,779"/>
<area shape="rect" id="node50" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="493,528,627,555"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/d75/stasis__bridges_8h__dep__incl.png" border="0" usemap="#stasis__bridges_8hdep" alt=""/></div>
<map name="stasis__bridges_8hdep" id="stasis__bridges_8hdep">
<area shape="rect" id="node2" href="../../d4/de3/confbridge_8h.html" title="confbridge.h" alt="" coords="935,80,1036,107"/>
<area shape="rect" id="node3" href="../../d0/dcf/app__confbridge_8c.html" title="Conference Bridge application. " alt="" coords="5,155,136,181"/>
<area shape="rect" id="node14" href="../../dd/d92/confbridge__manager_8c.html" title="Confbridge manager events for stasis messages. " alt="" coords="1950,155,2114,181"/>
<area shape="rect" id="node15" href="../../da/dfb/app__queue_8c.html" title="True call queues with optional send URL on answer. " alt="" coords="1111,80,1215,107"/>
<area shape="rect" id="node16" href="../../d0/d95/bridge_8c.html" title="Bridging API. " alt="" coords="1239,80,1313,107"/>
<area shape="rect" id="node17" href="../../d7/d9b/bridge__basic_8c.html" title="Basic bridge class. It is a subclass of struct ast_bridge. " alt="" coords="1337,80,1450,107"/>
<area shape="rect" id="node18" href="../../d3/d32/bridge__channel_8c.html" title="Bridging Channel API. " alt="" coords="1475,80,1605,107"/>
<area shape="rect" id="node19" href="../../dc/df2/cdr_8c.html" title="Call Detail Record API. " alt="" coords="1630,80,1682,107"/>
<area shape="rect" id="node20" href="../../da/dc9/cel_8c.html" title="Channel Event Logging API. " alt="" coords="1707,80,1757,107"/>
<area shape="rect" id="node21" href="../../df/dd3/main_2cli_8c.html" title="Standard Command Line Interface. " alt="" coords="1782,80,1829,107"/>
<area shape="rect" id="node22" href="../../d4/d10/manager_8c.html" title="The Asterisk Management Interface &#45; AMI. " alt="" coords="1853,80,1944,107"/>
<area shape="rect" id="node23" href="../../da/d10/manager__bridges_8c.html" title="The Asterisk Management Interface &#45; AMI (bridge event handling) " alt="" coords="1969,80,2114,107"/>
<area shape="rect" id="node24" href="../../d0/df4/stasis_8c.html" title="Stasis Message Bus API. " alt="" coords="2138,80,2209,107"/>
<area shape="rect" id="node25" href="../../da/d0f/stasis__bridges_8c.html" title="Stasis Messages and Data Types for Bridge Objects. " alt="" coords="2233,80,2357,107"/>
<area shape="rect" id="node26" href="../../db/d0b/resource__bridges_8c.html" title="Implementation for ARI stubs. " alt="" coords="2381,80,2523,107"/>
<area shape="rect" id="node27" href="../../d8/d3a/bridges_8c.html" title="Prometheus Bridge Metrics. " alt="" coords="2548,80,2628,107"/>
<area shape="rect" id="node28" href="../../d1/d75/res__pjsip__refer_8c.html" title="res_pjsip_refer.c" alt="" coords="2652,80,2777,107"/>
<area shape="rect" id="node29" href="../../d2/d80/res__stasis_8c.html" title="Stasis application support. " alt="" coords="2802,80,2899,107"/>
<area shape="rect" id="node30" href="../../d3/d5e/res_2stasis_2app_8c.html" title="Stasis application support. " alt="" coords="2923,80,2981,107"/>
<area shape="rect" id="node31" href="../../d7/d8e/test__cdr_8c.html" title="CDR unit tests. " alt="" coords="3005,80,3089,107"/>
<area shape="rect" id="node32" href="../../db/dc4/test__cel_8c.html" title="CEL unit tests. " alt="" coords="3113,80,3196,107"/>
<area shape="rect" id="node4" href="../../d8/d4f/conf__chan__announce_8c.html" title="ConfBridge announcer channel driver. " alt="" coords="160,155,328,181"/>
<area shape="rect" id="node5" href="../../d9/d44/conf__chan__record_8c.html" title="ConfBridge recorder channel driver. " alt="" coords="352,155,499,181"/>
<area shape="rect" id="node6" href="../../dc/d40/conf__config__parser_8c.html" title="ConfBridge config parser. " alt="" coords="523,155,675,181"/>
<area shape="rect" id="node7" href="../../d8/d26/conf__state_8c.html" title="Confbridge state handling. " alt="" coords="699,155,799,181"/>
<area shape="rect" id="node8" href="../../d2/d2d/conf__state__empty_8c.html" title="Confbridge state handling for the EMPTY state. " alt="" coords="824,155,971,181"/>
<area shape="rect" id="node9" href="../../db/dbf/conf__state__inactive_8c.html" title="Confbridge state handling for the INACTIVE state. " alt="" coords="995,155,1151,181"/>
<area shape="rect" id="node10" href="../../d7/d44/conf__state__multi_8c.html" title="Confbridge state handling for the MULTI state. " alt="" coords="1176,155,1315,181"/>
<area shape="rect" id="node11" href="../../db/da3/conf__state__multi__marked_8c.html" title="Confbridge state handling for the MULTI_MARKED state. " alt="" coords="1339,155,1533,181"/>
<area shape="rect" id="node12" href="../../d8/d5c/conf__state__single_8c.html" title="Confbridge state handling for the SINGLE state. " alt="" coords="1557,155,1701,181"/>
<area shape="rect" id="node13" href="../../dc/d75/conf__state__single__marked_8c.html" title="Confbridge state handling for the SINGLE_MARKED state. " alt="" coords="1725,155,1925,181"/>
</map>
</div>
</div>
<p><a href="../../dc/d4e/stasis__bridges_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message representing attended transfer.  <a href="../../df/d6d/structast__attended__transfer__message.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message published during a blind transfer.  <a href="../../d1/dbf/structast__blind__transfer__message.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blob of data associated with a bridge.  <a href="../../d7/d01/structast__bridge__blob.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/db4/structast__bridge__channel__snapshot__pair.html">ast_bridge_channel_snapshot_pair</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pair showing a bridge snapshot and a specific channel snapshot belonging to the bridge.  <a href="../../da/db4/structast__bridge__channel__snapshot__pair.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message representing the merge of two bridges.  <a href="../../d5/d49/structast__bridge__merge__message.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:af3a657a2b25861869f8b0e67f0eaa950"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950">ast_attended_transfer_dest_type</a> { <br />
&#160;&#160;<a class="el" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a6d7eec1c6d7b9003b642c7c061444aeb">AST_ATTENDED_TRANSFER_DEST_FAIL</a>, 
<a class="el" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515">AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE</a>, 
<a class="el" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4">AST_ATTENDED_TRANSFER_DEST_APP</a>, 
<a class="el" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8">AST_ATTENDED_TRANSFER_DEST_LOCAL_APP</a>, 
<br />
&#160;&#160;<a class="el" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527">AST_ATTENDED_TRANSFER_DEST_LINK</a>, 
<a class="el" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf">AST_ATTENDED_TRANSFER_DEST_THREEWAY</a>
<br />
 }</td></tr>
<tr class="separator:af3a657a2b25861869f8b0e67f0eaa950"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3ba70be1910dd4bebfc77dec29ffc43b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a3ba70be1910dd4bebfc77dec29ffc43b">ast_attended_transfer_message_add_app</a> (struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *transfer_msg, const char *<a class="el" href="../../dd/de9/res__agi_8c.html#a9e5f57131367eff409b9e0bd7b31aa1a">app</a>, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *replace_channel)</td></tr>
<tr class="memdesc:a3ba70be1910dd4bebfc77dec29ffc43b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add details for an attended transfer to an application.  <a href="#a3ba70be1910dd4bebfc77dec29ffc43b">More...</a><br /></td></tr>
<tr class="separator:a3ba70be1910dd4bebfc77dec29ffc43b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abec87c9a1f3c9607a841cdf035ae95fd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#abec87c9a1f3c9607a841cdf035ae95fd">ast_attended_transfer_message_add_link</a> (struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *transfer_msg, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../de/d47/core__local_8c.html#aef9f33a8f0b0099c02a84d0c01d77aab">locals</a>[2])</td></tr>
<tr class="memdesc:abec87c9a1f3c9607a841cdf035ae95fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add details for an attended transfer that has a link between bridges.  <a href="#abec87c9a1f3c9607a841cdf035ae95fd">More...</a><br /></td></tr>
<tr class="separator:abec87c9a1f3c9607a841cdf035ae95fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae3000e9dc05d9b3023f5a571ffb14d7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#aae3000e9dc05d9b3023f5a571ffb14d7">ast_attended_transfer_message_add_merge</a> (struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *transfer_msg, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *final_bridge)</td></tr>
<tr class="memdesc:aae3000e9dc05d9b3023f5a571ffb14d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add details for a bridge merge to an attended transfer message.  <a href="#aae3000e9dc05d9b3023f5a571ffb14d7">More...</a><br /></td></tr>
<tr class="separator:aae3000e9dc05d9b3023f5a571ffb14d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a402aa031878d54df98c95146d51fad50"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a402aa031878d54df98c95146d51fad50">ast_attended_transfer_message_add_threeway</a> (struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *transfer_msg, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *survivor_channel, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *survivor_bridge)</td></tr>
<tr class="memdesc:a402aa031878d54df98c95146d51fad50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add details for an attended transfer that was resolved as a three-way call.  <a href="#a402aa031878d54df98c95146d51fad50">More...</a><br /></td></tr>
<tr class="separator:a402aa031878d54df98c95146d51fad50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d80b41bade979c37596d850cfcf3e64"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a5d80b41bade979c37596d850cfcf3e64">ast_attended_transfer_message_create</a> (int is_external, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *to_transferee, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *transferee_bridge, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *to_transfer_target, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *target_bridge, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *transferee, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *transfer_target)</td></tr>
<tr class="memdesc:a5d80b41bade979c37596d850cfcf3e64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an Attended transfer message to be published.  <a href="#a5d80b41bade979c37596d850cfcf3e64">More...</a><br /></td></tr>
<tr class="separator:a5d80b41bade979c37596d850cfcf3e64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a263062ed75918c257f5401617389bdd8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type</a> (void)</td></tr>
<tr class="memdesc:a263062ed75918c257f5401617389bdd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message type for <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a>.  <a href="#a263062ed75918c257f5401617389bdd8">More...</a><br /></td></tr>
<tr class="separator:a263062ed75918c257f5401617389bdd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20c565f2b4f6dd680b2fa04f8d74f3c4"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a20c565f2b4f6dd680b2fa04f8d74f3c4">ast_blind_transfer_message_create</a> (int is_external, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *transferer, const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>)</td></tr>
<tr class="memdesc:a20c565f2b4f6dd680b2fa04f8d74f3c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a blind transfer message to be published.  <a href="#a20c565f2b4f6dd680b2fa04f8d74f3c4">More...</a><br /></td></tr>
<tr class="separator:a20c565f2b4f6dd680b2fa04f8d74f3c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05b1c5a7666e29a9ec982e3c9d6c1b85"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type</a> (void)</td></tr>
<tr class="memdesc:a05b1c5a7666e29a9ec982e3c9d6c1b85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message type for <a class="el" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a>.  <a href="#a05b1c5a7666e29a9ec982e3c9d6c1b85">More...</a><br /></td></tr>
<tr class="separator:a05b1c5a7666e29a9ec982e3c9d6c1b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca77a07a50fb0eb50440b036e741ff0a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#aca77a07a50fb0eb50440b036e741ff0a">ast_bridge_blob_create</a> (struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *blob)</td></tr>
<tr class="memdesc:aca77a07a50fb0eb50440b036e741ff0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a <a class="el" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> message.  <a href="#aca77a07a50fb0eb50440b036e741ff0a">More...</a><br /></td></tr>
<tr class="separator:aca77a07a50fb0eb50440b036e741ff0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae095d11ac6bdce5f4c9c9af8adeb0a86"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#ae095d11ac6bdce5f4c9c9af8adeb0a86">ast_bridge_blob_create_from_snapshots</a> (struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *bridge_snapshot, struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *chan_snapshot, struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *blob)</td></tr>
<tr class="memdesc:ae095d11ac6bdce5f4c9c9af8adeb0a86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a <a class="el" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> message from snapshots.  <a href="#ae095d11ac6bdce5f4c9c9af8adeb0a86">More...</a><br /></td></tr>
<tr class="separator:ae095d11ac6bdce5f4c9c9af8adeb0a86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04efba17b1302d217a2a07a02c3eac98"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a04efba17b1302d217a2a07a02c3eac98">ast_bridge_get_snapshot</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge)</td></tr>
<tr class="memdesc:a04efba17b1302d217a2a07a02c3eac98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current snapshot for the bridge.  <a href="#a04efba17b1302d217a2a07a02c3eac98">More...</a><br /></td></tr>
<tr class="separator:a04efba17b1302d217a2a07a02c3eac98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee9af6c35b13edd9dcbd3dbabc5522ee"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#aee9af6c35b13edd9dcbd3dbabc5522ee">ast_bridge_get_snapshot_by_uniqueid</a> (const char *bridge_id)</td></tr>
<tr class="memdesc:aee9af6c35b13edd9dcbd3dbabc5522ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current snapshot for the bridge.  <a href="#aee9af6c35b13edd9dcbd3dbabc5522ee">More...</a><br /></td></tr>
<tr class="separator:aee9af6c35b13edd9dcbd3dbabc5522ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20be59047a504f4c5dca2289beef7963"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type</a> (void)</td></tr>
<tr class="memdesc:a20be59047a504f4c5dca2289beef7963"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message type for <a class="el" href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a>.  <a href="#a20be59047a504f4c5dca2289beef7963">More...</a><br /></td></tr>
<tr class="separator:a20be59047a504f4c5dca2289beef7963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1949ac2d3f4b2113242d981cc315b451"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a1949ac2d3f4b2113242d981cc315b451">ast_bridge_publish_attended_transfer</a> (struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *transfer_msg)</td></tr>
<tr class="memdesc:a1949ac2d3f4b2113242d981cc315b451"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish an attended transfer.  <a href="#a1949ac2d3f4b2113242d981cc315b451">More...</a><br /></td></tr>
<tr class="separator:a1949ac2d3f4b2113242d981cc315b451"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a0d32d9383a2e73b8292eec6c8359e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a1a0d32d9383a2e73b8292eec6c8359e0">ast_bridge_publish_blind_transfer</a> (struct <a class="el" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a> *transfer_message)</td></tr>
<tr class="memdesc:a1a0d32d9383a2e73b8292eec6c8359e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a blind transfer event.  <a href="#a1a0d32d9383a2e73b8292eec6c8359e0">More...</a><br /></td></tr>
<tr class="separator:a1a0d32d9383a2e73b8292eec6c8359e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecd7e5c63f8d0d4c022bd817d4241c5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#aecd7e5c63f8d0d4c022bd817d4241c5c">ast_bridge_publish_enter</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *swap)</td></tr>
<tr class="memdesc:aecd7e5c63f8d0d4c022bd817d4241c5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a bridge channel enter event.  <a href="#aecd7e5c63f8d0d4c022bd817d4241c5c">More...</a><br /></td></tr>
<tr class="separator:aecd7e5c63f8d0d4c022bd817d4241c5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b295a5bab9da9b629c81985e2897840"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a4b295a5bab9da9b629c81985e2897840">ast_bridge_publish_leave</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="memdesc:a4b295a5bab9da9b629c81985e2897840"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a bridge channel leave event.  <a href="#a4b295a5bab9da9b629c81985e2897840">More...</a><br /></td></tr>
<tr class="separator:a4b295a5bab9da9b629c81985e2897840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a075388377d67766550e9e53761404b99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a075388377d67766550e9e53761404b99">ast_bridge_publish_merge</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *to, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *from)</td></tr>
<tr class="memdesc:a075388377d67766550e9e53761404b99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a bridge merge.  <a href="#a075388377d67766550e9e53761404b99">More...</a><br /></td></tr>
<tr class="separator:a075388377d67766550e9e53761404b99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8bd54e09b0c348a3232053e4be9bcfb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#aa8bd54e09b0c348a3232053e4be9bcfb">ast_bridge_publish_state</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge)</td></tr>
<tr class="memdesc:aa8bd54e09b0c348a3232053e4be9bcfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish the state of a bridge.  <a href="#aa8bd54e09b0c348a3232053e4be9bcfb">More...</a><br /></td></tr>
<tr class="separator:aa8bd54e09b0c348a3232053e4be9bcfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95241898553c1d42ea46964b277433ad"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge)</td></tr>
<tr class="memdesc:a95241898553c1d42ea46964b277433ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a snapshot of the bridge state. This is an ao2 object, so <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> to deallocate.  <a href="#a95241898553c1d42ea46964b277433ad">More...</a><br /></td></tr>
<tr class="separator:a95241898553c1d42ea46964b277433ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76837dd4c259276cc59d163e4bc2a3b5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a> (const struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *snapshot, const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *sanitize)</td></tr>
<tr class="memdesc:a76837dd4c259276cc59d163e4bc2a3b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a JSON object from a <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a>.  <a href="#a76837dd4c259276cc59d163e4bc2a3b5">More...</a><br /></td></tr>
<tr class="separator:a76837dd4c259276cc59d163e4bc2a3b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93724fb58fab92a0a749535e8c8534d2"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a> (void)</td></tr>
<tr class="memdesc:a93724fb58fab92a0a749535e8c8534d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message type for <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a>.  <a href="#a93724fb58fab92a0a749535e8c8534d2">More...</a><br /></td></tr>
<tr class="separator:a93724fb58fab92a0a749535e8c8534d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bdfd8273bb885f7a65f6f5d8188c915"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge)</td></tr>
<tr class="memdesc:a7bdfd8273bb885f7a65f6f5d8188c915"><td class="mdescLeft">&#160;</td><td class="mdescRight">A topic which publishes the events for a particular bridge.  <a href="#a7bdfd8273bb885f7a65f6f5d8188c915">More...</a><br /></td></tr>
<tr class="separator:a7bdfd8273bb885f7a65f6f5d8188c915"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf64fa441014314244648caa6c8ab80b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a> (void)</td></tr>
<tr class="memdesc:abf64fa441014314244648caa6c8ab80b"><td class="mdescLeft">&#160;</td><td class="mdescRight">A topic which publishes the events for all bridges.  <a href="#abf64fa441014314244648caa6c8ab80b">More...</a><br /></td></tr>
<tr class="separator:abf64fa441014314244648caa6c8ab80b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bd3a6c07bd2064a82a7c27091ba0fce"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type</a> (void)</td></tr>
<tr class="memdesc:a8bd3a6c07bd2064a82a7c27091ba0fce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message type for <a class="el" href="../../d4/d84/structchannel.html">channel</a> enter bridge blob messages.  <a href="#a8bd3a6c07bd2064a82a7c27091ba0fce">More...</a><br /></td></tr>
<tr class="separator:a8bd3a6c07bd2064a82a7c27091ba0fce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cf969b75b455dc9301ede7c7830d4b6"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type</a> (void)</td></tr>
<tr class="memdesc:a4cf969b75b455dc9301ede7c7830d4b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message type for <a class="el" href="../../d4/d84/structchannel.html">channel</a> leave bridge blob messages.  <a href="#a4cf969b75b455dc9301ede7c7830d4b6">More...</a><br /></td></tr>
<tr class="separator:a4cf969b75b455dc9301ede7c7830d4b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae301dc233829a0e07fd9747738636a72"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#ae301dc233829a0e07fd9747738636a72">ast_stasis_bridging_init</a> (void)</td></tr>
<tr class="separator:ae301dc233829a0e07fd9747738636a72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae533d4edc97a21476c3f0600a6665eb1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#ae533d4edc97a21476c3f0600a6665eb1">bridge_topics_destroy</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge)</td></tr>
<tr class="separator:ae533d4edc97a21476c3f0600a6665eb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47e2e9503f7beb080c820edc385d0ca6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a47e2e9503f7beb080c820edc385d0ca6">bridge_topics_init</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge)</td></tr>
<tr class="separator:a47e2e9503f7beb080c820edc385d0ca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="af3a657a2b25861869f8b0e67f0eaa950"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3a657a2b25861869f8b0e67f0eaa950">&#9670;&nbsp;</a></span>ast_attended_transfer_dest_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950">ast_attended_transfer_dest_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="af3a657a2b25861869f8b0e67f0eaa950a6d7eec1c6d7b9003b642c7c061444aeb"></a>AST_ATTENDED_TRANSFER_DEST_FAIL&#160;</td><td class="fielddoc"><p>The transfer failed, so there is no appropriate final state </p>
</td></tr>
<tr><td class="fieldname"><a id="af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515"></a>AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE&#160;</td><td class="fielddoc"><p>The transfer results in a single bridge remaining due to a merge or swap </p>
</td></tr>
<tr><td class="fieldname"><a id="af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4"></a>AST_ATTENDED_TRANSFER_DEST_APP&#160;</td><td class="fielddoc"><p>The transfer results in a channel or bridge running an application </p>
</td></tr>
<tr><td class="fieldname"><a id="af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8"></a>AST_ATTENDED_TRANSFER_DEST_LOCAL_APP&#160;</td><td class="fielddoc"><p>The transfer results in a channel or bridge running an application via a local channel </p>
</td></tr>
<tr><td class="fieldname"><a id="af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527"></a>AST_ATTENDED_TRANSFER_DEST_LINK&#160;</td><td class="fielddoc"><p>The transfer results in both bridges remaining with a local channel linking them </p>
</td></tr>
<tr><td class="fieldname"><a id="af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf"></a>AST_ATTENDED_TRANSFER_DEST_THREEWAY&#160;</td><td class="fielddoc"><p>The transfer results in a threeway call between transferer, transferee, and transfer target </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00301">301</a> of file <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html">stasis_bridges.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                                     {<span class="comment"></span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">   /*! The transfer failed, so there is no appropriate final state */</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a6d7eec1c6d7b9003b642c7c061444aeb">AST_ATTENDED_TRANSFER_DEST_FAIL</a>,<span class="comment"></span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">   /*! The transfer results in a single bridge remaining due to a merge or swap */</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515">AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE</a>,<span class="comment"></span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">   /*! The transfer results in a channel or bridge running an application */</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4">AST_ATTENDED_TRANSFER_DEST_APP</a>,<span class="comment"></span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">   /*! The transfer results in a channel or bridge running an application via a local channel */</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8">AST_ATTENDED_TRANSFER_DEST_LOCAL_APP</a>,<span class="comment"></span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">   /*! The transfer results in both bridges remaining with a local channel linking them */</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527">AST_ATTENDED_TRANSFER_DEST_LINK</a>,<span class="comment"></span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">   /*! The transfer results in a threeway call between transferer, transferee, and transfer target */</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf">AST_ATTENDED_TRANSFER_DEST_THREEWAY</a>,</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;};</div><div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515">AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00305">stasis_bridges.h:305</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527">AST_ATTENDED_TRANSFER_DEST_LINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00311">stasis_bridges.h:311</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf">AST_ATTENDED_TRANSFER_DEST_THREEWAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00313">stasis_bridges.h:313</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950a6d7eec1c6d7b9003b642c7c061444aeb"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a6d7eec1c6d7b9003b642c7c061444aeb">AST_ATTENDED_TRANSFER_DEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00303">stasis_bridges.h:303</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4">AST_ATTENDED_TRANSFER_DEST_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00307">stasis_bridges.h:307</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8">AST_ATTENDED_TRANSFER_DEST_LOCAL_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00309">stasis_bridges.h:309</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3ba70be1910dd4bebfc77dec29ffc43b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ba70be1910dd4bebfc77dec29ffc43b">&#9670;&nbsp;</a></span>ast_attended_transfer_message_add_app()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_attended_transfer_message_add_app </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *&#160;</td>
          <td class="paramname"><em>transfer_msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>replace_channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add details for an attended transfer to an application. </p>
<p>If the transfer is sending one or more parties into an application, then this should be called to add appropriate details to the transfer message being published.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transfer_msg</td><td>The message to add details to </td></tr>
    <tr><td class="paramname">app</td><td>The name of the application that the parties are being transferred to </td></tr>
    <tr><td class="paramname">replace_channel</td><td>The local channel that is in the bridge and running the application</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01313">1313</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00340">ast_attended_transfer_message::app</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00307">AST_ATTENDED_TRANSFER_DEST_APP</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00309">AST_ATTENDED_TRANSFER_DEST_LOCAL_APP</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">ast_attended_transfer_message::dest_type</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00329">ast_attended_transfer_message::replace_channel</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04729">ast_bridge_transfer_attended()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l04280">attended_transfer_bridge()</a>.</p>
<div class="fragment"><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;{</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">dest_type</a> = replace_channel ? <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8">AST_ATTENDED_TRANSFER_DEST_LOCAL_APP</a> : <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4">AST_ATTENDED_TRANSFER_DEST_APP</a>;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   <span class="keywordflow">if</span> (replace_channel) {</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a69d67589993bc38c485c20b84ce40034">replace_channel</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(replace_channel));</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <span class="keywordflow">if</span> (!transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a69d67589993bc38c485c20b84ce40034">replace_channel</a>) {</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      }</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   }</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a3fa409a52b6210dbe249b2f37430fd4a">app</a>, <a class="code" href="../../d0/db6/app__mysql_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a>, <span class="keyword">sizeof</span>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a3fa409a52b6210dbe249b2f37430fd4a">app</a>));</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;}</div><div class="ttc" id="structast__attended__transfer__message_html_a68eeab7290249706588af2b6cffbdcaa"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a></div><div class="ttdeci">union ast_attended_transfer_message::@324 dest</div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950adefb7a844b18a31888a4fee73a0649e4">AST_ATTENDED_TRANSFER_DEST_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00307">stasis_bridges.h:307</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950aa9d22a276b09440f114a18a5924c0dc8">AST_ATTENDED_TRANSFER_DEST_LOCAL_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00309">stasis_bridges.h:309</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a3fa409a52b6210dbe249b2f37430fd4a"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a3fa409a52b6210dbe249b2f37430fd4a">ast_attended_transfer_message::app</a></div><div class="ttdeci">char app[AST_MAX_APP]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00340">stasis_bridges.h:340</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a69d67589993bc38c485c20b84ce40034"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a69d67589993bc38c485c20b84ce40034">ast_attended_transfer_message::replace_channel</a></div><div class="ttdeci">struct ast_channel_snapshot * replace_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00329">stasis_bridges.h:329</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a4623d089424156732a5f5591381d8b31"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">ast_attended_transfer_message::dest_type</a></div><div class="ttdeci">enum ast_attended_transfer_dest_type dest_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">stasis_bridges.h:335</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="app__mysql_8c_html_a1d9b1eccfc259a14525ce817482a3f88"><div class="ttname"><a href="../../d0/db6/app__mysql_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a></div><div class="ttdeci">static const char app[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db6/app__mysql_8c_source.html#l00062">app_mysql.c:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abec87c9a1f3c9607a841cdf035ae95fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abec87c9a1f3c9607a841cdf035ae95fd">&#9670;&nbsp;</a></span>ast_attended_transfer_message_add_link()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_attended_transfer_message_add_link </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *&#160;</td>
          <td class="paramname"><em>transfer_msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>locals</em>[2]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add details for an attended transfer that has a link between bridges. </p>
<p>An attended transfer may be accomplished by linking two bridges together with local channels. If this is how the transfer is to be completed, call this function in order to fill in details about the transfer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transfer_msg</td><td>The message to add details to. </td></tr>
    <tr><td class="paramname">locals</td><td>An array of local channel halves that each are in one of the involved bridges.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01330">1330</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00311">AST_ATTENDED_TRANSFER_DEST_LINK</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">ast_attended_transfer_message::dest_type</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00342">ast_attended_transfer_message::links</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04280">attended_transfer_bridge()</a>.</p>
<div class="fragment"><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;{</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;   transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">dest_type</a> = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527">AST_ATTENDED_TRANSFER_DEST_LINK</a>;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; 2; ++i) {</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a7f2aed874f63d44e55ccbe7b4e59f356">links</a>[i] = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(locals[i]));</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;      <span class="keywordflow">if</span> (!transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a7f2aed874f63d44e55ccbe7b4e59f356">links</a>[i]) {</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      }</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;   }</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950ab31bcd53098fda59c1bb2c2492686527">AST_ATTENDED_TRANSFER_DEST_LINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00311">stasis_bridges.h:311</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a68eeab7290249706588af2b6cffbdcaa"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a></div><div class="ttdeci">union ast_attended_transfer_message::@324 dest</div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a7f2aed874f63d44e55ccbe7b4e59f356"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a7f2aed874f63d44e55ccbe7b4e59f356">ast_attended_transfer_message::links</a></div><div class="ttdeci">struct ast_channel_snapshot * links[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00342">stasis_bridges.h:342</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a4623d089424156732a5f5591381d8b31"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">ast_attended_transfer_message::dest_type</a></div><div class="ttdeci">enum ast_attended_transfer_dest_type dest_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">stasis_bridges.h:335</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aae3000e9dc05d9b3023f5a571ffb14d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae3000e9dc05d9b3023f5a571ffb14d7">&#9670;&nbsp;</a></span>ast_attended_transfer_message_add_merge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_attended_transfer_message_add_merge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *&#160;</td>
          <td class="paramname"><em>transfer_msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>final_bridge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add details for a bridge merge to an attended transfer message. </p>
<p>If the transfer is accomplished by a bridge merge (or swap optimization), then this should be called on the created attended transfer message to have the appropriate details added on.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transfer_msg</td><td>The transfer message to add details to </td></tr>
    <tr><td class="paramname">final_bridge</td><td>The bridge where the surviving parties reside</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01283">1283</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00305">AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00338">ast_attended_transfer_message::bridge</a>, <a class="el" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">ast_attended_transfer_message::dest_type</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01645">publish_transfer_success()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l04663">two_bridge_attended_transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;{</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;   transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">dest_type</a> = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515">AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE</a>;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad62863a88a87dfc024a1d18c32ab3958">bridge</a>, final_bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>,</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;         <span class="keyword">sizeof</span>(transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad62863a88a87dfc024a1d18c32ab3958">bridge</a>));</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950a70f8fe62b08cc358ba25a274626ac515">AST_ATTENDED_TRANSFER_DEST_BRIDGE_MERGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00305">stasis_bridges.h:305</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a68eeab7290249706588af2b6cffbdcaa"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a></div><div class="ttdeci">union ast_attended_transfer_message::@324 dest</div></div>
<div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_ad62863a88a87dfc024a1d18c32ab3958"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#ad62863a88a87dfc024a1d18c32ab3958">ast_attended_transfer_message::bridge</a></div><div class="ttdeci">char bridge[AST_UUID_STR_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00338">stasis_bridges.h:338</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a4623d089424156732a5f5591381d8b31"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">ast_attended_transfer_message::dest_type</a></div><div class="ttdeci">enum ast_attended_transfer_dest_type dest_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">stasis_bridges.h:335</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a402aa031878d54df98c95146d51fad50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a402aa031878d54df98c95146d51fad50">&#9670;&nbsp;</a></span>ast_attended_transfer_message_add_threeway()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_attended_transfer_message_add_threeway </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *&#160;</td>
          <td class="paramname"><em>transfer_msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>survivor_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>survivor_bridge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add details for an attended transfer that was resolved as a three-way call. </p>
<p>If the transfer results in a three-way call between the transferer, the transferee, and the transfer target, then this should be called in order to add appropriate details to the transfer message to be published.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transfer_msg</td><td>The message to add details to </td></tr>
    <tr><td class="paramname">survivor_channel</td><td>The transferer channel that exists in the three-way call </td></tr>
    <tr><td class="paramname">survivor_bridge</td><td>The bridge where the three-way call takes place.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01293">1293</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00313">AST_ATTENDED_TRANSFER_DEST_THREEWAY</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00234">ast_bridge_channel_snapshot_pair::bridge_snapshot</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00235">ast_bridge_channel_snapshot_pair::channel_snapshot</a>, <a class="el" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">ast_attended_transfer_message::dest_type</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00344">ast_attended_transfer_message::threeway</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00327">ast_attended_transfer_message::to_transfer_target</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00325">ast_attended_transfer_message::to_transferee</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::uniqueid</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::uniqueid</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01668">publish_transfer_threeway()</a>.</p>
<div class="fragment"><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;{</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;   transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">dest_type</a> = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf">AST_ATTENDED_TRANSFER_DEST_THREEWAY</a>;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;   <span class="keywordflow">if</span> (!strcmp(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(survivor_channel), transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>)) {</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">threeway</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a> = transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">threeway</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a> = transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   }</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   <span class="keywordflow">if</span> (!strcmp(survivor_bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>)) {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">threeway</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a> = transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">dest</a>.<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">threeway</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a> = transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">bridge_snapshot</a>;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;   }</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a68eeab7290249706588af2b6cffbdcaa"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a68eeab7290249706588af2b6cffbdcaa">ast_attended_transfer_message::dest</a></div><div class="ttdeci">union ast_attended_transfer_message::@324 dest</div></div>
<div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#af3a657a2b25861869f8b0e67f0eaa950af927648ab0472ab615a296e8103b4caf">AST_ATTENDED_TRANSFER_DEST_THREEWAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00313">stasis_bridges.h:313</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">ast_channel_snapshot_base::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_ad4cabb0173fd175d7bac078a1a49bcb4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">ast_attended_transfer_message::to_transferee</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00325">stasis_bridges.h:325</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a82a439e20f31112e595909550f5201c4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">ast_attended_transfer_message::to_transfer_target</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transfer_target</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00327">stasis_bridges.h:327</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a4623d089424156732a5f5591381d8b31"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a4623d089424156732a5f5591381d8b31">ast_attended_transfer_message::dest_type</a></div><div class="ttdeci">enum ast_attended_transfer_dest_type dest_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00335">stasis_bridges.h:335</a></div></div>
<div class="ttc" id="structast__bridge__channel__snapshot__pair_html_adc69b45f11dbab86e83609b31b952033"><div class="ttname"><a href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">ast_bridge_channel_snapshot_pair::channel_snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * channel_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00235">stasis_bridges.h:235</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_aabc3ff47104c976454227f116ac48325"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#aabc3ff47104c976454227f116ac48325">ast_attended_transfer_message::threeway</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair threeway</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00344">stasis_bridges.h:344</a></div></div>
<div class="ttc" id="structast__bridge__channel__snapshot__pair_html_a548fa9691ccede16b32f244dd9637db4"><div class="ttname"><a href="../../da/db4/structast__bridge__channel__snapshot__pair.html#a548fa9691ccede16b32f244dd9637db4">ast_bridge_channel_snapshot_pair::bridge_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00234">stasis_bridges.h:234</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">ast_bridge_snapshot::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d80b41bade979c37596d850cfcf3e64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d80b41bade979c37596d850cfcf3e64">&#9670;&nbsp;</a></span>ast_attended_transfer_message_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a>* ast_attended_transfer_message_create </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_external</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>to_transferee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>transferee_bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>to_transfer_target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>target_bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>transferee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>transfer_target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an Attended transfer message to be published. </p>
<p>The parameters to this function are the basic necessities in order to create the initial attended transfer message.</p>
<p>The transferee and transfer_target parameters are optional. If not provided, then this function will attempt to determine who the transferee and transfer target are based on the input transferer channels and bridges. You typically will not need to provide an explicit transferee and transfer target channel unless your attended transfer is implemented in a strange way.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is_external</td><td>Non-zero if the transfer was initiated by a native channel driver protocol. </td></tr>
    <tr><td class="paramname">to_transferee</td><td>The transferer channel that is bridged to the transferee channel. </td></tr>
    <tr><td class="paramname">transferee_bridge</td><td>The bridge between the transferer and transferee. May be NULL. </td></tr>
    <tr><td class="paramname">to_transfer_target</td><td>The transferer channel that is bridged to the transfer target. </td></tr>
    <tr><td class="paramname">target_bridge</td><td>The bridge between the transferer and transfer target. May be NULL. </td></tr>
    <tr><td class="paramname">transferee</td><td>The channel that is being transferred. Optional. </td></tr>
    <tr><td class="paramname">transfer_target</td><td>The channel that is being transferred to. Optional.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failure to allocate or create snapshots </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The created attended transfer message </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01226">1226</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04142">ast_bridge_peer()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01206">attended_transfer_dtor()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00760">bridge_channel_snapshot_pair_init()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00333">ast_attended_transfer_message::target</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00327">ast_attended_transfer_message::to_transfer_target</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00325">ast_attended_transfer_message::to_transferee</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00331">ast_attended_transfer_message::transferee</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04729">ast_bridge_transfer_attended()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01692">publish_transfer_fail()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01645">publish_transfer_success()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01668">publish_transfer_threeway()</a>.</p>
<div class="fragment"><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;{</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *transfer_msg;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;   transfer_msg = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*transfer_msg), <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a5ebcb5871f63c60ee8e550587596b36b">attended_transfer_dtor</a>);</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   <span class="keywordflow">if</span> (!transfer_msg) {</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;   }</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d0f/stasis__bridges_8c.html#aa3cb0d6342689b287a6d37b80adcdbdf">bridge_channel_snapshot_pair_init</a>(to_transferee, transferee_bridge, &amp;transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>) ||</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;         <a class="code" href="../../da/d0f/stasis__bridges_8c.html#aa3cb0d6342689b287a6d37b80adcdbdf">bridge_channel_snapshot_pair_init</a>(to_transfer_target, target_bridge, &amp;transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>)) {</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(transfer_msg);</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;   }</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;   <span class="keywordflow">if</span> (transferee) {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(transferee));</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <span class="keywordflow">if</span> (!transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>) {</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(transfer_msg);</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      }</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (transferee_bridge) {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      transferee = <a class="code" href="../../d4/d56/bridge_8h.html#a08a41371fb4f020d645a0e6f50434005">ast_bridge_peer</a>(transferee_bridge, to_transferee);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      <span class="keywordflow">if</span> (transferee) {</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;         transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(transferee));</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(transferee);</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;         <span class="keywordflow">if</span> (!transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>) {</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(transfer_msg);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;         }</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      }</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;   }</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   <span class="keywordflow">if</span> (transfer_target) {</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">target</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(transfer_target));</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <span class="keywordflow">if</span> (!transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">target</a>) {</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(transfer_msg);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      }</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (target_bridge) {</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      transfer_target = <a class="code" href="../../d4/d56/bridge_8h.html#a08a41371fb4f020d645a0e6f50434005">ast_bridge_peer</a>(target_bridge, to_transfer_target);</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      <span class="keywordflow">if</span> (transfer_target) {</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;         transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">target</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(transfer_target));</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(transfer_target);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;         <span class="keywordflow">if</span> (!transfer_msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">target</a>) {</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(transfer_msg);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;         }</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      }</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;   }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;   <span class="keywordflow">return</span> transfer_msg;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;}</div><div class="ttc" id="structast__attended__transfer__message_html"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a></div><div class="ttdoc">Message representing attended transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00319">stasis_bridges.h:319</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_adb1db9449fd1828a7cc4e1df8f22c3c4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">ast_attended_transfer_message::target</a></div><div class="ttdeci">struct ast_channel_snapshot * target</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00333">stasis_bridges.h:333</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_aa3cb0d6342689b287a6d37b80adcdbdf"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#aa3cb0d6342689b287a6d37b80adcdbdf">bridge_channel_snapshot_pair_init</a></div><div class="ttdeci">static int bridge_channel_snapshot_pair_init(struct ast_channel *channel, struct ast_bridge *bridge, struct ast_bridge_channel_snapshot_pair *snapshot_pair)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00760">stasis_bridges.c:760</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_ad4cabb0173fd175d7bac078a1a49bcb4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">ast_attended_transfer_message::to_transferee</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00325">stasis_bridges.h:325</a></div></div>
<div class="ttc" id="bridge_8h_html_a08a41371fb4f020d645a0e6f50434005"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a08a41371fb4f020d645a0e6f50434005">ast_bridge_peer</a></div><div class="ttdeci">struct ast_channel * ast_bridge_peer(struct ast_bridge *bridge, struct ast_channel *chan)</div><div class="ttdoc">Get the channel&amp;#39;s bridge peer only if the bridge is two-party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l04142">bridge.c:4142</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a82a439e20f31112e595909550f5201c4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">ast_attended_transfer_message::to_transfer_target</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transfer_target</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00327">stasis_bridges.h:327</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a5ebcb5871f63c60ee8e550587596b36b"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a5ebcb5871f63c60ee8e550587596b36b">attended_transfer_dtor</a></div><div class="ttdeci">static void attended_transfer_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l01206">stasis_bridges.c:1206</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a9b1d5bd6bf7fd25f9a35a6e3717f9959"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">ast_attended_transfer_message::transferee</a></div><div class="ttdeci">struct ast_channel_snapshot * transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00331">stasis_bridges.h:331</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a263062ed75918c257f5401617389bdd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a263062ed75918c257f5401617389bdd8">&#9670;&nbsp;</a></span>ast_attended_transfer_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a>* ast_attended_transfer_type </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Message type for <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a>. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Message</td><td>type for <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00915">app_create()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01346">ast_bridge_publish_attended_transfer()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01407">ast_stasis_bridging_init()</a>, <a class="el" href="../../da/dc9/cel_8c_source.html#l01500">create_routes()</a>, <a class="el" href="../../dd/d92/confbridge__manager_8c_source.html#l00721">manager_confbridge_init()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06514">setup_stasis_subs()</a>, and <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01392">stasis_bridging_cleanup()</a>.</p>

</div>
</div>
<a id="a20c565f2b4f6dd680b2fa04f8d74f3c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20c565f2b4f6dd680b2fa04f8d74f3c4">&#9670;&nbsp;</a></span>ast_blind_transfer_message_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a>* ast_blind_transfer_message_create </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_external</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>transferer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a blind transfer message to be published. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is_external</td><td>Whether the blind transfer was initiated externally (e.g. via AMI or native protocol) </td></tr>
    <tr><td class="paramname">transferer</td><td>The transferer's channel that is bridged to the transferee </td></tr>
    <tr><td class="paramname">bridge</td><td>The bridge the transferer and transferee are in </td></tr>
    <tr><td class="paramname">context</td><td>The destination context for the blind transfer </td></tr>
    <tr><td class="paramname">exten</td><td>The destination extension for the blind transfer</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failure to allocate or create snapshots </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The created blind transfer message </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00929">929</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00919">blind_transfer_dtor()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00259">ast_blind_transfer_message::context</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00261">ast_blind_transfer_message::exten</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00253">ast_blind_transfer_message::is_external</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00255">ast_blind_transfer_message::transferer</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04477">ast_bridge_transfer_blind()</a>, and <a class="el" href="../../db/dc4/test__cel_8c_source.html#l01240">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;{</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a> *msg;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   msg = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*msg), <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a470ce81eefae3e443721eccbc57f6dc1">blind_transfer_dtor</a>);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;   }</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a97d7526f26c0a3ca13db9d459c5e1ca2">transferer</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(transferer));</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;   <span class="keywordflow">if</span> (!msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a97d7526f26c0a3ca13db9d459c5e1ca2">transferer</a>) {</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   }</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#ae3e993332191c334c011319613e6a6b0">is_external</a> = <a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#ae3e993332191c334c011319613e6a6b0">is_external</a>;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <span class="keyword">sizeof</span>(msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>));</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a78d4847658b695383d849efd12399b38">exten</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <span class="keyword">sizeof</span>(msg-&gt;<a class="code" href="../../d1/dbf/structast__blind__transfer__message.html#a78d4847658b695383d849efd12399b38">exten</a>));</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;   <span class="keywordflow">return</span> msg;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a78d4847658b695383d849efd12399b38">ast_blind_transfer_message::exten</a></div><div class="ttdeci">char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00261">stasis_bridges.h:261</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a></div><div class="ttdoc">Message published during a blind transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00249">stasis_bridges.h:249</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_ae3e993332191c334c011319613e6a6b0"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#ae3e993332191c334c011319613e6a6b0">ast_blind_transfer_message::is_external</a></div><div class="ttdeci">int is_external</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00253">stasis_bridges.h:253</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a470ce81eefae3e443721eccbc57f6dc1"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a470ce81eefae3e443721eccbc57f6dc1">blind_transfer_dtor</a></div><div class="ttdeci">static void blind_transfer_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00919">stasis_bridges.c:919</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_a97d7526f26c0a3ca13db9d459c5e1ca2"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#a97d7526f26c0a3ca13db9d459c5e1ca2">ast_blind_transfer_message::transferer</a></div><div class="ttdeci">struct ast_channel_snapshot * transferer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00255">stasis_bridges.h:255</a></div></div>
<div class="ttc" id="structast__blind__transfer__message_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../d1/dbf/structast__blind__transfer__message.html#ac25ea00ee3f082df06e0cf468cbde240">ast_blind_transfer_message::context</a></div><div class="ttdeci">char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00259">stasis_bridges.h:259</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a05b1c5a7666e29a9ec982e3c9d6c1b85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05b1c5a7666e29a9ec982e3c9d6c1b85">&#9670;&nbsp;</a></span>ast_blind_transfer_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a>* ast_blind_transfer_type </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Message type for <a class="el" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a>. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Message</td><td>type for <a class="el" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00915">app_create()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00953">ast_bridge_publish_blind_transfer()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01407">ast_stasis_bridging_init()</a>, <a class="el" href="../../da/dc9/cel_8c_source.html#l01500">create_routes()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06514">setup_stasis_subs()</a>, and <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01392">stasis_bridging_cleanup()</a>.</p>

</div>
</div>
<a id="aca77a07a50fb0eb50440b036e741ff0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca77a07a50fb0eb50440b036e741ff0a">&#9670;&nbsp;</a></span>ast_bridge_blob_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a>* ast_bridge_blob_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td>
          <td class="paramname"><em>blob</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a <a class="el" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> message. </p>
<dl class="section since"><dt>Since</dt><dd>12 The <em>blob</em> JSON object requires a <code>"type"</code> field describing the blob. It should also be treated as immutable and not modified after it is put into the message.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>bridge is locked. </dd>
<dd>
No channels are locked.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>Channel blob is associated with, or NULL for global/all bridges. </td></tr>
    <tr><td class="paramname">blob</td><td>JSON object representing the data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> message. </dd>
<dd>
<code>NULL</code> on error </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00500">500</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00202">ast_bridge_snapshot_create()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00067">ast_json_ref()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00129">ast_bridge_blob::blob</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">ast_bridge_blob::bridge</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00489">bridge_blob_dtor()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">ast_bridge_blob::channel</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00582">ast_bridge_publish_enter()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00611">ast_bridge_publish_leave()</a>, and <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00585">send_conf_stasis()</a>.</p>
<div class="fragment"><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;{</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> *obj;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keywordflow">if</span> (!message_type) {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   obj = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*obj), <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a94a38866c29d0fba7fd32e4a1a090a20">bridge_blob_dtor</a>);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   <span class="keywordflow">if</span> (!obj) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   }</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="keywordflow">if</span> (bridge) {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a> = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a>(bridge);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(obj, -1);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      }</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">channel</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan));</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">channel</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(obj, -1);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   <span class="keywordflow">if</span> (blob) {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a> = <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(blob);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(message_type, obj);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(obj, -1);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <span class="keywordflow">return</span> msg;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div><div class="ttc" id="json_8h_html_a0ca956b7df20127f7e38993c3c06cb2c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a></div><div class="ttdeci">struct ast_json * ast_json_ref(struct ast_json *value)</div><div class="ttdoc">Increase refcount on value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00067">json.c:67</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_a8ee8cdf03a2b9d3424011cb6875751fa"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">ast_bridge_blob::channel</a></div><div class="ttdeci">struct ast_channel_snapshot * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">stasis_bridges.h:127</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_ad2b8e22df32b99651f727cd9a8dcb9f3"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">ast_bridge_blob::blob</a></div><div class="ttdeci">struct ast_json * blob</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00129">stasis_bridges.h:129</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_a820b583b07f0cf97618ca22d73cd8f09"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">ast_bridge_blob::bridge</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">stasis_bridges.h:125</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__bridge__blob_html"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a></div><div class="ttdoc">Blob of data associated with a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00123">stasis_bridges.h:123</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a95241898553c1d42ea46964b277433ad"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a></div><div class="ttdeci">struct ast_bridge_snapshot * ast_bridge_snapshot_create(struct ast_bridge *bridge)</div><div class="ttdoc">Generate a snapshot of the bridge state. This is an ao2 object, so ao2_cleanup() to deallocate...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00202">stasis_bridges.c:202</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a94a38866c29d0fba7fd32e4a1a090a20"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a94a38866c29d0fba7fd32e4a1a090a20">bridge_blob_dtor</a></div><div class="ttdeci">static void bridge_blob_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00489">stasis_bridges.c:489</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae095d11ac6bdce5f4c9c9af8adeb0a86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae095d11ac6bdce5f4c9c9af8adeb0a86">&#9670;&nbsp;</a></span>ast_bridge_blob_create_from_snapshots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a>* ast_bridge_blob_create_from_snapshots </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>bridge_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *&#160;</td>
          <td class="paramname"><em>chan_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td>
          <td class="paramname"><em>blob</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a <a class="el" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> message from snapshots. </p>
<dl class="section since"><dt>Since</dt><dd>13.28 </dd>
<dd>
16.5 The <em>blob</em> JSON object requires a <code>"type"</code> field describing the blob. It should also be treated as immutable and not modified after it is put into the message.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>bridge is locked. </dd>
<dd>
No channels are locked.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_snapshot</td><td>Bridge snapshot </td></tr>
    <tr><td class="paramname">channel_snapshot</td><td>Channel snapshot </td></tr>
    <tr><td class="paramname">blob</td><td>JSON object representing the data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> message. </dd>
<dd>
<code>NULL</code> on error </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00546">546</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00067">ast_json_ref()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00129">ast_bridge_blob::blob</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">ast_bridge_blob::bridge</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00489">bridge_blob_dtor()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">ast_bridge_blob::channel</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00622">send_conf_stasis_snapshots()</a>.</p>
<div class="fragment"><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;{</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a> *obj;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <span class="keywordflow">if</span> (!message_type) {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   }</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   obj = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*obj), <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a94a38866c29d0fba7fd32e4a1a090a20">bridge_blob_dtor</a>);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <span class="keywordflow">if</span> (!obj) {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <span class="keywordflow">if</span> (bridge_snapshot) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">bridge</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(bridge_snapshot);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <span class="keywordflow">if</span> (chan_snapshot) {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">channel</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(chan_snapshot);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <span class="keywordflow">if</span> (blob) {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      obj-&gt;<a class="code" href="../../d7/d01/structast__bridge__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a> = <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(blob);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   }</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(message_type, obj);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(obj, -1);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <span class="keywordflow">return</span> msg;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;}</div><div class="ttc" id="json_8h_html_a0ca956b7df20127f7e38993c3c06cb2c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a></div><div class="ttdeci">struct ast_json * ast_json_ref(struct ast_json *value)</div><div class="ttdoc">Increase refcount on value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00067">json.c:67</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_a8ee8cdf03a2b9d3424011cb6875751fa"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a8ee8cdf03a2b9d3424011cb6875751fa">ast_bridge_blob::channel</a></div><div class="ttdeci">struct ast_channel_snapshot * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00127">stasis_bridges.h:127</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_ad2b8e22df32b99651f727cd9a8dcb9f3"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">ast_bridge_blob::blob</a></div><div class="ttdeci">struct ast_json * blob</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00129">stasis_bridges.h:129</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structast__bridge__blob_html_a820b583b07f0cf97618ca22d73cd8f09"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html#a820b583b07f0cf97618ca22d73cd8f09">ast_bridge_blob::bridge</a></div><div class="ttdeci">struct ast_bridge_snapshot * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00125">stasis_bridges.h:125</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__bridge__blob_html"><div class="ttname"><a href="../../d7/d01/structast__bridge__blob.html">ast_bridge_blob</a></div><div class="ttdoc">Blob of data associated with a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00123">stasis_bridges.h:123</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a94a38866c29d0fba7fd32e4a1a090a20"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a94a38866c29d0fba7fd32e4a1a090a20">bridge_blob_dtor</a></div><div class="ttdeci">static void bridge_blob_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00489">stasis_bridges.c:489</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a04efba17b1302d217a2a07a02c3eac98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04efba17b1302d217a2a07a02c3eac98">&#9670;&nbsp;</a></span>ast_bridge_get_snapshot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a>* ast_bridge_get_snapshot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current snapshot for the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>17.0</dd></dl>
<p>The returned pointer is AO2 managed, so <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> when you're done.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>The bridge from which to get the snapshot. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Most recent snapshot. <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> when done. </dd>
<dd>
<code>NULL</code> if there isn't a snapshot. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01378">1378</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00480">ast_bridge_lock</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00414">ast_bridge::current_snapshot</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00885">ast_ari_bridges_list()</a>, <a class="el" href="../../d8/d3a/bridges_8c_source.html#l00078">bridges_scrape_cb()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05094">handle_bridge_show_all()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00448">send_bridge_list_item_cb()</a>, and <a class="el" href="../../db/dc4/test__cel_8c_source.html#l00351">test_cel_generate_peer_str_snapshot()</a>.</p>
<div class="fragment"><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;{</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *snapshot;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;   }</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(bridge);</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;   snapshot = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>);</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;   <span class="keywordflow">return</span> snapshot;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;}</div><div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structast__bridge_html_a7dbe1cd4b391636e49491eafab9095e0"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">ast_bridge::current_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * current_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00414">bridge.h:414</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="bridge_8h_html_ab8ee807d2c3a21d19e16fedf35c90de8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a></div><div class="ttdeci">#define ast_bridge_lock(bridge)</div><div class="ttdoc">Lock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00480">bridge.h:480</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aee9af6c35b13edd9dcbd3dbabc5522ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee9af6c35b13edd9dcbd3dbabc5522ee">&#9670;&nbsp;</a></span>ast_bridge_get_snapshot_by_uniqueid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a>* ast_bridge_get_snapshot_by_uniqueid </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>bridge_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current snapshot for the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>17.0</dd></dl>
<p>The returned pointer is AO2 managed, so <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> when you're done.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_id</td><td>Uniqueid of the bridge from which to get the snapshot. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Most recent snapshot. <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> when done. </dd>
<dd>
<code>NULL</code> if bridge or snapshot doesn't exist. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01359">1359</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05070">ast_bridge_find_by_id()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00480">ast_bridge_lock</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00414">ast_bridge::current_snapshot</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00856">ast_ari_bridges_get()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00057">find_bridge()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05157">handle_bridge_show_specific()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00555">manager_bridge_info()</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l02095">stasis_app_user_event()</a>.</p>
<div class="fragment"><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;{</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *snapshot;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>));</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   bridge = <a class="code" href="../../d4/d56/bridge_8h.html#a69034688e4e730fca4c3e12b7ac38300">ast_bridge_find_by_id</a>(<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>);</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   }</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(bridge);</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   snapshot = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>);</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge);</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, -1);</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;   <span class="keywordflow">return</span> snapshot;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;}</div><div class="ttc" id="bridge_8h_html_a69034688e4e730fca4c3e12b7ac38300"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a69034688e4e730fca4c3e12b7ac38300">ast_bridge_find_by_id</a></div><div class="ttdeci">struct ast_bridge * ast_bridge_find_by_id(const char *bridge_id)</div><div class="ttdoc">Find bridge by id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l05070">bridge.c:5070</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__bridge_html_a7dbe1cd4b391636e49491eafab9095e0"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">ast_bridge::current_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * current_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00414">bridge.h:414</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">ast_bridge_snapshot::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="bridge_8h_html_ab8ee807d2c3a21d19e16fedf35c90de8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a></div><div class="ttdeci">#define ast_bridge_lock(bridge)</div><div class="ttdoc">Lock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00480">bridge.h:480</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a20be59047a504f4c5dca2289beef7963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20be59047a504f4c5dca2289beef7963">&#9670;&nbsp;</a></span>ast_bridge_merge_message_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a>* ast_bridge_merge_message_type </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Message type for <a class="el" href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a>. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Message</td><td>type for <a class="el" href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00915">app_create()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00460">ast_bridge_publish_merge()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01407">ast_stasis_bridging_init()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00681">manager_bridging_init()</a>, and <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01392">stasis_bridging_cleanup()</a>.</p>

</div>
</div>
<a id="a1949ac2d3f4b2113242d981cc315b451"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1949ac2d3f4b2113242d981cc315b451">&#9670;&nbsp;</a></span>ast_bridge_publish_attended_transfer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_publish_attended_transfer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *&#160;</td>
          <td class="paramname"><em>transfer_msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish an attended transfer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transfer_msg</td><td>The transfer message to publish </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01346">1346</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00179">ast_bridge_topic_all()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04729">ast_bridge_transfer_attended()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01692">publish_transfer_fail()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01645">publish_transfer_success()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01668">publish_transfer_threeway()</a>.</p>
<div class="fragment"><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;{</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type</a>(), transfer_msg);</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;   }</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a>(), msg);</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;}</div><div class="ttc" id="stasis__bridges_8c_html_abf64fa441014314244648caa6c8ab80b"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic_all(void)</div><div class="ttdoc">A topic which publishes the events for all bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00179">stasis_bridges.c:179</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a263062ed75918c257f5401617389bdd8"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type</a></div><div class="ttdeci">struct stasis_message_type * ast_attended_transfer_type(void)</div><div class="ttdoc">Message type for ast_attended_transfer_message. </div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a0d32d9383a2e73b8292eec6c8359e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a0d32d9383a2e73b8292eec6c8359e0">&#9670;&nbsp;</a></span>ast_bridge_publish_blind_transfer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_publish_blind_transfer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/dbf/structast__blind__transfer__message.html">ast_blind_transfer_message</a> *&#160;</td>
          <td class="paramname"><em>transfer_message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a blind transfer event. </p>
<dl class="section pre"><dt>Precondition</dt><dd>Bridges involved are locked. Channels involved are not locked.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is_external</td><td>Whether the blind transfer was initiated externally (e.g. via AMI or native protocol) </td></tr>
    <tr><td class="paramname">result</td><td>The success or failure of the transfer </td></tr>
    <tr><td class="paramname">to_transferee</td><td>The bridge between the transferer and transferee plus the transferer channel </td></tr>
    <tr><td class="paramname">context</td><td>The destination context for the blind transfer </td></tr>
    <tr><td class="paramname">exten</td><td>The destination extension for the blind transfer </td></tr>
    <tr><td class="paramname">transferee_channel</td><td>If a single channel is being transferred, this is it. If multiple parties are being transferred, this is NULL. </td></tr>
    <tr><td class="paramname">replace_channel</td><td>If multiple parties are being transferred or the transfer cannot reach across the bridge due to bridge flags, this is the channel connecting their bridge to the destination. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00953">953</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00179">ast_bridge_topic_all()</a>, <a class="el" href="../../d1/d25/app__stasis_8c_source.html#l00080">stasis</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04477">ast_bridge_transfer_blind()</a>, and <a class="el" href="../../db/dc4/test__cel_8c_source.html#l01240">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;{</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="code" href="../../d1/d25/app__stasis_8c.html#a6721791de482d8b1d92dd47aae0fc0be">stasis</a>;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   stasis = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type</a>(), transfer_message);</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;   <span class="keywordflow">if</span> (!stasis) {</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   }</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a>(), stasis);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(stasis);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_a05b1c5a7666e29a9ec982e3c9d6c1b85"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type</a></div><div class="ttdeci">struct stasis_message_type * ast_blind_transfer_type(void)</div><div class="ttdoc">Message type for ast_blind_transfer_message. </div></div>
<div class="ttc" id="stasis__bridges_8c_html_abf64fa441014314244648caa6c8ab80b"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic_all(void)</div><div class="ttdoc">A topic which publishes the events for all bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00179">stasis_bridges.c:179</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="app__stasis_8c_html_a6721791de482d8b1d92dd47aae0fc0be"><div class="ttname"><a href="../../d1/d25/app__stasis_8c.html#a6721791de482d8b1d92dd47aae0fc0be">stasis</a></div><div class="ttdeci">static const char * stasis</div><div class="ttdoc">Dialplan application name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d25/app__stasis_8c_source.html#l00080">app_stasis.c:80</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aecd7e5c63f8d0d4c022bd817d4241c5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecd7e5c63f8d0d4c022bd817d4241c5c">&#9670;&nbsp;</a></span>ast_bridge_publish_enter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_publish_enter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>swap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a bridge channel enter event. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>bridge is locked. </dd>
<dd>
No channels are locked.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>The bridge a channel entered </td></tr>
    <tr><td class="paramname">chan</td><td>The channel that entered the bridge </td></tr>
    <tr><td class="paramname">swap</td><td>The channel being swapped out of the bridge </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00582">582</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00500">ast_bridge_blob_create()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00057">AST_BRIDGE_FLAG_INVISIBLE</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00184">ast_bridge_topic()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00381">bridge_publish_state_from_blob()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00377">ast_bridge::feature_flags</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02235">bridge_channel_internal_push_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;{</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *blob = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a>)) {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;   }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   <span class="keywordflow">if</span> (swap) {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s}&quot;</span>, <span class="stringliteral">&quot;swap&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(swap));</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keywordflow">if</span> (!blob) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   msg = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#add1309ffa28c3f41255dc7b294b968d6">ast_bridge_blob_create</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type</a>(), bridge, chan, blob);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(blob);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <span class="comment">/* enter blob first, then state */</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a>(bridge), msg);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <a class="code" href="../../da/d0f/stasis__bridges_8c.html#ac738c330e2a7470ec824a2fa94811348">bridge_publish_state_from_blob</a>(bridge, <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg));</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;}</div><div class="ttc" id="structast__bridge_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00377">bridge.h:377</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a8bd3a6c07bd2064a82a7c27091ba0fce"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_entered_bridge_type(void)</div><div class="ttdoc">Message type for channel enter bridge blob messages. </div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00057">bridge_features.h:57</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_ac738c330e2a7470ec824a2fa94811348"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#ac738c330e2a7470ec824a2fa94811348">bridge_publish_state_from_blob</a></div><div class="ttdeci">static void bridge_publish_state_from_blob(struct ast_bridge *bridge, struct ast_bridge_blob *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00381">stasis_bridges.c:381</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a7bdfd8273bb885f7a65f6f5d8188c915"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic(struct ast_bridge *bridge)</div><div class="ttdoc">A topic which publishes the events for a particular bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00184">stasis_bridges.c:184</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="stasis__bridges_8c_html_add1309ffa28c3f41255dc7b294b968d6"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#add1309ffa28c3f41255dc7b294b968d6">ast_bridge_blob_create</a></div><div class="ttdeci">struct stasis_message * ast_bridge_blob_create(struct stasis_message_type *message_type, struct ast_bridge *bridge, struct ast_channel *chan, struct ast_json *blob)</div><div class="ttdoc">Creates a ast_bridge_blob message. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00500">stasis_bridges.c:500</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b295a5bab9da9b629c81985e2897840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b295a5bab9da9b629c81985e2897840">&#9670;&nbsp;</a></span>ast_bridge_publish_leave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_publish_leave </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a bridge channel leave event. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>bridge is locked. </dd>
<dd>
No channels are locked.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>The bridge a channel left </td></tr>
    <tr><td class="paramname">chan</td><td>The channel that left the bridge </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00611">611</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00500">ast_bridge_blob_create()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00057">AST_BRIDGE_FLAG_INVISIBLE</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00184">ast_bridge_topic()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00381">bridge_publish_state_from_blob()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00377">ast_bridge::feature_flags</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02178">bridge_channel_internal_pull()</a>.</p>
<div class="fragment"><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;{</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a>)) {</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   msg = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#add1309ffa28c3f41255dc7b294b968d6">ast_bridge_blob_create</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type</a>(), bridge, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   }</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <span class="comment">/* state first, then leave blob (opposite of enter, preserves nesting of events) */</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <a class="code" href="../../da/d0f/stasis__bridges_8c.html#ac738c330e2a7470ec824a2fa94811348">bridge_publish_state_from_blob</a>(bridge, <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg));</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a>(bridge), msg);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;}</div><div class="ttc" id="structast__bridge_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00377">bridge.h:377</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a4cf969b75b455dc9301ede7c7830d4b6"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_left_bridge_type(void)</div><div class="ttdoc">Message type for channel leave bridge blob messages. </div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00057">bridge_features.h:57</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_ac738c330e2a7470ec824a2fa94811348"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#ac738c330e2a7470ec824a2fa94811348">bridge_publish_state_from_blob</a></div><div class="ttdeci">static void bridge_publish_state_from_blob(struct ast_bridge *bridge, struct ast_bridge_blob *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00381">stasis_bridges.c:381</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a7bdfd8273bb885f7a65f6f5d8188c915"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic(struct ast_bridge *bridge)</div><div class="ttdoc">A topic which publishes the events for a particular bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00184">stasis_bridges.c:184</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_add1309ffa28c3f41255dc7b294b968d6"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#add1309ffa28c3f41255dc7b294b968d6">ast_bridge_blob_create</a></div><div class="ttdeci">struct stasis_message * ast_bridge_blob_create(struct stasis_message_type *message_type, struct ast_bridge *bridge, struct ast_channel *chan, struct ast_json *blob)</div><div class="ttdoc">Creates a ast_bridge_blob message. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00500">stasis_bridges.c:500</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a075388377d67766550e9e53761404b99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a075388377d67766550e9e53761404b99">&#9670;&nbsp;</a></span>ast_bridge_publish_merge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_publish_merge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>from</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a bridge merge. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>Bridges involved are locked</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">to</td><td>The bridge to which channels are being added </td></tr>
    <tr><td class="paramname">from</td><td>The bridge from which channels are being removed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00460">460</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00057">AST_BRIDGE_FLAG_INVISIBLE</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00179">ast_bridge_topic_all()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00418">bridge_merge_message_create()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00377">ast_bridge::feature_flags</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l02096">bridge_do_merge()</a>.</p>
<div class="fragment"><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;{</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a> *merge_msg;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type</a>()) {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(to != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(from != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;to-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a>) == 0);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;from-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a>) == 0);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   merge_msg = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#abd161ae34220b966e5d2b35d9c2f9b72">bridge_merge_message_create</a>(to, from);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <span class="keywordflow">if</span> (!merge_msg) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type</a>(), merge_msg);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(merge_msg, -1);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;   }</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a>(), msg);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;}</div><div class="ttc" id="structast__bridge_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00377">bridge.h:377</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_abd161ae34220b966e5d2b35d9c2f9b72"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#abd161ae34220b966e5d2b35d9c2f9b72">bridge_merge_message_create</a></div><div class="ttdeci">static struct ast_bridge_merge_message * bridge_merge_message_create(struct ast_bridge *to, struct ast_bridge *from)</div><div class="ttdoc">Bridge merge message creation helper. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00418">stasis_bridges.c:418</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00057">bridge_features.h:57</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_abf64fa441014314244648caa6c8ab80b"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic_all(void)</div><div class="ttdoc">A topic which publishes the events for all bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00179">stasis_bridges.c:179</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a20be59047a504f4c5dca2289beef7963"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type</a></div><div class="ttdeci">struct stasis_message_type * ast_bridge_merge_message_type(void)</div><div class="ttdoc">Message type for ast_bridge_merge_message. </div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="structast__bridge__merge__message_html"><div class="ttname"><a href="../../d5/d49/structast__bridge__merge__message.html">ast_bridge_merge_message</a></div><div class="ttdoc">Message representing the merge of two bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00092">stasis_bridges.h:92</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa8bd54e09b0c348a3232053e4be9bcfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8bd54e09b0c348a3232053e4be9bcfb">&#9670;&nbsp;</a></span>ast_bridge_publish_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_publish_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish the state of a bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>Bridge is locked</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>The bridge for which to publish state </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00350">350</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00202">ast_bridge_snapshot_create()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00184">ast_bridge_topic()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00275">bridge_snapshot_update_create()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00414">ast_bridge::current_snapshot</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, and <a class="el" href="../../d0/d89/codec__g726_8c_source.html#l00367">update()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l03816">ast_bridge_set_single_src_video_mode()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03883">ast_bridge_update_talker_src_video_mode()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01443">bridge_reconfigured()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l00709">bridge_register()</a>.</p>
<div class="fragment"><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *new_snapshot;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(bridge != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   new_snapshot = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a>(bridge);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keywordflow">if</span> (!new_snapshot) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   update = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#add80c15db9febf8c5c7aef86e25f9853">bridge_snapshot_update_create</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>, new_snapshot);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   <span class="comment">/* There may not have been an old snapshot */</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a> = new_snapshot;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <span class="keywordflow">if</span> (!update) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a>(), update);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(update, -1);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a>(bridge), msg);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_a93724fb58fab92a0a749535e8c8534d2"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a></div><div class="ttdeci">struct stasis_message_type * ast_bridge_snapshot_type(void)</div><div class="ttdoc">Message type for ast_bridge_snapshot. </div></div>
<div class="ttc" id="codec__g726_8c_html_a8c58a1d1fd9436ff5145385d3ef7a430"><div class="ttname"><a href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a></div><div class="ttdeci">static void update(int code_size, int y, int wi, int fi, int dq, int sr, int dqsez, struct g726_state *state_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/codec__g726_8c_source.html#l00367">codec_g726.c:367</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__snapshot__update_html"><div class="ttname"><a href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00034">stasis_bridges.h:34</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_add80c15db9febf8c5c7aef86e25f9853"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#add80c15db9febf8c5c7aef86e25f9853">bridge_snapshot_update_create</a></div><div class="ttdeci">static struct ast_bridge_snapshot_update * bridge_snapshot_update_create(struct ast_bridge_snapshot *old, struct ast_bridge_snapshot *new)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00275">stasis_bridges.c:275</a></div></div>
<div class="ttc" id="structast__bridge_html_a7dbe1cd4b391636e49491eafab9095e0"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">ast_bridge::current_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * current_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00414">bridge.h:414</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a95241898553c1d42ea46964b277433ad"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a></div><div class="ttdeci">struct ast_bridge_snapshot * ast_bridge_snapshot_create(struct ast_bridge *bridge)</div><div class="ttdoc">Generate a snapshot of the bridge state. This is an ao2 object, so ao2_cleanup() to deallocate...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00202">stasis_bridges.c:202</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a7bdfd8273bb885f7a65f6f5d8188c915"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic(struct ast_bridge *bridge)</div><div class="ttdoc">A topic which publishes the events for a particular bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00184">stasis_bridges.c:184</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a95241898553c1d42ea46964b277433ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95241898553c1d42ea46964b277433ad">&#9670;&nbsp;</a></span>ast_bridge_snapshot_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a>* ast_bridge_snapshot_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a snapshot of the bridge state. This is an ao2 object, so <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> to deallocate. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>Bridge is locked</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>The bridge from which to generate a snapshot</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">AO2</td><td>refcounted snapshot on success </td></tr>
    <tr><td class="paramname">NULL</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00202">202</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00057">AST_BRIDGE_FLAG_INVISIBLE</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00102">AST_BRIDGE_VIDEO_MODE_SINGLE_SRC</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00105">AST_BRIDGE_VIDEO_MODE_TALKER_SRC</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d2/d48/strings_8c_source.html#l00206">ast_str_container_add()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01312">ast_str_container_alloc</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00194">bridge_snapshot_dtor()</a>, <a class="el" href="../../d0/d3b/bridge__technology_8h_source.html#l00066">ast_bridge_technology::capabilities</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00343">ast_bridge_snapshot::capabilities</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00116">ast_bridge_video_single_src_data::chan_vsrc</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00123">ast_bridge_video_talker_src_data::chan_vsrc</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00339">ast_bridge_snapshot::channels</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00371">ast_bridge::channels</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00351">ast_bridge_snapshot::creationtime</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00416">ast_bridge::creationtime</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::creator</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00341">ast_bridge_snapshot::feature_flags</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00377">ast_bridge::feature_flags</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00160">ast_bridge_video_mode::mode</a>, <a class="el" href="../../dc/d4a/structast__bridge__video__mode.html#a4815762cb716d9c02daf0caadd5a41db">ast_bridge_video_mode::mode_data</a>, <a class="el" href="../../d0/d3b/bridge__technology_8h_source.html#l00063">ast_bridge_technology::name</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00267">ast_bridge_methods::name</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00347">ast_bridge_snapshot::num_active</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00383">ast_bridge::num_active</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00345">ast_bridge_snapshot::num_channels</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00381">ast_bridge::num_channels</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00163">ast_bridge_video_mode::single_src_data</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00044">SNAPSHOT_CHANNELS_BUCKETS</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00375">ast_bridge::softmix</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00164">ast_bridge_video_mode::talker_src_data</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00363">ast_bridge::technology</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00359">ast_bridge::v_table</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00287">ast_bridge_softmix::video_mode</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00349">ast_bridge_snapshot::video_mode</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00925">ast_ari_bridges_create()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00954">ast_ari_bridges_create_with_id()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00500">ast_bridge_blob_create()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00350">ast_bridge_publish_state()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04477">ast_bridge_transfer_blind()</a>, <a class="el" href="../../db/dc4/test__cel_8c_source.html#l01240">AST_TEST_DEFINE()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00760">bridge_channel_snapshot_pair_init()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00418">bridge_merge_message_create()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00319">bridge_topics_destroy()</a>, and <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00622">send_conf_stasis_snapshots()</a>.</p>
<div class="fragment"><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;{</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *snapshot;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a>)) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   snapshot = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*snapshot), <a class="code" href="../../da/d0f/stasis__bridges_8c.html#ab3df470f4762c140fe75e2eb48d0ce46">bridge_snapshot_dtor</a>,</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(snapshot, 128)) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a> = <a class="code" href="../../d6/d90/strings_8h.html#a77f7edf078454c39f51bae4bb400e764">ast_str_container_alloc</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a449169f26afbc412fc537b51a9cd0e16">SNAPSHOT_CHANNELS_BUCKETS</a>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <span class="keywordflow">if</span> (!snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a>) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>, bridge_channel, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#ae2861c04a240bbc90f32ade1e1261afa">ast_str_container_add</a>(snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a>,</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>))) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(snapshot, uniqueid, bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(snapshot, technology, bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(snapshot, subclass, bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a2f11ecc852af02fffecf1411013f0873">v_table</a>-&gt;<a class="code" href="../../d2/dd3/structast__bridge__methods.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(snapshot, creator, bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a6e62c2774ca18846e6e45057fb8b7a22">creator</a>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(snapshot, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a> = bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a04532f57b1eebac73f24b2a02dab161f">capabilities</a> = bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a04532f57b1eebac73f24b2a02dab161f">capabilities</a>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a97e3bedeadf444995deb6fab68f57e21">num_channels</a> = bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">num_channels</a>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a4d514eabb35f71dee132ef1df1c6cdbb">num_active</a> = bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a4d514eabb35f71dee132ef1df1c6cdbb">num_active</a>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a> = bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a1b93f1ad25034993f7eb103a0322562e">video_mode</a> = bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a1792ee6e2f718b197f668a8b7b16d357">softmix</a>.<a class="code" href="../../d0/d50/structast__bridge__softmix.html#ae0ffa389d55fc0dad4678b948a822add">video_mode</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#ac651801cf270dd2ba5cb81ec5c786308">mode</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   <span class="keywordflow">if</span> (snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a1b93f1ad25034993f7eb103a0322562e">video_mode</a> == <a class="code" href="../../d4/d56/bridge_8h.html#ab388dac5f5c172d7f03c54487afac906a1e27ac207e54a30dfdabc463bd18d43c">AST_BRIDGE_VIDEO_MODE_SINGLE_SRC</a></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      &amp;&amp; bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a1792ee6e2f718b197f668a8b7b16d357">softmix</a>.<a class="code" href="../../d0/d50/structast__bridge__softmix.html#ae0ffa389d55fc0dad4678b948a822add">video_mode</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a4815762cb716d9c02daf0caadd5a41db">mode_data</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a3d1942099e12eaade08dc9ac3fee6c23">single_src_data</a>.<a class="code" href="../../dd/dbe/structast__bridge__video__single__src__data.html#af17523bbee86cea3e7c6959258436728">chan_vsrc</a>) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(snapshot, video_source_id,</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a1792ee6e2f718b197f668a8b7b16d357">softmix</a>.<a class="code" href="../../d0/d50/structast__bridge__softmix.html#ae0ffa389d55fc0dad4678b948a822add">video_mode</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a4815762cb716d9c02daf0caadd5a41db">mode_data</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a3d1942099e12eaade08dc9ac3fee6c23">single_src_data</a>.<a class="code" href="../../dd/dbe/structast__bridge__video__single__src__data.html#af17523bbee86cea3e7c6959258436728">chan_vsrc</a>));</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a1b93f1ad25034993f7eb103a0322562e">video_mode</a> == <a class="code" href="../../d4/d56/bridge_8h.html#ab388dac5f5c172d7f03c54487afac906a48458f43dd7ef0372614e5848f9226e0">AST_BRIDGE_VIDEO_MODE_TALKER_SRC</a></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      &amp;&amp; bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a1792ee6e2f718b197f668a8b7b16d357">softmix</a>.<a class="code" href="../../d0/d50/structast__bridge__softmix.html#ae0ffa389d55fc0dad4678b948a822add">video_mode</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a4815762cb716d9c02daf0caadd5a41db">mode_data</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a7325622e00e4be7c0370401933bb75e5">talker_src_data</a>.<a class="code" href="../../d0/dad/structast__bridge__video__talker__src__data.html#af17523bbee86cea3e7c6959258436728">chan_vsrc</a>) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(snapshot, video_source_id,</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a1792ee6e2f718b197f668a8b7b16d357">softmix</a>.<a class="code" href="../../d0/d50/structast__bridge__softmix.html#ae0ffa389d55fc0dad4678b948a822add">video_mode</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a4815762cb716d9c02daf0caadd5a41db">mode_data</a>.<a class="code" href="../../dc/d4a/structast__bridge__video__mode.html#a7325622e00e4be7c0370401933bb75e5">talker_src_data</a>.<a class="code" href="../../d0/dad/structast__bridge__video__talker__src__data.html#af17523bbee86cea3e7c6959258436728">chan_vsrc</a>));</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   <span class="keywordflow">return</span> snapshot;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div><div class="ttc" id="structast__bridge__snapshot_html_adbc20a2fd50bb1376a3c6094e96a31e3"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">ast_bridge_snapshot::channels</a></div><div class="ttdeci">struct ao2_container * channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00339">bridge.h:339</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a298ce3dfc9b5b8a8351e8ed103aa7e5c"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">ast_bridge_snapshot::creationtime</a></div><div class="ttdeci">struct timeval creationtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00351">bridge.h:351</a></div></div>
<div class="ttc" id="structast__bridge_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00377">bridge.h:377</a></div></div>
<div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a449169f26afbc412fc537b51a9cd0e16"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a449169f26afbc412fc537b51a9cd0e16">SNAPSHOT_CHANNELS_BUCKETS</a></div><div class="ttdeci">#define SNAPSHOT_CHANNELS_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00044">stasis_bridges.c:44</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="structast__bridge_html_a4d514eabb35f71dee132ef1df1c6cdbb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a4d514eabb35f71dee132ef1df1c6cdbb">ast_bridge::num_active</a></div><div class="ttdeci">unsigned int num_active</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00383">bridge.h:383</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structast__bridge__methods_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d2/dd3/structast__bridge__methods.html#a8f8f80d37794cde9472343e4487ba3eb">ast_bridge_methods::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00267">bridge.h:267</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="structast__bridge__softmix_html_ae0ffa389d55fc0dad4678b948a822add"><div class="ttname"><a href="../../d0/d50/structast__bridge__softmix.html#ae0ffa389d55fc0dad4678b948a822add">ast_bridge_softmix::video_mode</a></div><div class="ttdeci">struct ast_bridge_video_mode video_mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00287">bridge.h:287</a></div></div>
<div class="ttc" id="structast__bridge_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#ace9168767fc3707cf5f0a7d049682ba3">ast_bridge::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="structast__bridge__technology_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d1/d04/structast__bridge__technology.html#a8f8f80d37794cde9472343e4487ba3eb">ast_bridge_technology::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00063">bridge_technology.h:63</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444af791f0352f324b81c3eb1adcedc31364">AST_BRIDGE_FLAG_INVISIBLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00057">bridge_features.h:57</a></div></div>
<div class="ttc" id="structast__bridge__video__single__src__data_html_af17523bbee86cea3e7c6959258436728"><div class="ttname"><a href="../../dd/dbe/structast__bridge__video__single__src__data.html#af17523bbee86cea3e7c6959258436728">ast_bridge_video_single_src_data::chan_vsrc</a></div><div class="ttdeci">struct ast_channel * chan_vsrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00116">bridge.h:116</a></div></div>
<div class="ttc" id="strings_8h_html_a77f7edf078454c39f51bae4bb400e764"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a77f7edf078454c39f51bae4bb400e764">ast_str_container_alloc</a></div><div class="ttdeci">#define ast_str_container_alloc(buckets)</div><div class="ttdoc">Allocates a hash container for bare strings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01312">strings.h:1312</a></div></div>
<div class="ttc" id="bridge_8h_html_ab388dac5f5c172d7f03c54487afac906a1e27ac207e54a30dfdabc463bd18d43c"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab388dac5f5c172d7f03c54487afac906a1e27ac207e54a30dfdabc463bd18d43c">AST_BRIDGE_VIDEO_MODE_SINGLE_SRC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00102">bridge.h:102</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge_html_a1792ee6e2f718b197f668a8b7b16d357"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a1792ee6e2f718b197f668a8b7b16d357">ast_bridge::softmix</a></div><div class="ttdeci">struct ast_bridge_softmix softmix</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00375">bridge.h:375</a></div></div>
<div class="ttc" id="structast__bridge__video__mode_html_a4815762cb716d9c02daf0caadd5a41db"><div class="ttname"><a href="../../dc/d4a/structast__bridge__video__mode.html#a4815762cb716d9c02daf0caadd5a41db">ast_bridge_video_mode::mode_data</a></div><div class="ttdeci">union ast_bridge_video_mode::@227 mode_data</div></div>
<div class="ttc" id="stasis__bridges_8c_html_ab3df470f4762c140fe75e2eb48d0ce46"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#ab3df470f4762c140fe75e2eb48d0ce46">bridge_snapshot_dtor</a></div><div class="ttdeci">static void bridge_snapshot_dtor(void *obj)</div><div class="ttdoc">Destructor for bridge snapshots. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00194">stasis_bridges.c:194</a></div></div>
<div class="ttc" id="structast__bridge_html_aabb60a181a9e98fb31f8666fb4f5d0b8"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">ast_bridge::technology</a></div><div class="ttdeci">struct ast_bridge_technology * technology</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00363">bridge.h:363</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a04532f57b1eebac73f24b2a02dab161f"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a04532f57b1eebac73f24b2a02dab161f">ast_bridge_snapshot::capabilities</a></div><div class="ttdeci">uint32_t capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00343">bridge.h:343</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="structast__bridge__video__mode_html_a7325622e00e4be7c0370401933bb75e5"><div class="ttname"><a href="../../dc/d4a/structast__bridge__video__mode.html#a7325622e00e4be7c0370401933bb75e5">ast_bridge_video_mode::talker_src_data</a></div><div class="ttdeci">struct ast_bridge_video_talker_src_data talker_src_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00164">bridge.h:164</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__bridge__video__mode_html_a3d1942099e12eaade08dc9ac3fee6c23"><div class="ttname"><a href="../../dc/d4a/structast__bridge__video__mode.html#a3d1942099e12eaade08dc9ac3fee6c23">ast_bridge_video_mode::single_src_data</a></div><div class="ttdeci">struct ast_bridge_video_single_src_data single_src_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00163">bridge.h:163</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__bridge_html_a2f11ecc852af02fffecf1411013f0873"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a2f11ecc852af02fffecf1411013f0873">ast_bridge::v_table</a></div><div class="ttdeci">const struct ast_bridge_methods * v_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00359">bridge.h:359</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a1b93f1ad25034993f7eb103a0322562e"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a1b93f1ad25034993f7eb103a0322562e">ast_bridge_snapshot::video_mode</a></div><div class="ttdeci">enum ast_bridge_video_mode_type video_mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00349">bridge.h:349</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structast__bridge_html_a298ce3dfc9b5b8a8351e8ed103aa7e5c"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">ast_bridge::creationtime</a></div><div class="ttdeci">struct timeval creationtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00416">bridge.h:416</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge_snapshot::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00341">bridge.h:341</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a97e3bedeadf444995deb6fab68f57e21"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a97e3bedeadf444995deb6fab68f57e21">ast_bridge_snapshot::num_channels</a></div><div class="ttdeci">unsigned int num_channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00345">bridge.h:345</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a4d514eabb35f71dee132ef1df1c6cdbb"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a4d514eabb35f71dee132ef1df1c6cdbb">ast_bridge_snapshot::num_active</a></div><div class="ttdeci">unsigned int num_active</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00347">bridge.h:347</a></div></div>
<div class="ttc" id="structast__bridge_html_a77542a877d8ed62331c5b3b6aa3e87a7"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">ast_bridge::channels</a></div><div class="ttdeci">struct ast_bridge_channels_list channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00371">bridge.h:371</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="bridge_8h_html_ab388dac5f5c172d7f03c54487afac906a48458f43dd7ef0372614e5848f9226e0"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab388dac5f5c172d7f03c54487afac906a48458f43dd7ef0372614e5848f9226e0">AST_BRIDGE_VIDEO_MODE_TALKER_SRC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00105">bridge.h:105</a></div></div>
<div class="ttc" id="structast__bridge__video__talker__src__data_html_af17523bbee86cea3e7c6959258436728"><div class="ttname"><a href="../../d0/dad/structast__bridge__video__talker__src__data.html#af17523bbee86cea3e7c6959258436728">ast_bridge_video_talker_src_data::chan_vsrc</a></div><div class="ttdeci">struct ast_channel * chan_vsrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00123">bridge.h:123</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structast__bridge_html_a6e62c2774ca18846e6e45057fb8b7a22"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a6e62c2774ca18846e6e45057fb8b7a22">ast_bridge::creator</a></div><div class="ttdeci">const ast_string_field creator</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="structast__bridge__technology_html_a04532f57b1eebac73f24b2a02dab161f"><div class="ttname"><a href="../../d1/d04/structast__bridge__technology.html#a04532f57b1eebac73f24b2a02dab161f">ast_bridge_technology::capabilities</a></div><div class="ttdeci">uint32_t capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00066">bridge_technology.h:66</a></div></div>
<div class="ttc" id="structast__bridge_html_a97e3bedeadf444995deb6fab68f57e21"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">ast_bridge::num_channels</a></div><div class="ttdeci">unsigned int num_channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00381">bridge.h:381</a></div></div>
<div class="ttc" id="structast__bridge__video__mode_html_ac651801cf270dd2ba5cb81ec5c786308"><div class="ttname"><a href="../../dc/d4a/structast__bridge__video__mode.html#ac651801cf270dd2ba5cb81ec5c786308">ast_bridge_video_mode::mode</a></div><div class="ttdeci">enum ast_bridge_video_mode_type mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00160">bridge.h:160</a></div></div>
<div class="ttc" id="strings_8h_html_ae2861c04a240bbc90f32ade1e1261afa"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ae2861c04a240bbc90f32ade1e1261afa">ast_str_container_add</a></div><div class="ttdeci">int ast_str_container_add(struct ao2_container *str_container, const char *add)</div><div class="ttdoc">Adds a string to a string container allocated by ast_str_container_alloc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d48/strings_8c_source.html#l00206">strings.c:206</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76837dd4c259276cc59d163e4bc2a3b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76837dd4c259276cc59d163e4bc2a3b5">&#9670;&nbsp;</a></span>ast_bridge_snapshot_to_json()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a>* ast_bridge_snapshot_to_json </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *&#160;</td>
          <td class="paramname"><em>snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *&#160;</td>
          <td class="paramname"><em>sanitize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a JSON object from a <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">snapshot</td><td>The bridge snapshot to convert to JSON </td></tr>
    <tr><td class="paramname">sanitize</td><td>The message sanitizer to use on the snapshot</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON object representing bridge snapshot. </dd>
<dd>
<code>NULL</code> on error </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00712">712</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d56/bridge_8h_source.html#l00100">AST_BRIDGE_VIDEO_MODE_NONE</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04018">ast_bridge_video_mode_to_string()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00404">ast_json_object_set()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00268">ast_json_string_create()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00649">ast_json_timeval()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00343">ast_bridge_snapshot::capabilities</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00703">capability2str()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00339">ast_bridge_snapshot::channels</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00673">container_to_json_array()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00351">ast_bridge_snapshot::creationtime</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::creator</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::subclass</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::technology</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::uniqueid</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00349">ast_bridge_snapshot::video_mode</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00336">ast_bridge_snapshot::video_source_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00925">ast_ari_bridges_create()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00954">ast_ari_bridges_create_with_id()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00856">ast_ari_bridges_get()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00885">ast_ari_bridges_list()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00438">ast_bridge_merge_message_to_json()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00967">attended_transfer_to_json()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00799">blind_transfer_to_json()</a>, <a class="el" href="../../dd/d92/confbridge__manager_8c_source.html#l00311">bridge_to_json()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02045">multi_user_event_to_json()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00629">simple_bridge_channel_event()</a>, and <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00666">simple_bridge_event()</a>.</p>
<div class="fragment"><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;{</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_bridge;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_channels;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   <span class="keywordflow">if</span> (snapshot == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   }</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   json_channels = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a4f5816df674dfa9b3143bf3d325c60dc">container_to_json_array</a>(snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a>, sanitize);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <span class="keywordflow">if</span> (!json_channels) {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   json_bridge = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: s, s: s, s: s, s: s, s: s, s: o, s: o, s: s}&quot;</span>,</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <span class="stringliteral">&quot;id&quot;</span>, snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>,</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="stringliteral">&quot;technology&quot;</span>, snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#ace6976ffaf8aa0738aa7e01b0e98c04f">technology</a>,</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="stringliteral">&quot;bridge_type&quot;</span>, <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a46bdf1ed4616859d85488f151cd61a6f">capability2str</a>(snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a04532f57b1eebac73f24b2a02dab161f">capabilities</a>),</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <span class="stringliteral">&quot;bridge_class&quot;</span>, snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#aed90bb628ee273a4b27b778b5b0d8ec2">subclass</a>,</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="stringliteral">&quot;creator&quot;</span>, snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a6e62c2774ca18846e6e45057fb8b7a22">creator</a>,</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="stringliteral">&quot;name&quot;</span>, snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <span class="stringliteral">&quot;channels&quot;</span>, json_channels,</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      <span class="stringliteral">&quot;creationtime&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a>(snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="stringliteral">&quot;video_mode&quot;</span>, <a class="code" href="../../d4/d56/bridge_8h.html#a2a2b1e82e019faba42fa278f7a69a699">ast_bridge_video_mode_to_string</a>(snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a1b93f1ad25034993f7eb103a0322562e">video_mode</a>));</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   <span class="keywordflow">if</span> (!json_bridge) {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   }</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   <span class="keywordflow">if</span> (snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a1b93f1ad25034993f7eb103a0322562e">video_mode</a> != <a class="code" href="../../d4/d56/bridge_8h.html#ab388dac5f5c172d7f03c54487afac906a51708384777e8722fae674ea8db89f54">AST_BRIDGE_VIDEO_MODE_NONE</a></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a54eb8725951c786429e4b86d7159309e">video_source_id</a>)) {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(json_bridge, <span class="stringliteral">&quot;video_source_id&quot;</span>,</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;         <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(snapshot-&gt;<a class="code" href="../../d0/d99/structast__bridge__snapshot.html#a54eb8725951c786429e4b86d7159309e">video_source_id</a>));</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <span class="keywordflow">return</span> json_bridge;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;}</div><div class="ttc" id="structast__bridge__snapshot_html_adbc20a2fd50bb1376a3c6094e96a31e3"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#adbc20a2fd50bb1376a3c6094e96a31e3">ast_bridge_snapshot::channels</a></div><div class="ttdeci">struct ao2_container * channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00339">bridge.h:339</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a298ce3dfc9b5b8a8351e8ed103aa7e5c"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">ast_bridge_snapshot::creationtime</a></div><div class="ttdeci">struct timeval creationtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00351">bridge.h:351</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a54eb8725951c786429e4b86d7159309e"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a54eb8725951c786429e4b86d7159309e">ast_bridge_snapshot::video_source_id</a></div><div class="ttdeci">const ast_string_field video_source_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a6e62c2774ca18846e6e45057fb8b7a22"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a6e62c2774ca18846e6e45057fb8b7a22">ast_bridge_snapshot::creator</a></div><div class="ttdeci">const ast_string_field creator</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="json_8h_html_abc8b563c172cfaffa2b555195990f729"><div class="ttname"><a href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a></div><div class="ttdeci">int ast_json_object_set(struct ast_json *object, const char *key, struct ast_json *value)</div><div class="ttdoc">Set a field in a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00404">json.c:404</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a04532f57b1eebac73f24b2a02dab161f"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a04532f57b1eebac73f24b2a02dab161f">ast_bridge_snapshot::capabilities</a></div><div class="ttdeci">uint32_t capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00343">bridge.h:343</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_ace6976ffaf8aa0738aa7e01b0e98c04f"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#ace6976ffaf8aa0738aa7e01b0e98c04f">ast_bridge_snapshot::technology</a></div><div class="ttdeci">const ast_string_field technology</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="json_8h_html_adc52f8d76b7fdd0c8d12987981fd5bf5"><div class="ttname"><a href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a></div><div class="ttdeci">struct ast_json * ast_json_string_create(const char *value)</div><div class="ttdoc">Construct a JSON string from value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00268">json.c:268</a></div></div>
<div class="ttc" id="bridge_8h_html_a2a2b1e82e019faba42fa278f7a69a699"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a2a2b1e82e019faba42fa278f7a69a699">ast_bridge_video_mode_to_string</a></div><div class="ttdeci">const char * ast_bridge_video_mode_to_string(enum ast_bridge_video_mode_type video_mode)</div><div class="ttdoc">Converts an enum representation of a bridge video mode to string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l04018">bridge.c:4018</a></div></div>
<div class="ttc" id="json_8h_html_a2b7c72e2e3ab2634d8a4f8b708440d95"><div class="ttname"><a href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a></div><div class="ttdeci">struct ast_json * ast_json_timeval(const struct timeval tv, const char *zone)</div><div class="ttdoc">Construct a timeval as JSON. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00649">json.c:649</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#ace9168767fc3707cf5f0a7d049682ba3">ast_bridge_snapshot::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a1b93f1ad25034993f7eb103a0322562e"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a1b93f1ad25034993f7eb103a0322562e">ast_bridge_snapshot::video_mode</a></div><div class="ttdeci">enum ast_bridge_video_mode_type video_mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00349">bridge.h:349</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a4f5816df674dfa9b3143bf3d325c60dc"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a4f5816df674dfa9b3143bf3d325c60dc">container_to_json_array</a></div><div class="ttdeci">static struct ast_json * container_to_json_array(struct ao2_container *items, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00673">stasis_bridges.c:673</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#a753c7b39e3284d771f13f513b003d033">ast_bridge_snapshot::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="bridge_8h_html_ab388dac5f5c172d7f03c54487afac906a51708384777e8722fae674ea8db89f54"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab388dac5f5c172d7f03c54487afac906a51708384777e8722fae674ea8db89f54">AST_BRIDGE_VIDEO_MODE_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00100">bridge.h:100</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structast__bridge__snapshot_html_aed90bb628ee273a4b27b778b5b0d8ec2"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html#aed90bb628ee273a4b27b778b5b0d8ec2">ast_bridge_snapshot::subclass</a></div><div class="ttdeci">const ast_string_field subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00336">bridge.h:336</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a46bdf1ed4616859d85488f151cd61a6f"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a46bdf1ed4616859d85488f151cd61a6f">capability2str</a></div><div class="ttdeci">static const char * capability2str(uint32_t capabilities)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00703">stasis_bridges.c:703</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a93724fb58fab92a0a749535e8c8534d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93724fb58fab92a0a749535e8c8534d2">&#9670;&nbsp;</a></span>ast_bridge_snapshot_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a>* ast_bridge_snapshot_type </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Message type for <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a>. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Message</td><td>type for <a class="el" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00915">app_create()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00350">ast_bridge_publish_state()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01407">ast_stasis_bridging_init()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00381">bridge_publish_state_from_blob()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00319">bridge_topics_destroy()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00681">manager_bridging_init()</a>, and <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01392">stasis_bridging_cleanup()</a>.</p>

</div>
</div>
<a id="a7bdfd8273bb885f7a65f6f5d8188c915"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bdfd8273bb885f7a65f6f5d8188c915">&#9670;&nbsp;</a></span>ast_bridge_topic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* ast_bridge_topic </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A topic which publishes the events for a particular bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12 If the given <em>bridge</em> is <code>NULL</code>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#abf64fa441014314244648caa6c8ab80b" title="A topic which publishes the events for all bridges. ">ast_bridge_topic_all()</a> is returned.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>Bridge for which to get a topic or <code>NULL</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Topic</td><td>for bridge's events. </td></tr>
    <tr><td class="paramname"><a class="el" href="../../dc/d4e/stasis__bridges_8h.html#abf64fa441014314244648caa6c8ab80b" title="A topic which publishes the events for all bridges. ">ast_bridge_topic_all()</a></td><td>if <em>bridge</em> is <code>NULL</code>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00184">184</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00179">ast_bridge_topic_all()</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00367">ast_bridge::topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00407">ari_bridges_play_new()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00634">ast_ari_bridges_record()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00582">ast_bridge_publish_enter()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00611">ast_bridge_publish_leave()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00350">ast_bridge_publish_state()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00760">bridge_base_init()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00381">bridge_publish_state_from_blob()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00319">bridge_topics_destroy()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00164">forwards_create_bridge()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00585">send_conf_stasis()</a>, and <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00622">send_conf_stasis_snapshots()</a>.</p>
<div class="fragment"><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;{</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a>();</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   <span class="keywordflow">return</span> bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a136460a7868b48ef576c0fa505ef96db">topic</a>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div><div class="ttc" id="stasis__bridges_8c_html_abf64fa441014314244648caa6c8ab80b"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#abf64fa441014314244648caa6c8ab80b">ast_bridge_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic_all(void)</div><div class="ttdoc">A topic which publishes the events for all bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00179">stasis_bridges.c:179</a></div></div>
<div class="ttc" id="structast__bridge_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a136460a7868b48ef576c0fa505ef96db">ast_bridge::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00367">bridge.h:367</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abf64fa441014314244648caa6c8ab80b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf64fa441014314244648caa6c8ab80b">&#9670;&nbsp;</a></span>ast_bridge_topic_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* ast_bridge_topic_all </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A topic which publishes the events for all bridges. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Topic</td><td>for all bridge events. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00179">179</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00158">bridge_topic_all</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00915">app_create()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01346">ast_bridge_publish_attended_transfer()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00953">ast_bridge_publish_blind_transfer()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00460">ast_bridge_publish_merge()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00184">ast_bridge_topic()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04314">create_subscriptions()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00681">manager_bridging_init()</a>, <a class="el" href="../../dd/d92/confbridge__manager_8c_source.html#l00721">manager_confbridge_init()</a>, <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l00625">refer_blind_callback()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06514">setup_stasis_subs()</a>.</p>
<div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div><div class="ttc" id="stasis__bridges_8c_html_a729647b6b24abb62561ee17d87d73f43"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a></div><div class="ttdeci">static struct stasis_topic * bridge_topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00158">stasis_bridges.c:158</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8bd3a6c07bd2064a82a7c27091ba0fce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bd3a6c07bd2064a82a7c27091ba0fce">&#9670;&nbsp;</a></span>ast_channel_entered_bridge_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a>* ast_channel_entered_bridge_type </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Message type for <a class="el" href="../../d4/d84/structchannel.html">channel</a> enter bridge blob messages. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Message</td><td>type for <a class="el" href="../../d4/d84/structchannel.html">channel</a> enter bridge blob messages. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00582">ast_bridge_publish_enter()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01407">ast_stasis_bridging_init()</a>, <a class="el" href="../../da/dc9/cel_8c_source.html#l01500">create_routes()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00681">manager_bridging_init()</a>, <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l00625">refer_blind_callback()</a>, <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l00181">refer_progress_bridge()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06514">setup_stasis_subs()</a>, and <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01392">stasis_bridging_cleanup()</a>.</p>

</div>
</div>
<a id="a4cf969b75b455dc9301ede7c7830d4b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cf969b75b455dc9301ede7c7830d4b6">&#9670;&nbsp;</a></span>ast_channel_left_bridge_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a>* ast_channel_left_bridge_type </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Message type for <a class="el" href="../../d4/d84/structchannel.html">channel</a> leave bridge blob messages. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Message</td><td>type for <a class="el" href="../../d4/d84/structchannel.html">channel</a> leave bridge blob messages. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00611">ast_bridge_publish_leave()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01407">ast_stasis_bridging_init()</a>, <a class="el" href="../../da/dc9/cel_8c_source.html#l01500">create_routes()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00681">manager_bridging_init()</a>, and <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01392">stasis_bridging_cleanup()</a>.</p>

</div>
</div>
<a id="ae301dc233829a0e07fd9747738636a72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae301dc233829a0e07fd9747738636a72">&#9670;&nbsp;</a></span>ast_stasis_bridging_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stasis_bridging_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01407">1407</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type()</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00019">ast_register_cleanup()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01392">stasis_bridging_cleanup()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01501">STASIS_MESSAGE_TYPE_INIT</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01833">stasis_topic_pool_create()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l05605">ast_bridging_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;{</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a23f5b0736a7524a008638cb19aac20d1">stasis_bridging_cleanup</a>);</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a> = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;bridge:all&quot;</span>);</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a>) {</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;   }</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;   <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a> = <a class="code" href="../../dd/d79/stasis_8h.html#aeb9a69946c2be89329630328f125330d">stasis_topic_pool_create</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a>);</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a>) {</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;   }</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   res |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a>);</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   res |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type</a>);</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;   res |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type</a>);</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;   res |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type</a>);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;   res |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type</a>);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;   res |= <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type</a>);</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_a93724fb58fab92a0a749535e8c8534d2"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a></div><div class="ttdeci">struct stasis_message_type * ast_bridge_snapshot_type(void)</div><div class="ttdoc">Message type for ast_bridge_snapshot. </div></div>
<div class="ttc" id="stasis__bridges_8h_html_a05b1c5a7666e29a9ec982e3c9d6c1b85"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a05b1c5a7666e29a9ec982e3c9d6c1b85">ast_blind_transfer_type</a></div><div class="ttdeci">struct stasis_message_type * ast_blind_transfer_type(void)</div><div class="ttdoc">Message type for ast_blind_transfer_message. </div></div>
<div class="ttc" id="stasis__bridges_8h_html_a8bd3a6c07bd2064a82a7c27091ba0fce"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a8bd3a6c07bd2064a82a7c27091ba0fce">ast_channel_entered_bridge_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_entered_bridge_type(void)</div><div class="ttdoc">Message type for channel enter bridge blob messages. </div></div>
<div class="ttc" id="stasis_8h_html_a70cd046d8e3fd50de5c51aecb2830d2a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_INIT(name)</div><div class="ttdoc">Boiler-plate messaging macro for initializing message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01501">stasis.h:1501</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a4cf969b75b455dc9301ede7c7830d4b6"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a4cf969b75b455dc9301ede7c7830d4b6">ast_channel_left_bridge_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_left_bridge_type(void)</div><div class="ttdoc">Message type for channel leave bridge blob messages. </div></div>
<div class="ttc" id="stasis_8h_html_aeb9a69946c2be89329630328f125330d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aeb9a69946c2be89329630328f125330d">stasis_topic_pool_create</a></div><div class="ttdeci">struct stasis_topic_pool * stasis_topic_pool_create(struct stasis_topic *pooled_topic)</div><div class="ttdoc">Create a topic pool that routes messages from dynamically generated topics to the given topic...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01833">stasis.c:1833</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a20be59047a504f4c5dca2289beef7963"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a20be59047a504f4c5dca2289beef7963">ast_bridge_merge_message_type</a></div><div class="ttdeci">struct stasis_message_type * ast_bridge_merge_message_type(void)</div><div class="ttdoc">Message type for ast_bridge_merge_message. </div></div>
<div class="ttc" id="asterisk_8h_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00019">clicompat.c:19</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a20df01df18ba86528d57c317aef55785"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a></div><div class="ttdeci">static struct stasis_topic_pool * bridge_topic_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00159">stasis_bridges.c:159</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a729647b6b24abb62561ee17d87d73f43"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a729647b6b24abb62561ee17d87d73f43">bridge_topic_all</a></div><div class="ttdeci">static struct stasis_topic * bridge_topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00158">stasis_bridges.c:158</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a263062ed75918c257f5401617389bdd8"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a263062ed75918c257f5401617389bdd8">ast_attended_transfer_type</a></div><div class="ttdeci">struct stasis_message_type * ast_attended_transfer_type(void)</div><div class="ttdoc">Message type for ast_attended_transfer_message. </div></div>
<div class="ttc" id="stasis__bridges_8c_html_a23f5b0736a7524a008638cb19aac20d1"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a23f5b0736a7524a008638cb19aac20d1">stasis_bridging_cleanup</a></div><div class="ttdeci">static void stasis_bridging_cleanup(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l01392">stasis_bridges.c:1392</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae533d4edc97a21476c3f0600a6665eb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae533d4edc97a21476c3f0600a6665eb1">&#9670;&nbsp;</a></span>bridge_topics_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bridge_topics_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00319">319</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00202">ast_bridge_snapshot_create()</a>, <a class="el" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00184">ast_bridge_topic()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00275">bridge_snapshot_update_create()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00414">ast_bridge::current_snapshot</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00628">stasis_topic_name()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01864">stasis_topic_pool_delete_topic()</a>, and <a class="el" href="../../d0/d89/codec__g726_8c_source.html#l00367">update()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l00658">destroy_bridge()</a>.</p>
<div class="fragment"><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;{</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(bridge != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="keywordflow">if</span> (!bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a> = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a>(bridge);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">if</span> (!bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;   }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   update = <a class="code" href="../../da/d0f/stasis__bridges_8c.html#add80c15db9febf8c5c7aef86e25f9853">bridge_snapshot_update_create</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">current_snapshot</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="keywordflow">if</span> (!update) {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a>(), update);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(update, -1);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a>(bridge), msg);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a1dfabff07a77d235b2b16d2b564f5c4b">stasis_topic_pool_delete_topic</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a>, <a class="code" href="../../dd/d79/stasis_8h.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a>(bridge)));</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_a93724fb58fab92a0a749535e8c8534d2"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a93724fb58fab92a0a749535e8c8534d2">ast_bridge_snapshot_type</a></div><div class="ttdeci">struct stasis_message_type * ast_bridge_snapshot_type(void)</div><div class="ttdoc">Message type for ast_bridge_snapshot. </div></div>
<div class="ttc" id="codec__g726_8c_html_a8c58a1d1fd9436ff5145385d3ef7a430"><div class="ttname"><a href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a></div><div class="ttdeci">static void update(int code_size, int y, int wi, int fi, int dq, int sr, int dqsez, struct g726_state *state_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/codec__g726_8c_source.html#l00367">codec_g726.c:367</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__snapshot__update_html"><div class="ttname"><a href="../../d2/d33/structast__bridge__snapshot__update.html">ast_bridge_snapshot_update</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00034">stasis_bridges.h:34</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_add80c15db9febf8c5c7aef86e25f9853"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#add80c15db9febf8c5c7aef86e25f9853">bridge_snapshot_update_create</a></div><div class="ttdeci">static struct ast_bridge_snapshot_update * bridge_snapshot_update_create(struct ast_bridge_snapshot *old, struct ast_bridge_snapshot *new)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00275">stasis_bridges.c:275</a></div></div>
<div class="ttc" id="stasis_8h_html_a1dfabff07a77d235b2b16d2b564f5c4b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a1dfabff07a77d235b2b16d2b564f5c4b">stasis_topic_pool_delete_topic</a></div><div class="ttdeci">void stasis_topic_pool_delete_topic(struct stasis_topic_pool *pool, const char *topic_name)</div><div class="ttdoc">Delete a topic from the topic pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01864">stasis.c:1864</a></div></div>
<div class="ttc" id="structast__bridge_html_a7dbe1cd4b391636e49491eafab9095e0"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a7dbe1cd4b391636e49491eafab9095e0">ast_bridge::current_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * current_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00414">bridge.h:414</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a20df01df18ba86528d57c317aef55785"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a></div><div class="ttdeci">static struct stasis_topic_pool * bridge_topic_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00159">stasis_bridges.c:159</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="stasis_8h_html_af23deee342575033bc73311b1215d886"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a></div><div class="ttdeci">const char * stasis_topic_name(const struct stasis_topic *topic)</div><div class="ttdoc">Return the name of a topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00628">stasis.c:628</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a95241898553c1d42ea46964b277433ad"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a></div><div class="ttdeci">struct ast_bridge_snapshot * ast_bridge_snapshot_create(struct ast_bridge *bridge)</div><div class="ttdoc">Generate a snapshot of the bridge state. This is an ao2 object, so ao2_cleanup() to deallocate...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00202">stasis_bridges.c:202</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a7bdfd8273bb885f7a65f6f5d8188c915"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic(struct ast_bridge *bridge)</div><div class="ttdoc">A topic which publishes the events for a particular bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00184">stasis_bridges.c:184</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a47e2e9503f7beb080c820edc385d0ca6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47e2e9503f7beb080c820edc385d0ca6">&#9670;&nbsp;</a></span>bridge_topics_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bridge_topics_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00295">295</a> of file <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html">stasis_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00269">ast_asprintf</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01884">stasis_topic_pool_get_topic()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00367">ast_bridge::topic</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l00760">bridge_base_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   <span class="keywordtype">char</span> *topic_name;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>)) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Bridge id initialization required\n&quot;</span>);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   ret = <a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(&amp;topic_name, <span class="stringliteral">&quot;bridge:%s&quot;</span>, bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a1ee1df597af46f3b489cce002b604a89">stasis_topic_pool_get_topic</a>(<a class="code" href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a>, topic_name);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(topic_name);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="keywordflow">if</span> (!bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a136460a7868b48ef576c0fa505ef96db">topic</a>) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div><div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="stasis_8h_html_a1ee1df597af46f3b489cce002b604a89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a1ee1df597af46f3b489cce002b604a89">stasis_topic_pool_get_topic</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_pool_get_topic(struct stasis_topic_pool *pool, const char *topic_name)</div><div class="ttdoc">Find or create a topic in the pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01884">stasis.c:1884</a></div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="stasis__bridges_8c_html_a20df01df18ba86528d57c317aef55785"><div class="ttname"><a href="../../da/d0f/stasis__bridges_8c.html#a20df01df18ba86528d57c317aef55785">bridge_topic_pool</a></div><div class="ttdeci">static struct stasis_topic_pool * bridge_topic_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00159">stasis_bridges.c:159</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__bridge_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a136460a7868b48ef576c0fa505ef96db">ast_bridge::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00367">bridge.h:367</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:49 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
