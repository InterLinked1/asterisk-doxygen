<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: func_odbc.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_e878cef7102f6638a560ae32a811d88b.html">funcs</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">func_odbc.c File Reference<div class="ingroups"><a class="el" href="../../d5/db0/group__functions.html">Module: Dial plan functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>ODBC lookups.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d4d/file_8h_source.html">asterisk/file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d96/res__odbc_8h_source.html">asterisk/res_odbc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d8d/res__odbc__transaction_8h_source.html">asterisk/res_odbc_transaction.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html">asterisk/app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d90/strings_8h_source.html">asterisk/strings.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for func_odbc.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d47/func__odbc_8c__incl.png" border="0" usemap="#func__odbc_8c" alt=""/></div>
<map name="func__odbc_8c" id="func__odbc_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="1824,453,1908,480"/>
<area shape="rect" id="node10" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="898,80,1034,107"/>
<area shape="rect" id="node15" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="854,453,985,480"/>
<area shape="rect" id="node19" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="295,304,402,331"/>
<area shape="rect" id="node22" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1779,155,1918,181"/>
<area shape="rect" id="node29" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1301,304,1428,331"/>
<area shape="rect" id="node39" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="1409,80,1520,107"/>
<area shape="rect" id="node44" href="../../de/d96/res__odbc_8h.html" title="ODBC resource manager. " alt="" coords="45,379,191,405"/>
<area shape="rect" id="node48" href="../../dc/d8d/res__odbc__transaction_8h.html" title="asterisk/res_odbc_transaction.h" alt="" coords="3213,80,3439,107"/>
<area shape="rect" id="node49" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="781,229,893,256"/>
<area shape="rect" id="node50" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="3011,379,3113,405"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="1655,528,1810,555"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="1125,603,1263,629"/>
<area shape="rect" id="node9" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="1885,528,2020,555"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="1659,603,1806,629"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1265,752,1408,779"/>
<area shape="rect" id="node11" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="949,379,1063,405"/>
<area shape="rect" id="node12" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1328,677,1441,704"/>
<area shape="rect" id="node14" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="627,453,785,480"/>
<area shape="rect" id="node13" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="913,752,1059,779"/>
<area shape="rect" id="node16" href="../../dc/d7d/threadstorage_8h.html" title="Definitions to aid in the use of thread local storage. " alt="" coords="834,528,1013,555"/>
<area shape="rect" id="node17" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1177,528,1312,555"/>
<area shape="rect" id="node18" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="2383,603,2533,629"/>
<area shape="rect" id="node23" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="1133,304,1277,331"/>
<area shape="rect" id="node24" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="2609,304,2768,331"/>
<area shape="rect" id="node26" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="1687,229,1851,256"/>
<area shape="rect" id="node27" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="2911,304,3037,331"/>
<area shape="rect" id="node28" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="2710,229,2857,256"/>
<area shape="rect" id="node30" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="1875,229,1982,256"/>
<area shape="rect" id="node31" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="2383,528,2533,555"/>
<area shape="rect" id="node32" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="2147,229,2308,256"/>
<area shape="rect" id="node33" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="1719,379,1890,405"/>
<area shape="rect" id="node34" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="2007,229,2123,256"/>
<area shape="rect" id="node36" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="2931,229,3089,256"/>
<area shape="rect" id="node37" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="831,304,957,331"/>
<area shape="rect" id="node38" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="2332,229,2483,256"/>
<area shape="rect" id="node25" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="2755,379,2886,405"/>
<area shape="rect" id="node35" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="1605,304,1767,331"/>
<area shape="rect" id="node40" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="1160,155,1287,181"/>
<area shape="rect" id="node41" href="../../d6/dd7/presencestate_8h.html" title="Presence state management. " alt="" coords="1311,155,1491,181"/>
<area shape="rect" id="node42" href="../../d6/da0/hashtab_8h.html" title="Generic (perhaps overly so) hashtable implementation Hash Table support in Asterisk. " alt="" coords="1389,603,1529,629"/>
<area shape="rect" id="node43" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="680,379,815,405"/>
</map>
</div>
</div>
<p><a href="../../dc/d1d/func__odbc_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dac/structdsn.html">dsn</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dd8/structodbc__datastore.html">odbc_datastore</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7b/structodbc__datastore__row.html">odbc_datastore_row</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da2/structqueries.html">queries</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a906f00621bbc63e1f8507ff99cea6050"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a906f00621bbc63e1f8507ff99cea6050">DEFAULT_SINGLE_DB_CONNECTION</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a906f00621bbc63e1f8507ff99cea6050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6b04c68da39baa5ab2a723c941faa6a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#ae6b04c68da39baa5ab2a723c941faa6a">DSN_BUCKETS</a>&#160;&#160;&#160;37</td></tr>
<tr class="separator:ae6b04c68da39baa5ab2a723c941faa6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a02c41a7a52e0d55f10106677b2dc6412"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412">odbc_option_flags</a> { <a class="el" href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412ac55820e01e32fcd4e770a54dda1d5fe0">OPT_ESCAPECOMMAS</a> = (1 &lt;&lt; 0), 
<a class="el" href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412af5098234cdab46c62b215f04f0d20129">OPT_MULTIROW</a> = (1 &lt;&lt; 1)
 }</td></tr>
<tr class="separator:a02c41a7a52e0d55f10106677b2dc6412"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6114260a1abad1a08ec8aacf4bda8d63"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a6114260a1abad1a08ec8aacf4bda8d63">__init_coldata_buf</a> (void)</td></tr>
<tr class="separator:a6114260a1abad1a08ec8aacf4bda8d63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d0e4794509c52640a4579d385ea5591"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a1d0e4794509c52640a4579d385ea5591">__init_colnames_buf</a> (void)</td></tr>
<tr class="separator:a1d0e4794509c52640a4579d385ea5591"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e80fc54bebd4aa46f21684e2be14da4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a6e80fc54bebd4aa46f21684e2be14da4">__init_sql2_buf</a> (void)</td></tr>
<tr class="separator:a6e80fc54bebd4aa46f21684e2be14da4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ff160eb8cc768ef928c90bb61ded670"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a2ff160eb8cc768ef928c90bb61ded670">__init_sql_buf</a> (void)</td></tr>
<tr class="separator:a2ff160eb8cc768ef928c90bb61ded670"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afca2fae79f2858c838d31f7930407428"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#afca2fae79f2858c838d31f7930407428">acf_escape</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *cmd, char *data, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="separator:afca2fae79f2858c838d31f7930407428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ae23d5288c3a6f01163d774ce6b69d0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a6ae23d5288c3a6f01163d774ce6b69d0">acf_fetch</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *cmd, char *data, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="separator:a6ae23d5288c3a6f01163d774ce6b69d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a8e88245feee2b99a8ce4a0cb65eee9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a3a8e88245feee2b99a8ce4a0cb65eee9">acf_odbc_read</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *cmd, char *s, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="separator:a3a8e88245feee2b99a8ce4a0cb65eee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a261824f44d12c5211aca01989c2531a2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a261824f44d12c5211aca01989c2531a2">acf_odbc_write</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *cmd, char *s, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="separator:a261824f44d12c5211aca01989c2531a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25c0782a60e9e01a562cc5b740d8058f"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a25c0782a60e9e01a562cc5b740d8058f">cli_odbc_read</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a25c0782a60e9e01a562cc5b740d8058f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ff4dea7552e88829b2f9073c05873cf"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a3ff4dea7552e88829b2f9073c05873cf">cli_odbc_write</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a3ff4dea7552e88829b2f9073c05873cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e8c9a250077bb3c3b22e1e519f7cc0e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a3e8c9a250077bb3c3b22e1e519f7cc0e">connection_dead</a> (struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *connection)</td></tr>
<tr class="memdesc:a3e8c9a250077bb3c3b22e1e519f7cc0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if the connection has died.  <a href="#a3e8c9a250077bb3c3b22e1e519f7cc0e">More...</a><br /></td></tr>
<tr class="separator:a3e8c9a250077bb3c3b22e1e519f7cc0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2cb948e148e417c845d8e141280c521"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/dac/structdsn.html">dsn</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#ad2cb948e148e417c845d8e141280c521">create_dsn</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:ad2cb948e148e417c845d8e141280c521"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a DSN and connect to the database.  <a href="#ad2cb948e148e417c845d8e141280c521">More...</a><br /></td></tr>
<tr class="separator:ad2cb948e148e417c845d8e141280c521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7476952b24736168838a547a650ee379"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a7476952b24736168838a547a650ee379">dsn_cmp</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:a7476952b24736168838a547a650ee379"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa54edd137b821e8415007a6ee3d8ac72"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#aa54edd137b821e8415007a6ee3d8ac72">dsn_destructor</a> (void *obj)</td></tr>
<tr class="separator:aa54edd137b821e8415007a6ee3d8ac72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c8adc30a8228a310f2d9a6a784f8aaa"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a9c8adc30a8228a310f2d9a6a784f8aaa">dsn_hash</a> (const void *obj, const int flags)</td></tr>
<tr class="separator:a9c8adc30a8228a310f2d9a6a784f8aaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ecbd59fffc5b180da82e1b0fafd327a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a2ecbd59fffc5b180da82e1b0fafd327a">exec_odbcfinish</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data)</td></tr>
<tr class="separator:a2ecbd59fffc5b180da82e1b0fafd327a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16177a4992e1094843ceea2fc0d58cb0"><td class="memItemLeft" align="right" valign="top">static SQLHSTMT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a16177a4992e1094843ceea2fc0d58cb0">execute</a> (struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj, void *data, int silent)</td></tr>
<tr class="memdesc:a16177a4992e1094843ceea2fc0d58cb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common execution function for SQL queries.  <a href="#a16177a4992e1094843ceea2fc0d58cb0">More...</a><br /></td></tr>
<tr class="separator:a16177a4992e1094843ceea2fc0d58cb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae851c1b4b77ee97a7206608f0f76e4ff"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a> (struct <a class="el" href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a> *query)</td></tr>
<tr class="separator:ae851c1b4b77ee97a7206608f0f76e4ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20915e50f48c37d3d3608bce7e89216c"><td class="memItemLeft" align="right" valign="top">static SQLHSTMT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a20915e50f48c37d3d3608bce7e89216c">generic_execute</a> (struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj, void *data)</td></tr>
<tr class="separator:a20915e50f48c37d3d3608bce7e89216c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad32c59d835fb7b3425fe2bda859406aa"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/dac/structdsn.html">dsn</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#ad32c59d835fb7b3425fe2bda859406aa">get_dsn</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:ad32c59d835fb7b3425fe2bda859406aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a DSN, or create it if it does not exist.  <a href="#ad32c59d835fb7b3425fe2bda859406aa">More...</a><br /></td></tr>
<tr class="separator:ad32c59d835fb7b3425fe2bda859406aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5216ccd295844e99d1b18c34ae6f3f69"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a5216ccd295844e99d1b18c34ae6f3f69">get_odbc_obj</a> (const char *dsn_name, struct <a class="el" href="../../d6/dac/structdsn.html">dsn</a> **<a class="el" href="../../d6/dac/structdsn.html">dsn</a>)</td></tr>
<tr class="memdesc:a5216ccd295844e99d1b18c34ae6f3f69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a DB handle via a DSN or directly.  <a href="#a5216ccd295844e99d1b18c34ae6f3f69">More...</a><br /></td></tr>
<tr class="separator:a5216ccd295844e99d1b18c34ae6f3f69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62ac2150ebc93f5b26e3923f08dc60cc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a62ac2150ebc93f5b26e3923f08dc60cc">init_acf_query</a> (struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> *cfg, char *catg, struct <a class="el" href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a> **query)</td></tr>
<tr class="separator:a62ac2150ebc93f5b26e3923f08dc60cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dddac97996774e1214b012d38f01151"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a7dddac97996774e1214b012d38f01151">odbc_datastore_free</a> (void *data)</td></tr>
<tr class="separator:a7dddac97996774e1214b012d38f01151"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbf2ee4ae8ed50d6156d70c20ec2b02a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> **obj, struct <a class="el" href="../../d6/dac/structdsn.html">dsn</a> **<a class="el" href="../../d6/dac/structdsn.html">dsn</a>)</td></tr>
<tr class="memdesc:afbf2ee4ae8ed50d6156d70c20ec2b02a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release an ODBC obj or a DSN.  <a href="#afbf2ee4ae8ed50d6156d70c20ec2b02a">More...</a><br /></td></tr>
<tr class="separator:afbf2ee4ae8ed50d6156d70c20ec2b02a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1982509765f4870f1f63412a53ea668"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> (void)</td></tr>
<tr class="separator:ad1982509765f4870f1f63412a53ea668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a370e4302420ae9d4cb55618e1803e009"><td class="memItemLeft" align="right" valign="top">static SQLHSTMT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a370e4302420ae9d4cb55618e1803e009">silent_execute</a> (struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj, void *data)</td></tr>
<tr class="separator:a370e4302420ae9d4cb55618e1803e009"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a54af2a9b29d140908cc9dffd0618951b">AST_MODFLAG_DEFAULT</a> , .description = &quot;ODBC lookups&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload, .requires = &quot;res_odbc&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0ecd1e714266380d37d9c7b44169b9a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#aa0ecd1e714266380d37d9c7b44169b9a">app_odbcfinish</a> = &quot;ODBCFinish&quot;</td></tr>
<tr class="separator:aa0ecd1e714266380d37d9c7b44169b9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7f4ac65a8144d36be13e62088f0928c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#ae7f4ac65a8144d36be13e62088f0928c">cli_func_odbc</a> []</td></tr>
<tr class="separator:ae7f4ac65a8144d36be13e62088f0928c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfd73cf12d607b62314cf0e3facf49db"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#abfd73cf12d607b62314cf0e3facf49db">coldata_buf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../dc/d1d/func__odbc_8c.html#a6114260a1abad1a08ec8aacf4bda8d63">__init_coldata_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:abfd73cf12d607b62314cf0e3facf49db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31a8118aa4db27763d1ed7cca6b6fb6d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a31a8118aa4db27763d1ed7cca6b6fb6d">colnames_buf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../dc/d1d/func__odbc_8c.html#a1d0e4794509c52640a4579d385ea5591">__init_colnames_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:a31a8118aa4db27763d1ed7cca6b6fb6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74bb62276efdf39dd94048e007fca05b"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a> = &quot;func_odbc.conf&quot;</td></tr>
<tr class="separator:a74bb62276efdf39dd94048e007fca05b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dde897da05a8d078cd81e7eaae4eb38"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a></td></tr>
<tr class="separator:a0dde897da05a8d078cd81e7eaae4eb38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24515bf2d45e10e62ce9fdabf1bb4640"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a24515bf2d45e10e62ce9fdabf1bb4640">escape_function</a></td></tr>
<tr class="separator:a24515bf2d45e10e62ce9fdabf1bb4640"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61a5debfadee892e1d9e147dc0854bb9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a61a5debfadee892e1d9e147dc0854bb9">fetch_function</a></td></tr>
<tr class="separator:a61a5debfadee892e1d9e147dc0854bb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bc58152d3484e15d524d83c08d1aae1"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a3bc58152d3484e15d524d83c08d1aae1">odbc_info</a></td></tr>
<tr class="separator:a3bc58152d3484e15d524d83c08d1aae1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7d73e6410614d6d2c44b07288af0da5"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/da2/structqueries.html">queries</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#ae7d73e6410614d6d2c44b07288af0da5">queries</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:ae7d73e6410614d6d2c44b07288af0da5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec8a4781c9b4b9e8b0fec9946dec4fb8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#aec8a4781c9b4b9e8b0fec9946dec4fb8">resultcount</a> = 0</td></tr>
<tr class="separator:aec8a4781c9b4b9e8b0fec9946dec4fb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1659cc4d45e715dc6daa43e090e718e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#ae1659cc4d45e715dc6daa43e090e718e">single_db_connection</a></td></tr>
<tr class="separator:ae1659cc4d45e715dc6daa43e090e718e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a154311285bb36392f8065c4dede18cbe"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a154311285bb36392f8065c4dede18cbe">single_db_connection_lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:a154311285bb36392f8065c4dede18cbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ca7d2852c14b9937eca47d3627b4ce2"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#a4ca7d2852c14b9937eca47d3627b4ce2">sql2_buf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../dc/d1d/func__odbc_8c.html#a6e80fc54bebd4aa46f21684e2be14da4">__init_sql2_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:a4ca7d2852c14b9937eca47d3627b4ce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc4bfa5a94710e6f323a1033f82425b3"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1d/func__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a2ff160eb8cc768ef928c90bb61ded670">__init_sql_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:afc4bfa5a94710e6f323a1033f82425b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>ODBC lookups. </p>
<dl class="section author"><dt>Author</dt><dd>Tilghman Lesher <a href="#" onclick="location.href='mai'+'lto:'+'fun'+'c_'+'odb'+'c_'+'_20'+'05'+'08@'+'th'+'e-t'+'il'+'ghm'+'an'+'.co'+'m'; return false;">func_<span style="display: none;">.nosp@m.</span>odbc<span style="display: none;">.nosp@m.</span>__200<span style="display: none;">.nosp@m.</span>508@<span style="display: none;">.nosp@m.</span>the-t<span style="display: none;">.nosp@m.</span>ilgh<span style="display: none;">.nosp@m.</span>man.c<span style="display: none;">.nosp@m.</span>om</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a906f00621bbc63e1f8507ff99cea6050"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a906f00621bbc63e1f8507ff99cea6050">&#9670;&nbsp;</a></span>DEFAULT_SINGLE_DB_CONNECTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_SINGLE_DB_CONNECTION&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00103">103</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01798">load_module()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01897">reload()</a>.</p>

</div>
</div>
<a id="ae6b04c68da39baa5ab2a723c941faa6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6b04c68da39baa5ab2a723c941faa6a">&#9670;&nbsp;</a></span>DSN_BUCKETS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DSN_BUCKETS&#160;&#160;&#160;37</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00157">157</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01798">load_module()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01897">reload()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a02c41a7a52e0d55f10106677b2dc6412"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02c41a7a52e0d55f10106677b2dc6412">&#9670;&nbsp;</a></span>odbc_option_flags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412">odbc_option_flags</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a02c41a7a52e0d55f10106677b2dc6412ac55820e01e32fcd4e770a54dda1d5fe0"></a>OPT_ESCAPECOMMAS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a02c41a7a52e0d55f10106677b2dc6412af5098234cdab46c62b215f04f0d20129"></a>OPT_MULTIROW&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00109">109</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                       {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <a class="code" href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412ac55820e01e32fcd4e770a54dda1d5fe0">OPT_ESCAPECOMMAS</a> =   (1 &lt;&lt; 0),</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   <a class="code" href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412af5098234cdab46c62b215f04f0d20129">OPT_MULTIROW</a>     =   (1 &lt;&lt; 1),</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;};</div><div class="ttc" id="func__odbc_8c_html_a02c41a7a52e0d55f10106677b2dc6412af5098234cdab46c62b215f04f0d20129"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412af5098234cdab46c62b215f04f0d20129">OPT_MULTIROW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00111">func_odbc.c:111</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a02c41a7a52e0d55f10106677b2dc6412ac55820e01e32fcd4e770a54dda1d5fe0"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412ac55820e01e32fcd4e770a54dda1d5fe0">OPT_ESCAPECOMMAS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00110">func_odbc.c:110</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a6114260a1abad1a08ec8aacf4bda8d63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6114260a1abad1a08ec8aacf4bda8d63">&#9670;&nbsp;</a></span>__init_coldata_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_coldata_buf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00422">422</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="a1d0e4794509c52640a4579d385ea5591"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d0e4794509c52640a4579d385ea5591">&#9670;&nbsp;</a></span>__init_colnames_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_colnames_buf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00423">423</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="a6e80fc54bebd4aa46f21684e2be14da4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e80fc54bebd4aa46f21684e2be14da4">&#9670;&nbsp;</a></span>__init_sql2_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_sql2_buf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00421">421</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="a2ff160eb8cc768ef928c90bb61ded670"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ff160eb8cc768ef928c90bb61ded670">&#9670;&nbsp;</a></span>__init_sql_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_sql_buf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00420">420</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01978">1978</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01978">1978</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

</div>
</div>
<a id="afca2fae79f2858c838d31f7930407428"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afca2fae79f2858c838d31f7930407428">&#9670;&nbsp;</a></span>acf_escape()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int acf_escape </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01105">1105</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00070">ast_datastore::data</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, and <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">out</a>.</p>
<div class="fragment"><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;{</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;   <span class="keywordflow">for</span> (; *data &amp;&amp; out - <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>; data++) {</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="keywordflow">if</span> (*data == <span class="charliteral">&#39;\&#39;&#39;</span>) {</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;         *out = <span class="charliteral">&#39;\&#39;&#39;</span>;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;         out++;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      }</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      *out++ = *data;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;   }</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   *out = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ae23d5288c3a6f01163d774ce6b69d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ae23d5288c3a6f01163d774ce6b69d0">&#9670;&nbsp;</a></span>acf_fetch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int acf_fetch </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01127">1127</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l02404">ast_channel_datastore_find()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02399">ast_channel_datastore_remove()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d7/d7a/datastore_8c_source.html#l00068">ast_datastore_free()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00070">ast_datastore::data</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00137">odbc_datastore_row::data</a>, <a class="el" href="../../d3/d7b/structodbc__datastore__row.html#afc64d0a67a4dae48dafb39554b119de6">odbc_datastore_row::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00143">odbc_datastore::names</a>, and <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00725">acf_odbc_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;{</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *store;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dd8/structodbc__datastore.html">odbc_datastore</a> *resultset;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d7b/structodbc__datastore__row.html">odbc_datastore_row</a> *row;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No channel was provided to %s function.\n&quot;</span>, cmd);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;   }</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;   store = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a3bc58152d3484e15d524d83c08d1aae1">odbc_info</a>, <a class="code" href="../../d3/d7b/structodbc__datastore__row.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a>);</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;   <span class="keywordflow">if</span> (!store) {</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBC_FETCH_STATUS&quot;</span>, <span class="stringliteral">&quot;FAILURE&quot;</span>);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   }</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   resultset = store-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(resultset);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;   row = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(resultset, <a class="code" href="../../d3/d7b/structodbc__datastore__row.html#afc64d0a67a4dae48dafb39554b119de6">list</a>);</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(resultset);</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   <span class="keywordflow">if</span> (!row) {</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <span class="comment">/* Cleanup datastore */</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a1ff1c62b6d50823da93a920575c9c0c9">ast_channel_datastore_remove</a>(chan, store);</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(store);</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBC_FETCH_STATUS&quot;</span>, <span class="stringliteral">&quot;FAILURE&quot;</span>);</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   }</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;~ODBCFIELDS~&quot;</span>, resultset-&gt;<a class="code" href="../../d2/dd8/structodbc__datastore.html#aafff279bf4e68b2401f29231d8be3815">names</a>);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, row-&gt;<a class="code" href="../../d3/d7b/structodbc__datastore__row.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(row);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBC_FETCH_STATUS&quot;</span>, <span class="stringliteral">&quot;SUCCESS&quot;</span>);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;}</div><div class="ttc" id="structodbc__datastore__row_html_a9a3b4be1b9151b0369d7fca9911c7ecd"><div class="ttname"><a href="../../d3/d7b/structodbc__datastore__row.html#a9a3b4be1b9151b0369d7fca9911c7ecd">odbc_datastore_row::data</a></div><div class="ttdeci">char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00137">func_odbc.c:137</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structodbc__datastore__row_html_afc64d0a67a4dae48dafb39554b119de6"><div class="ttname"><a href="../../d3/d7b/structodbc__datastore__row.html#afc64d0a67a4dae48dafb39554b119de6">odbc_datastore_row::list</a></div><div class="ttdeci">struct odbc_datastore_row::@212 list</div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="channel_8h_html_aad1e09cd7c79237d05cffb45d6cdfd7c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a></div><div class="ttdeci">struct ast_datastore * ast_channel_datastore_find(struct ast_channel *chan, const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Find a datastore on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02404">channel.c:2404</a></div></div>
<div class="ttc" id="structodbc__datastore__row_html"><div class="ttname"><a href="../../d3/d7b/structodbc__datastore__row.html">odbc_datastore_row</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00135">func_odbc.c:135</a></div></div>
<div class="ttc" id="datastore_8h_html_aee27286888b30c6448a9bce928040a14"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a></div><div class="ttdeci">int ast_datastore_free(struct ast_datastore *datastore)</div><div class="ttdoc">Free a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00068">datastore.c:68</a></div></div>
<div class="ttc" id="structodbc__datastore_html"><div class="ttname"><a href="../../d2/dd8/structodbc__datastore.html">odbc_datastore</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00141">func_odbc.c:141</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structodbc__datastore_html_aafff279bf4e68b2401f29231d8be3815"><div class="ttname"><a href="../../d2/dd8/structodbc__datastore.html#aafff279bf4e68b2401f29231d8be3815">odbc_datastore::names</a></div><div class="ttdeci">char names[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00143">func_odbc.c:143</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a3bc58152d3484e15d524d83c08d1aae1"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a3bc58152d3484e15d524d83c08d1aae1">odbc_info</a></div><div class="ttdeci">static const struct ast_datastore_info odbc_info</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00129">func_odbc.c:129</a></div></div>
<div class="ttc" id="channel_8h_html_a1ff1c62b6d50823da93a920575c9c0c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1ff1c62b6d50823da93a920575c9c0c9">ast_channel_datastore_remove</a></div><div class="ttdeci">int ast_channel_datastore_remove(struct ast_channel *chan, struct ast_datastore *datastore)</div><div class="ttdoc">Remove a datastore from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02399">channel.c:2399</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3a8e88245feee2b99a8ce4a0cb65eee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a8e88245feee2b99a8ce4a0cb65eee9">&#9670;&nbsp;</a></span>acf_odbc_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int acf_odbc_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00725">725</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01127">acf_fetch()</a>, <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00200">ast_autoservice_start()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00266">ast_autoservice_stop()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02390">ast_channel_datastore_add()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02404">ast_channel_datastore_find()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02399">ast_channel_datastore_remove()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00089">ast_datastore_alloc</a>, <a class="el" href="../../d7/d7a/datastore_8c_source.html#l00068">ast_datastore_free()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01283">ast_dummy_channel_alloc</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00625">AST_LIST_HEAD_INIT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00507">ast_odbc_ast_str_SQLGetData()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00369">ast_odbc_direct_execute()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00228">ast_realloc</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01028">ast_str_append_escapecommas()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00780">ast_str_make_space</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00653">ast_str_reset()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00688">ast_str_strlen()</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l00616">ast_str_substitute_variables()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00422">coldata_buf</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00423">colnames_buf</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00070">ast_datastore::data</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00496">generic_execute()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00359">get_odbc_obj()</a>, <a class="el" href="../../d6/d05/test__scoped__lock_8c_source.html#l00039">indicator</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00427">odbc_datastore_free()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00110">OPT_ESCAPECOMMAS</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00111">OPT_MULTIROW</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01038">pbx_builtin_pushvar_helper()</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00388">release_obj_or_dsn()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00420">sql_buf</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../d9/db6/datastore_8h_source.html#l00069">ast_datastore::uid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01204">init_acf_query()</a>.</p>
<div class="fragment"><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;{</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a> *query;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   <span class="keywordtype">char</span> varname[15], rowcount[12] = <span class="stringliteral">&quot;-1&quot;</span>;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *colnames = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a31a8118aa4db27763d1ed7cca6b6fb6d">colnames_buf</a>, 16);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   <span class="keywordtype">int</span> res, x, y, buflen = 0, escapecommas, rowlimit = 1, multirow = 0, dsn_num, bogus_chan = 0;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(field)[100];</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   );</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;   SQLHSTMT stmt = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   SQLSMALLINT colcount=0;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   SQLLEN <a class="code" href="../../d6/d05/test__scoped__lock_8c.html#afc81d7a4954c250760ba59913e08cc65">indicator</a>;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   SQLSMALLINT collength;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dd8/structodbc__datastore.html">odbc_datastore</a> *resultset = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d7b/structodbc__datastore__row.html">odbc_datastore_row</a> *row = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *sql = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a>, 16);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a> = <span class="stringliteral">&quot;FAILURE&quot;</span>;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/dac/structdsn.html">dsn</a> *<a class="code" href="../../d6/dac/structdsn.html">dsn</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   <span class="keywordflow">if</span> (!sql || !colnames) {</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCSTATUS&quot;</span>, status);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      }</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   }</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a>(colnames);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>, query, list) {</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      <span class="keywordflow">if</span> (!strcmp(query-&gt;acf-&gt;name, cmd)) {</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      }</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   }</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;   <span class="keywordflow">if</span> (!query) {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No such function &#39;%s&#39;\n&quot;</span>, cmd);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCROWS&quot;</span>, rowcount);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCSTATUS&quot;</span>, status);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      }</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, s);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc &lt; query-&gt;minargs) {</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%d arguments supplied to &#39;%s&#39; requiring minimum %d\n&quot;</span>,</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc, cmd, query-&gt;minargs);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   }</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <span class="keywordflow">if</span> (!(chan = <a class="code" href="../../d5/d7b/channel_8h.html#acc0ae2c008f4157736ef290e9ca62572">ast_dummy_channel_alloc</a>())) {</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      }</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      bogus_chan = 1;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   }</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   <span class="keywordflow">if</span> (!bogus_chan) {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(chan);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   }</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   snprintf(varname, <span class="keyword">sizeof</span>(varname), <span class="stringliteral">&quot;%u&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a9e00ba1268d8792b95063aeedd9244ea">pbx_builtin_pushvar_helper</a>(chan, <span class="stringliteral">&quot;ARGC&quot;</span>, varname);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc; x++) {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      snprintf(varname, <span class="keyword">sizeof</span>(varname), <span class="stringliteral">&quot;ARG%d&quot;</span>, x + 1);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a9e00ba1268d8792b95063aeedd9244ea">pbx_builtin_pushvar_helper</a>(chan, varname, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.field[x]);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   }</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a556749361c7b9109134c8d00ab4ef6bf">ast_str_substitute_variables</a>(&amp;sql, 0, chan, query-&gt;sql_read);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   <span class="keywordflow">if</span> (bogus_chan) {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="comment">/* Restore prior values */</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ARGC&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc; x++) {</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;         snprintf(varname, <span class="keyword">sizeof</span>(varname), <span class="stringliteral">&quot;ARG%d&quot;</span>, x + 1);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, varname, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      }</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   }</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   <span class="comment">/* Save these flags, so we can release the lock */</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   escapecommas = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(query, <a class="code" href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412ac55820e01e32fcd4e770a54dda1d5fe0">OPT_ESCAPECOMMAS</a>);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <span class="keywordflow">if</span> (!bogus_chan &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(query, <a class="code" href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412af5098234cdab46c62b215f04f0d20129">OPT_MULTIROW</a>)) {</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="keywordflow">if</span> (!(resultset = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*resultset)))) {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCROWS&quot;</span>, rowcount);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCSTATUS&quot;</span>, status);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      }</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a6f42d3bf45cc9af6f794d9d1cf8c45ca">AST_LIST_HEAD_INIT</a>(resultset);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <span class="keywordflow">if</span> (query-&gt;rowlimit) {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;         rowlimit = query-&gt;rowlimit;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;         rowlimit = INT_MAX;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      }</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      multirow = 1;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!bogus_chan) {</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      <span class="keywordflow">if</span> (query-&gt;rowlimit &gt; 1) {</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;         rowlimit = query-&gt;rowlimit;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;         <span class="keywordflow">if</span> (!(resultset = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*resultset)))) {</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCROWS&quot;</span>, rowcount);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCSTATUS&quot;</span>, status);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;         }</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a6f42d3bf45cc9af6f794d9d1cf8c45ca">AST_LIST_HEAD_INIT</a>(resultset);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      }</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   }</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   <span class="keywordflow">for</span> (dsn_num = 0; dsn_num &lt; 5; dsn_num++) {</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(query-&gt;readhandle[dsn_num])) {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;         obj = <a class="code" href="../../dc/d1d/func__odbc_8c.html#a5216ccd295844e99d1b18c34ae6f3f69">get_odbc_obj</a>(query-&gt;readhandle[dsn_num], &amp;dsn);</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;         <span class="keywordflow">if</span> (!obj) {</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;         }</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;         stmt = <a class="code" href="../../de/d96/res__odbc_8h.html#ac29fe8d9aba364c43aa8b5c47e48587e">ast_odbc_direct_execute</a>(obj, <a class="code" href="../../dc/d1d/func__odbc_8c.html#a20915e50f48c37d3d3608bce7e89216c">generic_execute</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      }</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <span class="keywordflow">if</span> (stmt) {</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      }</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   <span class="keywordflow">if</span> (!stmt) {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to execute query [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="keywordflow">if</span> (!bogus_chan) {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCROWS&quot;</span>, rowcount);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#a7dddac97996774e1214b012d38f01151">odbc_datastore_free</a>(resultset);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;   }</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   res = SQLNumResultCols(stmt, &amp;colcount);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Column Count error!\n[%s]\n\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      SQLCloseCursor(stmt);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      SQLFreeHandle (SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <span class="keywordflow">if</span> (!bogus_chan) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCROWS&quot;</span>, rowcount);</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      }</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#a7dddac97996774e1214b012d38f01151">odbc_datastore_free</a>(resultset);</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   }</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   <span class="keywordflow">if</span> (colcount &lt;= 0) {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Returned %d columns [%s]\n&quot;</span>, colcount, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      SQLCloseCursor(stmt);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      SQLFreeHandle (SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      <span class="keywordflow">if</span> (!bogus_chan) {</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCROWS&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCSTATUS&quot;</span>, <span class="stringliteral">&quot;NODATA&quot;</span>);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      }</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#a7dddac97996774e1214b012d38f01151">odbc_datastore_free</a>(resultset);</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;   }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;   res = SQLFetch(stmt);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <span class="keywordtype">int</span> res1 = -1;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <span class="keywordflow">if</span> (res == SQL_NO_DATA) {</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Found no rows [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;         res1 = 0;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;         <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(rowcount, <span class="stringliteral">&quot;0&quot;</span>, <span class="keyword">sizeof</span>(rowcount));</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;         status = <span class="stringliteral">&quot;NODATA&quot;</span>;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error %d in FETCH [%s]\n&quot;</span>, res, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;         status = <span class="stringliteral">&quot;FETCHERROR&quot;</span>;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      }</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      SQLCloseCursor(stmt);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <span class="keywordflow">if</span> (!bogus_chan) {</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCROWS&quot;</span>, rowcount);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCSTATUS&quot;</span>, status);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      }</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#a7dddac97996774e1214b012d38f01151">odbc_datastore_free</a>(resultset);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <span class="keywordflow">return</span> res1;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;   }</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   status = <span class="stringliteral">&quot;SUCCESS&quot;</span>;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   <span class="keywordflow">for</span> (y = 0; y &lt; rowlimit; y++) {</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; colcount; x++) {</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;         <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *coldata = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#abfd73cf12d607b62314cf0e3facf49db">coldata_buf</a>, 16);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;         <span class="keywordtype">char</span> *ptrcoldata;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;         <span class="keywordflow">if</span> (!coldata) {</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            <a class="code" href="../../dc/d1d/func__odbc_8c.html#a7dddac97996774e1214b012d38f01151">odbc_datastore_free</a>(resultset);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            SQLCloseCursor(stmt);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <span class="keywordflow">if</span> (!bogus_chan) {</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;               <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCSTATUS&quot;</span>, <span class="stringliteral">&quot;MEMERROR&quot;</span>);</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            }</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;         }</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;         <span class="keywordflow">if</span> (y == 0) {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <span class="keywordtype">char</span> colname[256];</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            SQLLEN octetlength = 0;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;            res = SQLDescribeCol(stmt, x + 1, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)colname, <span class="keyword">sizeof</span>(colname), &amp;collength, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Got collength of %d for column &#39;%s&#39; (offset %d)\n&quot;</span>, (<span class="keywordtype">int</span>)collength, colname, x);</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            <span class="keywordflow">if</span> (((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) || collength == 0) {</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;               snprintf(colname, <span class="keyword">sizeof</span>(colname), <span class="stringliteral">&quot;field%d&quot;</span>, x);</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            }</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;            SQLColAttribute(stmt, x + 1, SQL_DESC_OCTET_LENGTH, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;octetlength);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a>(&amp;coldata, octetlength + 1);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(colnames)) {</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;colnames, 0, <span class="stringliteral">&quot;,&quot;</span>);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            }</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a6135d2f0275e692cd2fcbb0144408509">ast_str_append_escapecommas</a>(&amp;colnames, 0, colname, <span class="keyword">sizeof</span>(colname));</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            <span class="keywordflow">if</span> (resultset) {</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;               <span class="keywordtype">void</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#aa6bcdb74dc1508c22986f0adf171a0f2">ast_realloc</a>(resultset, <span class="keyword">sizeof</span>(*resultset) + <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(colnames) + 1);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;               <span class="keywordflow">if</span> (!tmp) {</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No space for a new resultset?\n&quot;</span>);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                  <a class="code" href="../../dc/d1d/func__odbc_8c.html#a7dddac97996774e1214b012d38f01151">odbc_datastore_free</a>(resultset);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                  SQLCloseCursor(stmt);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                  SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                  <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                  <span class="keywordflow">if</span> (!bogus_chan) {</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                     <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCROWS&quot;</span>, rowcount);</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                     <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCSTATUS&quot;</span>, <span class="stringliteral">&quot;MEMERROR&quot;</span>);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                     <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                  }</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                  <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;               }</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;               resultset = <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;               strcpy((<span class="keywordtype">char</span> *)resultset + <span class="keyword">sizeof</span>(*resultset), <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(colnames));</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            }</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;         }</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;         buflen = strlen(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;         res = <a class="code" href="../../de/d96/res__odbc_8h.html#ac208eda3a7586ac7aaf63949186f95b4">ast_odbc_ast_str_SQLGetData</a>(&amp;coldata, -1, stmt, x + 1, SQL_CHAR, &amp;indicator);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;         <span class="keywordflow">if</span> (indicator == SQL_NULL_DATA) {</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Got NULL data\n&quot;</span>);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a>(coldata);</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            res = SQL_SUCCESS;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;         }</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;         <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Get Data error!\n[%s]\n\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            y = -1;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            <span class="keywordflow">goto</span> end_acf_read;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;         }</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Got coldata of &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(coldata));</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;         <span class="keywordflow">if</span> (x) {</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[buflen++] = <span class="charliteral">&#39;,&#39;</span>;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;         }</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;         <span class="comment">/* Copy data, encoding &#39;\&#39; and &#39;,&#39; for the argument parser */</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;         ptrcoldata = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(coldata);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;         <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(coldata); i++) {</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            <span class="keywordflow">if</span> (escapecommas &amp;&amp; (ptrcoldata[i] == <span class="charliteral">&#39;\\&#39;</span> || ptrcoldata[i] == <span class="charliteral">&#39;,&#39;</span>)) {</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;               <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[buflen++] = <span class="charliteral">&#39;\\&#39;</span>;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            }</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[buflen++] = ptrcoldata[i];</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            <span class="keywordflow">if</span> (buflen &gt;= <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> - 2) {</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            }</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            <span class="keywordflow">if</span> (ptrcoldata[i] == <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            }</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;         }</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;         <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[buflen] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;buf is now set to &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      }</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;buf is now set to &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>);</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <span class="keywordflow">if</span> (resultset) {</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;         row = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*row) + buflen + 1);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;         <span class="keywordflow">if</span> (!row) {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to allocate space for more rows in this resultset.\n&quot;</span>);</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            status = <span class="stringliteral">&quot;MEMERROR&quot;</span>;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            <span class="keywordflow">goto</span> end_acf_read;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;         }</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;         strcpy((<span class="keywordtype">char</span> *)row + <span class="keyword">sizeof</span>(*row), <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(resultset, row, list);</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;         <span class="comment">/* Get next row */</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;         res = SQLFetch(stmt);</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;         <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            <span class="keywordflow">if</span> (res != SQL_NO_DATA) {</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error %d in FETCH [%s]\n&quot;</span>, res, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            }</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            <span class="comment">/* Number of rows in the resultset */</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            y++;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;         }</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      }</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;   }</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;end_acf_read:</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;   <span class="keywordflow">if</span> (!bogus_chan) {</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      snprintf(rowcount, <span class="keyword">sizeof</span>(rowcount), <span class="stringliteral">&quot;%d&quot;</span>, y);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCROWS&quot;</span>, rowcount);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCSTATUS&quot;</span>, status);</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;~ODBCFIELDS~&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(colnames));</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      <span class="keywordflow">if</span> (resultset) {</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *odbc_store;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;         <span class="keywordflow">if</span> (multirow) {</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">uid</a>;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            uid = <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#aec8a4781c9b4b9e8b0fec9946dec4fb8">resultcount</a>, +1) + 1;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            snprintf(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, <span class="stringliteral">&quot;%d&quot;</span>, uid);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            <span class="comment">/* Name of the query is name of the resultset */</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, cmd, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            <span class="comment">/* If there&#39;s one with the same name already, free it */</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            <span class="keywordflow">if</span> ((odbc_store = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a3bc58152d3484e15d524d83c08d1aae1">odbc_info</a>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>))) {</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a1ff1c62b6d50823da93a920575c9c0c9">ast_channel_datastore_remove</a>(chan, odbc_store);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;               <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(odbc_store);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;            }</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;         }</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;         odbc_store = <a class="code" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a3bc58152d3484e15d524d83c08d1aae1">odbc_info</a>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>);</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;         <span class="keywordflow">if</span> (!odbc_store) {</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Rows retrieved, but unable to store it in the channel.  Results fail.\n&quot;</span>);</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;            <a class="code" href="../../dc/d1d/func__odbc_8c.html#a7dddac97996774e1214b012d38f01151">odbc_datastore_free</a>(resultset);</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            SQLCloseCursor(stmt);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;            SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;            <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCSTATUS&quot;</span>, <span class="stringliteral">&quot;MEMERROR&quot;</span>);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;         }</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;         odbc_store-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> = resultset;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a>(chan, odbc_store);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      }</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   }</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;   SQLCloseCursor(stmt);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   <span class="keywordflow">if</span> (resultset &amp;&amp; !multirow) {</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <span class="comment">/* Fetch the first resultset */</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d1d/func__odbc_8c.html#a6ae23d5288c3a6f01163d774ce6b69d0">acf_fetch</a>(chan, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)) {</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;         <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      }</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;   }</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   <span class="keywordflow">if</span> (!bogus_chan) {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   }</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="astmm_8h_html_aa6bcdb74dc1508c22986f0adf171a0f2"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#aa6bcdb74dc1508c22986f0adf171a0f2">ast_realloc</a></div><div class="ttdeci">#define ast_realloc(p, len)</div><div class="ttdoc">A wrapper for realloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00228">astmm.h:228</a></div></div>
<div class="ttc" id="channel_8h_html_a7a8f6a50f3db42cb40cad7cfbd1d54f9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a></div><div class="ttdeci">int ast_autoservice_start(struct ast_channel *chan)</div><div class="ttdoc">Automatically service a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00200">autoservice.c:200</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="test__scoped__lock_8c_html_afc81d7a4954c250760ba59913e08cc65"><div class="ttname"><a href="../../d6/d05/test__scoped__lock_8c.html#afc81d7a4954c250760ba59913e08cc65">indicator</a></div><div class="ttdeci">static int indicator</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d05/test__scoped__lock_8c_source.html#l00039">test_scoped_lock.c:39</a></div></div>
<div class="ttc" id="strings_8h_html_aa3d67163f6a94e575ee602933adf1eab"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a></div><div class="ttdeci">#define ast_str_make_space(buf, new_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00780">strings.h:780</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="func__odbc_8c_html_afc4bfa5a94710e6f323a1033f82425b3"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a></div><div class="ttdeci">static struct ast_threadstorage sql_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00420">func_odbc.c:420</a></div></div>
<div class="ttc" id="structdsn_html"><div class="ttname"><a href="../../d6/dac/structdsn.html">dsn</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00150">func_odbc.c:150</a></div></div>
<div class="ttc" id="pbx_8h_html_a556749361c7b9109134c8d00ab4ef6bf"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a556749361c7b9109134c8d00ab4ef6bf">ast_str_substitute_variables</a></div><div class="ttdeci">void ast_str_substitute_variables(struct ast_str **buf, ssize_t maxlen, struct ast_channel *chan, const char *templ)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l00616">pbx_variables.c:616</a></div></div>
<div class="ttc" id="structacf__odbc__query_html"><div class="ttname"><a href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00114">func_odbc.c:114</a></div></div>
<div class="ttc" id="strings_8h_html_a6135d2f0275e692cd2fcbb0144408509"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a6135d2f0275e692cd2fcbb0144408509">ast_str_append_escapecommas</a></div><div class="ttdeci">char * ast_str_append_escapecommas(struct ast_str **buf, ssize_t maxlen, const char *src, size_t maxsrc)</div><div class="ttdoc">Append a non-NULL terminated substring to the end of a dynamic string, with escaping of commas...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01028">strings.h:1028</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="channel_8h_html_aad1e09cd7c79237d05cffb45d6cdfd7c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a></div><div class="ttdeci">struct ast_datastore * ast_channel_datastore_find(struct ast_channel *chan, const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Find a datastore on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02404">channel.c:2404</a></div></div>
<div class="ttc" id="structodbc__datastore__row_html"><div class="ttname"><a href="../../d3/d7b/structodbc__datastore__row.html">odbc_datastore_row</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00135">func_odbc.c:135</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="pbx_8h_html_a9e00ba1268d8792b95063aeedd9244ea"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a9e00ba1268d8792b95063aeedd9244ea">pbx_builtin_pushvar_helper</a></div><div class="ttdeci">void pbx_builtin_pushvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, without removing any previously set value...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01038">pbx_variables.c:1038</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a20915e50f48c37d3d3608bce7e89216c"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a20915e50f48c37d3d3608bce7e89216c">generic_execute</a></div><div class="ttdeci">static SQLHSTMT generic_execute(struct odbc_obj *obj, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00496">func_odbc.c:496</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="datastore_8h_html_aee27286888b30c6448a9bce928040a14"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a></div><div class="ttdeci">int ast_datastore_free(struct ast_datastore *datastore)</div><div class="ttdoc">Free a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00068">datastore.c:68</a></div></div>
<div class="ttc" id="structast__datastore_html_a2daadcdbac635c83b7bfc6375b4c9be4"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">ast_datastore::uid</a></div><div class="ttdeci">const char * uid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00069">datastore.h:69</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structodbc__datastore_html"><div class="ttname"><a href="../../d2/dd8/structodbc__datastore.html">odbc_datastore</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00141">func_odbc.c:141</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structodbc__obj_html"><div class="ttname"><a href="../../df/d36/structodbc__obj.html">odbc_obj</a></div><div class="ttdoc">ODBC container. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00046">res_odbc.h:46</a></div></div>
<div class="ttc" id="channel_8h_html_acc0ae2c008f4157736ef290e9ca62572"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acc0ae2c008f4157736ef290e9ca62572">ast_dummy_channel_alloc</a></div><div class="ttdeci">#define ast_dummy_channel_alloc()</div><div class="ttdoc">Create a fake channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01283">channel.h:1283</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a02c41a7a52e0d55f10106677b2dc6412af5098234cdab46c62b215f04f0d20129"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412af5098234cdab46c62b215f04f0d20129">OPT_MULTIROW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00111">func_odbc.c:111</a></div></div>
<div class="ttc" id="func__odbc_8c_html_aec8a4781c9b4b9e8b0fec9946dec4fb8"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#aec8a4781c9b4b9e8b0fec9946dec4fb8">resultcount</a></div><div class="ttdeci">static int resultcount</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00418">func_odbc.c:418</a></div></div>
<div class="ttc" id="func__odbc_8c_html_abfd73cf12d607b62314cf0e3facf49db"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#abfd73cf12d607b62314cf0e3facf49db">coldata_buf</a></div><div class="ttdeci">static struct ast_threadstorage coldata_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00422">func_odbc.c:422</a></div></div>
<div class="ttc" id="channel_8h_html_a08bde7d8cf72457fc8c519a4443b413b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a></div><div class="ttdeci">int ast_autoservice_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop servicing a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00266">autoservice.c:266</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a6ae23d5288c3a6f01163d774ce6b69d0"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a6ae23d5288c3a6f01163d774ce6b69d0">acf_fetch</a></div><div class="ttdeci">static int acf_fetch(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01127">func_odbc.c:1127</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ac29fe8d9aba364c43aa8b5c47e48587e"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ac29fe8d9aba364c43aa8b5c47e48587e">ast_odbc_direct_execute</a></div><div class="ttdeci">SQLHSTMT ast_odbc_direct_execute(struct odbc_obj *obj, SQLHSTMT(*exec_cb)(struct odbc_obj *obj, void *data), void *data)</div><div class="ttdoc">Executes an non prepared statement and returns the resulting statement handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00369">res_odbc.c:369</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a7dddac97996774e1214b012d38f01151"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a7dddac97996774e1214b012d38f01151">odbc_datastore_free</a></div><div class="ttdeci">static void odbc_datastore_free(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00427">func_odbc.c:427</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6f42d3bf45cc9af6f794d9d1cf8c45ca"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6f42d3bf45cc9af6f794d9d1cf8c45ca">AST_LIST_HEAD_INIT</a></div><div class="ttdeci">#define AST_LIST_HEAD_INIT(head)</div><div class="ttdoc">Initializes a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00625">linkedlists.h:625</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structqueries_html"><div class="ttname"><a href="../../db/da2/structqueries.html">queries</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00416">func_odbc.c:416</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="strings_8h_html_a8239b9ad10367bfc936e9b60ff7706a8"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a></div><div class="ttdeci">void ast_str_reset(struct ast_str *buf)</div><div class="ttdoc">Reset the content of a dynamic string. Useful before a series of ast_str_append. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00653">strings.h:653</a></div></div>
<div class="ttc" id="strings_8h_html_aabc005bd1c7e249e8f8659d57d4500b6"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a></div><div class="ttdeci">size_t ast_str_strlen(const struct ast_str *buf)</div><div class="ttdoc">Returns the current length of the string stored within buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00688">strings.h:688</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a02c41a7a52e0d55f10106677b2dc6412ac55820e01e32fcd4e770a54dda1d5fe0"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412ac55820e01e32fcd4e770a54dda1d5fe0">OPT_ESCAPECOMMAS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00110">func_odbc.c:110</a></div></div>
<div class="ttc" id="func__odbc_8c_html_afbf2ee4ae8ed50d6156d70c20ec2b02a"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a></div><div class="ttdeci">static void release_obj_or_dsn(struct odbc_obj **obj, struct dsn **dsn)</div><div class="ttdoc">Release an ODBC obj or a DSN. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00388">func_odbc.c:388</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ac208eda3a7586ac7aaf63949186f95b4"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ac208eda3a7586ac7aaf63949186f95b4">ast_odbc_ast_str_SQLGetData</a></div><div class="ttdeci">SQLRETURN ast_odbc_ast_str_SQLGetData(struct ast_str **buf, int pmaxlen, SQLHSTMT StatementHandle, SQLUSMALLINT ColumnNumber, SQLSMALLINT TargetType, SQLLEN *StrLen_or_Ind)</div><div class="ttdoc">Wrapper for SQLGetData to use with dynamic strings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00507">res_odbc.c:507</a></div></div>
<div class="ttc" id="datastore_8h_html_a666afb07fd77d50782cc10f83e029159"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a></div><div class="ttdeci">#define ast_datastore_alloc(info, uid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00089">datastore.h:89</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a31a8118aa4db27763d1ed7cca6b6fb6d"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a31a8118aa4db27763d1ed7cca6b6fb6d">colnames_buf</a></div><div class="ttdeci">static struct ast_threadstorage colnames_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00423">func_odbc.c:423</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a3bc58152d3484e15d524d83c08d1aae1"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a3bc58152d3484e15d524d83c08d1aae1">odbc_info</a></div><div class="ttdeci">static const struct ast_datastore_info odbc_info</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00129">func_odbc.c:129</a></div></div>
<div class="ttc" id="channel_8h_html_a1ed3e98d33d5587948a0e2ef67a81f52"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a></div><div class="ttdeci">int ast_channel_datastore_add(struct ast_channel *chan, struct ast_datastore *datastore)</div><div class="ttdoc">Add a datastore to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02390">channel.c:2390</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="channel_8h_html_a1ff1c62b6d50823da93a920575c9c0c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1ff1c62b6d50823da93a920575c9c0c9">ast_channel_datastore_remove</a></div><div class="ttdeci">int ast_channel_datastore_remove(struct ast_channel *chan, struct ast_datastore *datastore)</div><div class="ttdoc">Remove a datastore from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02399">channel.c:2399</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a5216ccd295844e99d1b18c34ae6f3f69"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a5216ccd295844e99d1b18c34ae6f3f69">get_odbc_obj</a></div><div class="ttdeci">static struct odbc_obj * get_odbc_obj(const char *dsn_name, struct dsn **dsn)</div><div class="ttdoc">Get a DB handle via a DSN or directly. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00359">func_odbc.c:359</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a261824f44d12c5211aca01989c2531a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a261824f44d12c5211aca01989c2531a2">&#9670;&nbsp;</a></span>acf_odbc_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int acf_odbc_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>Okay, this part is confusing. Transactions belong to a single database handle. Therefore, when working with transactions, we CANNOT failover to multiple DSNs. We MUST have a single handle all the way through the transaction, or else we CANNOT enforce atomicity.</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00509">509</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00200">ast_autoservice_start()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00266">ast_autoservice_stop()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01283">ast_dummy_channel_alloc</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00369">ast_odbc_direct_execute()</a>, <a class="el" href="../../da/d92/res__odbc__transaction_8c_source.html#l00466">ast_odbc_retrieve_transaction_obj()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00780">ast_str_make_space</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l00616">ast_str_substitute_variables()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00496">generic_execute()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00359">get_odbc_obj()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01038">pbx_builtin_pushvar_helper()</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00388">release_obj_or_dsn()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00421">sql2_buf</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00420">sql_buf</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01204">init_acf_query()</a>.</p>
<div class="fragment"><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;{</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a> *query;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   <span class="keywordtype">char</span> *t, varname[15];</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   <span class="keywordtype">int</span> i, dsn_num, bogus_chan = 0;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <span class="keywordtype">int</span> transactional = 0;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d2/d2b/structvalues.html">values</a>,</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(field)[100];</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   );</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(field)[100];</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   );</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   SQLHSTMT stmt = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   SQLLEN rows=0;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a>, 16);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *insertbuf = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a4ca7d2852c14b9937eca47d3627b4ce2">sql2_buf</a>, 16);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a> = <span class="stringliteral">&quot;FAILURE&quot;</span>;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/dac/structdsn.html">dsn</a> *<a class="code" href="../../d6/dac/structdsn.html">dsn</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   <span class="keywordflow">if</span> (!buf || !insertbuf) {</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   }</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>, query, list) {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      <span class="keywordflow">if</span> (!strcmp(query-&gt;acf-&gt;name, cmd)) {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      }</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   <span class="keywordflow">if</span> (!query) {</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No such function &#39;%s&#39;\n&quot;</span>, cmd);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCSTATUS&quot;</span>, status);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, s);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc &lt; query-&gt;minargs) {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%d arguments supplied to &#39;%s&#39; requiring minimum %d\n&quot;</span>,</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc, cmd, query-&gt;minargs);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   }</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordflow">if</span> (!(chan = <a class="code" href="../../d5/d7b/channel_8h.html#acc0ae2c008f4157736ef290e9ca62572">ast_dummy_channel_alloc</a>())) {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      bogus_chan = 1;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   <span class="keywordflow">if</span> (!bogus_chan) {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(chan);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a>(&amp;buf, strlen(query-&gt;sql_write) * 2 + 300);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="comment">/* We only get here if sql_write is set. sql_insert is optional however. */</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   <span class="keywordflow">if</span> (query-&gt;sql_insert) {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a>(&amp;insertbuf, strlen(query-&gt;sql_insert) * 2 + 300);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   }</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="comment">/* Parse our arguments */</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   t = <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> ? <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>) : <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <span class="keywordflow">if</span> (!s || !t) {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Out of memory\n&quot;</span>);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <span class="keywordflow">if</span> (!bogus_chan) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCSTATUS&quot;</span>, status);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;   snprintf(varname, <span class="keyword">sizeof</span>(varname), <span class="stringliteral">&quot;%u&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a9e00ba1268d8792b95063aeedd9244ea">pbx_builtin_pushvar_helper</a>(chan, <span class="stringliteral">&quot;ARGC&quot;</span>, varname);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc; i++) {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      snprintf(varname, <span class="keyword">sizeof</span>(varname), <span class="stringliteral">&quot;ARG%d&quot;</span>, i + 1);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a9e00ba1268d8792b95063aeedd9244ea">pbx_builtin_pushvar_helper</a>(chan, varname, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.field[i]);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;   }</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   <span class="comment">/* Parse values, just like arguments */</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d2/d2b/structvalues.html">values</a>, t);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d2/d2b/structvalues.html">values</a>.argc; i++) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      snprintf(varname, <span class="keyword">sizeof</span>(varname), <span class="stringliteral">&quot;VAL%d&quot;</span>, i + 1);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a9e00ba1268d8792b95063aeedd9244ea">pbx_builtin_pushvar_helper</a>(chan, varname, <a class="code" href="../../d2/d2b/structvalues.html">values</a>.field[i]);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   <span class="comment">/* Additionally set the value as a whole (but push an empty string if value is NULL) */</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a9e00ba1268d8792b95063aeedd9244ea">pbx_builtin_pushvar_helper</a>(chan, <span class="stringliteral">&quot;VALUE&quot;</span>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> ? <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a556749361c7b9109134c8d00ab4ef6bf">ast_str_substitute_variables</a>(&amp;buf, 0, chan, query-&gt;sql_write);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <span class="keywordflow">if</span> (query-&gt;sql_insert) {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a556749361c7b9109134c8d00ab4ef6bf">ast_str_substitute_variables</a>(&amp;insertbuf, 0, chan, query-&gt;sql_insert);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   }</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <span class="keywordflow">if</span> (bogus_chan) {</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <span class="comment">/* Restore prior values */</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ARGC&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc; i++) {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;         snprintf(varname, <span class="keyword">sizeof</span>(varname), <span class="stringliteral">&quot;ARG%d&quot;</span>, i + 1);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, varname, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      }</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d2/d2b/structvalues.html">values</a>.argc; i++) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;         snprintf(varname, <span class="keyword">sizeof</span>(varname), <span class="stringliteral">&quot;VAL%d&quot;</span>, i + 1);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, varname, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;VALUE&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">   /*!\note</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">    * Okay, this part is confusing.  Transactions belong to a single database</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">    * handle.  Therefore, when working with transactions, we CANNOT failover</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">    * to multiple DSNs.  We MUST have a single handle all the way through the</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">    * transaction, or else we CANNOT enforce atomicity.</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <span class="keywordflow">for</span> (dsn_num = 0; dsn_num &lt; 5; dsn_num++) {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(query-&gt;writehandle[dsn_num])) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;         <span class="keywordflow">if</span> (transactional) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <span class="comment">/* This can only happen second time through or greater. */</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Transactions do not work well with multiple DSNs for &#39;writehandle&#39;\n&quot;</span>);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;         }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;         <span class="keywordflow">if</span> ((obj = <a class="code" href="../../dc/d8d/res__odbc__transaction_8h.html#a14e6fc16f400d47e35ef4a0f2b220c53">ast_odbc_retrieve_transaction_obj</a>(chan, query-&gt;writehandle[dsn_num]))) {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            transactional = 1;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            obj = <a class="code" href="../../dc/d1d/func__odbc_8c.html#a5216ccd295844e99d1b18c34ae6f3f69">get_odbc_obj</a>(query-&gt;writehandle[dsn_num], &amp;dsn);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            transactional = 0;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;         }</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;         <span class="keywordflow">if</span> (obj &amp;&amp; (stmt = <a class="code" href="../../de/d96/res__odbc_8h.html#ac29fe8d9aba364c43aa8b5c47e48587e">ast_odbc_direct_execute</a>(obj, <a class="code" href="../../dc/d1d/func__odbc_8c.html#a20915e50f48c37d3d3608bce7e89216c">generic_execute</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf)))) {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;         }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;         <span class="keywordflow">if</span> (!transactional) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;         }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   }</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="keywordflow">if</span> (stmt) {</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      SQLRowCount(stmt, &amp;rows);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      SQLCloseCursor(stmt);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keywordflow">if</span> (rows != 0) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;         status = <span class="stringliteral">&quot;SUCCESS&quot;</span>;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (query-&gt;sql_insert) {</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;         <span class="keywordflow">if</span> (!transactional) {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;         }</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;         <span class="keywordflow">for</span> (transactional = 0, dsn_num = 0; dsn_num &lt; 5; dsn_num++) {</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(query-&gt;writehandle[dsn_num])) {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;               <span class="keywordflow">if</span> (transactional) {</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                  <span class="comment">/* This can only happen second time through or greater. */</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Transactions do not work well with multiple DSNs for &#39;writehandle&#39;\n&quot;</span>);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                  <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;               }</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;               <span class="keywordflow">if</span> ((obj = <a class="code" href="../../dc/d8d/res__odbc__transaction_8h.html#a14e6fc16f400d47e35ef4a0f2b220c53">ast_odbc_retrieve_transaction_obj</a>(chan, query-&gt;writehandle[dsn_num]))) {</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                  transactional = 1;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                  obj = <a class="code" href="../../dc/d1d/func__odbc_8c.html#a5216ccd295844e99d1b18c34ae6f3f69">get_odbc_obj</a>(query-&gt;writehandle[dsn_num], &amp;dsn);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                  transactional = 0;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;               }</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;               <span class="keywordflow">if</span> (obj) {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                  stmt = <a class="code" href="../../de/d96/res__odbc_8h.html#ac29fe8d9aba364c43aa8b5c47e48587e">ast_odbc_direct_execute</a>(obj, <a class="code" href="../../dc/d1d/func__odbc_8c.html#a20915e50f48c37d3d3608bce7e89216c">generic_execute</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(insertbuf));</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;               }</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <span class="keywordflow">if</span> (stmt) {</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;               status = <span class="stringliteral">&quot;FAILOVER&quot;</span>;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;               SQLRowCount(stmt, &amp;rows);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;               SQLCloseCursor(stmt);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;               SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            }</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;         }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   }</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   <span class="comment">/* Output the affected rows, for all cases.  In the event of failure, we</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">    * flag this as -1 rows.  Note that this is different from 0 affected rows</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">    * which would be the case if we succeeded in our query, but the values did</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">    * not change. */</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   <span class="keywordflow">if</span> (!bogus_chan) {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      snprintf(varname, <span class="keyword">sizeof</span>(varname), <span class="stringliteral">&quot;%d&quot;</span>, (<span class="keywordtype">int</span>)rows);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCROWS&quot;</span>, varname);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;ODBCSTATUS&quot;</span>, status);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   <span class="keywordflow">if</span> (!transactional) {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   }</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <span class="keywordflow">if</span> (!bogus_chan) {</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;}</div><div class="ttc" id="channel_8h_html_a7a8f6a50f3db42cb40cad7cfbd1d54f9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a></div><div class="ttdeci">int ast_autoservice_start(struct ast_channel *chan)</div><div class="ttdoc">Automatically service a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00200">autoservice.c:200</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_aa3d67163f6a94e575ee602933adf1eab"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a></div><div class="ttdeci">#define ast_str_make_space(buf, new_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00780">strings.h:780</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="func__odbc_8c_html_afc4bfa5a94710e6f323a1033f82425b3"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a></div><div class="ttdeci">static struct ast_threadstorage sql_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00420">func_odbc.c:420</a></div></div>
<div class="ttc" id="structdsn_html"><div class="ttname"><a href="../../d6/dac/structdsn.html">dsn</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00150">func_odbc.c:150</a></div></div>
<div class="ttc" id="pbx_8h_html_a556749361c7b9109134c8d00ab4ef6bf"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a556749361c7b9109134c8d00ab4ef6bf">ast_str_substitute_variables</a></div><div class="ttdeci">void ast_str_substitute_variables(struct ast_str **buf, ssize_t maxlen, struct ast_channel *chan, const char *templ)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l00616">pbx_variables.c:616</a></div></div>
<div class="ttc" id="structacf__odbc__query_html"><div class="ttname"><a href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00114">func_odbc.c:114</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="pbx_8h_html_a9e00ba1268d8792b95063aeedd9244ea"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a9e00ba1268d8792b95063aeedd9244ea">pbx_builtin_pushvar_helper</a></div><div class="ttdeci">void pbx_builtin_pushvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, without removing any previously set value...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01038">pbx_variables.c:1038</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a20915e50f48c37d3d3608bce7e89216c"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a20915e50f48c37d3d3608bce7e89216c">generic_execute</a></div><div class="ttdeci">static SQLHSTMT generic_execute(struct odbc_obj *obj, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00496">func_odbc.c:496</a></div></div>
<div class="ttc" id="res__odbc__transaction_8h_html_a14e6fc16f400d47e35ef4a0f2b220c53"><div class="ttname"><a href="../../dc/d8d/res__odbc__transaction_8h.html#a14e6fc16f400d47e35ef4a0f2b220c53">ast_odbc_retrieve_transaction_obj</a></div><div class="ttdeci">struct odbc_obj * ast_odbc_retrieve_transaction_obj(struct ast_channel *chan, const char *objname)</div><div class="ttdoc">Retrieve an ODBC transaction connection with the given ODBC class name. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d92/res__odbc__transaction_8c_source.html#l00466">res_odbc_transaction.c:466</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structodbc__obj_html"><div class="ttname"><a href="../../df/d36/structodbc__obj.html">odbc_obj</a></div><div class="ttdoc">ODBC container. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00046">res_odbc.h:46</a></div></div>
<div class="ttc" id="channel_8h_html_acc0ae2c008f4157736ef290e9ca62572"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acc0ae2c008f4157736ef290e9ca62572">ast_dummy_channel_alloc</a></div><div class="ttdeci">#define ast_dummy_channel_alloc()</div><div class="ttdoc">Create a fake channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01283">channel.h:1283</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="channel_8h_html_a08bde7d8cf72457fc8c519a4443b413b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a></div><div class="ttdeci">int ast_autoservice_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop servicing a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00266">autoservice.c:266</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ac29fe8d9aba364c43aa8b5c47e48587e"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ac29fe8d9aba364c43aa8b5c47e48587e">ast_odbc_direct_execute</a></div><div class="ttdeci">SQLHSTMT ast_odbc_direct_execute(struct odbc_obj *obj, SQLHSTMT(*exec_cb)(struct odbc_obj *obj, void *data), void *data)</div><div class="ttdoc">Executes an non prepared statement and returns the resulting statement handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00369">res_odbc.c:369</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a4ca7d2852c14b9937eca47d3627b4ce2"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a4ca7d2852c14b9937eca47d3627b4ce2">sql2_buf</a></div><div class="ttdeci">static struct ast_threadstorage sql2_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00421">func_odbc.c:421</a></div></div>
<div class="ttc" id="structvalues_html"><div class="ttname"><a href="../../d2/d2b/structvalues.html">values</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd1/cdr__sqlite3__custom_8c_source.html#l00066">cdr_sqlite3_custom.c:66</a></div></div>
<div class="ttc" id="structqueries_html"><div class="ttname"><a href="../../db/da2/structqueries.html">queries</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00416">func_odbc.c:416</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="func__odbc_8c_html_afbf2ee4ae8ed50d6156d70c20ec2b02a"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a></div><div class="ttdeci">static void release_obj_or_dsn(struct odbc_obj **obj, struct dsn **dsn)</div><div class="ttdoc">Release an ODBC obj or a DSN. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00388">func_odbc.c:388</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a5216ccd295844e99d1b18c34ae6f3f69"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a5216ccd295844e99d1b18c34ae6f3f69">get_odbc_obj</a></div><div class="ttdeci">static struct odbc_obj * get_odbc_obj(const char *dsn_name, struct dsn **dsn)</div><div class="ttdoc">Get a DB handle via a DSN or directly. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00359">func_odbc.c:359</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01978">1978</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

</div>
</div>
<a id="a25c0782a60e9e01a562cc5b740d8058f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25c0782a60e9e01a562cc5b740d8058f">&#9670;&nbsp;</a></span>cli_odbc_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* cli_odbc_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01430">1430</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01811">ast_cli_complete()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01283">ast_dummy_channel_alloc</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00507">ast_odbc_ast_str_SQLGetData()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00369">ast_odbc_direct_execute()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00780">ast_str_make_space</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l00616">ast_str_substitute_variables()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00422">coldata_buf</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00496">generic_execute()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00359">get_odbc_obj()</a>, <a class="el" href="../../d6/d05/test__scoped__lock_8c_source.html#l00039">indicator</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00165">ast_cli_args::n</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01038">pbx_builtin_pushvar_helper()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00388">release_obj_or_dsn()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00420">sql_buf</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>
<div class="fragment"><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;{</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(field)[100];</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;   );</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *sql;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;   <span class="keywordtype">char</span> *char_args, varname[15];</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a> *query;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;odbc read&quot;</span>;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;         <span class="stringliteral">&quot;Usage: odbc read &lt;name&gt; &lt;args&gt; [exec]\n&quot;</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;         <span class="stringliteral">&quot;       Evaluates the SQL provided in the ODBC function &lt;name&gt;, and\n&quot;</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;         <span class="stringliteral">&quot;       optionally executes the function.  This function is intended for\n&quot;</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;         <span class="stringliteral">&quot;       testing purposes.  Remember to quote arguments containing spaces.\n&quot;</span>;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 2) {</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;         <span class="keywordtype">int</span> wordlen = strlen(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>), which = 0;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;         <span class="comment">/* Complete function name */</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>, query, list) {</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;            <span class="keywordflow">if</span> (!strncasecmp(query-&gt;acf-&gt;name, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, wordlen)) {</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;               <span class="keywordflow">if</span> (++which &gt; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>) {</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                  <span class="keywordtype">char</span> *res = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(query-&gt;acf-&gt;name);</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                  <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                  <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;               }</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;            }</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;         }</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 4) {</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> completions[] = { <span class="stringliteral">&quot;exec&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> };</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a2a43f82ed19e84f386787154f2f22fc9">ast_cli_complete</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, completions, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      }</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;   }</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 4 || a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 5) {</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;   }</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;   sql = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a>, 16);</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;   <span class="keywordflow">if</span> (!sql) {</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;   }</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>, query, list) {</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      <span class="keywordflow">if</span> (!strcmp(query-&gt;acf-&gt;name, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2])) {</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      }</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   }</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;   <span class="keywordflow">if</span> (!query) {</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No such query &#39;%s&#39;\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;   }</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   <span class="keywordflow">if</span> (!query-&gt;sql_read) {</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;The function %s has no readsql parameter.\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   }</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a>(&amp;sql, strlen(query-&gt;sql_read) * 2 + 300);</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;   <span class="comment">/* Evaluate function */</span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;   char_args = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#acc0ae2c008f4157736ef290e9ca62572">ast_dummy_channel_alloc</a>();</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;   }</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, char_args);</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc; i++) {</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;      snprintf(varname, <span class="keyword">sizeof</span>(varname), <span class="stringliteral">&quot;ARG%d&quot;</span>, i + 1);</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a9e00ba1268d8792b95063aeedd9244ea">pbx_builtin_pushvar_helper</a>(chan, varname, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.field[i]);</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;   }</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a556749361c7b9109134c8d00ab4ef6bf">ast_str_substitute_variables</a>(&amp;sql, 0, chan, query-&gt;sql_read);</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 5 &amp;&amp; !strcmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4], <span class="stringliteral">&quot;exec&quot;</span>)) {</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      <span class="comment">/* Execute the query */</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d6/dac/structdsn.html">dsn</a> *<a class="code" href="../../d6/dac/structdsn.html">dsn</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      <span class="keywordtype">int</span> dsn_num, executed = 0;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      SQLHSTMT stmt;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      <span class="keywordtype">int</span> rows = 0, res, x;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      SQLSMALLINT colcount = 0, collength;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      SQLLEN <a class="code" href="../../d6/d05/test__scoped__lock_8c.html#afc81d7a4954c250760ba59913e08cc65">indicator</a>, octetlength;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *coldata = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#abfd73cf12d607b62314cf0e3facf49db">coldata_buf</a>, 16);</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      <span class="keywordtype">char</span> colname[256];</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;      <span class="keywordflow">if</span> (!coldata) {</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      }</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      <span class="keywordflow">for</span> (dsn_num = 0; dsn_num &lt; 5; dsn_num++) {</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(query-&gt;readhandle[dsn_num])) {</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;         }</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;         obj = <a class="code" href="../../dc/d1d/func__odbc_8c.html#a5216ccd295844e99d1b18c34ae6f3f69">get_odbc_obj</a>(query-&gt;readhandle[dsn_num], &amp;dsn);</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;         <span class="keywordflow">if</span> (!obj) {</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;         }</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Found handle %s\n&quot;</span>, query-&gt;readhandle[dsn_num]);</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;         <span class="keywordflow">if</span> (!(stmt = <a class="code" href="../../de/d96/res__odbc_8h.html#ac29fe8d9aba364c43aa8b5c47e48587e">ast_odbc_direct_execute</a>(obj, <a class="code" href="../../dc/d1d/func__odbc_8c.html#a20915e50f48c37d3d3608bce7e89216c">generic_execute</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql)))) {</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;            <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;         }</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;         executed = 1;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;         res = SQLNumResultCols(stmt, &amp;colcount);</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;         <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;SQL Column Count error!\n[%s]\n\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;            SQLCloseCursor(stmt);</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;            SQLFreeHandle (SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;            <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;         }</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;         <span class="keywordflow">if</span> (colcount &lt;= 0) {</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;            SQLCloseCursor(stmt);</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;            SQLFreeHandle (SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;            <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Returned %d columns.  Query executed on handle %d:%s [%s]\n&quot;</span>, colcount, dsn_num, query-&gt;readhandle[dsn_num], <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;         }</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;         res = SQLFetch(stmt);</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;         <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;            SQLCloseCursor(stmt);</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;            SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;            <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;            <span class="keywordflow">if</span> (res == SQL_NO_DATA) {</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Returned %d rows.  Query executed on handle %d:%s [%s]\n&quot;</span>, rows, dsn_num, query-&gt;readhandle[dsn_num], <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Error %d in FETCH [%s]\n&quot;</span>, res, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;            }</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;         }</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;         <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;            <span class="keywordflow">for</span> (x = 0; x &lt; colcount; x++) {</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;               res = SQLDescribeCol(stmt, x + 1, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)colname, <span class="keyword">sizeof</span>(colname), &amp;collength, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;               <span class="keywordflow">if</span> (((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) || collength == 0) {</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                  snprintf(colname, <span class="keyword">sizeof</span>(colname), <span class="stringliteral">&quot;field%d&quot;</span>, x);</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;               }</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;               octetlength = 0;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;               SQLColAttribute(stmt, x + 1, SQL_DESC_OCTET_LENGTH, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;octetlength);</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;               res = <a class="code" href="../../de/d96/res__odbc_8h.html#ac208eda3a7586ac7aaf63949186f95b4">ast_odbc_ast_str_SQLGetData</a>(&amp;coldata, octetlength + 1, stmt, x + 1, SQL_CHAR, &amp;indicator);</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;               <span class="keywordflow">if</span> (indicator == SQL_NULL_DATA) {</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;coldata, 0, <span class="stringliteral">&quot;(nil)&quot;</span>);</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;                  res = SQL_SUCCESS;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;               }</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;               <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                  <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;SQL Get Data error %d!\n[%s]\n\n&quot;</span>, res, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                  SQLCloseCursor(stmt);</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;                  SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                  <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;                  <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                  <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;               }</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%-20.20s  %s\n&quot;</span>, colname, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(coldata));</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;            }</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;            rows++;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;            <span class="comment">/* Get next row */</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;            res = SQLFetch(stmt);</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;            <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;            }</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%-20.20s  %s\n&quot;</span>, <span class="stringliteral">&quot;----------&quot;</span>, <span class="stringliteral">&quot;----------&quot;</span>);</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;         }</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;         SQLCloseCursor(stmt);</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;         SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;         <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Returned %d row%s.  Query executed on handle %d [%s]\n&quot;</span>, rows, rows == 1 ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;s&quot;</span>, dsn_num, query-&gt;readhandle[dsn_num]);</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      }</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      <span class="keywordflow">if</span> (!executed) {</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Failed to execute query. [%s]\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      }</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;   } <span class="keywordflow">else</span> { <span class="comment">/* No execution, just print out the resulting SQL */</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;   }</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="test__scoped__lock_8c_html_afc81d7a4954c250760ba59913e08cc65"><div class="ttname"><a href="../../d6/d05/test__scoped__lock_8c.html#afc81d7a4954c250760ba59913e08cc65">indicator</a></div><div class="ttdeci">static int indicator</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d05/test__scoped__lock_8c_source.html#l00039">test_scoped_lock.c:39</a></div></div>
<div class="ttc" id="strings_8h_html_aa3d67163f6a94e575ee602933adf1eab"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a></div><div class="ttdeci">#define ast_str_make_space(buf, new_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00780">strings.h:780</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="func__odbc_8c_html_afc4bfa5a94710e6f323a1033f82425b3"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a></div><div class="ttdeci">static struct ast_threadstorage sql_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00420">func_odbc.c:420</a></div></div>
<div class="ttc" id="structdsn_html"><div class="ttname"><a href="../../d6/dac/structdsn.html">dsn</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00150">func_odbc.c:150</a></div></div>
<div class="ttc" id="pbx_8h_html_a556749361c7b9109134c8d00ab4ef6bf"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a556749361c7b9109134c8d00ab4ef6bf">ast_str_substitute_variables</a></div><div class="ttdeci">void ast_str_substitute_variables(struct ast_str **buf, ssize_t maxlen, struct ast_channel *chan, const char *templ)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l00616">pbx_variables.c:616</a></div></div>
<div class="ttc" id="structacf__odbc__query_html"><div class="ttname"><a href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00114">func_odbc.c:114</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="pbx_8h_html_a9e00ba1268d8792b95063aeedd9244ea"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a9e00ba1268d8792b95063aeedd9244ea">pbx_builtin_pushvar_helper</a></div><div class="ttdeci">void pbx_builtin_pushvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, without removing any previously set value...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01038">pbx_variables.c:1038</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a20915e50f48c37d3d3608bce7e89216c"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a20915e50f48c37d3d3608bce7e89216c">generic_execute</a></div><div class="ttdeci">static SQLHSTMT generic_execute(struct odbc_obj *obj, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00496">func_odbc.c:496</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="cli_8h_html_a2a43f82ed19e84f386787154f2f22fc9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a2a43f82ed19e84f386787154f2f22fc9">ast_cli_complete</a></div><div class="ttdeci">char * ast_cli_complete(const char *word, const char *const choices[], int pos)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l01811">main/cli.c:1811</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structodbc__obj_html"><div class="ttname"><a href="../../df/d36/structodbc__obj.html">odbc_obj</a></div><div class="ttdoc">ODBC container. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00046">res_odbc.h:46</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_acfc02ec89670db29251fda6a66602ce2"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">ast_cli_args::n</a></div><div class="ttdeci">const int n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00165">cli.h:165</a></div></div>
<div class="ttc" id="channel_8h_html_acc0ae2c008f4157736ef290e9ca62572"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acc0ae2c008f4157736ef290e9ca62572">ast_dummy_channel_alloc</a></div><div class="ttdeci">#define ast_dummy_channel_alloc()</div><div class="ttdoc">Create a fake channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01283">channel.h:1283</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="func__odbc_8c_html_abfd73cf12d607b62314cf0e3facf49db"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#abfd73cf12d607b62314cf0e3facf49db">coldata_buf</a></div><div class="ttdeci">static struct ast_threadstorage coldata_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00422">func_odbc.c:422</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ac29fe8d9aba364c43aa8b5c47e48587e"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ac29fe8d9aba364c43aa8b5c47e48587e">ast_odbc_direct_execute</a></div><div class="ttdeci">SQLHSTMT ast_odbc_direct_execute(struct odbc_obj *obj, SQLHSTMT(*exec_cb)(struct odbc_obj *obj, void *data), void *data)</div><div class="ttdoc">Executes an non prepared statement and returns the resulting statement handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00369">res_odbc.c:369</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="structqueries_html"><div class="ttname"><a href="../../db/da2/structqueries.html">queries</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00416">func_odbc.c:416</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="func__odbc_8c_html_afbf2ee4ae8ed50d6156d70c20ec2b02a"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a></div><div class="ttdeci">static void release_obj_or_dsn(struct odbc_obj **obj, struct dsn **dsn)</div><div class="ttdoc">Release an ODBC obj or a DSN. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00388">func_odbc.c:388</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ac208eda3a7586ac7aaf63949186f95b4"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ac208eda3a7586ac7aaf63949186f95b4">ast_odbc_ast_str_SQLGetData</a></div><div class="ttdeci">SQLRETURN ast_odbc_ast_str_SQLGetData(struct ast_str **buf, int pmaxlen, SQLHSTMT StatementHandle, SQLUSMALLINT ColumnNumber, SQLSMALLINT TargetType, SQLLEN *StrLen_or_Ind)</div><div class="ttdoc">Wrapper for SQLGetData to use with dynamic strings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00507">res_odbc.c:507</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a5216ccd295844e99d1b18c34ae6f3f69"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a5216ccd295844e99d1b18c34ae6f3f69">get_odbc_obj</a></div><div class="ttdeci">static struct odbc_obj * get_odbc_obj(const char *dsn_name, struct dsn **dsn)</div><div class="ttdoc">Get a DB handle via a DSN or directly. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00359">func_odbc.c:359</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ff4dea7552e88829b2f9073c05873cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ff4dea7552e88829b2f9073c05873cf">&#9670;&nbsp;</a></span>cli_odbc_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* cli_odbc_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01643">1643</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01811">ast_cli_complete()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01283">ast_dummy_channel_alloc</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00369">ast_odbc_direct_execute()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00780">ast_str_make_space</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l00616">ast_str_substitute_variables()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00496">generic_execute()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00359">get_odbc_obj()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00165">ast_cli_args::n</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01038">pbx_builtin_pushvar_helper()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00388">release_obj_or_dsn()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00420">sql_buf</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>
<div class="fragment"><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;{</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d2/d2b/structvalues.html">values</a>,</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(field)[100];</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;   );</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(field)[100];</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;   );</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *sql;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;   <span class="keywordtype">char</span> *char_args, *char_values, varname[15];</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a> *query;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;odbc write&quot;</span>;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;         <span class="stringliteral">&quot;Usage: odbc write &lt;name&gt; &lt;args&gt; &lt;value&gt; [exec]\n&quot;</span></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;         <span class="stringliteral">&quot;       Evaluates the SQL provided in the ODBC function &lt;name&gt;, and\n&quot;</span></div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;         <span class="stringliteral">&quot;       optionally executes the function.  This function is intended for\n&quot;</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;         <span class="stringliteral">&quot;       testing purposes.  Remember to quote arguments containing spaces.\n&quot;</span>;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 2) {</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;         <span class="keywordtype">int</span> wordlen = strlen(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>), which = 0;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;         <span class="comment">/* Complete function name */</span></div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>, query, list) {</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;            <span class="keywordflow">if</span> (!strncasecmp(query-&gt;acf-&gt;name, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, wordlen)) {</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;               <span class="keywordflow">if</span> (++which &gt; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>) {</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                  <span class="keywordtype">char</span> *res = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(query-&gt;acf-&gt;name);</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;                  <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                  <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;               }</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;            }</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;         }</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 5) {</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> completions[] = { <span class="stringliteral">&quot;exec&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> };</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a2a43f82ed19e84f386787154f2f22fc9">ast_cli_complete</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, completions, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;      }</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;   }</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 5 || a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 6) {</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;   }</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;   sql = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a>, 16);</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;   <span class="keywordflow">if</span> (!sql) {</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;   }</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>, query, list) {</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;      <span class="keywordflow">if</span> (!strcmp(query-&gt;acf-&gt;name, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2])) {</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      }</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;   }</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;   <span class="keywordflow">if</span> (!query) {</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No such query &#39;%s&#39;\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;   }</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;   <span class="keywordflow">if</span> (!query-&gt;sql_write) {</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;The function %s has no writesql parameter.\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;   }</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;   <span class="comment">/* FIXME: The code below duplicates code found in acf_odbc_write but</span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;<span class="comment">    * lacks the newer sql_insert additions. */</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a>(&amp;sql, strlen(query-&gt;sql_write) * 2 + 300);</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;   <span class="comment">/* Evaluate function */</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;   char_args = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;   char_values = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]);</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#acc0ae2c008f4157736ef290e9ca62572">ast_dummy_channel_alloc</a>();</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;   }</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, char_args);</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc; i++) {</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;      snprintf(varname, <span class="keyword">sizeof</span>(varname), <span class="stringliteral">&quot;ARG%d&quot;</span>, i + 1);</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a9e00ba1268d8792b95063aeedd9244ea">pbx_builtin_pushvar_helper</a>(chan, varname, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.field[i]);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;   }</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   <span class="comment">/* Parse values, just like arguments */</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d2/d2b/structvalues.html">values</a>, char_values);</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d2/d2b/structvalues.html">values</a>.argc; i++) {</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      snprintf(varname, <span class="keyword">sizeof</span>(varname), <span class="stringliteral">&quot;VAL%d&quot;</span>, i + 1);</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a9e00ba1268d8792b95063aeedd9244ea">pbx_builtin_pushvar_helper</a>(chan, varname, <a class="code" href="../../d2/d2b/structvalues.html">values</a>.field[i]);</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;   }</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;   <span class="comment">/* Additionally set the value as a whole (but push an empty string if value is NULL) */</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a9e00ba1268d8792b95063aeedd9244ea">pbx_builtin_pushvar_helper</a>(chan, <span class="stringliteral">&quot;VALUE&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4], <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a556749361c7b9109134c8d00ab4ef6bf">ast_str_substitute_variables</a>(&amp;sql, 0, chan, query-&gt;sql_write);</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;SQL is %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 6 &amp;&amp; !strcmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[5], <span class="stringliteral">&quot;exec&quot;</span>)) {</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      <span class="comment">/* Execute the query */</span></div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d6/dac/structdsn.html">dsn</a> *<a class="code" href="../../d6/dac/structdsn.html">dsn</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;      <span class="keywordtype">int</span> dsn_num, executed = 0;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;      SQLHSTMT stmt;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;      SQLLEN rows = -1;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;      <span class="keywordflow">for</span> (dsn_num = 0; dsn_num &lt; 5; dsn_num++) {</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(query-&gt;writehandle[dsn_num])) {</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;         }</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;         obj = <a class="code" href="../../dc/d1d/func__odbc_8c.html#a5216ccd295844e99d1b18c34ae6f3f69">get_odbc_obj</a>(query-&gt;writehandle[dsn_num], &amp;dsn);</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;         <span class="keywordflow">if</span> (!obj) {</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;         }</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;         <span class="keywordflow">if</span> (!(stmt = <a class="code" href="../../de/d96/res__odbc_8h.html#ac29fe8d9aba364c43aa8b5c47e48587e">ast_odbc_direct_execute</a>(obj, <a class="code" href="../../dc/d1d/func__odbc_8c.html#a20915e50f48c37d3d3608bce7e89216c">generic_execute</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql)))) {</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;         }</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;         SQLRowCount(stmt, &amp;rows);</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;         SQLCloseCursor(stmt);</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;         SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;         <a class="code" href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a> (&amp;obj, &amp;dsn);</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Affected %d rows.  Query executed on handle %d [%s]\n&quot;</span>, (<span class="keywordtype">int</span>)rows, dsn_num, query-&gt;writehandle[dsn_num]);</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;         executed = 1;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;      }</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="keywordflow">if</span> (!executed) {</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Failed to execute query.\n&quot;</span>);</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      }</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;   } <span class="keywordflow">else</span> { <span class="comment">/* No execution, just print out the resulting SQL */</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;   }</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="strings_8h_html_aa3d67163f6a94e575ee602933adf1eab"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a></div><div class="ttdeci">#define ast_str_make_space(buf, new_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00780">strings.h:780</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="func__odbc_8c_html_afc4bfa5a94710e6f323a1033f82425b3"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a></div><div class="ttdeci">static struct ast_threadstorage sql_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00420">func_odbc.c:420</a></div></div>
<div class="ttc" id="structdsn_html"><div class="ttname"><a href="../../d6/dac/structdsn.html">dsn</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00150">func_odbc.c:150</a></div></div>
<div class="ttc" id="pbx_8h_html_a556749361c7b9109134c8d00ab4ef6bf"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a556749361c7b9109134c8d00ab4ef6bf">ast_str_substitute_variables</a></div><div class="ttdeci">void ast_str_substitute_variables(struct ast_str **buf, ssize_t maxlen, struct ast_channel *chan, const char *templ)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l00616">pbx_variables.c:616</a></div></div>
<div class="ttc" id="structacf__odbc__query_html"><div class="ttname"><a href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00114">func_odbc.c:114</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="pbx_8h_html_a9e00ba1268d8792b95063aeedd9244ea"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a9e00ba1268d8792b95063aeedd9244ea">pbx_builtin_pushvar_helper</a></div><div class="ttdeci">void pbx_builtin_pushvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, without removing any previously set value...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01038">pbx_variables.c:1038</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a20915e50f48c37d3d3608bce7e89216c"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a20915e50f48c37d3d3608bce7e89216c">generic_execute</a></div><div class="ttdeci">static SQLHSTMT generic_execute(struct odbc_obj *obj, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00496">func_odbc.c:496</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="cli_8h_html_a2a43f82ed19e84f386787154f2f22fc9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a2a43f82ed19e84f386787154f2f22fc9">ast_cli_complete</a></div><div class="ttdeci">char * ast_cli_complete(const char *word, const char *const choices[], int pos)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l01811">main/cli.c:1811</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structodbc__obj_html"><div class="ttname"><a href="../../df/d36/structodbc__obj.html">odbc_obj</a></div><div class="ttdoc">ODBC container. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00046">res_odbc.h:46</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_acfc02ec89670db29251fda6a66602ce2"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">ast_cli_args::n</a></div><div class="ttdeci">const int n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00165">cli.h:165</a></div></div>
<div class="ttc" id="channel_8h_html_acc0ae2c008f4157736ef290e9ca62572"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acc0ae2c008f4157736ef290e9ca62572">ast_dummy_channel_alloc</a></div><div class="ttdeci">#define ast_dummy_channel_alloc()</div><div class="ttdoc">Create a fake channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01283">channel.h:1283</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ac29fe8d9aba364c43aa8b5c47e48587e"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ac29fe8d9aba364c43aa8b5c47e48587e">ast_odbc_direct_execute</a></div><div class="ttdeci">SQLHSTMT ast_odbc_direct_execute(struct odbc_obj *obj, SQLHSTMT(*exec_cb)(struct odbc_obj *obj, void *data), void *data)</div><div class="ttdoc">Executes an non prepared statement and returns the resulting statement handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00369">res_odbc.c:369</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="structvalues_html"><div class="ttname"><a href="../../d2/d2b/structvalues.html">values</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd1/cdr__sqlite3__custom_8c_source.html#l00066">cdr_sqlite3_custom.c:66</a></div></div>
<div class="ttc" id="structqueries_html"><div class="ttname"><a href="../../db/da2/structqueries.html">queries</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00416">func_odbc.c:416</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="func__odbc_8c_html_afbf2ee4ae8ed50d6156d70c20ec2b02a"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#afbf2ee4ae8ed50d6156d70c20ec2b02a">release_obj_or_dsn</a></div><div class="ttdeci">static void release_obj_or_dsn(struct odbc_obj **obj, struct dsn **dsn)</div><div class="ttdoc">Release an ODBC obj or a DSN. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00388">func_odbc.c:388</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a5216ccd295844e99d1b18c34ae6f3f69"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a5216ccd295844e99d1b18c34ae6f3f69">get_odbc_obj</a></div><div class="ttdeci">static struct odbc_obj * get_odbc_obj(const char *dsn_name, struct dsn **dsn)</div><div class="ttdoc">Get a DB handle via a DSN or directly. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00359">func_odbc.c:359</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3e8c9a250077bb3c3b22e1e519f7cc0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e8c9a250077bb3c3b22e1e519f7cc0e">&#9670;&nbsp;</a></span>connection_dead()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int connection_dead </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *&#160;</td>
          <td class="paramname"><em>connection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if the connection has died. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The connection to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>Yep, it's dead </td></tr>
    <tr><td class="paramname">0</td><td>It's alive and well </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00265">265</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00369">ast_odbc_direct_execute()</a>, and <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00047">odbc_obj::con</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00305">get_dsn()</a>.</p>
<div class="fragment"><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;{</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   SQLINTEGER dead;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   SQLRETURN res;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   SQLHSTMT stmt;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   <span class="keywordflow">if</span> (!connection) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   res = SQLGetConnectAttr(connection-&gt;<a class="code" href="../../df/d36/structodbc__obj.html#ae83918cc26dc7acd65bbec1712593054">con</a>, SQL_ATTR_CONNECTION_DEAD, &amp;dead, 0, 0);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   <span class="keywordflow">if</span> (SQL_SUCCEEDED(res)) {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordflow">return</span> dead == SQL_CD_TRUE ? 1 : 0;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   <span class="comment">/* If the Driver doesn&#39;t support SQL_ATTR_CONNECTION_DEAD do a direct</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">    * execute of a probing statement and see if that succeeds instead</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   stmt = <a class="code" href="../../de/d96/res__odbc_8h.html#ac29fe8d9aba364c43aa8b5c47e48587e">ast_odbc_direct_execute</a>(connection, <a class="code" href="../../dc/d1d/func__odbc_8c.html#a370e4302420ae9d4cb55618e1803e009">silent_execute</a>, <span class="stringliteral">&quot;SELECT 1&quot;</span>);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   <span class="keywordflow">if</span> (!stmt) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div><div class="ttc" id="structodbc__obj_html_ae83918cc26dc7acd65bbec1712593054"><div class="ttname"><a href="../../df/d36/structodbc__obj.html#ae83918cc26dc7acd65bbec1712593054">odbc_obj::con</a></div><div class="ttdeci">SQLHDBC con</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00047">res_odbc.h:47</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a370e4302420ae9d4cb55618e1803e009"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a370e4302420ae9d4cb55618e1803e009">silent_execute</a></div><div class="ttdeci">static SQLHSTMT silent_execute(struct odbc_obj *obj, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00501">func_odbc.c:501</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ac29fe8d9aba364c43aa8b5c47e48587e"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ac29fe8d9aba364c43aa8b5c47e48587e">ast_odbc_direct_execute</a></div><div class="ttdeci">SQLHSTMT ast_odbc_direct_execute(struct odbc_obj *obj, SQLHSTMT(*exec_cb)(struct odbc_obj *obj, void *data), void *data)</div><div class="ttdoc">Executes an non prepared statement and returns the resulting statement handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00369">res_odbc.c:369</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad2cb948e148e417c845d8e141280c521"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2cb948e148e417c845d8e141280c521">&#9670;&nbsp;</a></span>create_dsn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d6/dac/structdsn.html">dsn</a>* create_dsn </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a DSN and connect to the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the DSN as found in res_odbc.conf </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Fail </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The newly-created structure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00226">226</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01572">ao2_link_flags</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00122">ast_odbc_request_obj</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00152">dsn::connection</a>, <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00058">dsn</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00210">dsn_destructor()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00154">dsn::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01067">OBJ_NOLOCK</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00501">silent_execute()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00305">get_dsn()</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/dac/structdsn.html">dsn</a> *<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a281ed9889d4f4c24980a0c06664ed6e4">dsn</a>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a>) {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   dsn = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*dsn) + strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) + 1, <a class="code" href="../../dc/d1d/func__odbc_8c.html#aa54edd137b821e8415007a6ee3d8ac72">dsn_destructor</a>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   <span class="keywordflow">if</span> (!dsn) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   <span class="comment">/* Safe */</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   strcpy(dsn-&gt;<a class="code" href="../../d6/dac/structdsn.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   dsn-&gt;<a class="code" href="../../d6/dac/structdsn.html#a4d39348505449636771bc2f89bca1fd7">connection</a> = <a class="code" href="../../de/d96/res__odbc_8h.html#a28d298bdd4e1e12cb43b5c98d2128c90">ast_odbc_request_obj</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, 0);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   <span class="keywordflow">if</span> (!dsn-&gt;<a class="code" href="../../d6/dac/structdsn.html#a4d39348505449636771bc2f89bca1fd7">connection</a>) {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(dsn, -1);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a>(<a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a>, dsn, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>)) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(dsn, -1);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a281ed9889d4f4c24980a0c06664ed6e4">dsn</a>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div><div class="ttc" id="structdsn_html"><div class="ttname"><a href="../../d6/dac/structdsn.html">dsn</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00150">func_odbc.c:150</a></div></div>
<div class="ttc" id="structdsn_html_a4d39348505449636771bc2f89bca1fd7"><div class="ttname"><a href="../../d6/dac/structdsn.html#a4d39348505449636771bc2f89bca1fd7">dsn::connection</a></div><div class="ttdeci">struct odbc_obj * connection</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00152">func_odbc.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a></div><div class="ttdoc">Assume that the ao2_container is already locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01067">astobj2.h:1067</a></div></div>
<div class="ttc" id="astobj2_8h_html_a7ce8563daf84a18540a86504d165b444"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a></div><div class="ttdeci">#define ao2_link_flags(container, obj, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01572">astobj2.h:1572</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="func__odbc_8c_html_aa54edd137b821e8415007a6ee3d8ac72"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#aa54edd137b821e8415007a6ee3d8ac72">dsn_destructor</a></div><div class="ttdeci">static void dsn_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00210">func_odbc.c:210</a></div></div>
<div class="ttc" id="structdsn_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../d6/dac/structdsn.html#afd3f693e384b1ee0a0c44d58351eb87d">dsn::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00154">func_odbc.c:154</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a28d298bdd4e1e12cb43b5c98d2128c90"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a28d298bdd4e1e12cb43b5c98d2128c90">ast_odbc_request_obj</a></div><div class="ttdeci">#define ast_odbc_request_obj(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00122">res_odbc.h:122</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a281ed9889d4f4c24980a0c06664ed6e4"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a281ed9889d4f4c24980a0c06664ed6e4">dsn</a></div><div class="ttdeci">static char * dsn</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a0dde897da05a8d078cd81e7eaae4eb38"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a></div><div class="ttdeci">struct ao2_container * dsns</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00159">func_odbc.c:159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7476952b24736168838a547a650ee379"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7476952b24736168838a547a650ee379">&#9670;&nbsp;</a></span>dsn_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dsn_cmp </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00181">181</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00154">dsn::name</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01120">OBJ_SEARCH_PARTIAL_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01798">load_module()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01897">reload()</a>.</p>
<div class="fragment"><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;{</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d6/dac/structdsn.html">dsn</a> *object_left = obj;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d6/dac/structdsn.html">dsn</a> *object_right = arg;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *right_key = arg;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      right_key = object_right-&gt;<a class="code" href="../../d6/dac/structdsn.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="comment">/* Fall through */</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      cmp = strcmp(object_left-&gt;<a class="code" href="../../d6/dac/structdsn.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, right_key);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a>:</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      cmp = strncmp(object_left-&gt;<a class="code" href="../../d6/dac/structdsn.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, right_key, strlen(right_key));</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      cmp = 0;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   <span class="keywordflow">if</span> (cmp) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="structdsn_html"><div class="ttname"><a href="../../d6/dac/structdsn.html">dsn</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00150">func_odbc.c:150</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a></div><div class="ttdoc">The arg parameter is a partial search key similar to OBJ_SEARCH_KEY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01120">astobj2.h:1120</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="structdsn_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../d6/dac/structdsn.html#afd3f693e384b1ee0a0c44d58351eb87d">dsn::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00154">func_odbc.c:154</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa54edd137b821e8415007a6ee3d8ac72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa54edd137b821e8415007a6ee3d8ac72">&#9670;&nbsp;</a></span>dsn_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dsn_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00210">210</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00813">ast_odbc_release_obj()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00152">dsn::connection</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00226">create_dsn()</a>.</p>
<div class="fragment"><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;{</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/dac/structdsn.html">dsn</a> *<a class="code" href="../../d6/dac/structdsn.html">dsn</a> = obj;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   <span class="keywordflow">if</span> (dsn-&gt;<a class="code" href="../../d6/dac/structdsn.html#a4d39348505449636771bc2f89bca1fd7">connection</a>) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(dsn-&gt;<a class="code" href="../../d6/dac/structdsn.html#a4d39348505449636771bc2f89bca1fd7">connection</a>);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;}</div><div class="ttc" id="structdsn_html"><div class="ttname"><a href="../../d6/dac/structdsn.html">dsn</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00150">func_odbc.c:150</a></div></div>
<div class="ttc" id="structdsn_html_a4d39348505449636771bc2f89bca1fd7"><div class="ttname"><a href="../../d6/dac/structdsn.html#a4d39348505449636771bc2f89bca1fd7">dsn::connection</a></div><div class="ttdeci">struct odbc_obj * connection</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00152">func_odbc.c:152</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a78d14d1dd01c269c9c0a47b49475eeea"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a></div><div class="ttdeci">void ast_odbc_release_obj(struct odbc_obj *obj)</div><div class="ttdoc">Releases an ODBC object previously allocated by ast_odbc_request_obj() </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00813">res_odbc.c:813</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c8adc30a8228a310f2d9a6a784f8aaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c8adc30a8228a310f2d9a6a784f8aaa">&#9670;&nbsp;</a></span>dsn_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dsn_hash </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00161">161</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01206">ast_str_hash()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01798">load_module()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01897">reload()</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d6/dac/structdsn.html">dsn</a> *object;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *key;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      key = obj;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordtype">object</span> = obj;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      key = <span class="keywordtype">object</span>-&gt;name;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a33ab7fa091d5513d8507d3bd33ef5b55">ast_str_hash</a>(key);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="structdsn_html"><div class="ttname"><a href="../../d6/dac/structdsn.html">dsn</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00150">func_odbc.c:150</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
<div class="ttc" id="strings_8h_html_a33ab7fa091d5513d8507d3bd33ef5b55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a33ab7fa091d5513d8507d3bd33ef5b55">ast_str_hash</a></div><div class="ttdeci">static force_inline int attribute_pure ast_str_hash(const char *str)</div><div class="ttdoc">Compute a hash value on a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01206">strings.h:1206</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2ecbd59fffc5b180da82e1b0fafd327a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ecbd59fffc5b180da82e1b0fafd327a">&#9670;&nbsp;</a></span>exec_odbcfinish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int exec_odbcfinish </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01173">1173</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l02404">ast_channel_datastore_find()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02399">ast_channel_datastore_remove()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, and <a class="el" href="../../d7/d7a/datastore_8c_source.html#l00068">ast_datastore_free()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01798">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;{</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *store;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;   store = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a3bc58152d3484e15d524d83c08d1aae1">odbc_info</a>, <a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;   <span class="keywordflow">if</span> (store) {</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a1ff1c62b6d50823da93a920575c9c0c9">ast_channel_datastore_remove</a>(chan, store);</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(store);</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;   }</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="channel_8h_html_aad1e09cd7c79237d05cffb45d6cdfd7c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a></div><div class="ttdeci">struct ast_datastore * ast_channel_datastore_find(struct ast_channel *chan, const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Find a datastore on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02404">channel.c:2404</a></div></div>
<div class="ttc" id="datastore_8h_html_aee27286888b30c6448a9bce928040a14"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a></div><div class="ttdeci">int ast_datastore_free(struct ast_datastore *datastore)</div><div class="ttdoc">Free a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00068">datastore.c:68</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a3bc58152d3484e15d524d83c08d1aae1"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a3bc58152d3484e15d524d83c08d1aae1">odbc_info</a></div><div class="ttdeci">static const struct ast_datastore_info odbc_info</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00129">func_odbc.c:129</a></div></div>
<div class="ttc" id="channel_8h_html_a1ff1c62b6d50823da93a920575c9c0c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1ff1c62b6d50823da93a920575c9c0c9">ast_channel_datastore_remove</a></div><div class="ttdeci">int ast_channel_datastore_remove(struct ast_channel *chan, struct ast_datastore *datastore)</div><div class="ttdoc">Remove a datastore from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02399">channel.c:2399</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a16177a4992e1094843ceea2fc0d58cb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16177a4992e1094843ceea2fc0d58cb0">&#9670;&nbsp;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static SQLHSTMT execute </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>silent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Common execution function for SQL queries. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>DB connection </td></tr>
    <tr><td class="paramname">data</td><td>The query to execute </td></tr>
    <tr><td class="paramname">silent</td><td>If true, do not print warnings on failure </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failed to execute query </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The executed statement </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00454">454</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00478">ast_odbc_execute_sql()</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00047">odbc_obj::con</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00137">odbc_datastore_row::data</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00461">ast_monitor_stop()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00496">generic_execute()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00501">silent_execute()</a>, and <a class="el" href="../../d8/db9/test_8c_source.html#l00382">test_execute_multiple()</a>.</p>
<div class="fragment"><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;{</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   <span class="keywordtype">char</span> *sql = <a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   SQLHSTMT stmt;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   res = SQLAllocHandle (SQL_HANDLE_STMT, obj-&gt;<a class="code" href="../../df/d36/structodbc__obj.html#ae83918cc26dc7acd65bbec1712593054">con</a>, &amp;stmt);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO)) {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Alloc Handle failed (%d)!\n&quot;</span>, res);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   }</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   res = <a class="code" href="../../de/d96/res__odbc_8h.html#ac4f32679338ee77cd43a130162456dbb">ast_odbc_execute_sql</a>(obj, stmt, sql);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <span class="keywordflow">if</span> ((res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO) &amp;&amp; (res != SQL_NO_DATA)) {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="keywordflow">if</span> (res == SQL_ERROR &amp;&amp; !silent) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;         <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;         SQLINTEGER nativeerror=0, numfields=0;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;         SQLSMALLINT diagbytes=0;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="../../d4/d88/structstate.html">state</a>[10], diagnostic[256];</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;         SQLGetDiagField(SQL_HANDLE_STMT, stmt, 1, SQL_DIAG_NUMBER, &amp;numfields, SQL_IS_INTEGER, &amp;diagbytes);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;         <span class="keywordflow">for</span> (i = 0; i &lt; numfields; i++) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            SQLGetDiagRec(SQL_HANDLE_STMT, stmt, i + 1, state, &amp;nativeerror, diagnostic, <span class="keyword">sizeof</span>(diagnostic), &amp;diagbytes);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Execute returned an error %d: %s: %s (%d)\n&quot;</span>, res, state, diagnostic, diagbytes);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <span class="keywordflow">if</span> (i &gt; 10) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Oh, that was good.  There are really %d diagnostics?\n&quot;</span>, (<span class="keywordtype">int</span>)numfields);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;         }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      }</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="keywordflow">if</span> (!silent) {</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQL Exec Direct failed (%d)![%s]\n&quot;</span>, res, sql);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      SQLCloseCursor(stmt);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      SQLFreeHandle(SQL_HANDLE_STMT, stmt);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <span class="keywordflow">return</span> stmt;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;}</div><div class="ttc" id="structodbc__obj_html_ae83918cc26dc7acd65bbec1712593054"><div class="ttname"><a href="../../df/d36/structodbc__obj.html#ae83918cc26dc7acd65bbec1712593054">odbc_obj::con</a></div><div class="ttdeci">SQLHDBC con</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00047">res_odbc.h:47</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="res__odbc_8h_html_ac4f32679338ee77cd43a130162456dbb"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#ac4f32679338ee77cd43a130162456dbb">ast_odbc_execute_sql</a></div><div class="ttdeci">SQLRETURN ast_odbc_execute_sql(struct odbc_obj *obj, SQLHSTMT *stmt, const char *sql)</div><div class="ttdoc">Execute a nonprepared SQL query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00478">res_odbc.c:478</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae851c1b4b77ee97a7206608f0f76e4ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae851c1b4b77ee97a7206608f0f76e4ff">&#9670;&nbsp;</a></span>free_acf_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int free_acf_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01187">1187</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, and <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01204">init_acf_query()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01897">reload()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01867">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;{</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;   <span class="keywordflow">if</span> (query) {</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      <span class="keywordflow">if</span> (query-&gt;acf) {</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;         <span class="keywordflow">if</span> (query-&gt;acf-&gt;name)</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>((<span class="keywordtype">char</span> *)query-&gt;acf-&gt;name);</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(query-&gt;acf);</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(query-&gt;acf);</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      }</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(query-&gt;sql_read);</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(query-&gt;sql_write);</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(query-&gt;sql_insert);</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(query);</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;   }</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;}</div><div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a20915e50f48c37d3d3608bce7e89216c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20915e50f48c37d3d3608bce7e89216c">&#9670;&nbsp;</a></span>generic_execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static SQLHSTMT generic_execute </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00496">496</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00454">execute()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00725">acf_odbc_read()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00509">acf_odbc_write()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01430">cli_odbc_read()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01643">cli_odbc_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;{</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d1d/func__odbc_8c.html#a16177a4992e1094843ceea2fc0d58cb0">execute</a>(obj, <a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>, 0);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div><div class="ttc" id="func__odbc_8c_html_a16177a4992e1094843ceea2fc0d58cb0"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a16177a4992e1094843ceea2fc0d58cb0">execute</a></div><div class="ttdeci">static SQLHSTMT execute(struct odbc_obj *obj, void *data, int silent)</div><div class="ttdoc">Common execution function for SQL queries. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00454">func_odbc.c:454</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad32c59d835fb7b3425fe2bda859406aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad32c59d835fb7b3425fe2bda859406aa">&#9670;&nbsp;</a></span>get_dsn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d6/dac/structdsn.html">dsn</a>* get_dsn </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve a DSN, or create it if it does not exist. </p>
<p>The created DSN is returned locked. This should be inconsequential to callers in most cases.</p>
<p>When finished with the returned structure, the caller must call release_dsn</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Name of the DSN as found in res_odbc.conf </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Unable to retrieve or create the DSN </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The retrieved/created locked DSN </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00305">305</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00813">ast_odbc_release_obj()</a>, <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00122">ast_odbc_request_obj</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00152">dsn::connection</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00265">connection_dead()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00226">create_dsn()</a>, <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00058">dsn</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01067">OBJ_NOLOCK</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00359">get_odbc_obj()</a>.</p>
<div class="fragment"><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;{</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/dac/structdsn.html">dsn</a> *<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a281ed9889d4f4c24980a0c06664ed6e4">dsn</a>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a>) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(<a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a>);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   dsn = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <span class="keywordflow">if</span> (!dsn) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      dsn = <a class="code" href="../../dc/d1d/func__odbc_8c.html#ad2cb948e148e417c845d8e141280c521">create_dsn</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <span class="keywordflow">if</span> (!dsn) {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(dsn);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <span class="keywordflow">if</span> (!dsn-&gt;<a class="code" href="../../d6/dac/structdsn.html#a4d39348505449636771bc2f89bca1fd7">connection</a>) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      dsn-&gt;<a class="code" href="../../d6/dac/structdsn.html#a4d39348505449636771bc2f89bca1fd7">connection</a> = <a class="code" href="../../de/d96/res__odbc_8h.html#a28d298bdd4e1e12cb43b5c98d2128c90">ast_odbc_request_obj</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, 0);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="keywordflow">if</span> (!dsn-&gt;<a class="code" href="../../d6/dac/structdsn.html#a4d39348505449636771bc2f89bca1fd7">connection</a>) {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(dsn);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(dsn, -1);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a281ed9889d4f4c24980a0c06664ed6e4">dsn</a>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d1d/func__odbc_8c.html#a3e8c9a250077bb3c3b22e1e519f7cc0e">connection_dead</a>(dsn-&gt;<a class="code" href="../../d6/dac/structdsn.html#a4d39348505449636771bc2f89bca1fd7">connection</a>)) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(dsn-&gt;<a class="code" href="../../d6/dac/structdsn.html#a4d39348505449636771bc2f89bca1fd7">connection</a>);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      dsn-&gt;<a class="code" href="../../d6/dac/structdsn.html#a4d39348505449636771bc2f89bca1fd7">connection</a> = <a class="code" href="../../de/d96/res__odbc_8h.html#a28d298bdd4e1e12cb43b5c98d2128c90">ast_odbc_request_obj</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, 0);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">if</span> (!dsn-&gt;<a class="code" href="../../d6/dac/structdsn.html#a4d39348505449636771bc2f89bca1fd7">connection</a>) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(dsn);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(dsn, -1);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   }</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a281ed9889d4f4c24980a0c06664ed6e4">dsn</a>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="structdsn_html"><div class="ttname"><a href="../../d6/dac/structdsn.html">dsn</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00150">func_odbc.c:150</a></div></div>
<div class="ttc" id="structdsn_html_a4d39348505449636771bc2f89bca1fd7"><div class="ttname"><a href="../../d6/dac/structdsn.html#a4d39348505449636771bc2f89bca1fd7">dsn::connection</a></div><div class="ttdeci">struct odbc_obj * connection</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00152">func_odbc.c:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a></div><div class="ttdoc">Assume that the ao2_container is already locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01067">astobj2.h:1067</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a3e8c9a250077bb3c3b22e1e519f7cc0e"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a3e8c9a250077bb3c3b22e1e519f7cc0e">connection_dead</a></div><div class="ttdeci">static int connection_dead(struct odbc_obj *connection)</div><div class="ttdoc">Determine if the connection has died. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00265">func_odbc.c:265</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a28d298bdd4e1e12cb43b5c98d2128c90"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a28d298bdd4e1e12cb43b5c98d2128c90">ast_odbc_request_obj</a></div><div class="ttdeci">#define ast_odbc_request_obj(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00122">res_odbc.h:122</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a281ed9889d4f4c24980a0c06664ed6e4"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a281ed9889d4f4c24980a0c06664ed6e4">dsn</a></div><div class="ttdeci">static char * dsn</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="func__odbc_8c_html_ad2cb948e148e417c845d8e141280c521"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#ad2cb948e148e417c845d8e141280c521">create_dsn</a></div><div class="ttdeci">static struct dsn * create_dsn(const char *name)</div><div class="ttdoc">Create a DSN and connect to the database. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00226">func_odbc.c:226</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a78d14d1dd01c269c9c0a47b49475eeea"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a></div><div class="ttdeci">void ast_odbc_release_obj(struct odbc_obj *obj)</div><div class="ttdoc">Releases an ODBC object previously allocated by ast_odbc_request_obj() </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00813">res_odbc.c:813</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a0dde897da05a8d078cd81e7eaae4eb38"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a></div><div class="ttdeci">struct ao2_container * dsns</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00159">func_odbc.c:159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5216ccd295844e99d1b18c34ae6f3f69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5216ccd295844e99d1b18c34ae6f3f69">&#9670;&nbsp;</a></span>get_odbc_obj()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a>* get_odbc_obj </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dsn_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/dac/structdsn.html">dsn</a> **&#160;</td>
          <td class="paramname"><em>dsn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a DB handle via a DSN or directly. </p>
<p>If single db connection then get the DB handle via DSN else by requesting a connection directly</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dsn_name</td><td>Name of the DSN as found in res_odbc.conf </td></tr>
    <tr><td class="paramname">dsn</td><td>The pointer to the DSN </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Unable to retrieve the DB handle </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The retrieved DB handle </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00359">359</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__odbc_8h_source.html#l00122">ast_odbc_request_obj</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00233">ast_rwlock_rdlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00305">get_dsn()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00105">single_db_connection</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00107">single_db_connection_lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00725">acf_odbc_read()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00509">acf_odbc_write()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01430">cli_odbc_read()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01643">cli_odbc_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;{</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *obj = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a154311285bb36392f8065c4dede18cbe">single_db_connection_lock</a>);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d1d/func__odbc_8c.html#ae1659cc4d45e715dc6daa43e090e718e">single_db_connection</a>) {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keywordflow">if</span> (dsn) {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;         *dsn = <a class="code" href="../../dc/d1d/func__odbc_8c.html#ad32c59d835fb7b3425fe2bda859406aa">get_dsn</a>(dsn_name);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;         <span class="keywordflow">if</span> (*dsn) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            obj = (*dsn)-&gt;connection;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;         }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      obj = <a class="code" href="../../de/d96/res__odbc_8h.html#a28d298bdd4e1e12cb43b5c98d2128c90">ast_odbc_request_obj</a>(dsn_name, 0);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   }</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a154311285bb36392f8065c4dede18cbe">single_db_connection_lock</a>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <span class="keywordflow">return</span> obj;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;}</div><div class="ttc" id="lock_8h_html_a7330ac9d36b05bad68b188c2dcfa42d7"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a></div><div class="ttdeci">#define ast_rwlock_rdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00233">lock.h:233</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="func__odbc_8c_html_ae1659cc4d45e715dc6daa43e090e718e"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#ae1659cc4d45e715dc6daa43e090e718e">single_db_connection</a></div><div class="ttdeci">static int single_db_connection</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00105">func_odbc.c:105</a></div></div>
<div class="ttc" id="structodbc__obj_html"><div class="ttname"><a href="../../df/d36/structodbc__obj.html">odbc_obj</a></div><div class="ttdoc">ODBC container. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00046">res_odbc.h:46</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a28d298bdd4e1e12cb43b5c98d2128c90"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a28d298bdd4e1e12cb43b5c98d2128c90">ast_odbc_request_obj</a></div><div class="ttdeci">#define ast_odbc_request_obj(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__odbc_8h_source.html#l00122">res_odbc.h:122</a></div></div>
<div class="ttc" id="func__odbc_8c_html_ad32c59d835fb7b3425fe2bda859406aa"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#ad32c59d835fb7b3425fe2bda859406aa">get_dsn</a></div><div class="ttdeci">static struct dsn * get_dsn(const char *name)</div><div class="ttdoc">Retrieve a DSN, or create it if it does not exist. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00305">func_odbc.c:305</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a154311285bb36392f8065c4dede18cbe"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a154311285bb36392f8065c4dede18cbe">single_db_connection_lock</a></div><div class="ttdeci">static ast_rwlock_t single_db_connection_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00107">func_odbc.c:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a62ac2150ebc93f5b26e3923f08dc60cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62ac2150ebc93f5b26e3923f08dc60cc">&#9670;&nbsp;</a></span>init_acf_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int init_acf_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>catg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a> **&#160;</td>
          <td class="paramname"><em>query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01204">1204</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00725">acf_odbc_read()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00509">acf_odbc_write()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00269">ast_asprintf</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01968">ast_false()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00550">ast_string_field_build</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l00694">ast_variable_retrieve()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00073">desc</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01187">free_acf_query()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00110">OPT_ESCAPECOMMAS</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00111">OPT_MULTIROW</a>, <a class="el" href="../../d0/db6/app__mysql_8c_source.html#l00064">synopsis</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01798">load_module()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01897">reload()</a>.</p>
<div class="fragment"><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;{</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *tmp2 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;   <span class="keywordflow">if</span> (!cfg || !catg) {</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      <span class="keywordflow">return</span> EINVAL;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;   }</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;   <span class="keywordflow">if</span> (!(*query = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(**query)))) {</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="keywordflow">return</span> ENOMEM;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;   }</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;   <span class="keywordflow">if</span> (((tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;writehandle&quot;</span>))) || ((tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;dsn&quot;</span>)))) {</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      <span class="keywordtype">char</span> *tmp2 = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(tmp);</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(writeconf,</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;         <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d6/dac/structdsn.html">dsn</a>)[5];</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      );</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(writeconf, tmp2);</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; 5; i++) {</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(writeconf.dsn[i]))</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>((*query)-&gt;writehandle[i], writeconf.dsn[i], <span class="keyword">sizeof</span>((*query)-&gt;writehandle[i]));</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      }</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;   }</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;   <span class="keywordflow">if</span> ((tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;readhandle&quot;</span>))) {</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      <span class="keywordtype">char</span> *tmp2 = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(tmp);</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(readconf,</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;         <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d6/dac/structdsn.html">dsn</a>)[5];</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      );</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(readconf, tmp2);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; 5; i++) {</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(readconf.dsn[i]))</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>((*query)-&gt;readhandle[i], readconf.dsn[i], <span class="keyword">sizeof</span>((*query)-&gt;readhandle[i]));</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      }</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <span class="comment">/* If no separate readhandle, then use the writehandle for reading */</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; 5; i++) {</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>((*query)-&gt;writehandle[i]))</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>((*query)-&gt;readhandle[i], (*query)-&gt;writehandle[i], <span class="keyword">sizeof</span>((*query)-&gt;readhandle[i]));</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      }</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;   }</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;   <span class="keywordflow">if</span> ((tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;readsql&quot;</span>)) ||</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;         (tmp2 = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;read&quot;</span>))) {</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      <span class="keywordflow">if</span> (!tmp) {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Parameter &#39;read&#39; is deprecated for category %s.  Please use &#39;readsql&#39; instead.\n&quot;</span>, catg);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;         tmp = tmp2;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      }</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      <span class="keywordflow">if</span> (*tmp != <span class="charliteral">&#39;\0&#39;</span>) { <span class="comment">/* non-empty string */</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;         <span class="keywordflow">if</span> (!((*query)-&gt;sql_read = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(tmp))) {</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a>(*query);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            *query = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            <span class="keywordflow">return</span> ENOMEM;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;         }</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      }</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;   }</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;   <span class="keywordflow">if</span> ((*query)-&gt;sql_read &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>((*query)-&gt;readhandle[0])) {</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a>(*query);</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      *query = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;There is SQL, but no ODBC class to be used for reading: %s\n&quot;</span>, catg);</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <span class="keywordflow">return</span> EINVAL;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;   }</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;   <span class="keywordflow">if</span> ((tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;writesql&quot;</span>)) ||</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;         (tmp2 = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;write&quot;</span>))) {</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="keywordflow">if</span> (!tmp) {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Parameter &#39;write&#39; is deprecated for category %s.  Please use &#39;writesql&#39; instead.\n&quot;</span>, catg);</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;         tmp = tmp2;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      }</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <span class="keywordflow">if</span> (*tmp != <span class="charliteral">&#39;\0&#39;</span>) { <span class="comment">/* non-empty string */</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;         <span class="keywordflow">if</span> (!((*query)-&gt;sql_write = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(tmp))) {</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a>(*query);</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            *query = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            <span class="keywordflow">return</span> ENOMEM;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;         }</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      }</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;   }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;   <span class="keywordflow">if</span> ((*query)-&gt;sql_write &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>((*query)-&gt;writehandle[0])) {</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a>(*query);</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      *query = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;There is SQL, but no ODBC class to be used for writing: %s\n&quot;</span>, catg);</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <span class="keywordflow">return</span> EINVAL;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;   }</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;   <span class="keywordflow">if</span> ((tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;insertsql&quot;</span>))) {</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;      <span class="keywordflow">if</span> (*tmp != <span class="charliteral">&#39;\0&#39;</span>) { <span class="comment">/* non-empty string */</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;         <span class="keywordflow">if</span> (!((*query)-&gt;sql_insert = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(tmp))) {</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a>(*query);</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            *query = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;            <span class="keywordflow">return</span> ENOMEM;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;         }</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      }</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   <span class="comment">/* Allow escaping of embedded commas in fields to be turned off */</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>((*query), <a class="code" href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412ac55820e01e32fcd4e770a54dda1d5fe0">OPT_ESCAPECOMMAS</a>);</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   <span class="keywordflow">if</span> ((tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;escapecommas&quot;</span>))) {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a6c3dc0bad204e9dd9890325c1c861e38">ast_false</a>(tmp))</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>((*query), <a class="code" href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412ac55820e01e32fcd4e770a54dda1d5fe0">OPT_ESCAPECOMMAS</a>);</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;   }</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;   <span class="keywordflow">if</span> ((tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;mode&quot;</span>))) {</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(tmp, <span class="stringliteral">&quot;multirow&quot;</span>) == 0)</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>((*query), <a class="code" href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412af5098234cdab46c62b215f04f0d20129">OPT_MULTIROW</a>);</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <span class="keywordflow">if</span> ((tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;rowlimit&quot;</span>)))</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;         sscanf(tmp, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;((*query)-&gt;rowlimit));</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;   }</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   <span class="keywordflow">if</span> ((tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;minargs&quot;</span>))) {</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      sscanf(tmp, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;((*query)-&gt;minargs));</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   }</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;   (*query)-&gt;acf = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a>));</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;   <span class="keywordflow">if</span> (!(*query)-&gt;acf) {</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a>(*query);</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;      *query = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      <span class="keywordflow">return</span> ENOMEM;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   }</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>((*query)-&gt;acf, 128)) {</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a>(*query);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      *query = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      <span class="keywordflow">return</span> ENOMEM;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   }</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;   <span class="keywordflow">if</span> ((tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;prefix&quot;</span>)) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tmp)) {</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>((<span class="keywordtype">char</span> **)&amp;((*query)-&gt;acf-&gt;name), <span class="stringliteral">&quot;%s_%s&quot;</span>, tmp, catg) &lt; 0) {</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;         (*query)-&gt;acf-&gt;name = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      }</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>((<span class="keywordtype">char</span> **)&amp;((*query)-&gt;acf-&gt;name), <span class="stringliteral">&quot;ODBC_%s&quot;</span>, catg) &lt; 0) {</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;         (*query)-&gt;acf-&gt;name = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      }</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;   }</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;   <span class="keywordflow">if</span> (!(*query)-&gt;acf-&gt;name) {</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a>(*query);</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      *query = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      <span class="keywordflow">return</span> ENOMEM;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;   }</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;   <span class="keywordflow">if</span> ((tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;syntax&quot;</span>)) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tmp)) {</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a>((*query)-&gt;acf, syntax, <span class="stringliteral">&quot;%s(%s)&quot;</span>, (*query)-&gt;acf-&gt;name, tmp);</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a>((*query)-&gt;acf, syntax, <span class="stringliteral">&quot;%s(&lt;arg1&gt;[...[,&lt;argN&gt;]])&quot;</span>, (*query)-&gt;acf-&gt;name);</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;   }</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>((*query)-&gt;acf-&gt;syntax)) {</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a>(*query);</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      *query = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      <span class="keywordflow">return</span> ENOMEM;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   }</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;   <span class="keywordflow">if</span> ((tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;synopsis&quot;</span>)) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tmp)) {</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>((*query)-&gt;acf, <a class="code" href="../../d0/db6/app__mysql_8c.html#afbb30cae381f627fb08e1acdac926270">synopsis</a>, tmp);</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>((*query)-&gt;acf, <a class="code" href="../../d0/db6/app__mysql_8c.html#afbb30cae381f627fb08e1acdac926270">synopsis</a>, <span class="stringliteral">&quot;Runs the referenced query with the specified arguments&quot;</span>);</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;   }</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>((*query)-&gt;acf-&gt;synopsis)) {</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a>(*query);</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      *query = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      <span class="keywordflow">return</span> ENOMEM;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   }</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   <span class="keywordflow">if</span> ((*query)-&gt;sql_read &amp;&amp; (*query)-&gt;sql_write) {</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a>((*query)-&gt;acf, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>,</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;               <span class="stringliteral">&quot;Runs the following query, as defined in func_odbc.conf, performing\n&quot;</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;               <span class="stringliteral">&quot;substitution of the arguments into the query as specified by ${ARG1},\n&quot;</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;               <span class="stringliteral">&quot;${ARG2}, ... ${ARGn}.  When setting the function, the values are provided\n&quot;</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;               <span class="stringliteral">&quot;either in whole as ${VALUE} or parsed as ${VAL1}, ${VAL2}, ... ${VALn}.\n&quot;</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;               <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;               <span class="stringliteral">&quot;\nRead:\n%s\n\nWrite:\n%s%s%s&quot;</span>,</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;               (*query)-&gt;sql_insert ?</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;                  <span class="stringliteral">&quot;If the write query affects no rows, the insert query will be\n&quot;</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;                  <span class="stringliteral">&quot;performed.\n&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;               (*query)-&gt;sql_read,</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;               (*query)-&gt;sql_write,</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;               (*query)-&gt;sql_insert ? <span class="stringliteral">&quot;\n\nInsert:\n&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;               (*query)-&gt;sql_insert ? (*query)-&gt;sql_insert : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*query)-&gt;sql_read) {</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a>((*query)-&gt;acf, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>,</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;               <span class="stringliteral">&quot;Runs the following query, as defined in func_odbc.conf, performing\n&quot;</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;               <span class="stringliteral">&quot;substitution of the arguments into the query as specified by ${ARG1},\n&quot;</span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;               <span class="stringliteral">&quot;${ARG2}, ... ${ARGn}.  This function may only be read, not set.\n\nSQL:\n%s&quot;</span>,</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;               (*query)-&gt;sql_read);</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*query)-&gt;sql_write) {</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a>((*query)-&gt;acf, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>,</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;               <span class="stringliteral">&quot;Runs the following query, as defined in func_odbc.conf, performing\n&quot;</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;               <span class="stringliteral">&quot;substitution of the arguments into the query as specified by ${ARG1},\n&quot;</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;               <span class="stringliteral">&quot;${ARG2}, ... ${ARGn}.  The values are provided either in whole as\n&quot;</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;               <span class="stringliteral">&quot;${VALUE} or parsed as ${VAL1}, ${VAL2}, ... ${VALn}.\n&quot;</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;               <span class="stringliteral">&quot;This function may only be set.\n%s\nSQL:\n%s%s%s&quot;</span>,</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;               (*query)-&gt;sql_insert ?</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;                  <span class="stringliteral">&quot;If the write query affects no rows, the insert query will be\n&quot;</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                  <span class="stringliteral">&quot;performed.\n&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;               (*query)-&gt;sql_write,</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;               (*query)-&gt;sql_insert ? <span class="stringliteral">&quot;\n\nInsert:\n&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;               (*query)-&gt;sql_insert ? (*query)-&gt;sql_insert : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a>(*query);</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      *query = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Section &#39;%s&#39; was found, but there was no SQL to execute.  Ignoring.\n&quot;</span>, catg);</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <span class="keywordflow">return</span> EINVAL;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;   }</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>((*query)-&gt;acf-&gt;desc)) {</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a>(*query);</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      *query = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      <span class="keywordflow">return</span> ENOMEM;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;   }</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;   <span class="keywordflow">if</span> ((*query)-&gt;sql_read) {</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      (*query)-&gt;acf-&gt;read = <a class="code" href="../../dc/d1d/func__odbc_8c.html#a3a8e88245feee2b99a8ce4a0cb65eee9">acf_odbc_read</a>;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;   }</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   <span class="keywordflow">if</span> ((*query)-&gt;sql_write) {</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      (*query)-&gt;acf-&gt;write = <a class="code" href="../../dc/d1d/func__odbc_8c.html#a261824f44d12c5211aca01989c2531a2">acf_odbc_write</a>;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;   }</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;}</div><div class="ttc" id="app__mysql_8c_html_afbb30cae381f627fb08e1acdac926270"><div class="ttname"><a href="../../d0/db6/app__mysql_8c.html#afbb30cae381f627fb08e1acdac926270">synopsis</a></div><div class="ttdeci">static const char synopsis[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db6/app__mysql_8c_source.html#l00064">app_mysql.c:64</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structdsn_html"><div class="ttname"><a href="../../d6/dac/structdsn.html">dsn</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00150">func_odbc.c:150</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a787f82faccb7c1f40a2539a14855601b"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a></div><div class="ttdeci">static const char desc[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00073">cdr_mysql.c:73</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a261824f44d12c5211aca01989c2531a2"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a261824f44d12c5211aca01989c2531a2">acf_odbc_write</a></div><div class="ttdeci">static int acf_odbc_write(struct ast_channel *chan, const char *cmd, char *s, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00509">func_odbc.c:509</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="structast__custom__function_html"><div class="ttname"><a href="../../db/dc0/structast__custom__function.html">ast_custom_function</a></div><div class="ttdoc">Data structure associated with a custom dialplan function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00118">pbx.h:118</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a02c41a7a52e0d55f10106677b2dc6412af5098234cdab46c62b215f04f0d20129"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412af5098234cdab46c62b215f04f0d20129">OPT_MULTIROW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00111">func_odbc.c:111</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a3a8e88245feee2b99a8ce4a0cb65eee9"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a3a8e88245feee2b99a8ce4a0cb65eee9">acf_odbc_read</a></div><div class="ttdeci">static int acf_odbc_read(struct ast_channel *chan, const char *cmd, char *s, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00725">func_odbc.c:725</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="stringfields_8h_html_a8b9f4347fc72720cc5cead952b54abe9"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a></div><div class="ttdeci">#define ast_string_field_build(x, field, fmt, args...)</div><div class="ttdoc">Set a field to a complex (built) value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00550">stringfields.h:550</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a9ff7aa27ae5f1a980bcf81f91cd6e470"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a></div><div class="ttdeci">const char * ast_variable_retrieve(struct ast_config *config, const char *category, const char *variable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00694">main/config.c:694</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="strings_8h_html_a6c3dc0bad204e9dd9890325c1c861e38"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a6c3dc0bad204e9dd9890325c1c861e38">ast_false</a></div><div class="ttdeci">int attribute_pure ast_false(const char *val)</div><div class="ttdoc">Make sure something is false. Determine if a string containing a boolean value is &quot;false&quot;...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01968">main/utils.c:1968</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a02c41a7a52e0d55f10106677b2dc6412ac55820e01e32fcd4e770a54dda1d5fe0"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a02c41a7a52e0d55f10106677b2dc6412ac55820e01e32fcd4e770a54dda1d5fe0">OPT_ESCAPECOMMAS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00110">func_odbc.c:110</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
<div class="ttc" id="func__odbc_8c_html_ae851c1b4b77ee97a7206608f0f76e4ff"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a></div><div class="ttdeci">static int free_acf_query(struct acf_odbc_query *query)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01187">func_odbc.c:1187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01798">1798</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01310">ao2_container_alloc_hash</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l03328">ast_category_browse()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00179">ast_config_load</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l01508">ast_custom_function_register</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00626">ast_register_application_xml</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00717">AST_RWLIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00234">ast_rwlock_wrlock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l00694">ast_variable_retrieve()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00101">config</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00103">DEFAULT_SINGLE_DB_CONNECTION</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00157">DSN_BUCKETS</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00181">dsn_cmp()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00161">dsn_hash()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01173">exec_odbcfinish()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01204">init_acf_query()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00105">single_db_connection</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00107">single_db_connection_lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01897">reload()</a>.</p>
<div class="fragment"><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;{</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;   <span class="keywordtype">char</span> *catg;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { 0 };</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a61a5debfadee892e1d9e147dc0854bb9">fetch_function</a>);</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(<a class="code" href="../../dc/d1d/func__odbc_8c.html#aa0ecd1e714266380d37d9c7b44169b9a">app_odbcfinish</a>, <a class="code" href="../../dc/d1d/func__odbc_8c.html#a2ecbd59fffc5b180da82e1b0fafd327a">exec_odbcfinish</a>);</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;   cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a>(<a class="code" href="../../dc/d1d/func__odbc_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, config_flags);</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;   <span class="keywordflow">if</span> (!cfg || cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Unable to load config for func_odbc: %s\n&quot;</span>, <a class="code" href="../../dc/d1d/func__odbc_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>);</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;   }</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a154311285bb36392f8065c4dede18cbe">single_db_connection_lock</a>);</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;   <span class="keywordflow">if</span> ((s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;single_db_connection&quot;</span>))) {</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae1659cc4d45e715dc6daa43e090e718e">single_db_connection</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(s);</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae1659cc4d45e715dc6daa43e090e718e">single_db_connection</a> = <a class="code" href="../../dc/d1d/func__odbc_8c.html#a906f00621bbc63e1f8507ff99cea6050">DEFAULT_SINGLE_DB_CONNECTION</a>;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;   }</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;   <a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d1d/func__odbc_8c.html#ae1659cc4d45e715dc6daa43e090e718e">single_db_connection</a>) {</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0, <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae6b04c68da39baa5ab2a723c941faa6a">DSN_BUCKETS</a>,</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;         <a class="code" href="../../dc/d1d/func__odbc_8c.html#a9c8adc30a8228a310f2d9a6a784f8aaa">dsn_hash</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d1d/func__odbc_8c.html#a7476952b24736168838a547a650ee379">dsn_cmp</a>);</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a>) {</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not initialize DSN container\n&quot;</span>);</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a154311285bb36392f8065c4dede18cbe">single_db_connection_lock</a>);</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;      }</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;   }</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a154311285bb36392f8065c4dede18cbe">single_db_connection_lock</a>);</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;   <span class="keywordflow">for</span> (catg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a>(cfg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        catg;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        catg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a>(cfg, catg)) {</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a> *query = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      <span class="keywordtype">int</span> err;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(catg, <span class="stringliteral">&quot;general&quot;</span>)) {</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;      }</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      <span class="keywordflow">if</span> ((err = <a class="code" href="../../dc/d1d/func__odbc_8c.html#a62ac2150ebc93f5b26e3923f08dc60cc">init_acf_query</a>(cfg, catg, &amp;query))) {</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;         <span class="keywordflow">if</span> (err == ENOMEM)</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Out of memory\n&quot;</span>);</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (err == EINVAL)</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid parameters for category %s\n&quot;</span>, catg);</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s (%d)\n&quot;</span>, strerror(err), err);</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>, query, list);</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(query-&gt;acf);</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;      }</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;   }</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a24515bf2d45e10e62ce9fdabf1bb4640">escape_function</a>);</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../dc/d1d/func__odbc_8c.html#ae7f4ac65a8144d36be13e62088f0928c">cli_func_odbc</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/d1d/func__odbc_8c.html#ae7f4ac65a8144d36be13e62088f0928c">cli_func_odbc</a>));</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;}</div><div class="ttc" id="func__odbc_8c_html_aa0ecd1e714266380d37d9c7b44169b9a"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#aa0ecd1e714266380d37d9c7b44169b9a">app_odbcfinish</a></div><div class="ttdeci">static char * app_odbcfinish</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01171">func_odbc.c:1171</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a61a5debfadee892e1d9e147dc0854bb9"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a61a5debfadee892e1d9e147dc0854bb9">fetch_function</a></div><div class="ttdeci">static struct ast_custom_function fetch_function</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01165">func_odbc.c:1165</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="func__odbc_8c_html_ae6b04c68da39baa5ab2a723c941faa6a"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#ae6b04c68da39baa5ab2a723c941faa6a">DSN_BUCKETS</a></div><div class="ttdeci">#define DSN_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00157">func_odbc.c:157</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a2ecbd59fffc5b180da82e1b0fafd327a"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a2ecbd59fffc5b180da82e1b0fafd327a">exec_odbcfinish</a></div><div class="ttdeci">static int exec_odbcfinish(struct ast_channel *chan, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01173">func_odbc.c:1173</a></div></div>
<div class="ttc" id="structacf__odbc__query_html"><div class="ttname"><a href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00114">func_odbc.c:114</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a906f00621bbc63e1f8507ff99cea6050"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a906f00621bbc63e1f8507ff99cea6050">DEFAULT_SINGLE_DB_CONNECTION</a></div><div class="ttdeci">#define DEFAULT_SINGLE_DB_CONNECTION</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00103">func_odbc.c:103</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a1e5e3d08eff5e2357e75c01e127e7922"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a></div><div class="ttdeci">char * ast_category_browse(struct ast_config *config, const char *prev_name)</div><div class="ttdoc">Browse categories. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l03328">extconf.c:3328</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a24515bf2d45e10e62ce9fdabf1bb4640"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a24515bf2d45e10e62ce9fdabf1bb4640">escape_function</a></div><div class="ttdeci">static struct ast_custom_function escape_function</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01121">func_odbc.c:1121</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a9c8adc30a8228a310f2d9a6a784f8aaa"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a9c8adc30a8228a310f2d9a6a784f8aaa">dsn_hash</a></div><div class="ttdeci">static int dsn_hash(const void *obj, const int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00161">func_odbc.c:161</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aacc5f6b7c25e361d11d40137fd55a8e8"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00717">linkedlists.h:717</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a0a07ddd6bbcf44485e01c14c96109482"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a></div><div class="ttdeci">#define ast_config_load(filename, flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00179">include/asterisk/config.h:179</a></div></div>
<div class="ttc" id="func__odbc_8c_html_ae1659cc4d45e715dc6daa43e090e718e"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#ae1659cc4d45e715dc6daa43e090e718e">single_db_connection</a></div><div class="ttdeci">static int single_db_connection</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00105">func_odbc.c:105</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc16f8aa9087cbc5c55c70cf1dd41b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a></div><div class="ttdeci">#define ao2_container_alloc_hash(ao2_options, container_options, n_buckets, hash_fn, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01310">astobj2.h:1310</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="structqueries_html"><div class="ttname"><a href="../../db/da2/structqueries.html">queries</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00416">func_odbc.c:416</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="lock_8h_html_a045bd81ceab2de81e42af338ad7cf121"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a></div><div class="ttdeci">#define ast_rwlock_wrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00234">lock.h:234</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a62ac2150ebc93f5b26e3923f08dc60cc"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a62ac2150ebc93f5b26e3923f08dc60cc">init_acf_query</a></div><div class="ttdeci">static int init_acf_query(struct ast_config *cfg, char *catg, struct acf_odbc_query **query)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01204">func_odbc.c:1204</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a9ff7aa27ae5f1a980bcf81f91cd6e470"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a></div><div class="ttdeci">const char * ast_variable_retrieve(struct ast_config *config, const char *category, const char *variable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00694">main/config.c:694</a></div></div>
<div class="ttc" id="func__odbc_8c_html_ae7f4ac65a8144d36be13e62088f0928c"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#ae7f4ac65a8144d36be13e62088f0928c">cli_func_odbc</a></div><div class="ttdeci">static struct ast_cli_entry cli_func_odbc[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01793">func_odbc.c:1793</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a7476952b24736168838a547a650ee379"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a7476952b24736168838a547a650ee379">dsn_cmp</a></div><div class="ttdeci">static int dsn_cmp(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00181">func_odbc.c:181</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a74bb62276efdf39dd94048e007fca05b"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a></div><div class="ttdeci">static char * config</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00101">func_odbc.c:101</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a0dde897da05a8d078cd81e7eaae4eb38"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a></div><div class="ttdeci">struct ao2_container * dsns</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00159">func_odbc.c:159</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a154311285bb36392f8065c4dede18cbe"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a154311285bb36392f8065c4dede18cbe">single_db_connection_lock</a></div><div class="ttdeci">static ast_rwlock_t single_db_connection_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00107">func_odbc.c:107</a></div></div>
<div class="ttc" id="pbx_8h_html_a8af0e93442a9e468425f63cc52b0ac7b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a></div><div class="ttdeci">#define ast_custom_function_register(acf)</div><div class="ttdoc">Register a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l01508">pbx.h:1508</a></div></div>
<div class="ttc" id="module_8h_html_afba4eb7a910b10969041ae4cd488729d"><div class="ttname"><a href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a></div><div class="ttdeci">#define ast_register_application_xml(app, execute)</div><div class="ttdoc">Register an application using XML documentation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00626">module.h:626</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7dddac97996774e1214b012d38f01151"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dddac97996774e1214b012d38f01151">&#9670;&nbsp;</a></span>odbc_datastore_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void odbc_datastore_free </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00427">427</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00652">AST_LIST_HEAD_DESTROY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d3/d7b/structodbc__datastore__row.html#afc64d0a67a4dae48dafb39554b119de6">odbc_datastore_row::list</a>, and <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00725">acf_odbc_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dd8/structodbc__datastore.html">odbc_datastore</a> *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = data;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d7b/structodbc__datastore__row.html">odbc_datastore_row</a> *row;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   <span class="keywordflow">if</span> (!result) {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(result);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   <span class="keywordflow">while</span> ((row = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(result, <a class="code" href="../../d3/d7b/structodbc__datastore__row.html#afc64d0a67a4dae48dafb39554b119de6">list</a>))) {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(row);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(result);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a47bafe663a14b91827082787d7654d7c">AST_LIST_HEAD_DESTROY</a>(result);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(result);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structodbc__datastore__row_html_afc64d0a67a4dae48dafb39554b119de6"><div class="ttname"><a href="../../d3/d7b/structodbc__datastore__row.html#afc64d0a67a4dae48dafb39554b119de6">odbc_datastore_row::list</a></div><div class="ttdeci">struct odbc_datastore_row::@212 list</div></div>
<div class="ttc" id="structodbc__datastore__row_html"><div class="ttname"><a href="../../d3/d7b/structodbc__datastore__row.html">odbc_datastore_row</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00135">func_odbc.c:135</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a47bafe663a14b91827082787d7654d7c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a47bafe663a14b91827082787d7654d7c">AST_LIST_HEAD_DESTROY</a></div><div class="ttdeci">#define AST_LIST_HEAD_DESTROY(head)</div><div class="ttdoc">Destroys a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00652">linkedlists.h:652</a></div></div>
<div class="ttc" id="structodbc__datastore_html"><div class="ttname"><a href="../../d2/dd8/structodbc__datastore.html">odbc_datastore</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00141">func_odbc.c:141</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afbf2ee4ae8ed50d6156d70c20ec2b02a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbf2ee4ae8ed50d6156d70c20ec2b02a">&#9670;&nbsp;</a></span>release_obj_or_dsn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void release_obj_or_dsn </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> **&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/dac/structdsn.html">dsn</a> **&#160;</td>
          <td class="paramname"><em>dsn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release an ODBC obj or a DSN. </p>
<p>If single db connection then unlock and unreference the DSN else release the ODBC obj</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>The pointer to the ODBC obj to release </td></tr>
    <tr><td class="paramname">dsn</td><td>The pointer to the dsn to unlock and unreference </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00388">388</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00857">ast_odbc_get_max_connections()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00813">ast_odbc_release_obj()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00725">acf_odbc_read()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00509">acf_odbc_write()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01430">cli_odbc_read()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01643">cli_odbc_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;{</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   <span class="keywordflow">if</span> (dsn &amp;&amp; *dsn) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="comment">/* If multiple connections are not enabled then the guarantee</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">       * of a single connection already exists and holding on to the</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">       * connection would prevent any other user from acquiring it</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">       * indefinitely.</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__odbc_8h.html#a848116c2089ded864acd83e0fefccbc2">ast_odbc_get_max_connections</a>((*dsn)-&gt;name) &lt; 2) {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;         <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>((*dsn)-&gt;connection);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;         (*dsn)-&gt;connection = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(*dsn);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(*dsn, -1);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      *dsn = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="comment">/* Some callers may provide both an obj and dsn. To ensure that</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">       * the connection is not released twice we set it to NULL here if</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">       * present.</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keywordflow">if</span> (obj) {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;         *obj = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (obj &amp;&amp; *obj) {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <a class="code" href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a>(*obj);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      *obj = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a848116c2089ded864acd83e0fefccbc2"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a848116c2089ded864acd83e0fefccbc2">ast_odbc_get_max_connections</a></div><div class="ttdeci">unsigned int ast_odbc_get_max_connections(const char *name)</div><div class="ttdoc">Return the current configured maximum number of connections for a class. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00857">res_odbc.c:857</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__odbc_8h_html_a78d14d1dd01c269c9c0a47b49475eeea"><div class="ttname"><a href="../../de/d96/res__odbc_8h.html#a78d14d1dd01c269c9c0a47b49475eeea">ast_odbc_release_obj</a></div><div class="ttdeci">void ast_odbc_release_obj(struct odbc_obj *obj)</div><div class="ttdoc">Releases an ODBC object previously allocated by ast_odbc_request_obj() </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4a/res__odbc_8c_source.html#l00813">res_odbc.c:813</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad1982509765f4870f1f63412a53ea668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1982509765f4870f1f63412a53ea668">&#9670;&nbsp;</a></span>reload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01897">1897</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01310">ao2_container_alloc_hash</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l03328">ast_category_browse()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00179">ast_config_load</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l01508">ast_custom_function_register</a>, <a class="el" href="../../db/d70/pbx__functions_8c_source.html#l00273">ast_custom_function_unregister()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00315">AST_MODFLAG_DEFAULT</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00451">AST_RWLIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00717">AST_RWLIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00843">AST_RWLIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00234">ast_rwlock_wrlock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l00694">ast_variable_retrieve()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00101">config</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00043">CONFIG_FLAG_FILEUNCHANGED</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00059">CONFIG_STATUS_FILEUNCHANGED</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00103">DEFAULT_SINGLE_DB_CONNECTION</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00157">DSN_BUCKETS</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00181">dsn_cmp()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00161">dsn_hash()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01187">free_acf_query()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01204">init_acf_query()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01798">load_module()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00105">single_db_connection</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00107">single_db_connection_lock</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01867">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;{</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a> *oldquery;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;   <span class="keywordtype">char</span> *catg;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a> };</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;   cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a>(<a class="code" href="../../dc/d1d/func__odbc_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, config_flags);</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;   <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a> || cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>)</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a154311285bb36392f8065c4dede18cbe">single_db_connection_lock</a>);</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a>) {</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a>, -1);</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;   }</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;   <span class="keywordflow">if</span> (cfg &amp;&amp; (s = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;single_db_connection&quot;</span>))) {</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae1659cc4d45e715dc6daa43e090e718e">single_db_connection</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(s);</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae1659cc4d45e715dc6daa43e090e718e">single_db_connection</a> = <a class="code" href="../../dc/d1d/func__odbc_8c.html#a906f00621bbc63e1f8507ff99cea6050">DEFAULT_SINGLE_DB_CONNECTION</a>;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;   }</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d1d/func__odbc_8c.html#ae1659cc4d45e715dc6daa43e090e718e">single_db_connection</a>) {</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0, <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae6b04c68da39baa5ab2a723c941faa6a">DSN_BUCKETS</a>,</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;         <a class="code" href="../../dc/d1d/func__odbc_8c.html#a9c8adc30a8228a310f2d9a6a784f8aaa">dsn_hash</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d1d/func__odbc_8c.html#a7476952b24736168838a547a650ee379">dsn_cmp</a>);</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a>) {</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not initialize DSN container\n&quot;</span>);</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a154311285bb36392f8065c4dede18cbe">single_db_connection_lock</a>);</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      }</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;   }</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a154311285bb36392f8065c4dede18cbe">single_db_connection_lock</a>);</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>)) {</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;      oldquery = <a class="code" href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>, list);</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(oldquery-&gt;acf);</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a>(oldquery);</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;   }</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;   <span class="keywordflow">if</span> (!cfg) {</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to load config for func_odbc: %s\n&quot;</span>, <a class="code" href="../../dc/d1d/func__odbc_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>);</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      <span class="keywordflow">goto</span> reload_out;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;   }</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;   <span class="keywordflow">for</span> (catg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a>(cfg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;        catg;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        catg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a>(cfg, catg)) {</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a> *query = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(catg, <span class="stringliteral">&quot;general&quot;</span>)) {</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;      }</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/d1d/func__odbc_8c.html#a62ac2150ebc93f5b26e3923f08dc60cc">init_acf_query</a>(cfg, catg, &amp;query)) {</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot initialize query %s\n&quot;</span>, catg);</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>, query, list);</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(query-&gt;acf);</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      }</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;   }</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;reload_out:</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="func__odbc_8c_html_ae6b04c68da39baa5ab2a723c941faa6a"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#ae6b04c68da39baa5ab2a723c941faa6a">DSN_BUCKETS</a></div><div class="ttdeci">#define DSN_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00157">func_odbc.c:157</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structacf__odbc__query_html"><div class="ttname"><a href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00114">func_odbc.c:114</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a906f00621bbc63e1f8507ff99cea6050"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a906f00621bbc63e1f8507ff99cea6050">DEFAULT_SINGLE_DB_CONNECTION</a></div><div class="ttdeci">#define DEFAULT_SINGLE_DB_CONNECTION</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00103">func_odbc.c:103</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a1e5e3d08eff5e2357e75c01e127e7922"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a></div><div class="ttdeci">char * ast_category_browse(struct ast_config *config, const char *prev_name)</div><div class="ttdoc">Browse categories. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l03328">extconf.c:3328</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="pbx_8h_html_a965977ea9a3144bc203e0ce7a64680a1"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a></div><div class="ttdeci">int ast_custom_function_unregister(struct ast_custom_function *acf)</div><div class="ttdoc">Unregister a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00273">pbx_functions.c:273</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a9c8adc30a8228a310f2d9a6a784f8aaa"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a9c8adc30a8228a310f2d9a6a784f8aaa">dsn_hash</a></div><div class="ttdeci">static int dsn_hash(const void *obj, const int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00161">func_odbc.c:161</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aacc5f6b7c25e361d11d40137fd55a8e8"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00717">linkedlists.h:717</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a0a07ddd6bbcf44485e01c14c96109482"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a></div><div class="ttdeci">#define ast_config_load(filename, flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00179">include/asterisk/config.h:179</a></div></div>
<div class="ttc" id="func__odbc_8c_html_ae1659cc4d45e715dc6daa43e090e718e"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#ae1659cc4d45e715dc6daa43e090e718e">single_db_connection</a></div><div class="ttdeci">static int single_db_connection</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00105">func_odbc.c:105</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a846844eb2c4eb44554445936b3770711"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEUNCHANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00059">include/asterisk/config.h:59</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0044f6572f50a89049b3b5272e51b0e7"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a></div><div class="ttdeci">#define AST_RWLIST_EMPTY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00451">linkedlists.h:451</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc16f8aa9087cbc5c55c70cf1dd41b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a></div><div class="ttdeci">#define ao2_container_alloc_hash(ao2_options, container_options, n_buckets, hash_fn, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01310">astobj2.h:1310</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3d3aa4fb3b4ba38ad8d6d255d97e037c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00843">linkedlists.h:843</a></div></div>
<div class="ttc" id="structqueries_html"><div class="ttname"><a href="../../db/da2/structqueries.html">queries</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00416">func_odbc.c:416</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="lock_8h_html_a045bd81ceab2de81e42af338ad7cf121"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a></div><div class="ttdeci">#define ast_rwlock_wrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00234">lock.h:234</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a62ac2150ebc93f5b26e3923f08dc60cc"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a62ac2150ebc93f5b26e3923f08dc60cc">init_acf_query</a></div><div class="ttdeci">static int init_acf_query(struct ast_config *cfg, char *catg, struct acf_odbc_query **query)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01204">func_odbc.c:1204</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a9ff7aa27ae5f1a980bcf81f91cd6e470"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a></div><div class="ttdeci">const char * ast_variable_retrieve(struct ast_config *config, const char *category, const char *variable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00694">main/config.c:694</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a7476952b24736168838a547a650ee379"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a7476952b24736168838a547a650ee379">dsn_cmp</a></div><div class="ttdeci">static int dsn_cmp(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00181">func_odbc.c:181</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a74bb62276efdf39dd94048e007fca05b"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a></div><div class="ttdeci">static char * config</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00101">func_odbc.c:101</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a0dde897da05a8d078cd81e7eaae4eb38"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a></div><div class="ttdeci">struct ao2_container * dsns</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00159">func_odbc.c:159</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a154311285bb36392f8065c4dede18cbe"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a154311285bb36392f8065c4dede18cbe">single_db_connection_lock</a></div><div class="ttdeci">static ast_rwlock_t single_db_connection_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00107">func_odbc.c:107</a></div></div>
<div class="ttc" id="pbx_8h_html_a8af0e93442a9e468425f63cc52b0ac7b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a></div><div class="ttdeci">#define ast_custom_function_register(acf)</div><div class="ttdoc">Register a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l01508">pbx.h:1508</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00043">include/asterisk/config.h:43</a></div></div>
<div class="ttc" id="func__odbc_8c_html_ae851c1b4b77ee97a7206608f0f76e4ff"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a></div><div class="ttdeci">static int free_acf_query(struct acf_odbc_query *query)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01187">func_odbc.c:1187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a370e4302420ae9d4cb55618e1803e009"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a370e4302420ae9d4cb55618e1803e009">&#9670;&nbsp;</a></span>silent_execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static SQLHSTMT silent_execute </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d36/structodbc__obj.html">odbc_obj</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00501">501</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00454">execute()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00226">create_dsn()</a>.</p>
<div class="fragment"><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;{</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d1d/func__odbc_8c.html#a16177a4992e1094843ceea2fc0d58cb0">execute</a>(obj, data, 1);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;}</div><div class="ttc" id="func__odbc_8c_html_a16177a4992e1094843ceea2fc0d58cb0"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a16177a4992e1094843ceea2fc0d58cb0">execute</a></div><div class="ttdeci">static SQLHSTMT execute(struct odbc_obj *obj, void *data, int silent)</div><div class="ttdoc">Common execution function for SQL queries. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00454">func_odbc.c:454</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01867">1867</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../db/d70/pbx__functions_8c_source.html#l00273">ast_custom_function_unregister()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00451">AST_RWLIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00843">AST_RWLIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dd/d16/pbx__app_8c_source.html#l00392">ast_unregister_application()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01187">free_acf_query()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01897">reload()</a>.</p>
<div class="fragment"><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;{</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a> *query;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>)) {</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      query = <a class="code" href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>, list);</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(query-&gt;acf);</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;      <a class="code" href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a>(query);</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;   }</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a24515bf2d45e10e62ce9fdabf1bb4640">escape_function</a>);</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../dc/d1d/func__odbc_8c.html#a61a5debfadee892e1d9e147dc0854bb9">fetch_function</a>);</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<a class="code" href="../../dc/d1d/func__odbc_8c.html#aa0ecd1e714266380d37d9c7b44169b9a">app_odbcfinish</a>);</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../dc/d1d/func__odbc_8c.html#ae7f4ac65a8144d36be13e62088f0928c">cli_func_odbc</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../dc/d1d/func__odbc_8c.html#ae7f4ac65a8144d36be13e62088f0928c">cli_func_odbc</a>));</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;   <span class="comment">/* Allow any threads waiting for this lock to pass (avoids a race) */</span></div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;   usleep(1);</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../db/da2/structqueries.html">queries</a>);</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a>) {</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a>, -1);</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;   }</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;}</div><div class="ttc" id="func__odbc_8c_html_aa0ecd1e714266380d37d9c7b44169b9a"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#aa0ecd1e714266380d37d9c7b44169b9a">app_odbcfinish</a></div><div class="ttdeci">static char * app_odbcfinish</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01171">func_odbc.c:1171</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a61a5debfadee892e1d9e147dc0854bb9"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a61a5debfadee892e1d9e147dc0854bb9">fetch_function</a></div><div class="ttdeci">static struct ast_custom_function fetch_function</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01165">func_odbc.c:1165</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structacf__odbc__query_html"><div class="ttname"><a href="../../df/dac/structacf__odbc__query.html">acf_odbc_query</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00114">func_odbc.c:114</a></div></div>
<div class="ttc" id="module_8h_html_ad2ca15621101154f29748cf1dac3c3cf"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a></div><div class="ttdeci">int ast_unregister_application(const char *app)</div><div class="ttdoc">Unregister an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00392">pbx_app.c:392</a></div></div>
<div class="ttc" id="pbx_8h_html_a965977ea9a3144bc203e0ce7a64680a1"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a></div><div class="ttdeci">int ast_custom_function_unregister(struct ast_custom_function *acf)</div><div class="ttdoc">Unregister a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00273">pbx_functions.c:273</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a24515bf2d45e10e62ce9fdabf1bb4640"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a24515bf2d45e10e62ce9fdabf1bb4640">escape_function</a></div><div class="ttdeci">static struct ast_custom_function escape_function</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01121">func_odbc.c:1121</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0044f6572f50a89049b3b5272e51b0e7"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a></div><div class="ttdeci">#define AST_RWLIST_EMPTY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00451">linkedlists.h:451</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3d3aa4fb3b4ba38ad8d6d255d97e037c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00843">linkedlists.h:843</a></div></div>
<div class="ttc" id="structqueries_html"><div class="ttname"><a href="../../db/da2/structqueries.html">queries</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00416">func_odbc.c:416</a></div></div>
<div class="ttc" id="func__odbc_8c_html_ae7f4ac65a8144d36be13e62088f0928c"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#ae7f4ac65a8144d36be13e62088f0928c">cli_func_odbc</a></div><div class="ttdeci">static struct ast_cli_entry cli_func_odbc[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01793">func_odbc.c:1793</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a0dde897da05a8d078cd81e7eaae4eb38"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a0dde897da05a8d078cd81e7eaae4eb38">dsns</a></div><div class="ttdeci">struct ao2_container * dsns</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00159">func_odbc.c:159</a></div></div>
<div class="ttc" id="func__odbc_8c_html_ae851c1b4b77ee97a7206608f0f76e4ff"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#ae851c1b4b77ee97a7206608f0f76e4ff">free_acf_query</a></div><div class="ttdeci">static int free_acf_query(struct acf_odbc_query *query)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01187">func_odbc.c:1187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a54af2a9b29d140908cc9dffd0618951b">AST_MODFLAG_DEFAULT</a> , .description = &quot;ODBC lookups&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload, .requires = &quot;res_odbc&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01978">1978</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

</div>
</div>
<a id="aa0ecd1e714266380d37d9c7b44169b9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0ecd1e714266380d37d9c7b44169b9a">&#9670;&nbsp;</a></span>app_odbcfinish</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* app_odbcfinish = &quot;ODBCFinish&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01171">1171</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01978">1978</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

</div>
</div>
<a id="ae7f4ac65a8144d36be13e62088f0928c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7f4ac65a8144d36be13e62088f0928c">&#9670;&nbsp;</a></span>cli_func_odbc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_func_odbc[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   { .handler =  <a class="code" href="../../dc/d1d/func__odbc_8c.html#a3ff4dea7552e88829b2f9073c05873cf">cli_odbc_write</a> , .summary =  <span class="stringliteral">&quot;Test setting a func_odbc function&quot;</span> ,},</div><div class="line">   { .handler =  <a class="code" href="../../dc/d1d/func__odbc_8c.html#a25c0782a60e9e01a562cc5b740d8058f">cli_odbc_read</a> , .summary =  <span class="stringliteral">&quot;Test reading a func_odbc function&quot;</span> ,},</div><div class="line">}</div><div class="ttc" id="func__odbc_8c_html_a25c0782a60e9e01a562cc5b740d8058f"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a25c0782a60e9e01a562cc5b740d8058f">cli_odbc_read</a></div><div class="ttdeci">static char * cli_odbc_read(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01430">func_odbc.c:1430</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a3ff4dea7552e88829b2f9073c05873cf"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a3ff4dea7552e88829b2f9073c05873cf">cli_odbc_write</a></div><div class="ttdeci">static char * cli_odbc_write(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01643">func_odbc.c:1643</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01793">1793</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

</div>
</div>
<a id="abfd73cf12d607b62314cf0e3facf49db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfd73cf12d607b62314cf0e3facf49db">&#9670;&nbsp;</a></span>coldata_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> coldata_buf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../dc/d1d/func__odbc_8c.html#a6114260a1abad1a08ec8aacf4bda8d63">__init_coldata_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00422">422</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00725">acf_odbc_read()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01430">cli_odbc_read()</a>.</p>

</div>
</div>
<a id="a31a8118aa4db27763d1ed7cca6b6fb6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31a8118aa4db27763d1ed7cca6b6fb6d">&#9670;&nbsp;</a></span>colnames_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> colnames_buf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../dc/d1d/func__odbc_8c.html#a1d0e4794509c52640a4579d385ea5591">__init_colnames_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00423">423</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00725">acf_odbc_read()</a>.</p>

</div>
</div>
<a id="a74bb62276efdf39dd94048e007fca05b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74bb62276efdf39dd94048e007fca05b">&#9670;&nbsp;</a></span>config</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* config = &quot;func_odbc.conf&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00101">101</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01798">load_module()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01897">reload()</a>.</p>

</div>
</div>
<a id="a0dde897da05a8d078cd81e7eaae4eb38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dde897da05a8d078cd81e7eaae4eb38">&#9670;&nbsp;</a></span>dsns</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a>* dsns</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00159">159</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

</div>
</div>
<a id="a24515bf2d45e10e62ce9fdabf1bb4640"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24515bf2d45e10e62ce9fdabf1bb4640">&#9670;&nbsp;</a></span>escape_function</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> escape_function</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .name = <span class="stringliteral">&quot;SQL_ESC&quot;</span>,</div><div class="line">   .read = <a class="code" href="../../dc/d1d/func__odbc_8c.html#afca2fae79f2858c838d31f7930407428">acf_escape</a>,</div><div class="line">   .write = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line">}</div><div class="ttc" id="func__odbc_8c_html_afca2fae79f2858c838d31f7930407428"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#afca2fae79f2858c838d31f7930407428">acf_escape</a></div><div class="ttdeci">static int acf_escape(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01105">func_odbc.c:1105</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01121">1121</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

</div>
</div>
<a id="a61a5debfadee892e1d9e147dc0854bb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61a5debfadee892e1d9e147dc0854bb9">&#9670;&nbsp;</a></span>fetch_function</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> fetch_function</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .name = <span class="stringliteral">&quot;ODBC_FETCH&quot;</span>,</div><div class="line">   .read = <a class="code" href="../../dc/d1d/func__odbc_8c.html#a6ae23d5288c3a6f01163d774ce6b69d0">acf_fetch</a>,</div><div class="line">   .write = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line">}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a6ae23d5288c3a6f01163d774ce6b69d0"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a6ae23d5288c3a6f01163d774ce6b69d0">acf_fetch</a></div><div class="ttdeci">static int acf_fetch(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l01127">func_odbc.c:1127</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01165">1165</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

</div>
</div>
<a id="a3bc58152d3484e15d524d83c08d1aae1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bc58152d3484e15d524d83c08d1aae1">&#9670;&nbsp;</a></span>odbc_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> odbc_info</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .type = <span class="stringliteral">&quot;FUNC_ODBC&quot;</span>,</div><div class="line">   .destroy = <a class="code" href="../../dc/d1d/func__odbc_8c.html#a7dddac97996774e1214b012d38f01151">odbc_datastore_free</a>,</div><div class="line">}</div><div class="ttc" id="func__odbc_8c_html_a7dddac97996774e1214b012d38f01151"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a7dddac97996774e1214b012d38f01151">odbc_datastore_free</a></div><div class="ttdeci">static void odbc_datastore_free(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00427">func_odbc.c:427</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00129">129</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

</div>
</div>
<a id="ae7d73e6410614d6d2c44b07288af0da5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7d73e6410614d6d2c44b07288af0da5">&#9670;&nbsp;</a></span>queries</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/da2/structqueries.html">queries</a>   <a class="el" href="../../db/da2/structqueries.html">queries</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aec8a4781c9b4b9e8b0fec9946dec4fb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec8a4781c9b4b9e8b0fec9946dec4fb8">&#9670;&nbsp;</a></span>resultcount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int resultcount = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00418">418</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

</div>
</div>
<a id="ae1659cc4d45e715dc6daa43e090e718e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1659cc4d45e715dc6daa43e090e718e">&#9670;&nbsp;</a></span>single_db_connection</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int single_db_connection</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00105">105</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00359">get_odbc_obj()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01798">load_module()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01897">reload()</a>.</p>

</div>
</div>
<a id="a154311285bb36392f8065c4dede18cbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a154311285bb36392f8065c4dede18cbe">&#9670;&nbsp;</a></span>single_db_connection_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a> single_db_connection_lock = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00107">107</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00359">get_odbc_obj()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01798">load_module()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01897">reload()</a>.</p>

</div>
</div>
<a id="a4ca7d2852c14b9937eca47d3627b4ce2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ca7d2852c14b9937eca47d3627b4ce2">&#9670;&nbsp;</a></span>sql2_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> sql2_buf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../dc/d1d/func__odbc_8c.html#a6e80fc54bebd4aa46f21684e2be14da4">__init_sql2_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00421">421</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00509">acf_odbc_write()</a>.</p>

</div>
</div>
<a id="afc4bfa5a94710e6f323a1033f82425b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc4bfa5a94710e6f323a1033f82425b3">&#9670;&nbsp;</a></span>sql_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> sql_buf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a2ff160eb8cc768ef928c90bb61ded670">__init_sql_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00420">420</a> of file <a class="el" href="../../dc/d1d/func__odbc_8c_source.html">func_odbc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00725">acf_odbc_read()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00509">acf_odbc_write()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01430">cli_odbc_read()</a>, and <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01643">cli_odbc_write()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:56 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
