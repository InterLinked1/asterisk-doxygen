<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_pjsip_caller_id.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">res_pjsip_caller_id.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;pjsip.h&gt;</code><br />
<code>#include &lt;pjsip_ua.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d8c/res__pjsip_8h_source.html">asterisk/res_pjsip.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html">asterisk/res_pjsip_session.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d47/callerid_8h_source.html">asterisk/callerid.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/dd6/conversions_8h_source.html">asterisk/conversions.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_pjsip_caller_id.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/dd0/res__pjsip__caller__id_8c__incl.png" border="0" usemap="#res__pjsip__caller__id_8c" alt=""/></div>
<map name="res__pjsip__caller__id_8c" id="res__pjsip__caller__id_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="187,393,271,420"/>
<area shape="rect" id="node10" href="../../d8/d8c/res__pjsip_8h.html" title="asterisk/res_pjsip.h" alt="" coords="2002,87,2146,114"/>
<area shape="rect" id="node20" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1493,244,1631,271"/>
<area shape="rect" id="node46" href="../../d9/de7/res__pjsip__session_8h.html" title="asterisk/res_pjsip\l_session.h" alt="" coords="3016,80,3148,121"/>
<area shape="rect" id="node48" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="751,87,887,114"/>
<area shape="rect" id="node49" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr..." alt="" coords="3391,87,3525,114"/>
<area shape="rect" id="node50" href="../../da/dd6/conversions_8h.html" title="Conversion utility functions. " alt="" coords="5,244,169,271"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="134,468,289,495"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="472,468,609,495"/>
<area shape="rect" id="node7" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="313,468,448,495"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="147,543,294,569"/>
<area shape="rect" id="node15" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1122,468,1279,495"/>
<area shape="rect" id="node16" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="2488,543,2615,569"/>
<area shape="rect" id="node18" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="2927,319,3074,345"/>
<area shape="rect" id="node19" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1501,468,1652,495"/>
<area shape="rect" id="node38" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="2112,319,2263,345"/>
<area shape="rect" id="node39" href="../../d8/d25/sorcery_8h.html" title="Sorcery Data Access Layer API. " alt="" coords="1934,169,2067,196"/>
<area shape="rect" id="node40" href="../../db/dc4/dnsmgr_8h.html" title="Background DNS update manager. " alt="" coords="2821,244,2957,271"/>
<area shape="rect" id="node41" href="../../d5/da1/udptl_8h.html" title="UDPTL support for T.38. " alt="" coords="2523,169,2643,196"/>
<area shape="rect" id="node42" href="../../d5/dde/rtp__engine_8h.html" title="Pluggable RTP Architecture. " alt="" coords="2589,244,2745,271"/>
<area shape="rect" id="node43" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="1467,169,1657,196"/>
<area shape="rect" id="node44" href="../../d7/d44/stasis__endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="2171,244,2366,271"/>
<area shape="rect" id="node45" href="../../d8/d95/stream_8h.html" title="Media Stream API. " alt="" coords="3027,468,3161,495"/>
<area shape="rect" id="node17" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1684,617,1797,644"/>
<area shape="rect" id="node21" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="1407,319,1551,345"/>
<area shape="rect" id="node22" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1487,393,1602,420"/>
<area shape="rect" id="node23" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="2048,393,2207,420"/>
<area shape="rect" id="node26" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1779,393,1913,420"/>
<area shape="rect" id="node27" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="987,319,1151,345"/>
<area shape="rect" id="node28" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="2284,393,2411,420"/>
<area shape="rect" id="node29" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="1090,393,1237,420"/>
<area shape="rect" id="node30" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1576,319,1703,345"/>
<area shape="rect" id="node31" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="1175,319,1282,345"/>
<area shape="rect" id="node32" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1261,393,1412,420"/>
<area shape="rect" id="node33" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="2640,319,2801,345"/>
<area shape="rect" id="node34" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="447,319,618,345"/>
<area shape="rect" id="node35" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="643,319,759,345"/>
<area shape="rect" id="node36" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="1829,319,1986,345"/>
<area shape="rect" id="node37" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="2287,319,2413,345"/>
<area shape="rect" id="node24" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="2871,468,3002,495"/>
<area shape="rect" id="node25" href="../../d1/d16/codec_8h.html" title="Codec API. " alt="" coords="3083,543,3209,569"/>
<area shape="rect" id="node47" href="../../de/d5f/sdp__srtp_8h.html" title="SRTP and SDP Security descriptions. " alt="" coords="3092,169,3235,196"/>
</map>
</div>
</div>
<p><a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afb9bb27c57a465eba9b9701fda90d8a7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#afb9bb27c57a465eba9b9701fda90d8a7">MAX_OLI_DIGITS</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:afb9bb27c57a465eba9b9701fda90d8a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae377f3ea1c20886c55e40619a1fa1802"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#ae377f3ea1c20886c55e40619a1fa1802">add_id_headers</a> (const struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, pjsip_tx_data *tdata, const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:ae377f3ea1c20886c55e40619a1fa1802"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5abafe2826df42bee36242e504139d2e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a5abafe2826df42bee36242e504139d2e">add_pai_header</a> (const struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, pjsip_tx_data *tdata, const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:a5abafe2826df42bee36242e504139d2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7f16e9ef06dcfbe8668895a13c4e8b9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#aa7f16e9ef06dcfbe8668895a13c4e8b9">add_party_param</a> (pjsip_tx_data *tdata, pjsip_fromto_hdr *hdr, const struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>)</td></tr>
<tr class="separator:aa7f16e9ef06dcfbe8668895a13c4e8b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a633f8136f1303a8532b34ed879538665"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a633f8136f1303a8532b34ed879538665">add_privacy_header</a> (pjsip_tx_data *tdata, const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:a633f8136f1303a8532b34ed879538665"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21a6881b47fc75ac3e4c7aa8d7660229"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a21a6881b47fc75ac3e4c7aa8d7660229">add_privacy_params</a> (pjsip_tx_data *tdata, pjsip_fromto_hdr *hdr, const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:a21a6881b47fc75ac3e4c7aa8d7660229"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4facd2344678774108d0903495a95272"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a4facd2344678774108d0903495a95272">add_rpid_header</a> (const struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, pjsip_tx_data *tdata, const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:a4facd2344678774108d0903495a95272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4a2297f4074938184ffc73ca643eb31"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#af4a2297f4074938184ffc73ca643eb31">caller_id_incoming_request</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, pjsip_rx_data *rdata)</td></tr>
<tr class="separator:af4a2297f4074938184ffc73ca643eb31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a884a64454750ddb076d2acf3d94ad56b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a884a64454750ddb076d2acf3d94ad56b">caller_id_incoming_response</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, pjsip_rx_data *rdata)</td></tr>
<tr class="separator:a884a64454750ddb076d2acf3d94ad56b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10435c5f1e9899f8f583ae4d829014f7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a10435c5f1e9899f8f583ae4d829014f7">caller_id_outgoing_request</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, pjsip_tx_data *tdata)</td></tr>
<tr class="separator:a10435c5f1e9899f8f583ae4d829014f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cdd40a14d655dd60427a46224c68343"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a0cdd40a14d655dd60427a46224c68343">caller_id_outgoing_response</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, pjsip_tx_data *tdata)</td></tr>
<tr class="separator:a0cdd40a14d655dd60427a46224c68343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6c615e4619d2b7c6d6626d99197505a"><td class="memItemLeft" align="right" valign="top">static pjsip_fromto_hdr *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#aa6c615e4619d2b7c6d6626d99197505a">create_new_id_hdr</a> (const pj_str_t *hdr_name, pjsip_fromto_hdr *base, pjsip_tx_data *tdata, const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:aa6c615e4619d2b7c6d6626d99197505a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04aed2b390c251aaa075de803b8f4c11"><td class="memItemLeft" align="right" valign="top">static pjsip_fromto_hdr *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a04aed2b390c251aaa075de803b8f4c11">get_id_header</a> (pjsip_rx_data *rdata, const pj_str_t *header_name)</td></tr>
<tr class="separator:a04aed2b390c251aaa075de803b8f4c11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3375299399761f19432c744c761336e2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a3375299399761f19432c744c761336e2">queue_connected_line_update</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:a3375299399761f19432c744c761336e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1df63eb9c7486526aa9c0cb846b887d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#aa1df63eb9c7486526aa9c0cb846b887d">set_id_from_from</a> (struct pjsip_rx_data *rdata, struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:aa1df63eb9c7486526aa9c0cb846b887d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1c2d5cc94583d5336165addbbe05890"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#af1c2d5cc94583d5336165addbbe05890">set_id_from_hdr</a> (pjsip_fromto_hdr *hdr, struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:af1c2d5cc94583d5336165addbbe05890"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9f50219f59b4911347acdd2d0aa03da"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#aa9f50219f59b4911347acdd2d0aa03da">set_id_from_oli</a> (pjsip_rx_data *rdata, int *ani2)</td></tr>
<tr class="separator:aa9f50219f59b4911347acdd2d0aa03da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae78444a7f0a0e660a315434970e8b0f2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#ae78444a7f0a0e660a315434970e8b0f2">set_id_from_pai</a> (pjsip_rx_data *rdata, struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:ae78444a7f0a0e660a315434970e8b0f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1c9cd5e65be75228835a60a69d59326"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#af1c9cd5e65be75228835a60a69d59326">set_id_from_rpid</a> (pjsip_rx_data *rdata, struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:af1c9cd5e65be75228835a60a69d59326"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a602337a276201e5bb6cf0db2957a9d4e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a602337a276201e5bb6cf0db2957a9d4e">should_queue_connected_line_update</a> (const struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:a602337a276201e5bb6cf0db2957a9d4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55499dcb22adfb042f81e1def68e70c8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a55499dcb22adfb042f81e1def68e70c8">update_incoming_connected_line</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, pjsip_rx_data *rdata)</td></tr>
<tr class="separator:a55499dcb22adfb042f81e1def68e70c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;PJSIP Caller ID Support&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_APP_DEPEND, .requires = &quot;res_pjsip,res_pjsip_session&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3151d62c32f29cea5e4b15d3ce968b0e"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/db8/structast__sip__session__supplement.html">ast_sip_session_supplement</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a3151d62c32f29cea5e4b15d3ce968b0e">caller_id_supplement</a></td></tr>
<tr class="separator:a3151d62c32f29cea5e4b15d3ce968b0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="afb9bb27c57a465eba9b9701fda90d8a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb9bb27c57a465eba9b9701fda90d8a7">&#9670;&nbsp;</a></span>MAX_OLI_DIGITS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_OLI_DIGITS&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00153">set_id_from_oli()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00861">861</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00861">861</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

</div>
</div>
<a id="ae377f3ea1c20886c55e40619a1fa1802"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae377f3ea1c20886c55e40619a1fa1802">&#9670;&nbsp;</a></span>add_id_headers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_id_headers </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00756">756</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00563">add_pai_header()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00699">add_rpid_header()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01821">ast_party_id_presentation()</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00324">AST_PRES_ALLOWED</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00323">AST_PRES_RESTRICTION</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00847">ast_sip_endpoint::id</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00635">ast_sip_endpoint_id_configuration::send_pai</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00637">ast_sip_endpoint_id_configuration::send_rpid</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00633">ast_sip_endpoint_id_configuration::trust_outbound</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00782">caller_id_outgoing_request()</a>, and <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00810">caller_id_outgoing_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;{</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;   <span class="keywordflow">if</span> (!id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      || (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a54f1b35ed47fddbc454a90daa3b879c7">trust_outbound</a></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;         &amp;&amp; (<a class="code" href="../../d5/d7b/channel_8h.html#a39aac47fef1240391fd97e055522fd83">ast_party_id_presentation</a>(<span class="keywordtype">id</span>) &amp; <a class="code" href="../../de/d47/callerid_8h.html#aec2d69e281c81503bc532e107ca26f66">AST_PRES_RESTRICTION</a>) != <a class="code" href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a>)) {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   }</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#aabb2d775f0834beed9dc43acbdbd5a79">send_pai</a>) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a5abafe2826df42bee36242e504139d2e">add_pai_header</a>(session, tdata, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   }</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#aefefb4f20a7e8f4b9be27b5bdc622cfd">send_rpid</a>) {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a4facd2344678774108d0903495a95272">add_rpid_header</a>(session, tdata, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structast__sip__endpoint__id__configuration_html_aefefb4f20a7e8f4b9be27b5bdc622cfd"><div class="ttname"><a href="../../d4/df6/structast__sip__endpoint__id__configuration.html#aefefb4f20a7e8f4b9be27b5bdc622cfd">ast_sip_endpoint_id_configuration::send_rpid</a></div><div class="ttdeci">unsigned int send_rpid</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00637">res_pjsip.h:637</a></div></div>
<div class="ttc" id="channel_8h_html_a39aac47fef1240391fd97e055522fd83"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a39aac47fef1240391fd97e055522fd83">ast_party_id_presentation</a></div><div class="ttdeci">int ast_party_id_presentation(const struct ast_party_id *id)</div><div class="ttdoc">Determine the overall presentation value for the given party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01821">channel.c:1821</a></div></div>
<div class="ttc" id="structast__sip__endpoint__id__configuration_html_a54f1b35ed47fddbc454a90daa3b879c7"><div class="ttname"><a href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a54f1b35ed47fddbc454a90daa3b879c7">ast_sip_endpoint_id_configuration::trust_outbound</a></div><div class="ttdeci">unsigned int trust_outbound</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00633">res_pjsip.h:633</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a50783ac9bc6f4943369ed254972049ac"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">ast_sip_endpoint::id</a></div><div class="ttdeci">struct ast_sip_endpoint_id_configuration id</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00847">res_pjsip.h:847</a></div></div>
<div class="ttc" id="callerid_8h_html_aec2d69e281c81503bc532e107ca26f66"><div class="ttname"><a href="../../de/d47/callerid_8h.html#aec2d69e281c81503bc532e107ca26f66">AST_PRES_RESTRICTION</a></div><div class="ttdeci">#define AST_PRES_RESTRICTION</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00323">callerid.h:323</a></div></div>
<div class="ttc" id="callerid_8h_html_a4b8463f8be514e1134291b2a9ddaeb35"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a></div><div class="ttdeci">#define AST_PRES_ALLOWED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00324">callerid.h:324</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_a4facd2344678774108d0903495a95272"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#a4facd2344678774108d0903495a95272">add_rpid_header</a></div><div class="ttdeci">static void add_rpid_header(const struct ast_sip_session *session, pjsip_tx_data *tdata, const struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00699">res_pjsip_caller_id.c:699</a></div></div>
<div class="ttc" id="structast__sip__endpoint__id__configuration_html_aabb2d775f0834beed9dc43acbdbd5a79"><div class="ttname"><a href="../../d4/df6/structast__sip__endpoint__id__configuration.html#aabb2d775f0834beed9dc43acbdbd5a79">ast_sip_endpoint_id_configuration::send_pai</a></div><div class="ttdeci">unsigned int send_pai</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00635">res_pjsip.h:635</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_a5abafe2826df42bee36242e504139d2e"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#a5abafe2826df42bee36242e504139d2e">add_pai_header</a></div><div class="ttdeci">static void add_pai_header(const struct ast_sip_session *session, pjsip_tx_data *tdata, const struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00563">res_pjsip_caller_id.c:563</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5abafe2826df42bee36242e504139d2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5abafe2826df42bee36242e504139d2e">&#9670;&nbsp;</a></span>add_pai_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_pai_header </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00563">563</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00538">add_privacy_header()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05587">ast_sip_modify_id_header()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00488">create_new_id_hdr()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00225">ast_sip_session::saved_from_hdr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00756">add_id_headers()</a>.</p>
<div class="fragment"><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;{</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t pj_pai_name = { <span class="stringliteral">&quot;P-Asserted-Identity&quot;</span>, 19 };</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   pjsip_fromto_hdr *base;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   pjsip_fromto_hdr *pai_hdr;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   pjsip_fromto_hdr *old_pai;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="comment">/* Since inv_session reuses responses, we have to make sure there&#39;s not already</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">    * a P-Asserted-Identity present. If there is, we just modify the old one.</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   old_pai = pjsip_msg_find_hdr_by_name(tdata-&gt;msg, &amp;pj_pai_name, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="keywordflow">if</span> (old_pai) {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="comment">/* If type is OTHER, then the existing header was most likely</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">       * added by the PJSIP_HEADER dial plan function as a simple</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">       * name/value pair.  We can&#39;t pass this to modify_id_header because</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">       * there are no virtual functions to get the uri.  We could parse</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">       * it into a pjsip_fromto_hdr but it isn&#39;t worth it since</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">       * modify_id_header is just going to overwrite the name and number</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">       * anyway.  We&#39;ll just remove it from the header list instead</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">       * and create a new one.</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keywordflow">if</span> (old_pai-&gt;type == PJSIP_H_OTHER) {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;         pj_list_erase(old_pai);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;         <a class="code" href="../../d8/d8c/res__pjsip_8h.html#afe1cbe99a485f1e003ecc829b5885eeb">ast_sip_modify_id_header</a>(tdata-&gt;pool, old_pai, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;         <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a633f8136f1303a8532b34ed879538665">add_privacy_header</a>(tdata, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keywordflow">if</span> (tdata-&gt;msg-&gt;type == PJSIP_REQUEST_MSG) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      base = session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8e41e237863941cd7595151b3e9b558a">saved_from_hdr</a> ? session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8e41e237863941cd7595151b3e9b558a">saved_from_hdr</a> : PJSIP_MSG_FROM_HDR(tdata-&gt;msg);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      base = PJSIP_MSG_TO_HDR(tdata-&gt;msg);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   pai_hdr = <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#aa6c615e4619d2b7c6d6626d99197505a">create_new_id_hdr</a>(&amp;pj_pai_name, base, tdata, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   <span class="keywordflow">if</span> (!pai_hdr) {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a633f8136f1303a8532b34ed879538665">add_privacy_header</a>(tdata, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   pjsip_msg_add_hdr(tdata-&gt;msg, (pjsip_hdr *)pai_hdr);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;}</div><div class="ttc" id="res__pjsip__caller__id_8c_html_aa6c615e4619d2b7c6d6626d99197505a"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#aa6c615e4619d2b7c6d6626d99197505a">create_new_id_hdr</a></div><div class="ttdeci">static pjsip_fromto_hdr * create_new_id_hdr(const pj_str_t *hdr_name, pjsip_fromto_hdr *base, pjsip_tx_data *tdata, const struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00488">res_pjsip_caller_id.c:488</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_a633f8136f1303a8532b34ed879538665"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#a633f8136f1303a8532b34ed879538665">add_privacy_header</a></div><div class="ttdeci">static void add_privacy_header(pjsip_tx_data *tdata, const struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00538">res_pjsip_caller_id.c:538</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_afe1cbe99a485f1e003ecc829b5885eeb"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#afe1cbe99a485f1e003ecc829b5885eeb">ast_sip_modify_id_header</a></div><div class="ttdeci">void ast_sip_modify_id_header(pj_pool_t *pool, pjsip_fromto_hdr *id_hdr, const struct ast_party_id *id)</div><div class="ttdoc">Set name and number information on an identity header. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05587">res_pjsip.c:5587</a></div></div>
<div class="ttc" id="structast__sip__session_html_a8e41e237863941cd7595151b3e9b558a"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a8e41e237863941cd7595151b3e9b558a">ast_sip_session::saved_from_hdr</a></div><div class="ttdeci">pjsip_fromto_hdr * saved_from_hdr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00225">res_pjsip_session.h:225</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa7f16e9ef06dcfbe8668895a13c4e8b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7f16e9ef06dcfbe8668895a13c4e8b9">&#9670;&nbsp;</a></span>add_party_param()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_party_param </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_fromto_hdr *&#160;</td>
          <td class="paramname"><em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00616">616</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00699">add_rpid_header()</a>.</p>
<div class="fragment"><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;{</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t party_str = { <span class="stringliteral">&quot;party&quot;</span>, 5 };</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t calling_str = { <span class="stringliteral">&quot;calling&quot;</span>, 7 };</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t called_str = { <span class="stringliteral">&quot;called&quot;</span>, 6 };</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   pjsip_param *party;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <span class="comment">/* The party value can&#39;t change throughout the lifetime, so it is set only once */</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   party = pjsip_param_find(&amp;hdr-&gt;other_param, &amp;party_str);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <span class="keywordflow">if</span> (party) {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   }</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   party = PJ_POOL_ALLOC_T(tdata-&gt;pool, pjsip_param);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   party-&gt;name = party_str;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   party-&gt;value = (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;role == PJSIP_ROLE_UAC) ? calling_str : called_str;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   pj_list_insert_before(&amp;hdr-&gt;other_param, party);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a633f8136f1303a8532b34ed879538665"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a633f8136f1303a8532b34ed879538665">&#9670;&nbsp;</a></span>add_privacy_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_privacy_header </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00538">538</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l01821">ast_party_id_presentation()</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00324">AST_PRES_ALLOWED</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00323">AST_PRES_RESTRICTION</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00563">add_pai_header()</a>.</p>
<div class="fragment"><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;{</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t pj_privacy_name = { <span class="stringliteral">&quot;Privacy&quot;</span>, 7 };</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t pj_privacy_value = { <span class="stringliteral">&quot;id&quot;</span>, 2 };</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   pjsip_hdr *old_privacy;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   old_privacy = pjsip_msg_find_hdr_by_name(tdata-&gt;msg, &amp;pj_privacy_name, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="../../d5/d7b/channel_8h.html#a39aac47fef1240391fd97e055522fd83">ast_party_id_presentation</a>(<span class="keywordtype">id</span>) &amp; <a class="code" href="../../de/d47/callerid_8h.html#aec2d69e281c81503bc532e107ca26f66">AST_PRES_RESTRICTION</a>) == <a class="code" href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a>) {</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <span class="keywordflow">if</span> (old_privacy) {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;         pj_list_erase(old_privacy);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      }</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!old_privacy) {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      pjsip_generic_string_hdr *privacy_hdr = pjsip_generic_string_hdr_create(</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            tdata-&gt;pool, &amp;pj_privacy_name, &amp;pj_privacy_value);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      pjsip_msg_add_hdr(tdata-&gt;msg, (pjsip_hdr *)privacy_hdr);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;}</div><div class="ttc" id="channel_8h_html_a39aac47fef1240391fd97e055522fd83"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a39aac47fef1240391fd97e055522fd83">ast_party_id_presentation</a></div><div class="ttdeci">int ast_party_id_presentation(const struct ast_party_id *id)</div><div class="ttdoc">Determine the overall presentation value for the given party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01821">channel.c:1821</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="callerid_8h_html_aec2d69e281c81503bc532e107ca26f66"><div class="ttname"><a href="../../de/d47/callerid_8h.html#aec2d69e281c81503bc532e107ca26f66">AST_PRES_RESTRICTION</a></div><div class="ttdeci">#define AST_PRES_RESTRICTION</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00323">callerid.h:323</a></div></div>
<div class="ttc" id="callerid_8h_html_a4b8463f8be514e1134291b2a9ddaeb35"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a></div><div class="ttdeci">#define AST_PRES_ALLOWED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00324">callerid.h:324</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a21a6881b47fc75ac3e4c7aa8d7660229"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21a6881b47fc75ac3e4c7aa8d7660229">&#9670;&nbsp;</a></span>add_privacy_params()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_privacy_params </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_fromto_hdr *&#160;</td>
          <td class="paramname"><em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00647">647</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l01821">ast_party_id_presentation()</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00324">AST_PRES_ALLOWED</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00317">AST_PRES_NUMBER_TYPE</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00323">AST_PRES_RESTRICTION</a>, and <a class="el" href="../../de/d47/callerid_8h_source.html#l00319">AST_PRES_USER_NUMBER_PASSED_SCREEN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00699">add_rpid_header()</a>.</p>
<div class="fragment"><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;{</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t privacy_str = { <span class="stringliteral">&quot;privacy&quot;</span>, 7 };</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t screen_str = { <span class="stringliteral">&quot;screen&quot;</span>, 6 };</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t privacy_full_str = { <span class="stringliteral">&quot;full&quot;</span>, 4 };</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t privacy_off_str = { <span class="stringliteral">&quot;off&quot;</span>, 3 };</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t screen_yes_str = { <span class="stringliteral">&quot;yes&quot;</span>, 3 };</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t screen_no_str = { <span class="stringliteral">&quot;no&quot;</span>, 2 };</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   pjsip_param *old_privacy;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   pjsip_param *old_screen;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   pjsip_param *privacy;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   pjsip_param *screen;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="keywordtype">int</span> presentation;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   old_privacy = pjsip_param_find(&amp;hdr-&gt;other_param, &amp;privacy_str);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;   old_screen = pjsip_param_find(&amp;hdr-&gt;other_param, &amp;screen_str);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   <span class="keywordflow">if</span> (!old_privacy) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      privacy = PJ_POOL_ALLOC_T(tdata-&gt;pool, pjsip_param);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      privacy-&gt;name = privacy_str;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      pj_list_insert_before(&amp;hdr-&gt;other_param, privacy);</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      privacy = old_privacy;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   }</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   <span class="keywordflow">if</span> (!old_screen) {</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      screen = PJ_POOL_ALLOC_T(tdata-&gt;pool, pjsip_param);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      screen-&gt;name = screen_str;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      pj_list_insert_before(&amp;hdr-&gt;other_param, screen);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      screen = old_screen;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   }</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   presentation = <a class="code" href="../../d5/d7b/channel_8h.html#a39aac47fef1240391fd97e055522fd83">ast_party_id_presentation</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   <span class="keywordflow">if</span> ((presentation &amp; <a class="code" href="../../de/d47/callerid_8h.html#aec2d69e281c81503bc532e107ca26f66">AST_PRES_RESTRICTION</a>) == <a class="code" href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a>) {</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      privacy-&gt;value = privacy_off_str;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      privacy-&gt;value = privacy_full_str;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   }</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <span class="keywordflow">if</span> ((presentation &amp; <a class="code" href="../../de/d47/callerid_8h.html#aa2dfb2ae7af41bd00f62156828f885d4">AST_PRES_NUMBER_TYPE</a>) == <a class="code" href="../../de/d47/callerid_8h.html#a373e33a23b1df10c39311947fc724b11">AST_PRES_USER_NUMBER_PASSED_SCREEN</a>) {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      screen-&gt;value = screen_yes_str;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      screen-&gt;value = screen_no_str;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;}</div><div class="ttc" id="channel_8h_html_a39aac47fef1240391fd97e055522fd83"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a39aac47fef1240391fd97e055522fd83">ast_party_id_presentation</a></div><div class="ttdeci">int ast_party_id_presentation(const struct ast_party_id *id)</div><div class="ttdoc">Determine the overall presentation value for the given party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01821">channel.c:1821</a></div></div>
<div class="ttc" id="callerid_8h_html_aa2dfb2ae7af41bd00f62156828f885d4"><div class="ttname"><a href="../../de/d47/callerid_8h.html#aa2dfb2ae7af41bd00f62156828f885d4">AST_PRES_NUMBER_TYPE</a></div><div class="ttdeci">#define AST_PRES_NUMBER_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00317">callerid.h:317</a></div></div>
<div class="ttc" id="callerid_8h_html_aec2d69e281c81503bc532e107ca26f66"><div class="ttname"><a href="../../de/d47/callerid_8h.html#aec2d69e281c81503bc532e107ca26f66">AST_PRES_RESTRICTION</a></div><div class="ttdeci">#define AST_PRES_RESTRICTION</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00323">callerid.h:323</a></div></div>
<div class="ttc" id="callerid_8h_html_a373e33a23b1df10c39311947fc724b11"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a373e33a23b1df10c39311947fc724b11">AST_PRES_USER_NUMBER_PASSED_SCREEN</a></div><div class="ttdeci">#define AST_PRES_USER_NUMBER_PASSED_SCREEN</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00319">callerid.h:319</a></div></div>
<div class="ttc" id="callerid_8h_html_a4b8463f8be514e1134291b2a9ddaeb35"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a></div><div class="ttdeci">#define AST_PRES_ALLOWED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00324">callerid.h:324</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4facd2344678774108d0903495a95272"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4facd2344678774108d0903495a95272">&#9670;&nbsp;</a></span>add_rpid_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_rpid_header </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00699">699</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00616">add_party_param()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00647">add_privacy_params()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05587">ast_sip_modify_id_header()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00488">create_new_id_hdr()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00225">ast_sip_session::saved_from_hdr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00756">add_id_headers()</a>.</p>
<div class="fragment"><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;{</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t pj_rpid_name = { <span class="stringliteral">&quot;Remote-Party-ID&quot;</span>, 15 };</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   pjsip_fromto_hdr *base;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   pjsip_fromto_hdr *rpid_hdr;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   pjsip_fromto_hdr *old_rpid;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   <span class="comment">/* Since inv_session reuses responses, we have to make sure there&#39;s not already</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">    * a P-Asserted-Identity present. If there is, we just modify the old one.</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   old_rpid = pjsip_msg_find_hdr_by_name(tdata-&gt;msg, &amp;pj_rpid_name, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   <span class="keywordflow">if</span> (old_rpid) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="comment">/* If type is OTHER, then the existing header was most likely</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment">       * added by the PJSIP_HEADER dial plan function as a simple</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">       * name/value pair.  We can&#39;t pass this to modify_id_header because</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">       * there are no virtual functions to get the uri.  We could parse</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">       * it into a pjsip_fromto_hdr but it isn&#39;t worth it since</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">       * modify_id_header is just going to overwrite the name and number</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">       * anyway.  We&#39;ll just remove it from the header list instead</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">       * and create a new one.</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="keywordflow">if</span> (old_rpid-&gt;type == PJSIP_H_OTHER) {</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;         pj_list_erase(old_rpid);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;         <a class="code" href="../../d8/d8c/res__pjsip_8h.html#afe1cbe99a485f1e003ecc829b5885eeb">ast_sip_modify_id_header</a>(tdata-&gt;pool, old_rpid, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;         <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#aa7f16e9ef06dcfbe8668895a13c4e8b9">add_party_param</a>(tdata, old_rpid, session);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;         <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a21a6881b47fc75ac3e4c7aa8d7660229">add_privacy_params</a>(tdata, old_rpid, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      }</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <span class="keywordflow">if</span> (tdata-&gt;msg-&gt;type == PJSIP_REQUEST_MSG) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      base = session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8e41e237863941cd7595151b3e9b558a">saved_from_hdr</a> ? session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8e41e237863941cd7595151b3e9b558a">saved_from_hdr</a> : PJSIP_MSG_FROM_HDR(tdata-&gt;msg);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      base = PJSIP_MSG_TO_HDR(tdata-&gt;msg);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   }</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   rpid_hdr = <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#aa6c615e4619d2b7c6d6626d99197505a">create_new_id_hdr</a>(&amp;pj_rpid_name, base, tdata, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <span class="keywordflow">if</span> (!rpid_hdr) {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   }</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#aa7f16e9ef06dcfbe8668895a13c4e8b9">add_party_param</a>(tdata, rpid_hdr, session);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a21a6881b47fc75ac3e4c7aa8d7660229">add_privacy_params</a>(tdata, rpid_hdr, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   pjsip_msg_add_hdr(tdata-&gt;msg, (pjsip_hdr *)rpid_hdr);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;}</div><div class="ttc" id="res__pjsip__caller__id_8c_html_aa6c615e4619d2b7c6d6626d99197505a"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#aa6c615e4619d2b7c6d6626d99197505a">create_new_id_hdr</a></div><div class="ttdeci">static pjsip_fromto_hdr * create_new_id_hdr(const pj_str_t *hdr_name, pjsip_fromto_hdr *base, pjsip_tx_data *tdata, const struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00488">res_pjsip_caller_id.c:488</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_a21a6881b47fc75ac3e4c7aa8d7660229"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#a21a6881b47fc75ac3e4c7aa8d7660229">add_privacy_params</a></div><div class="ttdeci">static void add_privacy_params(pjsip_tx_data *tdata, pjsip_fromto_hdr *hdr, const struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00647">res_pjsip_caller_id.c:647</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_afe1cbe99a485f1e003ecc829b5885eeb"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#afe1cbe99a485f1e003ecc829b5885eeb">ast_sip_modify_id_header</a></div><div class="ttdeci">void ast_sip_modify_id_header(pj_pool_t *pool, pjsip_fromto_hdr *id_hdr, const struct ast_party_id *id)</div><div class="ttdoc">Set name and number information on an identity header. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05587">res_pjsip.c:5587</a></div></div>
<div class="ttc" id="structast__sip__session_html_a8e41e237863941cd7595151b3e9b558a"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a8e41e237863941cd7595151b3e9b558a">ast_sip_session::saved_from_hdr</a></div><div class="ttdeci">pjsip_fromto_hdr * saved_from_hdr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00225">res_pjsip_session.h:225</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_aa7f16e9ef06dcfbe8668895a13c4e8b9"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#aa7f16e9ef06dcfbe8668895a13c4e8b9">add_party_param</a></div><div class="ttdeci">static void add_party_param(pjsip_tx_data *tdata, pjsip_fromto_hdr *hdr, const struct ast_sip_session *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00616">res_pjsip_caller_id.c:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00861">861</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

</div>
</div>
<a id="af4a2297f4074938184ffc73ca643eb31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4a2297f4074938184ffc73ca643eb31">&#9670;&nbsp;</a></span>caller_id_incoming_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int caller_id_incoming_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00428">428</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00243">ast_sip_session::ani2</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01765">ast_party_id_copy()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00207">ast_sip_session::id</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00847">ast_sip_endpoint::id</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00629">ast_sip_endpoint_id_configuration::self</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00284">set_id_from_from()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00153">set_id_from_oli()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00191">set_id_from_pai()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00232">set_id_from_rpid()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00355">ast_party_id::tag</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00631">ast_sip_endpoint_id_configuration::trust_inbound</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00398">update_incoming_connected_line()</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>
<div class="fragment"><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;{</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="keywordtype">int</span> ani2;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">       * Since we have no channel this must be the initial inbound</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">       * INVITE.  Set the session ID directly because the channel</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">       * has not been created yet.</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a779cb7173ab8c2d34b2afaeb1c6ba2c5">trust_inbound</a></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;         &amp;&amp; (!<a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#ae78444a7f0a0e660a315434970e8b0f2">set_id_from_pai</a>(rdata, &amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>)</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            || !<a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#af1c9cd5e65be75228835a60a69d59326">set_id_from_rpid</a>(rdata, &amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>))) {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;         session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a179b9758f096dc75be612d5f4e5f07cc">self</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>, &amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a179b9758f096dc75be612d5f4e5f07cc">self</a>);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a179b9758f096dc75be612d5f4e5f07cc">self</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;         <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#aa1df63eb9c7486526aa9c0cb846b887d">set_id_from_from</a>(rdata, &amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#aa9f50219f59b4911347acdd2d0aa03da">set_id_from_oli</a>(rdata, &amp;ani2)) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;         session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a> = 0;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">       * ReINVITE or UPDATE.  Check for changes to the ID and queue</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">       * a connected line update if necessary.</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a55499dcb22adfb042f81e1def68e70c8">update_incoming_connected_line</a>(session, rdata);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;}</div><div class="ttc" id="res__pjsip__caller__id_8c_html_aa9f50219f59b4911347acdd2d0aa03da"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#aa9f50219f59b4911347acdd2d0aa03da">set_id_from_oli</a></div><div class="ttdeci">static int set_id_from_oli(pjsip_rx_data *rdata, int *ani2)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00153">res_pjsip_caller_id.c:153</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structast__sip__session_html_ad3bdbbc7177d5ac309bc72f9fc3c4bee"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ast_sip_session::ani2</a></div><div class="ttdeci">int ani2</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00243">res_pjsip_session.h:243</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_af1c9cd5e65be75228835a60a69d59326"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#af1c9cd5e65be75228835a60a69d59326">set_id_from_rpid</a></div><div class="ttdeci">static int set_id_from_rpid(pjsip_rx_data *rdata, struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00232">res_pjsip_caller_id.c:232</a></div></div>
<div class="ttc" id="channel_8h_html_abbf5c9830dd3533f3a6d5d35f941effb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a></div><div class="ttdeci">void ast_party_id_copy(struct ast_party_id *dest, const struct ast_party_id *src)</div><div class="ttdoc">Copy the source party id information to the destination party id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01765">channel.c:1765</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a50783ac9bc6f4943369ed254972049ac"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">ast_sip_endpoint::id</a></div><div class="ttdeci">struct ast_sip_endpoint_id_configuration id</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00847">res_pjsip.h:847</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_ae78444a7f0a0e660a315434970e8b0f2"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#ae78444a7f0a0e660a315434970e8b0f2">set_id_from_pai</a></div><div class="ttdeci">static int set_id_from_pai(pjsip_rx_data *rdata, struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00191">res_pjsip_caller_id.c:191</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_aa1df63eb9c7486526aa9c0cb846b887d"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#aa1df63eb9c7486526aa9c0cb846b887d">set_id_from_from</a></div><div class="ttdeci">static int set_id_from_from(struct pjsip_rx_data *rdata, struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00284">res_pjsip_caller_id.c:284</a></div></div>
<div class="ttc" id="structast__sip__endpoint__id__configuration_html_a779cb7173ab8c2d34b2afaeb1c6ba2c5"><div class="ttname"><a href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a779cb7173ab8c2d34b2afaeb1c6ba2c5">ast_sip_endpoint_id_configuration::trust_inbound</a></div><div class="ttdeci">unsigned int trust_inbound</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00631">res_pjsip.h:631</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_a55499dcb22adfb042f81e1def68e70c8"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#a55499dcb22adfb042f81e1def68e70c8">update_incoming_connected_line</a></div><div class="ttdeci">static void update_incoming_connected_line(struct ast_sip_session *session, pjsip_rx_data *rdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00398">res_pjsip_caller_id.c:398</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__party__id_html_a7bb5e40c10df6a41df64bda1f4bb3e26"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">ast_party_id::tag</a></div><div class="ttdeci">char * tag</div><div class="ttdoc">User-set &quot;tag&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00355">channel.h:355</a></div></div>
<div class="ttc" id="structast__sip__endpoint__id__configuration_html_a179b9758f096dc75be612d5f4e5f07cc"><div class="ttname"><a href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a179b9758f096dc75be612d5f4e5f07cc">ast_sip_endpoint_id_configuration::self</a></div><div class="ttdeci">struct ast_party_id self</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00629">res_pjsip.h:629</a></div></div>
<div class="ttc" id="structast__sip__session_html_a8791d240f8a9c2dc271a1c8542cfe8cc"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">ast_sip_session::id</a></div><div class="ttdeci">struct ast_party_id id</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00207">res_pjsip_session.h:207</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a884a64454750ddb076d2acf3d94ad56b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a884a64454750ddb076d2acf3d94ad56b">&#9670;&nbsp;</a></span>caller_id_incoming_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void caller_id_incoming_response </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00471">471</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, and <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00398">update_incoming_connected_line()</a>.</p>
<div class="fragment"><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;{</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a55499dcb22adfb042f81e1def68e70c8">update_incoming_connected_line</a>(session, rdata);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_a55499dcb22adfb042f81e1def68e70c8"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#a55499dcb22adfb042f81e1def68e70c8">update_incoming_connected_line</a></div><div class="ttdeci">static void update_incoming_connected_line(struct ast_sip_session *session, pjsip_rx_data *rdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00398">res_pjsip_caller_id.c:398</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a10435c5f1e9899f8f583ae4d829014f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10435c5f1e9899f8f583ae4d829014f7">&#9670;&nbsp;</a></span>caller_id_outgoing_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void caller_id_outgoing_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00782">782</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00756">add_id_headers()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00900">ast_channel_connected_effective_id()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01765">ast_party_id_copy()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01811">ast_party_id_free()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01757">ast_party_id_init()</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>.</p>
<div class="fragment"><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;{</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> effective_id;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> connected_id;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   }</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(&amp;connected_id);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   effective_id = <a class="code" href="../../d5/d7b/channel_8h.html#abd6165fa9617e1bb5efee3befa3e963d">ast_channel_connected_effective_id</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;connected_id, &amp;effective_id);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#ae377f3ea1c20886c55e40619a1fa1802">add_id_headers</a>(session, tdata, &amp;connected_id);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(&amp;connected_id);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;}</div><div class="ttc" id="structast__party__id_html"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html">ast_party_id</a></div><div class="ttdoc">Information needed to identify an endpoint in a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00339">channel.h:339</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="channel_8h_html_abbf5c9830dd3533f3a6d5d35f941effb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a></div><div class="ttdeci">void ast_party_id_copy(struct ast_party_id *dest, const struct ast_party_id *src)</div><div class="ttdoc">Copy the source party id information to the destination party id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01765">channel.c:1765</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_ae377f3ea1c20886c55e40619a1fa1802"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#ae377f3ea1c20886c55e40619a1fa1802">add_id_headers</a></div><div class="ttdeci">static void add_id_headers(const struct ast_sip_session *session, pjsip_tx_data *tdata, const struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00756">res_pjsip_caller_id.c:756</a></div></div>
<div class="ttc" id="channel_8h_html_a5399dc7357197254794b990b263a2b7b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a></div><div class="ttdeci">void ast_party_id_free(struct ast_party_id *doomed)</div><div class="ttdoc">Destroy the party id contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01811">channel.c:1811</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="channel_8h_html_abd6165fa9617e1bb5efee3befa3e963d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abd6165fa9617e1bb5efee3befa3e963d">ast_channel_connected_effective_id</a></div><div class="ttdeci">struct ast_party_id ast_channel_connected_effective_id(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00900">channel_internal_api.c:900</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a2126ac3bbc1a14f6ed5ccdfcbb851776"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a></div><div class="ttdeci">void ast_party_id_init(struct ast_party_id *init)</div><div class="ttdoc">Initialize the given party id structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01757">channel.c:1757</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0cdd40a14d655dd60427a46224c68343"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cdd40a14d655dd60427a46224c68343">&#9670;&nbsp;</a></span>caller_id_outgoing_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void caller_id_outgoing_response </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00810">810</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00756">add_id_headers()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00900">ast_channel_connected_effective_id()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01765">ast_party_id_copy()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01811">ast_party_id_free()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01757">ast_party_id_init()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00847">ast_sip_endpoint::id</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00645">ast_sip_endpoint_id_configuration::send_connected_line</a>.</p>
<div class="fragment"><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;{</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> effective_id;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> connected_id;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      || (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a858d40415a9622fddfefb0f0e8499d06">send_connected_line</a></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;         &amp;&amp; session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;         &amp;&amp; session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;state &gt;= PJSIP_INV_STATE_EARLY)) {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   <span class="comment">/* Must do a deep copy unless we hold the channel lock the entire time. */</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(&amp;connected_id);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   effective_id = <a class="code" href="../../d5/d7b/channel_8h.html#abd6165fa9617e1bb5efee3befa3e963d">ast_channel_connected_effective_id</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;connected_id, &amp;effective_id);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#ae377f3ea1c20886c55e40619a1fa1802">add_id_headers</a>(session, tdata, &amp;connected_id);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(&amp;connected_id);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;}</div><div class="ttc" id="structast__party__id_html"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html">ast_party_id</a></div><div class="ttdoc">Information needed to identify an endpoint in a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00339">channel.h:339</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="channel_8h_html_abbf5c9830dd3533f3a6d5d35f941effb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a></div><div class="ttdeci">void ast_party_id_copy(struct ast_party_id *dest, const struct ast_party_id *src)</div><div class="ttdoc">Copy the source party id information to the destination party id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01765">channel.c:1765</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_ae377f3ea1c20886c55e40619a1fa1802"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#ae377f3ea1c20886c55e40619a1fa1802">add_id_headers</a></div><div class="ttdeci">static void add_id_headers(const struct ast_sip_session *session, pjsip_tx_data *tdata, const struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00756">res_pjsip_caller_id.c:756</a></div></div>
<div class="ttc" id="channel_8h_html_a5399dc7357197254794b990b263a2b7b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a></div><div class="ttdeci">void ast_party_id_free(struct ast_party_id *doomed)</div><div class="ttdoc">Destroy the party id contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01811">channel.c:1811</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="structast__sip__endpoint__id__configuration_html_a858d40415a9622fddfefb0f0e8499d06"><div class="ttname"><a href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a858d40415a9622fddfefb0f0e8499d06">ast_sip_endpoint_id_configuration::send_connected_line</a></div><div class="ttdeci">unsigned int send_connected_line</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00645">res_pjsip.h:645</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a50783ac9bc6f4943369ed254972049ac"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">ast_sip_endpoint::id</a></div><div class="ttdeci">struct ast_sip_endpoint_id_configuration id</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00847">res_pjsip.h:847</a></div></div>
<div class="ttc" id="channel_8h_html_abd6165fa9617e1bb5efee3befa3e963d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abd6165fa9617e1bb5efee3befa3e963d">ast_channel_connected_effective_id</a></div><div class="ttdeci">struct ast_party_id ast_channel_connected_effective_id(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00900">channel_internal_api.c:900</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a2126ac3bbc1a14f6ed5ccdfcbb851776"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a></div><div class="ttdeci">void ast_party_id_init(struct ast_party_id *init)</div><div class="ttdoc">Initialize the given party id structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01757">channel.c:1757</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6c615e4619d2b7c6d6626d99197505a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6c615e4619d2b7c6d6626d99197505a">&#9670;&nbsp;</a></span>create_new_id_hdr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pjsip_fromto_hdr* create_new_id_hdr </td>
          <td>(</td>
          <td class="paramtype">const pj_str_t *&#160;</td>
          <td class="paramname"><em>hdr_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_fromto_hdr *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00488">488</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00635">ast_escape_quoted()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00341">ast_party_id::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00265">ast_party_name::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00280">ast_party_name::valid</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00563">add_pai_header()</a>, and <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00699">add_rpid_header()</a>.</p>
<div class="fragment"><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;{</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   pjsip_fromto_hdr *id_hdr;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   pjsip_name_addr *id_name_addr;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   pjsip_sip_uri *id_uri;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   id_hdr = pjsip_from_hdr_create(tdata-&gt;pool);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   id_hdr-&gt;type = PJSIP_H_OTHER;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   id_hdr-&gt;sname = id_hdr-&gt;name = *hdr_name;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   id_name_addr = pjsip_uri_clone(tdata-&gt;pool, base-&gt;uri);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   id_uri = pjsip_uri_get_uri(id_name_addr-&gt;uri);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   <span class="keywordflow">if</span> (id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>)) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keywordtype">int</span> name_buf_len = strlen(id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) * 2 + 1;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordtype">char</span> *name_buf = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(name_buf_len);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a4b31ed81ab98c5aa5fc1d298874abf54">ast_escape_quoted</a>(id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, name_buf, name_buf_len);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      pj_strdup2(tdata-&gt;pool, &amp;id_name_addr-&gt;display, name_buf);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">       * We need to clear the remnants of the clone or it&#39;ll be left set.</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">       * pj_strdup2 is safe to call with a NULL src and it resets both slen and ptr.</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      pj_strdup2(tdata-&gt;pool, &amp;id_name_addr-&gt;display, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <span class="keywordflow">if</span> (id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      pj_strdup2(tdata-&gt;pool, &amp;id_uri-&gt;user, id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      <span class="comment">/* Similar to name, make sure the number is also cleared when invalid */</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      pj_strdup2(tdata-&gt;pool, &amp;id_uri-&gt;user, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   id_hdr-&gt;uri = (pjsip_uri *) id_name_addr;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   <span class="keywordflow">return</span> id_hdr;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;}</div><div class="ttc" id="structast__party__number_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_number::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00292">channel.h:292</a></div></div>
<div class="ttc" id="structast__party__id_html_aab4036618469f3fa9ab26a22726ba2db"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">ast_party_id::name</a></div><div class="ttdeci">struct ast_party_name name</div><div class="ttdoc">Subscriber name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00341">channel.h:341</a></div></div>
<div class="ttc" id="structast__party__name_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_name::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber name (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00265">channel.h:265</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="utils_8h_html_a4b31ed81ab98c5aa5fc1d298874abf54"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4b31ed81ab98c5aa5fc1d298874abf54">ast_escape_quoted</a></div><div class="ttdeci">char * ast_escape_quoted(const char *string, char *outbuf, int buflen)</div><div class="ttdoc">Escape characters found in a quoted string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00635">main/utils.c:635</a></div></div>
<div class="ttc" id="structast__party__name_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_name::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the name information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00280">channel.h:280</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a04aed2b390c251aaa075de803b8f4c11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04aed2b390c251aaa075de803b8f4c11">&#9670;&nbsp;</a></span>get_id_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pjsip_fromto_hdr* get_id_header </td>
          <td>(</td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pj_str_t *&#160;</td>
          <td class="paramname"><em>header_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00098">98</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00153">set_id_from_oli()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00191">set_id_from_pai()</a>, and <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00232">set_id_from_rpid()</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t from = { <span class="stringliteral">&quot;From&quot;</span>, 4 };</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   pj_str_t header_content;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   pjsip_fromto_hdr *parsed_hdr;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   pjsip_generic_string_hdr *ident = pjsip_msg_find_hdr_by_name(rdata-&gt;msg_info.msg,</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;         header_name, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;   <span class="keywordtype">int</span> parsed_len;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;   <span class="keywordflow">if</span> (!ident) {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;   }</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   </div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Doing checks now\n&quot;</span>);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;   </div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   <span class="keywordflow">if</span> (!(rdata)) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;NULL 1\n&quot;</span>);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   <span class="keywordflow">if</span> (!ident) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;NULL 3\n&quot;</span>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   </div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   <span class="keywordflow">if</span> (!rdata-&gt;tp_info.pool) {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;NULL 11\n&quot;</span>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   <span class="keywordflow">if</span> (!&amp;ident-&gt;hvalue) {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;NULL 13\n&quot;</span>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   </div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;strlens %lu %lu\n&quot;</span>, pj_strlen(&amp;header_content), pj_strlen(&amp;ident-&gt;hvalue));</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   </div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   pj_strdup_with_null(rdata-&gt;tp_info.pool, &amp;header_content, &amp;ident-&gt;hvalue);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   parsed_hdr = pjsip_parse_hdr(rdata-&gt;tp_info.pool, &amp;from, header_content.ptr,</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;         pj_strlen(&amp;header_content), &amp;parsed_len);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   <span class="keywordflow">if</span> (!parsed_hdr) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   <span class="keywordflow">return</span> parsed_hdr;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00842">842</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00464">ast_module_shutdown_ref</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00616">ast_sip_session_register_supplement</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00849">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;{</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#a9967b09817639f2e15c3f074a60b6379">ast_module_shutdown_ref</a>(AST_MODULE_SELF);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aa21df5d2fdfb2d6e2734a3056ec3db7c">ast_sip_session_register_supplement</a>(&amp;<a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a3151d62c32f29cea5e4b15d3ce968b0e">caller_id_supplement</a>);</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_a3151d62c32f29cea5e4b15d3ce968b0e"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#a3151d62c32f29cea5e4b15d3ce968b0e">caller_id_supplement</a></div><div class="ttdeci">static struct ast_sip_session_supplement caller_id_supplement</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00833">res_pjsip_caller_id.c:833</a></div></div>
<div class="ttc" id="module_8h_html_a9967b09817639f2e15c3f074a60b6379"><div class="ttname"><a href="../../d5/d16/module_8h.html#a9967b09817639f2e15c3f074a60b6379">ast_module_shutdown_ref</a></div><div class="ttdeci">#define ast_module_shutdown_ref(mod)</div><div class="ttdoc">Prevent unload of the module before shutdown. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00464">module.h:464</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_aa21df5d2fdfb2d6e2734a3056ec3db7c"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aa21df5d2fdfb2d6e2734a3056ec3db7c">ast_sip_session_register_supplement</a></div><div class="ttdeci">#define ast_sip_session_register_supplement(supplement)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00616">res_pjsip_session.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3375299399761f19432c744c761336e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3375299399761f19432c744c761336e2">&#9670;&nbsp;</a></span>queue_connected_line_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void queue_connected_line_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00362">362</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l00428">ast_party_caller::ani</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00434">ast_party_caller::ani2</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l09202">ast_channel_queue_connected_line_update()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07472">ast_channel_set_caller_event()</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00446">AST_CONNECTED_LINE_UPDATE_SOURCE_ANSWER</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01978">ast_party_caller_init()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02022">ast_party_connected_line_init()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01765">ast_party_id_copy()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00207">ast_sip_session::id</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00421">ast_party_caller::id</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00459">ast_party_connected_line::id</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00847">ast_sip_endpoint::id</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l01507">id</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00629">ast_sip_endpoint_id_configuration::self</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00483">ast_party_connected_line::source</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00355">ast_party_id::tag</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00398">update_incoming_connected_line()</a>.</p>
<div class="fragment"><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;{</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> caller;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <span class="comment">/* Fill connected line information */</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a>(&amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id = *<a class="code" href="../../da/dfb/app__queue_8c.html#acd1f0e9b4730ec60f62cb0806cb06ef1">id</a>;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id.tag = session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a179b9758f096dc75be612d5f4e5f07cc">self</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.source = <a class="code" href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1bac0f31b03872d178b92b054fb07358495">AST_CONNECTED_LINE_UPDATE_SOURCE_ANSWER</a>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <span class="comment">/* Save to channel driver copy */</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>, &amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <span class="comment">/* Update our channel CALLERID() */</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#afdaf014aa17389de35cba4df16860b0d">ast_party_caller_init</a>(&amp;caller);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   caller.id = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   caller.ani = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   caller.ani2 = <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a>;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a46837c158733334d2bb155bbd827ddb8">ast_channel_set_caller_event</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, &amp;caller, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <span class="comment">/* Tell peer about the new connected line information. */</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ade57349a78b2f32d3a7d1bc01fb3bf96">ast_channel_queue_connected_line_update</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, &amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="channel_8h_html_abf514b9d96a1821a33fec8c64ee4e26f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a></div><div class="ttdeci">void ast_party_connected_line_init(struct ast_party_connected_line *init)</div><div class="ttdoc">Initialize the given connected line structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02022">channel.c:2022</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="channel_8h_html_a46837c158733334d2bb155bbd827ddb8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a46837c158733334d2bb155bbd827ddb8">ast_channel_set_caller_event</a></div><div class="ttdeci">void ast_channel_set_caller_event(struct ast_channel *chan, const struct ast_party_caller *caller, const struct ast_set_party_caller *update)</div><div class="ttdoc">Set the caller id information in the Asterisk channel and generate an AMI event if the caller id name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07472">channel.c:7472</a></div></div>
<div class="ttc" id="channel_8h_html_abbf5c9830dd3533f3a6d5d35f941effb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a></div><div class="ttdeci">void ast_party_id_copy(struct ast_party_id *dest, const struct ast_party_id *src)</div><div class="ttdoc">Copy the source party id information to the destination party id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01765">channel.c:1765</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="callerid_8h_html_a5cdbc47cd18e7f41d450e9caea186b1bac0f31b03872d178b92b054fb07358495"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1bac0f31b03872d178b92b054fb07358495">AST_CONNECTED_LINE_UPDATE_SOURCE_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00446">callerid.h:446</a></div></div>
<div class="ttc" id="channel_8h_html_ade57349a78b2f32d3a7d1bc01fb3bf96"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ade57349a78b2f32d3a7d1bc01fb3bf96">ast_channel_queue_connected_line_update</a></div><div class="ttdeci">void ast_channel_queue_connected_line_update(struct ast_channel *chan, const struct ast_party_connected_line *connected, const struct ast_set_party_connected_line *update)</div><div class="ttdoc">Queue a connected line update frame on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09202">channel.c:9202</a></div></div>
<div class="ttc" id="structast__party__caller_html"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html">ast_party_caller</a></div><div class="ttdoc">Caller Party information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00419">channel.h:419</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a50783ac9bc6f4943369ed254972049ac"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">ast_sip_endpoint::id</a></div><div class="ttdeci">struct ast_sip_endpoint_id_configuration id</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00847">res_pjsip.h:847</a></div></div>
<div class="ttc" id="structast__party__caller_html_ad3bdbbc7177d5ac309bc72f9fc3c4bee"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ast_party_caller::ani2</a></div><div class="ttdeci">int ani2</div><div class="ttdoc">Automatic Number Identification 2 (Info Digits) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00434">channel.h:434</a></div></div>
<div class="ttc" id="structast__party__connected__line_html"><div class="ttname"><a href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a></div><div class="ttdoc">Connected Line/Party information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00457">channel.h:457</a></div></div>
<div class="ttc" id="structast__party__id_html_a7bb5e40c10df6a41df64bda1f4bb3e26"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">ast_party_id::tag</a></div><div class="ttdeci">char * tag</div><div class="ttdoc">User-set &quot;tag&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00355">channel.h:355</a></div></div>
<div class="ttc" id="structast__sip__endpoint__id__configuration_html_a179b9758f096dc75be612d5f4e5f07cc"><div class="ttname"><a href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a179b9758f096dc75be612d5f4e5f07cc">ast_sip_endpoint_id_configuration::self</a></div><div class="ttdeci">struct ast_party_id self</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00629">res_pjsip.h:629</a></div></div>
<div class="ttc" id="app__queue_8c_html_acd1f0e9b4730ec60f62cb0806cb06ef1"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#acd1f0e9b4730ec60f62cb0806cb06ef1">id</a></div><div class="ttdeci">enum queue_result id</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01507">app_queue.c:1507</a></div></div>
<div class="ttc" id="channel_8h_html_afdaf014aa17389de35cba4df16860b0d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afdaf014aa17389de35cba4df16860b0d">ast_party_caller_init</a></div><div class="ttdeci">void ast_party_caller_init(struct ast_party_caller *init)</div><div class="ttdoc">Initialize the given caller structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01978">channel.c:1978</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a414b69d7583bb4cfc6daf5276aac6d14"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a></div><div class="ttdeci">char connected</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00082">eagi_proxy.c:82</a></div></div>
<div class="ttc" id="structast__sip__session_html_a8791d240f8a9c2dc271a1c8542cfe8cc"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">ast_sip_session::id</a></div><div class="ttdeci">struct ast_party_id id</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00207">res_pjsip_session.h:207</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa1df63eb9c7486526aa9c0cb846b887d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1df63eb9c7486526aa9c0cb846b887d">&#9670;&nbsp;</a></span>set_id_from_from()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int set_id_from_from </td>
          <td>(</td>
          <td class="paramtype">struct pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00284">284</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00044">set_id_from_hdr()</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00428">caller_id_incoming_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;{</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   pjsip_fromto_hdr *from = pjsip_msg_find_hdr(rdata-&gt;msg_info.msg,</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;         PJSIP_H_FROM, rdata-&gt;msg_info.msg-&gt;hdr.next);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   <span class="keywordflow">if</span> (!from) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="comment">/* This had better not happen */</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   }</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#af1c2d5cc94583d5336165addbbe05890">set_id_from_hdr</a>(from, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <span class="keywordflow">if</span> (!id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div><div class="ttc" id="res__pjsip__caller__id_8c_html_af1c2d5cc94583d5336165addbbe05890"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#af1c2d5cc94583d5336165addbbe05890">set_id_from_hdr</a></div><div class="ttdeci">static void set_id_from_hdr(pjsip_fromto_hdr *hdr, struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00044">res_pjsip_caller_id.c:44</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af1c2d5cc94583d5336165addbbe05890"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1c2d5cc94583d5336165addbbe05890">&#9670;&nbsp;</a></span>set_id_from_hdr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_id_from_hdr </td>
          <td>(</td>
          <td class="paramtype">pjsip_fromto_hdr *&#160;</td>
          <td class="paramname"><em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00044">44</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l00172">AST_CHANNEL_NAME</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00165">cid_name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00164">cid_num</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00341">ast_party_id::name</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00265">ast_party_name::str</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00284">set_id_from_from()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00191">set_id_from_pai()</a>, and <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00232">set_id_from_rpid()</a>.</p>
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>[<a class="code" href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a>];</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>[<a class="code" href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a>];</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;   pjsip_sip_uri *uri;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;   pjsip_name_addr *id_name_addr = (pjsip_name_addr *) hdr-&gt;uri;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;   <span class="keywordtype">char</span> *semi;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;   uri = pjsip_uri_get_uri(id_name_addr);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;   <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(cid_name, &amp;id_name_addr-&gt;display, <span class="keyword">sizeof</span>(cid_name));</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;   <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(cid_num, &amp;uri-&gt;user, <span class="keyword">sizeof</span>(cid_num));</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;   <span class="comment">/* Always truncate caller-id number at a semicolon. */</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;   semi = strchr(cid_num, <span class="charliteral">&#39;;&#39;</span>);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;   <span class="keywordflow">if</span> (semi) {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">       * We need to be able to handle URI&#39;s looking like</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">       * &quot;sip:1235557890;phone-context=national@x.x.x.x;user=phone&quot;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">       * Where the uri-&gt;user field will result in:</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">       * &quot;1235557890;phone-context=national&quot;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">       * People don&#39;t care about anything after the semicolon</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">       * showing up on their displays even though the RFC</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">       * allows the semicolon.</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      *semi = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;   }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   <span class="keywordtype">id</span>-&gt;name.str = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(cid_name);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cid_name)) {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <span class="keywordtype">id</span>-&gt;name.valid = 1;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;   }</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;   <span class="keywordtype">id</span>-&gt;number.str = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(cid_num);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cid_num)) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <span class="keywordtype">id</span>-&gt;number.valid = 1;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;   }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div><div class="ttc" id="structast__party__number_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_number::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00292">channel.h:292</a></div></div>
<div class="ttc" id="structast__party__id_html_aab4036618469f3fa9ab26a22726ba2db"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">ast_party_id::name</a></div><div class="ttdeci">struct ast_party_name name</div><div class="ttdoc">Subscriber name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00341">channel.h:341</a></div></div>
<div class="ttc" id="structast__party__name_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_name::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber name (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00265">channel.h:265</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a29e973bd94bfbaf59d939bd1bc988c32"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a></div><div class="ttdeci">static char cid_num[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00164">chan_mgcp.c:164</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="channel_8h_html_ab57c278099ea5f8d7cedbb41eba58b56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a></div><div class="ttdeci">#define AST_CHANNEL_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00172">channel.h:172</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ade5a89f9bee15a492c760ec1765a292d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a></div><div class="ttdeci">static char cid_name[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00165">chan_mgcp.c:165</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa9f50219f59b4911347acdd2d0aa03da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9f50219f59b4911347acdd2d0aa03da">&#9670;&nbsp;</a></span>set_id_from_oli()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int set_id_from_oli </td>
          <td>(</td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ani2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00153">153</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../d6/d1e/conversions_8c_source.html#l00044">ast_str_to_int()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00098">get_id_header()</a>, and <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c.html#afb9bb27c57a465eba9b9701fda90d8a7">MAX_OLI_DIGITS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00428">caller_id_incoming_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;{</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">   #define MAX_OLI_DIGITS 2</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   <span class="keywordtype">char</span> oli[<a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#afb9bb27c57a465eba9b9701fda90d8a7">MAX_OLI_DIGITS</a> + 1];</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t from = { <span class="stringliteral">&quot;From&quot;</span>, 4 };</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t oli_str1 = { <span class="stringliteral">&quot;oli&quot;</span>, 3 };</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t oli_str2 = { <span class="stringliteral">&quot;isup-oli&quot;</span>, 8 };</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t oli_str3 = { <span class="stringliteral">&quot;ss7-oli&quot;</span>, 7 };</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   <span class="keyword">const</span> pjsip_param *oli1, *oli2, *oli3;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   pjsip_fromto_hdr *from_hdr = <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a04aed2b390c251aaa075de803b8f4c11">get_id_header</a>(rdata, &amp;from);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <span class="keywordflow">if</span> (!from_hdr) {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <span class="keywordflow">if</span> ((oli1 = pjsip_param_find(&amp;from_hdr-&gt;other_param, &amp;oli_str1))) {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(oli, &amp;oli1-&gt;value, <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#afb9bb27c57a465eba9b9701fda90d8a7">MAX_OLI_DIGITS</a>);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/dd6/conversions_8h.html#a9936af88e7561021c10562cd7e937c4b">ast_str_to_int</a>(oli, <a class="code" href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a>);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((oli2 = pjsip_param_find(&amp;from_hdr-&gt;other_param, &amp;oli_str2))) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(oli, &amp;oli2-&gt;value, <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#afb9bb27c57a465eba9b9701fda90d8a7">MAX_OLI_DIGITS</a>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/dd6/conversions_8h.html#a9936af88e7561021c10562cd7e937c4b">ast_str_to_int</a>(oli, <a class="code" href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((oli3 = pjsip_param_find(&amp;from_hdr-&gt;other_param, &amp;oli_str3))) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(oli, &amp;oli3-&gt;value, <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#afb9bb27c57a465eba9b9701fda90d8a7">MAX_OLI_DIGITS</a>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/dd6/conversions_8h.html#a9936af88e7561021c10562cd7e937c4b">ast_str_to_int</a>(oli, <a class="code" href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a>);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div><div class="ttc" id="res__pjsip__caller__id_8c_html_a04aed2b390c251aaa075de803b8f4c11"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#a04aed2b390c251aaa075de803b8f4c11">get_id_header</a></div><div class="ttdeci">static pjsip_fromto_hdr * get_id_header(pjsip_rx_data *rdata, const pj_str_t *header_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00098">res_pjsip_caller_id.c:98</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="conversions_8h_html_a9936af88e7561021c10562cd7e937c4b"><div class="ttname"><a href="../../da/dd6/conversions_8h.html#a9936af88e7561021c10562cd7e937c4b">ast_str_to_int</a></div><div class="ttdeci">int ast_str_to_int(const char *str, int *res)</div><div class="ttdoc">Convert the given string to a signed integer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d1e/conversions_8c_source.html#l00044">conversions.c:44</a></div></div>
<div class="ttc" id="structast__party__caller_html_ad3bdbbc7177d5ac309bc72f9fc3c4bee"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ast_party_caller::ani2</a></div><div class="ttdeci">int ani2</div><div class="ttdoc">Automatic Number Identification 2 (Info Digits) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00434">channel.h:434</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_afb9bb27c57a465eba9b9701fda90d8a7"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#afb9bb27c57a465eba9b9701fda90d8a7">MAX_OLI_DIGITS</a></div><div class="ttdeci">#define MAX_OLI_DIGITS</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae78444a7f0a0e660a315434970e8b0f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae78444a7f0a0e660a315434970e8b0f2">&#9670;&nbsp;</a></span>set_id_from_pai()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int set_id_from_pai </td>
          <td>(</td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00191">191</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d47/callerid_8h_source.html#l00329">AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00341">AST_PRES_PROHIB_USER_NUMBER_NOT_SCREENED</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00098">get_id_header()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00044">set_id_from_hdr()</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00428">caller_id_incoming_request()</a>, and <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00398">update_incoming_connected_line()</a>.</p>
<div class="fragment"><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;{</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t pai_str = { <span class="stringliteral">&quot;P-Asserted-Identity&quot;</span>, 19 };</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t privacy_str = { <span class="stringliteral">&quot;Privacy&quot;</span>, 7 };</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   pjsip_fromto_hdr *pai_hdr = <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a04aed2b390c251aaa075de803b8f4c11">get_id_header</a>(rdata, &amp;pai_str);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   pjsip_generic_string_hdr *privacy;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <span class="keywordflow">if</span> (!pai_hdr) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#af1c2d5cc94583d5336165addbbe05890">set_id_from_hdr</a>(pai_hdr, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <span class="keywordflow">if</span> (!id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   privacy = pjsip_msg_find_hdr_by_name(rdata-&gt;msg_info.msg, &amp;privacy_str, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <span class="keywordflow">if</span> (!privacy || !pj_stricmp2(&amp;privacy-&gt;hvalue, <span class="stringliteral">&quot;none&quot;</span>)) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordtype">id</span>-&gt;number.presentation = <a class="code" href="../../de/d47/callerid_8h.html#af01ad9e215f9e9941b68f1ff1559d409">AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</a>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="keywordtype">id</span>-&gt;name.presentation = <a class="code" href="../../de/d47/callerid_8h.html#af01ad9e215f9e9941b68f1ff1559d409">AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</a>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keywordtype">id</span>-&gt;number.presentation = <a class="code" href="../../de/d47/callerid_8h.html#a111c2e0f01dfcf8be481e8edd0fd2c3d">AST_PRES_PROHIB_USER_NUMBER_NOT_SCREENED</a>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordtype">id</span>-&gt;name.presentation = <a class="code" href="../../de/d47/callerid_8h.html#a111c2e0f01dfcf8be481e8edd0fd2c3d">AST_PRES_PROHIB_USER_NUMBER_NOT_SCREENED</a>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;}</div><div class="ttc" id="res__pjsip__caller__id_8c_html_a04aed2b390c251aaa075de803b8f4c11"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#a04aed2b390c251aaa075de803b8f4c11">get_id_header</a></div><div class="ttdeci">static pjsip_fromto_hdr * get_id_header(pjsip_rx_data *rdata, const pj_str_t *header_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00098">res_pjsip_caller_id.c:98</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_af1c2d5cc94583d5336165addbbe05890"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#af1c2d5cc94583d5336165addbbe05890">set_id_from_hdr</a></div><div class="ttdeci">static void set_id_from_hdr(pjsip_fromto_hdr *hdr, struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00044">res_pjsip_caller_id.c:44</a></div></div>
<div class="ttc" id="callerid_8h_html_a111c2e0f01dfcf8be481e8edd0fd2c3d"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a111c2e0f01dfcf8be481e8edd0fd2c3d">AST_PRES_PROHIB_USER_NUMBER_NOT_SCREENED</a></div><div class="ttdeci">#define AST_PRES_PROHIB_USER_NUMBER_NOT_SCREENED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00341">callerid.h:341</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="callerid_8h_html_af01ad9e215f9e9941b68f1ff1559d409"><div class="ttname"><a href="../../de/d47/callerid_8h.html#af01ad9e215f9e9941b68f1ff1559d409">AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</a></div><div class="ttdeci">#define AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00329">callerid.h:329</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af1c9cd5e65be75228835a60a69d59326"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1c9cd5e65be75228835a60a69d59326">&#9670;&nbsp;</a></span>set_id_from_rpid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int set_id_from_rpid </td>
          <td>(</td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00232">232</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d47/callerid_8h_source.html#l00324">AST_PRES_ALLOWED</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00325">AST_PRES_RESTRICTED</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00319">AST_PRES_USER_NUMBER_PASSED_SCREEN</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00318">AST_PRES_USER_NUMBER_UNSCREENED</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00098">get_id_header()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00044">set_id_from_hdr()</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00428">caller_id_incoming_request()</a>, and <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00398">update_incoming_connected_line()</a>.</p>
<div class="fragment"><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;{</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t rpid_str = { <span class="stringliteral">&quot;Remote-Party-ID&quot;</span>, 15 };</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t privacy_str = { <span class="stringliteral">&quot;privacy&quot;</span>, 7 };</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t screen_str = { <span class="stringliteral">&quot;screen&quot;</span>, 6 };</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   pjsip_fromto_hdr *rpid_hdr = <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a04aed2b390c251aaa075de803b8f4c11">get_id_header</a>(rdata, &amp;rpid_str);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   pjsip_param *screen;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   pjsip_param *privacy;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   <span class="keywordflow">if</span> (!rpid_hdr) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#af1c2d5cc94583d5336165addbbe05890">set_id_from_hdr</a>(rpid_hdr, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <span class="keywordflow">if</span> (!id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   privacy = pjsip_param_find(&amp;rpid_hdr-&gt;other_param, &amp;privacy_str);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   screen = pjsip_param_find(&amp;rpid_hdr-&gt;other_param, &amp;screen_str);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   <span class="keywordflow">if</span> (privacy &amp;&amp; !pj_stricmp2(&amp;privacy-&gt;value, <span class="stringliteral">&quot;full&quot;</span>)) {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keywordtype">id</span>-&gt;number.presentation = <a class="code" href="../../de/d47/callerid_8h.html#a405736564654ff0e5a98d4be4c57b16c">AST_PRES_RESTRICTED</a>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="keywordtype">id</span>-&gt;name.presentation = <a class="code" href="../../de/d47/callerid_8h.html#a405736564654ff0e5a98d4be4c57b16c">AST_PRES_RESTRICTED</a>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordtype">id</span>-&gt;number.presentation = <a class="code" href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="keywordtype">id</span>-&gt;name.presentation = <a class="code" href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;   <span class="keywordflow">if</span> (screen &amp;&amp; !pj_stricmp2(&amp;screen-&gt;value, <span class="stringliteral">&quot;yes&quot;</span>)) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordtype">id</span>-&gt;number.presentation |= <a class="code" href="../../de/d47/callerid_8h.html#a373e33a23b1df10c39311947fc724b11">AST_PRES_USER_NUMBER_PASSED_SCREEN</a>;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordtype">id</span>-&gt;name.presentation |= <a class="code" href="../../de/d47/callerid_8h.html#a373e33a23b1df10c39311947fc724b11">AST_PRES_USER_NUMBER_PASSED_SCREEN</a>;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keywordtype">id</span>-&gt;number.presentation |= <a class="code" href="../../de/d47/callerid_8h.html#a24813a6a337abb76e92c7f226f68c3cd">AST_PRES_USER_NUMBER_UNSCREENED</a>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="keywordtype">id</span>-&gt;name.presentation |= <a class="code" href="../../de/d47/callerid_8h.html#a24813a6a337abb76e92c7f226f68c3cd">AST_PRES_USER_NUMBER_UNSCREENED</a>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div><div class="ttc" id="res__pjsip__caller__id_8c_html_a04aed2b390c251aaa075de803b8f4c11"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#a04aed2b390c251aaa075de803b8f4c11">get_id_header</a></div><div class="ttdeci">static pjsip_fromto_hdr * get_id_header(pjsip_rx_data *rdata, const pj_str_t *header_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00098">res_pjsip_caller_id.c:98</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_af1c2d5cc94583d5336165addbbe05890"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#af1c2d5cc94583d5336165addbbe05890">set_id_from_hdr</a></div><div class="ttdeci">static void set_id_from_hdr(pjsip_fromto_hdr *hdr, struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00044">res_pjsip_caller_id.c:44</a></div></div>
<div class="ttc" id="callerid_8h_html_a405736564654ff0e5a98d4be4c57b16c"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a405736564654ff0e5a98d4be4c57b16c">AST_PRES_RESTRICTED</a></div><div class="ttdeci">#define AST_PRES_RESTRICTED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00325">callerid.h:325</a></div></div>
<div class="ttc" id="callerid_8h_html_a24813a6a337abb76e92c7f226f68c3cd"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a24813a6a337abb76e92c7f226f68c3cd">AST_PRES_USER_NUMBER_UNSCREENED</a></div><div class="ttdeci">#define AST_PRES_USER_NUMBER_UNSCREENED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00318">callerid.h:318</a></div></div>
<div class="ttc" id="callerid_8h_html_a373e33a23b1df10c39311947fc724b11"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a373e33a23b1df10c39311947fc724b11">AST_PRES_USER_NUMBER_PASSED_SCREEN</a></div><div class="ttdeci">#define AST_PRES_USER_NUMBER_PASSED_SCREEN</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00319">callerid.h:319</a></div></div>
<div class="ttc" id="callerid_8h_html_a4b8463f8be514e1134291b2a9ddaeb35"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a></div><div class="ttdeci">#define AST_PRES_ALLOWED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00324">callerid.h:324</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a602337a276201e5bb6cf0db2957a9d4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a602337a276201e5bb6cf0db2957a9d4e">&#9670;&nbsp;</a></span>should_queue_connected_line_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int should_queue_connected_line_update </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00316">316</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00207">ast_sip_session::id</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00341">ast_party_id::name</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00265">ast_party_name::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00280">ast_party_name::valid</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00398">update_incoming_connected_line()</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   <span class="comment">/* Invalid number means no update */</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   <span class="keywordflow">if</span> (!id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   <span class="comment">/* If the session has never communicated an update or if the</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">    * new ID has a different number than the session, then we</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">    * should queue an update</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) ||</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;         strcmp(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>)) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <span class="comment">/* By making it to this point, it means the number is not enough</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">    * to determine if an update should be sent. Now we look at</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">    * the name</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <span class="comment">/* If the number couldn&#39;t warrant an update and the name is</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">    * invalid, then no update</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <span class="keywordflow">if</span> (!id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <span class="comment">/* If the name has changed or we don&#39;t have a name set for the</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">    * session, then we should send an update</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) ||</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;         strcmp(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>)) {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   }</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   <span class="comment">/* Neither the name nor the number have changed. No update */</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div><div class="ttc" id="structast__party__number_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_number::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00292">channel.h:292</a></div></div>
<div class="ttc" id="structast__party__id_html_aab4036618469f3fa9ab26a22726ba2db"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">ast_party_id::name</a></div><div class="ttdeci">struct ast_party_name name</div><div class="ttdoc">Subscriber name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00341">channel.h:341</a></div></div>
<div class="ttc" id="structast__party__name_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_name::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber name (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00265">channel.h:265</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__party__name_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_name::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the name information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00280">channel.h:280</a></div></div>
<div class="ttc" id="structast__sip__session_html_a8791d240f8a9c2dc271a1c8542cfe8cc"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">ast_sip_session::id</a></div><div class="ttdeci">struct ast_party_id id</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00207">res_pjsip_session.h:207</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00849">849</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00328">AST_MODPRI_APP_DEPEND</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../d2/dc0/pjsip__session_8c_source.html#l00063">ast_sip_session_unregister_supplement()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, and <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00842">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;{</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a>(&amp;<a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a3151d62c32f29cea5e4b15d3ce968b0e">caller_id_supplement</a>);</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;}</div><div class="ttc" id="res__pjsip__session_8h_html_aae89632996ffdcf888ab251c14dc6cdb"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a></div><div class="ttdeci">void ast_sip_session_unregister_supplement(struct ast_sip_session_supplement *supplement)</div><div class="ttdoc">Unregister a an supplement to SIP session processing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc0/pjsip__session_8c_source.html#l00063">pjsip_session.c:63</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_a3151d62c32f29cea5e4b15d3ce968b0e"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#a3151d62c32f29cea5e4b15d3ce968b0e">caller_id_supplement</a></div><div class="ttdeci">static struct ast_sip_session_supplement caller_id_supplement</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00833">res_pjsip_caller_id.c:833</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a55499dcb22adfb042f81e1def68e70c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55499dcb22adfb042f81e1def68e70c8">&#9670;&nbsp;</a></span>update_incoming_connected_line()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void update_incoming_connected_line </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00398">398</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l01811">ast_party_id_free()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01757">ast_party_id_init()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00847">ast_sip_endpoint::id</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00362">queue_connected_line_update()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00191">set_id_from_pai()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00232">set_id_from_rpid()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00316">should_queue_connected_line_update()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00643">ast_sip_endpoint_id_configuration::trust_connected_line</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00631">ast_sip_endpoint_id_configuration::trust_inbound</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00428">caller_id_incoming_request()</a>, and <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00471">caller_id_incoming_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;{</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> <a class="code" href="../../da/dfb/app__queue_8c.html#acd1f0e9b4730ec60f62cb0806cb06ef1">id</a>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#af90392159dbd48255e5bb617cadf85b0">trust_connected_line</a></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      || !session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a779cb7173ab8c2d34b2afaeb1c6ba2c5">trust_inbound</a>) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(&amp;<span class="keywordtype">id</span>);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#ae78444a7f0a0e660a315434970e8b0f2">set_id_from_pai</a>(rdata, &amp;<span class="keywordtype">id</span>) || !<a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#af1c9cd5e65be75228835a60a69d59326">set_id_from_rpid</a>(rdata, &amp;<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a602337a276201e5bb6cf0db2957a9d4e">should_queue_connected_line_update</a>(session, &amp;<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;         <a class="code" href="../../dc/d2a/res__pjsip__caller__id_8c.html#a3375299399761f19432c744c761336e2">queue_connected_line_update</a>(session, &amp;<span class="keywordtype">id</span>);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(&amp;<span class="keywordtype">id</span>);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div><div class="ttc" id="structast__party__id_html"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html">ast_party_id</a></div><div class="ttdoc">Information needed to identify an endpoint in a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00339">channel.h:339</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_af1c9cd5e65be75228835a60a69d59326"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#af1c9cd5e65be75228835a60a69d59326">set_id_from_rpid</a></div><div class="ttdeci">static int set_id_from_rpid(pjsip_rx_data *rdata, struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00232">res_pjsip_caller_id.c:232</a></div></div>
<div class="ttc" id="channel_8h_html_a5399dc7357197254794b990b263a2b7b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a></div><div class="ttdeci">void ast_party_id_free(struct ast_party_id *doomed)</div><div class="ttdoc">Destroy the party id contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01811">channel.c:1811</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_a3375299399761f19432c744c761336e2"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#a3375299399761f19432c744c761336e2">queue_connected_line_update</a></div><div class="ttdeci">static void queue_connected_line_update(struct ast_sip_session *session, const struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00362">res_pjsip_caller_id.c:362</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_a602337a276201e5bb6cf0db2957a9d4e"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#a602337a276201e5bb6cf0db2957a9d4e">should_queue_connected_line_update</a></div><div class="ttdeci">static int should_queue_connected_line_update(const struct ast_sip_session *session, const struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00316">res_pjsip_caller_id.c:316</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a50783ac9bc6f4943369ed254972049ac"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">ast_sip_endpoint::id</a></div><div class="ttdeci">struct ast_sip_endpoint_id_configuration id</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00847">res_pjsip.h:847</a></div></div>
<div class="ttc" id="res__pjsip__caller__id_8c_html_ae78444a7f0a0e660a315434970e8b0f2"><div class="ttname"><a href="../../dc/d2a/res__pjsip__caller__id_8c.html#ae78444a7f0a0e660a315434970e8b0f2">set_id_from_pai</a></div><div class="ttdeci">static int set_id_from_pai(pjsip_rx_data *rdata, struct ast_party_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00191">res_pjsip_caller_id.c:191</a></div></div>
<div class="ttc" id="structast__sip__endpoint__id__configuration_html_a779cb7173ab8c2d34b2afaeb1c6ba2c5"><div class="ttname"><a href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a779cb7173ab8c2d34b2afaeb1c6ba2c5">ast_sip_endpoint_id_configuration::trust_inbound</a></div><div class="ttdeci">unsigned int trust_inbound</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00631">res_pjsip.h:631</a></div></div>
<div class="ttc" id="channel_8h_html_a2126ac3bbc1a14f6ed5ccdfcbb851776"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a></div><div class="ttdeci">void ast_party_id_init(struct ast_party_id *init)</div><div class="ttdoc">Initialize the given party id structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01757">channel.c:1757</a></div></div>
<div class="ttc" id="structast__sip__endpoint__id__configuration_html_af90392159dbd48255e5bb617cadf85b0"><div class="ttname"><a href="../../d4/df6/structast__sip__endpoint__id__configuration.html#af90392159dbd48255e5bb617cadf85b0">ast_sip_endpoint_id_configuration::trust_connected_line</a></div><div class="ttdeci">unsigned int trust_connected_line</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00643">res_pjsip.h:643</a></div></div>
<div class="ttc" id="app__queue_8c_html_acd1f0e9b4730ec60f62cb0806cb06ef1"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#acd1f0e9b4730ec60f62cb0806cb06ef1">id</a></div><div class="ttdeci">enum queue_result id</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01507">app_queue.c:1507</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;PJSIP Caller ID Support&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_APP_DEPEND, .requires = &quot;res_pjsip,res_pjsip_session&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00861">861</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00861">861</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

</div>
</div>
<a id="a3151d62c32f29cea5e4b15d3ce968b0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3151d62c32f29cea5e4b15d3ce968b0e">&#9670;&nbsp;</a></span>caller_id_supplement</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/db8/structast__sip__session__supplement.html">ast_sip_session_supplement</a> caller_id_supplement</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00833">833</a> of file <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html">res_pjsip_caller_id.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:30 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
